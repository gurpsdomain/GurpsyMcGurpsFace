webpackJsonp([4],{"+Bur":function(t,e,i){t.exports=r;var n=i("rOzH").EventEmitter;function r(){n.call(this)}i("lDCR")(r,n),r.Readable=i("Osec"),r.Writable=i("QRYi"),r.Duplex=i("XvLI"),r.Transform=i("EJO3"),r.PassThrough=i("rr9E"),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(u(),0===n.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",a),i.removeListener("close",l),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",c),t.on("error",c),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t}},"/Aon":function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},"/FOo":function(t,e,i){"use strict";var n=i("A5ts");e.JsonConvert=n.JsonConvert;var r=i("pPow");e.ValueCheckingMode=r.ValueCheckingMode,e.OperationMode=r.OperationMode;var o=i("OSds");e.JsonObject=o.JsonObject,e.JsonProperty=o.JsonProperty,e.JsonConverter=o.JsonConverter;var s=i("Yuvf");e.Any=s.Any},"/ZK1":function(t,e,i){"use strict";i.d(e,"a",function(){return o}),e.b=s;var n=i("LMZF"),r=i("Hi/f"),o=(n._13(r.b,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(512,r.b,r.b,[])])}),n._14({encapsulation:0,styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%] {\n      overflow-x: auto; }\n\n    [_nghost-%COMP%]     .textLayer {\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      overflow: hidden;\n      opacity: 0.2;\n      line-height: 1.0; }\n\n    [_nghost-%COMP%]     .textLayer > div {\n      color: transparent;\n      position: absolute;\n      white-space: pre;\n      cursor: text;\n      -webkit-transform-origin: 0% 0%;\n      transform-origin: 0% 0%; }\n\n    [_nghost-%COMP%]     .textLayer .highlight {\n      margin: -1px;\n      padding: 1px;\n      background-color: #002bff;\n      border-radius: 4px; }\n\n    [_nghost-%COMP%]     .textLayer .highlight.begin {\n      border-radius: 4px 0px 0px 4px; }\n\n    [_nghost-%COMP%]     .textLayer .highlight.end {\n      border-radius: 0px 4px 4px 0px; }\n\n    [_nghost-%COMP%]     .textLayer .highlight.middle {\n      border-radius: 0px; }\n\n    [_nghost-%COMP%]     .textLayer .highlight.selected {\n      background-color: darkgreen; }\n\n    [_nghost-%COMP%]     .textLayer ::-moz-selection {\n      background: #002bff; }\n\n    [_nghost-%COMP%]     .textLayer ::selection {\n      background: #002bff; }\n\n    [_nghost-%COMP%]     .textLayer ::-moz-selection {\n      background: #002bff; }\n\n    [_nghost-%COMP%]     .textLayer .endOfContent {\n      display: block;\n      position: absolute;\n      left: 0px;\n      top: 100%;\n      right: 0px;\n      bottom: 0px;\n      z-index: -1;\n      cursor: default;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      -moz-user-select: none; }\n\n    [_nghost-%COMP%]     .textLayer .endOfContent.active {\n      top: 0px; }\n\n    [_nghost-%COMP%]     .annotationLayer section {\n      position: absolute; }\n\n    [_nghost-%COMP%]     .annotationLayer .linkAnnotation > a {\n      position: absolute;\n      font-size: 1em;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%; }\n\n    [_nghost-%COMP%]     .annotationLayer .linkAnnotation > a {\n      background: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7") 0 0 repeat; }\n\n    [_nghost-%COMP%]     .annotationLayer .linkAnnotation > a:hover {\n      opacity: 0.2;\n      background: #002bff;\n      -webkit-box-shadow: 0px 2px 10px #002bff;\n              box-shadow: 0px 2px 10px #002bff; }\n\n    [_nghost-%COMP%]     .annotationLayer .textAnnotation img {\n      position: absolute;\n      cursor: pointer; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input {\n      background-color: #002bff;\n      border: 1px solid transparent;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      font-size: 9px;\n      height: 100%;\n      padding: 0 3px;\n      vertical-align: top;\n      width: 100%; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea {\n      font: message-box;\n      font-size: 9px;\n      resize: none; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled] {\n      background: none;\n      border: 1px solid transparent;\n      cursor: not-allowed; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover {\n      border: 1px solid #000; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus {\n      background: none;\n      border: 1px solid transparent; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb {\n      font-family: monospace;\n      padding-left: 2px;\n      padding-right: 0; }\n\n    [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus {\n      width: 115%; }\n\n    [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input {\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      -ms-appearance: none;\n      appearance: none; }\n\n    [_nghost-%COMP%]     .annotationLayer .popupWrapper {\n      position: absolute;\n      width: 20em; }\n\n    [_nghost-%COMP%]     .annotationLayer .popup {\n      position: absolute;\n      z-index: 200;\n      max-width: 20em;\n      background-color: #FFFF99;\n      -webkit-box-shadow: 0px 2px 5px #333;\n              box-shadow: 0px 2px 5px #333;\n      border-radius: 2px;\n      padding: 0.6em;\n      margin-left: 5px;\n      cursor: pointer;\n      word-wrap: break-word; }\n\n    [_nghost-%COMP%]     .annotationLayer .popup h1 {\n      font-size: 1em;\n      border-bottom: 1px solid #000000;\n      padding-bottom: 0.2em; }\n\n    [_nghost-%COMP%]     .annotationLayer .popup p {\n      padding-top: 0.2em; }\n\n    [_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation {\n      cursor: pointer; }\n\n    [_nghost-%COMP%]     .pdfViewer .canvasWrapper {\n      overflow: hidden; }\n\n    [_nghost-%COMP%]     .pdfViewer .page {\n      direction: ltr;\n      width: 816px;\n      height: 1056px;\n      margin: 1px auto -8px auto;\n      position: relative;\n      overflow: visible;\n      border: 9px solid transparent;\n      background-clip: content-box;\n      -o-border-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=") 9 9 repeat;\n         border-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=") 9 9 repeat;\n      background-color: white; }\n\n    [_nghost-%COMP%]     .pdfViewer.removePageBorders .page {\n      margin: 0px auto 10px auto;\n      border: none; }\n\n    [_nghost-%COMP%]     .pdfViewer.singlePageView {\n      display: inline-block; }\n\n    [_nghost-%COMP%]     .pdfViewer.singlePageView .page {\n      margin: 0;\n      border: none; }\n\n    [_nghost-%COMP%]     .pdfViewer .page canvas {\n      margin: 0;\n      display: block; }\n\n    [_nghost-%COMP%]     .pdfViewer .page .loadingIcon {\n      position: absolute;\n      display: block;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background: url("data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==") center no-repeat; }'],data:{}}));function s(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["class","ng2-pdf-viewer-container"]],null,null,null,null,null)),(t()(),n._16(1,0,null,null,0,"div",[["class","pdfViewer"]],null,null,null,null,null))],null,null)}n._12("pdf-viewer",r.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"pdf-viewer",[],null,[["window","resize"]],function(t,e,i){var r=!0;return"window:resize"===e&&(r=!1!==n._28(t,1).onPageResize()&&r),r},s,o)),n._15(1,638976,null,0,r.a,[n.o],null,null)],function(t,e){t(e,1,0)},null)},{src:"src",page:"page",renderText:"render-text",originalSize:"original-size",showAll:"show-all",stickToPage:"stick-to-page",zoom:"zoom",rotation:"rotation",externalLinkTarget:"external-link-target",autoresize:"autoresize",fitToPage:"fit-to-page"},{afterLoadComplete:"after-load-complete",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},[])},"/cYh":function(t,e,i){"use strict";var n=i("zOKz").Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd".repeat(i);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd".repeat(i+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd".repeat(i+2)}}(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=s(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i)return 0;if((r=s(e[n]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i)return 0;if((r=s(e[n]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"/n45":function(t,e,i){"use strict";i.d(e,"a",function(){return l}),e.b=u;var n=i("LMZF"),r=i("j5BN"),o=i("l6RC"),s=i("Un6q"),a=i("V8+5"),l=(n._13(r.n,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(512,o.a,o.a,[]),n._25(256,r.f,!0,[]),n._25(512,r.n,r.n,[[2,r.f]])])}),n._13(r.A,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,r.h,null,[n.B]),n._25(4608,r.c,r.z,[[2,r.h]]),n._25(512,r.A,r.A,[])])}),n._13(r.r,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,r.h,null,[n.B]),n._25(4608,r.c,r.z,[[2,r.h]]),n._25(512,r.A,r.A,[]),n._25(512,r.r,r.r,[]),n._25(256,r.g,r.k,[])])}),n._13(r.p,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(512,o.a,o.a,[]),n._25(256,r.f,!0,[]),n._25(512,r.n,r.n,[[2,r.f]]),n._25(512,r.p,r.p,[])])}),n._13(r.u,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(4608,a.a,a.a,[]),n._25(4608,s.k,s.j,[n.B,[2,s.r]]),n._25(512,o.a,o.a,[]),n._25(256,r.f,!0,[]),n._25(512,r.n,r.n,[[2,r.f]]),n._25(512,a.b,a.b,[]),n._25(512,r.y,r.y,[]),n._25(512,s.b,s.b,[]),n._25(512,r.w,r.w,[]),n._25(512,r.u,r.u,[])])}),n._13(r.y,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(4608,a.a,a.a,[]),n._25(512,o.a,o.a,[]),n._25(256,r.f,!0,[]),n._25(512,r.n,r.n,[[2,r.f]]),n._25(512,a.b,a.b,[]),n._25(512,r.y,r.y,[])])}),n._13(r.w,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(512,r.w,r.w,[])])}),n._14({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}}));function c(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null]],null,null,f,d)),n._15(1,49152,null,0,r.v,[],{state:[0,"state"],disabled:[1,"disabled"]},null)],function(t,e){var i=e.component;t(e,1,0,i.selected?"checked":"",i.disabled)},function(t,e){t(e,0,0,"indeterminate"===n._28(e,1).state,"checked"===n._28(e,1).state,n._28(e,1).disabled)})}function u(t){return n._39(2,[(t()(),n._11(16777216,null,null,1,null,c)),n._15(1,16384,null,0,s.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._16(2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),n._27(null,0),(t()(),n._16(4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),n._15(5,212992,null,0,r.x,[n.o,n.F,a.a,[2,r.m]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var i=e.component;t(e,1,0,i.multiple),t(e,5,0,i.disabled||i.disableRipple,i._getHostElement())},function(t,e){t(e,4,0,n._28(e,5).unbounded)})}n._12("mat-option",r.t,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,i){var r=!0;return"click"===e&&(r=!1!==n._28(t,1)._selectViaInteraction()&&r),"keydown"===e&&(r=!1!==n._28(t,1)._handleKeydown(i)&&r),r},u,l)),n._15(1,8437760,null,0,r.t,[n.o,n.h,[2,r.l],[2,r.s]],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._getTabIndex(),n._28(e,1).selected,n._28(e,1).multiple,n._28(e,1).active,n._28(e,1).id,n._28(e,1).selected.toString(),n._28(e,1).disabled.toString(),n._28(e,1).disabled)})},{value:"value",disabled:"disabled"},{onSelectionChange:"onSelectionChange"},["*"]);var h=n._14({encapsulation:2,styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}"],data:{}});function p(t){return n._39(2,[(t()(),n._16(0,0,null,null,1,"label",[["class","mat-optgroup-label"]],[[8,"id",0]],null,null,null,null)),(t()(),n._37(1,null,["",""])),n._27(null,0)],null,function(t,e){var i=e.component;t(e,0,0,i._labelId),t(e,1,0,i.label)})}n._12("mat-optgroup",r.s,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-optgroup",[["class","mat-optgroup"],["role","group"]],[[2,"mat-optgroup-disabled",null],[1,"aria-disabled",0],[1,"aria-labelledby",0]],null,null,p,h)),n._15(1,49152,null,0,r.s,[],null,null)],null,function(t,e){t(e,0,0,n._28(e,1).disabled,n._28(e,1).disabled.toString(),n._28(e,1)._labelId)})},{disabled:"disabled",label:"label"},{},["mat-option"]);var d=n._14({encapsulation:2,styles:[".mat-pseudo-checkbox{width:20px;height:20px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:9px;left:2px;width:16px;opacity:1}.mat-pseudo-checkbox-checked::after{top:5px;left:3px;width:12px;height:5px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1}"],data:{}});function f(t){return n._39(2,[],null,null)}n._12("mat-pseudo-checkbox",r.v,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null]],null,null,f,d)),n._15(1,49152,null,0,r.v,[],null,null)],null,function(t,e){t(e,0,0,"indeterminate"===n._28(e,1).state,"checked"===n._28(e,1).state,n._28(e,1).disabled)})},{state:"state",disabled:"disabled"},{},[])},"0cZJ":function(t,e,i){"use strict";i.d(e,"a",function(){return b});var n=i("6Xbx"),r=i("8Xfy"),o=i("XEj9"),s=i("LMZF"),a=i("0nO6"),l=i("j5BN"),c=i("Un6q"),u=i("ppgG"),h=new s.w("mat-checkbox-click-action"),p=0,d={provide:a.g,useExisting:Object(s._4)(function(){return y}),multi:!0},f={Init:0,Checked:1,Unchecked:2,Indeterminate:3};f[f.Init]="Init",f[f.Checked]="Checked",f[f.Unchecked]="Unchecked",f[f.Indeterminate]="Indeterminate";var m=function(){return function(){}}(),g=function(){return function(t){this._elementRef=t}}(),y=function(t){function e(e,i,n,r,o){var a=t.call(this,e)||this;return a._changeDetectorRef=i,a._focusMonitor=n,a._clickAction=o,a.ariaLabel="",a.ariaLabelledby=null,a._uniqueId="mat-checkbox-"+ ++p,a.id=a._uniqueId,a.labelPosition="after",a.name=null,a.change=new s.r,a.indeterminateChange=new s.r,a._onTouched=function(){},a._currentAnimationClass="",a._currentCheckState=f.Init,a._controlValueAccessorChangeFn=function(){},a._checked=!1,a._indeterminate=!1,a.tabIndex=parseInt(r)||0,a}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(o.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return"after"==this.labelPosition?"start":"end"},set:function(t){this.labelPosition="start"==t?"after":"before"},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(e){return t._onInputFocusChange(e)})},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement)},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(t){var e=t!=this._indeterminate;this._indeterminate=t,e&&(this._indeterminate?this._transitionCheckState(f.Indeterminate):this._transitionCheckState(this.checked?f.Checked:f.Unchecked),this.indeterminateChange.emit(this._indeterminate))},enumerable:!0,configurable:!0}),e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._onLabelTextChange=function(){this._changeDetectorRef.markForCheck()},e.prototype.writeValue=function(t){this.checked=!!t},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetectorRef.markForCheck()},e.prototype._getAriaChecked=function(){return this.checked?"true":this.indeterminate?"mixed":"false"},e.prototype._transitionCheckState=function(t){var e=this._currentCheckState,i=this._elementRef.nativeElement;e!==t&&(this._currentAnimationClass.length>0&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0&&i.classList.add(this._currentAnimationClass))},e.prototype._emitChangeEvent=function(){var t=new m;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t)},e.prototype._onInputFocusChange=function(t){this._focusRipple||"keyboard"!==t?t||(this._removeFocusRipple(),this._onTouched()):this._focusRipple=this.ripple.launch(0,0,{persistent:!0})},e.prototype.toggle=function(){this.checked=!this.checked},e.prototype._onInputClick=function(t){var e=this;t.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(function(){e._indeterminate=!1,e.indeterminateChange.emit(e._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?f.Checked:f.Unchecked),this._emitChangeEvent())},e.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},e.prototype._onInteractionEvent=function(t){t.stopPropagation()},e.prototype._getAnimationClassForCheckStateTransition=function(t,e){var i="";switch(t){case f.Init:if(e===f.Checked)i="unchecked-checked";else{if(e!=f.Indeterminate)return"";i="unchecked-indeterminate"}break;case f.Unchecked:i=e===f.Checked?"unchecked-checked":"unchecked-indeterminate";break;case f.Checked:i=e===f.Unchecked?"checked-unchecked":"checked-indeterminate";break;case f.Indeterminate:i=e===f.Checked?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+i},e.prototype._removeFocusRipple=function(){this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null)},e.decorators=[{type:s.j,args:[{selector:"mat-checkbox",template:'<label [attr.for]="inputId" class="mat-checkbox-layout" #label><div class="mat-checkbox-inner-container" [class.mat-checkbox-inner-container-no-side-margin]="!checkboxLabel.textContent || !checkboxLabel.textContent.trim()"><input #input class="mat-checkbox-input cdk-visually-hidden" type="checkbox" [id]="inputId" [required]="required" [checked]="checked" [attr.value]="value" [disabled]="disabled" [attr.name]="name" [tabIndex]="tabIndex" [indeterminate]="indeterminate" [attr.aria-label]="ariaLabel" [attr.aria-labelledby]="ariaLabelledby" [attr.aria-checked]="_getAriaChecked()" (change)="_onInteractionEvent($event)" (click)="_onInputClick($event)"><div matRipple class="mat-checkbox-ripple" [matRippleTrigger]="label" [matRippleDisabled]="_isRippleDisabled()" [matRippleRadius]="25" [matRippleCentered]="true" [matRippleAnimation]="{enterDuration: 300}"></div><div class="mat-checkbox-frame"></div><div class="mat-checkbox-background"><svg version="1.1" focusable="false" class="mat-checkbox-checkmark" viewBox="0 0 24 24" xml:space="preserve"><path class="mat-checkbox-checkmark-path" fill="none" stroke="white" d="M4.1,12.7 9,17.6 20.3,6.3"/></svg><div class="mat-checkbox-mixedmark"></div></div></div><span class="mat-checkbox-label" #checkboxLabel (cdkObserveContent)="_onLabelTextChange()"><span style="display:none">&nbsp;</span><ng-content></ng-content></span></label>',styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.91026}50%{animation-timing-function:cubic-bezier(0,0,.2,.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);stroke-dashoffset:0}to{stroke-dashoffset:-22.91026}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}100%,32.8%{opacity:0;transform:scaleX(0)}}.mat-checkbox-checkmark,.mat-checkbox-mixedmark{width:calc(100% - 4px)}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);cursor:pointer}.mat-checkbox-layout{cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-inner-container{display:inline-block;height:20px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:20px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0,0,.2,.1);border-width:2px;border-style:solid}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0,0,.2,.1),opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.91026;stroke-dasharray:22.91026;stroke-width:2.66667px}.mat-checkbox-mixedmark{height:2px;opacity:0;transform:scaleX(0) rotate(0)}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0s mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0s mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:.3s linear 0s mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-ripple{position:absolute;left:-15px;top:-15px;height:50px;width:50px;z-index:1;pointer-events:none}"],exportAs:"matCheckbox",host:{class:"mat-checkbox","[id]":"id","[class.mat-checkbox-indeterminate]":"indeterminate","[class.mat-checkbox-checked]":"checked","[class.mat-checkbox-disabled]":"disabled","[class.mat-checkbox-label-before]":'labelPosition == "before"'},providers:[d],inputs:["disabled","disableRipple","color","tabIndex"],encapsulation:s._0.None,preserveWhitespaces:!1,changeDetection:s.g.OnPush}]}],e.ctorParameters=function(){return[{type:s.o},{type:s.h},{type:r.h},{type:void 0,decorators:[{type:s.f,args:["tabindex"]}]},{type:void 0,decorators:[{type:s.G},{type:s.u,args:[h]}]}]},e.propDecorators={ariaLabel:[{type:s.y,args:["aria-label"]}],ariaLabelledby:[{type:s.y,args:["aria-labelledby"]}],id:[{type:s.y}],required:[{type:s.y}],align:[{type:s.y}],labelPosition:[{type:s.y}],name:[{type:s.y}],change:[{type:s.H}],indeterminateChange:[{type:s.H}],value:[{type:s.y}],_inputElement:[{type:s.X,args:["input"]}],ripple:[{type:s.X,args:[l.x]}],checked:[{type:s.y}],indeterminate:[{type:s.y}]},e}(Object(l.G)(Object(l.C)(Object(l.D)(Object(l.E)(g)),"accent"))),_={provide:a.f,useExisting:Object(s._4)(function(){return v}),multi:!0},v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),e.decorators=[{type:s.n,args:[{selector:"mat-checkbox[required][formControlName],\n             mat-checkbox[required][formControl], mat-checkbox[required][ngModel]",providers:[_],host:{"[attr.required]":'required ? "" : null'}}]}],e.ctorParameters=function(){return[]},e}(a.b),b=function(){function t(){}return t.decorators=[{type:s.C,args:[{imports:[c.b,l.y,l.n,u.c,r.a],exports:[y,v,l.n],declarations:[y,v]}]}],t.ctorParameters=function(){return[]},t}()},"0nO6":function(t,e,i){"use strict";var n=i("6Xbx"),r=i("LMZF"),o=i("Jsyr"),s=i("KRwF").a.create,a=i("dmC+"),l=i("RyBE");i.d(e,"g",function(){return v}),i.d(e,"a",function(){return w}),i.d(e,"c",function(){return P}),i.d(e,"h",function(){return M}),i.d(e,"i",function(){return st}),i.d(e,"j",function(){return yt}),i.d(e,"k",function(){return Ct}),i.d(e,"d",function(){return Dt}),i.d(e,"b",function(){return Wt}),i.d(e,"l",function(){return Gt}),i.d(e,"f",function(){return p}),i.d(e,"m",function(){return m}),i.d(e,"e",function(){return re}),i.d(e,"n",function(){return ne}),i.d(e,"o",function(){return C}),i.d(e,"p",function(){return I});var c=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return this.control?this.control.getError(t,e):null},t}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(c);function h(t){return null==t||0===t.length}var p=new r.w("NgValidators"),d=new r.w("NgAsyncValidators"),f=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,m=function(){function t(){}return t.min=function(t){return function(e){if(h(e.value)||h(t))return null;var i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}},t.max=function(t){return function(e){if(h(e.value)||h(t))return null;var i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}},t.required=function(t){return h(t.value)?{required:!0}:null},t.requiredTrue=function(t){return!0===t.value?null:{required:!0}},t.email=function(t){return f.test(t.value)?null:{email:!0}},t.minLength=function(t){return function(e){if(h(e.value))return null;var i=e.value?e.value.length:0;return i<t?{minlength:{requiredLength:t,actualLength:i}}:null}},t.maxLength=function(t){return function(e){var i=e.value?e.value.length:0;return i>t?{maxlength:{requiredLength:t,actualLength:i}}:null}},t.pattern=function(e){return e?("string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),i=new RegExp(n)):(n=e.toString(),i=e),function(t){if(h(t.value))return null;var e=t.value;return i.test(e)?null:{pattern:{requiredPattern:n,actualValue:e}}}):t.nullValidator;var i,n},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(g);return 0==e.length?null:function(t){return _(function(t,e){return e.map(function(e){return e(t)})}(t,e))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(g);return 0==e.length?null:function(t){var i=function(t,e){return e.map(function(e){return e(t)})}(t,e).map(y);return a.a.call(Object(o.a)(i),_)}},t}();function g(t){return null!=t}function y(t){var e=Object(r._22)(t)?s(t):t;if(!Object(r._21)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function _(t){var e=t.reduce(function(t,e){return null!=e?Object(n.a)({},t,e):t},{});return 0===Object.keys(e).length?null:e}var v=new r.w("NgValueAccessor"),b={provide:v,useExisting:Object(r._4)(function(){return x}),multi:!0},x=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:r.n,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[b]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o}]},t}(),A={provide:v,useExisting:Object(r._4)(function(){return P}),multi:!0};var w=new r.w("CompositionEventMode"),P=function(){function t(t,e,i){var n;this._renderer=t,this._elementRef=e,this._compositionMode=i,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=Object(l.s)()?Object(l.s)().getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}return t.prototype.writeValue=function(t){var e=null==t?"":t;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._handleInput=function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this.onChange(t)},t.decorators=[{type:r.n,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[A]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o},{type:void 0,decorators:[{type:r.G},{type:r.u,args:[w]}]}]},t}();function E(t){return t.validate?function(e){return t.validate(e)}:t}function T(t){return t.validate?function(e){return t.validate(e)}:t}var S={provide:v,useExisting:Object(r._4)(function(){return C}),multi:!0},C=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){var e=null==t?"":t;this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:r.n,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[S]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o}]},t}();function O(){throw new Error("unimplemented")}var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return O()},enumerable:!0,configurable:!0}),e}(c),R={provide:v,useExisting:Object(r._4)(function(){return D}),multi:!0},I=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(i){e._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&(t[0]._parent===e._control._parent&&t[1].name===e.name)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}(),D=function(){function t(t,e,i,n){this._renderer=t,this._elementRef=e,this._registry=i,this._injector=n,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this._control=this._injector.get(M),this._checkName(),this._registry.add(this._control,this)},t.prototype.ngOnDestroy=function(){this._registry.remove(this)},t.prototype.writeValue=function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},t.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},t.prototype.fireUncheck=function(t){this.writeValue(t)},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},t.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},t.decorators=[{type:r.n,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[R]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o},{type:I},{type:r.x}]},t.propDecorators={name:[{type:r.y}],formControlName:[{type:r.y}],value:[{type:r.y}]},t}(),L={provide:v,useExisting:Object(r._4)(function(){return k}),multi:!0},k=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:r.n,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[L]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o}]},t}(),F={provide:v,useExisting:Object(r._4)(function(){return B}),multi:!0};function N(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var B=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r._23}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var i=N(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",i)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(i){e.value=e._getOptionValue(i),t(e.value)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(){return(this._idCounter++).toString()},t.prototype._getOptionId=function(t){for(var e=0,i=Array.from(this._optionMap.keys());e<i.length;e++){var n=i[e];if(this._compareWith(this._optionMap.get(n),t))return n}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t},t.decorators=[{type:r.n,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[F]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o}]},t.propDecorators={compareWith:[{type:r.y}]},t}(),V=function(){function t(t,e,i){this._element=t,this._renderer=e,this._select=i,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(N(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},t.decorators=[{type:r.n,args:[{selector:"option"}]}],t.ctorParameters=function(){return[{type:r.o},{type:r.M},{type:B,decorators:[{type:r.G},{type:r.s}]}]},t.propDecorators={ngValue:[{type:r.y,args:["ngValue"]}],value:[{type:r.y,args:["value"]}]},t}(),z={provide:v,useExisting:Object(r._4)(function(){return j}),multi:!0};function U(t,e){return null==t?""+e:("string"==typeof e&&(e="'"+e+"'"),e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var j=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r._23}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e,i=this;if(this.value=t,Array.isArray(t)){var n=t.map(function(t){return i._getOptionId(t)});e=function(t,e){t._setSelected(n.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(i){var n=[];if(i.hasOwnProperty("selectedOptions"))for(var r=i.selectedOptions,o=0;o<r.length;o++){var s=r.item(o),a=e._getOptionValue(s.value);n.push(a)}else for(r=i.options,o=0;o<r.length;o++){if((s=r.item(o)).selected){a=e._getOptionValue(s.value);n.push(a)}}e.value=n,t(n)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},t.prototype._getOptionId=function(t){for(var e=0,i=Array.from(this._optionMap.keys());e<i.length;e++){var n=i[e];if(this._compareWith(this._optionMap.get(n)._value,t))return n}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t},t.decorators=[{type:r.n,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[z]}]}],t.ctorParameters=function(){return[{type:r.M},{type:r.o}]},t.propDecorators={compareWith:[{type:r.y}]},t}(),G=function(){function t(t,e,i){this._element=t,this._renderer=e,this._select=i,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(U(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._select?(this._value=t,this._setElementValue(U(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype._setSelected=function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},t.decorators=[{type:r.n,args:[{selector:"option"}]}],t.ctorParameters=function(){return[{type:r.o},{type:r.M},{type:j,decorators:[{type:r.G},{type:r.s}]}]},t.propDecorators={ngValue:[{type:r.y,args:["ngValue"]}],value:[{type:r.y,args:["value"]}]},t}();function W(t,e){return e.path.concat([t])}function H(t,e){t||K(e,"Cannot find control with"),e.valueAccessor||K(e,"No value accessor for form control with"),t.validator=m.compose([t.validator,e.validator]),t.asyncValidator=m.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(i){t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&X(t,e)})}(t,e),function(t,e){t.registerOnChange(function(t,i){e.valueAccessor.writeValue(t),i&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&X(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function X(t,e){e.viewToModelUpdate(t._pendingValue),t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),t._pendingChange=!1}function Y(t,e){null==t&&K(e,"Cannot find control with"),t.validator=m.compose([t.validator,e.validator]),t.asyncValidator=m.composeAsync([t.asyncValidator,e.asyncValidator])}function q(t){return K(t,"There is no FormControl instance attached to form control element with")}function K(t,e){var i;throw i=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+i)}function Q(t){return null!=t?m.compose(t.map(E)):null}function Z(t){return null!=t?m.composeAsync(t.map(T)):null}function J(t,e){if(!t.hasOwnProperty("model"))return!1;var i=t.model;return!!i.isFirstChange()||!Object(r._23)(e,i.currentValue)}var $=[x,k,C,B,j,D];function tt(t,e){t._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function et(t,e){if(!e)return null;var i=void 0,n=void 0,r=void 0;return e.forEach(function(e){var o;e.constructor===P?i=e:(o=e,$.some(function(t){return o.constructor===t})?(n&&K(t,"More than one built-in value accessor matches form control with"),n=e):(r&&K(t,"More than one custom value accessor matches form control with"),r=e))}),r||(n||(i||(K(t,"No valid value accessor for form control with"),null)))}function it(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}var nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return W(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return Q(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Z(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){},e}(u),rt=function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}(),ot={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},st=function(t){function e(e){return t.call(this,e)||this}return Object(n.b)(e,t),e.decorators=[{type:r.n,args:[{selector:"[formControlName],[ngModel],[formControl]",host:ot}]}],e.ctorParameters=function(){return[{type:M,decorators:[{type:r.R}]}]},e}(rt),at=function(t){function e(e){return t.call(this,e)||this}return Object(n.b)(e,t),e.decorators=[{type:r.n,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:ot}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.R}]}]},e}(rt);function lt(t){var e=ut(t)?t.validators:t;return Array.isArray(e)?Q(e):e||null}function ct(t,e){var i=ut(e)?e.asyncValidators:t;return Array.isArray(i)?Z(i):i||null}function ut(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var ht=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=lt(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=ct(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){void 0===t&&(t={}),this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)},t.prototype.markAsUntouched=function(t){void 0===t&&(t={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype.markAsDirty=function(t){void 0===t&&(t={}),this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)},t.prototype.markAsPristine=function(t){void 0===t&&(t={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype.markAsPending=function(t){void 0===t&&(t={}),this.status="PENDING",this._parent&&!t.onlySelf&&this._parent.markAsPending(t)},t.prototype.disable=function(t){void 0===t&&(t={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){void 0===t&&(t={}),this.status="VALID",this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){void 0===t&&(t={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)},t.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},t.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var i=y(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(function(i){return e.setErrors(i,{emitEvent:t})})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},t.prototype.setErrors=function(t,e){void 0===e&&(e={}),this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)},t.prototype.get=function(t){return function(t,e,i){return null==e?null:(e instanceof Array||(e=e.split(i)),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof dt?t.controls[e]||null:t instanceof ft&&t.at(e)||null},t))}(this,t,".")},t.prototype.getError=function(t,e){var i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null},t.prototype.hasError=function(t,e){return!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this.valueChanges=new r.r,this.statusChanges=new r.r},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){void 0===t&&(t={}),this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype._updateTouched=function(t){void 0===t&&(t={}),this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t.prototype._setUpdateStrategy=function(t){ut(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)},t}(),pt=function(t){function e(e,i,n){void 0===e&&(e=null);var r=t.call(this,lt(i),ct(n,i))||this;return r._onChange=[],r._applyFormState(e),r._setUpdateStrategy(i),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}return Object(n.b)(e,t),e.prototype.setValue=function(t,e){var i=this;void 0===e&&(e={}),this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(function(t){return t(i.value,!1!==e.emitViewToModelChange)}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null),void 0===e&&(e={}),this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t},e}(ht),dt=function(t){function e(e,i,n){var r=t.call(this,lt(i),ct(n,i))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(i),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(n.b)(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var i=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(n){i._throwIfControlMissing(n),i.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var i=this;void 0===e&&(e={}),Object.keys(t).forEach(function(n){i.controls[n]&&i.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this._forEachChild(function(i,n){i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,i){return t[i]=e instanceof pt?e.value:e.getRawValue(),t})},e.prototype._syncPendingControls=function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(i){return t(e.controls[i],i)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this.value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,i=!1;return this._forEachChild(function(n,r){i=i||e.contains(r)&&t(n)}),i},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,i,n){return(i.enabled||t.disabled)&&(e[n]=i.value),e})},e.prototype._reduceChildren=function(t,e){var i=t;return this._forEachChild(function(t,n){i=e(i,t,n)}),i},e.prototype._allControlsDisabled=function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var i=e[t];if(this.controls[i].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,i){if(void 0===t[i])throw new Error("Must supply a value for form control with name: '"+i+"'.")})},e}(ht),ft=function(t){function e(e,i,n){var r=t.call(this,lt(i),ct(n,i))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(i),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(n.b)(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var i=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),t.forEach(function(t,n){i._throwIfControlMissing(n),i.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var i=this;void 0===e&&(e={}),t.forEach(function(t,n){i.at(n)&&i.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._forEachChild(function(i,n){i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t instanceof pt?t.value:t.getRawValue()})},e.prototype._syncPendingControls=function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,i){t(e,i)})},e.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,i){if(void 0===t[i])throw new Error("Must supply a value for form control at index: "+i+".")})},e.prototype._allControlsDisabled=function(){for(var t=0,e=this.controls;t<e.length;t++){if(e[t].enabled)return!1}return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(ht),mt={provide:u,useExisting:Object(r._4)(function(){return yt})},gt=Promise.resolve(null),yt=function(t){function e(e,i){var n=t.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new r.r,n.form=new dt({},Q(e),Z(i)),n}return Object(n.b)(e,t),e.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this;gt.then(function(){var i=e._findContainer(t.path);t.control=i.registerControl(t.name,t.control),H(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){var e=this;gt.then(function(){var i=e._findContainer(t.path);i&&i.removeControl(t.name),it(e._directives,t)})},e.prototype.addFormGroup=function(t){var e=this;gt.then(function(){var i=e._findContainer(t.path),n=new dt({});Y(n,t),i.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})},e.prototype.removeFormGroup=function(t){var e=this;gt.then(function(){var i=e._findContainer(t.path);i&&i.removeControl(t.name)})},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){var i=this;gt.then(function(){i.form.get(t.path).setValue(e)})},e.prototype.setValue=function(t){this.control.setValue(t)},e.prototype.onSubmit=function(t){return this.submitted=!0,tt(this.form,this._directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},e.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},e.decorators=[{type:r.n,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[mt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]}]},e.propDecorators={options:[{type:r.y,args:["ngFormOptions"]}]},e}(u),_t='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',vt='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',bt='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',xt='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',At='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',wt=function(){function t(){}return t.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+_t+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+At)},t.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+vt+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+xt)},t.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},t.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+vt+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+xt)},t}(),Pt={provide:u,useExisting:Object(r._4)(function(){return Et})},Et=function(t){function e(e,i,n){var r=t.call(this)||this;return r._parent=e,r._validators=i,r._asyncValidators=n,r}return Object(n.b)(e,t),e.prototype._checkParentType=function(){this._parent instanceof e||this._parent instanceof yt||wt.modelGroupParentException()},e.decorators=[{type:r.n,args:[{selector:"[ngModelGroup]",providers:[Pt],exportAs:"ngModelGroup"}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.s},{type:r.T}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]}]},e.propDecorators={name:[{type:r.y,args:["ngModelGroup"]}]},e}(nt),Tt={provide:M,useExisting:Object(r._4)(function(){return Ct})},St=Promise.resolve(null),Ct=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s.control=new pt,s._registered=!1,s.update=new r.r,s._parent=e,s._rawValidators=i||[],s._rawAsyncValidators=n||[],s.valueAccessor=et(s,o),s}return Object(n.b)(e,t),e.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),J(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(e.prototype,"path",{get:function(){return this._parent?W(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return Q(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Z(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},e.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},e.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},e.prototype._setUpStandalone=function(){H(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},e.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},e.prototype._checkParentType=function(){!(this._parent instanceof Et)&&this._parent instanceof nt?wt.formGroupNameException():this._parent instanceof Et||this._parent instanceof yt||wt.modelParentException()},e.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||wt.missingNameException()},e.prototype._updateValue=function(t){var e=this;St.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},e.prototype._updateDisabled=function(t){var e=this,i=t.isDisabled.currentValue,n=""===i||i&&"false"!==i;St.then(function(){n&&!e.control.disabled?e.control.disable():!n&&e.control.disabled&&e.control.enable()})},e.decorators=[{type:r.n,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Tt],exportAs:"ngModel"}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.G},{type:r.s}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[v]}]}]},e.propDecorators={name:[{type:r.y}],isDisabled:[{type:r.y,args:["disabled"]}],model:[{type:r.y,args:["ngModel"]}],options:[{type:r.y,args:["ngModelOptions"]}],update:[{type:r.H,args:["ngModelChange"]}]},e}(M),Ot=function(){function t(){}return t.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+_t)},t.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+vt+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+xt)},t.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+_t)},t.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+vt)},t.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+bt)},t.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},t}(),Mt={provide:M,useExisting:Object(r._4)(function(){return Rt})},Rt=function(t){function e(e,i,n){var o=t.call(this)||this;return o.update=new r.r,o._rawValidators=e||[],o._rawAsyncValidators=i||[],o.valueAccessor=et(o,n),o}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"isDisabled",{set:function(t){Ot.disabledAttrWarning()},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){this._isControlChanged(t)&&(H(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),J(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return Q(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Z(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},e.prototype._isControlChanged=function(t){return t.hasOwnProperty("form")},e.decorators=[{type:r.n,args:[{selector:"[formControl]",providers:[Mt],exportAs:"ngForm"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[v]}]}]},e.propDecorators={form:[{type:r.y,args:["formControl"]}],model:[{type:r.y,args:["ngModel"]}],update:[{type:r.H,args:["ngModelChange"]}],isDisabled:[{type:r.y,args:["disabled"]}]},e}(M),It={provide:u,useExisting:Object(r._4)(function(){return Dt})},Dt=function(t){function e(e,i){var n=t.call(this)||this;return n._validators=e,n._asyncValidators=i,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new r.r,n}return Object(n.b)(e,t),e.prototype.ngOnChanges=function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this.form.get(t.path);return H(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){it(this.directives,t)},e.prototype.addFormGroup=function(t){var e=this.form.get(t.path);Y(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormGroup=function(t){},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.addFormArray=function(t){var e=this.form.get(t.path);Y(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormArray=function(t){},e.prototype.getFormArray=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){this.form.get(t.path).setValue(e)},e.prototype.onSubmit=function(t){return this.submitted=!0,tt(this.form,this.directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var i=t.form.get(e.path);e.control!==i&&(!function(t,e){e.valueAccessor.registerOnChange(function(){return q(e)}),e.valueAccessor.registerOnTouched(function(){return q(e)}),e._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(e.control,e),i&&H(i,e),e.control=i)}),this.form._updateTreeValidity({emitEvent:!1})},e.prototype._updateRegistrations=function(){var t=this;this.form._registerOnCollectionChange(function(){return t._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},e.prototype._updateValidators=function(){var t=Q(this._validators);this.form.validator=m.compose([this.form.validator,t]);var e=Z(this._asyncValidators);this.form.asyncValidator=m.composeAsync([this.form.asyncValidator,e])},e.prototype._checkFormPresent=function(){this.form||Ot.missingFormException()},e.decorators=[{type:r.n,args:[{selector:"[formGroup]",providers:[It],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]}]},e.propDecorators={form:[{type:r.y,args:["formGroup"]}],ngSubmit:[{type:r.H}]},e}(u),Lt={provide:u,useExisting:Object(r._4)(function(){return kt})},kt=function(t){function e(e,i,n){var r=t.call(this)||this;return r._parent=e,r._validators=i,r._asyncValidators=n,r}return Object(n.b)(e,t),e.prototype._checkParentType=function(){Bt(this._parent)&&Ot.groupParentException()},e.decorators=[{type:r.n,args:[{selector:"[formGroupName]",providers:[Lt]}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.G},{type:r.s},{type:r.T}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]}]},e.propDecorators={name:[{type:r.y,args:["formGroupName"]}]},e}(nt),Ft={provide:u,useExisting:Object(r._4)(function(){return Nt})},Nt=function(t){function e(e,i,n){var r=t.call(this)||this;return r._parent=e,r._validators=i,r._asyncValidators=n,r}return Object(n.b)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return W(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return Q(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Z(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){Bt(this._parent)&&Ot.arrayParentException()},e.decorators=[{type:r.n,args:[{selector:"[formArrayName]",providers:[Ft]}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.G},{type:r.s},{type:r.T}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]}]},e.propDecorators={name:[{type:r.y,args:["formArrayName"]}]},e}(u);function Bt(t){return!(t instanceof kt||t instanceof Dt||t instanceof Nt)}var Vt={provide:M,useExisting:Object(r._4)(function(){return zt})},zt=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s._added=!1,s.update=new r.r,s._parent=e,s._rawValidators=i||[],s._rawAsyncValidators=n||[],s.valueAccessor=et(s,o),s}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"isDisabled",{set:function(t){Ot.disabledAttrWarning()},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){this._added||this._setUpControl(),J(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},Object.defineProperty(e.prototype,"path",{get:function(){return W(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return Q(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Z(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){!(this._parent instanceof kt)&&this._parent instanceof nt?Ot.ngModelGroupException():this._parent instanceof kt||this._parent instanceof Dt||this._parent instanceof Nt||Ot.controlParentException()},e.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},e.decorators=[{type:r.n,args:[{selector:"[formControlName]",providers:[Vt]}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:r.G},{type:r.s},{type:r.T}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[p]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[d]}]},{type:Array,decorators:[{type:r.G},{type:r.R},{type:r.u,args:[v]}]}]},e.propDecorators={name:[{type:r.y,args:["formControlName"]}],model:[{type:r.y,args:["ngModel"]}],update:[{type:r.H,args:["ngModelChange"]}],isDisabled:[{type:r.y,args:["disabled"]}]},e}(M),Ut={provide:p,useExisting:Object(r._4)(function(){return Gt}),multi:!0},jt={provide:p,useExisting:Object(r._4)(function(){return Wt}),multi:!0},Gt=function(){function t(){}return Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){return this.required?m.required(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.decorators=[{type:r.n,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[Ut],host:{"[attr.required]":'required ? "" : null'}}]}],t.ctorParameters=function(){return[]},t.propDecorators={required:[{type:r.y}]},t}(),Wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),e.prototype.validate=function(t){return this.required?m.requiredTrue(t):null},e.decorators=[{type:r.n,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[jt],host:{"[attr.required]":'required ? "" : null'}}]}],e.ctorParameters=function(){return[]},e}(Gt),Ht={provide:p,useExisting:Object(r._4)(function(){return Xt}),multi:!0},Xt=function(){function t(){}return Object.defineProperty(t.prototype,"email",{set:function(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){return this._enabled?m.email(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.decorators=[{type:r.n,args:[{selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[Ht]}]}],t.ctorParameters=function(){return[]},t.propDecorators={email:[{type:r.y}]},t}(),Yt={provide:p,useExisting:Object(r._4)(function(){return qt}),multi:!0},qt=function(){function t(){}return t.prototype.ngOnChanges=function(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return null==this.minlength?null:this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=m.minLength(parseInt(this.minlength,10))},t.decorators=[{type:r.n,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[Yt],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={minlength:[{type:r.y}]},t}(),Kt={provide:p,useExisting:Object(r._4)(function(){return Qt}),multi:!0},Qt=function(){function t(){}return t.prototype.ngOnChanges=function(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return null!=this.maxlength?this._validator(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=m.maxLength(parseInt(this.maxlength,10))},t.decorators=[{type:r.n,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[Kt],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={maxlength:[{type:r.y}]},t}(),Zt={provide:p,useExisting:Object(r._4)(function(){return Jt}),multi:!0},Jt=function(){function t(){}return t.prototype.ngOnChanges=function(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=m.pattern(this.pattern)},t.decorators=[{type:r.n,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Zt],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={pattern:[{type:r.y}]},t}(),$t=function(){function t(){}return t.prototype.group=function(t,e){void 0===e&&(e=null);var i=this._reduceControls(t),n=null!=e?e.validator:null,r=null!=e?e.asyncValidator:null;return new dt(i,n,r)},t.prototype.control=function(t,e,i){return new pt(t,e,i)},t.prototype.array=function(t,e,i){var n=this,r=t.map(function(t){return n._createControl(t)});return new ft(r,e,i)},t.prototype._reduceControls=function(t){var e=this,i={};return Object.keys(t).forEach(function(n){i[n]=e._createControl(t[n])}),i},t.prototype._createControl=function(t){if(t instanceof pt||t instanceof dt||t instanceof ft)return t;if(Array.isArray(t)){var e=t[0],i=t.length>1?t[1]:null,n=t.length>2?t[2]:null;return this.control(e,i,n)}return this.control(t)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}(),te=(new r.W("5.2.4"),[function(){function t(){}return t.decorators=[{type:r.n,args:[{selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}}]}],t.ctorParameters=function(){return[]},t}(),V,G,P,C,k,x,B,j,D,st,at,Gt,qt,Qt,Jt,Wt,Xt]),ee=[Ct,Et,yt],ie=[Rt,Dt,zt,kt,Nt],ne=function(){function t(){}return t.decorators=[{type:r.C,args:[{declarations:te,exports:te}]}],t.ctorParameters=function(){return[]},t}(),re=function(){function t(){}return t.decorators=[{type:r.C,args:[{declarations:ee,providers:[I],exports:[ne,ee]}]}],t.ctorParameters=function(){return[]},t}();!function(){function t(){}t.decorators=[{type:r.C,args:[{declarations:[ie],providers:[$t,I],exports:[ne,ie]}]}],t.ctorParameters=function(){return[]}}()},"1Rb4":function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(e,i("1WNV"))},"1WNV":function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=a(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"1j/l":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=Array.isArray||function(t){return t&&"number"==typeof t.length}},"2kLc":function(t,e,i){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=Number.POSITIVE_INFINITY,a=null,l=t[t.length-1];Object(o.a)(l)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof l&&(i=t.pop());if(null===a&&1===t.length&&t[0]instanceof n.a)return t[0];return Object(s.a)(i)(new r.a(t,a))};var n=i("AP4T"),r=i("Oryw"),o=i("3iOE"),s=i("bywS")},"2kvl":function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error)},"3Czw":function(t,e,i){"use strict";var n=i("LMZF"),r=i("V8+5"),o=i("TO51"),s=i("qqDE"),a=i("fNvg"),l=i("5O0w"),c=i("XEj9"),u=i("3iOE"),h=i("1j/l"),p=i("Oryw"),d=i("ZO8H");var f=i("B1iP"),m=i("AP4T"),g=i("qLnt"),y=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_=function(t){function e(e,i,n){t.call(this),this.addHandler=e,this.removeHandler=i,this.selector=n}return y(e,t),e.create=function(t,i,n){return new e(t,i,n)},e.prototype._subscribe=function(t){var e=this,i=this.removeHandler,n=this.selector?function(){for(var i=[],n=0;n<arguments.length;n++)i[n-0]=arguments[n];e._callSelector(t,i)}:function(e){t.next(e)},r=this._callAddHandler(n,t);Object(f.a)(i)&&t.add(new g.a(function(){i(n,r)}))},e.prototype._callSelector=function(t,e){try{var i=this.selector.apply(this,e);t.next(i)}catch(e){t.error(e)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},e}(m.a).create;i.d(e,"c",function(){return P}),i.d(e,"a",function(){return A}),i.d(e,"b",function(){return w}),i.d(e,"d",function(){return b});var v=new Map,b=function(){function t(t){this.platform=t,this._matchMedia=this.platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):x}return t.prototype.matchMedia=function(t){return this.platform.WEBKIT&&function(t){if(!v.has(t))try{var e=document.createElement("style");if(e.setAttribute("type","text/css"),!e.sheet){var i="@media "+t+" {.fx-query-test{ }}";e.appendChild(document.createTextNode(i))}document.getElementsByTagName("head")[0].appendChild(e),v.set(t,e)}catch(t){console.error(t)}}(t),this._matchMedia(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:r.a}]},t}();function x(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var A=function(){function t(t,e){this.mediaMatcher=t,this.zone=e,this._queries=new Map,this._destroySubject=new o.a}return t.prototype.ngOnDestroy=function(){this._destroySubject.next(),this._destroySubject.complete()},t.prototype.isMatched=function(t){var e=this;return Object(c.b)(t).some(function(t){return e._registerQuery(t).mql.matches})},t.prototype.observe=function(t){var e=this;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=null,n=null;return Object(u.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&Object(h.a)(t[0])&&(t=t[0]),new p.a(t,n).lift(new d.a(i))}(Object(c.b)(t).map(function(t){return e._registerQuery(t).observable}),function(t,e){return{matches:!!(t&&t.matches||e&&e.matches)}})},t.prototype._registerQuery=function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var i=this.mediaMatcher.matchMedia(t),n={observable:_(function(t){i.addListener(function(i){return e.zone.run(function(){return t(i)})})},function(t){i.removeListener(function(i){return e.zone.run(function(){return t(i)})})}).pipe(Object(l.a)(this._destroySubject),Object(a.a)(i),Object(s.a)(function(t){return{matches:t.matches}})),mql:i};return this._queries.set(t,n),n},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:b},{type:n.F}]},t}(),w={XSmall:"(max-width: 599px)",Small:"(min-width: 600px) and (max-width: 959px)",Medium:"(min-width: 960px) and (max-width: 1279px)",Large:"(min-width: 1280px) and (max-width: 1919px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599px) and (orientation: portrait), (max-width: 959px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},P=function(){function t(){}return t.decorators=[{type:n.C,args:[{providers:[A,b],imports:[r.b]}]}],t.ctorParameters=function(){return[]},t}()},"3iOE":function(t,e,i){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},"3kHg":function(t,e,i){"use strict";var n=i("AP4T"),r=i("qgI0"),o=i("lI6h"),s=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=function(t){function e(e){t.call(this),this.observableFactory=e}return s(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new l(t,this.observableFactory)},e}(n.a),l=function(t){function e(e,i){t.call(this,e),this.factory=i,this.tryDefer()}return s(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(Object(r.a)(this,t))},e}(o.a);i.d(e,"a",function(){return c});var c=a.create},"3uJi":function(t,e,i){"use strict";i.d(e,"b",function(){return _}),i.d(e,"a",function(){return g});var n=i("ppgG"),r=i("V8+5"),o=i("LMZF"),s=i("j5BN"),a=i("RyBE"),l=i("8Xfy"),c=i("6Xbx"),u=i("XEj9"),h=i("0nO6"),p=0,d={provide:h.g,useExisting:Object(o._4)(function(){return g}),multi:!0},f=function(){return function(t,e){this.source=t,this.checked=e}}(),m=function(){return function(t){this._elementRef=t}}(),g=function(t){function e(e,i,n,r,s){var a=t.call(this,e)||this;return a._platform=i,a._focusMonitor=n,a._changeDetectorRef=r,a.onChange=function(t){},a.onTouched=function(){},a._uniqueId="mat-slide-toggle-"+ ++p,a._required=!1,a._checked=!1,a.name=null,a.id=a._uniqueId,a.labelPosition="after",a.ariaLabel=null,a.ariaLabelledby=null,a.change=new o.r,a.tabIndex=parseInt(s)||0,a}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(u.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=Object(u.c)(t),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this._slideRenderer=new y(this._elementRef,this._platform),this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(e){return t._onInputFocusChange(e)})},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement)},e.prototype._onChangeEvent=function(t){t.stopPropagation(),this._slideRenderer.dragging?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())},e.prototype._onInputClick=function(t){t.stopPropagation()},e.prototype.writeValue=function(t){this.checked=!!t},e.prototype.registerOnChange=function(t){this.onChange=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetectorRef.markForCheck()},e.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},e.prototype.toggle=function(){this.checked=!this.checked},e.prototype._onInputFocusChange=function(t){this._focusRipple||"keyboard"!==t?t||(this.onTouched(),this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null)):this._focusRipple=this._ripple.launch(0,0,{persistent:!0})},e.prototype._emitChangeEvent=function(){this.onChange(this.checked),this.change.emit(new f(this,this.checked))},e.prototype._onDragStart=function(){this.disabled||this._slideRenderer.startThumbDrag(this.checked)},e.prototype._onDrag=function(t){this._slideRenderer.dragging&&this._slideRenderer.updateThumbPosition(t.deltaX)},e.prototype._onDragEnd=function(){var t=this;if(this._slideRenderer.dragging){var e=this._slideRenderer.dragPercentage>50;e!==this.checked&&(this.checked=e,this._emitChangeEvent()),setTimeout(function(){return t._slideRenderer.stopThumbDrag()})}},e.prototype._onLabelTextChange=function(){this._changeDetectorRef.markForCheck()},e.decorators=[{type:o.j,args:[{selector:"mat-slide-toggle",exportAs:"matSlideToggle",host:{class:"mat-slide-toggle","[id]":"id","[class.mat-checked]":"checked","[class.mat-disabled]":"disabled","[class.mat-slide-toggle-label-before]":'labelPosition == "before"'},template:'<label class="mat-slide-toggle-label" #label><div class="mat-slide-toggle-bar" [class.mat-slide-toggle-bar-no-side-margin]="!labelContent.textContent || !labelContent.textContent.trim()"><input #input class="mat-slide-toggle-input cdk-visually-hidden" type="checkbox" [id]="inputId" [required]="required" [tabIndex]="tabIndex" [checked]="checked" [disabled]="disabled" [attr.name]="name" [attr.aria-label]="ariaLabel" [attr.aria-labelledby]="ariaLabelledby" (change)="_onChangeEvent($event)" (click)="_onInputClick($event)"><div class="mat-slide-toggle-thumb-container" (slidestart)="_onDragStart()" (slide)="_onDrag($event)" (slideend)="_onDragEnd()"><div class="mat-slide-toggle-thumb"></div><div class="mat-slide-toggle-ripple" mat-ripple [matRippleTrigger]="label" [matRippleDisabled]="disableRipple || disabled" [matRippleCentered]="true" [matRippleRadius]="23" [matRippleAnimation]="{enterDuration: 300}"></div></div></div><span class="mat-slide-toggle-content" #labelContent (cdkObserveContent)="_onLabelTextChange()"><ng-content></ng-content></span></label>',styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px,0,0)}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}.mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-right:8px;margin-left:0}.mat-slide-toggle-label-before .mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0,0,0);transition:all 80ms linear;transition-property:transform;cursor:-webkit-grab;cursor:grab}.mat-slide-toggle-thumb-container.mat-dragging,.mat-slide-toggle-thumb-container:active{cursor:-webkit-grabbing;cursor:grabbing;transition-duration:0s}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-slide-toggle-thumb{background:#fff;border:solid 1px #000}}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}@media screen and (-ms-high-contrast:active){.mat-slide-toggle-bar{background:#fff}}.mat-slide-toggle-input{bottom:0;left:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}.mat-slide-toggle-ripple{position:absolute;top:-13px;left:-13px;height:46px;width:46px;z-index:1;pointer-events:none}"],providers:[d],inputs:["disabled","disableRipple","color","tabIndex"],encapsulation:o._0.None,preserveWhitespaces:!1,changeDetection:o.g.OnPush}]}],e.ctorParameters=function(){return[{type:o.o},{type:r.a},{type:l.h},{type:o.h},{type:void 0,decorators:[{type:o.f,args:["tabindex"]}]}]},e.propDecorators={name:[{type:o.y}],id:[{type:o.y}],labelPosition:[{type:o.y}],ariaLabel:[{type:o.y,args:["aria-label"]}],ariaLabelledby:[{type:o.y,args:["aria-labelledby"]}],required:[{type:o.y}],checked:[{type:o.y}],change:[{type:o.H}],_inputElement:[{type:o.X,args:["input"]}],_ripple:[{type:o.X,args:[s.x]}]},e}(Object(s.G)(Object(s.C)(Object(s.D)(Object(s.E)(m)),"accent"))),y=function(){function t(t,e){this.dragging=!1,e.isBrowser&&(this._thumbEl=t.nativeElement.querySelector(".mat-slide-toggle-thumb-container"),this._thumbBarEl=t.nativeElement.querySelector(".mat-slide-toggle-bar"))}return t.prototype.startThumbDrag=function(t){this.dragging||(this._thumbBarWidth=this._thumbBarEl.clientWidth-this._thumbEl.clientWidth,this._thumbEl.classList.add("mat-dragging"),this._previousChecked=t,this.dragging=!0)},t.prototype.stopThumbDrag=function(){return!!this.dragging&&(this.dragging=!1,this._thumbEl.classList.remove("mat-dragging"),this._thumbEl.style.transform="",this.dragPercentage>50)},t.prototype.updateThumbPosition=function(t){this.dragPercentage=this._getDragPercentage(t);var e=this.dragPercentage/100*this._thumbBarWidth;this._thumbEl.style.transform="translate3d("+e+"px, 0, 0)"},t.prototype._getDragPercentage=function(t){var e=t/this._thumbBarWidth*100;return this._previousChecked&&(e+=100),Math.max(0,Math.min(e,100))},t}(),_=function(){function t(){}return t.decorators=[{type:o.C,args:[{imports:[s.y,s.n,r.b,n.c,l.a],exports:[g,s.n],declarations:[g],providers:[{provide:a.f,useClass:s.e}]}]}],t.ctorParameters=function(){return[]},t}()},"3v+G":function(t,e,i){(function(t,n){var r;!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,c=36,u=1,h=26,p=38,d=700,f=72,m=128,g="-",y=/^xn--/,_=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-u,A=Math.floor,w=String.fromCharCode;function P(t){throw new RangeError(b[t])}function E(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function T(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+E((t=t.replace(v,".")).split("."),e).join(".")}function S(t){for(var e,i,n=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function C(t){return E(t,function(t){var e="";return t>65535&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=w(t)}).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function M(t,e,i){var n=0;for(t=i?A(t/d):t>>1,t+=A(t/e);t>x*h>>1;n+=c)t=A(t/x);return A(n+(x+1)*t/(t+p))}function R(t){var e,i,n,r,o,s,a,p,d,y,_,v=[],b=t.length,x=0,w=m,E=f;for((i=t.lastIndexOf(g))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&P("not-basic"),v.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<b;){for(o=x,s=1,a=c;r>=b&&P("invalid-input"),((p=(_=t.charCodeAt(r++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:c)>=c||p>A((l-x)/s))&&P("overflow"),x+=p*s,!(p<(d=a<=E?u:a>=E+h?h:a-E));a+=c)s>A(l/(y=c-d))&&P("overflow"),s*=y;E=M(x-o,e=v.length+1,0==o),A(x/e)>l-w&&P("overflow"),w+=A(x/e),x%=e,v.splice(x++,0,w)}return C(v)}function I(t){var e,i,n,r,o,s,a,p,d,y,_,v,b,x,E,T=[];for(v=(t=S(t)).length,e=m,i=0,o=f,s=0;s<v;++s)(_=t[s])<128&&T.push(w(_));for(n=r=T.length,r&&T.push(g);n<v;){for(a=l,s=0;s<v;++s)(_=t[s])>=e&&_<a&&(a=_);for(a-e>A((l-i)/(b=n+1))&&P("overflow"),i+=(a-e)*b,e=a,s=0;s<v;++s)if((_=t[s])<e&&++i>l&&P("overflow"),_==e){for(p=i,d=c;!(p<(y=d<=o?u:d>=o+h?h:d-o));d+=c)E=p-y,x=c-y,T.push(w(O(y+E%x,0))),p=A(E/x);T.push(w(O(p,0))),o=M(i,b,n==r),i=0,++n}++i,++e}return T.join("")}a={version:"1.4.1",ucs2:{decode:S,encode:C},decode:R,encode:I,toASCII:function(t){return T(t,function(t){return _.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return T(t,function(t){return y.test(t)?R(t.slice(4).toLowerCase()):t})}},void 0===(r=(function(){return a}).call(e,i,e,t))||(t.exports=r)}()}).call(e,i("E4vQ")(t),i("GTd5"))},"4jwp":function(t,e,i){"use strict";i.d(e,"d",function(){return p}),i.d(e,"b",function(){return d}),i.d(e,"a",function(){return m}),i.d(e,"g",function(){return g}),i.d(e,"f",function(){return y}),i.d(e,"e",function(){return _}),i.d(e,"c",function(){return v});var n=i("LMZF"),r=i("V8+5"),o=i("TO51"),s=i("AP4T"),a=i("GZB0"),l=i("kH4A"),c=i("n0xB"),u=i("LaOa"),h=i("2kLc"),p=function(){function t(t,e){this._ngZone=t,this._platform=e,this._scrolled=new o.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return t.prototype.register=function(t){var e=this,i=t.elementScrolled().subscribe(function(){return e._scrolled.next(t)});this.scrollContainers.set(t,i)},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this._platform.isBrowser?s.a.create(function(i){e._globalSubscription||e._addGlobalListener();var n=t>0?e._scrolled.pipe(Object(c.a)(t)).subscribe(i):e._scrolled.subscribe(i);return e._scrolledCount++,function(){n.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):Object(a.a)()},t.prototype.ngOnDestroy=function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,i){return t.deregister(i)})},t.prototype.ancestorScrolled=function(t,e){var i=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(u.a)(function(t){return!t||i.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,i=[];return this.scrollContainers.forEach(function(n,r){e._scrollableContainsElement(r,t)&&i.push(r)}),i},t.prototype._scrollableContainsElement=function(t,e){var i=e.nativeElement,n=t.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1},t.prototype._addGlobalListener=function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return Object(l.a)(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:n.F},{type:r.a}]},t}();function d(t,e,i){return t||new p(e,i)}var f={provide:p,deps:[[new n.G,new n.T,p],n.F,r.a],useFactory:d},m=function(){function t(t,e,i){var n=this;this._elementRef=t,this._scroll=e,this._ngZone=i,this._elementScrolled=new o.a,this._scrollListener=function(t){return n._elementScrolled.next(t)}}return t.prototype.ngOnInit=function(){var t=this;this._ngZone.runOutsideAngular(function(){t.getElementRef().nativeElement.addEventListener("scroll",t._scrollListener)}),this._scroll.register(this)},t.prototype.ngOnDestroy=function(){this._scroll.deregister(this),this._scrollListener&&this.getElementRef().nativeElement.removeEventListener("scroll",this._scrollListener)},t.prototype.elementScrolled=function(){return this._elementScrolled.asObservable()},t.prototype.getElementRef=function(){return this._elementRef},t.decorators=[{type:n.n,args:[{selector:"[cdk-scrollable], [cdkScrollable]"}]}],t.ctorParameters=function(){return[{type:n.o},{type:p},{type:n.F}]},t}(),g=function(){function t(t,e){var i=this;this._change=t.isBrowser?e.runOutsideAngular(function(){return Object(h.a)(Object(l.a)(window,"resize"),Object(l.a)(window,"orientationchange"))}):Object(a.a)(),this._invalidateCache=this.change().subscribe(function(){return i._updateViewportSize()})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){return this._viewportSize||this._updateViewportSize(),{width:this._viewportSize.width,height:this._viewportSize.height}},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),i=e.width,n=e.height;return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+i,height:n,width:i}},t.prototype.getViewportScrollPosition=function(){var t=document.documentElement.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(Object(c.a)(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize={width:window.innerWidth,height:window.innerHeight}},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:r.a},{type:n.F}]},t}();function y(t,e,i){return t||new g(e,i)}var _={provide:g,deps:[[new n.G,new n.T,g],r.a,n.F],useFactory:y},v=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.b],exports:[m],declarations:[m],providers:[f]}]}],t.ctorParameters=function(){return[]},t}()},"5E84":function(t,e,i){"use strict";t.exports=o;var n=i("C7jF"),r=i("VIKU");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}r.inherits=i("lDCR"),r.inherits(o,n),o.prototype._transform=function(t,e,i){i(null,t)}},"5O0w":function(t,e,i){"use strict";e.a=function(t){return function(e){return e.lift(new s(t))}};var n=i("lI6h"),r=i("qgI0"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(t){function e(e,i){t.call(this,e),this.notifier=i,this.add(Object(r.a)(this,i))}return o(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.complete()},e.prototype.notifyComplete=function(){},e}(n.a)},"5Uyx":function(t,e,i){"use strict";i.d(e,"a",function(){return s}),e.b=l;var n=i("LMZF"),r=i("Un6q"),o=i("9WiL"),s=n._14({encapsulation:2,styles:[],data:{}});function a(t){return n._39(0,[(t()(),n._16(0,0,null,null,0,"input",[["accept","image/*"],["type","file"]],null,[[null,"change"]],function(t,e,i){var n=!0,r=t.component;"change"===e&&(n=!1!==r.fileChangeListener(i)&&n);return n},null,null))],null,null)}function l(t){return n._39(0,[n._35(402653184,1,{cropcanvas:0}),(t()(),n._37(-1,null,["\n        "])),(t()(),n._16(2,0,null,null,7,"span",[["class","ng2-imgcrop"]],null,null,null,null,null)),(t()(),n._37(-1,null,["\n          "])),(t()(),n._11(16777216,null,null,1,null,a)),n._15(5,16384,null,0,r.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._37(-1,null,["\n          "])),(t()(),n._16(7,0,[[1,0],["cropcanvas",1]],null,1,"canvas",[],null,[[null,"mousedown"],[null,"mouseup"],[null,"mousemove"],[null,"mouseleave"],[null,"touchmove"],[null,"touchend"],[null,"touchstart"]],function(t,e,i){var n=!0,r=t.component;"mousedown"===e&&(n=!1!==r.onMouseDown(i)&&n);"mouseup"===e&&(n=!1!==r.onMouseUp(i)&&n);"mousemove"===e&&(n=!1!==r.onMouseMove(i)&&n);"mouseleave"===e&&(n=!1!==r.onMouseUp(i)&&n);"touchmove"===e&&(n=!1!==r.onTouchMove(i)&&n);"touchend"===e&&(n=!1!==r.onTouchEnd(i)&&n);"touchstart"===e&&(n=!1!==r.onTouchStart(i)&&n);return n},null,null)),(t()(),n._37(-1,null,["\n          "])),(t()(),n._37(-1,null,["\n        "])),(t()(),n._37(-1,null,["\n      "]))],function(t,e){t(e,5,0,!e.component.settings.noFileInput)},null)}n._12("img-cropper",o.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"img-cropper",[],null,null,null,l,s)),n._15(1,4898816,null,0,o.a,[n.L],null,null)],null,null)},{settings:"settings",image:"image",inputImage:"inputImage",cropper:"cropper",cropPosition:"cropPosition"},{cropPositionChange:"cropPositionChange",onCrop:"onCrop"},[])},"5jKg":function(t,e,i){"use strict";e.a=function(t,e){return function(i){return i.lift(new s(t,e))}};var n=i("lI6h"),r=i("qgI0"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var s=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector))},t}(),a=function(t){function e(e,i,n){t.call(this,e),this.project=i,this.resultSelector=n,this.index=0}return o(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=Object(r.a)(this,t,e,i))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,i,n,r){this.resultSelector?this._tryNotifyNext(t,e,i,n):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,i,n){var r;try{r=this.resultSelector(t,e,i,n)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e}(n.a)},"697t":function(t,e,i){"use strict";var n=i("LMZF"),r=i("6Xbx"),o=i("c4k3"),s=i("Un6q"),a=i("j5BN"),l=i("eoFs"),c=i("ZO8H"),u=i("qqDE"),h=i("fNvg"),p=i("Ecq+").a.create,d=i("XEj9");i.d(e,"k",function(){return P}),i.d(e,"b",function(){return m}),i.d(e,"e",function(){return g}),i.d(e,"c",function(){return y}),i.d(e,"d",function(){return _}),i.d(e,"a",function(){return v}),i.d(e,"j",function(){return f}),i.d(e,"g",function(){return b}),i.d(e,"i",function(){return x}),i.d(e,"f",function(){return A}),i.d(e,"h",function(){return w});var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-table",exportAs:"matTable",template:o.b,styles:[".mat-table{display:block}.mat-header-row{min-height:56px}.mat-row{min-height:48px}.mat-header-row,.mat-row{display:flex;border-bottom-width:1px;border-bottom-style:solid;align-items:center;padding:0 24px;box-sizing:border-box}.mat-header-row::after,.mat-row::after{display:inline-block;min-height:inherit;content:''}.mat-cell,.mat-header-cell{flex:1;overflow:hidden;word-wrap:break-word}"],host:{class:"mat-table"},encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[]},e}(o.m),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matCellDef]",providers:[{provide:o.d,useExisting:e}]}]}],e.ctorParameters=function(){return[]},e}(o.d),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matHeaderCellDef]",providers:[{provide:o.h,useExisting:e}]}]}],e.ctorParameters=function(){return[]},e}(o.h),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matColumnDef]",providers:[{provide:o.f,useExisting:e}]}]}],e.ctorParameters=function(){return[]},e.propDecorators={name:[{type:n.y,args:["matColumnDef"]}]},e}(o.f),_=function(t){function e(e,i){var n=t.call(this,e,i)||this;return i.nativeElement.classList.add("mat-column-"+e.cssClassFriendlyName),n}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"mat-header-cell",host:{class:"mat-header-cell",role:"columnheader"}}]}],e.ctorParameters=function(){return[{type:o.f},{type:n.o}]},e}(o.g),v=function(t){function e(e,i){var n=t.call(this,e,i)||this;return i.nativeElement.classList.add("mat-column-"+e.cssClassFriendlyName),n}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"mat-cell",host:{class:"mat-cell",role:"gridcell"}}]}],e.ctorParameters=function(){return[{type:o.f},{type:n.o}]},e}(o.c),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matHeaderRowDef]",providers:[{provide:o.j,useExisting:e}],inputs:["columns: matHeaderRowDef"]}]}],e.ctorParameters=function(){return[]},e}(o.j),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matRowDef]",providers:[{provide:o.l,useExisting:e}],inputs:["columns: matRowDefColumns","when: matRowDefWhen"]}]}],e.ctorParameters=function(){return[]},e}(o.l),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-header-row",template:o.a,host:{class:"mat-header-row",role:"row"},changeDetection:n.g.OnPush,encapsulation:n._0.None,exportAs:"matHeaderRow",preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[]},e}(o.i),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-row",template:o.a,host:{class:"mat-row",role:"row"},changeDetection:n.g.OnPush,encapsulation:n._0.None,exportAs:"matRow",preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[]},e}(o.k),P=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.n,s.b,a.n],exports:[f,m,g,y,_,v,A,w,b,x],declarations:[f,m,g,y,_,v,A,w,b,x]}]}],t.ctorParameters=function(){return[]},t}();!function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this)||this;return i._renderData=new l.a([]),i._filter=new l.a(""),i.sortingDataAccessor=function(t,e){var i=t[e];return Object(d.a)(i)?Number(i):i},i.sortData=function(t,e){var n=e.active,r=e.direction;return n&&""!=r?t.sort(function(t,e){var o=i.sortingDataAccessor(t,n),s=i.sortingDataAccessor(e,n),a=0;return o&&s?o>s?a=1:o<s&&(a=-1):o?a=1:s&&(a=-1),a*("asc"==r?1:-1)}):t},i.filterPredicate=function(t,e){var i=Object.keys(t).reduce(function(e,i){return e+t[i]},"").toLowerCase(),n=e.trim().toLowerCase();return-1!=i.indexOf(n)},i._data=new l.a(e),i._updateChangeSubscription(),i}Object(r.b)(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(t){this._data.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter.value},set:function(t){this._filter.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sort",{get:function(){return this._sort},set:function(t){this._sort=t,this._updateChangeSubscription()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paginator",{get:function(){return this._paginator},set:function(t){this._paginator=t,this._updateChangeSubscription()},enumerable:!0,configurable:!0}),e.prototype._updateChangeSubscription=function(){var t=this,e=this._sort?this._sort.sortChange:p(),i=this._paginator?this._paginator.page:p();this._renderChangesSubscription&&this._renderChangesSubscription.unsubscribe(),this._renderChangesSubscription=this._data.pipe(Object(c.b)(this._filter),Object(u.a)(function(e){var i=e[0];return t._filterData(i)}),Object(c.b)(e.pipe(Object(h.a)(null))),Object(u.a)(function(e){var i=e[0];return t._orderData(i)}),Object(c.b)(i.pipe(Object(h.a)(null))),Object(u.a)(function(e){var i=e[0];return t._pageData(i)})).subscribe(function(e){return t._renderData.next(e)})},e.prototype._filterData=function(t){var e=this;return this.filteredData=this.filter?t.filter(function(t){return e.filterPredicate(t,e.filter)}):t,this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData},e.prototype._orderData=function(t){return this.sort?this.sortData(t.slice(),this.sort):t},e.prototype._pageData=function(t){if(!this.paginator)return t;var e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice().splice(e,this.paginator.pageSize)},e.prototype._updatePaginator=function(t){var e=this;Promise.resolve().then(function(){if(e.paginator&&(e.paginator.length=t,e.paginator.pageIndex>0)){var i=Math.ceil(e.paginator.length/e.paginator.pageSize)-1||0;e.paginator.pageIndex=Math.min(e.paginator.pageIndex,i)}})},e.prototype.connect=function(){return this._renderData},e.prototype.disconnect=function(){}}(o.o)},"6Pt6":function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"6QZ3":function(t,e,i){"use strict";(function(e,n){var r=i("1Rb4").nextTick;function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,a=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:r;y.WritableState=g;var l=i("VIKU");l.inherits=i("lDCR");var c={deprecate:i("7RTT")},u=i("wHgO"),h=i("zOKz").Buffer,p=n.Uint8Array||function(){};var d,f=i("iAGO");function m(){}function g(t,e){s=s||i("dJzE"),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var l=t.highWaterMark,c=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:n&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,o=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,o){--e.pendingcb,i?(r(o,n),r(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(o(n),t._writableState.errorEmitted=!0,t.emit("error",n),w(t,e))}(t,i,n,e,o);else{var s=x(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||b(t,i),n?a(v,t,i,s,o):v(t,i,s,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(t){if(s=s||i("dJzE"),!(d.call(y,this)||this instanceof s))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function _(t,e,i,n,r,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function v(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),w(t,e)}function b(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),s=e.corkedRequestsFree;s.entry=i;for(var a=0,l=!0;i;)r[a]=i,i.isBuf||(l=!1),i=i.next,a+=1;r.allBuffers=l,_(t,e,!0,e.length,r,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,u=i.encoding,h=i.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,u,h),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),w(t,e)})}function w(t,e){var i=x(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r(A,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}l.inherits(y,u),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===y&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=t,h.isBuffer(n)||n instanceof p);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof i&&(i=m),o.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),r(e,i)}(this,i):(a||function(t,e,i,n){var o=!0,s=!1;return null===i?s=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),r(n,s),o=!1),o}(this,o,t,i))&&(o.pendingcb++,s=function(t,e,i,n,r,o){if(!i){var s=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,i));return e}(e,n,r);n!==s&&(i=!0,r="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,n,r,o);return l}(this,o,a,t,e,i)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,w(t,e),i&&(e.finished?r(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=f.destroy,y.prototype._undestroy=f.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,i("1WNV"),i("GTd5"))},"6Shc":function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"6Xbx":function(t,e,i){"use strict";e.b=function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},i.d(e,"a",function(){return r});var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};var r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}},"6lRS":function(t,e,i){"use strict";var n=i("LMZF"),r=i("6Xbx"),o=i("j5BN"),s=i("8Xfy"),a=i("XEj9"),l=i("Un6q"),c=i("OFGE"),u=i("l6RC"),h=i("rT01"),p=i("CZgk"),d=i("LaOa"),f=i("pXwq"),m=i("5jKg"),g=i("nihM"),y=i("XecN"),_=i("MZnR"),v=i("E9/g"),b=i("PAZ8"),x=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var A=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new w(t,this.delay,this.scheduler))},t}(),w=function(t){function e(e,i,n){t.call(this,e),this.delay=i,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return x(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,n=t.scheduler,r=t.destination;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(r);if(i.length>0){var o=Math.max(0,i[0].time-n.now());this.schedule(t,o)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new P(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(b.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(b.a.createComplete())},e}(v.a),P=function(){return function(t,e){this.time=t,this.notification=e}}(),E=i("0nO6"),T=i("Lpd/"),S=i("TO51"),C=i("3kHg"),O=i("kH4A"),M=i("2kLc"),R=i("GZB0"),I=0,D=function(){return function(t,e){this.source=t,this.option=e}}(),L=function(){return function(){}}(),k=Object(o.D)(L),F=new n.w("mat-autocomplete-default-options"),N=function(t){function e(e,i,r){var o=t.call(this)||this;return o._changeDetectorRef=e,o._elementRef=i,o.showPanel=!1,o._isOpen=!1,o.displayWith=null,o.optionSelected=new n.r,o._classList={},o.id="mat-autocomplete-"+I++,o._autoActiveFirstOption=!(!r||"undefined"==typeof r.autoActiveFirstOption)&&r.autoActiveFirstOption,o}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen&&this.showPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoActiveFirstOption",{get:function(){return this._autoActiveFirstOption},set:function(t){this._autoActiveFirstOption=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classList",{set:function(t){var e=this;t&&t.length&&(t.split(" ").forEach(function(t){return e._classList[t.trim()]=!0}),this._elementRef.nativeElement.className="")},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this._keyManager=new s.d(this.options).withWrap(),this._setVisibility()},e.prototype._setScrollTop=function(t){this.panel&&(this.panel.nativeElement.scrollTop=t)},e.prototype._getScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},e.prototype._setVisibility=function(){this.showPanel=!!this.options.length,this._classList["mat-autocomplete-visible"]=this.showPanel,this._classList["mat-autocomplete-hidden"]=!this.showPanel,this._changeDetectorRef.markForCheck()},e.prototype._emitSelectEvent=function(t){var e=new D(this,t);this.optionSelected.emit(e)},e.decorators=[{type:n.j,args:[{selector:"mat-autocomplete",template:'<ng-template><div class="mat-autocomplete-panel" role="listbox" [id]="id" [ngClass]="_classList" #panel><ng-content></ng-content></div></ng-template>',styles:[".mat-autocomplete-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative}.mat-autocomplete-panel:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,exportAs:"matAutocomplete",inputs:["disableRipple"],host:{class:"mat-autocomplete"},providers:[{provide:o.l,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:n.h},{type:n.o},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[F]}]}]},e.propDecorators={template:[{type:n.X,args:[n.U]}],panel:[{type:n.X,args:["panel"]}],options:[{type:n.m,args:[o.t,{descendants:!0}]}],optionGroups:[{type:n.m,args:[o.s]}],displayWith:[{type:n.y}],autoActiveFirstOption:[{type:n.y}],optionSelected:[{type:n.H}],classList:[{type:n.y,args:["class"]}]},e}(k),B=new n.w("mat-autocomplete-scroll-strategy");function V(t){return function(){return t.scrollStrategies.reposition()}}var z={provide:B,deps:[c.c],useFactory:V},U={provide:E.g,useExisting:Object(n._4)(function(){return G}),multi:!0};function j(){return Error("Attempting to open an undefined instance of `mat-autocomplete`. Make sure that the id passed to the `matAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.")}var G=function(){function t(t,e,i,n,r,o,s,a,l){var c=this;this._element=t,this._overlay=e,this._viewContainerRef=i,this._zone=n,this._changeDetectorRef=r,this._scrollStrategy=o,this._dir=s,this._formField=a,this._document=l,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._closeKeyEventStream=new S.a,this._onChange=function(){},this._onTouched=function(){},this._panelOpen=!1,this.optionSelections=Object(C.a)(function(){return c.autocomplete&&c.autocomplete.options?M.a.apply(void 0,c.autocomplete.options.map(function(t){return t.onSelectionChange})):c._zone.onStable.asObservable().pipe(Object(f.a)(1),Object(m.a)(function(){return c.optionSelections}))})}return t.prototype.ngOnDestroy=function(){this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()},Object.defineProperty(t.prototype,"panelOpen",{get:function(){return this._panelOpen&&this.autocomplete.showPanel},enumerable:!0,configurable:!0}),t.prototype.openPanel=function(){this._attachOverlay(),this._floatLabel()},t.prototype.closePanel=function(){this._resetLabel(),this._panelOpen&&(this.autocomplete._isOpen=this._panelOpen=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())},Object.defineProperty(t.prototype,"panelClosingActions",{get:function(){var t=this;return Object(M.a)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Object(d.a)(function(){return t._panelOpen})),this._closeKeyEventStream,this._outsideClickStream,this._overlayRef?this._overlayRef.detachments().pipe(Object(d.a)(function(){return t._panelOpen})):Object(R.a)())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeOption",{get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_outsideClickStream",{get:function(){var t=this;return this._document?Object(M.a)(Object(O.a)(this._document,"click"),Object(O.a)(this._document,"touchend")).pipe(Object(d.a)(function(e){var i=e.target,n=t._formField?t._formField._elementRef.nativeElement:null;return t._panelOpen&&i!==t._element.nativeElement&&(!n||!n.contains(i))&&!!t._overlayRef&&!t._overlayRef.overlayElement.contains(i)})):Object(R.a)(null)},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e=this;Promise.resolve(null).then(function(){return e._setTriggerValue(t)})},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},t.prototype.setDisabledState=function(t){this._element.nativeElement.disabled=t},t.prototype._handleKeydown=function(t){var e=t.keyCode;if(this.panelOpen&&(e===h.g||e===h.p&&t.altKey))this._resetActiveItem(),this._closeKeyEventStream.next(),t.stopPropagation();else if(this.activeOption&&e===h.f&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else{var i=this.autocomplete._keyManager.activeItem,n=e===h.p||e===h.d;this.panelOpen||e===h.o?this.autocomplete._keyManager.onKeydown(t):n&&this._canOpen()&&this.openPanel(),(n||this.autocomplete._keyManager.activeItem!==i)&&this._scrollToOption()}},t.prototype._handleInput=function(t){var e=t.target,i=e.value;"number"===e.type&&(i=""==i?null:parseFloat(i)),this._canOpen()&&this._previousValue!==i&&document.activeElement===t.target&&(this._previousValue=i,this._onChange(i),this.openPanel())},t.prototype._handleFocus=function(){this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0))},t.prototype._floatLabel=function(t){void 0===t&&(t=!1),this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)},t.prototype._resetLabel=function(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)},t.prototype._scrollToOption=function(){var t=this.autocomplete._keyManager.activeItemIndex||0,e=48*(t+o.t.countGroupLabelsBeforeOption(t,this.autocomplete.options,this.autocomplete.optionGroups)),i=this.autocomplete._getScrollTop();if(e<i)this.autocomplete._setScrollTop(e);else if(e+48>i+256){var n=e-256+48;this.autocomplete._setScrollTop(Math.max(0,n))}},t.prototype._subscribeToClosingActions=function(){var t=this,e=this._zone.onStable.asObservable().pipe(Object(f.a)(1)),i=this.autocomplete.options.changes.pipe(Object(g.a)(function(){return t._positionStrategy.recalculateLastPosition()}),function(t,e){void 0===e&&(e=y.a);var i=Object(_.a)(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new A(i,e))}}(0));return Object(M.a)(e,i).pipe(Object(m.a)(function(){return t._resetActiveItem(),t.autocomplete._setVisibility(),t.panelClosingActions}),Object(f.a)(1)).subscribe(function(e){return t._setValueAndClose(e)})},t.prototype._destroyPanel=function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)},t.prototype._setTriggerValue=function(t){var e=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t,i=null!=e?e:"";this._formField?this._formField._control.value=i:this._element.nativeElement.value=i},t.prototype._setValueAndClose=function(t){t&&t.source&&(this._clearPreviousSelectedOption(t.source),this._setTriggerValue(t.source.value),this._onChange(t.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(t.source)),this.closePanel()},t.prototype._clearPreviousSelectedOption=function(t){this.autocomplete.options.forEach(function(e){e!=t&&e.selected&&e.deselect()})},t.prototype._attachOverlay=function(){if(!this.autocomplete)throw j();this._overlayRef?this._overlayRef.updateSize({width:this._getHostWidth()}):(this._portal=new p.h(this.autocomplete.template,this._viewContainerRef),this._overlayRef=this._overlay.create(this._getOverlayConfig())),this._overlayRef&&!this._overlayRef.hasAttached()&&(this._overlayRef.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions()),this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._panelOpen=!0},t.prototype._getOverlayConfig=function(){return new c.d({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getHostWidth(),direction:this._dir?this._dir.value:"ltr"})},t.prototype._getOverlayPosition=function(){return this._positionStrategy=this._overlay.position().connectedTo(this._getConnectedElement(),{originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}).withFallbackPosition({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),this._positionStrategy},t.prototype._getConnectedElement=function(){return this._formField?this._formField._connectionContainerRef:this._element},t.prototype._getHostWidth=function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width},t.prototype._resetActiveItem=function(){this.autocomplete._keyManager.setActiveItem(this.autocomplete.autoActiveFirstOption?0:-1)},t.prototype._canOpen=function(){var t=this._element.nativeElement;return!t.readOnly&&!t.disabled},t.decorators=[{type:n.n,args:[{selector:"input[matAutocomplete], textarea[matAutocomplete]",host:{role:"combobox",autocomplete:"off","aria-autocomplete":"list","[attr.aria-activedescendant]":"activeOption?.id","[attr.aria-expanded]":"panelOpen.toString()","[attr.aria-owns]":"autocomplete?.id","(focusin)":"_handleFocus()","(blur)":"_onTouched()","(input)":"_handleInput($event)","(keydown)":"_handleKeydown($event)"},exportAs:"matAutocompleteTrigger",providers:[U]}]}],t.ctorParameters=function(){return[{type:n.o},{type:c.c},{type:n.Z},{type:n.F},{type:n.h},{type:void 0,decorators:[{type:n.u,args:[B]}]},{type:u.c,decorators:[{type:n.G}]},{type:T.b,decorators:[{type:n.G},{type:n.s}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[l.c]}]}]},t.propDecorators={autocomplete:[{type:n.y,args:["matAutocomplete"]}]},t}(),W=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.u,c.g,o.n,l.b],exports:[N,o.u,G,o.n],declarations:[N,G],providers:[z]}]}],t.ctorParameters=function(){return[]},t}(),H=i("ghl+"),X=i("ka8K"),Y=function(){return function(){}}(),q=Object(o.E)(Y),K={provide:E.g,useExisting:Object(n._4)(function(){return J}),multi:!0},Q=0,Z=function(){return function(){}}(),J=function(t){function e(e){var i=t.call(this)||this;return i._changeDetector=e,i._controlValueAccessorChangeFn=function(){},i._onTouched=function(){},i._name="mat-button-toggle-group-"+Q++,i._vertical=!1,i._value=null,i.valueChange=new n.r,i._selected=null,i.change=new n.r,i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t,this._updateButtonToggleNames()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.valueChange.emit(t),this._updateSelectedButtonToggleFromValue())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.value=t?t.value:null,t&&!t.checked&&(t.checked=!0)},enumerable:!0,configurable:!0}),e.prototype._updateButtonToggleNames=function(){var t=this;this._buttonToggles&&this._buttonToggles.forEach(function(e){e.name=t._name})},e.prototype._updateSelectedButtonToggleFromValue=function(){var t=this,e=null!=this._selected&&this._selected.value==this._value;if(null!=this._buttonToggles&&!e){var i=this._buttonToggles.filter(function(e){return e.value==t._value})[0];i?this.selected=i:null==this.value&&(this.selected=null,this._buttonToggles.forEach(function(t){t.checked=!1}))}},e.prototype._emitChangeEvent=function(){var t=new Z;t.source=this._selected,t.value=this._value,this._controlValueAccessorChangeFn(t.value),this.change.emit(t)},e.prototype.writeValue=function(t){this.value=t,this._changeDetector.markForCheck()},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._markButtonTogglesForCheck()},e.prototype._markButtonTogglesForCheck=function(){this._buttonToggles&&this._buttonToggles.forEach(function(t){return t._markForCheck()})},e.decorators=[{type:n.n,args:[{selector:"mat-button-toggle-group:not([multiple])",providers:[K],inputs:["disabled"],host:{role:"radiogroup",class:"mat-button-toggle-group","[class.mat-button-toggle-vertical]":"vertical"},exportAs:"matButtonToggleGroup"}]}],e.ctorParameters=function(){return[{type:n.h}]},e.propDecorators={_buttonToggles:[{type:n.m,args:[Object(n._4)(function(){return tt})]}],name:[{type:n.y}],vertical:[{type:n.y}],value:[{type:n.y}],valueChange:[{type:n.H}],selected:[{type:n.y}],change:[{type:n.H}]},e}(q),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertical=!1,e}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=Object(a.c)(t)},enumerable:!0,configurable:!0}),e.decorators=[{type:n.n,args:[{selector:"mat-button-toggle-group[multiple]",exportAs:"matButtonToggleGroup",inputs:["disabled"],host:{class:"mat-button-toggle-group","[class.mat-button-toggle-vertical]":"vertical",role:"group"}}]}],e.ctorParameters=function(){return[]},e.propDecorators={vertical:[{type:n.y}]},e}(q),tt=function(){function t(t,e,i,r,o,s){var a=this;this._changeDetectorRef=i,this._buttonToggleDispatcher=r,this._elementRef=o,this._focusMonitor=s,this.ariaLabel="",this.ariaLabelledby=null,this._isSingleSelector=!1,this._removeUniqueSelectionListener=function(){},this._checked=!1,this._value=null,this._disabled=!1,this.change=new n.r,this.buttonToggleGroup=t,this.buttonToggleGroupMultiple=e,this.buttonToggleGroup?(this._removeUniqueSelectionListener=r.listen(function(t,e){t!=a.id&&e==a.name&&(a.checked=!1,a._changeDetectorRef.markForCheck())}),this._type="radio",this.name=this.buttonToggleGroup.name,this._isSingleSelector=!0):(this._type="checkbox",this._isSingleSelector=!1)}return Object.defineProperty(t.prototype,"inputId",{get:function(){return this.id+"-input"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(t){this._isSingleSelector&&t&&(this._buttonToggleDispatcher.notify(this.id,this.name),this._changeDetectorRef.markForCheck()),this._checked=t,t&&this._isSingleSelector&&this.buttonToggleGroup.value!=this.value&&(this.buttonToggleGroup.selected=this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(null!=this.buttonToggleGroup&&this.checked&&(this.buttonToggleGroup.value=t),this._value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||null!=this.buttonToggleGroup&&this.buttonToggleGroup.disabled||null!=this.buttonToggleGroupMultiple&&this.buttonToggleGroupMultiple.disabled},set:function(t){this._disabled=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){null==this.id&&(this.id="mat-button-toggle-"+Q++),this.buttonToggleGroup&&this._value==this.buttonToggleGroup.value&&(this._checked=!0),this._focusMonitor.monitor(this._elementRef.nativeElement,!0)},t.prototype.focus=function(){this._inputElement.nativeElement.focus()},t.prototype._toggle=function(){this.checked=!this.checked},t.prototype._onInputChange=function(t){if(t.stopPropagation(),this._isSingleSelector){var e=this.buttonToggleGroup.selected!=this;this.checked=!0,this.buttonToggleGroup.selected=this,this.buttonToggleGroup._onTouched(),e&&this.buttonToggleGroup._emitChangeEvent()}else this._toggle();this._emitChangeEvent()},t.prototype._onInputClick=function(t){t.stopPropagation()},t.prototype._emitChangeEvent=function(){var t=new Z;t.source=this,t.value=this._value,this.change.emit(t)},t.prototype.ngOnDestroy=function(){this._removeUniqueSelectionListener()},t.prototype._markForCheck=function(){this._changeDetectorRef.markForCheck()},t.decorators=[{type:n.j,args:[{selector:"mat-button-toggle",template:'<label [attr.for]="inputId" class="mat-button-toggle-label"><input #input class="mat-button-toggle-input cdk-visually-hidden" [type]="_type" [id]="inputId" [checked]="checked" [disabled]="disabled || null" [attr.name]="name" [attr.aria-label]="ariaLabel" [attr.aria-labelledby]="ariaLabelledby" (change)="_onInputChange($event)" (click)="_onInputClick($event)"><div class="mat-button-toggle-label-content"><ng-content></ng-content></div></label><div class="mat-button-toggle-focus-overlay"></div>',styles:[".mat-button-toggle-group,.mat-button-toggle-standalone{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);position:relative;display:inline-flex;flex-direction:row;border-radius:2px;cursor:pointer;white-space:nowrap;overflow:hidden}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle-disabled .mat-button-toggle-label-content{cursor:default}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay,.mat-button-toggle.cdk-program-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;cursor:pointer}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}"],encapsulation:n._0.None,preserveWhitespaces:!1,exportAs:"matButtonToggle",changeDetection:n.g.OnPush,host:{"[class.mat-button-toggle-standalone]":"!buttonToggleGroup && !buttonToggleGroupMultiple","[class.mat-button-toggle-checked]":"checked","[class.mat-button-toggle-disabled]":"disabled",class:"mat-button-toggle","[attr.id]":"id"}}]}],t.ctorParameters=function(){return[{type:J,decorators:[{type:n.G}]},{type:$,decorators:[{type:n.G}]},{type:n.h},{type:X.d},{type:n.o},{type:s.h}]},t.propDecorators={ariaLabel:[{type:n.y,args:["aria-label"]}],ariaLabelledby:[{type:n.y,args:["aria-labelledby"]}],_inputElement:[{type:n.X,args:["input"]}],id:[{type:n.y}],name:[{type:n.y}],checked:[{type:n.y}],value:[{type:n.y}],disabled:[{type:n.y}],change:[{type:n.H}]},t}(),et=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.n,s.a],exports:[J,$,tt,o.n],declarations:[J,$,tt],providers:[X.c]}]}],t.ctorParameters=function(){return[]},t}(),it=i("Ioj9"),nt=i("0cZJ"),rt=i("fNvg"),ot=i("qLnt"),st=function(){return function(t,e,i){void 0===i&&(i=!1),this.source=t,this.selected=e,this.isUserInput=i}}(),at=function(){return function(t){this._elementRef=t}}(),lt=Object(o.C)(Object(o.E)(at),"primary"),ct=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-basic-chip, [mat-basic-chip]",host:{class:"mat-basic-chip"}}]}],t.ctorParameters=function(){return[]},t}(),ut=function(t){function e(e){var i=t.call(this,e)||this;return i._elementRef=e,i._hasFocus=!1,i._selected=!1,i._selectable=!0,i._removable=!0,i._onFocus=new S.a,i._onBlur=new S.a,i.selectionChange=new n.r,i.destroyed=new n.r,i.destroy=i.destroyed,i.removed=new n.r,i.onRemove=i.removed,i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=Object(a.c)(t),this.selectionChange.emit({source:this,isUserInput:!1,selected:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null!=this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){this._selectable=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removable",{get:function(){return this._removable},set:function(t){this._removable=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ariaSelected",{get:function(){return this.selectable?this.selected.toString():null},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.destroyed.emit({chip:this})},e.prototype.select=function(){this._selected=!0,this.selectionChange.emit({source:this,isUserInput:!1,selected:!0})},e.prototype.deselect=function(){this._selected=!1,this.selectionChange.emit({source:this,isUserInput:!1,selected:!1})},e.prototype.selectViaInteraction=function(){this._selected=!0,this.selectionChange.emit({source:this,isUserInput:!0,selected:!0})},e.prototype.toggleSelected=function(t){return void 0===t&&(t=!1),this._selected=!this.selected,this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected}),this.selected},e.prototype.focus=function(){this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})},e.prototype.remove=function(){this.removable&&this.removed.emit({chip:this})},e.prototype._handleClick=function(t){this.disabled||(t.preventDefault(),t.stopPropagation(),this.focus())},e.prototype._handleKeydown=function(t){if(!this.disabled)switch(t.keyCode){case h.c:case h.b:this.remove(),t.preventDefault();break;case h.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}},e.prototype._blur=function(){this._hasFocus=!1,this._onBlur.next({chip:this})},e.decorators=[{type:n.n,args:[{selector:"mat-basic-chip, [mat-basic-chip], mat-chip, [mat-chip]",inputs:["color","disabled"],exportAs:"matChip",host:{class:"mat-chip","[attr.tabindex]":"disabled ? null : -1",role:"option","[class.mat-chip-selected]":"selected","[attr.disabled]":"disabled || null","[attr.aria-disabled]":"disabled.toString()","[attr.aria-selected]":"ariaSelected","(click)":"_handleClick($event)","(keydown)":"_handleKeydown($event)","(focus)":"_hasFocus = true","(blur)":"_blur()"}}]}],e.ctorParameters=function(){return[{type:n.o}]},e.propDecorators={selected:[{type:n.y}],value:[{type:n.y}],selectable:[{type:n.y}],removable:[{type:n.y}],selectionChange:[{type:n.H}],destroyed:[{type:n.H}],destroy:[{type:n.H}],removed:[{type:n.H}],onRemove:[{type:n.H,args:["remove"]}]},e}(lt),ht=function(){function t(t){this._parentChip=t}return t.prototype._handleClick=function(){this._parentChip.removable&&this._parentChip.remove()},t.decorators=[{type:n.n,args:[{selector:"[matChipRemove]",host:{class:"mat-chip-remove","(click)":"_handleClick()"}}]}],t.ctorParameters=function(){return[{type:ut}]},t}(),pt=function(){return function(t,e,i,n){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=n}}(),dt=Object(o.F)(pt),ft=0,mt=function(){return function(t,e){this.source=t,this.value=e}}(),gt=function(t){function e(e,i,r,o,s,a,l){var c=t.call(this,a,o,s,l)||this;return c._elementRef=e,c._changeDetectorRef=i,c._dir=r,c.ngControl=l,c.controlType="mat-chip-list",c._lastDestroyedIndex=null,c._chipSet=new WeakMap,c._tabOutSubscription=ot.a.EMPTY,c._uid="mat-chip-list-"+ft++,c._tabIndex=0,c._userTabIndex=null,c._onTouched=function(){},c._onChange=function(){},c._multiple=!1,c._compareWith=function(t,e){return t===e},c._required=!1,c._disabled=!1,c.ariaOrientation="horizontal",c._selectable=!0,c.change=new n.r,c.valueChange=new n.r,c.ngControl&&(c.ngControl.valueAccessor=c),c}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.empty?null:"listbox"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},set:function(t){this._multiple=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id||this._uid},set:function(t){this._id=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(a.c)(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.chips.some(function(t){return t._hasFocus})||this._chipInput&&this._chipInput.focused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return(!this._chipInput||this._chipInput.empty)&&0===this.chips.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return!this.empty||this.focused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){this._selectable=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{set:function(t){this._userTabIndex=t,this._tabIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chipSelectionChanges",{get:function(){return M.a.apply(void 0,this.chips.map(function(t){return t.selectionChange}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chipFocusChanges",{get:function(){return M.a.apply(void 0,this.chips.map(function(t){return t._onFocus}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chipBlurChanges",{get:function(){return M.a.apply(void 0,this.chips.map(function(t){return t._onBlur}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chipRemoveChanges",{get:function(){return M.a.apply(void 0,this.chips.map(function(t){return t.destroy}))},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this._keyManager=new s.g(this.chips).withWrap().withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._tabOutSubscription=this._keyManager.tabOut.subscribe(function(){t._tabIndex=-1,setTimeout(function(){return t._tabIndex=t._userTabIndex||0})}),this._changeSubscription=this.chips.changes.pipe(Object(rt.a)(null)).subscribe(function(){t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips()})},e.prototype.ngOnInit=function(){this._selectionModel=new X.b(this.multiple,void 0,!1),this.stateChanges.next()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},e.prototype.ngOnDestroy=function(){this._tabOutSubscription.unsubscribe(),this._changeSubscription&&this._changeSubscription.unsubscribe(),this._dropSubscriptions(),this.stateChanges.complete()},e.prototype.registerInput=function(t){this._chipInput=t},e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.writeValue=function(t){this.chips&&this._setSelectionByValue(t,!1)},e.prototype.registerOnChange=function(t){this._onChange=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._elementRef.nativeElement.disabled=t,this.stateChanges.next()},e.prototype.onContainerClick=function(){this.focus()},e.prototype.focus=function(){this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(),this.stateChanges.next()))},e.prototype._focusInput=function(){this._chipInput&&this._chipInput.focus()},e.prototype._keydown=function(t){var e=t.target;t.keyCode===h.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())},e.prototype._updateTabIndex=function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)},e.prototype._updateKeyManager=function(t){var e=this.chips.toArray().indexOf(t);this._isValidIndex(e)&&(t._hasFocus&&(e<this.chips.length-1?this._keyManager.setActiveItem(e):e-1>=0&&this._keyManager.setActiveItem(e-1)),this._keyManager.activeItemIndex===e&&(this._lastDestroyedIndex=e))},e.prototype._updateFocusForDestroyedChips=function(){var t=this.chips;if(null!=this._lastDestroyedIndex&&t.length>0){var e=Math.min(this._lastDestroyedIndex,t.length-1);this._keyManager.setActiveItem(e);var i=this._keyManager.activeItem;i&&i.focus()}this._lastDestroyedIndex=null},e.prototype._isValidIndex=function(t){return t>=0&&t<this.chips.length},e.prototype._isInputEmpty=function(t){return!(!t||"input"!==t.nodeName.toLowerCase())&&!t.value},e.prototype._setSelectionByValue=function(t,e){var i=this;if(void 0===e&&(e=!0),this._clearSelection(),this.chips.forEach(function(t){return t.deselect()}),Array.isArray(t))t.forEach(function(t){return i._selectValue(t,e)}),this._sortValues();else{var n=this._selectValue(t,e);if(n){var r=this.chips.toArray().indexOf(n);e?this._keyManager.setActiveItem(r):this._keyManager.updateActiveItemIndex(r)}}},e.prototype._selectValue=function(t,e){var i=this;void 0===e&&(e=!0);var n=this.chips.find(function(e){return null!=e.value&&i._compareWith(e.value,t)});return n&&(e?n.selectViaInteraction():n.select(),this._selectionModel.select(n)),n},e.prototype._initializeSelection=function(){var t=this;Promise.resolve().then(function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())})},e.prototype._clearSelection=function(t){this._selectionModel.clear(),this.chips.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()},e.prototype._sortValues=function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(e){e.selected&&t._selectionModel.select(e)}),this.stateChanges.next())},e.prototype._propagateChanges=function(t){var e=null;e=Array.isArray(this.selected)?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.change.emit(new mt(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()},e.prototype._blur=function(){var t=this;this.disabled||(this._chipInput?setTimeout(function(){t.focused||t._markAsTouched()}):this._markAsTouched())},e.prototype._markAsTouched=function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()},e.prototype._resetChips=function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()},e.prototype._dropSubscriptions=function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null)},e.prototype._listenToChipsSelection=function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach(function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()}),e.isUserInput&&t._propagateChanges()})},e.prototype._listenToChipsFocus=function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(e){var i=t.chips.toArray().indexOf(e.chip);t._isValidIndex(i)&&t._keyManager.updateActiveItemIndex(i),t.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){t._blur(),t.stateChanges.next()})},e.prototype._listenToChipsRemoved=function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(e){t._updateKeyManager(e.chip)})},e.decorators=[{type:n.j,args:[{selector:"mat-chip-list",template:'<div class="mat-chip-list-wrapper"><ng-content></ng-content></div>',exportAs:"matChipList",host:{"[attr.tabindex]":"_tabIndex","[attr.aria-describedby]":"_ariaDescribedby || null","[attr.aria-required]":"required.toString()","[attr.aria-disabled]":"disabled.toString()","[attr.aria-invalid]":"errorState","[attr.aria-multiselectable]":"multiple","[attr.role]":"role","[class.mat-chip-list-disabled]":"disabled","[class.mat-chip-list-invalid]":"errorState","[class.mat-chip-list-required]":"required","[attr.aria-orientation]":"ariaOrientation",class:"mat-chip-list","(focus)":"focus()","(blur)":"_blur()","(keydown)":"_keydown($event)"},providers:[{provide:T.c,useExisting:e}],styles:[".mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:baseline}.mat-chip:not(.mat-basic-chip){transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:inline-flex;padding:7px 12px;border-radius:24px;align-items:center;cursor:default}.mat-chip:not(.mat-basic-chip)+.mat-chip:not(.mat-basic-chip){margin:0 0 0 8px}[dir=rtl] .mat-chip:not(.mat-basic-chip)+.mat-chip:not(.mat-basic-chip){margin:0 8px 0 0}.mat-form-field-prefix .mat-chip:not(.mat-basic-chip):last-child{margin-right:8px}[dir=rtl] .mat-form-field-prefix .mat-chip:not(.mat-basic-chip):last-child{margin-left:8px}.mat-chip:not(.mat-basic-chip) .mat-chip-remove.mat-icon{width:1em;height:1em}.mat-chip:not(.mat-basic-chip):focus{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);outline:0}@media screen and (-ms-high-contrast:active){.mat-chip:not(.mat-basic-chip){outline:solid 1px}}.mat-chip-list-stacked .mat-chip-list-wrapper{display:block}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-chip:not(.mat-basic-chip){display:block;margin:0;margin-bottom:8px}[dir=rtl] .mat-chip-list-stacked .mat-chip-list-wrapper .mat-chip:not(.mat-basic-chip){margin:0;margin-bottom:8px}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-chip:not(.mat-basic-chip):last-child,[dir=rtl] .mat-chip-list-stacked .mat-chip-list-wrapper .mat-chip:not(.mat-basic-chip):last-child{margin-bottom:0}.mat-form-field-prefix .mat-chip-list-wrapper{margin-bottom:8px}.mat-chip-remove{margin-right:-4px;margin-left:6px;cursor:pointer}[dir=rtl] .mat-chip-remove{margin-right:6px;margin-left:-4px}input.mat-chip-input{width:150px;margin:3px;flex:1 0 150px}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:n.h},{type:u.c,decorators:[{type:n.G}]},{type:E.j,decorators:[{type:n.G}]},{type:E.d,decorators:[{type:n.G}]},{type:o.d},{type:E.h,decorators:[{type:n.G},{type:n.R}]}]},e.propDecorators={errorStateMatcher:[{type:n.y}],multiple:[{type:n.y}],compareWith:[{type:n.y}],value:[{type:n.y}],id:[{type:n.y}],required:[{type:n.y}],placeholder:[{type:n.y}],disabled:[{type:n.y}],ariaOrientation:[{type:n.y,args:["aria-orientation"]}],selectable:[{type:n.y}],tabIndex:[{type:n.y}],change:[{type:n.H}],valueChange:[{type:n.H}],chips:[{type:n.m,args:[ut]}]},e}(dt),yt=function(){function t(t){this._elementRef=t,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=[h.f],this.chipEnd=new n.r,this.placeholder="",this._inputElement=this._elementRef.nativeElement}return Object.defineProperty(t.prototype,"chipList",{set:function(t){t&&(this._chipList=t,this._chipList.registerInput(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addOnBlur",{get:function(){return this._addOnBlur},set:function(t){this._addOnBlur=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this._inputElement.value},enumerable:!0,configurable:!0}),t.prototype._keydown=function(t){this._emitChipEnd(t)},t.prototype._blur=function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()},t.prototype._focus=function(){this.focused=!0,this._chipList.stateChanges.next()},t.prototype._emitChipEnd=function(t){!this._inputElement.value&&t&&this._chipList._keydown(t),(!t||this.separatorKeyCodes.indexOf(t.keyCode)>-1)&&(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())},t.prototype._onInput=function(){this._chipList.stateChanges.next()},t.prototype.focus=function(){this._inputElement.focus()},t.decorators=[{type:n.n,args:[{selector:"input[matChipInputFor]",exportAs:"matChipInput, matChipInputFor",host:{class:"mat-chip-input mat-input-element","(keydown)":"_keydown($event)","(blur)":"_blur()","(focus)":"_focus()","(input)":"_onInput()"}}]}],t.ctorParameters=function(){return[{type:n.o}]},t.propDecorators={chipList:[{type:n.y,args:["matChipInputFor"]}],addOnBlur:[{type:n.y,args:["matChipInputAddOnBlur"]}],separatorKeyCodes:[{type:n.y,args:["matChipInputSeparatorKeyCodes"]}],chipEnd:[{type:n.H,args:["matChipInputTokenEnd"]}],placeholder:[{type:n.y}]},t}(),_t=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[],exports:[gt,ut,yt,ht,ht,ct],declarations:[gt,ut,yt,ht,ht,ct],providers:[o.d]}]}],t.ctorParameters=function(){return[]},t}(),vt=i("w24y"),bt=i("SlD5");function xt(t){return Error("MatDatepicker: No provider found for "+t+". You must import one of the following modules at your application root: MatNativeDateModule, MatMomentDateModule, or provide a custom implementation.")}var At=function(){function t(){this.changes=new S.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),wt=function(){return function(t,e,i,n){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=n}}(),Pt=function(){function t(){this.numCols=7,this.allowDisabledSelection=!1,this.activeCell=0,this.cellAspectRatio=1,this.selectedValueChange=new n.r}return t.prototype._cellClicked=function(t){(this.allowDisabledSelection||t.enabled)&&this.selectedValueChange.emit(t.value)},Object.defineProperty(t.prototype,"_firstRowOffset",{get:function(){return this.rows&&this.rows.length&&this.rows[0].length?this.numCols-this.rows[0].length:0},enumerable:!0,configurable:!0}),t.prototype._isActiveCell=function(t,e){var i=t*this.numCols+e;return t&&(i-=this._firstRowOffset),i==this.activeCell},t.decorators=[{type:n.j,args:[{selector:"[mat-calendar-body]",template:'<tr *ngIf="_firstRowOffset < labelMinRequiredCells" aria-hidden="true"><td class="mat-calendar-body-label" [attr.colspan]="numCols" [style.paddingTop.%]="50 * cellAspectRatio / numCols" [style.paddingBottom.%]="50 * cellAspectRatio / numCols">{{label}}</td></tr><tr *ngFor="let row of rows; let rowIndex = index" role="row"><td *ngIf="rowIndex === 0 && _firstRowOffset" aria-hidden="true" class="mat-calendar-body-label" [attr.colspan]="_firstRowOffset" [style.paddingTop.%]="50 * cellAspectRatio / numCols" [style.paddingBottom.%]="50 * cellAspectRatio / numCols">{{_firstRowOffset >= labelMinRequiredCells ? label : \'\'}}</td><td *ngFor="let item of row; let colIndex = index" role="gridcell" class="mat-calendar-body-cell" [tabindex]="_isActiveCell(rowIndex, colIndex) ? 0 : -1" [class.mat-calendar-body-disabled]="!item.enabled" [class.mat-calendar-body-active]="_isActiveCell(rowIndex, colIndex)" [attr.aria-label]="item.ariaLabel" [attr.aria-disabled]="!item.enabled || null" (click)="_cellClicked(item)" [style.width.%]="100 / numCols" [style.paddingTop.%]="50 * cellAspectRatio / numCols" [style.paddingBottom.%]="50 * cellAspectRatio / numCols"><div class="mat-calendar-body-cell-content" [class.mat-calendar-body-selected]="selectedValue === item.value" [class.mat-calendar-body-today]="todayValue === item.value">{{item.displayValue}}</div></td></tr>',styles:[".mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.71429%;padding-right:4.71429%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:0;cursor:pointer}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-cell-content{position:absolute;top:5%;left:5%;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}[dir=rtl] .mat-calendar-body-label{text-align:right}"],host:{class:"mat-calendar-body",role:"grid","attr.aria-readonly":"true"},exportAs:"matCalendarBody",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[]},t.propDecorators={label:[{type:n.y}],rows:[{type:n.y}],todayValue:[{type:n.y}],selectedValue:[{type:n.y}],labelMinRequiredCells:[{type:n.y}],numCols:[{type:n.y}],allowDisabledSelection:[{type:n.y}],activeCell:[{type:n.y}],cellAspectRatio:[{type:n.y}],selectedValueChange:[{type:n.H}]},t}(),Et=function(){function t(t,e,i){if(this._dateAdapter=t,this._dateFormats=e,this._changeDetectorRef=i,this.selectedChange=new n.r,this._userSelection=new n.r,!this._dateAdapter)throw xt("DateAdapter");if(!this._dateFormats)throw xt("MAT_DATE_FORMATS");var r=this._dateAdapter.getFirstDayOfWeek(),o=this._dateAdapter.getDayOfWeekNames("narrow"),s=this._dateAdapter.getDayOfWeekNames("long").map(function(t,e){return{long:t,narrow:o[e]}});this._weekdays=s.slice(r).concat(s.slice(0,r)),this._activeDate=this._dateAdapter.today()}return Object.defineProperty(t.prototype,"activeDate",{get:function(){return this._activeDate},set:function(t){var e=this._activeDate;this._activeDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today(),this._hasSameMonthAndYear(e,this._activeDate)||this._init()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedDate=this._getDateInCurrentMonth(this._selected)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._init()},t.prototype._dateSelected=function(t){if(this._selectedDate!=t){var e=this._dateAdapter.getYear(this.activeDate),i=this._dateAdapter.getMonth(this.activeDate),n=this._dateAdapter.createDate(e,i,t);this.selectedChange.emit(n)}this._userSelection.emit()},t.prototype._init=function(){this._selectedDate=this._getDateInCurrentMonth(this.selected),this._todayDate=this._getDateInCurrentMonth(this._dateAdapter.today()),this._monthLabel=this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();var t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._createWeekCells(),this._changeDetectorRef.markForCheck()},t.prototype._createWeekCells=function(){var t=this._dateAdapter.getNumDaysInMonth(this.activeDate),e=this._dateAdapter.getDateNames();this._weeks=[[]];for(var i=0,n=this._firstWeekOffset;i<t;i++,n++){7==n&&(this._weeks.push([]),n=0);var r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),o=!this.dateFilter||this.dateFilter(r),s=this._dateAdapter.format(r,this._dateFormats.display.dateA11yLabel);this._weeks[this._weeks.length-1].push(new wt(i+1,e[i],s,o))}},t.prototype._getDateInCurrentMonth=function(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null},t.prototype._hasSameMonthAndYear=function(t,e){return!(!t||!e||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(e)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(e))},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.decorators=[{type:n.j,args:[{selector:"mat-month-view",template:'<table class="mat-calendar-table"><thead class="mat-calendar-table-header"><tr><th *ngFor="let day of _weekdays" [attr.aria-label]="day.long">{{day.narrow}}</th></tr><tr><th class="mat-calendar-table-header-divider" colspan="7" aria-hidden="true"></th></tr></thead><tbody mat-calendar-body [label]="_monthLabel" [rows]="_weeks" [todayValue]="_todayDate" [selectedValue]="_selectedDate" [labelMinRequiredCells]="3" [activeCell]="_dateAdapter.getDate(activeDate) - 1" (selectedValueChange)="_dateSelected($event)"></tbody></table>',exportAs:"matMonthView",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:o.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[o.g]}]},{type:n.h}]},t.propDecorators={activeDate:[{type:n.y}],selected:[{type:n.y}],dateFilter:[{type:n.y}],selectedChange:[{type:n.H}],_userSelection:[{type:n.H}]},t}(),Tt=function(){function t(t,e){if(this._dateAdapter=t,this._changeDetectorRef=e,this.selectedChange=new n.r,!this._dateAdapter)throw xt("DateAdapter");this._activeDate=this._dateAdapter.today()}return Object.defineProperty(t.prototype,"activeDate",{get:function(){return this._activeDate},set:function(t){var e=this._activeDate;this._activeDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today(),Math.floor(this._dateAdapter.getYear(e)/24)!=Math.floor(this._dateAdapter.getYear(this._activeDate)/24)&&this._init()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedYear=this._selected&&this._dateAdapter.getYear(this._selected)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._init()},t.prototype._init=function(){var t=this;this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());var e=this._dateAdapter.getYear(this._activeDate),i=e%24;this._years=[];for(var n=0,r=[];n<24;n++)r.push(e-i+n),4==r.length&&(this._years.push(r.map(function(e){return t._createCellForYear(e)})),r=[]);this._changeDetectorRef.markForCheck()},t.prototype._yearSelected=function(t){var e=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,e,1));this.selectedChange.emit(this._dateAdapter.createDate(t,e,Math.min(this._dateAdapter.getDate(this.activeDate),i)))},t.prototype._getActiveCell=function(){return this._dateAdapter.getYear(this.activeDate)%24},t.prototype._createCellForYear=function(t){var e=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return new wt(t,e,e,this._isYearEnabled(t))},t.prototype._isYearEnabled=function(t){if(!this.dateFilter)return!0;for(var e=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(e)==t;e=this._dateAdapter.addCalendarDays(e,1))if(this.dateFilter(e))return!0;return!1},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.decorators=[{type:n.j,args:[{selector:"mat-multi-year-view",template:'<table class="mat-calendar-table"><thead class="mat-calendar-table-header"><tr><th class="mat-calendar-table-header-divider" colspan="4"></th></tr></thead><tbody mat-calendar-body allowDisabledSelection="true" [rows]="_years" [todayValue]="_todayYear" [selectedValue]="_selectedYear" [numCols]="4" [cellAspectRatio]="4 / 7" [activeCell]="_getActiveCell()" (selectedValueChange)="_yearSelected($event)"></tbody></table>',exportAs:"matMultiYearView",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:o.c,decorators:[{type:n.G}]},{type:n.h}]},t.propDecorators={activeDate:[{type:n.y}],selected:[{type:n.y}],dateFilter:[{type:n.y}],selectedChange:[{type:n.H}]},t}(),St=function(){function t(t,e,i){if(this._dateAdapter=t,this._dateFormats=e,this._changeDetectorRef=i,this.selectedChange=new n.r,!this._dateAdapter)throw xt("DateAdapter");if(!this._dateFormats)throw xt("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}return Object.defineProperty(t.prototype,"activeDate",{get:function(){return this._activeDate},set:function(t){var e=this._activeDate;this._activeDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today(),this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(this._activeDate)&&this._init()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedMonth=this._getMonthInCurrentYear(this._selected)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._init()},t.prototype._monthSelected=function(t){var e=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1));this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),e)))},t.prototype._init=function(){var t=this;this._selectedMonth=this._getMonthInCurrentYear(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);var e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(function(i){return i.map(function(i){return t._createCellForMonth(i,e[i])})}),this._changeDetectorRef.markForCheck()},t.prototype._getMonthInCurrentYear=function(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null},t.prototype._createCellForMonth=function(t,e){var i=this._dateAdapter.format(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),this._dateFormats.display.monthYearA11yLabel);return new wt(t,e.toLocaleUpperCase(),i,this._isMonthEnabled(t))},t.prototype._isMonthEnabled=function(t){if(!this.dateFilter)return!0;for(var e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this._dateAdapter.getMonth(e)==t;e=this._dateAdapter.addCalendarDays(e,1))if(this.dateFilter(e))return!0;return!1},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.decorators=[{type:n.j,args:[{selector:"mat-year-view",template:'<table class="mat-calendar-table"><thead class="mat-calendar-table-header"><tr><th class="mat-calendar-table-header-divider" colspan="4"></th></tr></thead><tbody mat-calendar-body allowDisabledSelection="true" [label]="_yearLabel" [rows]="_months" [todayValue]="_todayMonth" [selectedValue]="_selectedMonth" [labelMinRequiredCells]="2" [numCols]="4" [cellAspectRatio]="4 / 7" [activeCell]="_dateAdapter.getMonth(activeDate)" (selectedValueChange)="_monthSelected($event)"></tbody></table>',exportAs:"matYearView",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:o.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[o.g]}]},{type:n.h}]},t.propDecorators={activeDate:[{type:n.y}],selected:[{type:n.y}],dateFilter:[{type:n.y}],selectedChange:[{type:n.H}]},t}(),Ct=function(){function t(t,e,i,r,o,s,a){var l=this;if(this._elementRef=t,this._intl=e,this._ngZone=i,this._dateAdapter=r,this._dateFormats=o,this._dir=a,this.startView="month",this.selectedChange=new n.r,this._userSelection=new n.r,this._dateFilterForViews=function(t){return!!t&&(!l.dateFilter||l.dateFilter(t))&&(!l.minDate||l._dateAdapter.compareDate(t,l.minDate)>=0)&&(!l.maxDate||l._dateAdapter.compareDate(t,l.maxDate)<=0)},!this._dateAdapter)throw xt("DateAdapter");if(!this._dateFormats)throw xt("MAT_DATE_FORMATS");this._intlChanges=e.changes.subscribe(function(){return s.markForCheck()})}return Object.defineProperty(t.prototype,"startAt",{get:function(){return this._startAt},set:function(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_activeDate",{get:function(){return this._clampedActiveDate},set:function(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_periodButtonText",{get:function(){if("month"==this._currentView)return this._dateAdapter.format(this._activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this._currentView)return this._dateAdapter.getYearName(this._activeDate);var t=this._dateAdapter.getYear(this._activeDate);return this._dateAdapter.getYearName(this._dateAdapter.createDate(t-t%24,0,1))+" \u2013 "+this._dateAdapter.getYearName(this._dateAdapter.createDate(t+24-1-t%24,0,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_periodButtonLabel",{get:function(){return"month"==this._currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_prevButtonLabel",{get:function(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this._currentView]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_nextButtonLabel",{get:function(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this._currentView]},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._activeDate=this.startAt||this._dateAdapter.today(),this._focusActiveCell(),this._currentView=this.startView},t.prototype.ngOnDestroy=function(){this._intlChanges.unsubscribe()},t.prototype.ngOnChanges=function(t){var e=t.minDate||t.maxDate||t.dateFilter;if(e&&!e.firstChange){var i=this.monthView||this.yearView||this.multiYearView;i&&i._init()}},t.prototype._dateSelected=function(t){this._dateAdapter.sameDate(t,this.selected)||this.selectedChange.emit(t)},t.prototype._userSelected=function(){this._userSelection.emit()},t.prototype._goToDateInView=function(t,e){this._activeDate=t,this._currentView=e},t.prototype._currentPeriodClicked=function(){this._currentView="month"==this._currentView?"multi-year":"month"},t.prototype._previousClicked=function(){this._activeDate="month"==this._currentView?this._dateAdapter.addCalendarMonths(this._activeDate,-1):this._dateAdapter.addCalendarYears(this._activeDate,"year"==this._currentView?-1:-24)},t.prototype._nextClicked=function(){this._activeDate="month"==this._currentView?this._dateAdapter.addCalendarMonths(this._activeDate,1):this._dateAdapter.addCalendarYears(this._activeDate,"year"==this._currentView?1:24)},t.prototype._previousEnabled=function(){return!this.minDate||(!this.minDate||!this._isSameView(this._activeDate,this.minDate))},t.prototype._nextEnabled=function(){return!this.maxDate||!this._isSameView(this._activeDate,this.maxDate)},t.prototype._handleCalendarBodyKeydown=function(t){"month"==this._currentView?this._handleCalendarBodyKeydownInMonthView(t):"year"==this._currentView?this._handleCalendarBodyKeydownInYearView(t):this._handleCalendarBodyKeydownInMultiYearView(t)},t.prototype._focusActiveCell=function(){var t=this;this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.asObservable().pipe(Object(f.a)(1)).subscribe(function(){t._elementRef.nativeElement.querySelector(".mat-calendar-body-active").focus()})})},t.prototype._isSameView=function(t,e){return"month"==this._currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(e):"year"==this._currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e):Math.floor(this._dateAdapter.getYear(t)/24)==Math.floor(this._dateAdapter.getYear(e)/24)},t.prototype._handleCalendarBodyKeydownInMonthView=function(t){var e=this._isRtl();switch(t.keyCode){case h.i:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,e?1:-1);break;case h.m:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,e?-1:1);break;case h.p:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case h.d:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case h.h:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case h.e:this._activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case h.l:this._activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case h.k:this._activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case h.f:return void(this._dateFilterForViews(this._activeDate)&&(this._dateSelected(this._activeDate),this._userSelected(),t.preventDefault()));default:return}this._focusActiveCell(),t.preventDefault()},t.prototype._handleCalendarBodyKeydownInYearView=function(t){var e=this._isRtl();switch(t.keyCode){case h.i:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,e?1:-1);break;case h.m:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,e?-1:1);break;case h.p:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case h.d:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case h.h:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case h.e:this._activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case h.l:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case h.k:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case h.f:this._goToDateInView(this._activeDate,"month");break;default:return}this._focusActiveCell(),t.preventDefault()},t.prototype._handleCalendarBodyKeydownInMultiYearView=function(t){switch(t.keyCode){case h.i:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-1);break;case h.m:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,1);break;case h.p:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case h.d:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case h.h:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-this._dateAdapter.getYear(this._activeDate)%24);break;case h.e:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-this._dateAdapter.getYear(this._activeDate)%24-1);break;case h.l:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case h.k:this._activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case h.f:this._goToDateInView(this._activeDate,"year");break;default:return}this._focusActiveCell(),t.preventDefault()},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.prototype._isRtl=function(){return this._dir&&"rtl"===this._dir.value},t.decorators=[{type:n.j,args:[{selector:"mat-calendar",template:'<div class="mat-calendar-header"><div class="mat-calendar-controls"><button mat-button class="mat-calendar-period-button" (click)="_currentPeriodClicked()" [attr.aria-label]="_periodButtonLabel">{{_periodButtonText}}<div class="mat-calendar-arrow" [class.mat-calendar-invert]="_currentView != \'month\'"></div></button><div class="mat-calendar-spacer"></div><button mat-icon-button class="mat-calendar-previous-button" [disabled]="!_previousEnabled()" (click)="_previousClicked()" [attr.aria-label]="_prevButtonLabel"></button> <button mat-icon-button class="mat-calendar-next-button" [disabled]="!_nextEnabled()" (click)="_nextClicked()" [attr.aria-label]="_nextButtonLabel"></button></div></div><div class="mat-calendar-content" (keydown)="_handleCalendarBodyKeydown($event)" [ngSwitch]="_currentView" cdkMonitorSubtreeFocus tabindex="-1"><mat-month-view *ngSwitchCase="\'month\'" [activeDate]="_activeDate" [selected]="selected" [dateFilter]="_dateFilterForViews" (selectedChange)="_dateSelected($event)" (_userSelection)="_userSelected()"></mat-month-view><mat-year-view *ngSwitchCase="\'year\'" [activeDate]="_activeDate" [selected]="selected" [dateFilter]="_dateFilterForViews" (selectedChange)="_goToDateInView($event, \'month\')"></mat-year-view><mat-multi-year-view *ngSwitchCase="\'multi-year\'" [activeDate]="_activeDate" [selected]="selected" [dateFilter]="_dateFilterForViews" (selectedChange)="_goToDateInView($event, \'year\')"></mat-multi-year-view></div>',styles:[".mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:0}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-next-button,.mat-calendar-previous-button{position:relative}.mat-calendar-next-button::after,.mat-calendar-previous-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:'';margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-next-button,[dir=rtl] .mat-calendar-previous-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:'';position:absolute;top:0;left:-8px;right:-8px;height:1px}"],host:{class:"mat-calendar"},exportAs:"matCalendar",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:n.o},{type:At},{type:n.F},{type:o.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[o.g]}]},{type:n.h},{type:u.c,decorators:[{type:n.G}]}]},t.propDecorators={startAt:[{type:n.y}],startView:[{type:n.y}],selected:[{type:n.y}],minDate:[{type:n.y}],maxDate:[{type:n.y}],dateFilter:[{type:n.y}],selectedChange:[{type:n.H}],_userSelection:[{type:n.H}],monthView:[{type:n.X,args:[Et]}],yearView:[{type:n.X,args:[St]}],multiYearView:[{type:n.X,args:[Tt]}]},t}(),Ot=0,Mt=new n.w("mat-datepicker-scroll-strategy");function Rt(t){return function(){return t.scrollStrategies.reposition()}}var It={provide:Mt,deps:[c.c],useFactory:Rt},Dt=function(){function t(){}return t.prototype.ngAfterContentInit=function(){this._calendar._focusActiveCell()},t.decorators=[{type:n.j,args:[{selector:"mat-datepicker-content",template:'<mat-calendar cdkTrapFocus [id]="datepicker.id" [ngClass]="datepicker.panelClass" [startAt]="datepicker.startAt" [startView]="datepicker.startView" [minDate]="datepicker._minDate" [maxDate]="datepicker._maxDate" [dateFilter]="datepicker._dateFilter" [selected]="datepicker._selected" (selectedChange)="datepicker._select($event)" (_userSelection)="datepicker.close()"></mat-calendar>',styles:[".mat-datepicker-content{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);display:block;border-radius:2px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content-touch{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-calendar{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation:landscape){.mat-datepicker-content-touch .mat-calendar{width:64vh;height:80vh}}@media all and (orientation:portrait){.mat-datepicker-content-touch .mat-calendar{width:80vw;height:100vw}}"],host:{class:"mat-datepicker-content","[class.mat-datepicker-content-touch]":"datepicker.touchUi"},exportAs:"matDatepickerContent",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[]},t.propDecorators={_calendar:[{type:n.X,args:[Ct]}]},t}(),Lt=function(){function t(t,e,i,r,o,s,a,l){if(this._dialog=t,this._overlay=e,this._ngZone=i,this._viewContainerRef=r,this._scrollStrategy=o,this._dateAdapter=s,this._dir=a,this._document=l,this.startView="month",this._touchUi=!1,this.selectedChanged=new n.r,this.openedStream=new n.r,this.closedStream=new n.r,this._opened=!1,this.id="mat-datepicker-"+Ot++,this._validSelected=null,this._focusedElementBeforeOpen=null,this._inputSubscription=ot.a.EMPTY,this._disabledChange=new S.a,!this._dateAdapter)throw xt("DateAdapter")}return Object.defineProperty(t.prototype,"startAt",{get:function(){return this._startAt||(this._datepickerInput?this._datepickerInput.value:null)},set:function(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchUi",{get:function(){return this._touchUi},set:function(t){this._touchUi=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return void 0===this._disabled&&this._datepickerInput?this._datepickerInput.disabled:!!this._disabled},set:function(t){var e=Object(a.c)(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opened",{get:function(){return this._opened},set:function(t){t?this.open():this.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_selected",{get:function(){return this._validSelected},set:function(t){this._validSelected=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_minDate",{get:function(){return this._datepickerInput&&this._datepickerInput.min},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_maxDate",{get:function(){return this._datepickerInput&&this._datepickerInput.max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_dateFilter",{get:function(){return this._datepickerInput&&this._datepickerInput._dateFilter},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&this._popupRef.dispose()},t.prototype._select=function(t){var e=this._selected;this._selected=t,this._dateAdapter.sameDate(e,this._selected)||this.selectedChanged.emit(t)},t.prototype._registerInput=function(t){var e=this;if(this._datepickerInput)throw Error("A MatDatepicker can only be associated with a single input.");this._datepickerInput=t,this._inputSubscription=this._datepickerInput._valueChange.subscribe(function(t){return e._selected=t})},t.prototype.open=function(){if(!this._opened&&!this.disabled){if(!this._datepickerInput)throw Error("Attempted to open an MatDatepicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}},t.prototype.close=function(){var t=this;if(this._opened){this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._calendarPortal&&this._calendarPortal.isAttached&&this._calendarPortal.detach();var e=function(){t._opened&&(t._opened=!1,t.closedStream.emit(),t._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}},t.prototype._openAsDialog=function(){var t=this;this._dialogRef=this._dialog.open(Dt,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"mat-datepicker-dialog"}),this._dialogRef.afterClosed().subscribe(function(){return t.close()}),this._dialogRef.componentInstance.datepicker=this},t.prototype._openAsPopup=function(){var t=this;(this._calendarPortal||(this._calendarPortal=new p.d(Dt,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached())||(this._popupRef.attach(this._calendarPortal).instance.datepicker=this,this._ngZone.onStable.asObservable().pipe(Object(f.a)(1)).subscribe(function(){t._popupRef.updatePosition()}))},t.prototype._createPopup=function(){var t=this,e=new c.d({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir?this._dir.value:"ltr",scrollStrategy:this._scrollStrategy(),panelClass:"mat-datepicker-popup"});this._popupRef=this._overlay.create(e),Object(M.a)(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Object(d.a)(function(t){return t.keyCode===h.g}))).subscribe(function(){return t.close()})},t.prototype._createPopupPositionStrategy=function(){var t=this._datepickerInput._getPopupFallbackOffset();return this._overlay.position().connectedTo(this._datepickerInput.getPopupConnectionElementRef(),{originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}).withFallbackPosition({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},void 0,t).withFallbackPosition({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}).withFallbackPosition({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"},void 0,t)},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.decorators=[{type:n.j,args:[{selector:"mat-datepicker",template:"",exportAs:"matDatepicker",changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:vt.d},{type:c.c},{type:n.F},{type:n.Z},{type:void 0,decorators:[{type:n.u,args:[Mt]}]},{type:o.c,decorators:[{type:n.G}]},{type:u.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[l.c]}]}]},t.propDecorators={startAt:[{type:n.y}],startView:[{type:n.y}],touchUi:[{type:n.y}],disabled:[{type:n.y}],selectedChanged:[{type:n.H}],panelClass:[{type:n.y}],openedStream:[{type:n.H,args:["opened"]}],closedStream:[{type:n.H,args:["closed"]}],opened:[{type:n.y}]},t}(),kt={provide:E.g,useExisting:Object(n._4)(function(){return Bt}),multi:!0},Ft={provide:E.f,useExisting:Object(n._4)(function(){return Bt}),multi:!0},Nt=function(){return function(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}(),Bt=function(){function t(t,e,i,r){var o=this;if(this._elementRef=t,this._dateAdapter=e,this._dateFormats=i,this._formField=r,this.dateChange=new n.r,this.dateInput=new n.r,this._valueChange=new n.r,this._disabledChange=new n.r,this._onTouched=function(){},this._cvaOnChange=function(){},this._validatorOnChange=function(){},this._datepickerSubscription=ot.a.EMPTY,this._localeSubscription=ot.a.EMPTY,this._parseValidator=function(){return o._lastValueValid?null:{matDatepickerParse:{text:o._elementRef.nativeElement.value}}},this._minValidator=function(t){var e=o._getValidDateOrNull(o._dateAdapter.deserialize(t.value));return!o.min||!e||o._dateAdapter.compareDate(o.min,e)<=0?null:{matDatepickerMin:{min:o.min,actual:e}}},this._maxValidator=function(t){var e=o._getValidDateOrNull(o._dateAdapter.deserialize(t.value));return!o.max||!e||o._dateAdapter.compareDate(o.max,e)>=0?null:{matDatepickerMax:{max:o.max,actual:e}}},this._filterValidator=function(t){var e=o._getValidDateOrNull(o._dateAdapter.deserialize(t.value));return o._dateFilter&&e&&!o._dateFilter(e)?{matDatepickerFilter:!0}:null},this._validator=E.m.compose([this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]),this._lastValueValid=!1,!this._dateAdapter)throw xt("DateAdapter");if(!this._dateFormats)throw xt("MAT_DATE_FORMATS");this._localeSubscription=e.localeChanges.subscribe(function(){o.value=o.value})}return Object.defineProperty(t.prototype,"matDatepicker",{set:function(t){this.registerDatepicker(t)},enumerable:!0,configurable:!0}),t.prototype.registerDatepicker=function(t){t&&(this._datepicker=t,this._datepicker._registerInput(this))},Object.defineProperty(t.prototype,"matDatepickerFilter",{set:function(t){this._dateFilter=t,this._validatorOnChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=!t||this._dateAdapter.isValid(t),t=this._getValidDateOrNull(t);var e=this.value;this._value=t,this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):"",this._dateAdapter.sameDate(e,t)||this._valueChange.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){this._min=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){this._max=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return!!this._disabled},set:function(t){var e=Object(a.c)(t);this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e))},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._datepicker&&(this._datepickerSubscription=this._datepicker.selectedChanged.subscribe(function(e){t.value=e,t._cvaOnChange(e),t._onTouched(),t.dateInput.emit(new Nt(t,t._elementRef.nativeElement)),t.dateChange.emit(new Nt(t,t._elementRef.nativeElement))}))},t.prototype.ngOnDestroy=function(){this._datepickerSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()},t.prototype.registerOnValidatorChange=function(t){this._validatorOnChange=t},t.prototype.validate=function(t){return this._validator?this._validator(t):null},t.prototype.getPopupConnectionElementRef=function(){return this._formField?this._formField.underlineRef:this._elementRef},t.prototype._getPopupFallbackOffset=function(){return this._formField?-this._formField._inputContainerRef.nativeElement.clientHeight:0},t.prototype.writeValue=function(t){this.value=t},t.prototype.registerOnChange=function(t){this._cvaOnChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype._onKeydown=function(t){t.altKey&&t.keyCode===h.d&&(this._datepicker.open(),t.preventDefault())},t.prototype._onInput=function(t){var e=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=!e||this._dateAdapter.isValid(e),e=this._getValidDateOrNull(e),this._value=e,this._cvaOnChange(e),this._valueChange.emit(e),this.dateInput.emit(new Nt(this,this._elementRef.nativeElement))},t.prototype._onChange=function(){this.dateChange.emit(new Nt(this,this._elementRef.nativeElement))},t.prototype._getValidDateOrNull=function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null},t.decorators=[{type:n.n,args:[{selector:"input[matDatepicker]",providers:[kt,Ft,{provide:bt.a,useExisting:t}],host:{"[attr.aria-haspopup]":"true","[attr.aria-owns]":"(_datepicker?.opened && _datepicker.id) || null","[attr.min]":"min ? _dateAdapter.toIso8601(min) : null","[attr.max]":"max ? _dateAdapter.toIso8601(max) : null","[disabled]":"disabled","(input)":"_onInput($event.target.value)","(change)":"_onChange()","(blur)":"_onTouched()","(keydown)":"_onKeydown($event)"},exportAs:"matDatepickerInput"}]}],t.ctorParameters=function(){return[{type:n.o},{type:o.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[o.g]}]},{type:T.b,decorators:[{type:n.G}]}]},t.propDecorators={matDatepicker:[{type:n.y}],matDatepickerFilter:[{type:n.y}],value:[{type:n.y}],min:[{type:n.y}],max:[{type:n.y}],disabled:[{type:n.y}],dateChange:[{type:n.H}],dateInput:[{type:n.H}]},t}(),Vt=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[matDatepickerToggleIcon]"}]}],t.ctorParameters=function(){return[]},t}(),zt=function(){function t(t,e){this._intl=t,this._changeDetectorRef=e,this._stateChanges=ot.a.EMPTY}return Object.defineProperty(t.prototype,"disabled",{get:function(){return void 0===this._disabled?this.datepicker.disabled:!!this._disabled},set:function(t){this._disabled=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){t.datepicker&&this._watchStateChanges()},t.prototype.ngOnDestroy=function(){this._stateChanges.unsubscribe()},t.prototype.ngAfterContentInit=function(){this._watchStateChanges()},t.prototype._open=function(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())},t.prototype._watchStateChanges=function(){var t=this,e=this.datepicker?this.datepicker._disabledChange:Object(R.a)(),i=this.datepicker&&this.datepicker._datepickerInput?this.datepicker._datepickerInput._disabledChange:Object(R.a)(),n=this.datepicker?Object(M.a)(this.datepicker.openedStream,this.datepicker.closedStream):Object(R.a)();this._stateChanges.unsubscribe(),this._stateChanges=Object(M.a)(this._intl.changes,e,i,n).subscribe(function(){return t._changeDetectorRef.markForCheck()})},t.decorators=[{type:n.j,args:[{selector:"mat-datepicker-toggle",template:'<button mat-icon-button type="button" [attr.aria-label]="_intl.openCalendarLabel" [disabled]="disabled" (click)="_open($event)"><svg *ngIf="!_customIcon" class="mat-datepicker-toggle-default-icon" viewBox="0 0 24 24" width="24px" height="24px" fill="currentColor" focusable="false"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg><ng-content select="[matDatepickerToggleIcon]"></ng-content></button>',styles:[".mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}"],host:{class:"mat-datepicker-toggle","[class.mat-datepicker-toggle-active]":"datepicker && datepicker.opened"},exportAs:"matDatepickerToggle",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:At},{type:n.h}]},t.propDecorators={datepicker:[{type:n.y,args:["for"]}],disabled:[{type:n.y}],_customIcon:[{type:n.l,args:[Vt]}]},t}(),Ut=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[l.b,H.c,vt.i,c.g,s.a],exports:[Ct,Pt,Lt,Dt,Bt,zt,Vt,Et,St,Tt],declarations:[Ct,Pt,Lt,Dt,Bt,zt,Vt,Et,St,Tt],providers:[At,It],entryComponents:[Dt]}]}],t.ctorParameters=function(){return[]},t}(),jt=function(){function t(){this._vertical=!1,this._inset=!1}return Object.defineProperty(t.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inset",{get:function(){return this._inset},set:function(t){this._inset=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.decorators=[{type:n.j,args:[{selector:"mat-divider",host:{role:"separator","[attr.aria-orientation]":'vertical ? "vertical" : "horizontal"',"[class.mat-divider-vertical]":"vertical","[class.mat-divider-inset]":"inset",class:"mat-divider"},template:"",styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:n._0.None,changeDetection:n.g.OnPush,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[]},t.propDecorators={vertical:[{type:n.y}],inset:[{type:n.y}]},t}(),Gt=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.n,l.b],exports:[jt,o.n],declarations:[jt]}]}],t.ctorParameters=function(){return[]},t}(),Wt=0,Ht=function(){function t(){this.id="cdk-accordion-"+Wt++,this._multi=!1}return Object.defineProperty(t.prototype,"multi",{get:function(){return this._multi},set:function(t){this._multi=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.decorators=[{type:n.n,args:[{selector:"cdk-accordion, [cdkAccordion]",exportAs:"cdkAccordion"}]}],t.ctorParameters=function(){return[]},t.propDecorators={multi:[{type:n.y}]},t}(),Xt=0,Yt=function(){function t(t,e,i){var r=this;this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=i,this.closed=new n.r,this.opened=new n.r,this.destroyed=new n.r,this.expandedChange=new n.r,this.id="cdk-accordion-child-"+Xt++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=i.listen(function(t,e){r.accordion&&!r.accordion.multi&&r.accordion.id===e&&r.id!==t&&(r.expanded=!1)})}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this._expanded},set:function(t){if(t=Object(a.c)(t),this._expanded!==t){if(this._expanded=t,this.expandedChange.emit(t),t){this.opened.emit();var e=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,e)}else this.closed.emit();this._changeDetectorRef.markForCheck()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.destroyed.emit(),this._removeUniqueSelectionListener()},t.prototype.toggle=function(){this.disabled||(this.expanded=!this.expanded)},t.prototype.close=function(){this.disabled||(this.expanded=!1)},t.prototype.open=function(){this.disabled||(this.expanded=!0)},t.decorators=[{type:n.n,args:[{selector:"cdk-accordion-item",exportAs:"cdkAccordionItem"}]}],t.ctorParameters=function(){return[{type:Ht,decorators:[{type:n.G}]},{type:n.h},{type:X.d}]},t.propDecorators={closed:[{type:n.H}],opened:[{type:n.H}],destroyed:[{type:n.H}],expandedChange:[{type:n.H}],expanded:[{type:n.y}],disabled:[{type:n.y}]},t}(),qt=function(){function t(){}return t.decorators=[{type:n.C,args:[{exports:[Ht,Yt],declarations:[Ht,Yt],providers:[X.c]}]}],t.ctorParameters=function(){return[]},t}(),Kt=i("fAeS"),Qt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hideToggle=!1,e.displayMode="default",e}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"hideToggle",{get:function(){return this._hideToggle},set:function(t){this._hideToggle=Object(a.c)(t)},enumerable:!0,configurable:!0}),e.decorators=[{type:n.n,args:[{selector:"mat-accordion",exportAs:"matAccordion",host:{class:"mat-accordion"}}]}],e.ctorParameters=function(){return[]},e.propDecorators={hideToggle:[{type:n.y}],displayMode:[{type:n.y}]},e}(Ht),Zt=function(){function t(t){this._template=t}return t.decorators=[{type:n.n,args:[{selector:"ng-template[matExpansionPanelContent]"}]}],t.ctorParameters=function(){return[{type:n.U}]},t}(),Jt={indicatorRotate:Object(Kt.m)("indicatorRotate",[Object(Kt.j)("collapsed",Object(Kt.k)({transform:"rotate(0deg)"})),Object(Kt.j)("expanded",Object(Kt.k)({transform:"rotate(180deg)"})),Object(Kt.l)("expanded <=> collapsed",Object(Kt.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),expansionHeaderHeight:Object(Kt.m)("expansionHeight",[Object(Kt.j)("collapsed",Object(Kt.k)({height:"{{collapsedHeight}}"}),{params:{collapsedHeight:"48px"}}),Object(Kt.j)("expanded",Object(Kt.k)({height:"{{expandedHeight}}"}),{params:{expandedHeight:"64px"}}),Object(Kt.l)("expanded <=> collapsed",Object(Kt.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:Object(Kt.m)("bodyExpansion",[Object(Kt.j)("collapsed",Object(Kt.k)({height:"0px",visibility:"hidden"})),Object(Kt.j)("expanded",Object(Kt.k)({height:"*",visibility:"visible"})),Object(Kt.l)("expanded <=> collapsed",Object(Kt.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])},$t=0,te=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o._viewContainerRef=r,o._hideToggle=!1,o._inputChanges=new S.a,o._headerId="mat-expansion-panel-header-"+$t++,o.accordion=e,o}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"hideToggle",{get:function(){return this._hideToggle},set:function(t){this._hideToggle=Object(a.c)(t)},enumerable:!0,configurable:!0}),e.prototype._getHideToggle=function(){return this.accordion?this.accordion.hideToggle:this.hideToggle},e.prototype._hasSpacing=function(){return!!this.accordion&&"default"===(this.expanded?this.accordion.displayMode:this._getExpandedState())},e.prototype._getExpandedState=function(){return this.expanded?"expanded":"collapsed"},e.prototype.ngAfterContentInit=function(){var t=this;this._lazyContent&&this.opened.pipe(Object(rt.a)(null),Object(d.a)(function(){return t.expanded&&!t._portal}),Object(f.a)(1)).subscribe(function(){t._portal=new p.h(t._lazyContent._template,t._viewContainerRef)})},e.prototype.ngOnChanges=function(t){this._inputChanges.next(t)},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._inputChanges.complete()},e.prototype._bodyAnimation=function(t){var e=t.element.classList,i=t.phaseName,n=t.toState;"done"===i&&"expanded"===n?e.add("mat-expanded"):"start"===i&&"collapsed"===n&&e.remove("mat-expanded")},e.decorators=[{type:n.j,args:[{styles:[".mat-expansion-panel{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);box-sizing:content-box;display:block;margin:0;transition:margin 225ms cubic-bezier(.4,0,.2,1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-expansion-panel-content{overflow:hidden}.mat-expansion-panel-content.mat-expanded{overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion .mat-expansion-panel-spacing:first-child{margin-top:0}.mat-accordion .mat-expansion-panel-spacing:last-child{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button{margin-left:0;margin-right:8px}"],selector:"mat-expansion-panel",exportAs:"matExpansionPanel",template:'<ng-content select="mat-expansion-panel-header"></ng-content><div class="mat-expansion-panel-content" role="region" [@bodyExpansion]="_getExpandedState()" (@bodyExpansion.done)="_bodyAnimation($event)" (@bodyExpansion.start)="_bodyAnimation($event)" [class.mat-expanded]="expanded" [attr.aria-labelledby]="_headerId" [id]="id" #body><div class="mat-expansion-panel-body"><ng-content></ng-content><ng-template [cdkPortalOutlet]="_portal"></ng-template></div><ng-content select="mat-action-row"></ng-content></div>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,inputs:["disabled","expanded"],outputs:["opened","closed","expandedChange"],animations:[Jt.bodyExpansion],host:{class:"mat-expansion-panel","[class.mat-expanded]":"expanded","[class.mat-expansion-panel-spacing]":"_hasSpacing()"}}]}],e.ctorParameters=function(){return[{type:Qt,decorators:[{type:n.G},{type:n.s}]},{type:n.h},{type:X.d},{type:n.Z}]},e.propDecorators={hideToggle:[{type:n.y}],_lazyContent:[{type:n.l,args:[Zt]}]},e}(Yt),ee=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-action-row",host:{class:"mat-action-row"}}]}],t.ctorParameters=function(){return[]},t}(),ie=function(){function t(t,e,i,n){var r=this;this.panel=t,this._element=e,this._focusMonitor=i,this._changeDetectorRef=n,this._parentChangeSubscription=ot.a.EMPTY,this._parentChangeSubscription=Object(M.a)(t.opened,t.closed,t._inputChanges.pipe(Object(d.a)(function(t){return!(!t.hideToggle&&!t.disabled)}))).subscribe(function(){return r._changeDetectorRef.markForCheck()}),i.monitor(e.nativeElement)}return t.prototype._toggle=function(){this.panel.toggle()},t.prototype._isExpanded=function(){return this.panel.expanded},t.prototype._getExpandedState=function(){return this.panel._getExpandedState()},t.prototype._getPanelId=function(){return this.panel.id},t.prototype._showToggle=function(){return!this.panel.hideToggle&&!this.panel.disabled},t.prototype._keydown=function(t){switch(t.keyCode){case h.n:case h.f:t.preventDefault(),this._toggle();break;default:return}},t.prototype.ngOnDestroy=function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element.nativeElement)},t.decorators=[{type:n.j,args:[{selector:"mat-expansion-panel-header",styles:[".mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:0}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-description,.mat-expansion-panel-header-title{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-description,[dir=rtl] .mat-expansion-panel-header-title{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:'';display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}"],template:'<span class="mat-content"><ng-content select="mat-panel-title"></ng-content><ng-content select="mat-panel-description"></ng-content><ng-content></ng-content></span><span [@indicatorRotate]="_getExpandedState()" *ngIf="_showToggle()" class="mat-expansion-indicator"></span>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,animations:[Jt.indicatorRotate,Jt.expansionHeaderHeight],host:{class:"mat-expansion-panel-header",role:"button","[attr.id]":"panel._headerId","[attr.tabindex]":"panel.disabled ? -1 : 0","[attr.aria-controls]":"_getPanelId()","[attr.aria-expanded]":"_isExpanded()","[attr.aria-disabled]":"panel.disabled","[class.mat-expanded]":"_isExpanded()","(click)":"_toggle()","(keydown)":"_keydown($event)","[@expansionHeight]":"{\n        value: _getExpandedState(),\n        params: {\n          collapsedHeight: collapsedHeight,\n          expandedHeight: expandedHeight\n        }\n    }"}}]}],t.ctorParameters=function(){return[{type:te,decorators:[{type:n.s}]},{type:n.o},{type:s.h},{type:n.h}]},t.propDecorators={expandedHeight:[{type:n.y}],collapsedHeight:[{type:n.y}]},t}(),ne=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-panel-description",host:{class:"mat-expansion-panel-header-description"}}]}],t.ctorParameters=function(){return[]},t}(),re=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-panel-title",host:{class:"mat-expansion-panel-header-title"}}]}],t.ctorParameters=function(){return[]},t}(),oe=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[l.b,s.a,qt,p.g],exports:[Qt,te,ee,ie,re,ne,Zt],declarations:[Qt,te,ee,ie,re,ne,Zt],providers:[X.c]}]}],t.ctorParameters=function(){return[]},t}();function se(t){return""+(t||"")}function ae(t){return"string"==typeof t?parseInt(t,10):t}var le=function(){function t(t){this._element=t,this._rowspan=1,this._colspan=1}return Object.defineProperty(t.prototype,"rowspan",{get:function(){return this._rowspan},set:function(t){this._rowspan=ae(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colspan",{get:function(){return this._colspan},set:function(t){this._colspan=ae(t)},enumerable:!0,configurable:!0}),t.prototype._setStyle=function(t,e){this._element.nativeElement.style[t]=e},t.decorators=[{type:n.j,args:[{selector:"mat-grid-tile",exportAs:"matGridTile",host:{class:"mat-grid-tile"},template:'<figure class="mat-figure"><ng-content></ng-content></figure>',styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-footer,.mat-grid-tile .mat-grid-tile-header{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-footer>*,.mat-grid-tile .mat-grid-tile-header>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-tile-footer.mat-2-line,.mat-grid-tile .mat-grid-tile-header.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:n.o}]},t.propDecorators={rowspan:[{type:n.y}],colspan:[{type:n.y}]},t}(),ce=function(){function t(t){this._element=t}return t.prototype.ngAfterContentInit=function(){this._lineSetter=new o.q(this._lines,this._element)},t.decorators=[{type:n.j,args:[{selector:"mat-grid-tile-header, mat-grid-tile-footer",template:'<ng-content select="[mat-grid-avatar], [matGridAvatar]"></ng-content><div class="mat-grid-list-text"><ng-content select="[mat-line], [matLine]"></ng-content></div><ng-content></ng-content>',changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:n.o}]},t.propDecorators={_lines:[{type:n.m,args:[o.o]}]},t}(),ue=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-grid-avatar], [matGridAvatar]",host:{class:"mat-grid-avatar"}}]}],t.ctorParameters=function(){return[]},t}(),he=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-grid-tile-header",host:{class:"mat-grid-tile-header"}}]}],t.ctorParameters=function(){return[]},t}(),pe=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-grid-tile-footer",host:{class:"mat-grid-tile-footer"}}]}],t.ctorParameters=function(){return[]},t}(),de=function(){function t(t,e){var i=this;this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(function(t){return i._trackTile(t)})}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowIndex+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowspan",{get:function(){var t=Math.max.apply(Math,this.tracker);return t>1?this.rowCount+t-1:this.rowCount},enumerable:!0,configurable:!0}),t.prototype._trackTile=function(t){var e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new fe(this.rowIndex,e)},t.prototype._findMatchingGap=function(t){if(t>this.tracker.length)throw Error("mat-grid-list: tile with colspan "+t+' is wider than grid with cols="'+this.tracker.length+'".');var e=-1,i=-1;do{this.columnIndex+t>this.tracker.length?this._nextRow():-1!=(e=this.tracker.indexOf(0,this.columnIndex))?(i=this._findGapEndIndex(e),this.columnIndex=e+1):this._nextRow()}while(i-e<t);return Math.max(e,0)},t.prototype._nextRow=function(){this.columnIndex=0,this.rowIndex++;for(var t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)},t.prototype._findGapEndIndex=function(t){for(var e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length},t.prototype._markTilePosition=function(t,e){for(var i=0;i<e.colspan;i++)this.tracker[t+i]=e.rowspan},t}(),fe=function(){return function(t,e){this.row=t,this.col=e}}(),me=function(){function t(){this._rows=0,this._rowspan=0}return t.prototype.init=function(t,e,i,n){this._gutterSize=be(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=i,this._direction=n},t.prototype.getBaseTileSize=function(t,e){return"("+t+"% - ("+this._gutterSize+" * "+e+"))"},t.prototype.getTilePosition=function(t,e){return 0===e?"0":ve("("+t+" + "+this._gutterSize+") * "+e)},t.prototype.getTileSize=function(t,e){return"("+t+" * "+e+") + ("+(e-1)+" * "+this._gutterSize+")"},t.prototype.setStyle=function(t,e,i){var n=100/this._cols,r=(this._cols-1)/this._cols;this.setColStyles(t,i,n,r),this.setRowStyles(t,e,n,r)},t.prototype.setColStyles=function(t,e,i,n){var r=this.getBaseTileSize(i,n),o="ltr"===this._direction?"left":"right";t._setStyle(o,this.getTilePosition(r,e)),t._setStyle("width",ve(this.getTileSize(r,t.colspan)))},t.prototype.getGutterSpan=function(){return this._gutterSize+" * ("+this._rowspan+" - 1)"},t.prototype.getTileSpan=function(t){return this._rowspan+" * "+this.getTileSize(t,1)},t.prototype.getComputedHeight=function(){return null},t}(),ge=function(t){function e(e){var i=t.call(this)||this;return i.fixedRowHeight=e,i}return Object(r.b)(e,t),e.prototype.init=function(e,i,n,r){t.prototype.init.call(this,e,i,n,r),this.fixedRowHeight=be(this.fixedRowHeight)},e.prototype.setRowStyles=function(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",ve(this.getTileSize(this.fixedRowHeight,t.rowspan)))},e.prototype.getComputedHeight=function(){return["height",ve(this.getTileSpan(this.fixedRowHeight)+" + "+this.getGutterSpan())]},e.prototype.reset=function(t){t._setListStyle(["height",null]),t._tiles.forEach(function(t){t._setStyle("top",null),t._setStyle("height",null)})},e}(me),ye=function(t){function e(e){var i=t.call(this)||this;return i._parseRatio(e),i}return Object(r.b)(e,t),e.prototype.setRowStyles=function(t,e,i,n){var r=i/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(r,n),t._setStyle("margin-top",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("padding-top",ve(this.getTileSize(this.baseTileHeight,t.rowspan)))},e.prototype.getComputedHeight=function(){return["padding-bottom",ve(this.getTileSpan(this.baseTileHeight)+" + "+this.getGutterSpan())]},e.prototype.reset=function(t){t._setListStyle(["padding-bottom",null]),t._tiles.forEach(function(t){t._setStyle("margin-top",null),t._setStyle("padding-top",null)})},e.prototype._parseRatio=function(t){var e=t.split(":");if(2!==e.length)throw Error('mat-grid-list: invalid ratio given for row-height: "'+t+'"');this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])},e}(me),_e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.setRowStyles=function(t,e){var i=100/this._rowspan,n=(this._rows-1)/this._rows,r=this.getBaseTileSize(i,n);t._setStyle("top",this.getTilePosition(r,e)),t._setStyle("height",ve(this.getTileSize(r,t.rowspan)))},e.prototype.reset=function(t){t._tiles.forEach(function(t){t._setStyle("top",null),t._setStyle("height",null)})},e}(me);function ve(t){return"calc("+t+")"}function be(t){return t.match(/px|em|rem/)?t:t+"px"}var xe=function(){function t(t,e){this._element=t,this._dir=e,this._gutter="1px"}return Object.defineProperty(t.prototype,"cols",{get:function(){return this._cols},set:function(t){this._cols=ae(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gutterSize",{get:function(){return this._gutter},set:function(t){this._gutter=se(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeight",{set:function(t){var e=se(t);e!==this._rowHeight&&(this._rowHeight=e,this._setTileStyler(this._rowHeight))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._checkCols(),this._checkRowHeight()},t.prototype.ngAfterContentChecked=function(){this._layoutTiles()},t.prototype._checkCols=function(){if(!this.cols)throw Error('mat-grid-list: must pass in number of columns. Example: <mat-grid-list cols="3">')},t.prototype._checkRowHeight=function(){this._rowHeight||this._setTileStyler("1:1")},t.prototype._setTileStyler=function(t){this._tileStyler&&this._tileStyler.reset(this),"fit"===t?this._tileStyler=new _e:t&&t.indexOf(":")>-1?this._tileStyler=new ye(t):this._tileStyler=new ge(t)},t.prototype._layoutTiles=function(){var t=this,e=new de(this.cols,this._tiles),i=this._dir?this._dir.value:"ltr";this._tileStyler.init(this.gutterSize,e,this.cols,i),this._tiles.forEach(function(i,n){var r=e.positions[n];t._tileStyler.setStyle(i,r.row,r.col)}),this._setListStyle(this._tileStyler.getComputedHeight())},t.prototype._setListStyle=function(t){t&&(this._element.nativeElement.style[t[0]]=t[1])},t.decorators=[{type:n.j,args:[{selector:"mat-grid-list",exportAs:"matGridList",template:"<div><ng-content></ng-content></div>",styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-footer,.mat-grid-tile .mat-grid-tile-header{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-footer>*,.mat-grid-tile .mat-grid-tile-header>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-tile-footer.mat-2-line,.mat-grid-tile .mat-grid-tile-header.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}"],host:{class:"mat-grid-list"},changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:n.o},{type:u.c,decorators:[{type:n.G}]}]},t.propDecorators={_tiles:[{type:n.m,args:[le]}],cols:[{type:n.y}],gutterSize:[{type:n.y}],rowHeight:[{type:n.y}]},t}(),Ae=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.p,o.n],exports:[xe,le,ce,o.p,o.n,he,pe,ue],declarations:[xe,le,ce,he,pe,ue]}]}],t.ctorParameters=function(){return[]},t}(),we=i("vgc3"),Pe=function(){return function(){}}(),Ee=Object(o.D)(Pe),Te=function(){return function(){}}(),Se=Object(o.D)(Te),Ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-nav-list",exportAs:"matNavList",host:{role:"navigation",class:"mat-nav-list"},template:"<ng-content></ng-content>",styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{margin:0}.mat-list,.mat-nav-list,.mat-selection-list{padding-top:8px;display:block}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{height:48px;line-height:16px}.mat-list .mat-subheader:first-child,.mat-nav-list .mat-subheader:first-child,.mat-selection-list .mat-subheader:first-child{margin-top:-8px}.mat-list .mat-list-item,.mat-list .mat-list-option,.mat-nav-list .mat-list-item,.mat-nav-list .mat-list-option,.mat-selection-list .mat-list-item,.mat-selection-list .mat-list-option{display:block;height:48px}.mat-list .mat-list-item .mat-list-item-content,.mat-list .mat-list-option .mat-list-item-content,.mat-nav-list .mat-list-item .mat-list-item-content,.mat-nav-list .mat-list-option .mat-list-item-content,.mat-selection-list .mat-list-item .mat-list-item-content,.mat-selection-list .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list .mat-list-item .mat-list-item-content-reverse,.mat-list .mat-list-option .mat-list-item-content-reverse,.mat-nav-list .mat-list-item .mat-list-item-content-reverse,.mat-nav-list .mat-list-option .mat-list-item-content-reverse,.mat-selection-list .mat-list-item .mat-list-item-content-reverse,.mat-selection-list .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list .mat-list-item .mat-list-item-ripple,.mat-list .mat-list-option .mat-list-item-ripple,.mat-nav-list .mat-list-item .mat-list-item-ripple,.mat-nav-list .mat-list-option .mat-list-item-ripple,.mat-selection-list .mat-list-item .mat-list-item-ripple,.mat-selection-list .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list .mat-list-item.mat-list-item-avatar,.mat-list .mat-list-option.mat-list-item-avatar,.mat-nav-list .mat-list-item.mat-list-item-avatar,.mat-nav-list .mat-list-option.mat-list-item-avatar,.mat-selection-list .mat-list-item.mat-list-item-avatar,.mat-selection-list .mat-list-option.mat-list-item-avatar{height:56px}.mat-list .mat-list-item.mat-2-line,.mat-list .mat-list-option.mat-2-line,.mat-nav-list .mat-list-item.mat-2-line,.mat-nav-list .mat-list-option.mat-2-line,.mat-selection-list .mat-list-item.mat-2-line,.mat-selection-list .mat-list-option.mat-2-line{height:72px}.mat-list .mat-list-item.mat-3-line,.mat-list .mat-list-option.mat-3-line,.mat-nav-list .mat-list-item.mat-3-line,.mat-nav-list .mat-list-option.mat-3-line,.mat-selection-list .mat-list-item.mat-3-line,.mat-selection-list .mat-list-option.mat-3-line{height:88px}.mat-list .mat-list-item.mat-multi-line,.mat-list .mat-list-option.mat-multi-line,.mat-nav-list .mat-list-item.mat-multi-line,.mat-nav-list .mat-list-option.mat-multi-line,.mat-selection-list .mat-list-item.mat-multi-line,.mat-selection-list .mat-list-option.mat-multi-line{height:auto}.mat-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list .mat-list-item .mat-list-text,.mat-list .mat-list-option .mat-list-text,.mat-nav-list .mat-list-item .mat-list-text,.mat-nav-list .mat-list-option .mat-list-text,.mat-selection-list .mat-list-item .mat-list-text,.mat-selection-list .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list .mat-list-item .mat-list-text>*,.mat-list .mat-list-option .mat-list-text>*,.mat-nav-list .mat-list-item .mat-list-text>*,.mat-nav-list .mat-list-option .mat-list-text>*,.mat-selection-list .mat-list-item .mat-list-text>*,.mat-selection-list .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list .mat-list-item .mat-list-text:empty,.mat-list .mat-list-option .mat-list-text:empty,.mat-nav-list .mat-list-item .mat-list-text:empty,.mat-nav-list .mat-list-option .mat-list-text:empty,.mat-selection-list .mat-list-item .mat-list-text:empty,.mat-selection-list .mat-list-option .mat-list-text:empty{display:none}.mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list .mat-list-item .mat-list-avatar,.mat-list .mat-list-option .mat-list-avatar,.mat-nav-list .mat-list-item .mat-list-avatar,.mat-nav-list .mat-list-option .mat-list-avatar,.mat-selection-list .mat-list-item .mat-list-avatar,.mat-selection-list .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list .mat-list-item .mat-list-icon,.mat-list .mat-list-option .mat-list-icon,.mat-nav-list .mat-list-item .mat-list-icon,.mat-nav-list .mat-list-option .mat-list-icon,.mat-selection-list .mat-list-item .mat-list-icon,.mat-selection-list .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list .mat-list-item .mat-divider,.mat-list .mat-list-option .mat-divider,.mat-nav-list .mat-list-item .mat-divider,.mat-nav-list .mat-list-option .mat-divider,.mat-selection-list .mat-list-item .mat-divider,.mat-selection-list .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list .mat-list-item .mat-divider,[dir=rtl] .mat-list .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list .mat-list-item .mat-divider.mat-divider-inset,.mat-list .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list[dense],.mat-nav-list[dense],.mat-selection-list[dense]{padding-top:4px;display:block}.mat-list[dense] .mat-subheader,.mat-nav-list[dense] .mat-subheader,.mat-selection-list[dense] .mat-subheader{height:40px;line-height:8px}.mat-list[dense] .mat-subheader:first-child,.mat-nav-list[dense] .mat-subheader:first-child,.mat-selection-list[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list[dense] .mat-list-item,.mat-list[dense] .mat-list-option,.mat-nav-list[dense] .mat-list-item,.mat-nav-list[dense] .mat-list-option,.mat-selection-list[dense] .mat-list-item,.mat-selection-list[dense] .mat-list-option{display:block;height:40px}.mat-list[dense] .mat-list-item .mat-list-item-content,.mat-list[dense] .mat-list-option .mat-list-item-content,.mat-nav-list[dense] .mat-list-item .mat-list-item-content,.mat-nav-list[dense] .mat-list-option .mat-list-item-content,.mat-selection-list[dense] .mat-list-item .mat-list-item-content,.mat-selection-list[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list[dense] .mat-list-item .mat-list-item-ripple,.mat-list[dense] .mat-list-option .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-item .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-option .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-item .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list[dense] .mat-list-item.mat-list-item-avatar,.mat-list[dense] .mat-list-option.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-item.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-option.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-item.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-option.mat-list-item-avatar{height:48px}.mat-list[dense] .mat-list-item.mat-2-line,.mat-list[dense] .mat-list-option.mat-2-line,.mat-nav-list[dense] .mat-list-item.mat-2-line,.mat-nav-list[dense] .mat-list-option.mat-2-line,.mat-selection-list[dense] .mat-list-item.mat-2-line,.mat-selection-list[dense] .mat-list-option.mat-2-line{height:60px}.mat-list[dense] .mat-list-item.mat-3-line,.mat-list[dense] .mat-list-option.mat-3-line,.mat-nav-list[dense] .mat-list-item.mat-3-line,.mat-nav-list[dense] .mat-list-option.mat-3-line,.mat-selection-list[dense] .mat-list-item.mat-3-line,.mat-selection-list[dense] .mat-list-option.mat-3-line{height:76px}.mat-list[dense] .mat-list-item.mat-multi-line,.mat-list[dense] .mat-list-option.mat-multi-line,.mat-nav-list[dense] .mat-list-item.mat-multi-line,.mat-nav-list[dense] .mat-list-option.mat-multi-line,.mat-selection-list[dense] .mat-list-item.mat-multi-line,.mat-selection-list[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list[dense] .mat-list-item .mat-list-text,.mat-list[dense] .mat-list-option .mat-list-text,.mat-nav-list[dense] .mat-list-item .mat-list-text,.mat-nav-list[dense] .mat-list-option .mat-list-text,.mat-selection-list[dense] .mat-list-item .mat-list-text,.mat-selection-list[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list[dense] .mat-list-item .mat-list-text>*,.mat-list[dense] .mat-list-option .mat-list-text>*,.mat-nav-list[dense] .mat-list-item .mat-list-text>*,.mat-nav-list[dense] .mat-list-option .mat-list-text>*,.mat-selection-list[dense] .mat-list-item .mat-list-text>*,.mat-selection-list[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list[dense] .mat-list-item .mat-list-text:empty,.mat-list[dense] .mat-list-option .mat-list-text:empty,.mat-nav-list[dense] .mat-list-item .mat-list-text:empty,.mat-nav-list[dense] .mat-list-option .mat-list-text:empty,.mat-selection-list[dense] .mat-list-item .mat-list-text:empty,.mat-selection-list[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list[dense] .mat-list-item .mat-list-avatar,.mat-list[dense] .mat-list-option .mat-list-avatar,.mat-nav-list[dense] .mat-list-item .mat-list-avatar,.mat-nav-list[dense] .mat-list-option .mat-list-avatar,.mat-selection-list[dense] .mat-list-item .mat-list-avatar,.mat-selection-list[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list[dense] .mat-list-item .mat-list-icon,.mat-list[dense] .mat-list-option .mat-list-icon,.mat-nav-list[dense] .mat-list-item .mat-list-icon,.mat-nav-list[dense] .mat-list-option .mat-list-icon,.mat-selection-list[dense] .mat-list-item .mat-list-icon,.mat-selection-list[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list[dense] .mat-list-item .mat-divider,.mat-list[dense] .mat-list-option .mat-divider,.mat-nav-list[dense] .mat-list-item .mat-divider,.mat-nav-list[dense] .mat-list-option .mat-divider,.mat-selection-list[dense] .mat-list-item .mat-divider,.mat-selection-list[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item-content{cursor:pointer}.mat-nav-list .mat-list-item-content.mat-list-item-focus,.mat-nav-list .mat-list-item-content:hover{outline:0}.mat-list-option:not([disabled]){cursor:pointer}"],inputs:["disableRipple"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[]},e}(Ee),Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-list",exportAs:"matList",template:"<ng-content></ng-content>",host:{class:"mat-list"},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{margin:0}.mat-list,.mat-nav-list,.mat-selection-list{padding-top:8px;display:block}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{height:48px;line-height:16px}.mat-list .mat-subheader:first-child,.mat-nav-list .mat-subheader:first-child,.mat-selection-list .mat-subheader:first-child{margin-top:-8px}.mat-list .mat-list-item,.mat-list .mat-list-option,.mat-nav-list .mat-list-item,.mat-nav-list .mat-list-option,.mat-selection-list .mat-list-item,.mat-selection-list .mat-list-option{display:block;height:48px}.mat-list .mat-list-item .mat-list-item-content,.mat-list .mat-list-option .mat-list-item-content,.mat-nav-list .mat-list-item .mat-list-item-content,.mat-nav-list .mat-list-option .mat-list-item-content,.mat-selection-list .mat-list-item .mat-list-item-content,.mat-selection-list .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list .mat-list-item .mat-list-item-content-reverse,.mat-list .mat-list-option .mat-list-item-content-reverse,.mat-nav-list .mat-list-item .mat-list-item-content-reverse,.mat-nav-list .mat-list-option .mat-list-item-content-reverse,.mat-selection-list .mat-list-item .mat-list-item-content-reverse,.mat-selection-list .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list .mat-list-item .mat-list-item-ripple,.mat-list .mat-list-option .mat-list-item-ripple,.mat-nav-list .mat-list-item .mat-list-item-ripple,.mat-nav-list .mat-list-option .mat-list-item-ripple,.mat-selection-list .mat-list-item .mat-list-item-ripple,.mat-selection-list .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list .mat-list-item.mat-list-item-avatar,.mat-list .mat-list-option.mat-list-item-avatar,.mat-nav-list .mat-list-item.mat-list-item-avatar,.mat-nav-list .mat-list-option.mat-list-item-avatar,.mat-selection-list .mat-list-item.mat-list-item-avatar,.mat-selection-list .mat-list-option.mat-list-item-avatar{height:56px}.mat-list .mat-list-item.mat-2-line,.mat-list .mat-list-option.mat-2-line,.mat-nav-list .mat-list-item.mat-2-line,.mat-nav-list .mat-list-option.mat-2-line,.mat-selection-list .mat-list-item.mat-2-line,.mat-selection-list .mat-list-option.mat-2-line{height:72px}.mat-list .mat-list-item.mat-3-line,.mat-list .mat-list-option.mat-3-line,.mat-nav-list .mat-list-item.mat-3-line,.mat-nav-list .mat-list-option.mat-3-line,.mat-selection-list .mat-list-item.mat-3-line,.mat-selection-list .mat-list-option.mat-3-line{height:88px}.mat-list .mat-list-item.mat-multi-line,.mat-list .mat-list-option.mat-multi-line,.mat-nav-list .mat-list-item.mat-multi-line,.mat-nav-list .mat-list-option.mat-multi-line,.mat-selection-list .mat-list-item.mat-multi-line,.mat-selection-list .mat-list-option.mat-multi-line{height:auto}.mat-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list .mat-list-item .mat-list-text,.mat-list .mat-list-option .mat-list-text,.mat-nav-list .mat-list-item .mat-list-text,.mat-nav-list .mat-list-option .mat-list-text,.mat-selection-list .mat-list-item .mat-list-text,.mat-selection-list .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list .mat-list-item .mat-list-text>*,.mat-list .mat-list-option .mat-list-text>*,.mat-nav-list .mat-list-item .mat-list-text>*,.mat-nav-list .mat-list-option .mat-list-text>*,.mat-selection-list .mat-list-item .mat-list-text>*,.mat-selection-list .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list .mat-list-item .mat-list-text:empty,.mat-list .mat-list-option .mat-list-text:empty,.mat-nav-list .mat-list-item .mat-list-text:empty,.mat-nav-list .mat-list-option .mat-list-text:empty,.mat-selection-list .mat-list-item .mat-list-text:empty,.mat-selection-list .mat-list-option .mat-list-text:empty{display:none}.mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list .mat-list-item .mat-list-avatar,.mat-list .mat-list-option .mat-list-avatar,.mat-nav-list .mat-list-item .mat-list-avatar,.mat-nav-list .mat-list-option .mat-list-avatar,.mat-selection-list .mat-list-item .mat-list-avatar,.mat-selection-list .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list .mat-list-item .mat-list-icon,.mat-list .mat-list-option .mat-list-icon,.mat-nav-list .mat-list-item .mat-list-icon,.mat-nav-list .mat-list-option .mat-list-icon,.mat-selection-list .mat-list-item .mat-list-icon,.mat-selection-list .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list .mat-list-item .mat-divider,.mat-list .mat-list-option .mat-divider,.mat-nav-list .mat-list-item .mat-divider,.mat-nav-list .mat-list-option .mat-divider,.mat-selection-list .mat-list-item .mat-divider,.mat-selection-list .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list .mat-list-item .mat-divider,[dir=rtl] .mat-list .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list .mat-list-item .mat-divider.mat-divider-inset,.mat-list .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list[dense],.mat-nav-list[dense],.mat-selection-list[dense]{padding-top:4px;display:block}.mat-list[dense] .mat-subheader,.mat-nav-list[dense] .mat-subheader,.mat-selection-list[dense] .mat-subheader{height:40px;line-height:8px}.mat-list[dense] .mat-subheader:first-child,.mat-nav-list[dense] .mat-subheader:first-child,.mat-selection-list[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list[dense] .mat-list-item,.mat-list[dense] .mat-list-option,.mat-nav-list[dense] .mat-list-item,.mat-nav-list[dense] .mat-list-option,.mat-selection-list[dense] .mat-list-item,.mat-selection-list[dense] .mat-list-option{display:block;height:40px}.mat-list[dense] .mat-list-item .mat-list-item-content,.mat-list[dense] .mat-list-option .mat-list-item-content,.mat-nav-list[dense] .mat-list-item .mat-list-item-content,.mat-nav-list[dense] .mat-list-option .mat-list-item-content,.mat-selection-list[dense] .mat-list-item .mat-list-item-content,.mat-selection-list[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list[dense] .mat-list-item .mat-list-item-ripple,.mat-list[dense] .mat-list-option .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-item .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-option .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-item .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list[dense] .mat-list-item.mat-list-item-avatar,.mat-list[dense] .mat-list-option.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-item.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-option.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-item.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-option.mat-list-item-avatar{height:48px}.mat-list[dense] .mat-list-item.mat-2-line,.mat-list[dense] .mat-list-option.mat-2-line,.mat-nav-list[dense] .mat-list-item.mat-2-line,.mat-nav-list[dense] .mat-list-option.mat-2-line,.mat-selection-list[dense] .mat-list-item.mat-2-line,.mat-selection-list[dense] .mat-list-option.mat-2-line{height:60px}.mat-list[dense] .mat-list-item.mat-3-line,.mat-list[dense] .mat-list-option.mat-3-line,.mat-nav-list[dense] .mat-list-item.mat-3-line,.mat-nav-list[dense] .mat-list-option.mat-3-line,.mat-selection-list[dense] .mat-list-item.mat-3-line,.mat-selection-list[dense] .mat-list-option.mat-3-line{height:76px}.mat-list[dense] .mat-list-item.mat-multi-line,.mat-list[dense] .mat-list-option.mat-multi-line,.mat-nav-list[dense] .mat-list-item.mat-multi-line,.mat-nav-list[dense] .mat-list-option.mat-multi-line,.mat-selection-list[dense] .mat-list-item.mat-multi-line,.mat-selection-list[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list[dense] .mat-list-item .mat-list-text,.mat-list[dense] .mat-list-option .mat-list-text,.mat-nav-list[dense] .mat-list-item .mat-list-text,.mat-nav-list[dense] .mat-list-option .mat-list-text,.mat-selection-list[dense] .mat-list-item .mat-list-text,.mat-selection-list[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list[dense] .mat-list-item .mat-list-text>*,.mat-list[dense] .mat-list-option .mat-list-text>*,.mat-nav-list[dense] .mat-list-item .mat-list-text>*,.mat-nav-list[dense] .mat-list-option .mat-list-text>*,.mat-selection-list[dense] .mat-list-item .mat-list-text>*,.mat-selection-list[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list[dense] .mat-list-item .mat-list-text:empty,.mat-list[dense] .mat-list-option .mat-list-text:empty,.mat-nav-list[dense] .mat-list-item .mat-list-text:empty,.mat-nav-list[dense] .mat-list-option .mat-list-text:empty,.mat-selection-list[dense] .mat-list-item .mat-list-text:empty,.mat-selection-list[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list[dense] .mat-list-item .mat-list-avatar,.mat-list[dense] .mat-list-option .mat-list-avatar,.mat-nav-list[dense] .mat-list-item .mat-list-avatar,.mat-nav-list[dense] .mat-list-option .mat-list-avatar,.mat-selection-list[dense] .mat-list-item .mat-list-avatar,.mat-selection-list[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list[dense] .mat-list-item .mat-list-icon,.mat-list[dense] .mat-list-option .mat-list-icon,.mat-nav-list[dense] .mat-list-item .mat-list-icon,.mat-nav-list[dense] .mat-list-option .mat-list-icon,.mat-selection-list[dense] .mat-list-item .mat-list-icon,.mat-selection-list[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list[dense] .mat-list-item .mat-divider,.mat-list[dense] .mat-list-option .mat-divider,.mat-nav-list[dense] .mat-list-item .mat-divider,.mat-nav-list[dense] .mat-list-option .mat-divider,.mat-selection-list[dense] .mat-list-item .mat-divider,.mat-selection-list[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item-content{cursor:pointer}.mat-nav-list .mat-list-item-content.mat-list-item-focus,.mat-nav-list .mat-list-item-content:hover{outline:0}.mat-list-option:not([disabled]){cursor:pointer}"],inputs:["disableRipple"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[]},e}(Ee),Me=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-list-avatar], [matListAvatar]",host:{class:"mat-list-avatar"}}]}],t.ctorParameters=function(){return[]},t}(),Re=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-list-icon], [matListIcon]",host:{class:"mat-list-icon"}}]}],t.ctorParameters=function(){return[]},t}(),Ie=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-subheader], [matSubheader]",host:{class:"mat-subheader"}}]}],t.ctorParameters=function(){return[]},t}(),De=function(t){function e(e,i){var n=t.call(this)||this;return n._element=e,n._navList=i,n._isNavList=!1,n._isNavList=!!i,n}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"_hasAvatar",{set:function(t){null!=t?this._element.nativeElement.classList.add("mat-list-item-avatar"):this._element.nativeElement.classList.remove("mat-list-item-avatar")},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this._lineSetter=new o.q(this._lines,this._element)},e.prototype._isRippleDisabled=function(){return!this._isNavList||this.disableRipple||this._navList.disableRipple},e.prototype._handleFocus=function(){this._element.nativeElement.classList.add("mat-list-item-focus")},e.prototype._handleBlur=function(){this._element.nativeElement.classList.remove("mat-list-item-focus")},e.prototype._getHostElement=function(){return this._element.nativeElement},e.decorators=[{type:n.j,args:[{selector:"mat-list-item, a[mat-list-item]",exportAs:"matListItem",host:{class:"mat-list-item","(focus)":"_handleFocus()","(blur)":"_handleBlur()"},inputs:["disableRipple"],template:'<div class="mat-list-item-content"><div class="mat-list-item-ripple" mat-ripple [matRippleTrigger]="_getHostElement()" [matRippleDisabled]="_isRippleDisabled()"></div><ng-content select="[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"></ng-content><div class="mat-list-text"><ng-content select="[mat-line], [matLine]"></ng-content></div><ng-content></ng-content></div>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:Ce,decorators:[{type:n.G}]}]},e.propDecorators={_lines:[{type:n.m,args:[o.o]}],_hasAvatar:[{type:n.l,args:[Me]}]},e}(Se),Le=function(){return function(){}}(),ke=Object(o.G)(Object(o.D)(Object(o.E)(Le))),Fe=function(){return function(){}}(),Ne=Object(o.D)(Fe),Be={provide:E.g,useExisting:Object(n._4)(function(){return je}),multi:!0},Ve=function(){return function(t,e){this.source=t,this.selected=e}}(),ze=function(){return function(t,e){this.source=t,this.option=e}}(),Ue=function(t){function e(e,i,r){var o=t.call(this)||this;return o._element=e,o._changeDetector=i,o.selectionList=r,o._selected=!1,o._disabled=!1,o._hasFocus=!1,o.checkboxPosition="after",o.selectionChange=new n.r,o}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||this.selectionList&&this.selectionList.disabled},set:function(t){var e=Object(a.c)(t);e!==this._disabled&&(this._disabled=e,this._changeDetector.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.selectionList.selectedOptions.isSelected(this)},set:function(t){var e=Object(a.c)(t);e!==this._selected&&(this._setSelected(e),this.selectionList._reportValueChange())},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this._selected&&Promise.resolve().then(function(){return t.selected=!0})},e.prototype.ngAfterContentInit=function(){this._lineSetter=new o.q(this._lines,this._element)},e.prototype.ngOnDestroy=function(){var t=this;this.selected&&Promise.resolve().then(function(){return t.selected=!1}),this.selectionList._removeOptionFromList(this)},e.prototype.toggle=function(){this.selected=!this.selected},e.prototype.focus=function(){this._element.nativeElement.focus()},e.prototype.getLabel=function(){return this._text?this._text.nativeElement.textContent:""},e.prototype._isRippleDisabled=function(){return this.disabled||this.disableRipple||this.selectionList.disableRipple},e.prototype._handleClick=function(){this.disabled||(this.toggle(),this.selectionList._emitChangeEvent(this),this._emitDeprecatedChangeEvent())},e.prototype._handleFocus=function(){this._hasFocus=!0,this.selectionList._setFocusedOption(this)},e.prototype._handleBlur=function(){this._hasFocus=!1,this.selectionList._onTouched()},e.prototype._getHostElement=function(){return this._element.nativeElement},e.prototype._setSelected=function(t){t!==this._selected&&(this._selected=t,t?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this._changeDetector.markForCheck())},e.prototype._emitDeprecatedChangeEvent=function(){this.selectionChange.emit(new Ve(this,this.selected))},e.decorators=[{type:n.j,args:[{selector:"mat-list-option",exportAs:"matListOption",inputs:["disableRipple"],host:{role:"option",class:"mat-list-item mat-list-option","(focus)":"_handleFocus()","(blur)":"_handleBlur()","(click)":"_handleClick()",tabindex:"-1","[class.mat-list-item-disabled]":"disabled","[class.mat-list-item-focus]":"_hasFocus","[attr.aria-selected]":"selected.toString()","[attr.aria-disabled]":"disabled.toString()"},template:'<div class="mat-list-item-content" [class.mat-list-item-content-reverse]="checkboxPosition == \'after\'" [class.mat-list-item-disabled]="disabled"><div mat-ripple class="mat-list-item-ripple" [matRippleTrigger]="_getHostElement()" [matRippleDisabled]="_isRippleDisabled()"></div><mat-pseudo-checkbox [state]="selected ? \'checked\' : \'unchecked\'" [disabled]="disabled"></mat-pseudo-checkbox><div class="mat-list-text" #text><ng-content></ng-content></div></div>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:n.h},{type:je,decorators:[{type:n.G},{type:n.u,args:[Object(n._4)(function(){return je})]}]}]},e.propDecorators={_lines:[{type:n.m,args:[o.o]}],_text:[{type:n.X,args:["text"]}],checkboxPosition:[{type:n.y}],value:[{type:n.y}],disabled:[{type:n.y}],selected:[{type:n.y}],selectionChange:[{type:n.H}]},e}(Ne),je=function(t){function e(e,i){var r=t.call(this)||this;return r._element=e,r.selectionChange=new n.r,r.selectedOptions=new X.b(!0),r._onChange=function(t){},r._onTouched=function(){},r.tabIndex=parseInt(i)||0,r}return Object(r.b)(e,t),e.prototype.ngAfterContentInit=function(){this._keyManager=new s.g(this.options).withWrap().withTypeAhead(),this._tempValues&&(this._setOptionsFromValues(this._tempValues),this._tempValues=null)},e.prototype.focus=function(){this._element.nativeElement.focus()},e.prototype.selectAll=function(){this.options.forEach(function(t){return t._setSelected(!0)}),this._reportValueChange()},e.prototype.deselectAll=function(){this.options.forEach(function(t){return t._setSelected(!1)}),this._reportValueChange()},e.prototype._setFocusedOption=function(t){this._keyManager.updateActiveItemIndex(this._getOptionIndex(t))},e.prototype._removeOptionFromList=function(t){if(t._hasFocus){var e=this._getOptionIndex(t);e>0?this._keyManager.setPreviousItemActive():0===e&&this.options.length>1&&this._keyManager.setNextItemActive()}},e.prototype._keydown=function(t){switch(t.keyCode){case h.n:case h.f:this._toggleSelectOnFocusedOption(),t.preventDefault();break;case h.h:case h.e:t.keyCode===h.h?this._keyManager.setFirstItemActive():this._keyManager.setLastItemActive(),t.preventDefault();break;default:this._keyManager.onKeydown(t)}},e.prototype._reportValueChange=function(){this.options&&this._onChange(this._getSelectedOptionValues())},e.prototype._emitChangeEvent=function(t){this.selectionChange.emit(new ze(this,t))},e.prototype.writeValue=function(t){this.options?this._setOptionsFromValues(t||[]):this._tempValues=t},e.prototype.setDisabledState=function(t){this.options&&this.options.forEach(function(e){return e.disabled=t})},e.prototype.registerOnChange=function(t){this._onChange=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype._getOptionByValue=function(t){return this.options.find(function(e){return e.value===t})},e.prototype._setOptionsFromValues=function(t){var e=this;this.options.forEach(function(t){return t._setSelected(!1)}),t.map(function(t){return e._getOptionByValue(t)}).filter(Boolean).forEach(function(t){return t._setSelected(!0)})},e.prototype._getSelectedOptionValues=function(){return this.options.filter(function(t){return t.selected}).map(function(t){return t.value})},e.prototype._toggleSelectOnFocusedOption=function(){var t=this._keyManager.activeItemIndex;if(null!=t&&this._isValidIndex(t)){var e=this.options.toArray()[t];e&&(e.toggle(),this._emitChangeEvent(e),e._emitDeprecatedChangeEvent())}},e.prototype._isValidIndex=function(t){return t>=0&&t<this.options.length},e.prototype._getOptionIndex=function(t){return this.options.toArray().indexOf(t)},e.decorators=[{type:n.j,args:[{selector:"mat-selection-list",exportAs:"matSelectionList",inputs:["disabled","disableRipple","tabIndex"],host:{role:"listbox","[tabIndex]":"tabIndex",class:"mat-selection-list","(focus)":"focus()","(blur)":"_onTouched()","(keydown)":"_keydown($event)","[attr.aria-disabled]":"disabled.toString()"},template:"<ng-content></ng-content>",styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{margin:0}.mat-list,.mat-nav-list,.mat-selection-list{padding-top:8px;display:block}.mat-list .mat-subheader,.mat-nav-list .mat-subheader,.mat-selection-list .mat-subheader{height:48px;line-height:16px}.mat-list .mat-subheader:first-child,.mat-nav-list .mat-subheader:first-child,.mat-selection-list .mat-subheader:first-child{margin-top:-8px}.mat-list .mat-list-item,.mat-list .mat-list-option,.mat-nav-list .mat-list-item,.mat-nav-list .mat-list-option,.mat-selection-list .mat-list-item,.mat-selection-list .mat-list-option{display:block;height:48px}.mat-list .mat-list-item .mat-list-item-content,.mat-list .mat-list-option .mat-list-item-content,.mat-nav-list .mat-list-item .mat-list-item-content,.mat-nav-list .mat-list-option .mat-list-item-content,.mat-selection-list .mat-list-item .mat-list-item-content,.mat-selection-list .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list .mat-list-item .mat-list-item-content-reverse,.mat-list .mat-list-option .mat-list-item-content-reverse,.mat-nav-list .mat-list-item .mat-list-item-content-reverse,.mat-nav-list .mat-list-option .mat-list-item-content-reverse,.mat-selection-list .mat-list-item .mat-list-item-content-reverse,.mat-selection-list .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list .mat-list-item .mat-list-item-ripple,.mat-list .mat-list-option .mat-list-item-ripple,.mat-nav-list .mat-list-item .mat-list-item-ripple,.mat-nav-list .mat-list-option .mat-list-item-ripple,.mat-selection-list .mat-list-item .mat-list-item-ripple,.mat-selection-list .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list .mat-list-item.mat-list-item-avatar,.mat-list .mat-list-option.mat-list-item-avatar,.mat-nav-list .mat-list-item.mat-list-item-avatar,.mat-nav-list .mat-list-option.mat-list-item-avatar,.mat-selection-list .mat-list-item.mat-list-item-avatar,.mat-selection-list .mat-list-option.mat-list-item-avatar{height:56px}.mat-list .mat-list-item.mat-2-line,.mat-list .mat-list-option.mat-2-line,.mat-nav-list .mat-list-item.mat-2-line,.mat-nav-list .mat-list-option.mat-2-line,.mat-selection-list .mat-list-item.mat-2-line,.mat-selection-list .mat-list-option.mat-2-line{height:72px}.mat-list .mat-list-item.mat-3-line,.mat-list .mat-list-option.mat-3-line,.mat-nav-list .mat-list-item.mat-3-line,.mat-nav-list .mat-list-option.mat-3-line,.mat-selection-list .mat-list-item.mat-3-line,.mat-selection-list .mat-list-option.mat-3-line{height:88px}.mat-list .mat-list-item.mat-multi-line,.mat-list .mat-list-option.mat-multi-line,.mat-nav-list .mat-list-item.mat-multi-line,.mat-nav-list .mat-list-option.mat-multi-line,.mat-selection-list .mat-list-item.mat-multi-line,.mat-selection-list .mat-list-option.mat-multi-line{height:auto}.mat-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list .mat-list-item .mat-list-text,.mat-list .mat-list-option .mat-list-text,.mat-nav-list .mat-list-item .mat-list-text,.mat-nav-list .mat-list-option .mat-list-text,.mat-selection-list .mat-list-item .mat-list-text,.mat-selection-list .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list .mat-list-item .mat-list-text>*,.mat-list .mat-list-option .mat-list-text>*,.mat-nav-list .mat-list-item .mat-list-text>*,.mat-nav-list .mat-list-option .mat-list-text>*,.mat-selection-list .mat-list-item .mat-list-text>*,.mat-selection-list .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list .mat-list-item .mat-list-text:empty,.mat-list .mat-list-option .mat-list-text:empty,.mat-nav-list .mat-list-item .mat-list-text:empty,.mat-nav-list .mat-list-option .mat-list-text:empty,.mat-selection-list .mat-list-item .mat-list-text:empty,.mat-selection-list .mat-list-option .mat-list-text:empty{display:none}.mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list .mat-list-item .mat-list-avatar,.mat-list .mat-list-option .mat-list-avatar,.mat-nav-list .mat-list-item .mat-list-avatar,.mat-nav-list .mat-list-option .mat-list-avatar,.mat-selection-list .mat-list-item .mat-list-avatar,.mat-selection-list .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list .mat-list-item .mat-list-icon,.mat-list .mat-list-option .mat-list-icon,.mat-nav-list .mat-list-item .mat-list-icon,.mat-nav-list .mat-list-option .mat-list-icon,.mat-selection-list .mat-list-item .mat-list-icon,.mat-selection-list .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list .mat-list-item .mat-divider,.mat-list .mat-list-option .mat-divider,.mat-nav-list .mat-list-item .mat-divider,.mat-nav-list .mat-list-option .mat-divider,.mat-selection-list .mat-list-item .mat-divider,.mat-selection-list .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list .mat-list-item .mat-divider,[dir=rtl] .mat-list .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list .mat-list-item .mat-divider.mat-divider-inset,.mat-list .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list[dense],.mat-nav-list[dense],.mat-selection-list[dense]{padding-top:4px;display:block}.mat-list[dense] .mat-subheader,.mat-nav-list[dense] .mat-subheader,.mat-selection-list[dense] .mat-subheader{height:40px;line-height:8px}.mat-list[dense] .mat-subheader:first-child,.mat-nav-list[dense] .mat-subheader:first-child,.mat-selection-list[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list[dense] .mat-list-item,.mat-list[dense] .mat-list-option,.mat-nav-list[dense] .mat-list-item,.mat-nav-list[dense] .mat-list-option,.mat-selection-list[dense] .mat-list-item,.mat-selection-list[dense] .mat-list-option{display:block;height:40px}.mat-list[dense] .mat-list-item .mat-list-item-content,.mat-list[dense] .mat-list-option .mat-list-item-content,.mat-nav-list[dense] .mat-list-item .mat-list-item-content,.mat-nav-list[dense] .mat-list-option .mat-list-item-content,.mat-selection-list[dense] .mat-list-item .mat-list-item-content,.mat-selection-list[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse,.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list[dense] .mat-list-item .mat-list-item-ripple,.mat-list[dense] .mat-list-option .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-item .mat-list-item-ripple,.mat-nav-list[dense] .mat-list-option .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-item .mat-list-item-ripple,.mat-selection-list[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list[dense] .mat-list-item.mat-list-item-avatar,.mat-list[dense] .mat-list-option.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-item.mat-list-item-avatar,.mat-nav-list[dense] .mat-list-option.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-item.mat-list-item-avatar,.mat-selection-list[dense] .mat-list-option.mat-list-item-avatar{height:48px}.mat-list[dense] .mat-list-item.mat-2-line,.mat-list[dense] .mat-list-option.mat-2-line,.mat-nav-list[dense] .mat-list-item.mat-2-line,.mat-nav-list[dense] .mat-list-option.mat-2-line,.mat-selection-list[dense] .mat-list-item.mat-2-line,.mat-selection-list[dense] .mat-list-option.mat-2-line{height:60px}.mat-list[dense] .mat-list-item.mat-3-line,.mat-list[dense] .mat-list-option.mat-3-line,.mat-nav-list[dense] .mat-list-item.mat-3-line,.mat-nav-list[dense] .mat-list-option.mat-3-line,.mat-selection-list[dense] .mat-list-item.mat-3-line,.mat-selection-list[dense] .mat-list-option.mat-3-line{height:76px}.mat-list[dense] .mat-list-item.mat-multi-line,.mat-list[dense] .mat-list-option.mat-multi-line,.mat-nav-list[dense] .mat-list-item.mat-multi-line,.mat-nav-list[dense] .mat-list-option.mat-multi-line,.mat-selection-list[dense] .mat-list-item.mat-multi-line,.mat-selection-list[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-nav-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-selection-list[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list[dense] .mat-list-item .mat-list-text,.mat-list[dense] .mat-list-option .mat-list-text,.mat-nav-list[dense] .mat-list-item .mat-list-text,.mat-nav-list[dense] .mat-list-option .mat-list-text,.mat-selection-list[dense] .mat-list-item .mat-list-text,.mat-selection-list[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list[dense] .mat-list-item .mat-list-text>*,.mat-list[dense] .mat-list-option .mat-list-text>*,.mat-nav-list[dense] .mat-list-item .mat-list-text>*,.mat-nav-list[dense] .mat-list-option .mat-list-text>*,.mat-selection-list[dense] .mat-list-item .mat-list-text>*,.mat-selection-list[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list[dense] .mat-list-item .mat-list-text:empty,.mat-list[dense] .mat-list-option .mat-list-text:empty,.mat-nav-list[dense] .mat-list-item .mat-list-text:empty,.mat-nav-list[dense] .mat-list-option .mat-list-text:empty,.mat-selection-list[dense] .mat-list-item .mat-list-text:empty,.mat-selection-list[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content .mat-list-text:not(:nth-child(2)){padding-right:16px;padding-left:0}.mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),.mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-left:0;padding-right:16px}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)),[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-item-content-reverse .mat-list-text:not(:nth-child(2)){padding-right:0;padding-left:16px}.mat-list[dense] .mat-list-item .mat-list-avatar,.mat-list[dense] .mat-list-option .mat-list-avatar,.mat-nav-list[dense] .mat-list-item .mat-list-avatar,.mat-nav-list[dense] .mat-list-option .mat-list-avatar,.mat-selection-list[dense] .mat-list-item .mat-list-avatar,.mat-selection-list[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%}.mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list[dense] .mat-list-item .mat-list-icon,.mat-list[dense] .mat-list-option .mat-list-icon,.mat-nav-list[dense] .mat-list-item .mat-list-icon,.mat-nav-list[dense] .mat-list-option .mat-list-icon,.mat-selection-list[dense] .mat-list-item .mat-list-icon,.mat-selection-list[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list[dense] .mat-list-item .mat-divider,.mat-list[dense] .mat-list-option .mat-divider,.mat-nav-list[dense] .mat-list-item .mat-divider,.mat-nav-list[dense] .mat-list-option .mat-divider,.mat-selection-list[dense] .mat-list-item .mat-divider,.mat-selection-list[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-nav-list[dense] .mat-list-option .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-selection-list[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-nav-list[dense] .mat-list-option .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-selection-list[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item-content{cursor:pointer}.mat-nav-list .mat-list-item-content.mat-list-item-focus,.mat-nav-list .mat-list-item-content:hover{outline:0}.mat-list-option:not([disabled]){cursor:pointer}"],encapsulation:n._0.None,providers:[Be],preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:void 0,decorators:[{type:n.f,args:["tabindex"]}]}]},e.propDecorators={options:[{type:n.m,args:[Ue]}],selectionChange:[{type:n.H}]},e}(ke),Ge=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.p,o.y,o.n,o.w,l.b],exports:[Oe,Ce,De,Me,o.p,o.n,Re,Ie,o.w,je,Ue,Gt],declarations:[Oe,Ce,De,Me,Re,Ie,je,Ue]}]}],t.ctorParameters=function(){return[]},t}(),We=i("R1vt"),He=i("i0AX"),Xe=function(){return function(t){this._elementRef=t}}(),Ye=Object(o.C)(Xe,"primary"),qe=0,Ke=function(t){function e(e){var i=t.call(this,e)||this;return i._elementRef=e,i._value=0,i._bufferValue=0,i.mode="determinate",i.progressbarId="mat-progress-bar-"+qe++,i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=Qe(t||0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferValue",{get:function(){return this._bufferValue},set:function(t){this._bufferValue=Qe(t||0)},enumerable:!0,configurable:!0}),e.prototype._primaryTransform=function(){return{transform:"scaleX("+this.value/100+")"}},e.prototype._bufferTransform=function(){if("buffer"===this.mode)return{transform:"scaleX("+this.bufferValue/100+")"}},e.decorators=[{type:n.j,args:[{selector:"mat-progress-bar",exportAs:"matProgressBar",host:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","[attr.aria-valuenow]":"value","[attr.mode]":"mode",class:"mat-progress-bar"},inputs:["color"],template:'<svg width="100%" height="5" focusable="false" class="mat-progress-bar-background mat-progress-bar-element"><defs><pattern [id]="progressbarId" x="5" y="0" width="10" height="5" patternUnits="userSpaceOnUse"><circle cx="2.5" cy="2.5" r="2.5"/></pattern></defs><rect [attr.fill]="\'url(#\' + progressbarId + \')\'" width="100%" height="100%"/></svg><div class="mat-progress-bar-buffer mat-progress-bar-element" [ngStyle]="_bufferTransform()"></div><div class="mat-progress-bar-primary mat-progress-bar-fill mat-progress-bar-element" [ngStyle]="_primaryTransform()"></div><div class="mat-progress-bar-secondary mat-progress-bar-fill mat-progress-bar-element"></div>',styles:[".mat-progress-bar{display:block;height:5px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:'';display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2s infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.70173,.49582);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.30244,.38135,.55,.95635);transform:translateX(83.67142%)}100%{transform:translateX(200.61106%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.33473,.12482,.78584,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.66148)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:translateX(37.65191%)}48.35%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:translateX(84.38617%)}100%{transform:translateX(160.27778%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:scaleX(.4571)}44.15%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-10px)}}"],changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:n.o}]},e.propDecorators={value:[{type:n.y}],bufferValue:[{type:n.y}],mode:[{type:n.y}]},e}(Ye);function Qe(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=100),Math.max(e,Math.min(i,t))}var Ze=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[l.b,o.n],exports:[Ke,o.n],declarations:[Ke]}]}],t.ctorParameters=function(){return[]},t}(),Je=i("V8+5"),$e=100,ti=function(){return function(t){this._elementRef=t}}(),ei=Object(o.C)(ti,"primary"),ii=function(t){function e(e,i,n){var r=t.call(this,e)||this;r._elementRef=e,r._document=n,r._value=0,r._fallbackAnimation=!1,r._elementSize=$e,r._diameter=$e,r.mode="determinate",r._fallbackAnimation=i.EDGE||i.TRIDENT;var o="mat-progress-spinner-indeterminate"+(r._fallbackAnimation?"-fallback":"")+"-animation";return e.nativeElement.classList.add(o),r}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"diameter",{get:function(){return this._diameter},set:function(t){this._diameter=Object(a.d)(t),this._fallbackAnimation||e.diameters.has(this._diameter)||this._attachStyleNode(),this._updateElementSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this._strokeWidth||this.diameter/10},set:function(t){this._strokeWidth=Object(a.d)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return"determinate"===this.mode?this._value:0},set:function(t){this._value=Math.max(0,Math.min(100,Object(a.d)(t)))},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(t.strokeWidth||t.diameter)&&this._updateElementSize()},Object.defineProperty(e.prototype,"_circleRadius",{get:function(){return(this.diameter-10)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_viewBox",{get:function(){var t=2*this._circleRadius+this.strokeWidth;return"0 0 "+t+" "+t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_strokeCircumference",{get:function(){return 2*Math.PI*this._circleRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_strokeDashOffset",{get:function(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_circleStrokeWidth",{get:function(){return this.strokeWidth/this._elementSize*100},enumerable:!0,configurable:!0}),e.prototype._attachStyleNode=function(){var t=e.styleTag;t||(t=this._document.createElement("style"),this._document.head.appendChild(t),e.styleTag=t),t&&t.sheet&&t.sheet.insertRule(this._getAnimationText(),0),e.diameters.add(this.diameter)},e.prototype._getAnimationText=function(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.51%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.1%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.51%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.01%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.51%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.01%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.51%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*this._strokeCircumference).replace(/END_VALUE/g,""+.2*this._strokeCircumference).replace(/DIAMETER/g,""+this.diameter)},e.prototype._updateElementSize=function(){this._elementSize=this._diameter+Math.max(this.strokeWidth-10,0)},e.diameters=new Set([$e]),e.styleTag=null,e.decorators=[{type:n.j,args:[{selector:"mat-progress-spinner",exportAs:"matProgressSpinner",host:{role:"progressbar",class:"mat-progress-spinner","[style.width.px]":"_elementSize","[style.height.px]":"_elementSize","[attr.aria-valuemin]":'mode === "determinate" ? 0 : null',"[attr.aria-valuemax]":'mode === "determinate" ? 100 : null',"[attr.aria-valuenow]":"value","[attr.mode]":"mode"},inputs:["color"],template:'<svg [style.width.px]="_elementSize" [style.height.px]="_elementSize" [attr.viewBox]="_viewBox" preserveAspectRatio="xMidYMid meet" focusable="false"><circle cx="50%" cy="50%" [attr.r]="_circleRadius" [style.animation-name]="\'mat-progress-spinner-stroke-rotate-\' + diameter" [style.stroke-dashoffset.px]="_strokeDashOffset" [style.stroke-dasharray.px]="_strokeCircumference" [style.stroke-width.%]="_circleStrokeWidth"></circle></svg>',styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2s linear infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4s;animation-timing-function:cubic-bezier(.35,0,.25,1);animation-iteration-count:infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10s cubic-bezier(.87,.03,.33,1) infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.60617px;transform:rotate(0)}12.5%{stroke-dashoffset:56.54867px;transform:rotate(0)}12.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(72.5deg)}25.1%{stroke-dashoffset:268.60617px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.54867px;transform:rotate(270deg)}37.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(161.5deg)}50.01%{stroke-dashoffset:268.60617px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.54867px;transform:rotate(180deg)}62.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(251.5deg)}75.01%{stroke-dashoffset:268.60617px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.54867px;transform:rotate(90deg)}87.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}"],changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:n.o},{type:Je.a},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[l.c]}]}]},e.propDecorators={diameter:[{type:n.y}],strokeWidth:[{type:n.y}],mode:[{type:n.y}],value:[{type:n.y}]},e}(ei),ni=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.mode="indeterminate",r}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-spinner",host:{role:"progressbar",mode:"indeterminate",class:"mat-spinner mat-progress-spinner","[style.width.px]":"_elementSize","[style.height.px]":"_elementSize"},inputs:["color"],template:'<svg [style.width.px]="_elementSize" [style.height.px]="_elementSize" [attr.viewBox]="_viewBox" preserveAspectRatio="xMidYMid meet" focusable="false"><circle cx="50%" cy="50%" [attr.r]="_circleRadius" [style.animation-name]="\'mat-progress-spinner-stroke-rotate-\' + diameter" [style.stroke-dashoffset.px]="_strokeDashOffset" [style.stroke-dasharray.px]="_strokeCircumference" [style.stroke-width.%]="_circleStrokeWidth"></circle></svg>',styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2s linear infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4s;animation-timing-function:cubic-bezier(.35,0,.25,1);animation-iteration-count:infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10s cubic-bezier(.87,.03,.33,1) infinite}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.60617px;transform:rotate(0)}12.5%{stroke-dashoffset:56.54867px;transform:rotate(0)}12.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(72.5deg)}25.1%{stroke-dashoffset:268.60617px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.54867px;transform:rotate(270deg)}37.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(161.5deg)}50.01%{stroke-dashoffset:268.60617px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.54867px;transform:rotate(180deg)}62.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(251.5deg)}75.01%{stroke-dashoffset:268.60617px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.54867px;transform:rotate(90deg)}87.51%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}"],changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:n.o},{type:Je.a},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[l.c]}]}]},e}(ii),ri=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.n,Je.b],exports:[ii,ni,o.n],declarations:[ii,ni]}]}],t.ctorParameters=function(){return[]},t}(),oi=0,si={provide:E.g,useExisting:Object(n._4)(function(){return ui}),multi:!0},ai=function(){return function(t,e){this.source=t,this.value=e}}(),li=function(){return function(){}}(),ci=Object(o.E)(li),ui=function(t){function e(e){var i=t.call(this)||this;return i._changeDetector=e,i._value=null,i._name="mat-radio-group-"+oi++,i._selected=null,i._isInitialized=!1,i._labelPosition="after",i._disabled=!1,i._required=!1,i._controlValueAccessorChangeFn=function(){},i.onTouched=function(){},i.change=new n.r,i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t,this._updateRadioButtonNames()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return"after"==this.labelPosition?"start":"end"},set:function(t){this.labelPosition="start"==t?"after":"before"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(t){this._labelPosition="before"==t?"before":"after",this._markRadiosForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())},enumerable:!0,configurable:!0}),e.prototype._checkSelectedRadioButton=function(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Object(a.c)(t),this._markRadiosForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(a.c)(t),this._markRadiosForCheck()},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this._isInitialized=!0},e.prototype._touch=function(){this.onTouched&&this.onTouched()},e.prototype._updateRadioButtonNames=function(){var t=this;this._radios&&this._radios.forEach(function(e){e.name=t.name})},e.prototype._updateSelectedRadioFromValue=function(){var t=this,e=null!=this._selected&&this._selected.value==this._value;null==this._radios||e||(this._selected=null,this._radios.forEach(function(e){e.checked=t.value==e.value,e.checked&&(t._selected=e)}))},e.prototype._emitChangeEvent=function(){this._isInitialized&&this.change.emit(new ai(this._selected,this._value))},e.prototype._markRadiosForCheck=function(){this._radios&&this._radios.forEach(function(t){return t._markForCheck()})},e.prototype.writeValue=function(t){this.value=t,this._changeDetector.markForCheck()},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetector.markForCheck()},e.decorators=[{type:n.n,args:[{selector:"mat-radio-group",exportAs:"matRadioGroup",providers:[si],host:{role:"radiogroup",class:"mat-radio-group"},inputs:["disabled"]}]}],e.ctorParameters=function(){return[{type:n.h}]},e.propDecorators={change:[{type:n.H}],_radios:[{type:n.m,args:[Object(n._4)(function(){return di}),{descendants:!0}]}],name:[{type:n.y}],align:[{type:n.y}],labelPosition:[{type:n.y}],value:[{type:n.y}],selected:[{type:n.y}],disabled:[{type:n.y}],required:[{type:n.y}]},e}(ci),hi=function(){return function(t){this._elementRef=t}}(),pi=Object(o.C)(Object(o.D)(Object(o.G)(hi)),"accent"),di=function(t){function e(e,i,r,o,s){var a=t.call(this,i)||this;return a._changeDetector=r,a._focusMonitor=o,a._radioDispatcher=s,a._uniqueId="mat-radio-"+ ++oi,a.id=a._uniqueId,a.change=new n.r,a._checked=!1,a._value=null,a._removeUniqueSelectionListener=function(){},a.radioGroup=e,a._removeUniqueSelectionListener=s.listen(function(t,e){t!=a.id&&e==a.name&&(a.checked=!1)}),a}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){var e=Object(a.c)(t);this._checked!=e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!=this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value==this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,null!=this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value==t),this.checked&&(this.radioGroup.selected=this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return"after"==this.labelPosition?"start":"end"},set:function(t){this.labelPosition="start"==t?"after":"before"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"},set:function(t){this._labelPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled||null!=this.radioGroup&&this.radioGroup.disabled},set:function(t){this._disabled=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required||this.radioGroup&&this.radioGroup.required},set:function(t){this._required=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},e.prototype._markForCheck=function(){this._changeDetector.markForCheck()},e.prototype.ngOnInit=function(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)},e.prototype.ngAfterViewInit=function(){var t=this;this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(e){return t._onInputFocusChange(e)})},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement),this._removeUniqueSelectionListener()},e.prototype._emitChangeEvent=function(){this.change.emit(new ai(this,this._value))},e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._onInputClick=function(t){t.stopPropagation()},e.prototype._onInputChange=function(t){t.stopPropagation();var e=this.radioGroup&&this.value!=this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),this.radioGroup._touch(),e&&this.radioGroup._emitChangeEvent())},e.prototype._onInputFocusChange=function(t){this._focusRipple||"keyboard"!==t?t||(this.radioGroup&&this.radioGroup._touch(),this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null)):this._focusRipple=this._ripple.launch(0,0,{persistent:!0})},e.decorators=[{type:n.j,args:[{selector:"mat-radio-button",template:'<label [attr.for]="inputId" class="mat-radio-label" #label><div class="mat-radio-container"><div class="mat-radio-outer-circle"></div><div class="mat-radio-inner-circle"></div><div mat-ripple class="mat-radio-ripple" [matRippleTrigger]="label" [matRippleDisabled]="_isRippleDisabled()" [matRippleCentered]="true" [matRippleRadius]="23" [matRippleAnimation]="{enterDuration: 300}"></div></div><input #input class="mat-radio-input cdk-visually-hidden" type="radio" [id]="inputId" [checked]="checked" [disabled]="disabled" [tabIndex]="tabIndex" [attr.name]="name" [required]="required" [attr.aria-label]="ariaLabel" [attr.aria-labelledby]="ariaLabelledby" (change)="_onInputChange($event)" (click)="_onInputClick($event)"><div class="mat-radio-label-content" [class.mat-radio-label-before]="labelPosition == \'before\'"><span style="display:none">&nbsp;</span><ng-content></ng-content></div></label>',styles:[".mat-radio-button{display:inline-block}.mat-radio-label{cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(.001)}.mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)}.mat-radio-label-content{display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-ripple{position:absolute;left:-15px;top:-15px;height:50px;width:50px;z-index:1;pointer-events:none}"],inputs:["color","disableRipple","tabIndex"],encapsulation:n._0.None,preserveWhitespaces:!1,exportAs:"matRadioButton",host:{class:"mat-radio-button","[class.mat-radio-checked]":"checked","[class.mat-radio-disabled]":"disabled","[attr.id]":"id","(focus)":"_inputElement.nativeElement.focus()"},changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:ui,decorators:[{type:n.G}]},{type:n.o},{type:n.h},{type:s.h},{type:X.d}]},e.propDecorators={id:[{type:n.y}],name:[{type:n.y}],ariaLabel:[{type:n.y,args:["aria-label"]}],ariaLabelledby:[{type:n.y,args:["aria-labelledby"]}],checked:[{type:n.y}],value:[{type:n.y}],align:[{type:n.y}],labelPosition:[{type:n.y}],disabled:[{type:n.y}],required:[{type:n.y}],change:[{type:n.H}],_ripple:[{type:n.X,args:[o.x]}],_inputElement:[{type:n.X,args:["input"]}]},e}(pi),fi=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[l.b,o.y,o.n,s.a],exports:[ui,di,o.n],providers:[X.c],declarations:[ui,di]}]}],t.ctorParameters=function(){return[]},t}(),mi=i("gOiy"),gi=i("e0rv"),yi=i("3uJi"),_i=i("RyBE"),vi={provide:E.g,useExisting:Object(n._4)(function(){return wi}),multi:!0},bi=function(){return function(){}}(),xi=function(){return function(t){this._elementRef=t}}(),Ai=Object(o.G)(Object(o.C)(Object(o.E)(xi),"accent")),wi=function(t){function e(e,i,r,o,s){var a=t.call(this,e)||this;return a._focusMonitor=i,a._changeDetectorRef=r,a._dir=o,a._invert=!1,a._max=100,a._min=0,a._step=1,a._thumbLabel=!1,a._tickInterval=0,a._value=null,a._vertical=!1,a.change=new n.r,a.input=new n.r,a.onTouched=function(){},a._percent=0,a._isSliding=!1,a._isActive=!1,a._tickIntervalPercent=0,a._sliderDimensions=null,a._controlValueAccessorChangeFn=function(){},a._dirChangeSubscription=ot.a.EMPTY,a.tabIndex=parseInt(s)||0,a}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"invert",{get:function(){return this._invert},set:function(t){this._invert=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=Object(a.d)(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=Object(a.d)(t,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=Object(a.d)(t,this._step),this._step%1!=0&&(this._roundLabelTo=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLabel",{get:function(){return this._thumbLabel},set:function(t){this._thumbLabel=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbLabelDeprecated",{get:function(){return this._thumbLabel},set:function(t){this._thumbLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickInterval",{get:function(){return this._tickInterval},set:function(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Object(a.d)(t,this._tickInterval):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_tickIntervalDeprecated",{get:function(){return this.tickInterval},set:function(t){this.tickInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null===this._value&&(this.value=this._min),this._value},set:function(t){t!==this._value&&(this._value=Object(a.d)(t,this._value||0),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._roundLabelTo&&this.value&&this.value%1!=0?this.value.toFixed(this._roundLabelTo):this.value||0},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._focusHostElement()},e.prototype.blur=function(){this._blurHostElement()},Object.defineProperty(e.prototype,"percent",{get:function(){return this._clamp(this._percent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_invertAxis",{get:function(){return this.vertical?!this.invert:this.invert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isMinValue",{get:function(){return 0===this.percent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbGap",{get:function(){return this.disabled?7:this._isMinValue&&!this.thumbLabel?this._isActive?10:7:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_trackBackgroundStyles",{get:function(){var t=this.vertical?"Y":"X";return{transform:"translate"+t+"("+(this._invertMouseCoords?"-":"")+this._thumbGap+"px) scale"+t+"("+(1-this.percent)+")"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_trackFillStyles",{get:function(){var t=this.vertical?"Y":"X";return{transform:"translate"+t+"("+(this._invertMouseCoords?"":"-")+this._thumbGap+"px) scale"+t+"("+this.percent+")"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ticksContainerStyles",{get:function(){return{transform:"translate"+(this.vertical?"Y":"X")+"("+(this.vertical||"rtl"!=this._direction?"-":"")+this._tickIntervalPercent/2*100+"%)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ticksStyles",{get:function(){var t=100*this._tickIntervalPercent,e={backgroundSize:this.vertical?"2px "+t+"%":t+"% 2px",transform:"translateZ(0) translate"+(this.vertical?"Y":"X")+"("+(this.vertical||"rtl"!=this._direction?"":"-")+t/2+"%)"+(this.vertical||"rtl"!=this._direction?"":" rotate(180deg)")};this._isMinValue&&this._thumbGap&&(e["padding"+(this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left")]=this._thumbGap+"px");return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbContainerStyles",{get:function(){return{transform:"translate"+(this.vertical?"Y":"X")+"(-"+100*(("rtl"!=this._direction||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent)+"%)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_invertMouseCoords",{get:function(){return"rtl"!=this._direction||this.vertical?this._invertAxis:!this._invertAxis},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_direction",{get:function(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this._focusMonitor.monitor(this._elementRef.nativeElement,!0).subscribe(function(e){t._isActive=!!e&&"keyboard"!==e,t._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(function(){t._changeDetectorRef.markForCheck()}))},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._dirChangeSubscription.unsubscribe()},e.prototype._onMouseenter=function(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())},e.prototype._onClick=function(t){if(!this.disabled){var e=this.value;this._isSliding=!1,this._focusHostElement(),this._updateValueFromPosition({x:t.clientX,y:t.clientY}),e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent())}},e.prototype._onSlide=function(t){if(!this.disabled){this._isSliding||this._onSlideStart(null),t.preventDefault();var e=this.value;this._updateValueFromPosition({x:t.center.x,y:t.center.y}),e!=this.value&&this._emitInputEvent()}},e.prototype._onSlideStart=function(t){this.disabled||this._isSliding||(this._onMouseenter(),this._isSliding=!0,this._focusHostElement(),this._valueOnSlideStart=this.value,t&&(this._updateValueFromPosition({x:t.center.x,y:t.center.y}),t.preventDefault()))},e.prototype._onSlideEnd=function(){this._isSliding=!1,this._valueOnSlideStart==this.value||this.disabled||this._emitChangeEvent(),this._valueOnSlideStart=null},e.prototype._onFocus=function(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()},e.prototype._onBlur=function(){this.onTouched()},e.prototype._onKeydown=function(t){if(!this.disabled){var e=this.value;switch(t.keyCode){case h.l:this._increment(10);break;case h.k:this._increment(-10);break;case h.e:this.value=this.max;break;case h.h:this.value=this.min;break;case h.i:this._increment("rtl"==this._direction?1:-1);break;case h.p:this._increment(1);break;case h.m:this._increment("rtl"==this._direction?-1:1);break;case h.d:this._increment(-1);break;default:return}e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,t.preventDefault()}},e.prototype._onKeyup=function(){this._isSliding=!1},e.prototype._increment=function(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)},e.prototype._updateValueFromPosition=function(t){if(this._sliderDimensions){var e=this.vertical?this._sliderDimensions.top:this._sliderDimensions.left,i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,n=this.vertical?t.y:t.x,r=this._clamp((n-e)/i);this._invertMouseCoords&&(r=1-r);var o=this._calculateValue(r),s=Math.round((o-this.min)/this.step)*this.step+this.min;this.value=this._clamp(s,this.min,this.max)}},e.prototype._emitChangeEvent=function(){this._controlValueAccessorChangeFn(this.value),this.change.emit(this._createChangeEvent())},e.prototype._emitInputEvent=function(){this.input.emit(this._createChangeEvent())},e.prototype._updateTickIntervalPercent=function(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){var t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,e=t*this.step/(this.max-this.min),i=Math.ceil(30/e)*this.step;this._tickIntervalPercent=i/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)},e.prototype._createChangeEvent=function(t){void 0===t&&(t=this.value);var e=new bi;return e.source=this,e.value=t,e},e.prototype._calculatePercentage=function(t){return((t||0)-this.min)/(this.max-this.min)},e.prototype._calculateValue=function(t){return this.min+t*(this.max-this.min)},e.prototype._clamp=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.max(e,Math.min(t,i))},e.prototype._getSliderDimensions=function(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null},e.prototype._focusHostElement=function(){this._elementRef.nativeElement.focus()},e.prototype._blurHostElement=function(){this._elementRef.nativeElement.blur()},e.prototype.writeValue=function(t){this.value=t},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t},e.decorators=[{type:n.j,args:[{selector:"mat-slider",exportAs:"matSlider",providers:[vi],host:{"(focus)":"_onFocus()","(blur)":"_onBlur()","(click)":"_onClick($event)","(keydown)":"_onKeydown($event)","(keyup)":"_onKeyup()","(mouseenter)":"_onMouseenter()","(slide)":"_onSlide($event)","(slideend)":"_onSlideEnd()","(slidestart)":"_onSlideStart($event)",class:"mat-slider",role:"slider","[tabIndex]":"tabIndex","[attr.aria-disabled]":"disabled","[attr.aria-valuemax]":"max","[attr.aria-valuemin]":"min","[attr.aria-valuenow]":"value","[attr.aria-orientation]":'vertical ? "vertical" : "horizontal"',"[class.mat-slider-disabled]":"disabled","[class.mat-slider-has-ticks]":"tickInterval","[class.mat-slider-horizontal]":"!vertical","[class.mat-slider-axis-inverted]":"_invertAxis","[class.mat-slider-sliding]":"_isSliding","[class.mat-slider-thumb-label-showing]":"thumbLabel","[class.mat-slider-vertical]":"vertical","[class.mat-slider-min-value]":"_isMinValue","[class.mat-slider-hide-last-tick]":"disabled || _isMinValue && _thumbGap && _invertAxis"},template:'<div class="mat-slider-wrapper" #sliderWrapper><div class="mat-slider-track-wrapper"><div class="mat-slider-track-background" [ngStyle]="_trackBackgroundStyles"></div><div class="mat-slider-track-fill" [ngStyle]="_trackFillStyles"></div></div><div class="mat-slider-ticks-container" [ngStyle]="_ticksContainerStyles"><div class="mat-slider-ticks" [ngStyle]="_ticksStyles"></div></div><div class="mat-slider-thumb-container" [ngStyle]="_thumbContainerStyles"><div class="mat-slider-focus-ring"></div><div class="mat-slider-thumb"></div><div class="mat-slider-thumb-label"><span class="mat-slider-thumb-label-text">{{displayValue}}</span></div></div></div>',styles:[".mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:0;vertical-align:middle}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),opacity .4s cubic-bezier(.25,.8,.25,1)}.cdk-keyboard-focused .mat-slider-focus-ring,.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label{cursor:-webkit-grab;cursor:grab}.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label:active,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb:active{cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(.7);transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),border-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform .4s cubic-bezier(.25,.8,.25,1),border-radius .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-sliding .mat-slider-thumb-container,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-track-fill{transition-duration:0s}.mat-slider-has-ticks .mat-slider-wrapper::after{content:'';position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}"],inputs:["disabled","color","tabIndex"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:s.h},{type:n.h},{type:u.c,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.f,args:["tabindex"]}]}]},e.propDecorators={invert:[{type:n.y}],max:[{type:n.y}],min:[{type:n.y}],step:[{type:n.y}],thumbLabel:[{type:n.y}],_thumbLabelDeprecated:[{type:n.y,args:["thumb-label"]}],tickInterval:[{type:n.y}],_tickIntervalDeprecated:[{type:n.y,args:["tick-interval"]}],value:[{type:n.y}],vertical:[{type:n.y}],change:[{type:n.H}],input:[{type:n.H}],_sliderWrapper:[{type:n.X,args:["sliderWrapper"]}]},e}(Ai),Pi=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[l.b,o.n,u.a,s.a],exports:[wi,o.n],declarations:[wi],providers:[{provide:_i.f,useClass:o.e}]}]}],t.ctorParameters=function(){return[]},t}(),Ei=i("LT5m"),Ti=i("oXAn"),Si=function(){function t(t){this.template=t}return t.decorators=[{type:n.n,args:[{selector:"[cdkStepLabel]"}]}],t.ctorParameters=function(){return[{type:n.U}]},t}(),Ci=0,Oi=(function(){}(),function(){function t(t){this._stepper=t,this.interacted=!1,this._editable=!0,this._optional=!1,this._customCompleted=null}return Object.defineProperty(t.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optional",{get:function(){return this._optional},set:function(t){this._optional=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return null==this._customCompleted?this._defaultCompleted:this._customCompleted},set:function(t){this._customCompleted=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_defaultCompleted",{get:function(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted},enumerable:!0,configurable:!0}),t.prototype.select=function(){this._stepper.selected=this},t.prototype.reset=function(){this.interacted=!1,null!=this._customCompleted&&(this._customCompleted=!1),this.stepControl&&this.stepControl.reset()},t.prototype.ngOnChanges=function(){this._stepper._stateChanged()},t.decorators=[{type:n.j,args:[{selector:"cdk-step",exportAs:"cdkStep",template:"<ng-template><ng-content></ng-content></ng-template>",encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:Mi,decorators:[{type:n.u,args:[Object(n._4)(function(){return Mi})]}]}]},t.propDecorators={stepLabel:[{type:n.l,args:[Si]}],content:[{type:n.X,args:[n.U]}],stepControl:[{type:n.y}],label:[{type:n.y}],editable:[{type:n.y}],optional:[{type:n.y}],completed:[{type:n.y}]},t}()),Mi=function(){function t(t,e){this._dir=t,this._changeDetectorRef=e,this._destroyed=new S.a,this._linear=!1,this._selectedIndex=0,this.selectionChange=new n.r,this._focusIndex=0,this._orientation="horizontal",this._groupId=Ci++}return Object.defineProperty(t.prototype,"linear",{get:function(){return this._linear},set:function(t){this._linear=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(this._steps){if(t<0||t>this._steps.length-1)throw Error("cdkStepper: Cannot assign out-of-bounds value to `selectedIndex`.");this._anyControlsInvalidOrPending(t)||t<this._selectedIndex&&!this._steps.toArray()[t].editable?this._stepHeader.toArray()[t].nativeElement.blur():this._selectedIndex!=t&&(this._emitStepperSelectionEvent(t),this._focusIndex=this._selectedIndex)}else this._selectedIndex=this._focusIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._steps.toArray()[this.selectedIndex]},set:function(t){this.selectedIndex=this._steps.toArray().indexOf(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},t.prototype.next=function(){this.selectedIndex=Math.min(this._selectedIndex+1,this._steps.length-1)},t.prototype.previous=function(){this.selectedIndex=Math.max(this._selectedIndex-1,0)},t.prototype.reset=function(){this.selectedIndex=0,this._steps.forEach(function(t){return t.reset()}),this._stateChanged()},t.prototype._getStepLabelId=function(t){return"cdk-step-label-"+this._groupId+"-"+t},t.prototype._getStepContentId=function(t){return"cdk-step-content-"+this._groupId+"-"+t},t.prototype._stateChanged=function(){this._changeDetectorRef.markForCheck()},t.prototype._getAnimationDirection=function(t){var e=t-this._selectedIndex;return e<0?"rtl"===this._layoutDirection()?"next":"previous":e>0?"rtl"===this._layoutDirection()?"previous":"next":"current"},t.prototype._getIndicatorType=function(t){var e=this._steps.toArray()[t];return e.completed&&this._selectedIndex!=t?e.editable?"edit":"done":"number"},t.prototype._emitStepperSelectionEvent=function(t){var e=this._steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:e[t],previouslySelectedStep:e[this._selectedIndex]}),this._selectedIndex=t,this._stateChanged()},t.prototype._onKeydown=function(t){var e=t.keyCode;e===h.m&&("rtl"===this._layoutDirection()?this._focusPreviousStep():this._focusNextStep(),t.preventDefault()),e===h.i&&("rtl"===this._layoutDirection()?this._focusNextStep():this._focusPreviousStep(),t.preventDefault()),"vertical"!==this._orientation||e!==h.p&&e!==h.d||(e===h.p?this._focusPreviousStep():this._focusNextStep(),t.preventDefault()),e!==h.n&&e!==h.f||(this.selectedIndex=this._focusIndex,t.preventDefault()),e===h.h&&(this._focusStep(0),t.preventDefault()),e===h.e&&(this._focusStep(this._steps.length-1),t.preventDefault())},t.prototype._focusNextStep=function(){this._focusStep((this._focusIndex+1)%this._steps.length)},t.prototype._focusPreviousStep=function(){this._focusStep((this._focusIndex+this._steps.length-1)%this._steps.length)},t.prototype._focusStep=function(t){this._focusIndex=t,this._stepHeader.toArray()[this._focusIndex].nativeElement.focus()},t.prototype._anyControlsInvalidOrPending=function(t){var e=this._steps.toArray();return e[this._selectedIndex].interacted=!0,!!(this._linear&&t>=0)&&e.slice(0,t).some(function(t){var e=t.stepControl;return(e?e.invalid||e.pending:!t.completed)&&!t.optional})},t.prototype._layoutDirection=function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},t.decorators=[{type:n.n,args:[{selector:"[cdkStepper]",exportAs:"cdkStepper"}]}],t.ctorParameters=function(){return[{type:u.c,decorators:[{type:n.G}]},{type:n.h}]},t.propDecorators={_steps:[{type:n.m,args:[Oi]}],linear:[{type:n.y}],selectedIndex:[{type:n.y}],selected:[{type:n.y}],selectionChange:[{type:n.H}]},t}(),Ri=function(){function t(t){this._stepper=t,this.type="submit"}return t.decorators=[{type:n.n,args:[{selector:"button[cdkStepperNext]",host:{"(click)":"_stepper.next()","[type]":"type"}}]}],t.ctorParameters=function(){return[{type:Mi}]},t.propDecorators={type:[{type:n.y}]},t}(),Ii=function(){function t(t){this._stepper=t,this.type="button"}return t.decorators=[{type:n.n,args:[{selector:"button[cdkStepperPrevious]",host:{"(click)":"_stepper.previous()","[type]":"type"}}]}],t.ctorParameters=function(){return[{type:Mi}]},t.propDecorators={type:[{type:n.y}]},t}(),Di=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[u.a,l.b],exports:[Oi,Mi,Si,Ri,Ii],declarations:[Oi,Mi,Si,Ri,Ii]}]}],t.ctorParameters=function(){return[]},t}(),Li=i("5O0w"),ki=function(t){function e(e){return t.call(this,e)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"[matStepLabel]"}]}],e.ctorParameters=function(){return[{type:n.U}]},e}(Si),Fi=function(){function t(){this.changes=new S.a,this.optionalLabel="Optional"}return t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),Ni=function(){function t(t,e,i,n){this._intl=t,this._focusMonitor=e,this._element=i,e.monitor(i.nativeElement,!0),this._intlSubscription=t.changes.subscribe(function(){return n.markForCheck()})}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this._index=Object(a.d)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optional",{get:function(){return this._optional},set:function(t){this._optional=Object(a.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element.nativeElement)},t.prototype._stringLabel=function(){return this.label instanceof ki?null:this.label},t.prototype._templateLabel=function(){return this.label instanceof ki?this.label:null},t.prototype._getHostElement=function(){return this._element.nativeElement},t.decorators=[{type:n.j,args:[{selector:"mat-step-header",template:'<div class="mat-step-header-ripple" mat-ripple [matRippleTrigger]="_getHostElement()"></div><div [class.mat-step-icon]="state !== \'number\' || selected" [class.mat-step-icon-not-touched]="state == \'number\' && !selected" [ngSwitch]="state"><span *ngSwitchCase="\'number\'">{{index + 1}}</span><ng-container *ngSwitchCase="\'edit\'" [ngSwitch]="!!(iconOverrides && iconOverrides.edit)"><ng-container *ngSwitchCase="true" [ngTemplateOutlet]="iconOverrides.edit"></ng-container><mat-icon *ngSwitchDefault>create</mat-icon></ng-container><ng-container *ngSwitchCase="\'done\'" [ngSwitch]="!!(iconOverrides && iconOverrides.done)"><ng-container *ngSwitchCase="true" [ngTemplateOutlet]="iconOverrides.done"></ng-container><mat-icon *ngSwitchDefault>done</mat-icon></ng-container></div><div class="mat-step-label" [class.mat-step-label-active]="active" [class.mat-step-label-selected]="selected"><ng-container *ngIf="_templateLabel()" [ngTemplateOutlet]="_templateLabel()!.template"></ng-container><div class="mat-step-text-label" *ngIf="_stringLabel()">{{label}}</div><div class="mat-step-optional" *ngIf="optional">{{_intl.optionalLabel}}</div></div>',styles:[".mat-step-header{overflow:hidden;outline:0;cursor:pointer;position:relative;box-sizing:content-box}.mat-step-optional{font-size:12px}.mat-step-icon,.mat-step-icon-not-touched{border-radius:50%;height:24px;width:24px;align-items:center;justify-content:center;display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],host:{class:"mat-step-header",role:"tab"},encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:Fi},{type:s.h},{type:n.o},{type:n.h}]},t.propDecorators={state:[{type:n.y}],label:[{type:n.y}],iconOverrides:[{type:n.y}],index:[{type:n.y}],selected:[{type:n.y}],active:[{type:n.y}],optional:[{type:n.y}]},t}(),Bi={horizontalStepTransition:Object(Kt.m)("stepTransition",[Object(Kt.j)("previous",Object(Kt.k)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Object(Kt.j)("current",Object(Kt.k)({transform:"none",visibility:"visible"})),Object(Kt.j)("next",Object(Kt.k)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),Object(Kt.l)("* => *",Object(Kt.e)("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:Object(Kt.m)("stepTransition",[Object(Kt.j)("previous",Object(Kt.k)({height:"0px",visibility:"hidden"})),Object(Kt.j)("next",Object(Kt.k)({height:"0px",visibility:"hidden"})),Object(Kt.j)("current",Object(Kt.k)({height:"*",visibility:"visible"})),Object(Kt.l)("* <=> current",Object(Kt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])},Vi=function(){function t(t){this.templateRef=t}return t.decorators=[{type:n.n,args:[{selector:"ng-template[matStepperIcon]"}]}],t.ctorParameters=function(){return[{type:n.U}]},t.propDecorators={name:[{type:n.y,args:["matStepperIcon"]}]},t}(),zi=Oi,Ui=Mi,ji=function(t){function e(e,i){var n=t.call(this,e)||this;return n._errorStateMatcher=i,n}return Object(r.b)(e,t),e.prototype.isErrorState=function(t,e){var i=this._errorStateMatcher.isErrorState(t,e),n=!!(t&&t.invalid&&this.interacted);return i||n},e.decorators=[{type:n.j,args:[{selector:"mat-step",template:"<ng-template><ng-content></ng-content></ng-template>",providers:[{provide:o.d,useExisting:e}],encapsulation:n._0.None,exportAs:"matStep",preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:Gi,decorators:[{type:n.u,args:[Object(n._4)(function(){return Gi})]}]},{type:o.d,decorators:[{type:n.T}]}]},e.propDecorators={stepLabel:[{type:n.l,args:[ki]}]},e}(Oi),Gi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._iconOverrides={},e}return Object(r.b)(e,t),e.prototype.ngAfterContentInit=function(){var t=this,e=this._icons.toArray(),i=e.find(function(t){return"edit"===t.name}),n=e.find(function(t){return"done"===t.name});i&&(this._iconOverrides.edit=i.templateRef),n&&(this._iconOverrides.done=n.templateRef),this._steps.changes.pipe(Object(Li.a)(this._destroyed)).subscribe(function(){return t._stateChanged()})},e.decorators=[{type:n.n,args:[{selector:"[matStepper]"}]}],e.ctorParameters=function(){return[]},e.propDecorators={_stepHeader:[{type:n.Y,args:[Ni,{read:n.o}]}],_steps:[{type:n.m,args:[ji]}],_icons:[{type:n.m,args:[Vi]}]},e}(Mi),Wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-horizontal-stepper",exportAs:"matHorizontalStepper",template:'<div class="mat-horizontal-stepper-header-container"><ng-container *ngFor="let step of _steps; let i = index; let isLast = last"><mat-step-header class="mat-horizontal-stepper-header" (click)="step.select()" (keydown)="_onKeydown($event)" [tabIndex]="_focusIndex === i ? 0 : -1" [id]="_getStepLabelId(i)" [attr.aria-controls]="_getStepContentId(i)" [attr.aria-selected]="selectedIndex == i" [index]="i" [state]="_getIndicatorType(i)" [label]="step.stepLabel || step.label" [selected]="selectedIndex === i" [active]="step.completed || selectedIndex === i || !linear" [optional]="step.optional" [iconOverrides]="_iconOverrides"></mat-step-header><div *ngIf="!isLast" class="mat-stepper-horizontal-line"></div></ng-container></div><div class="mat-horizontal-content-container"><div *ngFor="let step of _steps; let i = index" class="mat-horizontal-stepper-content" role="tabpanel" [@stepTransition]="_getAnimationDirection(i)" [id]="_getStepContentId(i)" [attr.aria-labelledby]="_getStepLabelId(i)" [attr.aria-expanded]="selectedIndex === i"><ng-container [ngTemplateOutlet]="step.content"></ng-container></div></div>',styles:[".mat-stepper-horizontal,.mat-stepper-vertical{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon,.mat-horizontal-stepper-header .mat-step-icon-not-touched{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon,[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon-not-touched{margin-right:0;margin-left:8px}.mat-vertical-stepper-header{display:flex;align-items:center;padding:24px;max-height:24px}.mat-vertical-stepper-header .mat-step-icon,.mat-vertical-stepper-header .mat-step-icon-not-touched{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon,[dir=rtl] .mat-vertical-stepper-header .mat-step-icon-not-touched{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{overflow:hidden}.mat-horizontal-stepper-content[aria-expanded=false]{height:0}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:'';position:absolute;top:-16px;bottom:-16px;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}"],inputs:["selectedIndex"],host:{class:"mat-stepper-horizontal","aria-orientation":"horizontal",role:"tablist"},animations:[Bi.horizontalStepTransition],providers:[{provide:Gi,useExisting:e}],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[]},e}(Gi),Hi=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._orientation="vertical",n}return Object(r.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-vertical-stepper",exportAs:"matVerticalStepper",template:'<div class="mat-step" *ngFor="let step of _steps; let i = index; let isLast = last"><mat-step-header class="mat-vertical-stepper-header" (click)="step.select()" (keydown)="_onKeydown($event)" [tabIndex]="_focusIndex == i ? 0 : -1" [id]="_getStepLabelId(i)" [attr.aria-controls]="_getStepContentId(i)" [attr.aria-selected]="selectedIndex === i" [index]="i" [state]="_getIndicatorType(i)" [label]="step.stepLabel || step.label" [selected]="selectedIndex === i" [active]="step.completed || selectedIndex === i || !linear" [optional]="step.optional" [iconOverrides]="_iconOverrides"></mat-step-header><div class="mat-vertical-content-container" [class.mat-stepper-vertical-line]="!isLast"><div class="mat-vertical-stepper-content" role="tabpanel" [@stepTransition]="_getAnimationDirection(i)" [id]="_getStepContentId(i)" [attr.aria-labelledby]="_getStepLabelId(i)" [attr.aria-expanded]="selectedIndex === i"><div class="mat-vertical-content"><ng-container [ngTemplateOutlet]="step.content"></ng-container></div></div></div></div>',styles:[".mat-stepper-horizontal,.mat-stepper-vertical{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon,.mat-horizontal-stepper-header .mat-step-icon-not-touched{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon,[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon-not-touched{margin-right:0;margin-left:8px}.mat-vertical-stepper-header{display:flex;align-items:center;padding:24px;max-height:24px}.mat-vertical-stepper-header .mat-step-icon,.mat-vertical-stepper-header .mat-step-icon-not-touched{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon,[dir=rtl] .mat-vertical-stepper-header .mat-step-icon-not-touched{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{overflow:hidden}.mat-horizontal-stepper-content[aria-expanded=false]{height:0}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:'';position:absolute;top:-16px;bottom:-16px;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}"],inputs:["selectedIndex"],host:{class:"mat-stepper-vertical","aria-orientation":"vertical",role:"tablist"},animations:[Bi.verticalStepTransition],providers:[{provide:Gi,useExisting:e}],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:u.c,decorators:[{type:n.G}]},{type:n.h}]},e}(Gi),Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"button[matStepperNext]",host:{"(click)":"_stepper.next()","[type]":"type"},inputs:["type"],providers:[{provide:Mi,useExisting:Gi}]}]}],e.ctorParameters=function(){return[]},e}(Ri),Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"button[matStepperPrevious]",host:{"(click)":"_stepper.previous()","[type]":"type"},inputs:["type"],providers:[{provide:Mi,useExisting:Gi}]}]}],e.ctorParameters=function(){return[]},e}(Ii),qi=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.n,l.b,p.g,H.c,Di,we.c,s.a,o.y],exports:[o.n,Wi,Hi,ji,ki,Gi,Xi,Yi,Ni,Vi],declarations:[Wi,Hi,ji,ki,Gi,Xi,Yi,Ni,Vi],providers:[Fi,o.d]}]}],t.ctorParameters=function(){return[]},t}(),Ki=i("697t"),Qi=i("ZFRd"),Zi=i("YXpL"),Ji=i("jk5D");i.d(e,!1,function(){return D}),i.d(e,!1,function(){return L}),i.d(e,!1,function(){return k}),i.d(e,!1,function(){return F}),i.d(e,!1,function(){return N}),i.d(e,!1,function(){return W}),i.d(e,!1,function(){return 48}),i.d(e,!1,function(){return 256}),i.d(e,!1,function(){return B}),i.d(e,!1,function(){return V}),i.d(e,!1,function(){return z}),i.d(e,!1,function(){return U}),i.d(e,!1,function(){return j}),i.d(e,!1,function(){return G}),i.d(e,!1,function(){return H.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return H.b}),i.d(e,!1,function(){return H.a}),i.d(e,!1,function(){return Y}),i.d(e,!1,function(){return q}),i.d(e,!1,function(){return K}),i.d(e,!1,function(){return Z}),i.d(e,!1,function(){return J}),i.d(e,!1,function(){return $}),i.d(e,!1,function(){return tt}),i.d(e,!1,function(){return et}),i.d(e,!1,function(){return it.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return it.a}),i.d(e,!1,function(){return it.c}),i.d(e,!1,function(){return it.e}),i.d(e,!1,function(){return it.d}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return nt.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return _t}),i.d(e,!1,function(){return pt}),i.d(e,!1,function(){return dt}),i.d(e,!1,function(){return mt}),i.d(e,!1,function(){return gt}),i.d(e,!1,function(){return st}),i.d(e,!1,function(){return at}),i.d(e,!1,function(){return lt}),i.d(e,!1,function(){return ct}),i.d(e,!1,function(){return ut}),i.d(e,!1,function(){return ht}),i.d(e,!1,function(){return yt}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.a}),i.d(e,!1,function(){return o.b}),i.d(e,!1,function(){return o.n}),i.d(e,!1,function(){return o.f}),i.d(e,!1,function(){return o.E}),i.d(e,!1,function(){return o.C}),i.d(e,!1,function(){return o.D}),i.d(e,!1,function(){return o.G}),i.d(e,!1,function(){return o.F}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.A}),i.d(e,!1,function(){return o.r}),i.d(e,!1,function(){return o.h}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.c}),i.d(e,!1,function(){return o.g}),i.d(e,!1,function(){return o.z}),i.d(e,!1,function(){return o.k}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.d}),i.d(e,!1,function(){return o.i}),i.d(e,!1,function(){return o.e}),i.d(e,!1,function(){return o.o}),i.d(e,!1,function(){return o.q}),i.d(e,!1,function(){return o.p}),i.d(e,!1,function(){return o.u}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.l}),i.d(e,!1,function(){return o.t}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.s}),i.d(e,!1,function(){return o.j}),i.d(e,!1,function(){return o.y}),i.d(e,!1,function(){return o.m}),i.d(e,!1,function(){return o.x}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return o.B}),i.d(e,!1,function(){return o.w}),i.d(e,!1,function(){return o.v}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Tt}),i.d(e,!1,function(){return Ut}),i.d(e,!1,function(){return Ct}),i.d(e,!1,function(){return wt}),i.d(e,!1,function(){return Pt}),i.d(e,!1,function(){return Mt}),i.d(e,!1,function(){return Rt}),i.d(e,!1,function(){return It}),i.d(e,!1,function(){return Dt}),i.d(e,!1,function(){return Lt}),i.d(e,!1,function(){return kt}),i.d(e,!1,function(){return Ft}),i.d(e,!1,function(){return Nt}),i.d(e,!1,function(){return Bt}),i.d(e,!1,function(){return At}),i.d(e,!1,function(){return Vt}),i.d(e,!1,function(){return zt}),i.d(e,!1,function(){return Et}),i.d(e,!1,function(){return St}),i.d(e,!1,function(){return vt.i}),i.d(e,!1,function(){}),i.d(e,!1,function(){return vt.a}),i.d(e,!1,function(){return vt.b}),i.d(e,!1,function(){return vt.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){return vt.d}),i.d(e,!1,function(){}),i.d(e,!1,function(){return vt.g}),i.d(e,!1,function(){return vt.f}),i.d(e,!1,function(){return vt.k}),i.d(e,!1,function(){return vt.h}),i.d(e,!1,function(){return vt.e}),i.d(e,!1,function(){}),i.d(e,!1,function(){return vt.j}),i.d(e,!1,function(){}),i.d(e,!1,function(){return jt}),i.d(e,!1,function(){return Gt}),i.d(e,!1,function(){return oe}),i.d(e,!1,function(){return Qt}),i.d(e,!1,function(){return te}),i.d(e,!1,function(){return ee}),i.d(e,!1,function(){return ie}),i.d(e,!1,function(){return ne}),i.d(e,!1,function(){return re}),i.d(e,!1,function(){return Zt}),i.d(e,!1,function(){return"225ms cubic-bezier(0.4,0.0,0.2,1)"}),i.d(e,!1,function(){return Jt}),i.d(e,!1,function(){return T.d}),i.d(e,!1,function(){return T.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return T.b}),i.d(e,!1,function(){return T.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return T.e}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ae}),i.d(e,!1,function(){return xe}),i.d(e,!1,function(){return le}),i.d(e,!1,function(){return ce}),i.d(e,!1,function(){return ue}),i.d(e,!1,function(){return he}),i.d(e,!1,function(){return pe}),i.d(e,!1,function(){return we.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return we.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return we.d}),i.d(e,!1,function(){return we.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){return bt.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return bt.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){return bt.a}),i.d(e,!1,function(){return Ge}),i.d(e,!1,function(){return Pe}),i.d(e,!1,function(){return Ee}),i.d(e,!1,function(){return Te}),i.d(e,!1,function(){return Se}),i.d(e,!1,function(){return Ce}),i.d(e,!1,function(){return Oe}),i.d(e,!1,function(){return Me}),i.d(e,!1,function(){return Re}),i.d(e,!1,function(){return Ie}),i.d(e,!1,function(){return De}),i.d(e,!1,function(){return Le}),i.d(e,!1,function(){return ke}),i.d(e,!1,function(){return Fe}),i.d(e,!1,function(){return Ne}),i.d(e,!1,function(){return Be}),i.d(e,!1,function(){return Ve}),i.d(e,!1,function(){return ze}),i.d(e,!1,function(){return Ue}),i.d(e,!1,function(){return je}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return We.g}),i.d(e,!1,function(){return We.b}),i.d(e,!1,function(){return We.e}),i.d(e,!1,function(){return We.c}),i.d(e,!1,function(){return We.a}),i.d(e,!1,function(){return We.d}),i.d(e,!1,function(){return We.f}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return He.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return He.b}),i.d(e,!1,function(){return He.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ze}),i.d(e,!1,function(){return Xe}),i.d(e,!1,function(){return Ye}),i.d(e,!1,function(){return Ke}),i.d(e,!1,function(){return ri}),i.d(e,!1,function(){return ti}),i.d(e,!1,function(){return ei}),i.d(e,!1,function(){return ii}),i.d(e,!1,function(){return ni}),i.d(e,!1,function(){return fi}),i.d(e,!1,function(){return si}),i.d(e,!1,function(){return ai}),i.d(e,!1,function(){return li}),i.d(e,!1,function(){return ci}),i.d(e,!1,function(){return ui}),i.d(e,!1,function(){return hi}),i.d(e,!1,function(){return pi}),i.d(e,!1,function(){return di}),i.d(e,!1,function(){return mi.d}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return mi.a}),i.d(e,!1,function(){return mi.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return mi.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return gi.h}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return gi.a}),i.d(e,!1,function(){return gi.d}),i.d(e,!1,function(){return gi.b}),i.d(e,!1,function(){return gi.c}),i.d(e,!1,function(){return gi.g}),i.d(e,!1,function(){return gi.e}),i.d(e,!1,function(){return gi.f}),i.d(e,!1,function(){}),i.d(e,!1,function(){return yi.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return yi.a}),i.d(e,!1,function(){return Pi}),i.d(e,!1,function(){return vi}),i.d(e,!1,function(){return bi}),i.d(e,!1,function(){return xi}),i.d(e,!1,function(){return Ai}),i.d(e,!1,function(){return wi}),i.d(e,!1,function(){return Ei.d}),i.d(e,!1,function(){return Ei.b}),i.d(e,!1,function(){return Ei.c}),i.d(e,!1,function(){return Ei.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ei.e}),i.d(e,!1,function(){return Ei.f}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ti.e}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ti.c}),i.d(e,!1,function(){return Ti.d}),i.d(e,!1,function(){return Ti.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ti.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){return qi}),i.d(e,!1,function(){return ki}),i.d(e,!1,function(){return zi}),i.d(e,!1,function(){return Ui}),i.d(e,!1,function(){return ji}),i.d(e,!1,function(){return Gi}),i.d(e,!1,function(){return Wi}),i.d(e,!1,function(){return Hi}),i.d(e,!1,function(){return Xi}),i.d(e,!1,function(){return Yi}),i.d(e,!1,function(){return Ni}),i.d(e,!1,function(){return Fi}),i.d(e,!1,function(){return Bi}),i.d(e,!1,function(){return Vi}),i.d(e,!1,function(){return Ki.k}),i.d(e,!1,function(){return Ki.b}),i.d(e,!1,function(){return Ki.e}),i.d(e,!1,function(){return Ki.c}),i.d(e,!1,function(){return Ki.d}),i.d(e,!1,function(){return Ki.a}),i.d(e,!1,function(){return Ki.j}),i.d(e,!1,function(){return Ki.g}),i.d(e,!1,function(){return Ki.i}),i.d(e,!1,function(){return Ki.f}),i.d(e,!1,function(){return Ki.h}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Qi.a}),i.d(e,!1,function(){return Qi.c}),i.d(e,!1,function(){return Qi.d}),i.d(e,!1,function(){return Qi.f}),i.d(e,!1,function(){return Qi.h}),i.d(e,!1,function(){return Qi.b}),i.d(e,!1,function(){return Qi.g}),i.d(e,!1,function(){return Qi.i}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Qi.j}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Qi.e}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Zi.b}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Zi.a}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ji.e}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ji.b}),i.d(e,!1,function(){return Ji.c}),i.d(e,!1,function(){}),i.d(e,!1,function(){return Ji.a}),i.d(e,!1,function(){return Ji.d}),i.d(e,!1,function(){return Ji.f}),i.d(e,!1,function(){});new n.W("5.2.0")},"7RTT":function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(e,i("GTd5"))},"7UKz":function(t,e,i){"use strict";var n=i("3v+G"),r=i("/Aon");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=v(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i("Xgfo");function v(t,e,i){if(t&&r.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,i),n}o.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var v=t=c.join(a);if(v=v.trim(),!i&&1===t.split("#").length){var b=l.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(v);if(x){var A=(x=x[0]).toLowerCase();this.protocol=A,v=v.substr(x.length)}if(i||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===v.substr(0,2);!w||x&&g[x]||(v=v.substr(2),this.slashes=!0)}if(!g[x]&&(w||x&&!y[x])){for(var P,E,T=-1,S=0;S<p.length;S++){-1!==(C=v.indexOf(p[S]))&&(-1===T||C<T)&&(T=C)}-1!==(E=-1===T?v.lastIndexOf("@"):v.lastIndexOf("@",T))&&(P=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(P)),T=-1;for(S=0;S<h.length;S++){var C;-1!==(C=v.indexOf(h[S]))&&(-1===T||C<T)&&(T=C)}-1===T&&(T=v.length),this.host=v.slice(0,T),v=v.slice(T),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var M=this.hostname.split(/\./),R=(S=0,M.length);S<R;S++){var I=M[S];if(I&&!I.match(d)){for(var D="",L=0,k=I.length;L<k;L++)I.charCodeAt(L)>127?D+="x":D+=I[L];if(!D.match(d)){var F=M.slice(0,S),N=M.slice(S+1),B=I.match(f);B&&(F.push(B[1]),N.unshift(B[2])),N.length&&(v="/"+N.join(".")+v),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var V=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+V,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[A])for(S=0,R=u.length;S<R;S++){var U=u[S];if(-1!==v.indexOf(U)){var j=encodeURIComponent(U);j===U&&(j=escape(U)),v=v.split(U).join(j)}}var G=v.indexOf("#");-1!==G&&(this.hash=v.substr(G),v=v.slice(0,G));var W=v.indexOf("?");if(-1!==W?(this.search=v.substr(W),this.query=v.substr(W+1),e&&(this.query=_.parse(this.query)),v=v.slice(0,W)):e&&(this.search="",this.query={}),v&&(this.pathname=v),y[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var H=this.search||"";this.path=V+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(i[u]=t[u])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var d=h[p];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",_=i.search||"";i.path=m+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||v||i.host&&t.pathname,A=x,w=i.pathname&&i.pathname.split("/")||[],P=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(P&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===w[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(P)i.hostname=i.host=w.shift(),(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var E=w.slice(-1)[0],T=(i.host||t.host||w.length>1)&&("."===E||".."===E)||""===E,S=0,C=w.length;C>=0;C--)"."===(E=w[C])?w.splice(C,1):".."===E?(w.splice(C,1),S++):S&&(w.splice(C,1),S--);if(!x&&!A)for(;S--;S)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),T&&"/"!==w.join("/").substr(-1)&&w.push("");var O,M=""===w[0]||w[0]&&"/"===w[0].charAt(0);P&&(i.hostname=i.host=M?"":w.length?w.shift():"",(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift()));return(x=x||i.host&&w.length)&&!M&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},"7WRt":function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?r-1:0,p=i?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[i+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[i+d]=255&s,d+=f,s/=256,c-=8);t[i+d-f]|=128*m}},"8Gud":function(t,e,i){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(n.a.apply(void 0,[e].concat(t)))}};var n=i("2kLc")},"8Ut3":function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("AP4T"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,i){t.call(this),this.value=e,this.scheduler=i,this._isScalar=!0,i&&(this._isScalar=!1)}return r(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.done,i=t.value,n=t.subscriber;e?n.complete():(n.next(i),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:i,subscriber:t});t.next(i),t.closed||t.complete()},e}(n.a)},"8Xfy":function(t,e,i){"use strict";i.d(e,"e",function(){return O}),i.d(e,"c",function(){return M}),i.d(e,"b",function(){return R}),i.d(e,"d",function(){return D}),i.d(e,"g",function(){return L}),i.d(e,"i",function(){return x}),i.d(e,"j",function(){return y}),i.d(e,"k",function(){return k}),i.d(e,"n",function(){return F}),i.d(e,"m",function(){return N}),i.d(e,"l",function(){return B}),i.d(e,"h",function(){return V}),i.d(e,"f",function(){return U}),i.d(e,"o",function(){return G}),i.d(e,"a",function(){return W});var n=i("LMZF"),r=i("XEj9"),o=i("pXwq"),s=i("V8+5"),a=i("Un6q"),l=i("6Xbx"),c=i("TO51"),u=i("qLnt"),h=i("rT01"),p=i("Rx5t"),d=i("LaOa"),f=i("qqDE"),m=i("nihM"),g=i("GZB0"),y=function(){function t(t){this._platform=t}return t.prototype.isDisabled=function(t){return t.hasAttribute("disabled")},t.prototype.isVisible=function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility},t.prototype.isTabbable=function(t){if(!this._platform.isBrowser)return!1;var e=function(t){try{return t.frameElement}catch(t){return null}}(t.ownerDocument.defaultView||window);if(e){var i=e&&e.nodeName.toLowerCase();if(-1===v(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===i)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}var n=t.nodeName.toLowerCase(),r=v(t);if(t.hasAttribute("contenteditable"))return-1!==r;if("iframe"===n)return!1;if("audio"===n){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===n){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==n||!this._platform.BLINK&&!this._platform.WEBKIT)&&(!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),i="input"===e&&t.type;return"text"===i||"password"===i||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0)},t.prototype.isFocusable=function(t){return function(t){if(function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t))return!1;return function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||_(t)}(t)&&!this.isDisabled(t)&&this.isVisible(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:s.a}]},t}();function _(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function v(t){if(!_(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var b=function(){function t(t,e,i,n,r){void 0===r&&(r=!1),this._element=t,this._checker=e,this._ngZone=i,this._document=n,this._enabled=!0,r||this.attachAnchors()}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._startAnchor.tabIndex=this._endAnchor.tabIndex=this._enabled?0:-1)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._startAnchor&&this._startAnchor.parentNode&&this._startAnchor.parentNode.removeChild(this._startAnchor),this._endAnchor&&this._endAnchor.parentNode&&this._endAnchor.parentNode.removeChild(this._endAnchor),this._startAnchor=this._endAnchor=null},t.prototype.attachAnchors=function(){var t=this;this._startAnchor||(this._startAnchor=this._createAnchor()),this._endAnchor||(this._endAnchor=this._createAnchor()),this._ngZone.runOutsideAngular(function(){t._startAnchor.addEventListener("focus",function(){t.focusLastTabbableElement()}),t._endAnchor.addEventListener("focus",function(){t.focusFirstTabbableElement()}),t._element.parentNode&&(t._element.parentNode.insertBefore(t._startAnchor,t._element),t._element.parentNode.insertBefore(t._endAnchor,t._element.nextSibling))})},t.prototype.focusInitialElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusInitialElement())})})},t.prototype.focusFirstTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusFirstTabbableElement())})})},t.prototype.focusLastTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusLastTabbableElement())})})},t.prototype._getRegionBoundary=function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-"+t+"], [cdkFocusRegion"+t+"], [cdk-focus-"+t+"]"),i=0;i<e.length;i++)e[i].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[i]):e[i].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[i]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)},t.prototype.focusInitialElement=function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return this._element.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead.",this._element),t?(t.focus(),!0):this.focusFirstTabbableElement()},t.prototype.focusFirstTabbableElement=function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t},t.prototype.focusLastTabbableElement=function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t},t.prototype._getFirstTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,i=0;i<e.length;i++){var n=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(n)return n}return null},t.prototype._getLastTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,i=e.length-1;i>=0;i--){var n=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(n)return n}return null},t.prototype._createAnchor=function(){var t=this._document.createElement("div");return t.tabIndex=this._enabled?0:-1,t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t},t.prototype._executeOnStable=function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Object(o.a)(1)).subscribe(t)},t}(),x=function(){function t(t,e,i){this._checker=t,this._ngZone=e,this._document=i}return t.prototype.create=function(t,e){return void 0===e&&(e=!1),new b(t,this._checker,this._ngZone,this._document,e)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:y},{type:n.F},{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},t}(),A=function(){function t(t,e){this._elementRef=t,this._focusTrapFactory=e,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return!this.focusTrap.enabled},set:function(t){this.focusTrap.enabled=!Object(r.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.focusTrap.destroy()},t.prototype.ngAfterContentInit=function(){this.focusTrap.attachAnchors()},t.decorators=[{type:n.n,args:[{selector:"cdk-focus-trap"}]}],t.ctorParameters=function(){return[{type:n.o},{type:x}]},t.propDecorators={disabled:[{type:n.y}]},t}(),w=function(){function t(t,e,i){this._elementRef=t,this._focusTrapFactory=e,this._previouslyFocusedElement=null,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this.focusTrap.enabled},set:function(t){this.focusTrap.enabled=Object(r.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoCapture",{get:function(){return this._autoCapture},set:function(t){this._autoCapture=Object(r.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)},t.prototype.ngAfterContentInit=function(){this.focusTrap.attachAnchors(),this.autoCapture&&(this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady())},t.decorators=[{type:n.n,args:[{selector:"[cdkTrapFocus]",exportAs:"cdkTrapFocus"}]}],t.ctorParameters=function(){return[{type:n.o},{type:x},{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},t.propDecorators={enabled:[{type:n.y,args:["cdkTrapFocus"]}],autoCapture:[{type:n.y,args:["cdkTrapFocusAutoCapture"]}]},t}(),P=" ";function E(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}var T=0,S=new Map,C=null,O=function(){function t(t){this._document=t}return t.prototype.describe=function(t,e){t.nodeType===this._document.ELEMENT_NODE&&e.trim()&&(S.has(e)||this._createMessageElement(e),this._isElementDescribedByMessage(t,e)||this._addMessageReference(t,e))},t.prototype.removeDescription=function(t,e){if(t.nodeType===this._document.ELEMENT_NODE&&e.trim()){this._isElementDescribedByMessage(t,e)&&this._removeMessageReference(t,e);var i=S.get(e);i&&0===i.referenceCount&&this._deleteMessageElement(e),C&&0===C.childNodes.length&&this._deleteMessagesContainer()}},t.prototype.ngOnDestroy=function(){for(var t=this._document.querySelectorAll("[cdk-describedby-host]"),e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute("cdk-describedby-host");C&&this._deleteMessagesContainer(),S.clear()},t.prototype._createMessageElement=function(t){var e=this._document.createElement("div");e.setAttribute("id","cdk-describedby-message-"+T++),e.appendChild(this._document.createTextNode(t)),C||this._createMessagesContainer(),C.appendChild(e),S.set(t,{messageElement:e,referenceCount:0})},t.prototype._deleteMessageElement=function(t){var e=S.get(t),i=e&&e.messageElement;C&&i&&C.removeChild(i),S.delete(t)},t.prototype._createMessagesContainer=function(){(C=this._document.createElement("div")).setAttribute("id","cdk-describedby-message-container"),C.setAttribute("aria-hidden","true"),C.style.display="none",this._document.body.appendChild(C)},t.prototype._deleteMessagesContainer=function(){C&&C.parentNode&&(C.parentNode.removeChild(C),C=null)},t.prototype._removeCdkDescribedByReferenceIds=function(t){var e=E(t,"aria-describedby").filter(function(t){return 0!=t.indexOf("cdk-describedby-message")});t.setAttribute("aria-describedby",e.join(" "))},t.prototype._addMessageReference=function(t,e){var i,n,r,o,s=S.get(e);i=t,n="aria-describedby",r=s.messageElement.id,(o=E(i,n)).some(function(t){return t.trim()==r.trim()})||(o.push(r.trim()),i.setAttribute(n,o.join(P))),t.setAttribute("cdk-describedby-host",""),s.referenceCount++},t.prototype._removeMessageReference=function(t,e){var i,n,r,o,s=S.get(e);s.referenceCount--,i=t,n="aria-describedby",r=s.messageElement.id,o=E(i,n).filter(function(t){return t!=r.trim()}),i.setAttribute(n,o.join(P)),t.removeAttribute("cdk-describedby-host")},t.prototype._isElementDescribedByMessage=function(t,e){var i=E(t,"aria-describedby"),n=S.get(e),r=n&&n.messageElement.id;return!!r&&-1!=i.indexOf(r)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},t}();function M(t,e){return t||new O(e)}var R={provide:O,deps:[[new n.G,new n.T,O],a.c],useFactory:M},I=function(){function t(t){var e=this;this._items=t,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new c.a,this._typeaheadSubscription=u.a.EMPTY,this._vertical=!0,this._pressedLetters=[],this.tabOut=new c.a,this.change=new c.a,t.changes.subscribe(function(t){if(e._activeItem){var i=t.toArray().indexOf(e._activeItem);i>-1&&i!==e._activeItemIndex&&(e._activeItemIndex=i)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var e=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(m.a)(function(t){return e._pressedLetters.push(t)}),Object(p.a)(t),Object(d.a)(function(){return e._pressedLetters.length>0}),Object(f.a)(function(){return e._pressedLetters.join("")})).subscribe(function(t){for(var i=e._items.toArray(),n=1;n<i.length+1;n++){var r=(e._activeItemIndex+n)%i.length,o=i[r];if(!o.disabled&&0===o.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(r);break}}e._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case h.o:return void this.tabOut.next();case h.d:if(this._vertical){this.setNextItemActive();break}case h.p:if(this._vertical){this.setPreviousItemActive();break}case h.m:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}case h.i:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=h.a&&e<=h.q||e>=h.r&&e<=h.j)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.updateActiveItemIndex=function(t){this._activeItemIndex=t},t.prototype._setActiveItemByDelta=function(t,e){void 0===e&&(e=this._items.toArray()),this._wrap?this._setActiveInWrapMode(t,e):this._setActiveInDefaultMode(t,e)},t.prototype._setActiveInWrapMode=function(t,e){this._activeItemIndex=(this._activeItemIndex+t+e.length)%e.length,e[this._activeItemIndex].disabled?this._setActiveInWrapMode(t,e):this.setActiveItem(this._activeItemIndex)},t.prototype._setActiveInDefaultMode=function(t,e){this._setActiveItemByIndex(this._activeItemIndex+t,t,e)},t.prototype._setActiveItemByIndex=function(t,e,i){if(void 0===i&&(i=this._items.toArray()),i[t]){for(;i[t].disabled;)if(!i[t+=e])return;this.setActiveItem(t)}},t}(),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.b)(e,t),e.prototype.setActiveItem=function(e){this.activeItem&&this.activeItem.setInactiveStyles(),t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.setActiveStyles()},e}(I),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return Object(l.b)(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(I),k=new n.w("liveAnnouncerElement"),F=function(){function t(t,e){this._document=e,this._liveElement=t||this._createLiveElement()}return t.prototype.announce=function(t,e){var i=this;void 0===e&&(e="polite"),this._liveElement.textContent="",this._liveElement.setAttribute("aria-live",e),setTimeout(function(){return i._liveElement.textContent=t},100)},t.prototype.ngOnDestroy=function(){this._liveElement&&this._liveElement.parentNode&&this._liveElement.parentNode.removeChild(this._liveElement)},t.prototype._createLiveElement=function(){var t=this._document.createElement("div");return t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.G},{type:n.u,args:[k]}]},{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},t}();function N(t,e,i){return t||new F(e,i)}var B={provide:F,deps:[[new n.G,new n.T,F],[new n.G,new n.u(k)],a.c],useFactory:N},V=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,e,i){var r=this;if(e instanceof n.M||(i=e),i=!!i,!this._platform.isBrowser)return Object(g.a)(null);if(this._elementInfo.has(t)){var o=this._elementInfo.get(t);return o.checkChildren=i,o.subject.asObservable()}var s={unlisten:function(){},checkChildren:i,subject:new c.a};this._elementInfo.set(t,s),this._incrementMonitoredElementCount();var a=function(e){return r._onFocus(e,t)},l=function(e){return r._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",a,!0),t.addEventListener("blur",l,!0)}),s.unlisten=function(){t.removeEventListener("focus",a,!0),t.removeEventListener("blur",l,!0)},s.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,i){return t.stopMonitoring(i)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},i=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},n=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=setTimeout(function(){return t._lastTouchTarget=null},650)},r=function(){t._windowFocused=!0,t._windowFocusTimeoutId=setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchstart",n,!Object(s.d)()||{passive:!0,capture:!0}),window.addEventListener("focus",r)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",i,!0),document.removeEventListener("touchstart",n,!Object(s.d)()||{passive:!0,capture:!0}),window.removeEventListener("focus",r),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,i){i?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._origin=t,this._originTimeoutId=setTimeout(function(){return e._origin=null},0)},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var i=this._elementInfo.get(e);i&&(i.checkChildren||e===t.target)&&(this._origin||(this._windowFocused&&this._lastFocusOrigin?this._origin=this._lastFocusOrigin:this._wasCausedByTouch(t)?this._origin="touch":this._origin="program"),this._setClasses(e,this._origin),i.subject.next(this._origin),this._lastFocusOrigin=this._origin,this._origin=null)},t.prototype._onBlur=function(t,e){var i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),i.subject.next(null))},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:n.F},{type:s.a}]},t}(),z=function(){function t(t,e){var i=this;this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new n.r,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef.nativeElement,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(function(t){return i.cdkFocusChange.emit(t)})}return t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._monitorSubscription.unsubscribe()},t.decorators=[{type:n.n,args:[{selector:"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]"}]}],t.ctorParameters=function(){return[{type:n.o},{type:V}]},t.propDecorators={cdkFocusChange:[{type:n.H}]},t}();function U(t,e,i){return t||new V(e,i)}var j={provide:V,deps:[[new n.G,new n.T,V],n.F,s.a],useFactory:U};function G(t){return 0===t.buttons}var W=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[a.b,s.b],declarations:[w,A,z],exports:[w,A,z],providers:[y,x,O,B,R,j]}]}],t.ctorParameters=function(){return[]},t}()},"8kWd":function(t,e,i){"use strict";var n=i("ZN67"),r=4,o=0,s=1,a=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,u=1,h=2,p=29,d=256,f=d+1+p,m=30,g=19,y=2*f+1,_=15,v=16,b=7,x=256,A=16,w=17,P=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(f+2));l(O);var M=new Array(2*m);l(M);var R=new Array(512);l(R);var I=new Array(256);l(I);var D=new Array(p);l(D);var L,k,F,N=new Array(m);function B(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function V(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function z(t){return t<256?R[t]:R[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,i){t.bi_valid>v-i?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>v-t.bi_valid,t.bi_valid+=i-v):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function G(t,e,i){j(t,i[2*e],i[2*e+1])}function W(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function H(t,e,i){var n,r,o=new Array(_+1),s=0;for(n=1;n<=_;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=W(o[a]++,a))}}function X(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<m;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*x]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Y(t){t.bi_valid>8?U(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function q(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function K(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&q(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!q(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function Q(t,e,i){var n,r,o,s,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===n?G(t,r,e):(G(t,(o=I[r])+d+1,e),0!==(s=E[o])&&j(t,r-=D[o],s),G(t,o=z(--n),i),0!==(s=T[o])&&j(t,n-=N[o],s))}while(a<t.last_lit);G(t,x,e)}function Z(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=y,i=0;i<l;i++)0!==o[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)K(t,o,i);r=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],K(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,K(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;for(o=0;o<=_;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<y;i++)(o=l[2*l[2*(n=t.heap[i])+1]+1]+1)>f&&(o=f,m++),l[2*n+1]=o,n>c||(t.bl_count[o]++,s=0,n>=d&&(s=p[n-d]),a=l[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(u[2*n+1]+s)));if(0!==m){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,m-=2}while(m>0);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)(r=t.heap[--i])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),n--)}}(t,e),H(o,c,t.bl_count)}function J(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<l&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*A]++):a<=10?t.bl_tree[2*w]++:t.bl_tree[2*P]++,a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))}function $(t,e,i){var n,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<l&&r===s)){if(a<c)do{G(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(G(t,r,t.bl_tree),a--),G(t,A,t.bl_tree),j(t,a-3,2)):a<=10?(G(t,w,t.bl_tree),j(t,a-3,3)):(G(t,P,t.bl_tree),j(t,a-11,7));a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}}l(N);var tt=!1;function et(t,e,i,r){j(t,(c<<1)+(r?1:0),3),function(t,e,i,r){Y(t),r&&(U(t,i),U(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){tt||(function(){var t,e,i,n,r,o=new Array(_+1);for(i=0,n=0;n<p-1;n++)for(D[n]=i,t=0;t<1<<E[n];t++)I[i++]=n;for(I[i-1]=n,r=0,n=0;n<16;n++)for(N[n]=r,t=0;t<1<<T[n];t++)R[r++]=n;for(r>>=7;n<m;n++)for(N[n]=r<<7,t=0;t<1<<T[n]-7;t++)R[256+r++]=n;for(e=0;e<=_;e++)o[e]=0;for(t=0;t<=143;)O[2*t+1]=8,t++,o[8]++;for(;t<=255;)O[2*t+1]=9,t++,o[9]++;for(;t<=279;)O[2*t+1]=7,t++,o[7]++;for(;t<=287;)O[2*t+1]=8,t++,o[8]++;for(H(O,f+1,o),t=0;t<m;t++)M[2*t+1]=5,M[2*t]=W(t,5);L=new B(O,E,d+1,f,_),k=new B(M,T,0,m,_),F=new B(new Array(0),S,0,g,b)}(),tt=!0),t.l_desc=new V(t.dyn_ltree,L),t.d_desc=new V(t.dyn_dtree,k),t.bl_desc=new V(t.bl_tree,F),t.bi_buf=0,t.bi_valid=0,X(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,i,n){var l,c,p=0;t.level>0?(t.strm.data_type===a&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return s;return o}(t)),Z(t,t.l_desc),Z(t,t.d_desc),p=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),Z(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*C[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=l&&(l=c)):l=c=i+5,i+4<=l&&-1!==e?et(t,e,i,n):t.strategy===r||c===l?(j(t,(u<<1)+(n?1:0),3),Q(t,O,M)):(j(t,(h<<1)+(n?1:0),3),function(t,e,i,n){var r;for(j(t,e-257,5),j(t,i-1,5),j(t,n-4,4),r=0;r<n;r++)j(t,t.bl_tree[2*C[r]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,p+1),Q(t,t.dyn_ltree,t.dyn_dtree)),X(t),n&&Y(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(I[i]+d+1)]++,t.dyn_dtree[2*z(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){j(t,u<<1,3),G(t,x,O),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},"8ofh":function(t,e,i){"use strict";e.a=function(t){return n=t,o};var n,r=i("NePw");function o(){try{return n.apply(this,arguments)}catch(t){return r.a.e=t,r.a}}},"911F":function(t,e,i){"use strict";i.d(e,"a",function(){return g});var n=i("LMZF"),r=i("jk5D"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("4jwp"),c=i("OFGE"),u=i("8Xfy"),h=i("3Czw"),p=i("CZgk"),d=i("j5BN"),f=(n._13(r.e,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[g]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(5120,l.d,l.b,[[3,l.d],n.F,a.a]),n._25(5120,l.g,l.f,[[3,l.g],a.a,n.F]),n._25(4608,c.i,c.i,[l.d,l.g,n.F,o.c]),n._25(5120,c.e,c.k,[[3,c.e],o.c]),n._25(4608,c.h,c.h,[l.g,o.c]),n._25(5120,c.f,c.n,[[3,c.f],o.c]),n._25(4608,c.c,c.c,[c.i,c.e,n.k,c.h,c.f,n.e,n.x,n.F,o.c]),n._25(5120,c.l,c.m,[c.c]),n._25(4608,u.j,u.j,[a.a]),n._25(4608,u.i,u.i,[u.j,n.F,o.c]),n._25(136192,u.e,u.c,[[3,u.e],o.c]),n._25(5120,u.n,u.m,[[3,u.n],[2,u.k],o.c]),n._25(5120,u.h,u.f,[[3,u.h],n.F,a.a]),n._25(4608,h.d,h.d,[a.a]),n._25(135680,h.a,h.a,[h.d,n.F]),n._25(5120,r.b,r.c,[c.c]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(512,p.g,p.g,[]),n._25(512,a.b,a.b,[]),n._25(512,l.c,l.c,[]),n._25(512,c.g,c.g,[]),n._25(256,d.f,!0,[]),n._25(512,d.n,d.n,[[2,d.f]]),n._25(512,u.a,u.a,[]),n._25(512,h.c,h.c,[]),n._25(512,r.e,r.e,[]),n._25(256,r.a,{showDelay:0,hideDelay:0,touchendHideDelay:1500},[])])}),n._14({encapsulation:2,styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:2px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px}@media screen and (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"initial, void, hidden",styles:{type:6,styles:{transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.0, 0.0, 0.2, 1)"},options:null},{type:1,expr:"* => hidden",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}}));function m(t){return n._39(2,[(t()(),n._16(0,0,null,null,3,"div",[["class","mat-tooltip"]],[[2,"mat-tooltip-handset",null],[4,"transform-origin",null],[24,"@state",0]],[[null,"@state.start"],[null,"@state.done"]],function(t,e,i){var n=!0,r=t.component;"@state.start"===e&&(n=!1!==r._animationStart()&&n);"@state.done"===e&&(n=!1!==r._animationDone(i)&&n);return n},null,null)),n._15(1,278528,null,0,o.g,[n.z,n.A,n.o,n.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),n._30(131072,o.a,[n.h]),(t()(),n._37(3,null,["",""]))],function(t,e){t(e,1,0,"mat-tooltip",e.component.tooltipClass)},function(t,e){var i=e.component;t(e,0,0,n._38(e,0,0,n._28(e,2).transform(i._isHandset)).matches,i._transformOrigin,i._visibility),t(e,3,0,i.message)})}var g=n._12("mat-tooltip-component",r.f,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-tooltip-component",[["aria-hidden","true"]],[[4,"zoom",null]],[["body","click"]],function(t,e,i){var r=!0;return"body:click"===e&&(r=!1!==n._28(t,1)._handleBodyInteraction()&&r),r},m,f)),n._15(1,49152,null,0,r.f,[n.h,h.a],null,null)],null,function(t,e){t(e,0,0,"visible"===n._28(e,1)._visibility?1:null)})},{},{},[])},"9WiL":function(t,e,i){"use strict";var n,r=i("LMZF"),o=i("k+Bt"),s=i("xqKW"),a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(Number),c=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u.debug&&console.log(t)},t}(),u=function(){function t(){}return t.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},t.imageHasData=function(t){return!!t.exifdata},t.base64ToArrayBuffer=function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,n=new ArrayBuffer(i),r=new Uint8Array(n),o=0;o<i;o++)r[o]=e.charCodeAt(o);return n},t.objectURLToBlob=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){200!==i.status&&0!==i.status||e(i.response)},i.send()},t.getImageData=function(e,i){function n(n){var r=t.findEXIFinJPEG(n),o=t.findIPTCinJPEG(n);e.exifdata=r||{},e.iptcdata=o||{},i&&i.call(e)}if("src"in e&&e.src)if(/^data:/i.test(e.src))n(t.base64ToArrayBuffer(e.src));else if(/^blob:/i.test(e.src)){var r=new FileReader;r.onload=function(t){n(t.target.result)},t.objectURLToBlob(e.src,function(t){r.readAsArrayBuffer(t)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!==o.status&&0!==o.status)throw"Could not load image";n(o.response)},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(FileReader&&(e instanceof Blob||e instanceof File)){var s=new FileReader;s.onload=function(t){c.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},s.readAsArrayBuffer(e)}},t.findEXIFinJPEG=function(e){var i=new DataView(e);if(c.log("Got file of length "+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return c.log("Not a valid JPEG"),!1;for(var n,r=2,o=e.byteLength;r<o;){if(255!==i.getUint8(r))return c.log("Not a valid marker at offset "+r+", found: "+i.getUint8(r)),!1;if(n=i.getUint8(r+1),c.log(n),225===n)return c.log("Found 0xFFE1 marker"),t.readEXIFData(i,r+4);r+=2+i.getUint16(r+2)}},t.findIPTCinJPEG=function(e){var i=new DataView(e);if(c.log("Got file of length "+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return c.log("Not a valid JPEG"),!1;for(var n,r,o=2,s=e.byteLength;o<s;){if(r=o,56===(n=i).getUint8(r)&&66===n.getUint8(r+1)&&73===n.getUint8(r+2)&&77===n.getUint8(r+3)&&4===n.getUint8(r+4)&&4===n.getUint8(r+5)){var a=i.getUint8(o+7);a%2!=0&&(a+=1),0===a&&(a=4);var l=o+8+a,u=i.getUint16(o+6+a);return t.readIPTCData(e,l,u)}o++}},t.readIPTCData=function(e,i,n){for(var r,o,s,a,l=new DataView(e),c={},u=i;u<i+n;)28===l.getUint8(u)&&2===l.getUint8(u+1)&&(a=l.getUint8(u+2))in t.IptcFieldMap&&((s=l.getInt16(u+3))+5,o=t.IptcFieldMap[a],r=t.getStringFromDB(l,u+5,s),c.hasOwnProperty(o)?c[o]instanceof Array?c[o].push(r):c[o]=[c[o],r]:c[o]=r),u++;return c},t.readTags=function(e,i,n,r,o){for(var s,a,l=e.getUint16(n,!o),u={},h=0;h<l;h++)s=n+12*h+2,(a=r[e.getUint16(s,!o)])||c.log("Unknown tag: "+e.getUint16(s,!o)),u[a]=t.readTagValue(e,s,i,n,o);return u},t.readTagValue=function(e,i,n,r,o){var s,a,c,u,h,p,d=e.getUint16(i+2,!o),f=e.getUint32(i+4,!o),m=e.getUint32(i+8,!o)+n;switch(d){case 1:case 7:if(1===f)return e.getUint8(i+8,!o);for(s=f>4?m:i+8,a=[],u=0;u<f;u++)a[u]=e.getUint8(s+u);return a;case 2:return s=f>4?m:i+8,t.getStringFromDB(e,s,f-1);case 3:if(1===f)return e.getUint16(i+8,!o);for(s=f>2?m:i+8,a=[],u=0;u<f;u++)a[u]=e.getUint16(s+2*u,!o);return a;case 4:if(1===f)return e.getUint32(i+8,!o);for(a=[],u=0;u<f;u++)a[u]=e.getUint32(m+4*u,!o);return a;case 5:if(1===f)return h=e.getUint32(m,!o),p=e.getUint32(m+4,!o),(c=new l(h/p)).numerator=h,c.denominator=p,c;for(a=[],u=0;u<f;u++)h=e.getUint32(m+8*u,!o),p=e.getUint32(m+4+8*u,!o),a[u]=new l(h/p),a[u].numerator=h,a[u].denominator=p;return a;case 9:if(1===f)return e.getInt32(i+8,!o);for(a=[],u=0;u<f;u++)a[u]=e.getInt32(m+4*u,!o);return a;case 10:if(1===f)return e.getInt32(m,!o)/e.getInt32(m+4,!o);for(a=[],u=0;u<f;u++)a[u]=e.getInt32(m+8*u,!o)/e.getInt32(m+4+8*u,!o);return a}},t.getStringFromDB=function(t,e,i){for(var n="",r=e;r<e+i;r++)n+=String.fromCharCode(t.getUint8(r));return n},t.readEXIFData=function(e,i){if("Exif"!==t.getStringFromDB(e,i,4))return c.log("Not valid EXIF data! "+t.getStringFromDB(e,i,4)),!1;var n,r,o,s,a,l=i+6;if(18761===e.getUint16(l))n=!1;else{if(19789!==e.getUint16(l))return c.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!==e.getUint16(l+2,!n))return c.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(l+4,!n);if(u<8)return c.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(l+4,!n)),!1;if((r=t.readTags(e,l,l+u,t.TiffTags,n)).ExifIFDPointer)for(o in s=t.readTags(e,l,l+r.ExifIFDPointer,t.Tags,n))if({}.hasOwnProperty.call(s,o)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[o]=t.StringValues[o][s[o]];break;case"ExifVersion":case"FlashpixVersion":s[o]=String.fromCharCode(s[o][0],s[o][1],s[o][2],s[o][3]);break;case"ComponentsConfiguration":s[o]=t.StringValues.Components[s[o][0]]+t.StringValues.Components[s[o][1]]+t.StringValues.Components[s[o][2]]+t.StringValues.Components[s[o][3]]}r[o]=s[o]}if(r.GPSInfoIFDPointer)for(o in a=t.readTags(e,l,l+r.GPSInfoIFDPointer,t.GPSTags,n))if({}.hasOwnProperty.call(a,o)){switch(o){case"GPSVersionID":a[o]=a[o][0]+"."+a[o][1]+"."+a[o][2]+"."+a[o][3]}r[o]=a[o]}return r},t.getData=function(e,i){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(t.imageHasData(e)?i&&i.call(e):t.getImageData(e,i),!0)},t.getTag=function(e,i){if(t.imageHasData(e))return e.exifdata[i]},t.getAllTags=function(e){if(!t.imageHasData(e))return{};var i,n=e.exifdata,r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r},t.pretty=function(e){if(!t.imageHasData(e))return"";var i,n=e.exifdata,r="";for(i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?n[i]instanceof Number?r+=i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":r+=i+" : ["+n[i].length+" values]\r\n":r+=i+" : "+n[i]+"\r\n");return r},t.readFromBinaryFile=function(e){return t.findEXIFinJPEG(e)},t.debug=!1,t.IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},t}(),h=i("aT7f");i.d(e,"a",function(){return p});var p=function(){function t(t){this.cropPositionChange=new r.r,this.onCrop=new r.r,this.renderer=t}return t.prototype.ngAfterViewInit=function(){var t=this.cropcanvas.nativeElement;this.settings||(this.settings=new s.a),this.renderer.setElementAttribute(t,"class",this.settings.cropperClass),this.settings.dynamicSizing?(this.windowListener=this.resize.bind(this),window.addEventListener("resize",this.windowListener)):(this.renderer.setElementAttribute(t,"width",this.settings.canvasWidth.toString()),this.renderer.setElementAttribute(t,"height",this.settings.canvasHeight.toString())),this.cropper||(this.cropper=new o.a(this.settings)),this.cropper.prepare(t)},t.prototype.ngOnChanges=function(t){if(this.isCropPositionChanged(t)){if(this.cropper.updateCropPosition(this.cropPosition.toBounds()),this.cropper.isImageSet()){var e=this.cropper.getCropBounds();this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(e)}this.updateCropBounds()}t.inputImage&&this.setImage(t.inputImage.currentValue)},t.prototype.ngOnDestroy=function(){this.settings.dynamicSizing&&this.windowListener&&window.removeEventListener("resize",this.windowListener)},t.prototype.onTouchMove=function(t){this.cropper.onTouchMove(t)},t.prototype.onTouchStart=function(t){this.cropper.onTouchStart(t)},t.prototype.onTouchEnd=function(t){this.cropper.onTouchEnd(t),this.cropper.isImageSet()&&(this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseDown=function(t){this.cropper.onMouseDown(t)},t.prototype.onMouseUp=function(t){this.cropper.isImageSet()&&(this.cropper.onMouseUp(t),this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseMove=function(t){this.cropper.onMouseMove(t)},t.prototype.fileChangeListener=function(t){if(0!==t.target.files.length){var e=t.target.files[0];if(this.settings.allowedFilesRegex.test(e.name)){var i=new Image,n=new FileReader,r=this;n.addEventListener("loadend",function(t){i.addEventListener("load",function(){r.setImage(i)}),i.src=t.target.result}),n.readAsDataURL(e)}}},t.prototype.resize=function(){var t=this.cropcanvas.nativeElement;this.settings.canvasWidth=t.offsetWidth,this.settings.canvasHeight=t.offsetHeight,this.cropper.resizeCanvas(t.offsetWidth,t.offsetHeight,!0)},t.prototype.reset=function(){this.cropper.reset(),this.renderer.setElementAttribute(this.cropcanvas.nativeElement,"class",this.settings.cropperClass),this.image.image=this.cropper.getCroppedImageHelper().src},t.prototype.setImage=function(t,e){var i=this;void 0===e&&(e=null);var n=this;this.renderer.setElementAttribute(this.cropcanvas.nativeElement,"class",this.settings.cropperClass+" "+this.settings.croppingClass),this.raf=window.requestAnimationFrame(function(){n.raf&&window.cancelAnimationFrame(n.raf),t.naturalHeight>0&&t.naturalWidth>0&&(t.height=t.naturalHeight,t.width=t.naturalWidth,window.cancelAnimationFrame(n.raf),n.getOrientedImage(t,function(t){if(i.settings.dynamicSizing){var r=i.cropcanvas.nativeElement;i.settings.canvasWidth=r.offsetWidth,i.settings.canvasHeight=r.offsetHeight,i.cropper.resizeCanvas(r.offsetWidth,r.offsetHeight,!1)}n.cropper.setImage(t),n.cropPosition&&n.cropPosition.isInitialized()&&n.cropper.updateCropPosition(n.cropPosition.toBounds()),n.image.original=t;var o=n.cropper.getCropBounds();n.image.image=n.cropper.getCroppedImageHelper().src,null!=e&&(o=e,n.cropper.setBounds(o),i.cropper.updateCropPosition(o)),n.onCrop.emit(o)}))})},t.prototype.isCropPositionChanged=function(t){return!!(this.cropper&&t.cropPosition&&this.isCropPositionUpdateNeeded)||(this.isCropPositionUpdateNeeded=!0,!1)},t.prototype.updateCropBounds=function(){var t=this.cropper.getCropBounds();this.cropPositionChange.emit(new h.a(t.left,t.top,t.width,t.height)),this.isCropPositionUpdateNeeded=!1},t.prototype.getOrientedImage=function(t,e){var i;u.getData(t,function(){var n=u.getTag(t,"Orientation");if([3,6,8].indexOf(n)>-1){var r=document.createElement("canvas"),o=r.getContext("2d"),s=t.width,a=t.height,l=0,c=0,h=0;switch(n){case 3:l=-t.width,c=-t.height,h=180;break;case 6:s=t.height,a=t.width,c=-t.height,h=90;break;case 8:s=t.height,a=t.width,l=-t.width,h=270}r.width=s,r.height=a,o.rotate(h*Math.PI/180),o.drawImage(t,l,c),(i=document.createElement("img")).width=s,i.height=a,i.addEventListener("load",function(){e(i)}),i.src=r.toDataURL("image/png")}else e(i=t)})},t.decorators=[{type:r.j,args:[{selector:"img-cropper",template:'\n        <span class="ng2-imgcrop">\n          <input *ngIf="!settings.noFileInput" type="file" accept="image/*" (change)="fileChangeListener($event)">\n          <canvas #cropcanvas\n                  (mousedown)="onMouseDown($event)"\n                  (mouseup)="onMouseUp($event)"\n                  (mousemove)="onMouseMove($event)"\n                  (mouseleave)="onMouseUp($event)"\n                  (touchmove)="onTouchMove($event)"\n                  (touchend)="onTouchEnd($event)"\n                  (touchstart)="onTouchStart($event)">\n          </canvas>\n        </span>\n      '}]}],t.ctorParameters=function(){return[{type:r.L}]},t.propDecorators={cropcanvas:[{type:r.X,args:["cropcanvas",void 0]}],settings:[{type:r.y,args:["settings"]}],image:[{type:r.y,args:["image"]}],inputImage:[{type:r.y,args:["inputImage"]}],cropper:[{type:r.y}],cropPosition:[{type:r.y}],cropPositionChange:[{type:r.H}],onCrop:[{type:r.H}]},t}()},"9iV4":function(t,e,i){"use strict";var n=i("LMZF"),r=i("GZB0"),o=i("wP3s");function s(t,e){return function(t,e){return Object(o.a)(t,e,1)}(t,e)(this)}var a=i("LaOa");var l=i("dmC+"),c=i("6Xbx"),u=i("Un6q"),h=i("AP4T");i.d(e,"b",function(){return d}),i.d(e,"f",function(){return p}),i.d(e,"c",function(){return C}),i.d(e,"a",function(){return M}),i.d(e,"d",function(){return q}),i.d(e,"e",function(){return Y}),i.d(e,"g",function(){return V}),i.d(e,"i",function(){return N}),i.d(e,"h",function(){return j}),i.d(e,"j",function(){return H}),i.d(e,"k",function(){return B}),i.d(e,"n",function(){return G}),i.d(e,"o",function(){return W}),i.d(e,"l",function(){return z}),i.d(e,"m",function(){return U});var p=function(){return function(){}}(),d=function(){return function(){}}(),f=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var i=t.indexOf(":");if(i>0){var n=t.slice(0,i),r=n.toLowerCase(),o=t.slice(i+1).trim();e.maybeSetNormalizedName(n,r),e.headers.has(r)?e.headers.get(r).push(o):e.headers.set(r,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(i){var n=t[i],r=i.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(e.headers.set(r,n),e.maybeSetNormalizedName(i,r))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(i){e.headers.set(i,t.headers.get(i)),e.normalizedNames.set(i,t.normalizedNames.get(i))})},t.prototype.clone=function(e){var i=new t;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);var n=("a"===t.op?this.headers.get(e):void 0)||[];n.push.apply(n,i),this.headers.set(e,n);break;case"d":var r=t.value;if(r){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===r.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(i){return t(e.normalizedNames.get(i),e.headers.get(i))})},t}(),m=function(){function t(){}return t.prototype.encodeKey=function(t){return g(t)},t.prototype.encodeValue=function(t){return g(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function g(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var y=function(){function t(t){void 0===t&&(t={});var e,i,n,r=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new m,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,i=this.encoder,n=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),r=-1==e?[i.decodeKey(t),""]:[i.decodeKey(t.slice(0,e)),i.decodeValue(t.slice(e+1))],o=r[0],s=r[1],a=n.get(o)||[];a.push(s),n.set(o,a)}),n)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var i=t.fromObject[e];r.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var i=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return i+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var i=new t({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat([e]),i},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var i=("a"===e.op?t.map.get(e.param):void 0)||[];i.push(e.value),t.map.set(e.param,i);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var n=t.map.get(e.param)||[],r=n.indexOf(e.value);-1!==r&&n.splice(r,1),n.length>0?t.map.set(e.param,n):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function _(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function v(t){return"undefined"!=typeof Blob&&t instanceof Blob}function b(t){return"undefined"!=typeof FormData&&t instanceof FormData}var x=function(){function t(t,e,i,n){var r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,r=n):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new f),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var s=e.indexOf("?"),a=-1===s?"?":s<e.length-1?"&":"";this.urlWithParams=e+a+o}}else this.params=new y,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:_(this.body)||v(this.body)||b(this.body)||"string"==typeof this.body?this.body:this.body instanceof y?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:b(this.body)?null:v(this.body)?this.body.type||null:_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof y?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var i=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce(function(t,i){return t.set(i,e.setHeaders[i])},l)),e.setParams&&(c=Object.keys(e.setParams).reduce(function(t,i){return t.set(i,e.setParams[i])},c)),new t(i,n,o,{params:c,headers:l,reportProgress:a,responseType:r,withCredentials:s})},t}(),A={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};A[A.Sent]="Sent",A[A.UploadProgress]="UploadProgress",A[A.ResponseHeader]="ResponseHeader",A[A.DownloadProgress]="DownloadProgress",A[A.Response]="Response",A[A.User]="User";var w=function(){return function(t,e,i){void 0===e&&(e=200),void 0===i&&(i="OK"),this.headers=t.headers||new f,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),P=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.type=A.ResponseHeader,i}return Object(c.b)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(w),E=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.type=A.Response,i.body=void 0!==e.body?e.body:null,i}return Object(c.b)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(w),T=function(t){function e(e){var i=t.call(this,e,0,"Unknown Error")||this;return i.name="HttpErrorResponse",i.ok=!1,i.status>=200&&i.status<300?i.message="Http failure during parsing for "+(e.url||"(unknown url)"):i.message="Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,i.error=e.error||null,i}return Object(c.b)(e,t),e}(w);function S(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var C=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,i){var n,o=this;if(void 0===i&&(i={}),t instanceof x)n=t;else{var c=void 0;c=i.headers instanceof f?i.headers:new f(i.headers);var u=void 0;i.params&&(u=i.params instanceof y?i.params:new y({fromObject:i.params})),n=new x(t,e,void 0!==i.body?i.body:null,{headers:c,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var h=s.call(Object(r.a)(n),function(t){return o.handler.handle(t)});if(t instanceof x||"events"===i.observe)return h;var p=(function(t,e){return Object(a.a)(t,e)(this)}).call(h,function(t){return t instanceof E});switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return l.a.call(p,function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body});case"blob":return l.a.call(p,function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body});case"text":return l.a.call(p,function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body});case"json":default:return l.a.call(p,function(t){return t.body})}case"response":return p;default:throw new Error("Unreachable: unhandled observe type "+i.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new y).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,i){return void 0===i&&(i={}),this.request("PATCH",t,S(i,e))},t.prototype.post=function(t,e,i){return void 0===i&&(i={}),this.request("POST",t,S(i,e))},t.prototype.put=function(t,e,i){return void 0===i&&(i={}),this.request("PUT",t,S(i,e))},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:p}]},t}(),O=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),M=new n.w("HTTP_INTERCEPTORS"),R=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),I=0,D=function(){return function(){}}(),L=function(){function t(t,e){this.callbackMap=t,this.document=e}return t.prototype.nextCallback=function(){return"ng_jsonp_callback_"+I++},t.prototype.handle=function(t){var e=this;if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");return new h.a(function(i){var n=e.nextCallback(),r=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"="+n+"$1"),o=e.document.createElement("script");o.src=r;var s=null,a=!1,l=!1;e.callbackMap[n]=function(t){delete e.callbackMap[n],l||(s=t,a=!0)};var c=function(){o.parentNode&&o.parentNode.removeChild(o),delete e.callbackMap[n]},u=function(t){l||(c(),a?(i.next(new E({body:s,status:200,statusText:"OK",url:r})),i.complete()):i.error(new T({url:r,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")})))},h=function(t){l||(c(),i.error(new T({error:t,status:0,statusText:"JSONP Error",url:r})))};return o.addEventListener("load",u),o.addEventListener("error",h),e.document.body.appendChild(o),i.next({type:A.Sent}),function(){l=!0,o.removeEventListener("load",u),o.removeEventListener("error",h),c()}})},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:D},{type:void 0,decorators:[{type:n.u,args:[u.c]}]}]},t}(),k=function(){function t(t){this.jsonp=t}return t.prototype.intercept=function(t,e){return"JSONP"===t.method?this.jsonp.handle(t):e.handle(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:L}]},t}(),F=/^\)\]\}',?\n/;var N=function(){return function(){}}(),B=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),V=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new h.a(function(i){var n=e.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach(function(t,e){return n.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&n.setRequestHeader("Content-Type",r)}if(t.responseType){var o=t.responseType.toLowerCase();n.responseType="json"!==o?o:"text"}var s=t.serializeBody(),a=null,l=function(){if(null!==a)return a;var e=1223===n.status?204:n.status,i=n.statusText||"OK",r=new f(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return a=new P({headers:r,status:e,statusText:i,url:o})},c=function(){var e=l(),r=e.headers,o=e.status,s=e.statusText,a=e.url,c=null;204!==o&&(c="undefined"==typeof n.response?n.responseText:n.response),0===o&&(o=c?200:0);var u=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(F,"");try{c=""!==c?JSON.parse(c):null}catch(t){c=h,u&&(u=!1,c={error:t,text:c})}}u?(i.next(new E({body:c,headers:r,status:o,statusText:s,url:a||void 0})),i.complete()):i.error(new T({error:c,headers:r,status:o,statusText:s,url:a||void 0}))},u=function(t){var e=new T({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error"});i.error(e)},h=!1,p=function(e){h||(i.next(l()),h=!0);var r={type:A.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),i.next(r)},d=function(t){var e={type:A.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),i.next(e)};return n.addEventListener("load",c),n.addEventListener("error",u),t.reportProgress&&(n.addEventListener("progress",p),null!==s&&n.upload&&n.upload.addEventListener("progress",d)),n.send(s),i.next({type:A.Sent}),function(){n.removeEventListener("error",u),n.removeEventListener("load",c),t.reportProgress&&(n.removeEventListener("progress",p),null!==s&&n.upload&&n.upload.removeEventListener("progress",d)),n.abort()}})},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:N}]},t}(),z=new n.w("XSRF_COOKIE_NAME"),U=new n.w("XSRF_HEADER_NAME"),j=function(){return function(){}}(),G=function(){function t(t,e,i){this.doc=t,this.platform=e,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(u.s)(t,this.cookieName),this.lastCookieString=t),this.lastToken},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[u.c]}]},{type:void 0,decorators:[{type:n.u,args:[n.I]}]},{type:void 0,decorators:[{type:n.u,args:[z]}]}]},t}(),W=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return e.handle(t);var n=this.tokenService.getToken();return null===n||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,n)})),e.handle(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:j},{type:void 0,decorators:[{type:n.u,args:[U]}]}]},t}(),H=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(M,[]);this.chain=e.reduceRight(function(t,e){return new O(t,e)},this.backend)}return this.chain.handle(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:d},{type:n.x}]},t}();function X(){return"object"==typeof window?window:{}}var Y=function(){function t(){}return t.disable=function(){return{ngModule:t,providers:[{provide:W,useClass:R}]}},t.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:z,useValue:e.cookieName}:[],e.headerName?{provide:U,useValue:e.headerName}:[]]}},t.decorators=[{type:n.C,args:[{providers:[W,{provide:M,useExisting:W,multi:!0},{provide:j,useClass:G},{provide:z,useValue:"XSRF-TOKEN"},{provide:U,useValue:"X-XSRF-TOKEN"}]}]}],t.ctorParameters=function(){return[]},t}(),q=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[Y.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})],providers:[C,{provide:p,useClass:H},V,{provide:d,useExisting:V},B,{provide:N,useExisting:B}]}]}],t.ctorParameters=function(){return[]},t}();!function(){function t(){}t.decorators=[{type:n.C,args:[{providers:[L,{provide:D,useFactory:X},{provide:M,useClass:k,multi:!0}]}]}],t.ctorParameters=function(){return[]}}()},A5ts:function(t,e,i){"use strict";var n=i("pPow"),r=i("Rmdh"),o=i("Yuvf"),s=function(){function t(t,e,i){this._operationMode=n.OperationMode.ENABLE,this._valueCheckingMode=n.ValueCheckingMode.ALLOW_OBJECT_NULL,this._ignorePrimitiveChecks=!1,t&&t in n.OperationMode&&(this.operationMode=t),e&&e in n.ValueCheckingMode&&(this.valueCheckingMode=e),i&&(this.ignorePrimitiveChecks=i)}return Object.defineProperty(t.prototype,"operationMode",{get:function(){return this._operationMode},set:function(t){t in n.OperationMode&&(this._operationMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueCheckingMode",{get:function(){return this._valueCheckingMode},set:function(t){t in n.ValueCheckingMode&&(this._valueCheckingMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignorePrimitiveChecks",{get:function(){return this._ignorePrimitiveChecks},set:function(t){this._ignorePrimitiveChecks=t},enumerable:!0,configurable:!0}),t.prototype.serialize=function(t){if(t.constructor===Array)return this.serializeArray(t);if("object"==typeof t)return this.serializeObject(t);throw new Error("Fatal error in JsonConvert. Passed parameter json in JsonConvert.serialize() is not in valid format (object or array).")},t.prototype.serializeObject=function(t){if("object"!=typeof t||t instanceof Array)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.serializeObject() is not of type object.");if(this.operationMode===n.OperationMode.DISABLE)return t;this.operationMode===n.OperationMode.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript instance:"),console.log(t));for(var e={},i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];this.serializeObject_loopProperty(t,o,e)}return this.operationMode===n.OperationMode.LOGGING&&(console.log("Returning JSON object:"),console.log(e),console.log("----------")),e},t.prototype.serializeArray=function(t){if("object"!=typeof t||t instanceof Array==!1)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.serializeArray() is not of type array.");if(this.operationMode===n.OperationMode.DISABLE)return t;this.operationMode===n.OperationMode.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript array:"),console.log(t));for(var e=[],i=0,r=t;i<r.length;i++){var o=r[i];e.push(this.serializeObject(o))}return this.operationMode===n.OperationMode.LOGGING&&(console.log("Returning JSON array:"),console.log(e),console.log("----------")),e},t.prototype.deserialize=function(t,e){if(t.constructor===Array)return this.deserializeArray(t,e);if("object"==typeof t)return this.deserializeObject(t,e);throw new Error("Fatal error in JsonConvert. Passed parameter json in JsonConvert.deserialize() is not in valid JSON format (object or array).")},t.prototype.deserializeObject=function(t,e){if("object"!=typeof t||t instanceof Array)throw new Error("Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is not of type object.");if(this.operationMode===n.OperationMode.DISABLE)return t;this.operationMode===n.OperationMode.LOGGING&&(console.log("----------"),console.log("Receiving JSON object:"),console.log(t));for(var i=new e,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];this.deserializeObject_loopProperty(i,s,t)}return this.operationMode===n.OperationMode.LOGGING&&(console.log("Returning CLASS instance:"),console.log(i),console.log("----------")),i},t.prototype.deserializeArray=function(t,e){if("object"!=typeof t||t instanceof Array==!1)throw new Error("Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeArray() is not of type array.");if(this.operationMode===n.OperationMode.DISABLE)return t;this.operationMode===n.OperationMode.LOGGING&&(console.log("----------"),console.log("Receiving JSON array:"),console.log(t));for(var i=[],r=0,o=t;r<o.length;r++){var s=o[r];i.push(this.deserializeObject(s,e))}return this.operationMode===n.OperationMode.LOGGING&&(console.log("Returning array of CLASS instances:"),console.log(i),console.log("----------")),i},t.prototype.serializeObject_loopProperty=function(t,e,i){var n=this.getClassPropertyMappingOptions(t,e);if(null!==n){var r=n.jsonPropertyName,o=n.expectedJsonType,s=n.isOptional,a=n.customConverter,l=t[e];if("undefined"==typeof l){if(s)return;throw new Error('Fatal error in JsonConvert. Failed to map the JavaScript instance of class "'+t.constructor.name+'" to JSON because the defined class property "'+e+'" does not exist or is not defined:\n\n\tClass property: \n\t\t'+e+"\n\n\tJSON property: \n\t\t"+r+"\n\n")}try{i[r]=null!==a?a.serialize(l):this.verifyProperty(o,l,!0)}catch(i){throw new Error('Fatal error in JsonConvert. Failed to map the JavaScript instance of class "'+t.constructor.name+'" to JSON because of a type error.\n\n\tClass property: \n\t\t'+e+"\n\n\tClass property value: \n\t\t"+l+"\n\n\tExpected type: \n\t\t"+this.getExpectedType(o)+"\n\n\tRuntime type: \n\t\t"+this.getTrueType(l)+"\n\n\tJSON property: \n\t\t"+r+"\n\n"+i.message+"\n")}}},t.prototype.deserializeObject_loopProperty=function(t,e,i){var n=this.getClassPropertyMappingOptions(t,e);if(null!==n){var r=n.jsonPropertyName,o=n.expectedJsonType,s=n.isOptional,a=n.customConverter,l=i[r];if("undefined"==typeof l){if(s)return;throw new Error('Fatal error in JsonConvert. Failed to map the JSON object to the class "'+t.constructor.name+'" because the defined JSON property "'+r+'" does not exist:\n\n\tClass property: \n\t\t'+e+"\n\n\tJSON property: \n\t\t"+r+"\n\n")}try{t[e]=null!==a?a.deserialize(l):this.verifyProperty(o,l)}catch(i){throw new Error('Fatal error in JsonConvert. Failed to map the JSON object to the JavaScript class "'+t.constructor.name+'" because of a type error.\n\n\tClass property: \n\t\t'+e+"\n\n\tExpected type: \n\t\t"+this.getExpectedType(o)+"\n\n\tJSON property: \n\t\t"+r+"\n\n\tJSON type: \n\t\t"+this.getJsonType(l)+"\n\n\tJSON value: \n\t\t"+JSON.stringify(l)+"\n\n"+i.message+"\n\n")}}},t.prototype.getClassPropertyMappingOptions=function(t,e){var i=t[r.Settings.MAPPING_PROPERTY];if("undefined"==typeof i)return null;var n=t.constructor.name+"."+e;if("undefined"!=typeof i[n])return i[n];var o=Object.keys(i).filter(function(t){return t.match("\\."+e+"$")});return o.length>0?i[o[0]]:null},t.prototype.verifyProperty=function(t,e,i){if(t===o.Any||null===t||t===Object)return e;if(t instanceof Array==!1&&e instanceof Array==!1){if("undefined"!=typeof t&&t.hasOwnProperty(r.Settings.MAPPING_PROPERTY)){if(null===e){if(this.valueCheckingMode!==n.ValueCheckingMode.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}return i?this.serializeObject(e):this.deserializeObject(e,t)}if(t===o.Any||null===t||t===Object){if(null===e){if(this.valueCheckingMode!==n.ValueCheckingMode.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}return e}if(t===String||t===Number||t===Boolean){if(null===e){if(this.valueCheckingMode===n.ValueCheckingMode.ALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}if(t===String&&"string"==typeof e||t===Number&&"number"==typeof e||t===Boolean&&"boolean"==typeof e)return e;if(this.ignorePrimitiveChecks)return e;throw new Error("\tReason: Given object does not match the expected primitive type.")}throw new Error("\tReason: Expected type is unknown. There might be multiple reasons for this:\n\t- You are missing the decorator @JsonObject (for object mapping)\n\t- You are missing the decorator @JsonConverter (for custom mapping) before your class definition\n\t- Your given class is undefined in the decorator because of circular dependencies")}if(t instanceof Array&&e instanceof Array){var s=[];if(0===e.length)return s;if(0===t.length)return e;for(var a=t.length<e.length,l=0;l<e.length;l++)a&&l>=t.length&&(t[l]=t[l-1]),s[l]=this.verifyProperty(t[l],e[l],i);return s}if(t instanceof Array&&e instanceof Object){s=[];if(0===e.length)return s;if(0===t.length)return e;a=t.length<Object.keys(e).length,l=0;for(var c in e)a&&l>=t.length&&(t[l]=t[l-1]),s[c]=this.verifyProperty(t[l],e[c]),l++;return s}if(t instanceof Array){if(null===e){if(this.valueCheckingMode!==n.ValueCheckingMode.DISALLOW_NULL)return null;throw new Error("\tReason: Given value is null.")}throw new Error("\tReason: Expected type is array, but given value is non-array.")}if(e instanceof Array)throw new Error("\tReason: Given value is array, but expected a non-array type.");throw new Error("\tReason: Mapping failed because of an unknown error.")},t.prototype.getExpectedType=function(t){var e="";if(t instanceof Array){e="[";for(var i=0;i<t.length;i++)i>0&&(e+=","),e+=this.getExpectedType(t[i]);return e+="]"}return t===o.Any||null===t||t===Object?"any":t===String||t==Boolean||t==Number?(new t).constructor.name.toLowerCase():"function"==typeof t?(new t).constructor.name:void 0===t?"undefined":"?????"},t.prototype.getJsonType=function(t){if(null===t)return"null";var e="";if(t instanceof Array){e="[";for(var i=0;i<t.length;i++)i>0&&(e+=","),e+=this.getJsonType(t[i]);return e+="]"}return typeof t},t.prototype.getTrueType=function(t){return typeof t},t}();e.JsonConvert=s},ABGK:function(t,e,i){"use strict";var n=i("AP4T"),r=i("E9/g"),o=i("8ofh"),s=i("NePw"),a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var l=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,i,n){t.call(this,e),this.keySelector=n,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}return a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=Object(o.a)(this.keySelector)(t))===s.a)return this.destination.error(s.a.e);var i=!1;if(this.hasKey){if((i=Object(o.a)(this.compare)(this.key,e))===s.a)return this.destination.error(s.a.e)}else this.hasKey=!0;!1===Boolean(i)&&(this.key=e,this.destination.next(t))},e}(r.a);n.a.prototype.distinctUntilChanged=function(t,e){return function(t,e){return function(i){return i.lift(new l(t,e))}}(t,e)(this)}},AP4T:function(t,e,i){"use strict";var n=i("xIGM"),r=i("E9/g"),o=i("V7AE"),s=i("grVA");var a=i("mz3w"),l=i("ExCY");i.d(e,"a",function(){return c});var c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,a=function(t,e,i){if(t){if(t instanceof r.a)return t;if(t[o.a])return t[o.a]()}return t||e||i?new r.a(t,e,i):new r.a(s.a)}(t,e,i);if(n?n.call(a,this.source):a.add(this.source||!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var i=this;if(e||(n.a.Rx&&n.a.Rx.config&&n.a.Rx.config.Promise?e=n.a.Rx.config.Promise:n.a.Promise&&(e=n.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;r=i.subscribe(function(e){if(r)try{t(e)}catch(t){n(t),r.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:Object(l.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(n.a.Rx&&n.a.Rx.config&&n.a.Rx.config.Promise?t=n.a.Rx.config.Promise:n.a.Promise&&(t=n.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,i){var n;e.subscribe(function(t){return n=t},function(t){return i(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}()},B1iP:function(t,e,i){"use strict";e.a=function(t){return"function"==typeof t}},C7jF:function(t,e,i){"use strict";t.exports=o;var n=i("dJzE"),r=i("VIKU");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),this._transformState={afterTransform:(function(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}).bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){a(t,e,i)}):a(this,null,null)}function a(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i("lDCR"),r.inherits(o,n),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},CDvF:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},CZgk:function(t,e,i){"use strict";i.d(e,"d",function(){return a}),i.d(e,"h",function(){return l}),i.d(e,"a",function(){return c}),i.d(e,"e",function(){return u}),i.d(e,"b",function(){return h}),i.d(e,"c",function(){return p}),i.d(e,"g",function(){return d}),i.d(e,"f",function(){return f});var n=i("6Xbx"),r=i("LMZF");function o(){throw Error("Host already has a portal attached")}var s=function(){function t(){}return t.prototype.attach=function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&o(),this._attachedHost=t,t.attach(this)},t.prototype.detach=function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())},Object.defineProperty(t.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),t.prototype.setAttachedHost=function(t){this._attachedHost=t},t}(),a=function(t){function e(e,i,n){var r=t.call(this)||this;return r.component=e,r.viewContainerRef=i,r.injector=n,r}return Object(n.b)(e,t),e}(s),l=function(t){function e(e,i,n){var r=t.call(this)||this;return r.templateRef=e,r.viewContainerRef=i,r.context=n,r}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"origin",{get:function(){return this.templateRef.elementRef},enumerable:!0,configurable:!0}),e.prototype.attach=function(e,i){return void 0===i&&(i=this.context),this.context=i,t.prototype.attach.call(this,e)},e.prototype.detach=function(){return this.context=void 0,t.prototype.detach.call(this)},e}(s),c=function(){function t(){this._isDisposed=!1}return t.prototype.hasAttached=function(){return!!this._attachedPortal},t.prototype.attach=function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&o(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof a?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof l?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()},t.prototype.detach=function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()},t.prototype.dispose=function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0},t.prototype.setDisposeFn=function(t){this._disposeFn=t},t.prototype._invokeDisposeFn=function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)},t}(),u=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.outletElement=e,o._componentFactoryResolver=i,o._appRef=n,o._defaultInjector=r,o}return Object(n.b)(e,t),e.prototype.attachComponentPortal=function(t){var e,i=this,n=this._componentFactoryResolver.resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.parentInjector),this.setDisposeFn(function(){return e.destroy()})):(e=n.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn(function(){i._appRef.detachView(e.hostView),e.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(e)),e},e.prototype.attachTemplatePortal=function(t){var e=this,i=t.viewContainerRef,n=i.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(function(t){return e.outletElement.appendChild(t)}),this.setDisposeFn(function(){var t=i.indexOf(n);-1!==t&&i.remove(t)}),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype._getComponentRootNode=function(t){return t.hostView.rootNodes[0]},e}(c),h=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(n.b)(e,t),e.decorators=[{type:r.n,args:[{selector:"[cdk-portal], [cdkPortal], [portal]",exportAs:"cdkPortal"}]}],e.ctorParameters=function(){return[{type:r.U},{type:r.Z}]},e}(l),p=function(t){function e(e,i){var n=t.call(this)||this;return n._componentFactoryResolver=e,n._viewContainerRef=i,n._isInitialized=!1,n.attached=new r.r,n}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"_deprecatedPortal",{get:function(){return this.portal},set:function(t){this.portal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_deprecatedPortalHost",{get:function(){return this.portal},set:function(t){this.portal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"portal",{get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&t.prototype.detach.call(this),e&&t.prototype.attach.call(this,e),this._attachedPortal=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachedRef",{get:function(){return this._attachedRef},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._isInitialized=!0},e.prototype.ngOnDestroy=function(){t.prototype.dispose.call(this),this._attachedPortal=null,this._attachedRef=null},e.prototype.attachComponentPortal=function(e){e.setAttachedHost(this);var i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=this._componentFactoryResolver.resolveComponentFactory(e.component),r=i.createComponent(n,i.length,e.injector||i.parentInjector);return t.prototype.setDisposeFn.call(this,function(){return r.destroy()}),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r},e.prototype.attachTemplatePortal=function(e){var i=this;e.setAttachedHost(this);var n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return t.prototype.setDisposeFn.call(this,function(){return i._viewContainerRef.clear()}),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n},e.decorators=[{type:r.n,args:[{selector:"[cdkPortalOutlet], [cdkPortalHost], [portalHost]",exportAs:"cdkPortalOutlet, cdkPortalHost",inputs:["portal: cdkPortalOutlet"]}]}],e.ctorParameters=function(){return[{type:r.k},{type:r.Z}]},e.propDecorators={_deprecatedPortal:[{type:r.y,args:["portalHost"]}],_deprecatedPortalHost:[{type:r.y,args:["cdkPortalHost"]}],attached:[{type:r.H,args:["attached"]}]},e}(c),d=function(){function t(){}return t.decorators=[{type:r.C,args:[{exports:[h,p],declarations:[h,p]}]}],t.ctorParameters=function(){return[]},t}(),f=function(){function t(t,e){this._parentInjector=t,this._customTokens=e}return t.prototype.get=function(t,e){var i=this._customTokens.get(t);return"undefined"!=typeof i?i:this._parentInjector.get(t,e)},t}()},E4vQ:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"E9/g":function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("B1iP"),r=i("qLnt"),o=i("grVA"),s=i("V7AE"),a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=function(t){function e(i,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o.a;break;case 1:if(!i){this.destination=o.a;break}if("object"==typeof i){i instanceof e?(this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,i,n,r)}}return a(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,i,n){var r=new e(t,i,n);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(r.a),c=function(t){function e(e,i,r,s){var a;t.call(this),this._parentSubscriber=e;var l=this;Object(n.a)(i)?a=i:i&&(a=i.next,r=i.error,s=i.complete,i!==o.a&&(l=Object.create(i),Object(n.a)(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=a,this._error=r,this._complete=s}return a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,i){try{e.call(this._context,i)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},EJO3:function(t,e,i){t.exports=i("Osec").Transform},ESfO:function(t,e,i){"use strict";i.d(e,"a",function(){return u}),e.b=h;var n=i("LMZF"),r=i("ghl+"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("8Xfy"),c=i("j5BN"),u=(n._13(r.c,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(4608,l.j,l.j,[a.a]),n._25(4608,l.i,l.i,[l.j,n.F,o.c]),n._25(136192,l.e,l.c,[[3,l.e],o.c]),n._25(5120,l.n,l.m,[[3,l.n],[2,l.k],o.c]),n._25(5120,l.h,l.f,[[3,l.h],n.F,a.a]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(256,c.f,!0,[]),n._25(512,c.n,c.n,[[2,c.f]]),n._25(512,a.b,a.b,[]),n._25(512,c.y,c.y,[]),n._25(512,l.a,l.a,[]),n._25(512,r.c,r.c,[])])}),n._14({encapsulation:2,styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}}));function h(t){return n._39(2,[n._35(402653184,1,{ripple:0}),(t()(),n._16(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),n._27(null,0),(t()(),n._16(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),n._15(4,212992,[[1,4]],0,c.x,[n.o,n.F,a.a,[2,c.m]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),n._16(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(t,e){var i=e.component;t(e,4,0,i._isIconButton,i._isRippleDisabled(),i._getHostElement())},function(t,e){var i=e.component;t(e,3,0,i._isRoundButton||i._isIconButton,n._28(e,4).unbounded)})}n._12("button[mat-button], button[mat-raised-button], button[mat-icon-button],\n             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],\n             button[mat-flat-button]",r.b,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"button",[["mat-button",""]],[[8,"disabled",0]],null,null,h,u)),n._15(1,180224,null,0,r.b,[n.o,a.a,l.h],null,null)],null,function(t,e){t(e,0,0,n._28(e,1).disabled||null)})},{disabled:"disabled",disableRipple:"disableRipple",color:"color"},{},["*"]);var p=n._14({encapsulation:2,styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function d(t){return n._39(2,[n._35(402653184,1,{ripple:0}),(t()(),n._16(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),n._27(null,0),(t()(),n._16(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),n._15(4,212992,[[1,4]],0,c.x,[n.o,n.F,a.a,[2,c.m]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),n._16(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(t,e){var i=e.component;t(e,4,0,i._isIconButton,i._isRippleDisabled(),i._getHostElement())},function(t,e){var i=e.component;t(e,3,0,i._isRoundButton||i._isIconButton,n._28(e,4).unbounded)})}n._12("a[mat-button], a[mat-raised-button], a[mat-icon-button], a[mat-fab],\n             a[mat-mini-fab], a[mat-stroked-button], a[mat-flat-button]",r.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"a",[["mat-button",""]],[[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0]],[[null,"click"]],function(t,e,i){var r=!0;return"click"===e&&(r=!1!==n._28(t,1)._haltDisabledEvents(i)&&r),r},d,p)),n._15(1,180224,null,0,r.a,[a.a,l.h,n.o],null,null)],null,function(t,e){t(e,0,0,n._28(e,1).disabled?-1:0,n._28(e,1).disabled||null,n._28(e,1).disabled.toString())})},{disabled:"disabled",disableRipple:"disableRipple",color:"color"},{},["*"])},"Ecq+":function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("AP4T"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n.a)},EsP8:function(t,e,i){(function(e,n,r){var o;o=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=86)}([function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.unreachable=i.warn=i.utf8StringToString=i.stringToUTF8String=i.stringToPDFString=i.stringToBytes=i.string32=i.shadow=i.setVerbosityLevel=i.ReadableStream=i.removeNullCharacters=i.readUint32=i.readUint16=i.readInt8=i.log2=i.loadJpegStream=i.isEvalSupported=i.isLittleEndian=i.createValidAbsoluteUrl=i.isSameOrigin=i.isNodeJS=i.isSpace=i.isString=i.isNum=i.isInt=i.isEmptyObj=i.isBool=i.isArrayBuffer=i.isArray=i.info=i.getVerbosityLevel=i.getLookupTableFactory=i.deprecated=i.createObjectURL=i.createPromiseCapability=i.createBlob=i.bytesToString=i.assert=i.arraysToBytes=i.arrayByteLength=i.FormatError=i.XRefParseException=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.StreamType=i.StatTimer=i.PasswordResponses=i.PasswordException=i.PageViewport=i.NotImplementedException=i.NativeImageDecoding=i.MissingPDFException=i.MissingDataException=i.MessageHandler=i.InvalidPDFException=i.AbortException=i.CMapCompressionType=i.ImageKind=i.FontType=i.AnnotationType=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationBorderStyleType=i.UNSUPPORTED_FEATURES=i.VERBOSITY_LEVELS=i.OPS=i.IDENTITY_MATRIX=i.FONT_IDENTITY_MATRIX=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(87);var o=n(88),s={errors:0,warnings:1,infos:5},a=s.warnings;function l(t){a>=s.warnings&&console.log("Warning: "+t)}function c(t){throw new Error(t)}function u(t,e){t||c(e)}var h=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}(),p=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}(),d=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),f=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),m=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}(),g=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t,t}(),y=function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}return t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t,t}(),_=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t,t}(),v=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="FormatError",t.constructor=t,t}(),b=function(){function t(t){this.name="AbortException",this.message=t}return t.prototype=new Error,t.constructor=t,t}(),x=/\x00/g;function A(t){u("string"==typeof t,"Invalid argument for stringToBytes");for(var e=t.length,i=new Uint8Array(e),n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function w(t){return void 0!==t.length?t.length:(u(void 0!==t.byteLength),t.byteLength)}var P=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];t.makeCssRgb=function(t,i,n){return e[1]=t,e[3]=i,e[5]=n,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]},t.getAxialAlignedBoundingBox=function(e,i){var n=t.applyTransform(e,i),r=t.applyTransform(e.slice(2,4),i),o=t.applyTransform([e[0],e[3]],i),s=t.applyTransform([e[2],e[1]],i);return[Math.min(n[0],r[0],o[0],s[0]),Math.min(n[1],r[1],o[1],s[1]),Math.max(n[0],r[0],o[0],s[0]),Math.max(n[1],r[1],o[1],s[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],s=(i+o)/2,a=Math.sqrt((i+o)*(i+o)-4*(i*o-r*n))/2,l=s+a||1,c=s-a||1;return[Math.sqrt(l),Math.sqrt(c)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,i){function n(t,e){return t-e}var r=[e[0],e[2],i[0],i[2]].sort(n),o=[e[1],e[3],i[1],i[3]].sort(n),s=[];return e=t.normalizeRect(e),i=t.normalizeRect(i),(r[0]===e[0]&&r[1]===i[0]||r[0]===i[0]&&r[1]===e[0])&&(s[0]=r[1],s[2]=r[2],(o[0]===e[1]&&o[1]===i[1]||o[0]===i[1]&&o[1]===e[1])&&(s[1]=o[1],s[3]=o[2],s))},t.sign=function(t){return t<0?-1:1};var i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return t.toRoman=function(t,e){u(S(t)&&t>0,"The number should be a positive integer.");for(var n,r=[];t>=1e3;)t-=1e3,r.push("M");n=t/100|0,t%=100,r.push(i[n]),n=t/10|0,t%=10,r.push(i[10+n]),r.push(i[20+t]);var o=r.join("");return e?o.toLowerCase():o},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var i in e)t[i]=e[i]},t.getInheritableProperty=function(t,e,i){for(;t&&!t.has(e);)t=t.get("Parent");return t?i?t.getArray(e):t.get(e):null},t.inherit=function(t,e,i){for(var n in t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i)t.prototype[n]=i[n]},t.loadScript=function(t,e){var i=document.createElement("script"),n=!1;i.setAttribute("src",t),e&&(i.onload=function(){n||e(),n=!0}),document.getElementsByTagName("head")[0].appendChild(i)},t}(),E=function(){function t(t,e,i,n,r,o){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=r;var s,a,l,c,u,h,p,d,f=(t[2]+t[0])/2,m=(t[3]+t[1])/2;switch(i=(i%=360)<0?i+360:i){case 180:s=-1,a=0,l=0,c=1;break;case 90:s=0,a=1,l=1,c=0;break;case 270:s=0,a=-1,l=-1,c=0;break;default:s=1,a=0,l=0,c=-1}o&&(l=-l,c=-c),0===s?(u=Math.abs(m-t[1])*e+n,h=Math.abs(f-t[0])*e+r,p=Math.abs(t[3]-t[1])*e,d=Math.abs(t[2]-t[0])*e):(u=Math.abs(f-t[0])*e+n,h=Math.abs(m-t[1])*e+r,p=Math.abs(t[2]-t[0])*e,d=Math.abs(t[3]-t[1])*e),this.transform=[s*e,a*e,l*e,c*e,u-s*e*f-l*e*m,h-a*e*f-c*e*m],this.width=p,this.height=d,this.fontScale=e}return t.prototype={clone:function(e){var i="scale"in(e=e||{})?e.scale:this.scale,n="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),i,n,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function(t,e){return P.applyTransform([t,e],this.transform)},convertToViewportRectangle:function(t){var e=P.applyTransform([t[0],t[1]],this.transform),i=P.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]},convertToPdfPoint:function(t,e){return P.applyInverseTransform([t,e],this.transform)}},t}(),T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function S(t){return"number"==typeof t&&(0|t)===t}function C(){var t={};return t.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),t}var O,M=function(){function t(t,e,i){for(;t.length<i;)t+=e;return t}function e(){this.started=Object.create(null),this.times=[],this.enabled=!0}return e.prototype={time:function(t){this.enabled&&(t in this.started&&l("Timer is already running for "+t),this.started[t]=Date.now())},timeEnd:function(t){this.enabled&&(t in this.started||l("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])},toString:function(){var e,i,n=this.times,r="",o=0;for(e=0,i=n.length;e<i;++e){var s=n[e].name;s.length>o&&(o=s.length)}for(e=0,i=n.length;e<i;++e){var a=n[e],l=a.end-a.start;r+=t(a.name," ",o)+" "+l+"ms\n"}return r}},e}(),R=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});throw new Error('The "Blob" constructor is not supported.')},I=(O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(t,e){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&URL.createObjectURL){var i=R(t,e);return URL.createObjectURL(i)}for(var n="data:"+e+";base64,",r=0,o=t.length;r<o;r+=3){var s=255&t[r],a=255&t[r+1],l=255&t[r+2];n+=O[s>>2]+O[(3&s)<<4|a>>4]+O[r+1<o?(15&a)<<2|l>>6:64]+O[r+2<o?63&l:64]}return n});function D(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?new Promise(function(n,r){n(t.apply(i,e))}):Promise.resolve(void 0)}function L(t){if("object"!==("undefined"==typeof t?"undefined":r(t)))return t;switch(t.name){case"AbortException":return new b(t.message);case"MissingPDFException":return new f(t.message);case"UnexpectedResponseException":return new m(t.message,t.status);default:return new p(t.message,t.details)}}function k(t,e,i){e?t.resolve():t.reject(i)}function F(t,e,i){var n=this;this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var r=this.callbacksCapabilities=Object.create(null),o=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===n.sourceName)if(e.stream)n._processStreamMessage(e);else if(e.isReply){var s=e.callbackId;if(!(e.callbackId in r))throw new Error("Cannot resolve callback "+s);var a=r[s];delete r[s],"error"in e?a.reject(L(e.error)):a.resolve(e.data)}else{if(!(e.action in o))throw new Error("Unknown action from worker: "+e.action);var l=o[e.action];if(e.callbackId){var c=n.sourceName,u=e.sourceName;Promise.resolve().then(function(){return l[0].call(l[1],e.data)}).then(function(t){i.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,data:t})},function(t){t instanceof Error&&(t+=""),i.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,error:t})})}else e.streamId?n._createStreamSink(e):l[0].call(l[1],e.data)}},i.addEventListener("message",this._onComObjOnMessage)}F.prototype={on:function(t,e,i){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'+t+'"');n[t]=[e,i]},send:function(t,e,i){var n={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e};this.postMessage(n,i)},sendWithPromise:function(t,e,i){var n=this.callbackId++,r={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e,callbackId:n},o=C();this.callbacksCapabilities[n]=o;try{this.postMessage(r,i)}catch(t){o.reject(t)}return o.promise},sendWithStream:function(t,e,i,n){var r=this,s=this.streamId++,a=this.sourceName,l=this.targetName;return new o.ReadableStream({start:function(i){var n=C();return r.streamControllers[s]={controller:i,startCall:n,isClosed:!1},r.postMessage({sourceName:a,targetName:l,action:t,streamId:s,data:e,desiredSize:i.desiredSize}),n.promise},pull:function(t){var e=C();return r.streamControllers[s].pullCall=e,r.postMessage({sourceName:a,targetName:l,stream:"pull",streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:function(t){var e=C();return r.streamControllers[s].cancelCall=e,r.streamControllers[s].isClosed=!0,r.postMessage({sourceName:a,targetName:l,stream:"cancel",reason:t,streamId:s}),e.promise}},i)},_createStreamSink:function(t){var e=this,i=this,n=this.actionHandler[t.action],r=t.streamId,o=t.desiredSize,s=this.sourceName,a=t.sourceName,l=C(),c=function(t){var i=t.stream,n=t.chunk,o=t.transfers,l=t.success,c=t.reason;e.postMessage({sourceName:s,targetName:a,stream:i,streamId:r,chunk:n,success:l,reason:c},o)},u={enqueue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments[2];if(!this.isCancelled){var n=this.desiredSize;this.desiredSize-=e,n>0&&this.desiredSize<=0&&(this.sinkCapability=C(),this.ready=this.sinkCapability.promise),c({stream:"enqueue",chunk:t,transfers:i})}},close:function(){this.isCancelled||(this.isCancelled=!0,c({stream:"close"}),delete i.streamSinks[r])},error:function(t){this.isCancelled||(this.isCancelled=!0,c({stream:"error",reason:t}))},sinkCapability:l,onPull:null,onCancel:null,isCancelled:!1,desiredSize:o,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[r]=u,D(n[0],[t.data,u],n[1]).then(function(){c({stream:"start_complete",success:!0})},function(t){c({stream:"start_complete",success:!1,reason:t})})},_processStreamMessage:function(t){var e=this,i=this.sourceName,n=t.sourceName,r=t.streamId,o=function(t){var o=t.stream,s=t.success,a=t.reason;e.comObj.postMessage({sourceName:i,targetName:n,stream:o,success:s,streamId:r,reason:a})},s=function(){Promise.all([e.streamControllers[t.streamId].startCall,e.streamControllers[t.streamId].pullCall,e.streamControllers[t.streamId].cancelCall].map(function(t){return t&&(e=t.promise,Promise.resolve(e).catch(function(){}));var e})).then(function(){delete e.streamControllers[t.streamId]})};switch(t.stream){case"start_complete":k(this.streamControllers[t.streamId].startCall,t.success,L(t.reason));break;case"pull_complete":k(this.streamControllers[t.streamId].pullCall,t.success,L(t.reason));break;case"pull":if(!this.streamSinks[t.streamId]){o({stream:"pull_complete",success:!0});break}this.streamSinks[t.streamId].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[t.streamId].sinkCapability.resolve(),this.streamSinks[t.streamId].desiredSize=t.desiredSize,D(this.streamSinks[t.streamId].onPull).then(function(){o({stream:"pull_complete",success:!0})},function(t){o({stream:"pull_complete",success:!1,reason:t})});break;case"enqueue":u(this.streamControllers[t.streamId],"enqueue should have stream controller"),this.streamControllers[t.streamId].isClosed||this.streamControllers[t.streamId].controller.enqueue(t.chunk);break;case"close":if(u(this.streamControllers[t.streamId],"close should have stream controller"),this.streamControllers[t.streamId].isClosed)break;this.streamControllers[t.streamId].isClosed=!0,this.streamControllers[t.streamId].controller.close(),s();break;case"error":u(this.streamControllers[t.streamId],"error should have stream controller"),this.streamControllers[t.streamId].controller.error(L(t.reason)),s();break;case"cancel_complete":k(this.streamControllers[t.streamId].cancelCall,t.success,L(t.reason)),s();break;case"cancel":if(!this.streamSinks[t.streamId])break;D(this.streamSinks[t.streamId].onCancel,[L(t.reason)]).then(function(){o({stream:"cancel_complete",success:!0})},function(t){o({stream:"cancel_complete",success:!1,reason:t})}),this.streamSinks[t.streamId].sinkCapability.reject(L(t.reason)),this.streamSinks[t.streamId].isCancelled=!0,delete this.streamSinks[t.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},i.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],i.IDENTITY_MATRIX=[1,0,0,1,0,0],i.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},i.VERBOSITY_LEVELS=s,i.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},i.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},i.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},i.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},i.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},i.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},i.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},i.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},i.AbortException=b,i.InvalidPDFException=d,i.MessageHandler=F,i.MissingDataException=y,i.MissingPDFException=f,i.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},i.NotImplementedException=g,i.PageViewport=E,i.PasswordException=h,i.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},i.StatTimer=M,i.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},i.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},i.UnexpectedResponseException=m,i.UnknownErrorException=p,i.Util=P,i.XRefParseException=_,i.FormatError=v,i.arrayByteLength=w,i.arraysToBytes=function(t){if(1===t.length&&t[0]instanceof Uint8Array)return t[0];var e,i,n,r=0,o=t.length;for(e=0;e<o;e++)r+=n=w(i=t[e]);var s=0,a=new Uint8Array(r);for(e=0;e<o;e++)(i=t[e])instanceof Uint8Array||(i="string"==typeof i?A(i):new Uint8Array(i)),n=i.byteLength,a.set(i,s),s+=n;return a},i.assert=u,i.bytesToString=function(t){u(null!==t&&"object"===("undefined"==typeof t?"undefined":r(t))&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var i=[],n=0;n<e;n+=8192){var o=Math.min(n+8192,e),s=t.subarray(n,o);i.push(String.fromCharCode.apply(null,s))}return i.join("")},i.createBlob=R,i.createPromiseCapability=C,i.createObjectURL=I,i.deprecated=function(t){console.log("Deprecated API usage: "+t)},i.getLookupTableFactory=function(t){var e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},i.getVerbosityLevel=function(){return a},i.info=function(t){a>=s.infos&&console.log("Info: "+t)},i.isArray=function(t){return t instanceof Array},i.isArrayBuffer=function(t){return"object"===("undefined"==typeof t?"undefined":r(t))&&null!==t&&void 0!==t.byteLength},i.isBool=function(t){return"boolean"==typeof t},i.isEmptyObj=function(t){for(var e in t)return!1;return!0},i.isInt=S,i.isNum=function(t){return"number"==typeof t},i.isString=function(t){return"string"==typeof t},i.isSpace=function(t){return 32===t||9===t||13===t||10===t},i.isNodeJS=function(){return"object"===("undefined"==typeof e?"undefined":r(e))&&e+""=="[object process]"},i.isSameOrigin=function(t,e){try{var i=new URL(t);if(!i.origin||"null"===i.origin)return!1}catch(t){return!1}var n=new URL(e,i);return i.origin===n.origin},i.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{var i=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(t){}return null},i.isLittleEndian=function(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]},i.isEvalSupported=function(){try{return new Function(""),!0}catch(t){return!1}},i.loadJpegStream=function(t,e,i){var n=new Image;n.onload=function(){i.resolve(t,n)},n.onerror=function(){i.resolve(t,null),l("Error during JPEG image loading")},n.src=e},i.log2=function(t){for(var e=1,i=0;t>e;)e<<=1,i++;return i},i.readInt8=function(t,e){return t[e]<<24>>24},i.readUint16=function(t,e){return t[e]<<8|t[e+1]},i.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},i.removeNullCharacters=function(t){return"string"!=typeof t?(l("The argument for removeNullCharacters must be a string."),t):t.replace(x,"")},i.ReadableStream=o.ReadableStream,i.setVerbosityLevel=function(t){a=t},i.shadow=function(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i},i.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},i.stringToBytes=A,i.stringToPDFString=function(t){var e,i=t.length,n=[];if("\xfe"===t[0]&&"\xff"===t[1])for(e=2;e<i;e+=2)n.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<i;++e){var r=T[t.charCodeAt(e)];n.push(r?String.fromCharCode(r):t.charAt(e))}return n.join("")},i.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},i.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},i.warn=l,i.unreachable=c},function(t,e,i){"use strict";var n=i(48)("wks"),r=i(13),o=i(2).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,i){"use strict";t.exports=!i(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(8),r=i(18);t.exports=i(3)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){"use strict";var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,i){"use strict";var n=i(11),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.getDefaultSetting=e.LinkTarget=e.getFilenameFromUrl=e.isValidUrl=e.isExternalLinkTargetSet=e.addLinkAttributes=e.RenderingCancelledException=e.CustomStyle=void 0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),s=i(14),a=(n=s)&&n.__esModule?n:{default:n};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c="noopener noreferrer nofollow",u=function(){function t(){l(this,t)}return r(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("invalid canvas size");var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=t,i.height=e,{canvas:i,context:n}}},{key:"reset",value:function(t,e,i){if(!t.canvas)throw new Error("canvas is not specified");if(e<=0||i<=0)throw new Error("invalid canvas size");t.canvas.width=e,t.canvas.height=i}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}]),t}(),h=function(){function t(e){var i=e.baseUrl,n=void 0===i?null:i,r=e.isCompressed,o=void 0!==r&&r;l(this,t),this.baseUrl=n,this.isCompressed=o}return r(t,[{key:"fetch",value:function(t){var e=this,i=t.name;return i?new Promise(function(t,n){var r=e.baseUrl+i+(e.isCompressed?".bcmap":""),s=new XMLHttpRequest;s.open("GET",r,!0),e.isCompressed&&(s.responseType="arraybuffer"),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE){if(200===s.status||0===s.status){var i=void 0;if(e.isCompressed&&s.response?i=new Uint8Array(s.response):!e.isCompressed&&s.responseText&&(i=(0,o.stringToBytes)(s.responseText)),i)return void t({cMapData:i,compressionType:e.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE})}n(new Error("Unable to load "+(e.isCompressed?"binary ":"")+"CMap at: "+r))}},s.send(null)}):Promise.reject(new Error("CMap name must be specified."))}}]),t}(),p=function(){var t=["ms","Moz","Webkit","O"],e=Object.create(null);function i(){}return i.getProp=function(i,n){if(1===arguments.length&&"string"==typeof e[i])return e[i];var r,o,s=(n=n||document.documentElement).style;if("string"==typeof s[i])return e[i]=i;o=i.charAt(0).toUpperCase()+i.slice(1);for(var a=0,l=t.length;a<l;a++)if("string"==typeof s[r=t[a]+o])return e[i]=r;return e[i]="undefined"},i.setProp=function(t,e,i){var n=this.getProp(t);"undefined"!==n&&(e.style[n]=i)},i}(),d=function(){function t(t,e){this.message=t,this.type=e}return t.prototype=new Error,t.prototype.name="RenderingCancelledException",t.constructor=t,t}(),f={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},m=["","_self","_blank","_parent","_top"];function g(t){var e=a.default.PDFJS;switch(t){case"pdfBug":return!!e&&e.pdfBug;case"disableAutoFetch":return!!e&&e.disableAutoFetch;case"disableStream":return!!e&&e.disableStream;case"disableRange":return!!e&&e.disableRange;case"disableFontFace":return!!e&&e.disableFontFace;case"disableCreateObjectURL":return!!e&&e.disableCreateObjectURL;case"disableWebGL":return!e||e.disableWebGL;case"cMapUrl":return e?e.cMapUrl:null;case"cMapPacked":return!!e&&e.cMapPacked;case"postMessageTransfers":return!e||e.postMessageTransfers;case"workerPort":return e?e.workerPort:null;case"workerSrc":return e?e.workerSrc:null;case"disableWorker":return!!e&&e.disableWorker;case"maxImageSize":return e?e.maxImageSize:-1;case"imageResourcesPath":return e?e.imageResourcesPath:"";case"isEvalSupported":return!e||e.isEvalSupported;case"externalLinkTarget":if(!e)return f.NONE;switch(e.externalLinkTarget){case f.NONE:case f.SELF:case f.BLANK:case f.PARENT:case f.TOP:return e.externalLinkTarget}return(0,o.warn)("PDFJS.externalLinkTarget is invalid: "+e.externalLinkTarget),e.externalLinkTarget=f.NONE,f.NONE;case"externalLinkRel":return e?e.externalLinkRel:c;case"enableStats":return!(!e||!e.enableStats);case"pdfjsNext":return!(!e||!e.pdfjsNext);default:throw new Error("Unknown default setting: "+t)}}e.CustomStyle=p,e.RenderingCancelledException=d,e.addLinkAttributes=function(t,e){var i=e&&e.url;if(t.href=t.title=i?(0,o.removeNullCharacters)(i):"",i){var n=e.target;"undefined"==typeof n&&(n=g("externalLinkTarget")),t.target=m[n];var r=e.rel;"undefined"==typeof r&&(r=g("externalLinkRel")),t.rel=r}},e.isExternalLinkTargetSet=function(){switch(g("externalLinkTarget")){case f.NONE:return!1;case f.SELF:case f.BLANK:case f.PARENT:case f.TOP:return!0}},e.isValidUrl=function(t,e){(0,o.deprecated)("isValidUrl(), please use createValidAbsoluteUrl() instead.");var i=e?"http://example.com":null;return null!==(0,o.createValidAbsoluteUrl)(t,i)},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),i=t.indexOf("?"),n=Math.min(e>0?e:t.length,i>0?i:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)},e.LinkTarget=f,e.getDefaultSetting=g,e.DEFAULT_LINK_REL=c,e.DOMCanvasFactory=u,e.DOMCMapReaderFactory=h},function(t,e,i){"use strict";var n=i(15),r=i(41),o=i(28),s=Object.defineProperty;e.f=i(3)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===("undefined"==typeof t?"undefined":n(t))?null!==t:"function"==typeof t}},function(t,e,i){"use strict";t.exports={}},function(t,e,i){"use strict";var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,i){"use strict";var n=i(38);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,i){"use strict";t.exports="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof n&&n.Math===Math?n:"undefined"!=typeof self&&self.Math===Math?self:{}},function(t,e,i){"use strict";var n=i(9);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";var n=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(t,e,i){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n=i(11),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){"use strict";var n=i(42),r=i(38);t.exports=function(t){return n(r(t))}},function(t,e,i){"use strict";var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,i){"use strict";var n=i(33);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){"use strict";t.exports=!1},function(t,e,i){"use strict";var n=i(2),r=i(4),o=i(5),s=i(13)("src"),a=Function.toString,l=(""+a).split("toString");i(16).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(o(i,s)||r(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,i){"use strict";var n=i(8).f,r=i(5),o=i(1)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){"use strict";var n=i(48)("keys"),r=i(13);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){"use strict";var n=i(9);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=i(7),r=i(0);function o(){}o.prototype={create:function(t){switch(t.data.annotationType){case r.AnnotationType.LINK:return new a(t);case r.AnnotationType.TEXT:return new l(t);case r.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new u(t);case"Btn":if(t.data.radioButton)return new p(t);if(t.data.checkBox)return new h(t);(0,r.warn)("Unimplemented button widget annotation: pushbutton");break;case"Ch":return new d(t)}return new c(t);case r.AnnotationType.POPUP:return new f(t);case r.AnnotationType.LINE:return new g(t);case r.AnnotationType.HIGHLIGHT:return new y(t);case r.AnnotationType.UNDERLINE:return new _(t);case r.AnnotationType.SQUIGGLY:return new v(t);case r.AnnotationType.STRIKEOUT:return new b(t);case r.AnnotationType.FILEATTACHMENT:return new x(t);default:return new s(t)}}};var s=function(){function t(t,e,i){this.isRenderable=e||!1,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,e&&(this.container=this._createContainer(i))}return t.prototype={_createContainer:function(t){var e=this.data,i=this.page,o=this.viewport,s=document.createElement("section"),a=e.rect[2]-e.rect[0],l=e.rect[3]-e.rect[1];s.setAttribute("data-annotation-id",e.id);var c=r.Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]);if(n.CustomStyle.setProp("transform",s,"matrix("+o.transform.join(",")+")"),n.CustomStyle.setProp("transformOrigin",s,-c[0]+"px "+-c[1]+"px"),!t&&e.borderStyle.width>0){s.style.borderWidth=e.borderStyle.width+"px",e.borderStyle.style!==r.AnnotationBorderStyleType.UNDERLINE&&(a-=2*e.borderStyle.width,l-=2*e.borderStyle.width);var u=e.borderStyle.horizontalCornerRadius,h=e.borderStyle.verticalCornerRadius;if(u>0||h>0){var p=u+"px / "+h+"px";n.CustomStyle.setProp("borderRadius",s,p)}switch(e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}e.color?s.style.borderColor=r.Util.makeCssRgb(0|e.color[0],0|e.color[1],0|e.color[2]):s.style.borderWidth=0}return s.style.left=c[0]+"px",s.style.top=c[1]+"px",s.style.width=a+"px",s.style.height=l+"px",s},_createPopup:function(t,e,i){e||((e=document.createElement("div")).style.height=t.style.height,e.style.width=t.style.width,t.appendChild(e));var n=new m({container:t,trigger:e,color:i.color,title:i.title,contents:i.contents,hideWrapper:!0}).render();n.style.left=t.style.width,t.appendChild(n)},render:function(){throw new Error("Abstract method AnnotationElement.render called")}},t}(),a=function(){function t(t){s.call(this,t,!0)}return r.Util.inherit(t,s,{render:function(){this.container.className="linkAnnotation";var t=document.createElement("a");return(0,n.addLinkAttributes)(t,{url:this.data.url,target:this.data.newWindow?n.LinkTarget.BLANK:void 0}),this.data.url||(this.data.action?this._bindNamedAction(t,this.data.action):this._bindLink(t,this.data.dest)),this.container.appendChild(t),this.container},_bindLink:function(t,e){var i=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&i.linkService.navigateTo(e),!1},e&&(t.className="internalLink")},_bindNamedAction:function(t,e){var i=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return i.linkService.executeNamedAction(e),!1},t.className="internalLink"}}),t}(),l=function(){function t(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e)}return r.Util.inherit(t,s,{render:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}),t}(),c=function(){function t(t,e){s.call(this,t,e)}return r.Util.inherit(t,s,{render:function(){return this.container}}),t}(),u=function(){var t=["left","center","right"];function e(t){var e=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;c.call(this,t,e)}return r.Util.inherit(e,c,{render:function(){this.container.className="textWidgetAnnotation";var e=null;if(this.renderInteractiveForms){if(this.data.multiLine?(e=document.createElement("textarea")).textContent=this.data.fieldValue:((e=document.createElement("input")).type="text",e.setAttribute("value",this.data.fieldValue)),e.disabled=this.data.readOnly,null!==this.data.maxLen&&(e.maxLength=this.data.maxLen),this.data.comb){var i=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;e.classList.add("comb"),e.style.letterSpacing="calc("+i+"px - 1ch)"}}else{(e=document.createElement("div")).textContent=this.data.fieldValue,e.style.verticalAlign="middle",e.style.display="table-cell";var n=null;this.data.fontRefName&&(n=this.page.commonObjs.getData(this.data.fontRefName)),this._setTextStyle(e,n)}return null!==this.data.textAlignment&&(e.style.textAlign=t[this.data.textAlignment]),this.container.appendChild(e),this.container},_setTextStyle:function(t,e){var i=t.style;if(i.fontSize=this.data.fontSize+"px",i.direction=this.data.fontDirection<0?"rtl":"ltr",e){i.fontWeight=e.black?e.bold?"900":"bold":e.bold?"bold":"normal",i.fontStyle=e.italic?"italic":"normal";var n=e.loadedName?'"'+e.loadedName+'", ':"",r=e.fallbackName||"Helvetica, sans-serif";i.fontFamily=n+r}}}),e}(),h=function(){function t(t){c.call(this,t,t.renderInteractiveForms)}return r.Util.inherit(t,c,{render:function(){this.container.className="buttonWidgetAnnotation checkBox";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}),t}(),p=function(){function t(t){c.call(this,t,t.renderInteractiveForms)}return r.Util.inherit(t,c,{render:function(){this.container.className="buttonWidgetAnnotation radioButton";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}),t}(),d=function(){function t(t){c.call(this,t,t.renderInteractiveForms)}return r.Util.inherit(t,c,{render:function(){this.container.className="choiceWidgetAnnotation";var t=document.createElement("select");t.disabled=this.data.readOnly,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));for(var e=0,i=this.data.options.length;e<i;e++){var n=this.data.options[e],r=document.createElement("option");r.textContent=n.displayValue,r.value=n.exportValue,this.data.fieldValue.indexOf(n.displayValue)>=0&&r.setAttribute("selected",!0),t.appendChild(r)}return this.container.appendChild(t),this.container}}),t}(),f=function(){var t=["Line"];function e(t){var e=!(!t.data.title&&!t.data.contents);s.call(this,t,e)}return r.Util.inherit(e,s,{render:function(){if(this.container.className="popupAnnotation",t.indexOf(this.data.parentType)>=0)return this.container;var e='[data-annotation-id="'+this.data.parentId+'"]',i=this.layer.querySelector(e);if(!i)return this.container;var r=new m({container:this.container,trigger:i,color:this.data.color,title:this.data.title,contents:this.data.contents}),o=parseFloat(i.style.left),s=parseFloat(i.style.width);return n.CustomStyle.setProp("transformOrigin",this.container,-(o+s)+"px -"+i.style.top),this.container.style.left=o+s+"px",this.container.appendChild(r.render()),this.container}}),e}(),m=function(){function t(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return t.prototype={render:function(){var t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var e=document.createElement("div");e.className="popup";var i=this.color;if(i){var n=.7*(255-i[0])+i[0],o=.7*(255-i[1])+i[1],s=.7*(255-i[2])+i[2];e.style.backgroundColor=r.Util.makeCssRgb(0|n,0|o,0|s)}var a=this._formatContents(this.contents),l=document.createElement("h1");return l.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),e.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(l),e.appendChild(a),t.appendChild(e),t},_formatContents:function(t){for(var e=document.createElement("p"),i=t.split(/(?:\r\n?|\n)/),n=0,r=i.length;n<r;++n){var o=i[n];e.appendChild(document.createTextNode(o)),n<r-1&&e.appendChild(document.createElement("br"))}return e},_toggle:function(){this.pinned?this._hide(!0):this._show(!0)},_show:function(t){t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function(t){t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}},t}(),g=function(){var t="http://www.w3.org/2000/svg";function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e,!0)}return r.Util.inherit(e,s,{render:function(){this.container.className="lineAnnotation";var e=this.data,i=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=document.createElementNS(t,"svg:svg");r.setAttributeNS(null,"version","1.1"),r.setAttributeNS(null,"width",i+"px"),r.setAttributeNS(null,"height",n+"px"),r.setAttributeNS(null,"preserveAspectRatio","none"),r.setAttributeNS(null,"viewBox","0 0 "+i+" "+n);var o=document.createElementNS(t,"svg:line");return o.setAttributeNS(null,"x1",e.rect[2]-e.lineCoordinates[0]),o.setAttributeNS(null,"y1",e.rect[3]-e.lineCoordinates[1]),o.setAttributeNS(null,"x2",e.rect[2]-e.lineCoordinates[2]),o.setAttributeNS(null,"y2",e.rect[3]-e.lineCoordinates[3]),o.setAttributeNS(null,"stroke-width",e.borderStyle.width),o.setAttributeNS(null,"stroke","transparent"),r.appendChild(o),this.container.append(r),this._createPopup(this.container,o,this.data),this.container}}),e}(),y=function(){function t(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e,!0)}return r.Util.inherit(t,s,{render:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),t}(),_=function(){function t(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e,!0)}return r.Util.inherit(t,s,{render:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),t}(),v=function(){function t(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e,!0)}return r.Util.inherit(t,s,{render:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),t}(),b=function(){function t(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);s.call(this,t,e,!0)}return r.Util.inherit(t,s,{render:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),t}(),x=function(){function t(t){s.call(this,t,!0);var e=this.data.file;this.filename=(0,n.getFilenameFromUrl)(e.filename),this.content=e.content,this.linkService.onFileAttachmentAnnotation({id:(0,r.stringToPDFString)(e.filename),filename:e.filename,content:e.content})}return r.Util.inherit(t,s,{render:function(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container},_download:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,r.warn)("Download cannot be started due to unavailable download manager")}}),t}(),A={render:function(t){for(var e=new o,i=0,r=t.annotations.length;i<r;i++){var s=t.annotations[i];if(s){var a=e.create({data:s,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||(0,n.getDefaultSetting)("imageResourcesPath"),renderInteractiveForms:t.renderInteractiveForms||!1});a.isRenderable&&t.div.appendChild(a.render())}}},update:function(t){for(var e=0,i=t.annotations.length;e<i;e++){var r=t.annotations[e],o=t.div.querySelector('[data-annotation-id="'+r.id+'"]');o&&n.CustomStyle.setProp("transform",o,"matrix("+t.viewport.transform.join(",")+")")}t.div.removeAttribute("hidden")}};e.AnnotationLayer=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.build=e.version=e._UnsupportedManager=e.setPDFNetworkStreamClass=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=e.getDocument=void 0;var r,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(0),l=n(7),c=n(83),u=n(82),h=n(14),p=(r=h)&&r.__esModule?r:{default:r},d=n(51),f=n(85);var m,g=65536,y=!1,_=!1,v="undefined"!=typeof document&&document.currentScript?document.currentScript.src:null,b=null,x=!1;"undefined"==typeof window?(y=!0,x=!0):x=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(m=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var A,w="undefined"!=typeof requirejs&&requirejs.load;b=x?function(t){i.e(0).then((function(){var e;e=i("vRNd"),t(e.WorkerMessageHandler)}).bind(null,i)).catch(i.oe)}:w?function(t){requirejs(["pdfjs-dist/build/pdf.worker"],function(e){t(e.WorkerMessageHandler)})}:null;var P,E=function(){var t=0;function e(){this._capability=(0,a.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return e.prototype={get promise(){return this._capability.promise},destroy:function(){var t=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(function(){t._transport=null,t._worker&&(t._worker.destroy(),t._worker=null)})},then:function(t,e){return this.promise.then.apply(this.promise,arguments)}},e}(),T=function(){function t(t,e){this.length=t,this.initialData=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,a.createPromiseCapability)()}return t.prototype={addRangeListener:function(t){this._rangeListeners.push(t)},addProgressListener:function(t){this._progressListeners.push(t)},addProgressiveReadListener:function(t){this._progressiveReadListeners.push(t)},onDataRange:function(t,e){for(var i=this._rangeListeners,n=0,r=i.length;n<r;++n)i[n](t,e)},onDataProgress:function(t){var e=this;this._readyCapability.promise.then(function(){for(var i=e._progressListeners,n=0,r=i.length;n<r;++n)i[n](t)})},onDataProgressiveRead:function(t){var e=this;this._readyCapability.promise.then(function(){for(var i=e._progressiveReadListeners,n=0,r=i.length;n<r;++n)i[n](t)})},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(t,e){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function(){}},t}(),S=function(){function t(t,e,i){this.pdfInfo=t,this.transport=e,this.loadingTask=i}return t.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(t){return this.transport.getPage(t)},getPageIndex:function(t){return this.transport.getPageIndex(t)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(t){return this.transport.getDestination(t)},getPageLabels:function(){return this.transport.getPageLabels()},getPageMode:function(){return this.transport.getPageMode()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}},t}(),C=function(){function t(t,e,i){this.pageIndex=t,this.pageInfo=e,this.transport=i,this.stats=new a.StatTimer,this.stats.enabled=(0,l.getDefaultSetting)("enableStats"),this.commonObjs=i.commonObjs,this.objs=new I,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return t.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get userUnit(){return this.pageInfo.userUnit},get view(){return this.pageInfo.view},getViewport:function(t,e){return arguments.length<2&&(e=this.rotate),new a.PageViewport(this.view,t,e,0,0)},getAnnotations:function(t){var e=t&&t.intent||null;return this.annotationsPromise&&this.annotationsIntent===e||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,e),this.annotationsIntent=e),this.annotationsPromise},render:function(t){var e=this,i=this.stats;i.time("Overall"),this.pendingCleanup=!1;var n="print"===t.intent?"print":"display",r=t.canvasFactory||new l.DOMCanvasFactory;this.intentStates[n]||(this.intentStates[n]=Object.create(null));var o=this.intentStates[n];o.displayReadyCapability||(o.receivingOperatorList=!0,o.displayReadyCapability=(0,a.createPromiseCapability)(),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:n,renderInteractiveForms:!0===t.renderInteractiveForms}));var s=function(t){var n=o.renderTasks.indexOf(c);n>=0&&o.renderTasks.splice(n,1),e.cleanupAfterRender&&(e.pendingCleanup=!0),e._tryCleanup(),t?c.capability.reject(t):c.capability.resolve(),i.timeEnd("Rendering"),i.timeEnd("Overall")},c=new L(s,t,this.objs,this.commonObjs,o.operatorList,this.pageNumber,r);c.useRequestAnimationFrame="print"!==n,o.renderTasks||(o.renderTasks=[]),o.renderTasks.push(c);var u=c.task;return t.continueCallback&&((0,a.deprecated)("render is used with continueCallback parameter"),u.onContinue=t.continueCallback),o.displayReadyCapability.promise.then(function(t){e.pendingCleanup?s():(i.time("Rendering"),c.initializeGraphics(t),c.operatorListChanged())}).catch(s),u},getOperatorList:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var t,e=this.intentStates.oplist;return e.opListReadCapability||((t={}).operatorListChanged=function(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);var i=e.renderTasks.indexOf(t);i>=0&&e.renderTasks.splice(i,1)}},e.receivingOperatorList=!0,e.opListReadCapability=(0,a.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(t),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),e.opListReadCapability.promise},streamTextContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===t.normalizeWhitespace,combineTextItems:!0!==t.disableCombineTextItems},{highWaterMark:100,size:function(t){return t.items.length}})},getTextContent:function(t){t=t||{};var e=this.streamTextContent(t);return new Promise(function(t,i){var n=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){n.read().then(function(i){var n=i.value;i.done?t(r):(a.Util.extendObj(r.styles,n.styles),a.Util.appendToArray(r.items,n.items),e())},i)}()})},_destroy:function(){this.destroyed=!0,this.transport.pageCache[this.pageIndex]=null;var t=[];return Object.keys(this.intentStates).forEach(function(e){"oplist"!==e&&this.intentStates[e].renderTasks.forEach(function(e){var i=e.capability.promise.catch(function(){});t.push(i),e.cancel()})},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)},destroy:function(){(0,a.deprecated)("page destroy method, use cleanup() instead"),this.cleanup()},cleanup:function(){this.pendingCleanup=!0,this._tryCleanup()},_tryCleanup:function(){this.pendingCleanup&&!Object.keys(this.intentStates).some(function(t){var e=this.intentStates[t];return 0!==e.renderTasks.length||e.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(t){delete this.intentStates[t]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(t,e){var i=this.intentStates[e];i.displayReadyCapability&&i.displayReadyCapability.resolve(t)},_renderPageChunk:function(t,e){var i,n,r=this.intentStates[e];for(i=0,n=t.length;i<n;i++)r.operatorList.fnArray.push(t.fnArray[i]),r.operatorList.argsArray.push(t.argsArray[i]);for(r.operatorList.lastChunk=t.lastChunk,i=0;i<r.renderTasks.length;i++)r.renderTasks[i].operatorListChanged();t.lastChunk&&(r.receivingOperatorList=!1,this._tryCleanup())}},t}(),O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}return o(t,[{key:"postMessage",value:function(t,e){var i=this;if(this._defer){var n=new WeakMap,r={data:function t(i){if("object"!==("undefined"==typeof i?"undefined":s(i))||null===i)return i;if(n.has(i))return n.get(i);var r,o;if((o=i.buffer)&&(0,a.isArrayBuffer)(o)){var l=e&&e.indexOf(o)>=0;return r=i===o?i:l?new i.constructor(o,i.byteOffset,i.byteLength):new i.constructor(i),n.set(i,r),r}for(var c in r=Array.isArray(i)?[]:{},n.set(i,r),i){for(var u,h=i;!(u=Object.getOwnPropertyDescriptor(h,c));)h=Object.getPrototypeOf(h);"undefined"!=typeof u.value&&"function"!=typeof u.value&&(r[c]=t(u.value))}return r}(t)};this._deferred.then(function(){i._listeners.forEach(function(t){t.call(this,r)},i)})}else this._listeners.forEach(function(e){e.call(this,{data:t})},this)}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var i=this._listeners.indexOf(e);this._listeners.splice(i,1)}},{key:"terminate",value:function(){this._listeners=[]}}]),t}(),M=function(){var t=0;function e(){if("undefined"!=typeof m)return m;if((0,l.getDefaultSetting)("workerSrc"))return(0,l.getDefaultSetting)("workerSrc");if(v)return v.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2");throw new Error("No PDFJS.workerSrc specified")}var i=void 0;var n=new WeakMap;function r(t,e){if(e&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this._readyCapability=(0,a.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return n.set(e,this),void this._initializeFromPort(e);this._initialize()}return r.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initializeFromPort:function(t){this._port=t,this._messageHandler=new a.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()},_initialize:function(){var t,i,n=this;if(!y&&!(0,l.getDefaultSetting)("disableWorker")&&"undefined"!=typeof Worker){var r=e();try{(0,a.isSameOrigin)(window.location.href,r)||(t=new URL(r,window.location).href,i="importScripts('"+t+"');",r=URL.createObjectURL(new Blob([i])));var o=new Worker(r),s=new a.MessageHandler("main","worker",o),c=function(){o.removeEventListener("error",u),s.destroy(),o.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},u=function(){n._webWorker||c()};o.addEventListener("error",u),s.on("test",function(t){(o.removeEventListener("error",u),n.destroyed)?c():t&&t.supportTypedArray?(n._messageHandler=s,n._port=o,n._webWorker=o,t.supportTransfers||(n.postMessageTransfers=!1,_=!0),n._readyCapability.resolve(),s.send("configure",{verbosity:(0,a.getVerbosityLevel)()})):(n._setupFakeWorker(),s.destroy(),o.terminate())}),s.on("console_log",function(t){console.log.apply(console,t)}),s.on("console_error",function(t){console.error.apply(console,t)}),s.on("ready",function(t){if(o.removeEventListener("error",u),n.destroyed)c();else try{h()}catch(t){n._setupFakeWorker()}});var h=function(){var t=(0,l.getDefaultSetting)("postMessageTransfers")&&!_,e=new Uint8Array([t?255:0]);try{s.send("test",e,[e.buffer])}catch(t){(0,a.info)("Cannot use postMessage transfers"),e[0]=0,s.send("test",e)}};return void h()}catch(t){(0,a.info)("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){var n=this;y||(0,l.getDefaultSetting)("disableWorker")||((0,a.warn)("Setting up fake worker."),y=!0),(i?i.promise:(i=(0,a.createPromiseCapability)(),(b||function(t){a.Util.loadScript(e(),function(){t(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})})(i.resolve),i.promise)).then(function(e){if(n.destroyed)n._readyCapability.reject(new Error("Worker was destroyed"));else{var i=Uint8Array!==Float32Array,r=new O(i);n._port=r;var o="fake"+t++,s=new a.MessageHandler(o+"_worker",o,r);e.setup(s,r);var l=new a.MessageHandler(o,o+"_worker",r);n._messageHandler=l,n._readyCapability.resolve()}})},destroy:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),n.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},r.fromPort=function(t){return n.has(t)?n.get(t):new r(null,t)},r}(),R=function(){function t(t,e,i,n){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new I,this.fontLoader=new c.FontLoader(e.docId),this.CMapReaderFactory=new n({baseUrl:(0,l.getDefaultSetting)("cMapUrl"),isCompressed:(0,l.getDefaultSetting)("cMapPacked")}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,a.createPromiseCapability)(),this.setupMessageHandler()}return t.prototype={destroy:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,a.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e=[];this.pageCache.forEach(function(t){t&&e.push(t._destroy())}),this.pageCache=[],this.pagePromises=[];var i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then(function(){t.fontLoader.clear(),t._networkStream&&t._networkStream.cancelAllRequests(),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise},setupMessageHandler:function(){var t=this.messageHandler,e=this.loadingTask;t.on("GetReader",function(t,e){var i=this;(0,a.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(t){i._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=function(){i._fullReader.read().then(function(t){var i=t.value;t.done?e.close():((0,a.assert)((0,a.isArrayBuffer)(i)),e.enqueue(new Uint8Array(i),1,[i]))}).catch(function(t){e.error(t)})},e.onCancel=function(t){i._fullReader.cancel(t)}},this),t.on("ReaderHeadersReady",function(t){var e=this,i=(0,a.createPromiseCapability)(),n=this._fullReader;return n.headersReady.then(function(){if(!n.isStreamingSupported||!n.isRangeSupported){if(e._lastProgress){var t=e.loadingTask;t.onProgress&&t.onProgress(e._lastProgress)}n.onProgress=function(t){var i=e.loadingTask;i.onProgress&&i.onProgress({loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},i.reject),i.promise},this),t.on("GetRangeReader",function(t,e){(0,a.assert)(this._networkStream);var i=this._networkStream.getRangeReader(t.begin,t.end);e.onPull=function(){i.read().then(function(t){var i=t.value;t.done?e.close():((0,a.assert)((0,a.isArrayBuffer)(i)),e.enqueue(new Uint8Array(i),1,[i]))}).catch(function(t){e.error(t)})},e.onCancel=function(t){i.cancel(t)}},this),t.on("GetDoc",function(t){var e=t.pdfInfo;this.numPages=t.pdfInfo.numPages;var i=this.loadingTask,n=new S(e,this,i);this.pdfDocument=n,i._capability.resolve(n)},this),t.on("PasswordRequest",function(t){var i=this;if(this._passwordCapability=(0,a.createPromiseCapability)(),e.onPassword){e.onPassword(function(t){i._passwordCapability.resolve({password:t})},t.code)}else this._passwordCapability.reject(new a.PasswordException(t.message,t.code));return this._passwordCapability.promise},this),t.on("PasswordException",function(t){e._capability.reject(new a.PasswordException(t.message,t.code))},this),t.on("InvalidPDF",function(t){this.loadingTask._capability.reject(new a.InvalidPDFException(t.message))},this),t.on("MissingPDF",function(t){this.loadingTask._capability.reject(new a.MissingPDFException(t.message))},this),t.on("UnexpectedResponse",function(t){this.loadingTask._capability.reject(new a.UnexpectedResponseException(t.message,t.status))},this),t.on("UnknownError",function(t){this.loadingTask._capability.reject(new a.UnknownErrorException(t.message,t.details))},this),t.on("DataLoaded",function(t){this.downloadInfoCapability.resolve(t)},this),t.on("PDFManagerReady",function(t){},this),t.on("StartRenderPage",function(t){if(!this.destroyed){var e=this.pageCache[t.pageIndex];e.stats.timeEnd("Page Request"),e._startRenderPage(t.transparency,t.intent)}},this),t.on("RenderPageChunk",function(t){this.destroyed||this.pageCache[t.pageIndex]._renderPageChunk(t.operatorList,t.intent)},this),t.on("commonobj",function(t){var e=this;if(!this.destroyed){var i=t[0],n=t[1];if(!this.commonObjs.hasData(i))switch(n){case"Font":var r=t[2];if("error"in r){var o=r.error;(0,a.warn)("Error during font loading: "+o),this.commonObjs.resolve(i,o);break}var s=null;(0,l.getDefaultSetting)("pdfBug")&&p.default.FontInspector&&p.default.FontInspector.enabled&&(s={registerFont:function(t,e){p.default.FontInspector.fontAdded(t,e)}});var u=new c.FontFaceObject(r,{isEvalSuported:(0,l.getDefaultSetting)("isEvalSupported"),disableFontFace:(0,l.getDefaultSetting)("disableFontFace"),fontRegistry:s});this.fontLoader.bind([u],function(t){e.commonObjs.resolve(i,u)});break;case"FontPath":this.commonObjs.resolve(i,t[2]);break;default:throw new Error("Got unknown common object type "+n)}}},this),t.on("obj",function(t){if(!this.destroyed){var e,i=t[0],n=t[1],r=t[2],o=this.pageCache[n];if(!o.objs.hasData(i))switch(r){case"JpegStream":e=t[3],(0,a.loadJpegStream)(i,e,o.objs);break;case"Image":e=t[3],o.objs.resolve(i,e);e&&"data"in e&&e.data.length>8e6&&(o.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type "+r)}}},this),t.on("DocProgress",function(t){if(!this.destroyed){var e=this.loadingTask;e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}},this),t.on("PageError",function(t){if(!this.destroyed){var e=this.pageCache[t.pageNum-1].intentStates[t.intent];if(!e.displayReadyCapability)throw new Error(t.error);if(e.displayReadyCapability.reject(t.error),e.operatorList){e.operatorList.lastChunk=!0;for(var i=0;i<e.renderTasks.length;i++)e.renderTasks[i].operatorListChanged()}}},this),t.on("UnsupportedFeature",function(t){if(!this.destroyed){var e=t.featureId,i=this.loadingTask;i.onUnsupportedFeature&&i.onUnsupportedFeature(e),k.notify(e)}},this),t.on("JpegDecode",function(t){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var e=t[0],i=t[1];return 3!==i&&1!==i?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(t,n){var r=new Image;r.onload=function(){var e=r.width,n=r.height,o=e*n,s=4*o,a=new Uint8Array(o*i),l=document.createElement("canvas");l.width=e,l.height=n;var c=l.getContext("2d");c.drawImage(r,0,0);var u,h,p=c.getImageData(0,0,e,n).data;if(3===i)for(u=0,h=0;u<s;u+=4,h+=3)a[h]=p[u],a[h+1]=p[u+1],a[h+2]=p[u+2];else if(1===i)for(u=0,h=0;u<s;u+=4,h++)a[h]=p[u];t({data:a,width:e,height:n})},r.onerror=function(){n(new Error("JpegDecode failed to load image"))},r.src=e})},this),t.on("FetchBuiltInCMap",function(t){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:t.name})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(t,e){var i=this;if(!(0,a.isInt)(t)||t<=0||t>this.numPages)return Promise.reject(new Error("Invalid page request"));var n=t-1;if(n in this.pagePromises)return this.pagePromises[n];var r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(function(t){if(i.destroyed)throw new Error("Transport destroyed");var e=new C(n,t,i);return i.pageCache[n]=e,e});return this.pagePromises[n]=r,r},getPageIndex:function(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch(function(t){return Promise.reject(new Error(t))})},getAnnotations:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(t){return this.messageHandler.sendWithPromise("GetDestination",{id:t})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getPageMode:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(t){return{info:t[0],metadata:t[1]?new d.Metadata(t[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){var t=this;this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var e=0,i=t.pageCache.length;e<i;e++){var n=t.pageCache[e];n&&n.cleanup()}t.commonObjs.clear(),t.fontLoader.clear()})}},t}(),I=function(){function t(){this.objs=Object.create(null)}return t.prototype={ensureObj:function(t){if(this.objs[t])return this.objs[t];var e={capability:(0,a.createPromiseCapability)(),data:null,resolved:!1};return this.objs[t]=e,e},get:function(t,e){if(e)return this.ensureObj(t).capability.promise.then(e),null;var i=this.objs[t];if(!i||!i.resolved)throw new Error("Requesting object that isn't resolved yet "+t);return i.data},resolve:function(t,e){var i=this.ensureObj(t);i.resolved=!0,i.data=e,i.capability.resolve(e)},isResolved:function(t){var e=this.objs;return!!e[t]&&e[t].resolved},hasData:function(t){return this.isResolved(t)},getData:function(t){var e=this.objs;return e[t]&&e[t].resolved?e[t].data:null},clear:function(){this.objs=Object.create(null)}},t}(),D=function(){function t(t){this._internalRenderTask=t,this.onContinue=null}return t.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(t,e){return this.promise.then.apply(this.promise,arguments)}},t}(),L=function(){var t=new WeakMap;function e(t,e,i,n,r,o,s){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.operatorListIdx=null,this.operatorList=r,this.pageNumber=o,this.canvasFactory=s,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.useRequestAnimationFrame=!1,this.cancelled=!1,this.capability=(0,a.createPromiseCapability)(),this.task=new D(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}return e.prototype={initializeGraphics:function(e){if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.set(this._canvas,this)}if(!this.cancelled){(0,l.getDefaultSetting)("pdfBug")&&p.default.StepperManager&&p.default.StepperManager.enabled&&(this.stepper=p.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var i=this.params;this.gfx=new u.CanvasGraphics(i.canvasContext,this.commonObjs,this.objs,this.canvasFactory,i.imageLayer),this.gfx.beginDrawing({transform:i.transform,viewport:i.viewport,transparency:e,background:i.background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1,this.cancelled=!0,this._canvas&&t.delete(this._canvas),(0,l.getDefaultSetting)("pdfjsNext")?this.callback(new l.RenderingCancelledException("Rendering cancelled, page "+this.pageNumber,"canvas")):this.callback("cancelled")},operatorListChanged:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!=typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback())))}},e}(),k=(P=[],{listen:function(t){(0,a.deprecated)("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead"),P.push(t)},notify:function(t){for(var e=0,i=P.length;e<i;e++)P[e](t)}});e.version="1.9.489",e.build="b7fcaff0",e.getDocument=function(t,e,i,n){var r,o=new E;if(arguments.length>1&&(0,a.deprecated)("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument"),e&&(e instanceof T||((e=Object.create(e)).length=t.length,e.initialData=t.initialData,e.abort||(e.abort=function(){})),(t=Object.create(t)).range=e),o.onPassword=i||null,o.onProgress=n||null,"string"==typeof t)r={url:t};else if((0,a.isArrayBuffer)(t))r={data:t};else if(t instanceof T)r={range:t};else{if("object"!==("undefined"==typeof t?"undefined":s(t)))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}var c={},u=null,h=null,p=l.DOMCMapReaderFactory;for(var d in r)if("url"!==d||"undefined"==typeof window)if("range"!==d)if("worker"!==d)if("data"!==d||r[d]instanceof Uint8Array)"CMapReaderFactory"!==d?c[d]=r[d]:p=r[d];else{var m=r[d];if("string"==typeof m)c[d]=(0,a.stringToBytes)(m);else if("object"!==("undefined"==typeof m?"undefined":s(m))||null===m||isNaN(m.length)){if(!(0,a.isArrayBuffer)(m))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");c[d]=new Uint8Array(m)}else c[d]=new Uint8Array(m)}else h=r[d];else u=r[d];else c[d]=new URL(r[d],window.location).href;if(c.rangeChunkSize=c.rangeChunkSize||g,c.ignoreErrors=!0!==c.stopAtErrors,void 0!==c.disableNativeImageDecoder&&(0,a.deprecated)("parameter disableNativeImageDecoder, use nativeImageDecoderSupport instead"),c.nativeImageDecoderSupport=c.nativeImageDecoderSupport||(!0===c.disableNativeImageDecoder?a.NativeImageDecoding.NONE:a.NativeImageDecoding.DECODE),c.nativeImageDecoderSupport!==a.NativeImageDecoding.DECODE&&c.nativeImageDecoderSupport!==a.NativeImageDecoding.NONE&&c.nativeImageDecoderSupport!==a.NativeImageDecoding.DISPLAY&&((0,a.warn)("Invalid parameter nativeImageDecoderSupport: need a state of enum {NativeImageDecoding}"),c.nativeImageDecoderSupport=a.NativeImageDecoding.DECODE),!h){var y=(0,l.getDefaultSetting)("workerPort");h=y?M.fromPort(y):new M,o._worker=h}var v=o.docId;return h.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");return function(t,e,i,n){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(e.disableAutoFetch=(0,l.getDefaultSetting)("disableAutoFetch"),e.disableStream=(0,l.getDefaultSetting)("disableStream"),e.chunkedViewerLoading=!!i,i&&(e.length=i.length,e.initialData=i.initialData),t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:(0,l.getDefaultSetting)("maxImageSize"),disableFontFace:(0,l.getDefaultSetting)("disableFontFace"),disableCreateObjectURL:(0,l.getDefaultSetting)("disableCreateObjectURL"),postMessageTransfers:(0,l.getDefaultSetting)("postMessageTransfers")&&!_,docBaseUrl:e.docBaseUrl,nativeImageDecoderSupport:e.nativeImageDecoderSupport,ignoreErrors:e.ignoreErrors}).then(function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e}))}(h,c,u,v).then(function(t){if(o.destroyed)throw new Error("Loading aborted");var e=void 0;u?e=new f.PDFDataTransportStream(c,u):c.data||(e=new A({source:c,disableRange:(0,l.getDefaultSetting)("disableRange")}));var i=new a.MessageHandler(v,t,h.port);i.postMessageTransfers=h.postMessageTransfers;var n=new R(i,o,e,p);o._transport=n,i.send("Ready",null)})}).catch(o._capability.reject),o},e.LoopbackPort=O,e.PDFDataRangeTransport=T,e.PDFWorker=M,e.PDFDocumentProxy=S,e.PDFPageProxy=C,e.setPDFNetworkStreamClass=function(t){A=t},e._UnsupportedManager=k,e.version="1.9.489",e.build="b7fcaff0"},function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var s,a=o(0),l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,o=new Int32Array(256),s=0;s<256;s++){for(var l=s,c=0;c<8;c++)l=1&l?3988292384^l>>1&2147483647:l>>1&2147483647;o[s]=l}function u(t,e,i,n){var r=n,s=e.length;i[r]=s>>24&255,i[r+1]=s>>16&255,i[r+2]=s>>8&255,i[r+3]=255&s,i[r+=4]=255&t.charCodeAt(0),i[r+1]=255&t.charCodeAt(1),i[r+2]=255&t.charCodeAt(2),i[r+3]=255&t.charCodeAt(3),r+=4,i.set(e,r);var a=function(t,e,i){for(var n=-1,r=e;r<i;r++){var s=255&(n^t[r]);n=n>>>8^o[s]}return-1^n}(i,n+4,r+=e.length);i[r]=a>>24&255,i[r+1]=a>>16&255,i[r+2]=a>>8&255,i[r+3]=255&a}function h(t){var e=t.length,i=Math.ceil(e/65535),n=new Uint8Array(2+e+5*i+4),r=0;n[r++]=120,n[r++]=156;for(var o=0;e>65535;)n[r++]=0,n[r++]=255,n[r++]=255,n[r++]=0,n[r++]=0,n.set(t.subarray(o,o+65535),r),r+=65535,o+=65535,e-=65535;n[r++]=1,n[r++]=255&e,n[r++]=e>>8&255,n[r++]=255&~e,n[r++]=(65535&~e)>>8&255,n.set(t.subarray(o),r),r+=t.length-o;var s=function(t,e,i){for(var n=1,r=0,o=e;o<i;++o)r=(r+(n=(n+(255&t[o]))%65521))%65521;return r<<16|n}(t,0,t.length);return n[r++]=s>>24&255,n[r++]=s>>16&255,n[r++]=s>>8&255,n[r++]=255&s,n}function p(o,s,l){var c,p,d,f=o.width,m=o.height,g=o.data;switch(s){case a.ImageKind.GRAYSCALE_1BPP:p=0,c=1,d=f+7>>3;break;case a.ImageKind.RGB_24BPP:p=2,c=8,d=3*f;break;case a.ImageKind.RGBA_32BPP:p=6,c=8,d=4*f;break;default:throw new Error("invalid format")}var y,_,v=new Uint8Array((1+d)*m),b=0,x=0;for(y=0;y<m;++y)v[b++]=0,v.set(g.subarray(x,x+d),b),x+=d,b+=d;if(s===a.ImageKind.GRAYSCALE_1BPP)for(b=0,y=0;y<m;y++)for(b++,_=0;_<d;_++)v[b++]^=255;var A=new Uint8Array([f>>24&255,f>>16&255,f>>8&255,255&f,m>>24&255,m>>16&255,m>>8&255,255&m,c,p,0,0,0]),w=function(t){if(!(0,a.isNodeJS)())return h(t);try{var n;n=parseInt(e.versions.node)>=8?t:new r(t);var o=i("ZfEn").deflateSync(n,{level:9});return o instanceof Uint8Array?o:new Uint8Array(o)}catch(t){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return h(t)}(v),P=t.length+3*n+A.length+w.length,E=new Uint8Array(P),T=0;return E.set(t,T),u("IHDR",A,E,T+=t.length),u("IDATA",w,E,T+=n+A.length),T+=n+w.length,u("IEND",new Uint8Array(0),E,T),(0,a.createObjectURL)(E,"image/png",l)}return function(t,e){return p(t,void 0===t.kind?a.ImageKind.GRAYSCALE_1BPP:t.kind,e)}}(),u=function(){function t(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}();n.SVGGraphics=s=function(){function t(t){if(t===(0|t))return t.toString();var e=t.toFixed(10),i=e.length-1;if("0"!==e[i])return e;do{i--}while("0"===e[i]);return e.substr(0,"."===e[i]?i:i+1)}function e(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale("+t(e[0])+" "+t(e[3])+")";if(e[0]===e[3]&&e[1]===-e[2])return"rotate("+t(180*Math.acos(e[0])/Math.PI)+")"}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate("+t(e[4])+" "+t(e[5])+")";return"matrix("+t(e[0])+" "+t(e[1])+" "+t(e[2])+" "+t(e[3])+" "+t(e[4])+" "+t(e[5])+")"}function i(t,e,i){this.current=new u,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i}var n="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",o=["butt","round","square"],s=["miter","round","bevel"],h=0,p=0;return i.prototype={save:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function(t){this.save(),this.executeOpTree(t),this.restore()},loadDependencies:function(t){for(var e=this,i=t.fnArray,n=i.length,r=t.argsArray,o=0;o<n;o++)if(a.OPS.dependency===i[o])for(var s=r[o],l=0,c=s.length;l<c;l++){var u,h=s[l];u="g_"===h.substring(0,2)?new Promise(function(t){e.commonObjs.get(h,t)}):new Promise(function(t){e.objs.get(h,t)}),this.current.dependencies.push(u)}return Promise.all(this.current.dependencies)},transform:function(t,e,i,n,r,o){var s=[t,e,i,n,r,o];this.transformMatrix=a.Util.transform(this.transformMatrix,s),this.tgrp=null},getSVG:function(t,e){var i=this;this.viewport=e;var n=this._initialize(e);return this.loadDependencies(t).then(function(){i.transformMatrix=a.IDENTITY_MATRIX;var e=i.convertOpList(t);return i.executeOpTree(e),n})},convertOpList:function(t){var e=t.argsArray,i=t.fnArray,n=i.length,r=[],o=[];for(var s in a.OPS)r[a.OPS[s]]=s;for(var l=0;l<n;l++){var c=i[l];o.push({fnId:c,fn:r[c],args:e[l]})}return function(t){for(var e=[],i=[],n=t.length,r=0;r<n;r++)"save"!==t[r].fn?"restore"===t[r].fn?e=i.pop():e.push(t[r]):(e.push({fnId:92,fn:"group",items:[]}),i.push(e),e=e[e.length-1].items);return e}(o)},executeOpTree:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i].fn,r=t[i].fnId,o=t[i].args;switch(0|r){case a.OPS.beginText:this.beginText();break;case a.OPS.setLeading:this.setLeading(o);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case a.OPS.setFont:this.setFont(o);break;case a.OPS.showText:case a.OPS.showSpacedText:this.showText(o[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(o[0],o[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case a.OPS.setHScale:this.setHScale(o[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case a.OPS.setTextRise:this.setTextRise(o[0]);break;case a.OPS.setLineWidth:this.setLineWidth(o[0]);break;case a.OPS.setLineJoin:this.setLineJoin(o[0]);break;case a.OPS.setLineCap:this.setLineCap(o[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case a.OPS.setDash:this.setDash(o[0],o[1]);break;case a.OPS.setGState:this.setGState(o[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintJpegXObject:this.paintJpegXObject(o[0],o[1],o[2]);break;case a.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case a.OPS.constructPath:this.constructPath(o[0],o[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(t[i].items);break;default:(0,a.warn)("Unimplemented operator "+n)}}},setWordSpacing:function(t){this.current.wordSpacing=t},setCharSpacing:function(t){this.current.charSpacing=t},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(e,i,r,o,s,a){var l=this.current;this.current.textMatrix=this.current.lineMatrix=[e,i,r,o,s,a],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,l.xcoords=[],l.tspan=document.createElementNS(n,"svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",t(l.fontSize)+"px"),l.tspan.setAttributeNS(null,"y",t(-l.y)),l.txtElement=document.createElementNS(n,"svg:text"),l.txtElement.appendChild(l.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=a.IDENTITY_MATRIX,this.current.lineMatrix=a.IDENTITY_MATRIX,this.current.tspan=document.createElementNS(n,"svg:tspan"),this.current.txtElement=document.createElementNS(n,"svg:text"),this.current.txtgrp=document.createElementNS(n,"svg:g"),this.current.xcoords=[]},moveText:function(e,i){var r=this.current;this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i,r.xcoords=[],r.tspan=document.createElementNS(n,"svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",t(r.fontSize)+"px"),r.tspan.setAttributeNS(null,"y",t(-r.y))},showText:function(i){var n=this.current,r=n.font,o=n.fontSize;if(0!==o){var s,c=n.charSpacing,u=n.wordSpacing,h=n.fontDirection,p=n.textHScale*h,d=i.length,f=r.vertical,m=o*n.fontMatrix[0],g=0;for(s=0;s<d;++s){var y=i[s];if(null!==y)if((0,a.isNum)(y))g+=-y*o*.001;else{var _=y.width,v=y.fontChar,b=_*m+((y.isSpace?u:0)+c)*h;y.isInFont||r.missingFile?(n.xcoords.push(n.x+g*p),n.tspan.textContent+=v,g+=b):g+=b}else g+=h*u}f?n.y-=g*p:n.x+=g*p,n.tspan.setAttributeNS(null,"x",n.xcoords.map(t).join(" ")),n.tspan.setAttributeNS(null,"y",t(-n.y)),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",t(n.fontSize)+"px"),n.fontStyle!==l.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==l.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight),n.fillColor!==l.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor);var x=n.textMatrix;0!==n.textRise&&((x=x.slice())[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform",e(x)+" scale(1, -1)"),n.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.txtElement.appendChild(n.tspan),n.txtgrp.appendChild(n.txtElement),this._ensureTransformGroup().appendChild(n.txtElement)}},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},addFontStyle:function(t){this.cssStyle||(this.cssStyle=document.createElementNS(n,"svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var e=(0,a.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+t.loadedName+'"; src: url('+e+"); }\n"},setFont:function(e){var i=this.current,r=this.commonObjs.get(e[0]),o=e[1];this.current.font=r,this.embedFonts&&r.data&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),i.fontMatrix=r.fontMatrix?r.fontMatrix:a.FONT_IDENTITY_MATRIX;var s=r.black?r.bold?"bolder":"bold":r.bold?"bold":"normal",l=r.italic?"italic":"normal";o<0?(o=-o,i.fontDirection=-1):i.fontDirection=1,i.fontSize=o,i.fontFamily=r.loadedName,i.fontWeight=s,i.fontStyle=l,i.tspan=document.createElementNS(n,"svg:tspan"),i.tspan.setAttributeNS(null,"y",t(-i.y)),i.xcoords=[]},endText:function(){},setLineWidth:function(t){this.current.lineWidth=t},setLineCap:function(t){this.current.lineCap=o[t]},setLineJoin:function(t){this.current.lineJoin=s[t]},setMiterLimit:function(t){this.current.miterLimit=t},setStrokeAlpha:function(t){this.current.strokeAlpha=t},setStrokeRGBColor:function(t,e,i){var n=a.Util.makeCssRgb(t,e,i);this.current.strokeColor=n},setFillAlpha:function(t){this.current.fillAlpha=t},setFillRGBColor:function(t,e,i){var r=a.Util.makeCssRgb(t,e,i);this.current.fillColor=r,this.current.tspan=document.createElementNS(n,"svg:tspan"),this.current.xcoords=[]},setDash:function(t,e){this.current.dashArray=t,this.current.dashPhase=e},constructPath:function(e,i){var r=this.current,o=r.x,s=r.y;r.path=document.createElementNS(n,"svg:path");for(var l=[],c=e.length,u=0,h=0;u<c;u++)switch(0|e[u]){case a.OPS.rectangle:o=i[h++],s=i[h++];var p=o+i[h++],d=s+i[h++];l.push("M",t(o),t(s),"L",t(p),t(s),"L",t(p),t(d),"L",t(o),t(d),"Z");break;case a.OPS.moveTo:o=i[h++],s=i[h++],l.push("M",t(o),t(s));break;case a.OPS.lineTo:o=i[h++],s=i[h++],l.push("L",t(o),t(s));break;case a.OPS.curveTo:o=i[h+4],s=i[h+5],l.push("C",t(i[h]),t(i[h+1]),t(i[h+2]),t(i[h+3]),t(o),t(s)),h+=6;break;case a.OPS.curveTo2:o=i[h+2],s=i[h+3],l.push("C",t(o),t(s),t(i[h]),t(i[h+1]),t(i[h+2]),t(i[h+3])),h+=4;break;case a.OPS.curveTo3:o=i[h+2],s=i[h+3],l.push("C",t(i[h]),t(i[h+1]),t(o),t(s),t(o),t(s)),h+=4;break;case a.OPS.closePath:l.push("Z")}r.path.setAttributeNS(null,"d",l.join(" ")),r.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(r.path),r.element=r.path,r.setCurrentPoint(o,s)},endPath:function(){if(this.pendingClip){var t=this.current,i="clippath"+h;h++;var r=document.createElementNS(n,"svg:clipPath");r.setAttributeNS(null,"id",i),r.setAttributeNS(null,"transform",e(this.transformMatrix));var o=t.element.cloneNode();"evenodd"===this.pendingClip?o.setAttributeNS(null,"clip-rule","evenodd"):o.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(o),this.defs.appendChild(r),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach(function(t){t.clipGroup=null})),t.activeClipUrl="url(#"+i+")",this.tgrp=null}},clip:function(t){this.pendingClip=t},closePath:function(){var t=this.current,e=t.path.getAttributeNS(null,"d");e+="Z",t.path.setAttributeNS(null,"d",e)},setLeading:function(t){this.current.leading=-t},setTextRise:function(t){this.current.textRise=t},setHScale:function(t){this.current.textHScale=t/100},setGState:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e],r=n[0],o=n[1];switch(r){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,a.warn)("Unimplemented graphic state "+r)}}},fill:function(){var t=this.current;t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha)},stroke:function(){var e=this.current;e.element.setAttributeNS(null,"stroke",e.strokeColor),e.element.setAttributeNS(null,"stroke-opacity",e.strokeAlpha),e.element.setAttributeNS(null,"stroke-miterlimit",t(e.miterLimit)),e.element.setAttributeNS(null,"stroke-linecap",e.lineCap),e.element.setAttributeNS(null,"stroke-linejoin",e.lineJoin),e.element.setAttributeNS(null,"stroke-width",t(e.lineWidth)+"px"),e.element.setAttributeNS(null,"stroke-dasharray",e.dashArray.map(t).join(" ")),e.element.setAttributeNS(null,"stroke-dashoffset",t(e.dashPhase)+"px"),e.element.setAttributeNS(null,"fill","none")},eoFill:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},paintSolidColorImageMask:function(){var t=this.current,e=document.createElementNS(n,"svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",t.fillColor),this._ensureTransformGroup().appendChild(e)},paintJpegXObject:function(e,i,o){var s=this.objs.get(e),a=document.createElementNS(n,"svg:image");a.setAttributeNS(r,"xlink:href",s.src),a.setAttributeNS(null,"width",t(i)),a.setAttributeNS(null,"height",t(o)),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",t(-o)),a.setAttributeNS(null,"transform","scale("+t(1/i)+" "+t(-1/o)+")"),this._ensureTransformGroup().appendChild(a)},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,a.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(e,i){var o=e.width,s=e.height,a=c(e,this.forceDataSchema),l=document.createElementNS(n,"svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",t(o)),l.setAttributeNS(null,"height",t(s)),this.current.element=l,this.clip("nonzero");var u=document.createElementNS(n,"svg:image");u.setAttributeNS(r,"xlink:href",a),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",t(-s)),u.setAttributeNS(null,"width",t(o)+"px"),u.setAttributeNS(null,"height",t(s)+"px"),u.setAttributeNS(null,"transform","scale("+t(1/o)+" "+t(-1/s)+")"),i?i.appendChild(u):this._ensureTransformGroup().appendChild(u)},paintImageMaskXObject:function(e){var i=this.current,r=e.width,o=e.height,s=i.fillColor;i.maskId="mask"+p++;var a=document.createElementNS(n,"svg:mask");a.setAttributeNS(null,"id",i.maskId);var l=document.createElementNS(n,"svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",t(r)),l.setAttributeNS(null,"height",t(o)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask","url(#"+i.maskId+")"),this.defs.appendChild(a),this._ensureTransformGroup().appendChild(l),this.paintInlineImageXObject(e,a)},paintFormXObjectBegin:function(e,i){if((0,a.isArray)(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),(0,a.isArray)(i)&&4===i.length){var r=i[2]-i[0],o=i[3]-i[1],s=document.createElementNS(n,"svg:rect");s.setAttributeNS(null,"x",i[0]),s.setAttributeNS(null,"y",i[1]),s.setAttributeNS(null,"width",t(r)),s.setAttributeNS(null,"height",t(o)),this.current.element=s,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(t){var i=document.createElementNS(n,"svg:svg");i.setAttributeNS(null,"version","1.1"),i.setAttributeNS(null,"width",t.width+"px"),i.setAttributeNS(null,"height",t.height+"px"),i.setAttributeNS(null,"preserveAspectRatio","none"),i.setAttributeNS(null,"viewBox","0 0 "+t.width+" "+t.height);var r=document.createElementNS(n,"svg:defs");i.appendChild(r),this.defs=r;var o=document.createElementNS(n,"svg:g");return o.setAttributeNS(null,"transform",e(t.transform)),i.appendChild(o),this.svg=o,i},_ensureClipGroup:function(){if(!this.current.clipGroup){var t=document.createElementNS(n,"svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=document.createElementNS(n,"svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},i}(),n.SVGGraphics=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var n=i(0),r=i(7),o=function(){var t=1e5,e=/\S/;var i=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function o(t,o,s){var a,l=document.createElement("div"),c={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(t._textDivs.push(l),a=o.str,!e.test(a))return c.isWhitespace=!0,void t._textDivProperties.set(l,c);var u=n.Util.transform(t._viewport.transform,o.transform),h=Math.atan2(u[1],u[0]),p=s[o.fontName];p.vertical&&(h+=Math.PI/2);var d,f,m=Math.sqrt(u[2]*u[2]+u[3]*u[3]),g=m;if(p.ascent?g=p.ascent*g:p.descent&&(g=(1+p.descent)*g),0===h?(d=u[4],f=u[5]-g):(d=u[4]+g*Math.sin(h),f=u[5]-g*Math.cos(h)),i[1]=d,i[3]=f,i[5]=m,i[7]=p.fontFamily,c.style=i.join(""),l.setAttribute("style",c.style),l.textContent=o.str,(0,r.getDefaultSetting)("pdfBug")&&(l.dataset.fontName=o.fontName),0!==h&&(c.angle=h*(180/Math.PI)),o.str.length>1&&(p.vertical?c.canvasWidth=o.height*t._viewport.scale:c.canvasWidth=o.width*t._viewport.scale),t._textDivProperties.set(l,c),t._textContentStream&&t._layoutText(l),t._enhanceTextSelection){var y=1,_=0;0!==h&&(y=Math.cos(h),_=Math.sin(h));var v,b,x=(p.vertical?o.height:o.width)*t._viewport.scale,A=m;0!==h?(v=[y,_,-_,y,d,f],b=n.Util.getAxialAlignedBoundingBox([0,0,x,A],v)):b=[d,f,d+x,f+A],t._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:l,size:[x,A],m:v})}}function s(e){if(!e._canceled){var i=e._textDivs,n=e._capability,r=i.length;if(r>t)return e._renderingDone=!0,void n.resolve();if(!e._textContentStream)for(var o=0;o<r;o++)e._layoutText(i[o]);e._renderingDone=!0,n.resolve()}}function a(t){for(var e=t._bounds,i=t._viewport,r=function(t,e,i){var n=i.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}});l(t,n);var r=new Array(i.length);return n.forEach(function(t){var e=t.index;r[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}),i.map(function(e,i){var o=r[i],s=n[i];s.x1=e.top,s.y1=t-o.right,s.x2=e.bottom,s.y2=t-o.left,s.index=i,s.x1New=void 0,s.x2New=void 0}),l(e,n),n.forEach(function(t){var e=t.index;r[e].top=t.x1New,r[e].bottom=t.x2New}),r}(i.width,i.height,e),o=0;o<r.length;o++){var s=e[o].div,a=t._textDivProperties.get(s);if(0!==a.angle){var c=r[o],u=e[o],h=u.m,p=h[0],d=h[1],f=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],m=new Float64Array(64);f.forEach(function(t,e){var i=n.Util.applyTransform(t,h);m[e+0]=p&&(c.left-i[0])/p,m[e+4]=d&&(c.top-i[1])/d,m[e+8]=p&&(c.right-i[0])/p,m[e+12]=d&&(c.bottom-i[1])/d,m[e+16]=d&&(c.left-i[0])/-d,m[e+20]=p&&(c.top-i[1])/p,m[e+24]=d&&(c.right-i[0])/-d,m[e+28]=p&&(c.bottom-i[1])/p,m[e+32]=p&&(c.left-i[0])/-p,m[e+36]=d&&(c.top-i[1])/-d,m[e+40]=p&&(c.right-i[0])/-p,m[e+44]=d&&(c.bottom-i[1])/-d,m[e+48]=d&&(c.left-i[0])/d,m[e+52]=p&&(c.top-i[1])/-p,m[e+56]=d&&(c.right-i[0])/d,m[e+60]=p&&(c.bottom-i[1])/-p});var g=function(t,e,i){for(var n=0,r=0;r<i;r++){var o=t[e++];o>0&&(n=n?Math.min(o,n):o)}return n},y=1+Math.min(Math.abs(p),Math.abs(d));a.paddingLeft=g(m,32,16)/y,a.paddingTop=g(m,48,16)/y,a.paddingRight=g(m,0,16)/y,a.paddingBottom=g(m,16,16)/y,t._textDivProperties.set(s,a)}else a.paddingLeft=e[o].left-r[o].left,a.paddingTop=e[o].top-r[o].top,a.paddingRight=r[o].right-e[o].right,a.paddingBottom=r[o].bottom-e[o].bottom,t._textDivProperties.set(s,a)}}function l(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});var i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach(function(t){for(var e=0;e<i.length&&i[e].end<=t.y1;)e++;for(var n,r,o=i.length-1;o>=0&&i[o].start>=t.y2;)o--;var s,a,l=-1/0;for(s=e;s<=o;s++){var c;(c=(r=(n=i[s]).boundary).x2>t.x1?r.index>t.index?r.x1New:t.x1:void 0===r.x2New?(r.x2+t.x1)/2:r.x2New)>l&&(l=c)}for(t.x1New=l,s=e;s<=o;s++)void 0===(r=(n=i[s]).boundary).x2New?r.x2>t.x1?r.index>t.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2));var u=[],h=null;for(s=e;s<=o;s++){var p=(r=(n=i[s]).boundary).x2>t.x2?r:t;h===p?u[u.length-1].end=n.end:(u.push({start:n.start,end:n.end,boundary:p}),h=p)}for(i[e].start<t.y1&&(u[0].start=t.y1,u.unshift({start:i[e].start,end:t.y1,boundary:i[e].boundary})),t.y2<i[o].end&&(u[u.length-1].end=t.y2,u.push({start:t.y2,end:i[o].end,boundary:i[o].boundary})),s=e;s<=o;s++)if(void 0===(r=(n=i[s]).boundary).x2New){var d=!1;for(a=e-1;!d&&a>=0&&i[a].start>=r.y1;a--)d=i[a].boundary===r;for(a=o+1;!d&&a<i.length&&i[a].end<=r.y2;a++)d=i[a].boundary===r;for(a=0;!d&&a<u.length;a++)d=u[a].boundary===r;d||(r.x2New=l)}Array.prototype.splice.apply(i,[e,o-e+1].concat(u))}),i.forEach(function(e){var i=e.boundary;void 0===i.x2New&&(i.x2New=Math.max(t,i.x2))})}function c(t){var e=t.textContent,i=t.textContentStream,r=t.container,o=t.viewport,s=t.textDivs,a=t.textContentItemsStr,l=t.enhanceTextSelection;this._textContent=e,this._textContentStream=i,this._container=r,this._viewport=o,this._textDivs=s||[],this._textContentItemsStr=a||[],this._enhanceTextSelection=!!l,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}return c.prototype={get promise(){return this._capability.promise},cancel:function(){this._reader&&(this._reader.cancel(new n.AbortException("text layer task cancelled")),this._reader=null),this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function(t,e){for(var i=0,n=t.length;i<n;i++)this._textContentItemsStr.push(t[i].str),o(this,t[i],e)},_layoutText:function(t){var e=this._container,i=this._textDivProperties.get(t);if(!i.isWhitespace){var n=t.style.fontSize,o=t.style.fontFamily;n===this._layoutTextLastFontSize&&o===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=n+" "+o,this._lastFontSize=n,this._lastFontFamily=o);var s=this._layoutTextCtx.measureText(t.textContent).width,a="";0!==i.canvasWidth&&s>0&&(i.scale=i.canvasWidth/s,a="scaleX("+i.scale+")"),0!==i.angle&&(a="rotate("+i.angle+"deg) "+a),""!==a&&(i.originalTransform=a,r.CustomStyle.setProp("transform",t,a)),this._textDivProperties.set(t,i),e.appendChild(t)}},_render:function(t){var e=this,i=(0,n.createPromiseCapability)(),r=Object.create(null),o=document.createElement("canvas");if(o.mozOpaque=!0,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent){var a=this._textContent.items,l=this._textContent.styles;this._processItems(a,l),i.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function t(){e._reader.read().then(function(o){var s=o.value;o.done?i.resolve():(n.Util.extendObj(r,s.styles),e._processItems(s.items,r),t())},i.reject)}()}i.promise.then(function(){r=null,t?e._renderTimer=setTimeout(function(){s(e),e._renderTimer=null},t):s(e)},this._capability.reject)},expandTextDivs:function(t){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(a(this),this._bounds=null);for(var e=0,i=this._textDivs.length;e<i;e++){var n=this._textDivs[e],o=this._textDivProperties.get(n);if(!o.isWhitespace)if(t){var s="",l="";1!==o.scale&&(s="scaleX("+o.scale+")"),0!==o.angle&&(s="rotate("+o.angle+"deg) "+s),0!==o.paddingLeft&&(l+=" padding-left: "+o.paddingLeft/o.scale+"px;",s+=" translateX("+-o.paddingLeft/o.scale+"px)"),0!==o.paddingTop&&(l+=" padding-top: "+o.paddingTop+"px;",s+=" translateY("+-o.paddingTop+"px)"),0!==o.paddingRight&&(l+=" padding-right: "+o.paddingRight/o.scale+"px;"),0!==o.paddingBottom&&(l+=" padding-bottom: "+o.paddingBottom+"px;"),""!==l&&n.setAttribute("style",o.style+l),""!==s&&r.CustomStyle.setProp("transform",n,s)}else n.style.padding=0,r.CustomStyle.setProp("transform",n,o.originalTransform||"")}}}},function(t){var e=new c({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}}();e.renderTextLayer=o},function(t,e,i){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){"use strict";var n=i(12),r=i(19),o=i(6);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);c>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(20),r=i(6),o=i(19);t.exports=function(t){return function(e,i,s){var a,l=n(e),c=r(l.length),u=o(s,c);if(t&&i!=i){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){"use strict";var n=i(21),r=i(1)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){"use strict";t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(9),r=i(2).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){"use strict";var n=i(2),r=i(16),o=i(4),s=i(25),a=i(22),l=function t(e,i,l){var c,u,h,p,d=e&t.F,f=e&t.G,m=e&t.P,g=e&t.B,y=f?n:e&t.S?n[i]||(n[i]={}):(n[i]||{}).prototype,_=f?r:r[i]||(r[i]={}),v=_.prototype||(_.prototype={});for(c in f&&(l=i),l)h=((u=!d&&y&&void 0!==y[c])?y:l)[c],p=g&&u?a(h,n):m&&"function"==typeof h?a(Function.call,h):h,y&&s(y,c,h,e&t.U),_[c]!=h&&o(_,c,p),m&&v[c]!=h&&(v[c]=h)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){"use strict";t.exports=!i(3)&&!i(17)(function(){return 7!=Object.defineProperty(i(39)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){"use strict";var n=i(15),r=i(71),o=i(23),s=i(27)("IE_PROTO"),a=function(){},l=function(){var t,e=i(39)("iframe"),n=o.length;for(e.style.display="none",i(64).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e,i){"use strict";var n=i(46),r=i(23).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";var n=i(5),r=i(12),o=i(27)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){"use strict";var n=i(5),r=i(20),o=i(36)(!1),s=i(27)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(c,i)||c.push(i));return c}},function(t,e,i){"use strict";var n=i(25);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(2),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){"use strict";var n=i(11),r=i(6);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){"use strict";for(var n,r=i(2),o=i(4),s=i(13),a=s("typed_array"),l=s("view"),c=!(!r.ArrayBuffer||!r.DataView),u=c,h=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=r[p[h++]])?(o(n.prototype,a,!0),o(n.prototype,l,!0)):u=!1;t.exports={ABV:c,CONSTR:u,TYPED:a,VIEW:l}},function(t,e,i){"use strict";function n(t){if("string"==typeof t)t=function(t){return t.replace(/>\\376\\377([^<]+)/g,function(t,e){for(var i=e.replace(/\\([0-3])([0-7])([0-7])/g,function(t,e,i,n){return String.fromCharCode(64*e+8*i+1*n)}),n="",r=0;r<i.length;r+=2){var o=256*i.charCodeAt(r)+i.charCodeAt(r+1);n+=o>=32&&o<127&&60!==o&&62!==o&&38!==o?String.fromCharCode(o):"&#x"+(65536+o).toString(16).substring(1)+";"}return">"+n})}(t),t=(new DOMParser).parseFromString(t,"application/xml");else if(!(t instanceof Document))throw new Error("Metadata: Invalid metadata object");this.metaDocument=t,this.metadata=Object.create(null),this.parse()}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype={parse:function(){var t=this.metaDocument.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase())for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName.toLowerCase();)t=t.nextSibling;var e=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===e&&t.hasChildNodes()){var i,n,r,o,s,a,l,c=t.childNodes;for(o=0,a=c.length;o<a;o++)if("rdf:description"===(i=c[o]).nodeName.toLowerCase())for(s=0,l=i.childNodes.length;s<l;s++)"#text"!==i.childNodes[s].nodeName.toLowerCase()&&(r=(n=i.childNodes[s]).nodeName.toLowerCase(),this.metadata[r]=n.textContent.trim())}},get:function(t){return this.metadata[t]||null},has:function(t){return"undefined"!=typeof this.metadata[t]}},e.Metadata=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateRangeRequestCapabilities=void 0;var n=i(0);e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,i=t.isHttp,r=t.rangeChunkSize,o=t.disableRange;(0,n.assert)(r>0);var s={allowRangeRequests:!1,suggestedLength:void 0};if(o||!i)return s;if("bytes"!==e("Accept-Ranges"))return s;if("identity"!==(e("Content-Encoding")||"identity"))return s;var a=e("Content-Length");return a=parseInt(a,10),(0,n.isInt)(a)?(s.suggestedLength=a,a<=2*r?s:(s.allowRangeRequests=!0,s)):s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUtils=void 0;var n=i(7),r=i(0),o=function(){function t(t,e,i){var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(n);throw new Error("Error during shader compilation: "+r)}return n}function e(e,i){return t(e,i,e.VERTEX_SHADER)}function i(e,i){return t(e,i,e.FRAGMENT_SHADER)}function o(t,e){for(var i=t.createProgram(),n=0,r=e.length;n<r;++n)t.attachShader(i,e[n]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var o=t.getProgramInfoLog(i);throw new Error("Error during program linking: "+o)}return i}function s(t,e,i){t.activeTexture(i);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var a,l;function c(){a||(l=document.createElement("canvas"),a=l.getContext("webgl",{premultipliedalpha:!1}))}var u="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",h="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",p=null;var d="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",f="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",m=null;return{get isEnabled(){if((0,n.getDefaultSetting)("disableWebGL"))return!1;var t=!1;try{c(),t=!!a}catch(t){}return(0,r.shadow)(this,"isEnabled",t)},composeSMask:function(t,n,r){var d=t.width,f=t.height;p||function(){var t,n;c(),t=l,l=null,n=a,a=null;var r=o(n,[e(n,u),i(n,h)]);n.useProgram(r);var s={};s.gl=n,s.canvas=t,s.resolutionLocation=n.getUniformLocation(r,"u_resolution"),s.positionLocation=n.getAttribLocation(r,"a_position"),s.backdropLocation=n.getUniformLocation(r,"u_backdrop"),s.subtypeLocation=n.getUniformLocation(r,"u_subtype");var d=n.getAttribLocation(r,"a_texCoord"),f=n.getUniformLocation(r,"u_image"),m=n.getUniformLocation(r,"u_mask"),g=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),n.STATIC_DRAW),n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,0),n.uniform1i(f,0),n.uniform1i(m,1),p=s}();var m=p,g=m.canvas,y=m.gl;g.width=d,g.height=f,y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),y.uniform2f(m.resolutionLocation,d,f),r.backdrop?y.uniform4f(m.resolutionLocation,r.backdrop[0],r.backdrop[1],r.backdrop[2],1):y.uniform4f(m.resolutionLocation,0,0,0,0),y.uniform1i(m.subtypeLocation,"Luminosity"===r.subtype?1:0);var _=s(y,t,y.TEXTURE0),v=s(y,n,y.TEXTURE1),b=y.createBuffer();return y.bindBuffer(y.ARRAY_BUFFER,b),y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,0,d,0,0,f,0,f,d,0,d,f]),y.STATIC_DRAW),y.enableVertexAttribArray(m.positionLocation),y.vertexAttribPointer(m.positionLocation,2,y.FLOAT,!1,0,0),y.clearColor(0,0,0,0),y.enable(y.BLEND),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.clear(y.COLOR_BUFFER_BIT),y.drawArrays(y.TRIANGLES,0,6),y.flush(),y.deleteTexture(_),y.deleteTexture(v),y.deleteBuffer(b),g},drawFigures:function(t,n,r,s,u){m||function(){var t,n;c(),t=l,l=null,n=a,a=null;var r=o(n,[e(n,d),i(n,f)]);n.useProgram(r);var s={};s.gl=n,s.canvas=t,s.resolutionLocation=n.getUniformLocation(r,"u_resolution"),s.scaleLocation=n.getUniformLocation(r,"u_scale"),s.offsetLocation=n.getUniformLocation(r,"u_offset"),s.positionLocation=n.getAttribLocation(r,"a_position"),s.colorLocation=n.getAttribLocation(r,"a_color"),m=s}();var h=m,p=h.canvas,g=h.gl;p.width=t,p.height=n,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.uniform2f(h.resolutionLocation,t,n);var y,_,v,b=0;for(y=0,_=s.length;y<_;y++)switch(s[y].type){case"lattice":b+=((v=s[y].coords.length/s[y].verticesPerRow|0)-1)*(s[y].verticesPerRow-1)*6;break;case"triangles":b+=s[y].coords.length}var x=new Float32Array(2*b),A=new Uint8Array(3*b),w=u.coords,P=u.colors,E=0,T=0;for(y=0,_=s.length;y<_;y++){var S=s[y],C=S.coords,O=S.colors;switch(S.type){case"lattice":var M=S.verticesPerRow;v=C.length/M|0;for(var R=1;R<v;R++)for(var I=R*M+1,D=1;D<M;D++,I++)x[E]=w[C[I-M-1]],x[E+1]=w[C[I-M-1]+1],x[E+2]=w[C[I-M]],x[E+3]=w[C[I-M]+1],x[E+4]=w[C[I-1]],x[E+5]=w[C[I-1]+1],A[T]=P[O[I-M-1]],A[T+1]=P[O[I-M-1]+1],A[T+2]=P[O[I-M-1]+2],A[T+3]=P[O[I-M]],A[T+4]=P[O[I-M]+1],A[T+5]=P[O[I-M]+2],A[T+6]=P[O[I-1]],A[T+7]=P[O[I-1]+1],A[T+8]=P[O[I-1]+2],x[E+6]=x[E+2],x[E+7]=x[E+3],x[E+8]=x[E+4],x[E+9]=x[E+5],x[E+10]=w[C[I]],x[E+11]=w[C[I]+1],A[T+9]=A[T+3],A[T+10]=A[T+4],A[T+11]=A[T+5],A[T+12]=A[T+6],A[T+13]=A[T+7],A[T+14]=A[T+8],A[T+15]=P[O[I]],A[T+16]=P[O[I]+1],A[T+17]=P[O[I]+2],E+=12,T+=18;break;case"triangles":for(var L=0,k=C.length;L<k;L++)x[E]=w[C[L]],x[E+1]=w[C[L]+1],A[T]=P[O[L]],A[T+1]=P[O[L]+1],A[T+2]=P[O[L]+2],E+=2,T+=3}}r?g.clearColor(r[0]/255,r[1]/255,r[2]/255,1):g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT);var F=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,F),g.bufferData(g.ARRAY_BUFFER,x,g.STATIC_DRAW),g.enableVertexAttribArray(h.positionLocation),g.vertexAttribPointer(h.positionLocation,2,g.FLOAT,!1,0,0);var N=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,N),g.bufferData(g.ARRAY_BUFFER,A,g.STATIC_DRAW),g.enableVertexAttribArray(h.colorLocation),g.vertexAttribPointer(h.colorLocation,3,g.UNSIGNED_BYTE,!1,0,0),g.uniform2f(h.scaleLocation,u.scaleX,u.scaleY),g.uniform2f(h.offsetLocation,u.offsetX,u.offsetY),g.drawArrays(g.TRIANGLES,0,b),g.flush(),g.deleteBuffer(F),g.deleteBuffer(N),p},clear:function(){p&&p.canvas&&(p.canvas.width=0,p.canvas.height=0),m&&m.canvas&&(m.canvas.width=0,m.canvas.height=0),p=null,m=null}}}();e.WebGLUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFJS=e.isWorker=e.globalScope=void 0;var n,r=i(30),o=i(7),s=i(0),a=i(29),l=i(14),c=(n=l)&&n.__esModule?n:{default:n},u=i(51),h=i(32),p=i(31);var d="undefined"==typeof window;c.default.PDFJS||(c.default.PDFJS={});var f=c.default.PDFJS;f.version="1.9.489",f.build="b7fcaff0",f.pdfBug=!1,void 0!==f.verbosity&&(0,s.setVerbosityLevel)(f.verbosity),delete f.verbosity,Object.defineProperty(f,"verbosity",{get:function(){return(0,s.getVerbosityLevel)()},set:function(t){(0,s.setVerbosityLevel)(t)},enumerable:!0,configurable:!0}),f.VERBOSITY_LEVELS=s.VERBOSITY_LEVELS,f.OPS=s.OPS,f.UNSUPPORTED_FEATURES=s.UNSUPPORTED_FEATURES,f.isValidUrl=o.isValidUrl,f.shadow=s.shadow,f.createBlob=s.createBlob,f.createObjectURL=function(t,e){return(0,s.createObjectURL)(t,e,f.disableCreateObjectURL)},Object.defineProperty(f,"isLittleEndian",{configurable:!0,get:function(){return(0,s.shadow)(f,"isLittleEndian",(0,s.isLittleEndian)())}}),f.removeNullCharacters=s.removeNullCharacters,f.PasswordResponses=s.PasswordResponses,f.PasswordException=s.PasswordException,f.UnknownErrorException=s.UnknownErrorException,f.InvalidPDFException=s.InvalidPDFException,f.MissingPDFException=s.MissingPDFException,f.UnexpectedResponseException=s.UnexpectedResponseException,f.Util=s.Util,f.PageViewport=s.PageViewport,f.createPromiseCapability=s.createPromiseCapability,f.maxImageSize=void 0===f.maxImageSize?-1:f.maxImageSize,f.cMapUrl=void 0===f.cMapUrl?null:f.cMapUrl,f.cMapPacked=void 0!==f.cMapPacked&&f.cMapPacked,f.disableFontFace=void 0!==f.disableFontFace&&f.disableFontFace,f.imageResourcesPath=void 0===f.imageResourcesPath?"":f.imageResourcesPath,f.disableWorker=void 0!==f.disableWorker&&f.disableWorker,f.workerSrc=void 0===f.workerSrc?null:f.workerSrc,f.workerPort=void 0===f.workerPort?null:f.workerPort,f.disableRange=void 0!==f.disableRange&&f.disableRange,f.disableStream=void 0!==f.disableStream&&f.disableStream,f.disableAutoFetch=void 0!==f.disableAutoFetch&&f.disableAutoFetch,f.pdfBug=void 0!==f.pdfBug&&f.pdfBug,f.postMessageTransfers=void 0===f.postMessageTransfers||f.postMessageTransfers,f.disableCreateObjectURL=void 0!==f.disableCreateObjectURL&&f.disableCreateObjectURL,f.disableWebGL=void 0===f.disableWebGL||f.disableWebGL,f.externalLinkTarget=void 0===f.externalLinkTarget?o.LinkTarget.NONE:f.externalLinkTarget,f.externalLinkRel=void 0===f.externalLinkRel?o.DEFAULT_LINK_REL:f.externalLinkRel,f.isEvalSupported=void 0===f.isEvalSupported||f.isEvalSupported,f.pdfjsNext=void 0!==f.pdfjsNext&&f.pdfjsNext;var m=f.openExternalLinksInNewWindow;delete f.openExternalLinksInNewWindow,Object.defineProperty(f,"openExternalLinksInNewWindow",{get:function(){return f.externalLinkTarget===o.LinkTarget.BLANK},set:function(t){t&&(0,s.deprecated)('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.'),f.externalLinkTarget===o.LinkTarget.NONE?f.externalLinkTarget=t?o.LinkTarget.BLANK:o.LinkTarget.NONE:(0,s.warn)("PDFJS.externalLinkTarget is already initialized")},enumerable:!0,configurable:!0}),m&&(f.openExternalLinksInNewWindow=m),f.getDocument=r.getDocument,f.LoopbackPort=r.LoopbackPort,f.PDFDataRangeTransport=r.PDFDataRangeTransport,f.PDFWorker=r.PDFWorker,f.hasCanvasTypedArrays=!0,f.CustomStyle=o.CustomStyle,f.LinkTarget=o.LinkTarget,f.addLinkAttributes=o.addLinkAttributes,f.getFilenameFromUrl=o.getFilenameFromUrl,f.isExternalLinkTargetSet=o.isExternalLinkTargetSet,f.AnnotationLayer=a.AnnotationLayer,f.renderTextLayer=h.renderTextLayer,f.Metadata=u.Metadata,f.SVGGraphics=p.SVGGraphics,f.UnsupportedManager=r._UnsupportedManager,e.globalScope=c.default,e.isWorker=d,e.PDFJS=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkManager=e.PDFNetworkStream=void 0;var n,r=i(0),o=i(14),s=(n=o)&&n.__esModule?n:{default:n},a=i(52);function l(t,e){this.url=t,e=e||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null),this.loadedRequests=Object.create(null)}function c(t){var e=t.response;if("string"!=typeof e)return e;for(var i=e.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=255&e.charCodeAt(r);return n.buffer}var u=function(){try{var t=new XMLHttpRequest;return t.open("GET",s.default.location.href),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(t){return!1}}();function h(t){this._options=t;var e=t.source;this._manager=new l(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}function p(t,e){this._manager=t;var i=e.source,n={onHeadersReceived:this._onHeadersReceived.bind(this),onProgressiveData:i.disableStream?null:this._onProgressiveData.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this.onProgress=null}function d(t,e,i){this._manager=t;var n={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}l.prototype={requestRange:function(t,e,i){var n={begin:t,end:e};for(var r in i)n[r]=i[r];return this.request(n)},requestFull:function(t){return this.request(t)},request:function(t){var e=this.getXhr(),i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};for(var r in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var o=this.httpHeaders[r];"undefined"!=typeof o&&e.setRequestHeader(r,o)}if(this.isHttp&&"begin"in t&&"end"in t){var s=t.begin+"-"+(t.end-1);e.setRequestHeader("Range","bytes="+s),n.expectedStatus=206}else n.expectedStatus=200;return u&&!!t.onProgressiveData?(e.responseType="moz-chunked-arraybuffer",n.onProgressiveData=t.onProgressiveData,n.mozChunked=!0):e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i},onProgress:function(t,e){var i=this.pendingRequests[t];if(i){if(i.mozChunked){var n=c(i.xhr);i.onProgressiveData(n)}var r=i.onProgress;r&&r(e)}},onStateChange:function(t,e){var i=this.pendingRequests[t];if(i){var n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4===n.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===n.status&&this.isHttp)i.onError&&i.onError(n.status);else{var r=n.status||200;if(200===r&&206===i.expectedStatus||r===i.expectedStatus){this.loadedRequests[t]=!0;var o=c(n);if(206===r){var s=n.getResponseHeader("Content-Range"),a=/bytes (\d+)-(\d+)\/(\d+)/.exec(s),l=parseInt(a[1],10);i.onDone({begin:l,chunk:o})}else i.onProgressiveData?i.onDone(null):o?i.onDone({begin:0,chunk:o}):i.onError&&i.onError(n.status)}else i.onError&&i.onError(n.status)}}},hasPendingRequests:function(){for(var t in this.pendingRequests)return!0;return!1},getRequestXhr:function(t){return this.pendingRequests[t].xhr},isStreamingRequest:function(t){return!!this.pendingRequests[t].onProgressiveData},isPendingRequest:function(t){return t in this.pendingRequests},isLoadedRequest:function(t){return t in this.loadedRequests},abortAllRequests:function(){for(var t in this.pendingRequests)this.abortRequest(0|t)},abortRequest:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},h.prototype={_onRangeRequestReaderClosed:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)},getFullReader:function(){return(0,r.assert)(!this._fullRequestReader),this._fullRequestReader=new p(this._manager,this._options),this._fullRequestReader},getRangeReader:function(t,e){var i=new d(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach(function(e){e.cancel(t)})}},p.prototype={_onHeadersReceived:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=(0,a.validateRangeRequestCapabilities)({getResponseHeader:function(t){return e.getResponseHeader(t)},isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),n=i.allowRangeRequests,r=i.suggestedLength;this._contentLength=r||this._contentLength,n&&(this._isRangeSupported=!0);var o=this._manager;o.isStreamingRequest(t)?this._isStreamingSupported=!0:this._isRangeSupported&&o.abortRequest(t),this._headersReceivedCapability.resolve()},_onProgressiveData:function(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t)},_onDone:function(t){t&&this._onProgressiveData(t.chunk),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[])},_onError:function(t){var e,i=this._url;e=404===t||0===t&&/^file:/.test(i)?new r.MissingPDFException('Missing PDF "'+i+'".'):new r.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+i+'".',t),this._storedError=e,this._headersReceivedCapability.reject(e),this._requests.forEach(function(t){t.reject(e)}),this._requests=[],this._cachedChunks=[]},_onProgress:function(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})},get isRangeSupported(){return this._isRangeSupported},get isStreamingSupported(){return this._isStreamingSupported},get contentLength(){return this._contentLength},get headersReady(){return this._headersReceivedCapability.promise},read:function(){if(this._storedError)return Promise.reject(this._storedError);if(this._cachedChunks.length>0){var t=this._cachedChunks.shift();return Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},d.prototype={_close:function(){this.onClosed&&this.onClosed(this)},_onDone:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._close()},_onProgress:function(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})},get isStreamingSupported(){return!1},read:function(){if(null!==this._queuedChunk){var t=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},e.PDFNetworkStream=h,e.NetworkManager=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(0),s=n(52);function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=i(3),h=i(4),p=i(5),d=i("7UKz"),f=function(){function t(e){c(this,t),this.options=e,this.source=e.source,this.url=d.parse(this.source.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol||!this.url.host,this.httpHeaders=this.isHttp&&this.source.httpHeaders||{},this._fullRequest=null,this._rangeRequestReaders=[]}return r(t,[{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequest),this._fullRequest=this.isFsUrl?new b(this):new _(this),this._fullRequest}},{key:"getRangeReader",value:function(t,e){var i=this.isFsUrl?new x(this,t,e):new v(this,t,e);return this._rangeRequestReaders.push(i),i}},{key:"cancelAllRequests",value:function(t){this._fullRequest&&this._fullRequest.cancel(t),this._rangeRequestReaders.slice(0).forEach(function(e){e.cancel(t)})}}]),t}(),m=function(){function t(e){c(this,t),this._url=e.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null,this._contentLength=e.source.length,this._loaded=0,this._disableRange=e.options.disableRange||!1,this._rangeChunkSize=e.source.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.source.disableStream,this._isRangeSupported=!e.options.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}return r(t,[{key:"read",value:function(){var t=this;return this._readCapability.promise.then(function(){if(t._done)return Promise.resolve({value:void 0,done:!0});if(t._errored)return Promise.reject(t._reason);var e=t._readableStream.read();if(null===e)return t._readCapability=(0,o.createPromiseCapability)(),t.read();t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded,total:t._contentLength});var i=new Uint8Array(e).buffer;return Promise.resolve({value:i,done:!1})})}},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._errored=!0,this._reason=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),this._errored&&this._readableStream.destroy(this._reason)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),g=function(){function t(e){c(this,t),this._url=e.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!e.source.disableStream}return r(t,[{key:"read",value:function(){var t=this;return this._readCapability.promise.then(function(){if(t._done)return Promise.resolve({value:void 0,done:!0});if(t._errored)return Promise.reject(t._reason);var e=t._readableStream.read();if(null===e)return t._readCapability=(0,o.createPromiseCapability)(),t.read();t._loaded+=e.length,t.onProgress&&t.onProgress({loaded:t._loaded});var i=new Uint8Array(e).buffer;return Promise.resolve({value:i,done:!1})})}},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._errored=!0,this._reason=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),this._errored&&this._readableStream.destroy(this._reason)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}();function y(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var _=function(t){function e(t){c(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(e){i._headersCapability.resolve(),i._setReadableStream(e);var n=(0,s.validateRangeRequestCapabilities)({getResponseHeader:function(t){return i._readableStream.headers[t.toLowerCase()]},isHttp:t.isHttp,rangeChunkSize:i._rangeChunkSize,disableRange:i._disableRange}),r=n.allowRangeRequests,o=n.suggestedLength;r&&(i._isRangeSupported=!0),i._contentLength=o};return i._request=null,"http:"===i._url.protocol?i._request=h.request(y(i._url,t.httpHeaders),n):i._request=p.request(y(i._url,t.httpHeaders),n),i._request.on("error",function(t){i._errored=!0,i._reason=t,i._headersCapability.reject(t)}),i._request.end(),i}return l(e,m),e}(),v=function(t){function e(t,i,n){c(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));for(var o in r._httpHeaders={},t.httpHeaders){var s=t.httpHeaders[o];"undefined"!=typeof s&&(r._httpHeaders[o]=s)}return r._httpHeaders.Range="bytes="+i+"-"+(n-1),r._request=null,"http:"===r._url.protocol?r._request=h.request(y(r._url,r._httpHeaders),function(t){r._setReadableStream(t)}):r._request=p.request(y(r._url,r._httpHeaders),function(t){r._setReadableStream(t)}),r._request.on("error",function(t){r._errored=!0,r._reason=t}),r._request.end(),r}return l(e,g),e}(),b=function(t){function e(t){c(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._setReadableStream(u.createReadStream(i._url.path)),u.lstat(i._url.path,function(t,e){if(t)return i._errored=!0,i._reason=t,void i._headersCapability.reject(t);i._contentLength=e.size,i._headersCapability.resolve()}),i}return l(e,m),e}(),x=function(t){function e(t,i,n){c(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._setReadableStream(u.createReadStream(r._url.path,{start:i,end:n-1})),r}return l(e,g),e}();e.PDFNodeStream=f},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){for(var i in e)t[i]=e[i]}(e,function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e,i){var r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":n(t)},o=i(1).assert;function s(t){return"string"==typeof t||"symbol"===("undefined"==typeof t?"undefined":r(t))}function a(t,e,i){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,i)}e.typeIsObject=function(t){return"object"===("undefined"==typeof t?"undefined":r(t))&&null!==t||"function"==typeof t},e.createDataProperty=function(t,i,n){o(e.typeIsObject(t)),Object.defineProperty(t,i,{value:n,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,i,n,r){new Uint8Array(t).set(new Uint8Array(i,n,r),e)},e.CreateIterResultObject=function(t,e){o("boolean"==typeof e);var i={};return Object.defineProperty(i,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(i,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),i},e.IsFiniteNonNegativeNumber=function(t){return!Number.isNaN(t)&&(t!==1/0&&!(t<0))},e.InvokeOrNoop=function(t,e,i){o(void 0!==t),o(s(e)),o(Array.isArray(i));var n=t[e];if(void 0!==n)return a(n,t,i)},e.PromiseInvokeOrNoop=function(t,i,n){o(void 0!==t),o(s(i)),o(Array.isArray(n));try{return Promise.resolve(e.InvokeOrNoop(t,i,n))}catch(t){return Promise.reject(t)}},e.PromiseInvokeOrPerformFallback=function(t,e,i,n,r){o(void 0!==t),o(s(e)),o(Array.isArray(i)),o(Array.isArray(r));var l=void 0;try{l=t[e]}catch(t){return Promise.reject(t)}if(void 0===l)return n.apply(null,r);try{return Promise.resolve(a(l,t,i))}catch(t){return Promise.reject(t)}},e.TransferArrayBuffer=function(t){return t.slice()},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),Number.isNaN(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.ValidateAndNormalizeQueuingStrategy=function(t,i){if(void 0!==t&&"function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return{size:t,highWaterMark:i=e.ValidateAndNormalizeHighWaterMark(i)}}},function(t,e,i){function n(t){this.name="AssertionError",this.message=t||"",this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports={rethrowAssertionErrorRejection:function(t){t&&t.constructor===n&&setTimeout(function(){throw t},0)},AssertionError:n,assert:function(t,e){if(!t)throw new n(e)}}},function(t,e,i){var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(0),s=o.InvokeOrNoop,a=o.PromiseInvokeOrNoop,l=o.ValidateAndNormalizeQueuingStrategy,c=o.typeIsObject,u=i(1),h=u.assert,p=u.rethrowAssertionErrorRejection,d=i(3),f=d.DequeueValue,m=d.EnqueueValueWithSize,g=d.PeekQueueValue,y=d.ResetQueue,_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.size,o=i.highWaterMark,s=void 0===o?1:o;if(r(this,t),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1,void 0!==e.type)throw new RangeError("Invalid type is specified");this._writableStreamController=new B(this,e,n,s),this._writableStreamController.__startSteps()}return n(t,[{key:"abort",value:function(t){return!1===b(this)?Promise.reject(W("abort")):!0===x(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):A(this,t)}},{key:"getWriter",value:function(){if(!1===b(this))throw W("getWriter");return v(this)}},{key:"locked",get:function(){if(!1===b(this))throw W("locked");return x(this)}}]),t}();function v(t){return new R(t)}function b(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function x(t){return h(!0===b(t),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==t._writer}function A(t,e){var i=t._state;if("closed"===i)return Promise.resolve(void 0);if("errored"===i)return Promise.reject(t._storedError);var n=new TypeError("Requested to abort");if(void 0!==t._pendingAbortRequest)return Promise.reject(n);h("writable"===i||"erroring"===i,"state must be writable or erroring");var r=!1;"erroring"===i&&(r=!0,e=void 0);var o=new Promise(function(i,n){t._pendingAbortRequest={_resolve:i,_reject:n,_reason:e,_wasAlreadyErroring:r}});return!1===r&&P(t,n),o}function w(t,e){var i=t._state;"writable"!==i?(h("erroring"===i),E(t)):P(t,e)}function P(t,e){h(void 0===t._storedError,"stream._storedError === undefined"),h("writable"===t._state,"state must be writable");var i=t._writableStreamController;h(void 0!==i,"controller must not be undefined"),t._state="erroring",t._storedError=e;var n=t._writer;void 0!==n&&k(n,e),!1===C(t)&&!0===i._started&&E(t)}function E(t){h("erroring"===t._state,"stream._state === erroring"),h(!1===C(t),"WritableStreamHasOperationMarkedInFlight(stream) === false"),t._state="errored",t._writableStreamController.__errorSteps();for(var e=t._storedError,i=0;i<t._writeRequests.length;i++){t._writeRequests[i]._reject(e)}if(t._writeRequests=[],void 0!==t._pendingAbortRequest){var n=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===n._wasAlreadyErroring)return n._reject(e),void O(t);t._writableStreamController.__abortSteps(n._reason).then(function(){n._resolve(),O(t)},function(e){n._reject(e),O(t)})}else O(t)}function T(t){h(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var e=t._state;h("writable"===e||"erroring"===e),"erroring"===e&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var i=t._writer;void 0!==i&&function(t){h(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),h(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),h("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(i),h(void 0===t._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),h(void 0===t._storedError,"stream._storedError === undefined")}function S(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function C(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function O(t){h("errored"===t._state,'_stream_.[[state]] is `"errored"`'),void 0!==t._closeRequest&&(h(void 0===t._inFlightCloseRequest),t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(q(e,t._storedError),e._closedPromise.catch(function(){}))}function M(t,e){h("writable"===t._state),h(!1===S(t));var i=t._writer;void 0!==i&&e!==t._backpressure&&(!0===e?function(t){h(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),h(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=new Promise(function(e,i){t._readyPromise_resolve=e,t._readyPromise_reject=i}),t._readyPromiseState="pending"}(i):(h(!1===e),Z(i))),t._backpressure=e}t.exports={AcquireWritableStreamDefaultWriter:v,IsWritableStream:b,IsWritableStreamLocked:x,WritableStream:_,WritableStreamAbort:A,WritableStreamDefaultControllerError:G,WritableStreamDefaultWriterCloseWithErrorPropagation:function(t){var e=t._ownerWritableStream;h(void 0!==e);var i=e._state;if(!0===S(e)||"closed"===i)return Promise.resolve();if("errored"===i)return Promise.reject(e._storedError);return h("writable"===i||"erroring"===i),D(t)},WritableStreamDefaultWriterRelease:F,WritableStreamDefaultWriterWrite:N,WritableStreamCloseQueuedOrInFlight:S};var R=function(){function t(e){if(r(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===x(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var i,n=e._state;if("writable"===n)!1===S(e)&&!0===e._backpressure?((i=this)._readyPromise=new Promise(function(t,e){i._readyPromise_resolve=t,i._readyPromise_reject=e}),i._readyPromiseState="pending"):Q(this),Y(this);else if("erroring"===n)K(this,e._storedError),this._readyPromise.catch(function(){}),Y(this);else if("closed"===n)Q(this),function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(this);else{h("errored"===n,"state must be errored");var o=e._storedError;K(this,o),this._readyPromise.catch(function(){}),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}(this,o),this._closedPromise.catch(function(){})}}return n(t,[{key:"abort",value:function(t){return!1===I(this)?Promise.reject(H("abort")):void 0===this._ownerWritableStream?Promise.reject(X("abort")):function(t,e){var i=t._ownerWritableStream;return h(void 0!==i),A(i,e)}(this,t)}},{key:"close",value:function(){if(!1===I(this))return Promise.reject(H("close"));var t=this._ownerWritableStream;return void 0===t?Promise.reject(X("close")):!0===S(t)?Promise.reject(new TypeError("cannot close an already-closing stream")):D(this)}},{key:"releaseLock",value:function(){if(!1===I(this))throw H("releaseLock");var t=this._ownerWritableStream;void 0!==t&&(h(void 0!==t._writer),F(this))}},{key:"write",value:function(t){return!1===I(this)?Promise.reject(H("write")):void 0===this._ownerWritableStream?Promise.reject(X("write to")):N(this,t)}},{key:"closed",get:function(){return!1===I(this)?Promise.reject(H("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===I(this))throw H("desiredSize");if(void 0===this._ownerWritableStream)throw X("desiredSize");return function(t){var e=t._ownerWritableStream,i=e._state;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return V(e._writableStreamController)}(this)}},{key:"ready",get:function(){return!1===I(this)?Promise.reject(H("ready")):this._readyPromise}}]),t}();function I(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function D(t){var e=t._ownerWritableStream;h(void 0!==e);var i=e._state;if("closed"===i||"errored"===i)return Promise.reject(new TypeError("The stream (in "+i+" state) is not in the writable state and cannot be closed"));h("writable"===i||"erroring"===i),h(!1===S(e));var n,r=new Promise(function(t,i){var n={_resolve:t,_reject:i};e._closeRequest=n});return!0===e._backpressure&&"writable"===i&&Z(t),n=e._writableStreamController,m(n,"close",0),z(n),r}function L(t,e){"pending"===t._closedPromiseState?q(t,e):function(t,e){h(void 0===t._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),h(void 0===t._closedPromise_reject,"writer._closedPromise_reject === undefined"),h("pending"!==t._closedPromiseState,"writer._closedPromiseState is not pending"),t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}(t,e),t._closedPromise.catch(function(){})}function k(t,e){"pending"===t._readyPromiseState?function(t,e){h(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),h(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}(t,e):function(t,e){h(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),h(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}(t,e),t._readyPromise.catch(function(){})}function F(t){var e=t._ownerWritableStream;h(void 0!==e),h(e._writer===t);var i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");k(t,i),L(t,i),e._writer=void 0,t._ownerWritableStream=void 0}function N(t,e){var i=t._ownerWritableStream;h(void 0!==i);var n=i._writableStreamController,r=function(t,e){var i=t._strategySize;if(void 0===i)return 1;try{return i(e)}catch(e){return U(t,e),1}}(n,e);if(i!==t._ownerWritableStream)return Promise.reject(X("write to"));var o=i._state;if("errored"===o)return Promise.reject(i._storedError);if(!0===S(i)||"closed"===o)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return Promise.reject(i._storedError);h("writable"===o);var s=function(t){return h(!0===x(t)),h("writable"===t._state),new Promise(function(e,i){var n={_resolve:e,_reject:i};t._writeRequests.push(n)})}(i);return function(t,e,i){var n={chunk:e};try{m(t,n,i)}catch(e){return void U(t,e)}var r=t._controlledWritableStream;if(!1===S(r)&&"writable"===r._state){var o=j(t);M(r,o)}z(t)}(n,e,r),s}var B=function(){function t(e,i,n,o){if(r(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==e._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=i,this._queue=void 0,this._queueTotalSize=void 0,y(this),this._started=!1;var s=l(n,o);this._strategySize=s.size,this._strategyHWM=s.highWaterMark,M(e,j(this))}return n(t,[{key:"error",value:function(t){if(!1===function(t){if(!c(t))return!1;if(!Object.prototype.hasOwnProperty.call(t,"_underlyingSink"))return!1;return!0}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&G(this,t)}},{key:"__abortSteps",value:function(t){return a(this._underlyingSink,"abort",[t])}},{key:"__errorSteps",value:function(){y(this)}},{key:"__startSteps",value:function(){var t=this,e=s(this._underlyingSink,"start",[this]),i=this._controlledWritableStream;Promise.resolve(e).then(function(){h("writable"===i._state||"erroring"===i._state),t._started=!0,z(t)},function(e){h("writable"===i._state||"erroring"===i._state),t._started=!0,w(i,e)}).catch(p)}}]),t}();function V(t){return t._strategyHWM-t._queueTotalSize}function z(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var i=e._state;if("closed"!==i&&"errored"!==i)if("erroring"!==i){if(0!==t._queue.length){var n=g(t);"close"===n?function(t){var e=t._controlledWritableStream;(function(t){h(void 0===t._inFlightCloseRequest),h(void 0!==t._closeRequest),t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0})(e),f(t),h(0===t._queue.length,"queue must be empty once the final write record is dequeued"),a(t._underlyingSink,"close",[]).then(function(){T(e)},function(t){!function(t,e){h(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,h("writable"===t._state||"erroring"===t._state),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),w(t,e)}(e,t)}).catch(p)}(t):function(t,e){var i=t._controlledWritableStream;(function(t){h(void 0===t._inFlightWriteRequest,"there must be no pending write request"),h(0!==t._writeRequests.length,"writeRequests must not be empty"),t._inFlightWriteRequest=t._writeRequests.shift()})(i),a(t._underlyingSink,"write",[e,t]).then(function(){!function(t){h(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}(i);var e=i._state;if(h("writable"===e||"erroring"===e),f(t),!1===S(i)&&"writable"===e){var n=j(t);M(i,n)}z(t)},function(t){!function(t,e){h(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,h("writable"===t._state||"erroring"===t._state),w(t,e)}(i,t)}).catch(p)}(t,n.chunk)}}else E(e)}}function U(t,e){"writable"===t._controlledWritableStream._state&&G(t,e)}function j(t){return V(t)<=0}function G(t,e){var i=t._controlledWritableStream;h("writable"===i._state),P(i,e)}function W(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function H(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function X(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Y(t){t._closedPromise=new Promise(function(e,i){t._closedPromise_resolve=e,t._closedPromise_reject=i,t._closedPromiseState="pending"})}function q(t,e){h(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),h(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),h("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function K(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function Q(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function Z(t){h(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),h(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}},function(t,e,i){var n=i(0).IsFiniteNonNegativeNumber,r=i(1).assert;e.DequeueValue=function(t){r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),r(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},e.EnqueueValueWithSize=function(t,e,i){if(r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),i=Number(i),!n(i))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:i}),t._queueTotalSize+=i},e.PeekQueueValue=function(t){return r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),r(t._queue.length>0,"Spec-level failure: should never peek at an empty queue."),t._queue[0].value},e.ResetQueue=function(t){r("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}},function(t,e,i){var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(0),s=o.ArrayBufferCopy,a=o.CreateIterResultObject,l=o.IsFiniteNonNegativeNumber,c=o.InvokeOrNoop,u=o.PromiseInvokeOrNoop,h=o.TransferArrayBuffer,p=o.ValidateAndNormalizeQueuingStrategy,d=o.ValidateAndNormalizeHighWaterMark,f=i(0),m=f.createArrayFromList,g=f.createDataProperty,y=f.typeIsObject,_=i(1),v=_.assert,b=_.rethrowAssertionErrorRejection,x=i(3),A=x.DequeueValue,w=x.EnqueueValueWithSize,P=x.ResetQueue,E=i(2),T=E.AcquireWritableStreamDefaultWriter,S=E.IsWritableStream,C=E.IsWritableStreamLocked,O=E.WritableStreamAbort,M=E.WritableStreamDefaultWriterCloseWithErrorPropagation,R=E.WritableStreamDefaultWriterRelease,I=E.WritableStreamDefaultWriterWrite,D=E.WritableStreamCloseQueuedOrInFlight,L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.size,o=i.highWaterMark;r(this,t),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var s=e.type;if("bytes"===String(s))void 0===o&&(o=0),this._readableStreamController=new pt(this,e,o);else{if(void 0!==s)throw new RangeError("Invalid type is specified");void 0===o&&(o=1),this._readableStreamController=new nt(this,e,n,o)}}return n(t,[{key:"cancel",value:function(t){return!1===F(this)?Promise.reject(Ot("cancel")):!0===N(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):U(this,t)}},{key:"getReader",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mode;if(!1===F(this))throw Ot("getReader");if(void 0===t)return k(this);if("byob"===(t=String(t)))return new Q(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(t,e){var i=t.writable,n=t.readable;return function(t){try{Promise.prototype.then.call(t,void 0,function(){})}catch(t){}}(this.pipeTo(i,e)),n}},{key:"pipeTo",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.preventClose,r=i.preventAbort,o=i.preventCancel;if(!1===F(this))return Promise.reject(Ot("pipeTo"));if(!1===S(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(n=Boolean(n),r=Boolean(r),o=Boolean(o),!0===N(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===C(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var s=k(this),a=T(t),l=!1,c=Promise.resolve();return new Promise(function(i,u){var h,p,d;if(g(e,s._closedPromise,function(e){!1===r?y(function(){return O(t,e)},!0,e):_(!0,e)}),g(t,a._closedPromise,function(t){!1===o?y(function(){return U(e,t)},!0,t):_(!0,t)}),h=e,p=s._closedPromise,d=function(){!1===n?y(function(){return M(a)}):_()},"closed"===h._state?d():p.then(d).catch(b),!0===D(t)||"closed"===t._state){var f=new TypeError("the destination writable stream closed before all data could be piped to it");!1===o?y(function(){return U(e,f)},!0,f):_(!0,f)}function m(){var t=c;return c.then(function(){return t!==c?m():void 0})}function g(t,e,i){"errored"===t._state?i(t._storedError):e.catch(i).catch(b)}function y(e,i,n){function r(){e().then(function(){return v(i,n)},function(t){return v(!0,t)}).catch(b)}!0!==l&&(l=!0,"writable"===t._state&&!1===D(t)?m().then(r):r())}function _(e,i){!0!==l&&(l=!0,"writable"===t._state&&!1===D(t)?m().then(function(){return v(e,i)}).catch(b):v(e,i))}function v(t,e){R(a),et(s),t?u(e):i(void 0)}(function t(){return c=Promise.resolve(),!0===l?Promise.resolve():a._readyPromise.then(function(){return it(s).then(function(t){var e=t.value;!0!==t.done&&(c=I(a,e).catch(function(){}))})}).then(t)})().catch(function(t){c=Promise.resolve(),b(t)})})}},{key:"tee",value:function(){if(!1===F(this))throw Ot("tee");var t=B(this,!1);return m(t)}},{key:"locked",get:function(){if(!1===F(this))throw Ot("locked");return N(this)}}]),t}();function k(t){return new K(t)}function F(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function N(t){return v(!0===F(t),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==t._reader}function B(t,e){v(!0===F(t)),v("boolean"==typeof e);var i=k(t),n={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};n.promise=new Promise(function(t){n._resolve=t});var r=function(){return function t(){var e=t._reader,i=t._branch1,n=t._branch2,r=t._teeState;return it(e).then(function(t){v(y(t));var e=t.value,o=t.done;if(v("boolean"==typeof o),!0===o&&!1===r.closedOrErrored&&(!1===r.canceled1&&st(i),!1===r.canceled2&&st(n),r.closedOrErrored=!0),!0!==r.closedOrErrored){var s=e,a=e;!1===r.canceled1&&at(i,s),!1===r.canceled2&&at(n,a)}})}}();r._reader=i,r._teeState=n,r._cloneForBranch2=e;var o=function(){return function t(e){var i=t._stream,n=t._teeState;n.canceled1=!0;n.reason1=e;if(!0===n.canceled2){var r=m([n.reason1,n.reason2]),o=U(i,r);n._resolve(o)}return n.promise}}();o._stream=t,o._teeState=n;var s=function(){return function t(e){var i=t._stream,n=t._teeState;n.canceled2=!0;n.reason2=e;if(!0===n.canceled1){var r=m([n.reason1,n.reason2]),o=U(i,r);n._resolve(o)}return n.promise}}();s._stream=t,s._teeState=n;var a=Object.create(Object.prototype);g(a,"pull",r),g(a,"cancel",o);var l=new L(a),c=Object.create(Object.prototype);g(c,"pull",r),g(c,"cancel",s);var u=new L(c);return r._branch1=l._readableStreamController,r._branch2=u._readableStreamController,i._closedPromise.catch(function(t){!0!==n.closedOrErrored&&(lt(r._branch1,t),lt(r._branch2,t),n.closedOrErrored=!0)}),[l,u]}function V(t){return v(!0===Z(t._reader)),v("readable"===t._state||"closed"===t._state),new Promise(function(e,i){var n={_resolve:e,_reject:i};t._reader._readIntoRequests.push(n)})}function z(t){return v(!0===J(t._reader)),v("readable"===t._state),new Promise(function(e,i){var n={_resolve:e,_reject:i};t._reader._readRequests.push(n)})}function U(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(j(t),t._readableStreamController.__cancelSteps(e).then(function(){}))}function j(t){v("readable"===t._state),t._state="closed";var e=t._reader;if(void 0!==e){if(!0===J(e)){for(var i=0;i<e._readRequests.length;i++){(0,e._readRequests[i]._resolve)(a(void 0,!0))}e._readRequests=[]}!function(t){v(void 0!==t._closedPromise_resolve),v(void 0!==t._closedPromise_reject),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(e)}}function G(t,e){v(!0===F(t),"stream must be ReadableStream"),v("readable"===t._state,"state must be readable"),t._state="errored",t._storedError=e;var i=t._reader;if(void 0!==i){if(!0===J(i)){for(var n=0;n<i._readRequests.length;n++){i._readRequests[n]._reject(e)}i._readRequests=[]}else{v(Z(i),"reader must be ReadableStreamBYOBReader");for(var r=0;r<i._readIntoRequests.length;r++){i._readIntoRequests[r]._reject(e)}i._readIntoRequests=[]}It(i,e),i._closedPromise.catch(function(){})}}function W(t,e,i){var n=t._reader;v(n._readRequests.length>0),n._readRequests.shift()._resolve(a(e,i))}function H(t){return t._reader._readIntoRequests.length}function X(t){return t._reader._readRequests.length}function Y(t){var e=t._reader;return void 0!==e&&!1!==Z(e)}function q(t){var e=t._reader;return void 0!==e&&!1!==J(e)}t.exports={ReadableStream:L,IsReadableStreamDisturbed:function(t){return v(!0===F(t),"IsReadableStreamDisturbed should only be used on known readable streams"),t._disturbed},ReadableStreamDefaultControllerClose:st,ReadableStreamDefaultControllerEnqueue:at,ReadableStreamDefaultControllerError:lt,ReadableStreamDefaultControllerGetDesiredSize:ut};var K=function(){function t(e){if(r(this,t),!1===F(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===N(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");$(this,e),this._readRequests=[]}return n(t,[{key:"cancel",value:function(t){return!1===J(this)?Promise.reject(Rt("cancel")):void 0===this._ownerReadableStream?Promise.reject(Mt("cancel")):tt(this,t)}},{key:"read",value:function(){return!1===J(this)?Promise.reject(Rt("read")):void 0===this._ownerReadableStream?Promise.reject(Mt("read from")):it(this)}},{key:"releaseLock",value:function(){if(!1===J(this))throw Rt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");et(this)}}},{key:"closed",get:function(){return!1===J(this)?Promise.reject(Rt("closed")):this._closedPromise}}]),t}(),Q=function(){function t(e){if(r(this,t),!F(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===dt(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(N(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");$(this,e),this._readIntoRequests=[]}return n(t,[{key:"cancel",value:function(t){return Z(this)?void 0===this._ownerReadableStream?Promise.reject(Mt("cancel")):tt(this,t):Promise.reject(Dt("cancel"))}},{key:"read",value:function(t){return Z(this)?void 0===this._ownerReadableStream?Promise.reject(Mt("read from")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(t,e){var i=t._ownerReadableStream;if(v(void 0!==i),i._disturbed=!0,"errored"===i._state)return Promise.reject(i._storedError);return function(t,e){var i=t._controlledReadableStream,n=1;e.constructor!==DataView&&(n=e.constructor.BYTES_PER_ELEMENT);var r=e.constructor,o={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:n,ctor:r,readerType:"byob"};if(t._pendingPullIntos.length>0)return o.buffer=h(o.buffer),t._pendingPullIntos.push(o),V(i);if("closed"===i._state){var s=new e.constructor(o.buffer,o.byteOffset,0);return Promise.resolve(a(s,!0))}if(t._queueTotalSize>0){if(!0===bt(t,o)){var l=_t(o);return At(t),Promise.resolve(a(l,!1))}if(!0===t._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return St(t,c),Promise.reject(c)}}o.buffer=h(o.buffer),t._pendingPullIntos.push(o);var u=V(i);return mt(t),u}(i._readableStreamController,e)}(this,t):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Dt("read"))}},{key:"releaseLock",value:function(){if(!Z(this))throw Dt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");et(this)}}},{key:"closed",get:function(){return Z(this)?this._closedPromise:Promise.reject(Dt("closed"))}}]),t}();function Z(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function J(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function $(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?function(t){t._closedPromise=new Promise(function(e,i){t._closedPromise_resolve=e,t._closedPromise_reject=i})}(t):"closed"===e._state?function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t):(v("errored"===e._state,"state must be errored"),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t,e._storedError),t._closedPromise.catch(function(){}))}function tt(t,e){var i=t._ownerReadableStream;return v(void 0!==i),U(i,e)}function et(t){v(void 0!==t._ownerReadableStream),v(t._ownerReadableStream._reader===t),"readable"===t._ownerReadableStream._state?It(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){v(void 0===t._closedPromise_resolve),v(void 0===t._closedPromise_reject),t._closedPromise=Promise.reject(e)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch(function(){}),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function it(t){var e=t._ownerReadableStream;return v(void 0!==e),e._disturbed=!0,"closed"===e._state?Promise.resolve(a(void 0,!0)):"errored"===e._state?Promise.reject(e._storedError):(v("readable"===e._state),e._readableStreamController.__pullSteps())}var nt=function(){function t(e,i,n,o){if(r(this,t),!1===F(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=i,this._queue=void 0,this._queueTotalSize=void 0,P(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var s=p(n,o);this._strategySize=s.size,this._strategyHWM=s.highWaterMark;var a=this,l=c(i,"start",[this]);Promise.resolve(l).then(function(){a._started=!0,v(!1===a._pulling),v(!1===a._pullAgain),ot(a)},function(t){ct(a,t)}).catch(b)}return n(t,[{key:"close",value:function(){if(!1===rt(this))throw Lt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");st(this)}},{key:"enqueue",value:function(t){if(!1===rt(this))throw Lt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");return at(this,t)}},{key:"error",value:function(t){if(!1===rt(this))throw Lt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");lt(this,t)}},{key:"__cancelSteps",value:function(t){return P(this),u(this._underlyingSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(this._queue.length>0){var e=A(this);return!0===this._closeRequested&&0===this._queue.length?j(t):ot(this),Promise.resolve(a(e,!1))}var i=z(t);return ot(this),i}},{key:"desiredSize",get:function(){if(!1===rt(this))throw Lt("desiredSize");return ut(this)}}]),t}();function rt(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSource")}function ot(t){!1!==function(t){var e=t._controlledReadableStream;if("closed"===e._state||"errored"===e._state)return!1;if(!0===t._closeRequested)return!1;if(!1===t._started)return!1;if(!0===N(e)&&X(e)>0)return!0;if(ut(t)>0)return!0;return!1}(t)&&(!0!==t._pulling?(v(!1===t._pullAgain),t._pulling=!0,u(t._underlyingSource,"pull",[t]).then(function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,ot(t)},function(e){ct(t,e)}).catch(b)):t._pullAgain=!0)}function st(t){var e=t._controlledReadableStream;v(!1===t._closeRequested),v("readable"===e._state),t._closeRequested=!0,0===t._queue.length&&j(e)}function at(t,e){var i=t._controlledReadableStream;if(v(!1===t._closeRequested),v("readable"===i._state),!0===N(i)&&X(i)>0)W(i,e,!1);else{var n=1;if(void 0!==t._strategySize){var r=t._strategySize;try{n=r(e)}catch(e){throw ct(t,e),e}}try{w(t,e,n)}catch(e){throw ct(t,e),e}}ot(t)}function lt(t,e){var i=t._controlledReadableStream;v("readable"===i._state),P(t),G(i,e)}function ct(t,e){"readable"===t._controlledReadableStream._state&&lt(t,e)}function ut(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}var ht=function(){function t(e,i){r(this,t),this._associatedReadableByteStreamController=e,this._view=i}return n(t,[{key:"respond",value:function(t){if(!1===ft(this))throw kt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(t,e){if(e=Number(e),!1===l(e))throw new RangeError("bytesWritten must be a finite");v(t._pendingPullIntos.length>0),Et(t,e)}(this._associatedReadableByteStreamController,t)}},{key:"respondWithNewView",value:function(t){if(!1===ft(this))throw kt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");!function(t,e){v(t._pendingPullIntos.length>0);var i=t._pendingPullIntos[0];if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Et(t,e.byteLength)}(this._associatedReadableByteStreamController,t)}},{key:"view",get:function(){return this._view}}]),t}(),pt=function(){function t(e,i,n){if(r(this,t),!1===F(e))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==e._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=i,this._pullAgain=!1,this._pulling=!1,gt(this),this._queue=this._queueTotalSize=void 0,P(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=d(n);var o=i.autoAllocateChunkSize;if(void 0!==o&&(!1===Number.isInteger(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=o,this._pendingPullIntos=[];var s=this,a=c(i,"start",[this]);Promise.resolve(a).then(function(){s._started=!0,v(!1===s._pulling),v(!1===s._pullAgain),mt(s)},function(t){"readable"===e._state&&St(s,t)}).catch(b)}return n(t,[{key:"close",value:function(){if(!1===dt(this))throw Ft("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t._controlledReadableStream;if(v(!1===t._closeRequested),v("readable"===e._state),t._queueTotalSize>0)return void(t._closeRequested=!0);if(t._pendingPullIntos.length>0){var i=t._pendingPullIntos[0];if(i.bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw St(t,n),n}}j(e)}(this)}},{key:"enqueue",value:function(t){if(!1===dt(this))throw Ft("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(t,e){var i=t._controlledReadableStream;v(!1===t._closeRequested),v("readable"===i._state);var n=e.buffer,r=e.byteOffset,o=e.byteLength,s=h(n);if(!0===q(i))if(0===X(i))vt(t,s,r,o);else{v(0===t._queue.length);var a=new Uint8Array(s,r,o);W(i,a,!1)}else!0===Y(i)?(vt(t,s,r,o),Pt(t)):(v(!1===N(i),"stream must not be locked"),vt(t,s,r,o))}(this,t)}},{key:"error",value:function(t){if(!1===dt(this))throw Ft("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");St(this,t)}},{key:"__cancelSteps",value:function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0);return P(this),u(this._underlyingByteSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(v(!0===q(t)),this._queueTotalSize>0){v(0===X(t));var e=this._queue.shift();this._queueTotalSize-=e.byteLength,At(this);var i=void 0;try{i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}catch(t){return Promise.reject(t)}return Promise.resolve(a(i,!1))}var n=this._autoAllocateChunkSize;if(void 0!==n){var r=void 0;try{r=new ArrayBuffer(n)}catch(t){return Promise.reject(t)}var o={buffer:r,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}var s=z(t);return mt(this),s}},{key:"byobRequest",get:function(){if(!1===dt(this))throw Ft("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);this._byobRequest=new ht(this,e)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===dt(this))throw Ft("desiredSize");return Ct(this)}}]),t}();function dt(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingByteSource")}function ft(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function mt(t){!1!==function(t){var e=t._controlledReadableStream;if("readable"!==e._state)return!1;if(!0===t._closeRequested)return!1;if(!1===t._started)return!1;if(!0===q(e)&&X(e)>0)return!0;if(!0===Y(e)&&H(e)>0)return!0;if(Ct(t)>0)return!0;return!1}(t)&&(!0!==t._pulling?(v(!1===t._pullAgain),t._pulling=!0,u(t._underlyingByteSource,"pull",[t]).then(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,mt(t))},function(e){"readable"===t._controlledReadableStream._state&&St(t,e)}).catch(b)):t._pullAgain=!0)}function gt(t){wt(t),t._pendingPullIntos=[]}function yt(t,e){v("errored"!==t._state,"state must not be errored");var i=!1;"closed"===t._state&&(v(0===e.bytesFilled),i=!0);var n=_t(e);"default"===e.readerType?W(t,n,i):(v("byob"===e.readerType),function(t,e,i){var n=t._reader;v(n._readIntoRequests.length>0),n._readIntoRequests.shift()._resolve(a(e,i))}(t,n,i))}function _t(t){var e=t.bytesFilled,i=t.elementSize;return v(e<=t.byteLength),v(e%i==0),new t.ctor(t.buffer,t.byteOffset,e/i)}function vt(t,e,i,n){t._queue.push({buffer:e,byteOffset:i,byteLength:n}),t._queueTotalSize+=n}function bt(t,e){var i=e.elementSize,n=e.bytesFilled-e.bytesFilled%i,r=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),o=e.bytesFilled+r,a=o-o%i,l=r,c=!1;a>n&&(l=a-e.bytesFilled,c=!0);for(var u=t._queue;l>0;){var h=u[0],p=Math.min(l,h.byteLength),d=e.byteOffset+e.bytesFilled;s(e.buffer,d,h.buffer,h.byteOffset,p),h.byteLength===p?u.shift():(h.byteOffset+=p,h.byteLength-=p),t._queueTotalSize-=p,xt(t,p,e),l-=p}return!1===c&&(v(0===t._queueTotalSize,"queue must be empty"),v(e.bytesFilled>0),v(e.bytesFilled<e.elementSize)),c}function xt(t,e,i){v(0===t._pendingPullIntos.length||t._pendingPullIntos[0]===i),wt(t),i.bytesFilled+=e}function At(t){v("readable"===t._controlledReadableStream._state),0===t._queueTotalSize&&!0===t._closeRequested?j(t._controlledReadableStream):mt(t)}function wt(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function Pt(t){for(v(!1===t._closeRequested);t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===bt(t,e)&&(Tt(t),yt(t._controlledReadableStream,e))}}function Et(t,e){var i=t._pendingPullIntos[0],n=t._controlledReadableStream;if("closed"===n._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=h(e.buffer),v(0===e.bytesFilled,"bytesFilled must be 0");var i=t._controlledReadableStream;if(!0===Y(i))for(;H(i)>0;)yt(i,Tt(t))}(t,i)}else v("readable"===n._state),function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(xt(t,e,i),!(i.bytesFilled<i.elementSize)){Tt(t);var n=i.bytesFilled%i.elementSize;if(n>0){var r=i.byteOffset+i.bytesFilled,o=i.buffer.slice(r-n,r);vt(t,o,0,o.byteLength)}i.buffer=h(i.buffer),i.bytesFilled-=n,yt(t._controlledReadableStream,i),Pt(t)}}(t,e,i)}function Tt(t){var e=t._pendingPullIntos.shift();return wt(t),e}function St(t,e){var i=t._controlledReadableStream;v("readable"===i._state),gt(t),P(t),G(i,e)}function Ct(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function Ot(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function Mt(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Rt(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function It(t,e){v(void 0!==t._closedPromise_resolve),v(void 0!==t._closedPromise_reject),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function Dt(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Lt(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function kt(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Ft(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}},function(t,e,i){var n=i(6),r=i(4),o=i(2);e.TransformStream=n.TransformStream,e.ReadableStream=r.ReadableStream,e.IsReadableStreamDisturbed=r.IsReadableStreamDisturbed,e.ReadableStreamDefaultControllerClose=r.ReadableStreamDefaultControllerClose,e.ReadableStreamDefaultControllerEnqueue=r.ReadableStreamDefaultControllerEnqueue,e.ReadableStreamDefaultControllerError=r.ReadableStreamDefaultControllerError,e.ReadableStreamDefaultControllerGetDesiredSize=r.ReadableStreamDefaultControllerGetDesiredSize,e.AcquireWritableStreamDefaultWriter=o.AcquireWritableStreamDefaultWriter,e.IsWritableStream=o.IsWritableStream,e.IsWritableStreamLocked=o.IsWritableStreamLocked,e.WritableStream=o.WritableStream,e.WritableStreamAbort=o.WritableStreamAbort,e.WritableStreamDefaultControllerError=o.WritableStreamDefaultControllerError,e.WritableStreamDefaultWriterCloseWithErrorPropagation=o.WritableStreamDefaultWriterCloseWithErrorPropagation,e.WritableStreamDefaultWriterRelease=o.WritableStreamDefaultWriterRelease,e.WritableStreamDefaultWriterWrite=o.WritableStreamDefaultWriterWrite},function(t,e,i){var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(1).assert,s=i(0),a=s.InvokeOrNoop,l=s.PromiseInvokeOrPerformFallback,c=s.PromiseInvokeOrNoop,u=s.typeIsObject,h=i(4),p=h.ReadableStream,d=h.ReadableStreamDefaultControllerClose,f=h.ReadableStreamDefaultControllerEnqueue,m=h.ReadableStreamDefaultControllerError,g=h.ReadableStreamDefaultControllerGetDesiredSize,y=i(2),_=y.WritableStream,v=y.WritableStreamDefaultControllerError;function b(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");var i=t._readableController;try{f(i,e)}catch(e){throw t._readableClosed=!0,A(t,e),t._storedError}!0===g(i)<=0&&!1===t._backpressure&&E(t,!0)}function x(t){o(!1===t._errored),o(!1===t._readableClosed);try{d(t._readableController)}catch(t){o(!1)}t._readableClosed=!0}function A(t,e){!1===t._errored&&w(t,e)}function w(t,e){o(!1===t._errored),t._errored=!0,t._storedError=e,!1===t._writableDone&&v(t._writableController,e),!1===t._readableClosed&&m(t._readableController,e)}function P(t){return o(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===t._backpressure?Promise.resolve():(o(!0===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}function E(t,e){o(t._backpressure!==e,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(e),t._backpressureChangePromise=new Promise(function(e){t._backpressureChangePromise_resolve=e}),t._backpressureChangePromise.then(function(t){o(t!==e,"_backpressureChangePromise should be fulfilled only when backpressure is changed")}),t._backpressure=e}function T(t,e){return b(e._controlledTransformStream,t),Promise.resolve()}function S(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function C(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}var O=function(){function t(e,i){r(this,t),this._transformStream=e,this._startPromise=i}return n(t,[{key:"start",value:function(t){var e=this._transformStream;return e._writableController=t,this._startPromise.then(function(){return P(e)})}},{key:"write",value:function(t){return function(t,e){o(!1===t._errored),o(!1===t._transforming),o(!1===t._backpressure),t._transforming=!0;var i=t._transformer,n=t._transformStreamController;return l(i,"transform",[e,n],T,[e,n]).then(function(){return t._transforming=!1,P(t)},function(e){return A(t,e),Promise.reject(e)})}(this._transformStream,t)}},{key:"abort",value:function(){var t=this._transformStream;t._writableDone=!0,w(t,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var t=this._transformStream;return o(!1===t._transforming),t._writableDone=!0,c(t._transformer,"flush",[t._transformStreamController]).then(function(){return!0===t._errored?Promise.reject(t._storedError):(!1===t._readableClosed&&x(t),Promise.resolve())}).catch(function(e){return A(t,e),Promise.reject(t._storedError)})}}]),t}(),M=function(){function t(e,i){r(this,t),this._transformStream=e,this._startPromise=i}return n(t,[{key:"start",value:function(t){var e=this._transformStream;return e._readableController=t,this._startPromise.then(function(){return o(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===e._backpressure?Promise.resolve():(o(!1===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)})}},{key:"pull",value:function(){var t=this._transformStream;return o(!0===t._backpressure,"pull() should be never called while _backpressure is false"),o(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),E(t,!1),t._backpressureChangePromise}},{key:"cancel",value:function(){var t=this._transformStream;t._readableClosed=!0,w(t,new TypeError("Readable side canceled"))}}]),t}(),R=function(){function t(e){if(r(this,t),!1===C(e))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==e._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=e}return n(t,[{key:"enqueue",value:function(t){if(!1===S(this))throw D("enqueue");b(this._controlledTransformStream,t)}},{key:"close",value:function(){if(!1===S(this))throw D("close");!function(t){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");x(t)}(this._controlledTransformStream)}},{key:"error",value:function(t){if(!1===S(this))throw D("error");!function(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");w(t,e)}(this._controlledTransformStream,t)}},{key:"desiredSize",get:function(){if(!1===S(this))throw D("desiredSize");var t=this._controlledTransformStream._readableController;return g(t)}}]),t}(),I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._transformer=e;var i=e.readableStrategy,n=e.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new R(this);var s=void 0,l=new Promise(function(t){s=t}),c=new M(this,l);this._readable=new p(c,i);var u=new O(this,l);this._writable=new _(u,n),o(void 0!==this._writableController),o(void 0!==this._readableController),E(this,g(this._readableController)<=0);var h=this,d=a(e,"start",[h._transformStreamController]);s(d),l.catch(function(t){!1===h._errored&&(h._errored=!0,h._storedError=t)})}return n(t,[{key:"readable",get:function(){if(!1===C(this))throw L("readable");return this._readable}},{key:"writable",get:function(){if(!1===C(this))throw L("writable");return this._writable}}]),t}();function D(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function L(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.exports={TransformStream:I}},function(t,e,i){t.exports=i(5)}]))},function(t,e,i){"use strict";i(81),t.exports=i(16).Uint8ClampedArray},function(t,e,i){"use strict";var n=i(1)("unscopables"),r=Array.prototype;null==r[n]&&i(4)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){"use strict";var n=i(12),r=i(19),o=i(6);t.exports=[].copyWithin||function(t,e){var i=n(this),s=o(i.length),a=r(t,s),l=r(e,s),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?s:r(c,s))-l,s-a),h=1;for(l<a&&a<l+u&&(h=-1,l+=u-1,a+=u-1);u-- >0;)l in i?i[a]=i[l]:delete i[a],a+=h,l+=h;return i}},function(t,e,i){"use strict";var n=i(22),r=i(42),o=i(12),s=i(6),a=i(63);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,h=6==t,p=5==t||h,d=e||a;return function(e,a,f){for(var m,g,y=o(e),_=r(y),v=n(a,f,3),b=s(_.length),x=0,A=i?d(e,b):l?d(e,0):void 0;b>x;x++)if((p||x in _)&&(g=v(m=_[x],x,y),t))if(i)A[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:A.push(m)}else if(u)return!1;return h?-1:c||u?u:A}}},function(t,e,i){"use strict";var n=i(9),r=i(66),o=i(1)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(62);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){"use strict";var n=i(10),r=i(1)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){"use strict";var n=i(21);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";var n=i(43),r=i(18),o=i(26),s={};i(4)(s,i(1)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(24),r=i(40),o=i(25),s=i(4),a=i(5),l=i(10),c=i(67),u=i(26),h=i(45),p=i(1)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,m,g,y,_){c(i,e,m);var v,b,x,A=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",P="values"==g,E=!1,T=t.prototype,S=T[p]||T["@@iterator"]||g&&T[g],C=S||A(g),O=g?P?A("entries"):C:void 0,M="Array"==e&&T.entries||S;if(M&&(x=h(M.call(new t)))!==Object.prototype&&x.next&&(u(x,w,!0),n||a(x,p)||s(x,p,f)),P&&S&&"values"!==S.name&&(E=!0,C=function(){return S.call(this)}),n&&!_||!d&&!E&&T[p]||s(T,p,C),l[e]=C,l[w]=f,g)if(v={values:P?C:A("values"),keys:y?C:A("keys"),entries:O},_)for(b in v)b in T||o(T,b,v[b]);else r(r.P+r.F*(d||E),e,v);return v}},function(t,e,i){"use strict";var n=i(1)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(8),r=i(15),o=i(73);t.exports=i(3)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){"use strict";var n=i(74),r=i(18),o=i(20),s=i(28),a=i(5),l=i(41),c=Object.getOwnPropertyDescriptor;e.f=i(3)?c:function(t,e){if(t=o(t),e=s(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){"use strict";var n=i(46),r=i(23);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){"use strict";e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";var n=i(2),r=i(8),o=i(3),s=i(1)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){"use strict";var n=i(15),r=i(33),o=i(1)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[o])?e:r(i)}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(i(3)){var r=i(24),o=i(2),s=i(17),a=i(40),l=i(50),c=i(78),u=i(22),h=i(34),p=i(18),d=i(4),f=i(47),m=i(11),g=i(6),y=i(49),_=i(19),v=i(28),b=i(5),x=i(37),A=i(9),w=i(12),P=i(65),E=i(43),T=i(45),S=i(44).f,C=i(79),O=i(13),M=i(1),R=i(61),I=i(36),D=i(76),L=i(80),k=i(10),F=i(69),N=i(75),B=i(35),V=i(60),z=i(8),U=i(72),j=z.f,G=U.f,W=o.RangeError,H=o.TypeError,X=o.Uint8Array,Y=Array.prototype,q=c.ArrayBuffer,K=c.DataView,Q=R(0),Z=R(2),J=R(3),$=R(4),tt=R(5),et=R(6),it=I(!0),nt=I(!1),rt=L.values,ot=L.keys,st=L.entries,at=Y.lastIndexOf,lt=Y.reduce,ct=Y.reduceRight,ut=Y.join,ht=Y.sort,pt=Y.slice,dt=Y.toString,ft=Y.toLocaleString,mt=M("iterator"),gt=M("toStringTag"),yt=O("typed_constructor"),_t=O("def_constructor"),vt=l.CONSTR,bt=l.TYPED,xt=l.VIEW,At=R(1,function(t,e){return St(D(t,t[_t]),e)}),wt=s(function(){return 1===new X(new Uint16Array([1]).buffer)[0]}),Pt=!!X&&!!X.prototype.set&&s(function(){new X(1).set({})}),Et=function(t,e){var i=m(t);if(i<0||i%e)throw W("Wrong offset!");return i},Tt=function(t){if(A(t)&&bt in t)return t;throw H(t+" is not a typed array!")},St=function(t,e){if(!(A(t)&&yt in t))throw H("It is not a typed array constructor!");return new t(e)},Ct=function(t,e){return Ot(D(t,t[_t]),e)},Ot=function(t,e){for(var i=0,n=e.length,r=St(t,n);n>i;)r[i]=e[i++];return r},Mt=function(t,e,i){j(t,e,{get:function(){return this._d[i]}})},Rt=function(t){var e,i,n,r,o,s,a=w(t),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,p=C(a);if(null!=p&&!P(p)){for(s=p.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(h&&l>2&&(c=u(c,arguments[2],2)),e=0,i=g(a.length),r=St(this,i);i>e;e++)r[e]=h?c(a[e],e):a[e];return r},It=function(){for(var t=0,e=arguments.length,i=St(this,e);e>t;)i[t]=arguments[t++];return i},Dt=!!X&&s(function(){ft.call(new X(1))}),Lt=function(){return ft.apply(Dt?pt.call(Tt(this)):Tt(this),arguments)},kt={copyWithin:function(t,e){return V.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return $(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Tt(this),arguments)},filter:function(t){return Ct(this,Z(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Tt(this),arguments)},lastIndexOf:function(t){return at.apply(Tt(this),arguments)},map:function(t){return At(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Tt(this),arguments)},reduceRight:function(t){return ct.apply(Tt(this),arguments)},reverse:function(){for(var t,e=Tt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return J(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ht.call(Tt(this),t)},subarray:function(t,e){var i=Tt(this),n=i.length,r=_(t,n);return new(D(i,i[_t]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,g((void 0===e?n:_(e,n))-r))}},Ft=function(t,e){return Ct(this,pt.call(Tt(this),t,e))},Nt=function(t){Tt(this);var e=Et(arguments[1],1),i=this.length,n=w(t),r=g(n.length),o=0;if(r+e>i)throw W("Wrong length!");for(;o<r;)this[e+o]=n[o++]},Bt={entries:function(){return st.call(Tt(this))},keys:function(){return ot.call(Tt(this))},values:function(){return rt.call(Tt(this))}},Vt=function(t,e){return A(t)&&t[bt]&&"symbol"!=("undefined"==typeof e?"undefined":n(e))&&e in t&&String(+e)==String(e)},zt=function(t,e){return Vt(t,e=v(e,!0))?p(2,t[e]):G(t,e)},Ut=function(t,e,i){return!(Vt(t,e=v(e,!0))&&A(i)&&b(i,"value"))||b(i,"get")||b(i,"set")||i.configurable||b(i,"writable")&&!i.writable||b(i,"enumerable")&&!i.enumerable?j(t,e,i):(t[e]=i.value,t)};vt||(U.f=zt,z.f=Ut),a(a.S+a.F*!vt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Ut}),s(function(){dt.call({})})&&(dt=ft=function(){return ut.call(this)});var jt=f({},kt);f(jt,Bt),d(jt,mt,Bt.values),f(jt,{slice:Ft,set:Nt,constructor:function(){},toString:dt,toLocaleString:Lt}),Mt(jt,"buffer","b"),Mt(jt,"byteOffset","o"),Mt(jt,"byteLength","l"),Mt(jt,"length","e"),j(jt,gt,{get:function(){return this[bt]}}),t.exports=function(t,e,i,n){var c=t+((n=!!n)?"Clamped":"")+"Array",u="get"+t,p="set"+t,f=o[c],m=f||{},_=f&&T(f),v=!f||!l.ABV,b={},w=f&&f.prototype,P=function(t,i){j(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[u](i*e+n.o,wt)}(this,i)},set:function(t){return function(t,i,r){var o=t._d;n&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](i*e+o.o,r,wt)}(this,i,t)},enumerable:!0})};v?(f=i(function(t,i,n,r){h(t,f,c,"_d");var o,s,a,l,u=0,p=0;if(A(i)){if(!(i instanceof q||"ArrayBuffer"==(l=x(i))||"SharedArrayBuffer"==l))return bt in i?Ot(f,i):Rt.call(f,i);o=i,p=Et(n,e);var m=i.byteLength;if(void 0===r){if(m%e)throw W("Wrong length!");if((s=m-p)<0)throw W("Wrong length!")}else if((s=g(r)*e)+p>m)throw W("Wrong length!");a=s/e}else a=y(i),o=new q(s=a*e);for(d(t,"_d",{b:o,o:p,l:s,e:a,v:new K(o)});u<a;)P(t,u++)}),w=f.prototype=E(jt),d(w,"constructor",f)):s(function(){f(1)})&&s(function(){new f(-1)})&&F(function(t){new f,new f(null),new f(1.5),new f(t)},!0)||(f=i(function(t,i,n,r){var o;return h(t,f,c),A(i)?i instanceof q||"ArrayBuffer"==(o=x(i))||"SharedArrayBuffer"==o?void 0!==r?new m(i,Et(n,e),r):void 0!==n?new m(i,Et(n,e)):new m(i):bt in i?Ot(f,i):Rt.call(f,i):new m(y(i))}),Q(_!==Function.prototype?S(m).concat(S(_)):S(m),function(t){t in f||d(f,t,m[t])}),f.prototype=w,r||(w.constructor=f));var C=w[mt],O=!!C&&("values"==C.name||null==C.name),M=Bt.values;d(f,yt,!0),d(w,bt,c),d(w,xt,!0),d(w,_t,f),(n?new f(1)[gt]==c:gt in w)||j(w,gt,{get:function(){return c}}),b[c]=f,a(a.G+a.W+a.F*(f!=m),b),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*s(function(){m.of.call(f,1)}),c,{from:Rt,of:It}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),a(a.P,c,kt),N(c),a(a.P+a.F*Pt,c,{set:Nt}),a(a.P+a.F*!O,c,Bt),r||w.toString==dt||(w.toString=dt),a(a.P+a.F*s(function(){new f(1).slice()}),c,{slice:Ft}),a(a.P+a.F*(s(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!s(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Lt}),k[c]=O?C:M,r||O||d(w,mt,M)}}else t.exports=function(){}},function(t,e,i){"use strict";var n=i(2),r=i(3),o=i(24),s=i(50),a=i(4),l=i(47),c=i(17),u=i(34),h=i(11),p=i(6),d=i(49),f=i(44).f,m=i(8).f,g=i(35),y=i(26),_="prototype",v="Wrong index!",b=n.ArrayBuffer,x=n.DataView,A=n.Math,w=n.RangeError,P=n.Infinity,E=b,T=A.abs,S=A.pow,C=A.floor,O=A.log,M=A.LN2,R=r?"_b":"buffer",I=r?"_l":"byteLength",D=r?"_o":"byteOffset";function L(t,e,i){var n,r,o,s=Array(i),a=8*i-e-1,l=(1<<a)-1,c=l>>1,u=23===e?S(2,-24)-S(2,-77):0,h=0,p=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===P?(r=t!=t?1:0,n=l):(n=C(O(t)/M),t*(o=S(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?u/o:u*S(2,1-c))*o>=2&&(n++,o/=2),n+c>=l?(r=0,n=l):n+c>=1?(r=(t*o-1)*S(2,e),n+=c):(r=t*S(2,c-1)*S(2,e),n=0));e>=8;s[h++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[h++]=255&n,n/=256,a-=8);return s[--h]|=128*p,s}function k(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,l=i-1,c=t[l--],u=127&c;for(c>>=7;a>0;u=256*u+t[l],l--,a-=8);for(n=u&(1<<-a)-1,u>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===u)u=1-s;else{if(u===o)return n?NaN:c?-P:P;n+=S(2,e),u-=s}return(c?-1:1)*n*S(2,u-e)}function F(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function N(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function V(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return L(t,52,8)}function U(t){return L(t,23,4)}function j(t,e,i){m(t[_],e,{get:function(){return this[i]}})}function G(t,e,i,n){var r=d(+i);if(r+e>t[I])throw w(v);var o=t[R]._b,s=r+t[D],a=o.slice(s,s+e);return n?a:a.reverse()}function W(t,e,i,n,r,o){var s=d(+i);if(s+e>t[I])throw w(v);for(var a=t[R]._b,l=s+t[D],c=n(+r),u=0;u<e;u++)a[l+u]=c[o?u:e-u-1]}if(s.ABV){if(!c(function(){b(1)})||!c(function(){new b(-1)})||c(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var H,X=(b=function(t){return u(this,b),new E(d(t))})[_]=E[_],Y=f(E),q=0;Y.length>q;)(H=Y[q++])in b||a(b,H,E[H]);o||(X.constructor=b)}var K=new x(new b(2)),Q=x[_].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||l(x[_],{setInt8:function(t,e){Q.call(this,t,e<<24>>24)},setUint8:function(t,e){Q.call(this,t,e<<24>>24)}},!0)}else b=function(t){u(this,b,"ArrayBuffer");var e=d(t);this._b=g.call(Array(e),0),this[I]=e},x=function(t,e,i){u(this,x,"DataView"),u(t,b,"DataView");var n=t[I],r=h(e);if(r<0||r>n)throw w("Wrong offset!");if(r+(i=void 0===i?n-r:p(i))>n)throw w("Wrong length!");this[R]=t,this[D]=r,this[I]=i},r&&(j(b,"byteLength","_l"),j(x,"buffer","_b"),j(x,"byteLength","_l"),j(x,"byteOffset","_o")),l(x[_],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return F(G(this,4,t,arguments[1]))},getUint32:function(t){return F(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return k(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return k(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){W(this,1,t,N,e)},setUint8:function(t,e){W(this,1,t,N,e)},setInt16:function(t,e){W(this,2,t,B,e,arguments[2])},setUint16:function(t,e){W(this,2,t,B,e,arguments[2])},setInt32:function(t,e){W(this,4,t,V,e,arguments[2])},setUint32:function(t,e){W(this,4,t,V,e,arguments[2])},setFloat32:function(t,e){W(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){W(this,8,t,z,e,arguments[2])}});y(b,"ArrayBuffer"),y(x,"DataView"),a(x[_],s.VIEW,!0),e.ArrayBuffer=b,e.DataView=x},function(t,e,i){"use strict";var n=i(37),r=i(1)("iterator"),o=i(10);t.exports=i(16).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){"use strict";var n=i(59),r=i(70),o=i(10),s=i(20);t.exports=i(68)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";i(77)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=i(0),r=i(84),o=i(53),s=16,a={get value(){return(0,n.shadow)(a,"value",(0,n.isLittleEndian)())}};function l(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=e*r-i*n,l=i*n-e*r;return[r/a,i/l,n/l,e/a,(r*o-n*s)/l,(i*o-e*s)/a]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var i=this._transformMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this._originalTranslate(t,e)},t.scale=function(t,e){var i=this._transformMatrix;i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*e,i[3]=i[3]*e,this._originalScale(t,e)},t.transform=function(e,i,n,r,o,s){var a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*i,a[1]*e+a[3]*i,a[0]*n+a[2]*r,a[1]*n+a[3]*r,a[0]*o+a[2]*s+a[4],a[1]*o+a[3]*s+a[5]],t._originalTransform(e,i,n,r,o,s)},t.setTransform=function(e,i,n,r,o,s){this._transformMatrix=[e,i,n,r,o,s],t._originalSetTransform(e,i,n,r,o,s)},t.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*i,n[1]*e+n[3]*i,n[0]*-i+n[2]*e,n[1]*-i+n[3]*e,n[4],n[5]],this._originalRotate(t)})}var c=function(){function t(t){this.canvasFactory=t,this.cache=Object.create(null)}return t.prototype={getCanvas:function(t,e,i,n){var r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,i),r.context.setTransform(1,0,0,1,0,0)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),n&&l(r.context),r},clear:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}},t}();var u=function(){function t(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}(),h=function(){function t(t,e,i,n,r){this.ctx=t,this.current=new u,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.imageLayer=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new c(this.canvasFactory),t&&l(t),this.cachedGetSinglePixelWidth=null}function e(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var i,r,o,l,c,u=e.height,h=e.width,p=u%s,d=(u-p)/s,f=0===p?d:d+1,m=t.createImageData(h,s),g=0,y=e.data,_=m.data;if(e.kind===n.ImageKind.GRAYSCALE_1BPP){var v=y.byteLength,b=new Uint32Array(_.buffer,0,_.byteLength>>2),x=b.length,A=h+7>>3,w=4294967295,P=a.value?4278190080:255;for(r=0;r<f;r++){for(l=r<d?s:p,i=0,o=0;o<l;o++){for(var E=v-g,T=0,S=E>A?h:8*E-7,C=-8&S,O=0,M=0;T<C;T+=8)M=y[g++],b[i++]=128&M?w:P,b[i++]=64&M?w:P,b[i++]=32&M?w:P,b[i++]=16&M?w:P,b[i++]=8&M?w:P,b[i++]=4&M?w:P,b[i++]=2&M?w:P,b[i++]=1&M?w:P;for(;T<S;T++)0===O&&(M=y[g++],O=128),b[i++]=M&O?w:P,O>>=1}for(;i<x;)b[i++]=0;t.putImageData(m,0,r*s)}}else if(e.kind===n.ImageKind.RGBA_32BPP){for(o=0,c=h*s*4,r=0;r<d;r++)_.set(y.subarray(g,g+c)),g+=c,t.putImageData(m,0,o),o+=s;r<f&&(c=h*p*4,_.set(y.subarray(g,g+c)),t.putImageData(m,0,o))}else{if(e.kind!==n.ImageKind.RGB_24BPP)throw new Error("bad image kind: "+e.kind);for(c=h*(l=s),r=0;r<f;r++){for(r>=d&&(c=h*(l=p)),i=0,o=c;o--;)_[i++]=y[g++],_[i++]=y[g++],_[i++]=y[g++],_[i++]=255;t.putImageData(m,0,r*s)}}}}function i(t,e){for(var i=e.height,n=e.width,r=i%s,o=(i-r)/s,a=0===r?o:o+1,l=t.createImageData(n,s),c=0,u=e.data,h=l.data,p=0;p<a;p++){for(var d=p<o?s:r,f=3,m=0;m<d;m++)for(var g=0,y=0;y<n;y++){if(!g){var _=u[c++];g=128}h[f]=_&g?0:255,f+=4,g>>=1}t.putImageData(l,0,p*s)}}function h(t,e){for(var i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,r=i.length;n<r;n++){var o=i[n];void 0!==t[o]&&(e[o]=t[o])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function p(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function d(t,e,i,n){for(var r=t.length,o=3;o<r;o+=4){var s=t[o];if(0===s)t[o-3]=e,t[o-2]=i,t[o-1]=n;else if(s<255){var a=255-s;t[o-3]=t[o-3]*s+e*a>>8,t[o-2]=t[o-2]*s+i*a>>8,t[o-1]=t[o-1]*s+n*a>>8}}}function f(t,e,i){for(var n=t.length,r=3;r<n;r+=4){var o=i?i[t[r]]:t[r];e[r]=e[r]*o*(1/255)|0}}function m(t,e,i){for(var n=t.length,r=3;r<n;r+=4){var o=77*t[r-3]+152*t[r-2]+28*t[r-1];e[r]=i?e[r]*i[o>>8]>>8:e[r]*o>>16}}function g(t,e,i){var n=e.canvas,r=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var s=e.backdrop||null;if(!e.transferMap&&o.WebGLUtils.isEnabled){var a=o.WebGLUtils.composeSMask(i.canvas,n,{subtype:e.subtype,backdrop:s});return t.setTransform(1,0,0,1,0,0),void t.drawImage(a,e.offsetX,e.offsetY)}!function(t,e,i,n,r,o,s){var a,l=!!o,c=l?o[0]:0,u=l?o[1]:0,h=l?o[2]:0;a="Luminosity"===r?m:f;for(var p=Math.min(n,Math.ceil(1048576/i)),g=0;g<n;g+=p){var y=Math.min(p,n-g),_=t.getImageData(0,g,i,y),v=e.getImageData(0,g,i,y);l&&d(_.data,c,u,h),a(_.data,v.data,s),t.putImageData(v,0,g)}}(r,i,n.width,n.height,e.subtype,s,e.transferMap),t.drawImage(n,0,0)}var y=["butt","round","square"],_=["miter","round","bevel"],v={},b={};for(var x in t.prototype={beginDrawing:function(t){var e=t.transform,i=t.viewport,n=t.transparency,r=t.background,o=void 0===r?null:r,s=this.ctx.canvas.width,a=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=o||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,a),this.ctx.restore(),n){var l=this.cachedCanvases.getCanvas("transparent",s,a,!0);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),p(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,i.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(t,e,i,r){var o=t.argsArray,s=t.fnArray,a=e||0,l=o.length;if(l===a)return a;for(var c,u=l-a>10&&"function"==typeof i,h=u?Date.now()+15:0,p=0,d=this.commonObjs,f=this.objs;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if((c=s[a])!==n.OPS.dependency)this[c].apply(this,o[a]);else for(var m=o[a],g=0,y=m.length;g<y;g++){var _=m[g],v="g"===_[0]&&"_"===_[1]?d:f;if(!v.isResolved(_))return v.get(_,i),a}if(++a===l)return a;if(u&&++p>10){if(Date.now()>h)return i(),a;p=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),o.WebGLUtils.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function(t){this.ctx.lineCap=y[t]},setLineJoin:function(t){this.ctx.lineJoin=_[t]},setMiterLimit:function(t){this.ctx.miterLimit=t},setDash:function(t,e){var i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)},setRenderingIntent:function(t){},setFlatness:function(t){},setGState:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e],r=n[0],o=n[1];switch(r){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o[0],o[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=o;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=o?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var t=this.current.activeSMask,e=t.canvas.width,i=t.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,i,!0),o=this.ctx,s=o.mozCurrentTransform;this.ctx.save();var a=r.context;a.scale(1/t.scaleX,1/t.scaleY),a.translate(-t.offsetX,-t.offsetY),a.transform.apply(a,s),t.startTransformInverse=a.mozCurrentTransformInverse,h(o,a),this.ctx=a,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++},suspendSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,t),this.ctx.restore(),this.ctx.save(),h(t,this.ctx),this.current.resumeSMaskCtx=t;var e=n.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function(){var t=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=t,this.groupStack.push(e),this.groupLevel++},endSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,t),this.ctx.restore(),h(t,this.ctx);var e=n.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this.cachedGetSinglePixelWidth=null)},transform:function(t,e,i,n,r,o){this.ctx.transform(t,e,i,n,r,o),this.cachedGetSinglePixelWidth=null},constructPath:function(t,e){for(var i=this.ctx,r=this.current,o=r.x,s=r.y,a=0,l=0,c=t.length;a<c;a++)switch(0|t[a]){case n.OPS.rectangle:o=e[l++],s=e[l++];var u=e[l++],h=e[l++];0===u&&(u=this.getSinglePixelWidth()),0===h&&(h=this.getSinglePixelWidth());var p=o+u,d=s+h;this.ctx.moveTo(o,s),this.ctx.lineTo(p,s),this.ctx.lineTo(p,d),this.ctx.lineTo(o,d),this.ctx.lineTo(o,s),this.ctx.closePath();break;case n.OPS.moveTo:o=e[l++],s=e[l++],i.moveTo(o,s);break;case n.OPS.lineTo:o=e[l++],s=e[l++],i.lineTo(o,s);break;case n.OPS.curveTo:o=e[l+4],s=e[l+5],i.bezierCurveTo(e[l],e[l+1],e[l+2],e[l+3],o,s),l+=6;break;case n.OPS.curveTo2:i.bezierCurveTo(o,s,e[l],e[l+1],e[l+2],e[l+3]),o=e[l+2],s=e[l+3],l+=4;break;case n.OPS.curveTo3:o=e[l+2],s=e[l+3],i.bezierCurveTo(e[l],e[l+1],o,s,o,s),l+=4;break;case n.OPS.closePath:i.closePath()}r.setCurrentPoint(o,s)},closePath:function(){this.ctx.closePath()},stroke:function(t){t="undefined"==typeof t||t;var e=this.ctx,i=this.current.strokeColor;e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),e.globalAlpha=this.current.strokeAlpha,i&&i.hasOwnProperty("type")&&"Pattern"===i.type?(e.save(),e.strokeStyle=i.getPattern(e,this),e.stroke(),e.restore()):e.stroke(),t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(t){t="undefined"==typeof t||t;var e=this.ctx,i=this.current.fillColor,n=!1;this.current.patternFill&&(e.save(),this.baseTransform&&e.setTransform.apply(e,this.baseTransform),e.fillStyle=i.getPattern(e,this),n=!0),this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill(),n&&e.restore(),t&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=v},eoClip:function(){this.pendingClip=b},beginText:function(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(var i=0;i<t.length;i++){var n=t[i];e.setTransform.apply(e,n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()},setCharSpacing:function(t){this.current.charSpacing=t},setWordSpacing:function(t){this.current.wordSpacing=t},setHScale:function(t){this.current.textHScale=t/100},setLeading:function(t){this.current.leading=-t},setFont:function(t,e){var i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error("Can't find font for "+t);if(r.fontMatrix=i.fontMatrix?i.fontMatrix:n.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,!i.isType3Font){var o=i.loadedName||"sans-serif",s=i.black?"900":i.bold?"bold":"normal",a=i.italic?"italic":"normal",l='"'+o+'", '+i.fallbackName,c=e<16?16:e>100?100:e;this.current.fontSizeScale=e/c;var u=a+" "+s+" "+c+"px "+l;this.ctx.font=u}},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setTextRise:function(t){this.current.textRise=t},moveText:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},setTextMatrix:function(t,e,i,n,r,o){this.current.textMatrix=[t,e,i,n,r,o],this.current.textMatrixScale=Math.sqrt(t*t+e*e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(t,e,i){var r,o=this.ctx,s=this.current,a=s.font,l=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,u=l&n.TextRenderingMode.FILL_STROKE_MASK,h=!!(l&n.TextRenderingMode.ADD_TO_PATH_FLAG);((a.disableFontFace||h)&&(r=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace?(o.save(),o.translate(e,i),o.beginPath(),r(o,c),u!==n.TextRenderingMode.FILL&&u!==n.TextRenderingMode.FILL_STROKE||o.fill(),u!==n.TextRenderingMode.STROKE&&u!==n.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(u!==n.TextRenderingMode.FILL&&u!==n.TextRenderingMode.FILL_STROKE||o.fillText(t,e,i),u!==n.TextRenderingMode.STROKE&&u!==n.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,i)),h)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:i,fontSize:c,addToPath:r})},get isFontSubpixelAAEnabled(){var t=this.canvasFactory.create(10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,i=!1,r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",i)},showText:function(t){var e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);var r=e.fontSize;if(0!==r){var o=this.ctx,s=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,h=t.length,p=i.vertical,d=p?1:-1,f=i.defaultVMetrics,m=r*e.fontMatrix[0],g=e.textRenderingMode===n.TextRenderingMode.FILL&&!i.disableFontFace;o.save(),o.transform.apply(o,e.textMatrix),o.translate(e.x,e.y+e.textRise),e.patternFill&&(o.fillStyle=e.fillColor.getPattern(o,this)),c>0?o.scale(u,-1):o.scale(u,1);var y=e.lineWidth,_=e.textMatrixScale;if(0===_||0===y){var v=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;v!==n.TextRenderingMode.STROKE&&v!==n.TextRenderingMode.FILL_STROKE||(this.cachedGetSinglePixelWidth=null,y=.65*this.getSinglePixelWidth())}else y/=_;1!==s&&(o.scale(s,s),y/=s),o.lineWidth=y;var b,x=0;for(b=0;b<h;++b){var A=t[b];if((0,n.isNum)(A))x+=d*A*r/1e3;else{var w,P,E,T,S,C,O,M=!1,R=(A.isSpace?l:0)+a,I=A.fontChar,D=A.accent,L=A.width;if(p)S=A.vmetric||f,C=-(C=A.vmetric?S[1]:.5*L)*m,O=S[2]*m,L=S?-S[0]:L,w=C/s,P=(x+O)/s;else w=x/s,P=0;if(i.remeasure&&L>0){var k=1e3*o.measureText(I).width/r*s;if(L<k&&this.isFontSubpixelAAEnabled){var F=L/k;M=!0,o.save(),o.scale(F,1),w/=F}else L!==k&&(w+=(L-k)/2e3*r/s)}(A.isInFont||i.missingFile)&&(g&&!D?o.fillText(I,w,P):(this.paintChar(I,w,P),D&&(E=w+D.offset.x/s,T=P-D.offset.y/s,this.paintChar(D.fontChar,E,T)))),x+=L*m+R*c,M&&o.restore()}}p?e.y-=x*u:e.x+=x*u,o.restore()}},showType3Text:function(t){var e,i,r,o,s=this.ctx,a=this.current,l=a.font,c=a.fontSize,u=a.fontDirection,h=l.vertical?1:-1,p=a.charSpacing,d=a.wordSpacing,f=a.textHScale*u,m=a.fontMatrix||n.FONT_IDENTITY_MATRIX,g=t.length;if(!(a.textRenderingMode===n.TextRenderingMode.INVISIBLE)&&0!==c){for(this.cachedGetSinglePixelWidth=null,s.save(),s.transform.apply(s,a.textMatrix),s.translate(a.x,a.y),s.scale(f,u),e=0;e<g;++e)if(i=t[e],(0,n.isNum)(i))o=h*i*c/1e3,this.ctx.translate(o,0),a.x+=o*f;else{var y=(i.isSpace?d:0)+p,_=l.charProcOperatorList[i.operatorListId];if(_)this.processingType3=i,this.save(),s.scale(c,c),s.transform.apply(s,m),this.executeOperatorList(_),this.restore(),r=n.Util.applyTransform([i.width,0],m)[0]*c+y,s.translate(r,0),a.x+=r*f;else(0,n.warn)('Type3 character "'+i.operatorListId+'" is not available.')}s.restore(),this.processingType3=null}},setCharWidth:function(t,e){},setCharWidthAndBounds:function(t,e,i,n,r,o){this.ctx.rect(i,n,r-i,o-n),this.clip(),this.endPath()},getColorN_Pattern:function(e){var i,n=this;if("TilingPattern"===e[0]){var o=e[1],s=this.baseTransform||this.ctx.mozCurrentTransform.slice(),a={createCanvasGraphics:function(e){return new t(e,n.commonObjs,n.objs,n.canvasFactory)}};i=new r.TilingPattern(e,o,this.ctx,a,s)}else i=(0,r.getShadingPatternFromIR)(e);return i},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(t,e,i){var r=n.Util.makeCssRgb(t,e,i);this.ctx.strokeStyle=r,this.current.strokeColor=r},setFillRGBColor:function(t,e,i){var r=n.Util.makeCssRgb(t,e,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1},shadingFill:function(t){var e=this.ctx;this.save();var i=(0,r.getShadingPatternFromIR)(t);e.fillStyle=i.getPattern(e,this,!0);var o=e.mozCurrentTransformInverse;if(o){var s=e.canvas,a=s.width,l=s.height,c=n.Util.applyTransform([0,0],o),u=n.Util.applyTransform([0,l],o),h=n.Util.applyTransform([a,0],o),p=n.Util.applyTransform([a,l],o),d=Math.min(c[0],u[0],h[0],p[0]),f=Math.min(c[1],u[1],h[1],p[1]),m=Math.max(c[0],u[0],h[0],p[0]),g=Math.max(c[1],u[1],h[1],p[1]);this.ctx.fillRect(d,f,m-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){throw new Error("Should not call beginInlineImage")},beginImageData:function(){throw new Error("Should not call beginImageData")},paintFormXObjectBegin:function(t,e){if(this.save(),this.baseTransformStack.push(this.baseTransform),(0,n.isArray)(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,(0,n.isArray)(e)&&4===e.length){var i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(t){this.save();var e=this.ctx;t.isolated||(0,n.info)("TODO: Support non-isolated groups."),t.knockout&&(0,n.warn)("Knockout groups not supported.");var i=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var r=n.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform),o=[0,0,e.canvas.width,e.canvas.height];r=n.Util.intersect(r,o)||[0,0,0,0];var s=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-s,1),c=Math.max(Math.ceil(r[3])-a,1),u=1,p=1;l>4096&&(u=l/4096,l=4096),c>4096&&(p=c/4096,c=4096);var d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);var f=this.cachedCanvases.getCanvas(d,l,c,!0),m=f.context;m.scale(1/u,1/p),m.translate(-s,-a),m.transform.apply(m,i),t.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:s,offsetY:a,scaleX:u,scaleY:p,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.scale(u,p)),h(e,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null},endGroup:function(t){this.groupLevel--;var e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(t,e,i){if(this.save(),p(this.ctx),this.current=new u,(0,n.isArray)(t)&&4===t.length){var r=t[2]-t[0],o=t[3]-t[1];this.ctx.rect(t[0],t[1],r,o),this.clip(),this.endPath()}this.transform.apply(this,e),this.transform.apply(this,i)},endAnnotation:function(){this.restore()},paintJpegXObject:function(t,e,i){var r=this.objs.get(t);if(r){this.save();var o=this.ctx;if(o.scale(1/e,-1/i),o.drawImage(r,0,0,r.width,r.height,0,-i,e,i),this.imageLayer){var s=o.mozCurrentTransformInverse,a=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:t,left:a[0],top:a[1],width:e/s[0],height:i/s[3]})}this.restore()}else(0,n.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(t){var e=this.ctx,n=t.width,r=t.height,o=this.current.fillColor,s=this.current.patternFill,a=this.processingType3;if(a&&void 0===a.compiled&&(a.compiled=n<=1e3&&r<=1e3?function(t){var e,i,n,r,o=t.width,s=t.height,a=o+1,l=new Uint8Array(a*(s+1)),c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=o+7&-8,h=t.data,p=new Uint8Array(u*s),d=0;for(e=0,r=h.length;e<r;e++)for(var f=128,m=h[e];f>0;)p[d++]=m&f?0:255,f>>=1;var g=0;for(0!==p[d=0]&&(l[0]=1,++g),i=1;i<o;i++)p[d]!==p[d+1]&&(l[i]=p[d]?2:1,++g),d++;for(0!==p[d]&&(l[i]=2,++g),e=1;e<s;e++){n=e*a,p[(d=e*u)-u]!==p[d]&&(l[n]=p[d]?1:8,++g);var y=(p[d]?4:0)+(p[d-u]?8:0);for(i=1;i<o;i++)c[y=(y>>2)+(p[d+1]?4:0)+(p[d-u+1]?8:0)]&&(l[n+i]=c[y],++g),d++;if(p[d-u]!==p[d]&&(l[n+i]=p[d]?2:4,++g),g>1e3)return null}for(n=e*a,0!==p[d=u*(s-1)]&&(l[n]=8,++g),i=1;i<o;i++)p[d]!==p[d+1]&&(l[n+i]=p[d]?4:8,++g),d++;if(0!==p[d]&&(l[n+i]=4,++g),g>1e3)return null;var _=new Int32Array([0,a,-1,0,-a,0,0,0,1]),v=[];for(e=0;g&&e<=s;e++){for(var b=e*a,x=b+o;b<x&&!l[b];)b++;if(b!==x){var A,w=[b%a,e],P=l[b],E=b;do{var T=_[P];do{b+=T}while(!l[b]);5!==(A=l[b])&&10!==A?(P=A,l[b]=0):(P=A&51*P>>4,l[b]&=P>>2|P<<2),w.push(b%a),w.push(b/a|0),--g}while(E!==b);v.push(w),--e}}return function(t){t.save(),t.scale(1/o,-1/s),t.translate(0,-s),t.beginPath();for(var e=0,i=v.length;e<i;e++){var n=v[e];t.moveTo(n[0],n[1]);for(var r=2,a=n.length;r<a;r+=2)t.lineTo(n[r],n[r+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:n,height:r}):null),a&&a.compiled)a.compiled(e);else{var l=this.cachedCanvases.getCanvas("maskCanvas",n,r),c=l.context;c.save(),i(c,t),c.globalCompositeOperation="source-in",c.fillStyle=s?o.getPattern(c,this):o,c.fillRect(0,0,n,r),c.restore(),this.paintInlineImageXObject(l.canvas)}},paintImageMaskXObjectRepeat:function(t,e,n,r){var o=t.width,s=t.height,a=this.current.fillColor,l=this.current.patternFill,c=this.cachedCanvases.getCanvas("maskCanvas",o,s),u=c.context;u.save(),i(u,t),u.globalCompositeOperation="source-in",u.fillStyle=l?a.getPattern(u,this):a,u.fillRect(0,0,o,s),u.restore();for(var h=this.ctx,p=0,d=r.length;p<d;p+=2)h.save(),h.transform(e,0,0,n,r[p],r[p+1]),h.scale(1,-1),h.drawImage(c.canvas,0,0,o,s,0,-1,1,1),h.restore()},paintImageMaskXObjectGroup:function(t){for(var e=this.ctx,n=this.current.fillColor,r=this.current.patternFill,o=0,s=t.length;o<s;o++){var a=t[o],l=a.width,c=a.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=u.context;h.save(),i(h,a),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this):n,h.fillRect(0,0,l,c),h.restore(),e.save(),e.transform.apply(e,a.transform),e.scale(1,-1),e.drawImage(u.canvas,0,0,l,c,0,-1,1,1),e.restore()}},paintImageXObject:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,n.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(t,e,i,r){var o=this.objs.get(t);if(o){for(var s=o.width,a=o.height,l=[],c=0,u=r.length;c<u;c+=2)l.push({transform:[e,0,0,i,r[c],r[c+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}else(0,n.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t){var i=t.width,n=t.height,r=this.ctx;this.save(),r.scale(1/i,-1/n);var o,s,a=r.mozCurrentTransformInverse,l=a[0],c=a[1],u=Math.max(Math.sqrt(l*l+c*c),1),h=a[2],p=a[3],d=Math.max(Math.sqrt(h*h+p*p),1);if(t instanceof HTMLElement||!t.data)o=t;else{var f=(s=this.cachedCanvases.getCanvas("inlineImage",i,n)).context;e(f,t),o=s.canvas}for(var m=i,g=n,y="prescale1";u>2&&m>1||d>2&&g>1;){var _=m,v=g;u>2&&m>1&&(u/=m/(_=Math.ceil(m/2))),d>2&&g>1&&(d/=g/(v=Math.ceil(g/2))),(f=(s=this.cachedCanvases.getCanvas(y,_,v)).context).clearRect(0,0,_,v),f.drawImage(o,0,0,m,g,0,0,_,v),o=s.canvas,m=_,g=v,y="prescale1"===y?"prescale2":"prescale1"}if(r.drawImage(o,0,0,m,g,0,-n,i,n),this.imageLayer){var b=this.getCanvasPosition(0,-n);this.imageLayer.appendImage({imgData:t,left:b[0],top:b[1],width:i/a[0],height:n/a[3]})}this.restore()},paintInlineImageXObjectGroup:function(t,i){var n=this.ctx,r=t.width,o=t.height,s=this.cachedCanvases.getCanvas("inlineImage",r,o);e(s.context,t);for(var a=0,l=i.length;a<l;a++){var c=i[a];if(n.save(),n.transform.apply(n,c.transform),n.scale(1,-1),n.drawImage(s.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:r,height:o})}n.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,n.warn)("Unsupported 'paintXObject' command.")},markPoint:function(t){},markPointProps:function(t,e){},beginMarkedContent:function(t){},beginMarkedContentProps:function(t,e){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var t=this.ctx;this.pendingClip&&(this.pendingClip===b?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth:function(t){if(null===this.cachedGetSinglePixelWidth){this.ctx.save();var e=this.ctx.mozCurrentTransformInverse;this.ctx.restore(),this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1],e[2]*e[2]+e[3]*e[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function(t,e){var i=this.ctx.mozCurrentTransform;return[i[0]*t+i[2]*e+i[4],i[1]*t+i[3]*e+i[5]]}},n.OPS)t.prototype[n.OPS[x]]=t.prototype[x];return t}();e.CanvasGraphics=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=i(0);function r(t){this.docId=t,this.styleElement=null,this.nativeFontFaces=[],this.loadTestFontId=0,this.loadingContext={requests:[],nextRequestId:0}}r.prototype={insertRule:function(t){var e=this.styleElement;e||((e=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(e));var i=e.sheet;i.insertRule(t,i.cssRules.length)},clear:function(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.nativeFontFaces.forEach(function(t){document.fonts.delete(t)}),this.nativeFontFaces.length=0}};Object.defineProperty(r.prototype,"loadTestFont",{get:function(){return(0,n.shadow)(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},configurable:!0}),r.prototype.addNativeFontFace=function(t){this.nativeFontFaces.push(t),document.fonts.add(t)},r.prototype.bind=function(t,e){for(var i=[],o=[],s=[],a=function(t){return t.loaded.catch(function(e){(0,n.warn)('Failed to load font "'+t.family+'": '+e)})},l=r.isFontLoadingAPISupported&&!r.isSyncFontLoadingSupported,c=0,u=t.length;c<u;c++){var h=t[c];if(!h.attached&&!1!==h.loading)if(h.attached=!0,l){var p=h.createNativeFontFace();p&&(this.addNativeFontFace(p),s.push(a(p)))}else{var d=h.createFontFaceRule();d&&(this.insertRule(d),i.push(d),o.push(h))}}var f=this.queueLoadingCallback(e);l?Promise.all(s).then(function(){f.complete()}):i.length>0&&!r.isSyncFontLoadingSupported?this.prepareFontLoadEvent(i,o,f):f.complete()},r.prototype.queueLoadingCallback=function(t){var e=this.loadingContext,i={id:"pdfjs-font-loading-"+e.nextRequestId++,complete:function(){for((0,n.assert)(!i.end,"completeRequest() cannot be called twice"),i.end=Date.now();e.requests.length>0&&e.requests[0].end;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t,started:Date.now()};return e.requests.push(i),i},r.prototype.prepareFontLoadEvent=function(t,e,i){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function o(t,e,i,n){return t.substr(0,e)+n+t.substr(e+i)}var s,a,l=document.createElement("canvas");l.width=1,l.height=1;var c=l.getContext("2d"),u=0;var h="lt"+Date.now()+this.loadTestFontId++,p=this.loadTestFont,d=r(p=o(p,976,h.length,h),16);for(s=0,a=h.length-3;s<a;s+=4)d=d-1482184792+r(h,s)|0;s<h.length&&(d=d-1482184792+r(h+"XXX",s)|0),p=o(p,16,4,(0,n.string32)(d));var f='@font-face { font-family:"'+h+'";src:'+("url(data:font/opentype;base64,"+btoa(p)+");")+"}";this.insertRule(f);var m=[];for(s=0,a=e.length;s<a;s++)m.push(e[s].loadedName);m.push(h);var g=document.createElement("div");for(g.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),s=0,a=m.length;s<a;++s){var y=document.createElement("span");y.textContent="Hi",y.style.fontFamily=m[s],g.appendChild(y)}document.body.appendChild(g),function t(e,i){if(++u>30)return(0,n.warn)("Load test font never loaded."),void i();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(h,function(){document.body.removeChild(g),i.complete()})},r.isFontLoadingAPISupported="undefined"!=typeof document&&!!document.fonts;Object.defineProperty(r,"isSyncFontLoadingSupported",{get:function(){return(0,n.shadow)(r,"isSyncFontLoadingSupported",function(){if("undefined"==typeof navigator)return!0;var t=!1,e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);return e&&e[1]>=14&&(t=!0),t}())},enumerable:!0,configurable:!0});var o={get value(){return(0,n.shadow)(this,"value",(0,n.isEvalSupported)())}},s=function(){function t(t,e){for(var i in this.compiledGlyphs=Object.create(null),t)this[i]=t[i];this.options=e}return t.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var t=new FontFace(this.loadedName,this.data,{});return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this),t},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var t=(0,n.bytesToString)(new Uint8Array(this.data)),e=this.loadedName,i="url(data:"+this.mimetype+";base64,"+btoa(t)+");",r='@font-face { font-family:"'+e+'";src:'+i+"}";return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,i),r},getPathGenerator:function(t,e){if(!(e in this.compiledGlyphs)){var i,n,r,s=t.get(this.loadedName+"_path_"+e);if(this.options.isEvalSupported&&o.value){var a,l="";for(n=0,r=s.length;n<r;n++)a=void 0!==(i=s[n]).args?i.args.join(","):"",l+="c."+i.cmd+"("+a+");\n";this.compiledGlyphs[e]=new Function("c","size",l)}else this.compiledGlyphs[e]=function(t,e){for(n=0,r=s.length;n<r;n++)"scale"===(i=s[n]).cmd&&(i.args=[e,-e]),t[i.cmd].apply(t,i.args)}}return this.compiledGlyphs[e]}},t}();e.FontFaceObject=s,e.FontLoader=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.getShadingPatternFromIR=void 0;var n=i(0),r=i(53),o={RadialAxial:{fromIR:function(t){var e=t[1],i=t[2],n=t[3],r=t[4],o=t[5],s=t[6];return{type:"Pattern",getPattern:function(t){var a;"axial"===e?a=t.createLinearGradient(n[0],n[1],r[0],r[1]):"radial"===e&&(a=t.createRadialGradient(n[0],n[1],o,r[0],r[1],s));for(var l=0,c=i.length;l<c;++l){var u=i[l];a.addColorStop(u[0],u[1])}return a}}}}},s=function(){function t(t,e,i,n,r,o,s,a){var l,c=e.coords,u=e.colors,h=t.data,p=4*t.width;c[i+1]>c[n+1]&&(l=i,i=n,n=l,l=o,o=s,s=l),c[n+1]>c[r+1]&&(l=n,n=r,r=l,l=s,s=a,a=l),c[i+1]>c[n+1]&&(l=i,i=n,n=l,l=o,o=s,s=l);var d=(c[i]+e.offsetX)*e.scaleX,f=(c[i+1]+e.offsetY)*e.scaleY,m=(c[n]+e.offsetX)*e.scaleX,g=(c[n+1]+e.offsetY)*e.scaleY,y=(c[r]+e.offsetX)*e.scaleX,_=(c[r+1]+e.offsetY)*e.scaleY;if(!(f>=_))for(var v,b,x,A,w,P,E,T,S,C=u[o],O=u[o+1],M=u[o+2],R=u[s],I=u[s+1],D=u[s+2],L=u[a],k=u[a+1],F=u[a+2],N=Math.round(f),B=Math.round(_),V=N;V<=B;V++){V<g?(v=d-(d-m)*(S=V<f?0:f===g?1:(f-V)/(f-g)),b=C-(C-R)*S,x=O-(O-I)*S,A=M-(M-D)*S):(v=m-(m-y)*(S=V>_?1:g===_?0:(g-V)/(g-_)),b=R-(R-L)*S,x=I-(I-k)*S,A=D-(D-F)*S),w=d-(d-y)*(S=V<f?0:V>_?1:(f-V)/(f-_)),P=C-(C-L)*S,E=O-(O-k)*S,T=M-(M-F)*S;for(var z=Math.round(Math.min(v,w)),U=Math.round(Math.max(v,w)),j=p*V+4*z,G=z;G<=U;G++)S=(S=(v-G)/(v-w))<0?0:S>1?1:S,h[j++]=b-(b-P)*S|0,h[j++]=x-(x-E)*S|0,h[j++]=A-(A-T)*S|0,h[j++]=255}}function e(e,i,n){var r,o,s=i.coords,a=i.colors;switch(i.type){case"lattice":var l=i.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++)for(var h=r*l,p=0;p<u;p++,h++)t(e,n,s[h],s[h+1],s[h+l],a[h],a[h+1],a[h+l]),t(e,n,s[h+l+1],s[h+1],s[h+l],a[h+l+1],a[h+1],a[h+l]);break;case"triangles":for(r=0,o=s.length;r<o;r+=3)t(e,n,s[r],s[r+1],s[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}return function(t,i,n,o,s,a,l){var c,u,h,p,d=Math.floor(t[0]),f=Math.floor(t[1]),m=Math.ceil(t[2])-d,g=Math.ceil(t[3])-f,y=Math.min(Math.ceil(Math.abs(m*i[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(g*i[1]*1.1)),3e3),v=m/y,b=g/_,x={coords:n,colors:o,offsetX:-d,offsetY:-f,scaleX:1/v,scaleY:1/b},A=y+4,w=_+4;if(r.WebGLUtils.isEnabled)c=r.WebGLUtils.drawFigures(y,_,a,s,x),(u=l.getCanvas("mesh",A,w,!1)).context.drawImage(c,2,2),c=u.canvas;else{var P=(u=l.getCanvas("mesh",A,w,!1)).context,E=P.createImageData(y,_);if(a){var T=E.data;for(h=0,p=T.length;h<p;h+=4)T[h]=a[0],T[h+1]=a[1],T[h+2]=a[2],T[h+3]=255}for(h=0;h<s.length;h++)e(E,s[h],x);P.putImageData(E,2,2),c=u.canvas}return{canvas:c,offsetX:d-2*v,offsetY:f-2*b,scaleX:v,scaleY:b}}}();o.Mesh={fromIR:function(t){var e=t[2],i=t[3],r=t[4],o=t[5],a=t[6],l=t[8];return{type:"Pattern",getPattern:function(t,c,u){var h;if(u)h=n.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(h=n.Util.singularValueDecompose2dScale(c.baseTransform),a){var p=n.Util.singularValueDecompose2dScale(a);h=[h[0]*p[0],h[1]*p[1]]}var d=s(o,h,e,i,r,u?null:l,c.cachedCanvases);return u||(t.setTransform.apply(t,c.baseTransform),a&&t.transform.apply(t,a)),t.translate(d.offsetX,d.offsetY),t.scale(d.scaleX,d.scaleY),t.createPattern(d.canvas,"no-repeat")}}}},o.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var a=function(){var t=1,e=2;function i(t,e,i,n,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=n,this.baseTransform=r,this.type="Pattern",this.ctx=i}return i.prototype={createPatternCanvas:function(t){var e=this.operatorList,i=this.bbox,r=this.xstep,o=this.ystep,s=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+a);var u=i[0],h=i[1],p=i[2],d=i[3],f=[u,h],m=[u+r,h+o],g=m[0]-f[0],y=m[1]-f[1],_=n.Util.singularValueDecompose2dScale(this.matrix),v=n.Util.singularValueDecompose2dScale(this.baseTransform),b=[_[0]*v[0],_[1]*v[1]];g=Math.min(Math.ceil(Math.abs(g*b[0])),3e3),y=Math.min(Math.ceil(Math.abs(y*b[1])),3e3);var x=t.cachedCanvases.getCanvas("pattern",g,y,!0),A=x.context,w=c.createCanvasGraphics(A);w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(A,s,l),this.setScale(g,y,r,o),this.transformToScale(w);var P=[1,0,0,1,-f[0],-f[1]];return w.transform.apply(w,P),this.clipBbox(w,i,u,h,p,d),w.executeOperatorList(e),x.canvas},setScale:function(t,e,i,n){this.scale=[t/i,e/n]},transformToScale:function(t){var e=this.scale,i=[e[0],0,0,e[1],0,0];t.transform.apply(t,i)},scaleToContext:function(){var t=this.scale;this.ctx.scale(1/t[0],1/t[1])},clipBbox:function(t,e,i,r,o,s){if((0,n.isArray)(e)&&4===e.length){var a=o-i,l=s-r;t.ctx.rect(i,r,a,l),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function(i,r,o){switch(r){case t:var s=this.ctx;i.fillStyle=s.fillStyle,i.strokeStyle=s.strokeStyle;break;case e:var a=n.Util.makeCssRgb(o[0],o[1],o[2]);i.fillStyle=a,i.strokeStyle=a;break;default:throw new n.FormatError("Unsupported paint type: "+r)}},getPattern:function(t,e){var i=this.createPatternCanvas(e);return(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix),this.scaleToContext(),t.createPattern(i,"repeat")}},i}();e.getShadingPatternFromIR=function(t){var e=o[t[0]];if(!e)throw new Error("Unknown IR type: "+t[0]);return e.fromIR(t)},e.TilingPattern=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=i(0),r=function(){function t(t,e){var i=this;(0,n.assert)(e),this._queuedChunks=[];var r=t.initialData;if(r&&r.length>0){var o=new Uint8Array(r).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=e,this._isRangeSupported=!t.disableRange,this._isStreamingSupported=!t.disableStream,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(t,e){i._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener(function(t){i._onProgress({loaded:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(t){i._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.transportReady()}function e(t,e){this._stream=t,this._done=!1,this._queuedChunks=e||[],this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}function i(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return t.prototype={_onReceiveData:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var i=this._rangeReaders.some(function(i){return i._begin===t.begin&&(i._enqueue(e),!0)});(0,n.assert)(i)}},_onProgress:function(t){if(this._rangeReaders.length>0){var e=this._rangeReaders[0];e.onProgress&&e.onProgress({loaded:t.loaded})}},_removeRangeReader:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)},getFullReader:function(){(0,n.assert)(!this._fullRequestReader);var t=this._queuedChunks;return this._queuedChunks=null,new e(this,t)},getRangeReader:function(t,e){var n=new i(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n},cancelAllRequests:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach(function(e){e.cancel(t)}),this._pdfDataRangeTransport.abort()}},e.prototype={_enqueue:function(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t))},get headersReady(){return this._headersReady},get isRangeSupported(){return this._stream._isRangeSupported},get isStreamingSupported(){return this._stream._isStreamingSupported},get contentLength(){return this._stream._contentLength},read:function(){if(this._queuedChunks.length>0){var t=this._queuedChunks.shift();return Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[]}},i.prototype={_enqueue:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[];this._done=!0,this._stream._removeRangeReader(this)}},get isStreamingSupported(){return!1},read:function(){if(this._queuedChunk){var t=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:t,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise},cancel:function(t){this._done=!0,this._requests.forEach(function(t){t.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}},t}();e.PDFDataTransportStream=r},function(t,e,i){"use strict";var n=i(0),r=i(54),o=i(30),s=i(32),a=i(29),l=i(7),c=i(31);if(n.isNodeJS()){var u=i(56).PDFNodeStream;o.setPDFNetworkStreamClass(u)}else{var h=i(55).PDFNetworkStream;o.setPDFNetworkStreamClass(h)}e.PDFJS=r.PDFJS,e.build=o.build,e.version=o.version,e.getDocument=o.getDocument,e.LoopbackPort=o.LoopbackPort,e.PDFDataRangeTransport=o.PDFDataRangeTransport,e.PDFWorker=o.PDFWorker,e.renderTextLayer=s.renderTextLayer,e.AnnotationLayer=a.AnnotationLayer,e.CustomStyle=l.CustomStyle,e.createPromiseCapability=n.createPromiseCapability,e.PasswordResponses=n.PasswordResponses,e.InvalidPDFException=n.InvalidPDFException,e.MissingPDFException=n.MissingPDFException,e.SVGGraphics=c.SVGGraphics,e.NativeImageDecoding=n.NativeImageDecoding,e.UnexpectedResponseException=n.UnexpectedResponseException,e.OPS=n.OPS,e.UNSUPPORTED_FEATURES=n.UNSUPPORTED_FEATURES,e.isValidUrl=l.isValidUrl,e.createValidAbsoluteUrl=n.createValidAbsoluteUrl,e.createObjectURL=n.createObjectURL,e.removeNullCharacters=n.removeNullCharacters,e.shadow=n.shadow,e.createBlob=n.createBlob,e.RenderingCancelledException=l.RenderingCancelledException,e.getFilenameFromUrl=l.getFilenameFromUrl,e.addLinkAttributes=l.addLinkAttributes,e.StatTimer=n.StatTimer},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof PDFJS||!PDFJS.compatibilityChecked){var r=i(14),o="undefined"!=typeof navigator&&navigator.userAgent||"",s=/Android/.test(o),a=/Android\s[0-2][^\d]/.test(o),l=/Android\s[0-4][^\d]/.test(o),c=o.indexOf("Chrom")>=0,u=/Chrome\/(39|40)\./.test(o),h=o.indexOf("CriOS")>=0,p=o.indexOf("Trident")>=0,d=/\b(iPad|iPhone|iPod)(?=;)/.test(o),f=o.indexOf("Opera")>=0,m=/Safari\//.test(o)&&!/(Chrome\/|Android\s)/.test(o),g="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document));"undefined"==typeof PDFJS&&(r.PDFJS={}),PDFJS.compatibilityChecked=!0,function(){if("undefined"==typeof Uint8ClampedArray&&(r.Uint8ClampedArray=i(58)),"undefined"!=typeof Uint8Array)return"undefined"==typeof Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(t,e){return new Uint8Array(this.slice(t,e))},Float32Array.prototype.subarray=function(t,e){return new Float32Array(this.slice(t,e))}),void("undefined"==typeof Float64Array&&(r.Float64Array=Float32Array));function t(t,e){return new l(this.slice(t,e))}function e(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function o(t,e){this.buffer=t,this.byteLength=t.length,this.length=e,function(t){for(;s<t;)Object.defineProperty(o.prototype,s,a(s)),s++}(this.length)}o.prototype=Object.create(null);var s=0;function a(t){return{get:function(){var e=this.buffer,i=t<<2;return(e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24)>>>0},set:function(e){var i=this.buffer,n=t<<2;i[n]=255&e,i[n+1]=e>>8&255,i[n+2]=e>>16&255,i[n+3]=e>>>24&255}}}function l(i){var r,o,s;if("number"==typeof i)for(r=[],o=0;o<i;++o)r[o]=0;else if("slice"in i)r=i.slice(0);else for(r=[],o=0,s=i.length;o<s;++o)r[o]=i[o];return r.subarray=t,r.buffer=r,r.byteLength=r.length,r.set=e,"object"===("undefined"==typeof i?"undefined":n(i))&&i.buffer&&(r.buffer=i.buffer),r}r.Uint8Array=l,r.Int8Array=l,r.Int32Array=l,r.Uint16Array=l,r.Float32Array=l,r.Float64Array=l,r.Uint32Array=function(){if(3===arguments.length){if(0!==arguments[1])throw new Error("offset !== 0 is not supported");return new o(arguments[0],arguments[2])}return l.apply(this,arguments)}}(),function(){if(g&&window.CanvasPixelArray){var t=window.CanvasPixelArray.prototype;"buffer"in t||(Object.defineProperty(t,"buffer",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(t,"byteLength",{get:function(){return this.length},enumerable:!1,configurable:!0}))}}(),r.URL||(r.URL=r.webkitURL),function(){if("undefined"!=typeof Object.defineProperty){var t=!0;try{g&&Object.defineProperty(new Image,"id",{value:"test"});var e=function(){};e.prototype={get id(){}},Object.defineProperty(new e,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(e){t=!1}if(t)return}Object.defineProperty=function(t,e,i){delete t[e],"get"in i&&t.__defineGetter__(e,i.get),"set"in i&&t.__defineSetter__(e,i.set),"value"in i&&(t.__defineSetter__(e,function(t){return this.__defineGetter__(e,function(){return t}),t}),t[e]=i.value)}}(),function(){if("undefined"!=typeof XMLHttpRequest){var t=XMLHttpRequest.prototype,e=new XMLHttpRequest;"overrideMimeType"in e||Object.defineProperty(t,"overrideMimeType",{value:function(t){}}),"responseType"in e||(Object.defineProperty(t,"responseType",{get:function(){return this._responseType||"text"},set:function(t){"text"!==t&&"arraybuffer"!==t||(this._responseType=t,"arraybuffer"===t&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"==typeof VBArray?Object.defineProperty(t,"response",{get:function(){if("arraybuffer"!==this.responseType)return this.responseText;var t,e=this.responseText,i=e.length,n=new Uint8Array(i);for(t=0;t<i;++t)n[t]=255&e.charCodeAt(t);return n.buffer}}):Object.defineProperty(t,"response",{get:function(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}}))}}(),function(){if(!("btoa"in r)){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.btoa=function(e){var i,n,r="";for(i=0,n=e.length;i<n;i+=3){var o=255&e.charCodeAt(i),s=255&e.charCodeAt(i+1),a=255&e.charCodeAt(i+2),l=(3&o)<<4|s>>4,c=i+1<n?(15&s)<<2|a>>6:64,u=i+2<n?63&a:64;r+=t.charAt(o>>2)+t.charAt(l)+t.charAt(c)+t.charAt(u)}return r}}}(),function(){if(!("atob"in r)){r.atob=function(t){if((t=t.replace(/=+$/,"")).length%4==1)throw new Error("bad atob input");for(var e,i,n=0,r=0,o="";i=t.charAt(r++);~i&&(e=n%4?64*e+i:i,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}}}(),"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e=this,i=Array.prototype.slice.call(arguments,1);return function(){var n=i.concat(Array.prototype.slice.call(arguments));return e.apply(t,n)}}),g&&("dataset"in document.createElement("div")||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var t={},e=0,i=this.attributes.length;e<i;e++){var n=this.attributes[e];"data-"===n.name.substring(0,5)&&(t[n.name.substring(5).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})]=n.value)}return Object.defineProperty(this,"_dataset",{value:t,writable:!1,enumerable:!1}),t},enumerable:!0})),function(){function t(t,e,i,n){var r=(t.className||"").split(/\s+/g);""===r[0]&&r.shift();var o=r.indexOf(e);return o<0&&i&&r.push(e),o>=0&&n&&r.splice(o,1),t.className=r.join(" "),o>=0}if(g&&!("classList"in document.createElement("div"))){var e={add:function(e){t(this.element,e,!0,!1)},contains:function(e){return t(this.element,e,!1,!1)},remove:function(e){t(this.element,e,!1,!0)},toggle:function(e){t(this.element,e,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var t=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:t,writable:!1,enumerable:!1}),t},enumerable:!0})}}(),function(){if(!("undefined"==typeof importScripts||"console"in r)){var t={},e={log:function(){var t=Array.prototype.slice.call(arguments);r.postMessage({targetName:"main",action:"console_log",data:t})},error:function(){var t=Array.prototype.slice.call(arguments);r.postMessage({targetName:"main",action:"console_error",data:t})},time:function(e){t[e]=Date.now()},timeEnd:function(e){var i=t[e];if(!i)throw new Error("Unknown timer name "+e);this.log("Timer:",e,Date.now()-i)}};r.console=e}}(),function(){var t;if(g){if("console"in window)return"bind"in console.log?void 0:(console.log=(t=console.log,function(e){return t(e)}),console.error=function(t){return function(e){return t(e)}}(console.error),void(console.warn=function(t){return function(e){return t(e)}}(console.warn)));window.console={log:function(){},error:function(){},warn:function(){}}}}(),function(){f&&document.addEventListener("click",function(t){(function t(e){return e.disabled||e.parentNode&&t(e.parentNode)})(t.target)&&t.stopPropagation()},!0)}(),(p||h)&&(PDFJS.disableCreateObjectURL=!0),"undefined"!=typeof navigator&&("language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")),(m||a||u||d)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0),g&&(history.pushState&&!a||(PDFJS.disableHistory=!0)),function(){if(g)if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(t){for(var e=0,i=this.length;e<i;e++)this[e]=t[e]});else{var t,e=!1;if(c?e=(t=o.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(t[2])<21:s?e=l:m&&(e=(t=o.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//))&&parseInt(t[1])<6),e){var i=window.CanvasRenderingContext2D.prototype,n=i.createImageData;i.createImageData=function(t,e){var i=n.call(this,t,e);return i.data.set=function(t){for(var e=0,i=this.length;e<i;e++)this[e]=t[e]},i},i=null}}}(),function(){function t(){window.requestAnimationFrame=function(t){return window.setTimeout(t,20)},window.cancelAnimationFrame=function(t){window.clearTimeout(t)}}g&&(d?t():"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame||t()))}(),(d||s)&&(PDFJS.maxCanvasPixels=5242880),g&&p&&window.parent!==window&&(PDFJS.disableFullscreen=!0),g&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var t=document.getElementsByTagName("script");return t[t.length-1]},enumerable:!0,configurable:!0})),function(){if(g){var t=document.createElement("input");try{t.type="number"}catch(n){var e=t.constructor.prototype,i=Object.getOwnPropertyDescriptor(e,"type");Object.defineProperty(e,"type",{get:function(){return i.get.call(this)},set:function(t){i.set.call(this,"number"===t?"text":t)},enumerable:!0,configurable:!0})}}}(),function(){if(g&&document.attachEvent){var t=document.constructor.prototype,e=Object.getOwnPropertyDescriptor(t,"readyState");Object.defineProperty(t,"readyState",{get:function(){var t=e.get.call(this);return"interactive"===t?"loading":t},set:function(t){e.set.call(this,t)},enumerable:!0,configurable:!0})}}(),g&&"undefined"==typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),function(){if(r.Promise)return"function"!=typeof r.Promise.all&&(r.Promise.all=function(t){var e,i,n=0,o=[],s=new r.Promise(function(t,n){e=t,i=n});return t.forEach(function(t,r){n++,t.then(function(t){o[r]=t,0===--n&&e(o)},i)}),0===n&&e(o),s}),"function"!=typeof r.Promise.resolve&&(r.Promise.resolve=function(t){return new r.Promise(function(e){e(t)})}),"function"!=typeof r.Promise.reject&&(r.Promise.reject=function(t){return new r.Promise(function(e,i){i(t)})}),void("function"!=typeof r.Promise.prototype.catch&&(r.Promise.prototype.catch=function(t){return r.Promise.prototype.then(void 0,t)}));var t=2,e={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(t){0!==t._status&&(this.handlers=this.handlers.concat(t._handlers),t._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var e=Date.now()+1;this.handlers.length>0;){var i=this.handlers.shift(),n=i.thisPromise._status,r=i.thisPromise._value;try{1===n?"function"==typeof i.onResolve&&(r=i.onResolve(r)):"function"==typeof i.onReject&&(r=i.onReject(r),n=1,i.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(i.thisPromise))}catch(e){n=t,r=e}if(i.nextPromise._updateStatus(n,r),Date.now()>=e)break}this.handlers.length>0?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++)this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)},scheduleRejectionCheck:function(){var t=this;this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){t.pendingRejectionCheck=!1;for(var e=Date.now(),i=0;i<t.unhandledRejections.length;i++)if(e-t.unhandledRejections[i].time>500){var n=t.unhandledRejections[i].promise._value,r="Unhandled rejection: "+n;n.stack&&(r+="\n"+n.stack);try{throw new Error(r)}catch(t){console.warn(r)}t.unhandledRejections.splice(i),i--}t.unhandledRejections.length&&t.scheduleRejectionCheck()},500))}},i=function(t){this._status=0,this._handlers=[];try{t.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}};i.all=function(e){var n,r,o=new i(function(t,e){n=t,r=e}),s=e.length,a=[];if(0===s)return n(a),o;function l(e){o._status!==t&&(a=[],r(e))}for(var c=0,u=e.length;c<u;++c){var h=e[c],p=function(e){return function(i){o._status!==t&&(a[e]=i,0===--s&&n(a))}}(c);i.isPromise(h)?h.then(p,l):p(h)}return o},i.isPromise=function(t){return t&&"function"==typeof t.then},i.resolve=function(t){return new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,i){i(t)})},i.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(n,r){1!==this._status&&this._status!==t&&(1===n&&i.isPromise(r)?r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,t)):(this._status=n,this._value=r,n===t&&0===this._handlers.length&&(this._unhandledRejection=!0,e.addUnhandledRejection(this)),e.scheduleHandlers(this)))},_resolve:function(t){this._updateStatus(1,t)},_reject:function(e){this._updateStatus(t,e)},then:function(t,n){var r=new i(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:t,onReject:n,nextPromise:r}),e.scheduleHandlers(this),r},catch:function(t){return this.then(void 0,t)}},r.Promise=i}(),function(){if(!r.WeakMap){var t=0;e.prototype={has:function(t){return("object"===("undefined"==typeof t?"undefined":n(t))||"function"==typeof t)&&null!==t&&!!Object.getOwnPropertyDescriptor(t,this.id)},get:function(t){return this.has(t)?t[this.id]:void 0},set:function(t,e){Object.defineProperty(t,this.id,{value:e,enumerable:!1,configurable:!0})},delete:function(t){delete t[this.id]}},r.WeakMap=e}function e(){this.id="$weakmap"+t++}}(),function(){var t=!1;try{if("function"==typeof URL&&"object"===n(URL.prototype)&&"origin"in URL.prototype){var e=new URL("b","http://a");e.pathname="c%20d",t="http://a/c%20d"===e.href}}catch(t){}if(!t){var i=Object.create(null);i.ftp=21,i.file=0,i.gopher=70,i.http=80,i.https=443,i.ws=80,i.wss=443;var o=Object.create(null);o["%2e"]=".",o[".%2e"]="..",o["%2e."]="..",o["%2e%2e"]="..";var s,a=/[a-zA-Z]/,l=/[a-zA-Z0-9\+\-\.]/;y.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){g.call(this),m.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||m.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],m.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),m.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),m.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new y(this._schemeData).origin||"null"}catch(t){}return"null"}return(t=this.host)?this._scheme+"://"+t:""}};var c=r.URL;c&&(y.createObjectURL=function(t){return c.createObjectURL.apply(c,arguments)},y.revokeObjectURL=function(t){c.revokeObjectURL(t)}),r.URL=y}function u(t){return void 0!==i[t]}function h(){g.call(this),this._isInvalid=!0}function p(t){return""===t&&h.call(this),t.toLowerCase()}function d(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function f(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function m(t,e,n){function r(t){v.push(t)}var c=e||"scheme start",m=0,g="",y=!1,_=!1,v=[];t:for(;(t[m-1]!==s||0===m)&&!this._isInvalid;){var b=t[m];switch(c){case"scheme start":if(!b||!a.test(b)){if(e){r("Invalid scheme.");break t}g="",c="no scheme";continue}g+=b.toLowerCase(),c="scheme";break;case"scheme":if(b&&l.test(b))g+=b.toLowerCase();else{if(":"!==b){if(e){if(b===s)break t;r("Code point not allowed in scheme: "+b);break t}g="",m=0,c="no scheme";continue}if(this._scheme=g,g="",e)break t;u(this._scheme)&&(this._isRelative=!0),c="file"===this._scheme?"relative":this._isRelative&&n&&n._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===b?(this._query="?",c="query"):"#"===b?(this._fragment="#",c="fragment"):b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._schemeData+=d(b));break;case"no scheme":if(n&&u(n._scheme)){c="relative";continue}r("Missing scheme."),h.call(this);break;case"relative or authority":if("/"!==b||"/"!==t[m+1]){r("Expected /, got: "+b),c="relative";continue}c="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=n._scheme),b===s){this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._username=n._username,this._password=n._password;break t}if("/"===b||"\\"===b)"\\"===b&&r("\\ is an invalid code point."),c="relative slash";else if("?"===b)this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query="?",this._username=n._username,this._password=n._password,c="query";else{if("#"!==b){var x=t[m+1],A=t[m+2];("file"!==this._scheme||!a.test(b)||":"!==x&&"|"!==x||A!==s&&"/"!==A&&"\\"!==A&&"?"!==A&&"#"!==A)&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password,this._path=n._path.slice(),this._path.pop()),c="relative path";continue}this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._fragment="#",this._username=n._username,this._password=n._password,c="fragment"}break;case"relative slash":if("/"!==b&&"\\"!==b){"file"!==this._scheme&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password),c="relative path";continue}"\\"===b&&r("\\ is an invalid code point."),c="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==b){r("Expected '/', got: "+b),c="authority ignore slashes";continue}c="authority second slash";break;case"authority second slash":if(c="authority ignore slashes","/"!==b){r("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!==b&&"\\"!==b){c="authority";continue}r("Expected authority, got: "+b);break;case"authority":if("@"===b){y&&(r("@ already seen."),g+="%40"),y=!0;for(var w=0;w<g.length;w++){var P=g[w];if("\t"!==P&&"\n"!==P&&"\r"!==P)if(":"!==P||null!==this._password){var E=d(P);null!==this._password?this._password+=E:this._username+=E}else this._password="";else r("Invalid whitespace in authority.")}g=""}else{if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){m-=g.length,g="",c="host";continue}g+=b}break;case"file host":if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){2!==g.length||!a.test(g[0])||":"!==g[1]&&"|"!==g[1]?0===g.length?c="relative path start":(this._host=p.call(this,g),g="",c="relative path start"):c="relative path";continue}"\t"===b||"\n"===b||"\r"===b?r("Invalid whitespace in file host."):g+=b;break;case"host":case"hostname":if(":"!==b||_){if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){if(this._host=p.call(this,g),g="",c="relative path start",e)break t;continue}"\t"!==b&&"\n"!==b&&"\r"!==b?("["===b?_=!0:"]"===b&&(_=!1),g+=b):r("Invalid code point in host/hostname: "+b)}else if(this._host=p.call(this,g),g="",c="port","hostname"===e)break t;break;case"port":if(/[0-9]/.test(b))g+=b;else{if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b||e){if(""!==g){var T=parseInt(g,10);T!==i[this._scheme]&&(this._port=T+""),g=""}if(e)break t;c="relative path start";continue}"\t"===b||"\n"===b||"\r"===b?r("Invalid code point in port: "+b):h.call(this)}break;case"relative path start":if("\\"===b&&r("'\\' not allowed in path."),c="relative path","/"!==b&&"\\"!==b)continue;break;case"relative path":var S;if(b!==s&&"/"!==b&&"\\"!==b&&(e||"?"!==b&&"#"!==b))"\t"!==b&&"\n"!==b&&"\r"!==b&&(g+=d(b));else"\\"===b&&r("\\ not allowed in relative path."),(S=o[g.toLowerCase()])&&(g=S),".."===g?(this._path.pop(),"/"!==b&&"\\"!==b&&this._path.push("")):"."===g&&"/"!==b&&"\\"!==b?this._path.push(""):"."!==g&&("file"===this._scheme&&0===this._path.length&&2===g.length&&a.test(g[0])&&"|"===g[1]&&(g=g[0]+":"),this._path.push(g)),g="","?"===b?(this._query="?",c="query"):"#"===b&&(this._fragment="#",c="fragment");break;case"query":e||"#"!==b?b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._query+=f(b)):(this._fragment="#",c="fragment");break;case"fragment":b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._fragment+=b)}m++}}function g(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function y(t,e){void 0===e||e instanceof y||(e=new y(String(e))),this._url=t,g.call(this);var i=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");m.call(this,i,null,e)}}()}},function(t,e,i){"use strict";var n=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(t){t.close()}}),n=!0}catch(t){}e.ReadableStream=n?ReadableStream:i(57).ReadableStream}])},t.exports=o()}).call(e,i("1WNV"),i("GTd5"),i("v0OU").Buffer)},ExCY:function(t,e,i){"use strict";function n(){}function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:n}e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r(t)},e.b=r},GQSG:function(t,e,i){"use strict";var n=i("AP4T"),r=i("dmC+");n.a.prototype.map=r.a},GTd5:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},GTlS:function(t,e,i){"use strict";var n=i("xIGM"),r=i("qLnt"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=function(t){function e(e,i){t.call(this)}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(r.a);i.d(e,"a",function(){return l});var a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.work=i,this.pending=!1}return a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),n.a.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;n.a.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,n=void 0;try{this.work(t)}catch(t){i=!0,n=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(s)},GZB0:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=i("Oryw").a.of},HECM:function(t,e,i){"use strict";var n=i("AP4T"),r=i("GZB0");n.a.of=r.a},HHSa:function(t,e,i){var n,r,o={REVISION:"1.2",nextID:0,proxyID:0,BR_NULL:0,BR_BRUTE_FORCE:1,BR_SWEEP_AND_PRUNE:2,BR_BOUNDING_VOLUME_TREE:3,BODY_NULL:0,BODY_DYNAMIC:1,BODY_STATIC:2,SHAPE_NULL:0,SHAPE_SPHERE:1,SHAPE_BOX:2,SHAPE_CYLINDER:3,SHAPE_TETRA:4,JOINT_NULL:0,JOINT_DISTANCE:1,JOINT_BALL_AND_SOCKET:2,JOINT_HINGE:3,JOINT_WHEEL:4,JOINT_SLIDER:5,JOINT_PRISMATIC:6,WORLD_SCALE:100,INV_SCALE:.01,AABB_PROX:.005,sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,lerp:function(t,e,i){return t+(e-t)*i},rand:function(t,e){return o.lerp(t,e,o.random())},randInt:function(t,e,i){return 1*o.lerp(t,e,o.random()).toFixed(i||0)},int:function(t){return~~t},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,i){return o.max(e,o.min(i,t))},degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,CustomError:null,Error:function(t,e){null==o.CustomError?console.error(t,e):o.CustomError.innerHTML+=t+" - "+e+"<br>"}};n||(n="undefined"!=typeof Float32Array?Float32Array:Array);try{!function(t){var e,i=["now","webkitNow","msNow","mozNow"];if(t.performance)for(var n=0;n<i.length;++n){var r=i[n];if(t.performance[r]){e=function(){return t.performance[r]()};break}}e||(e=Date.now),o.now=e}(window)}catch(t){o.now=function(){return 0}}function s(t,e,i){return{a:t,b:e,c:i}}function a(t,e,i,n){var r=.5*(-i.y*n.x+e.y*(-i.x+n.x)+e.x*(i.y-n.y)+i.x*n.y),o=r<0?-1:1,s=(e.y*n.x-e.x*n.y+(n.y-e.y)*t.x+(e.x-n.x)*t.y)*o,a=(e.x*i.y-e.y*i.x+(e.y-i.y)*t.x+(i.x-e.x)*t.y)*o;return s>0&&a>0&&s+a<2*r*o}function l(t,e){return{x:t,y:e}}o.World=function(t,e,i,n){switch(this.timeStep=t||.01666,this.numIterations=i||8,e||2){case 1:this.broadPhase=new o.BruteForceBroadPhase;break;case 2:default:this.broadPhase=new o.SAPBroadPhase;break;case 3:this.broadPhase=new o.DBVTBroadPhase}this.performance=null,this.isNoStat=n||!1,this.isNoStat||(this.performance=new o.Performance(this)),this.enableRandomizer=!0,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new o.Vec3(0,-9.80665,0);this.detectors=[],this.detectors.length=5;for(var r=5;r--;)this.detectors[r]=[],this.detectors[r].length=5;this.detectors[o.SHAPE_SPHERE][o.SHAPE_SPHERE]=new o.SphereSphereCollisionDetector,this.detectors[o.SHAPE_SPHERE][o.SHAPE_BOX]=new o.SphereBoxCollisionDetector(!1),this.detectors[o.SHAPE_BOX][o.SHAPE_SPHERE]=new o.SphereBoxCollisionDetector(!0),this.detectors[o.SHAPE_BOX][o.SHAPE_BOX]=new o.BoxBoxCollisionDetector,this.detectors[o.SHAPE_CYLINDER][o.SHAPE_CYLINDER]=new o.CylinderCylinderCollisionDetector,this.detectors[o.SHAPE_CYLINDER][o.SHAPE_BOX]=new o.BoxCylinderCollisionDetector(!0),this.detectors[o.SHAPE_BOX][o.SHAPE_CYLINDER]=new o.BoxCylinderCollisionDetector(!1),this.detectors[o.SHAPE_CYLINDER][o.SHAPE_SPHERE]=new o.SphereCylinderCollisionDetector(!0),this.detectors[o.SHAPE_SPHERE][o.SHAPE_CYLINDER]=new o.SphereCylinderCollisionDetector(!1),this.detectors[o.SHAPE_TETRA][o.SHAPE_TETRA]=new o.TetraTetraCollisionDetector,this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]},o.World.prototype={constructor:o.World,clear:function(){for(this.randX=65535;null!==this.joints;)this.removeJoint(this.joints);for(;null!==this.contacts;)this.removeContact(this.contacts);for(;null!==this.rigidBodies;)this.removeRigidBody(this.rigidBodies);o.nextID=0,o.proxyID=0},addRigidBody:function(t){t.parent&&o.Error("World","It is not possible to be added to more than one world one of the rigid body"),t.parent=this,t.awake();for(var e=t.shapes;null!==e;e=e.next)this.addShape(e);null!==this.rigidBodies&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var i=e.jointLink;null!=i;){var n=i.joint;i=i.next,this.removeJoint(n)}for(var r=t.shapes;null!==r;r=r.next)this.removeShape(r);var o=e.prev,s=e.next;null!==o&&(o.next=s),null!==s&&(s.prev=o),this.rigidBodies==e&&(this.rigidBodies=s),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=null,i=this.rigidBodies;null!==i;)" "!==i.name&&i.name===t&&(e=i),i=i.next;for(var n=this.joints;null!==n;)""!==n.name&&n.name===t&&(e=n),n=n.next;return e},addShape:function(t){t.parent&&t.parent.parent||o.Error("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&o.Error("World","It is not possible to be added to more than one world one of the joint"),null!=this.joints&&((this.joints.prev=t).next=this.joints),this.joints=t,t.parent=this,this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,i=e.prev,n=e.next;null!==i&&(i.next=n),null!==n&&(n.prev=i),this.joints==e&&(this.joints=n),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},worldscale:function(t){o.WORLD_SCALE=t||100,o.INV_SCALE=1/o.WORLD_SCALE},addContact:function(t,e){var i;null!==this.unusedContacts?(i=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):i=new o.Contact,i.attach(t,e),i.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=i).next=this.contacts),this.contacts=i,this.numContacts++},removeContact:function(t){var e=t.prev,i=t.next;i&&(i.prev=e),e&&(e.next=i),this.contacts==t&&(this.contacts=i),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},checkContact:function(t,e){for(var i,n,r=this.contacts;null!==r;){if(i=r.body1.name||" ",n=r.body2.name||" ",i==t&&n==e||n==t&&i==e)return!!r.touching;r=r.next}return!1},callSleep:function(t){return!!t.allowSleep&&(!(t.linearVelocity.lengthSq()>.04)&&!(t.angularVelocity.lengthSq()>.25))},step:function(){var t,e,i,n,r=!this.isNoStat;r&&(t=o.now());for(var s=this.rigidBodies;null!==s;)s.addedToIsland=!1,s.sleeping&&(s.linearVelocity.testZero()||s.angularVelocity.testZero()||s.position.testDiff(s.sleepPosition)||s.orientation.testDiff(s.sleepOrientation))&&s.awake(),s=s.next;r&&(e=o.now()),this.broadPhase.detectPairs();for(var a=this.broadPhase.pairs,l=this.broadPhase.numPairs;l--;){var c,u,h,p=a[l];p.shape1.id<p.shape2.id?(c=p.shape1,u=p.shape2):(c=p.shape2,u=p.shape1),h=c.numContacts<u.numContacts?c.contactLink:u.contactLink;for(var d=!1;h;){if((E=h.contact).shape1==c&&E.shape2==u){E.persisting=!0,d=!0;break}h=h.next}d||this.addContact(c,u)}for(r&&(i=o.now(),this.performance.broadPhaseTime=i-e),this.numContactPoints=0,E=this.contacts;null!==E;)if(E.persisting||!E.shape1.aabb.intersectTest(E.shape2.aabb)){var f=E.body1,m=E.body2;(f.isDynamic&&!f.sleeping||m.isDynamic&&!m.sleeping)&&E.updateManifold(),this.numContactPoints+=E.manifold.numPoints,E.persisting=!1,E.constraint.addedToIsland=!1,E=E.next}else{var g=E.next;this.removeContact(E),E=g}r&&(n=o.now(),this.performance.narrowPhaseTime=n-i);var y,_,v=1/this.timeStep;for(y=this.joints;null!==y;y=y.next)y.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],e=o.now(),this.numIslands=0;for(var b=this.rigidBodies;null!==b;b=b.next)if(!(b.addedToIsland||b.isStatic||b.sleeping))if(b.isLonely())b.isDynamic&&b.linearVelocity.addTime(this.gravity,this.timeStep),this.callSleep(b)?(b.sleepTime+=this.timeStep,b.sleepTime>.5?b.sleep():b.updatePosition(this.timeStep)):(b.sleepTime=0,b.updatePosition(this.timeStep)),this.numIslands++;else{var x=0,A=0,w=1;this.islandStack[0]=b,b.addedToIsland=!0;do{if(s=this.islandStack[--w],this.islandStack[w]=null,s.sleeping=!1,this.islandRigidBodies[x++]=s,!s.isStatic){for(var P=s.contactLink;null!==P;P=P.next){var E;if(!(_=(E=P.contact).constraint).addedToIsland&&E.touching)this.islandConstraints[A++]=_,_.addedToIsland=!0,(g=P.body).addedToIsland||(this.islandStack[w++]=g,g.addedToIsland=!0)}for(var T=s.jointLink;null!==T;T=T.next)(_=T.joint).addedToIsland||(this.islandConstraints[A++]=_,_.addedToIsland=!0,!(g=T.body).addedToIsland&&g.isDynamic&&(this.islandStack[w++]=g,g.addedToIsland=!0))}}while(0!=w);for(var S=(new o.Vec3).addTime(this.gravity,this.timeStep),C=x;C--;)(s=this.islandRigidBodies[C]).isDynamic&&s.linearVelocity.addEqual(S);if(this.enableRandomizer)for(C=A;C--;)if(0!==C){var O=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*C|0;_=this.islandConstraints[C],this.islandConstraints[C]=this.islandConstraints[O],this.islandConstraints[O]=_}for(C=A;C--;)this.islandConstraints[C].preSolve(this.timeStep,v);for(var M=this.numIterations;M--;)for(C=A;C--;)this.islandConstraints[C].solve();for(C=A;C--;)this.islandConstraints[C].postSolve(),this.islandConstraints[C]=null;var R=10;for(C=x;C--;)s=this.islandRigidBodies[C],this.callSleep(s)?(s.sleepTime+=this.timeStep,s.sleepTime<R&&(R=s.sleepTime)):(s.sleepTime=0,R=0);if(R>.5)for(C=x;C--;)this.islandRigidBodies[C].sleep(),this.islandRigidBodies[C]=null;else for(C=x;C--;)this.islandRigidBodies[C].updatePosition(this.timeStep),this.islandRigidBodies[C]=null;this.numIslands++}r&&(i=o.now(),this.performance.solvingTime=i-e,i=o.now(),this.performance.upfps(),this.performance.totalTime=i-t)}},o.RigidBody=function(t,e,i,n,r,s,a){this.name=" ",this.MAX_SHAPES=64,this.prev=null,this.next=null,this.type=o.BODY_NULL,this.massInfo=new o.MassInfo,this.position=new o.Vec3(t,e,i),this.orientation=this.rotationAxisToQuad(n||0,r||0,s||0,a||0),this.newPosition=new o.Vec3,this.controlPos=!1,this.newOrientation=new o.Quat,this.newRotation=new o.Vec3,this.currentRotation=new o.Vec3,this.controlRot=!1,this.controlRotInTime=!1,this.linearVelocity=new o.Vec3,this.angularVelocity=new o.Vec3,this.matrix=new o.Mat44,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new o.Vec3,this.sleepOrientation=new o.Quat,this.isStatic=!1,this.isDynamic=!1,this.rotation=new o.Mat33,this.mass=NaN,this.inverseMass=NaN,this.inverseInertia=new o.Mat33,this.localInertia=new o.Mat33,this.inverseLocalInertia=new o.Mat33,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1},o.RigidBody.prototype={constructor:o.RigidBody,addShape:function(t){t.parent&&o.Error("RigidBody","It is not possible that you add to the multi-rigid body the shape of one"),null!=this.shapes&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var i=e.prev,n=e.next;null!=i&&(i.next=n),null!=n&&(n.prev=i),this.shapes==e&&(this.shapes=n),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var i=void 0===e||e;this.type=t||o.BODY_DYNAMIC,this.isDynamic=this.type==o.BODY_DYNAMIC,this.isStatic=this.type==o.BODY_STATIC,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var n=this.localInertia.elements,r=new o.Mat33,s=new o.Vec3,a=this.shapes;null!=a;a=a.next){a.calculateMassInfo(this.massInfo);var l=this.massInfo.mass,c=a.relativePosition.x,u=a.relativePosition.y,h=a.relativePosition.z;s.addScale(a.relativePosition,l),this.mass+=l,this.rotateInertia(a.relativeRotation,this.massInfo.inertia,r),this.localInertia.addEqual(r),n[0]+=l*(u*u+h*h),n[4]+=l*(c*c+h*h),n[8]+=l*(c*c+u*u);var p=l*c*u,d=l*u*h,f=l*h*c;n[1]-=p,n[3]-=p,n[2]-=d,n[6]-=d,n[5]-=f,n[7]-=f}if(this.inverseMass=1/this.mass,s.scaleEqual(this.inverseMass),i){for(this.position.addEqual(s),a=this.shapes;null!=a;a=a.next)a.relativePosition.subEqual(s);c=s.x,u=s.y,h=s.z,n[0]-=this.mass*(u*u+h*h),n[4]-=this.mass*(c*c+h*h),n[8]-=this.mass*(c*c+u*u),p=this.mass*c*u,d=this.mass*u*h,f=this.mass*h*c,n[1]+=p,n[3]+=p,n[2]+=d,n[6]+=d,n[5]+=f,n[7]+=f}this.inverseLocalInertia.invert(this.localInertia),this.type==o.BODY_STATIC&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;null!=t;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;null!=e;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var i=this.shapes;null!=i;i=i.next)i.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;null!=t;t=t.next)t.updateProxy()}},isLonely:function(){return 0==this.numJoints&&0==this.numContacts},updatePosition:function(t){switch(this.type){case o.BODY_STATIC:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case o.BODY_DYNAMIC:this.controlPos&&(this.angularVelocity.set(0,0,0),this.linearVelocity.set(0,0,0),this.linearVelocity.x=(this.newPosition.x-this.position.x)/t,this.linearVelocity.y=(this.newPosition.y-this.position.y)/t,this.linearVelocity.z=(this.newPosition.z-this.position.z)/t,this.controlPos=!1),this.controlRot&&(this.angularVelocity.set(0,0,0),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addTime(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t);break;default:o.Error("RigidBody","Invalid type.")}this.syncShapes()},rotateInertia:function(t,e,i){var n=t.elements,r=e.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],g=r[6],y=r[1],_=r[4],v=r[7],b=r[2],x=r[5],A=r[8],w=o*f+l*m+h*g,P=o*y+l*_+h*v,E=o*b+l*x+h*A,T=s*f+c*m+p*g,S=s*y+c*_+p*v,C=s*b+c*x+p*A,O=a*f+u*m+d*g,M=a*y+u*_+d*v,R=a*b+u*x+d*A,I=i.elements;I[0]=w*o+P*l+E*h,I[1]=w*s+P*c+E*p,I[2]=w*a+P*u+E*d,I[3]=T*o+S*l+C*h,I[4]=T*s+S*c+C*p,I[5]=T*a+S*u+C*d,I[6]=O*o+M*l+R*h,I[7]=O*s+M*c+R*p,I[8]=O*a+M*u+R*d},syncShapes:function(){var t=this.orientation.s,e=this.orientation.x,i=this.orientation.y,n=this.orientation.z,r=2*e,o=2*i,s=2*n,a=e*r,l=i*o,c=n*s,u=e*o,h=i*s,p=e*s,d=t*r,f=t*o,m=t*s,g=this.rotation.elements;g[0]=1-l-c,g[1]=u-m,g[2]=p+f,g[3]=u+m,g[4]=1-a-c,g[5]=h-d,g[6]=p-f,g[7]=h+d,g[8]=1-a-l,this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var y=this.shapes;null!=y;y=y.next)y.position.mul(this.position,y.relativePosition,this.rotation),y.rotation.mul(this.rotation,y.relativeRotation),y.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScale(e,this.inverseMass);var i=new o.Vec3;i.sub(t,this.position).cross(i,e).mulMat(this.inverseInertia,i),this.angularVelocity.addEqual(i)},rotationVectToQuad:function(t){var e=o.EulerToAxis(t.x*o.degtorad,t.y*o.degtorad,t.z*o.degtorad);return this.rotationAxisToQuad(e[0],e[1],e[2],e[3])},rotationAxisToQuad:function(t,e,i,n){var r=e*e+i*i+n*n;r>0&&(e*=r=1/o.sqrt(r),i*=r,n*=r);var s=o.sin(.5*t),a=o.cos(.5*t);return new o.Quat(a,s*e,s*i,s*n)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(o.INV_SCALE),this.controlPos=!0},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0},setRotation:function(t){this.newOrientation=this.rotationVectToQuad(t),this.controlRot=!0},resetPosition:function(t,e,i){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,i).multiplyScalar(o.INV_SCALE),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new o.Quat(t.w,t.x,t.y,t.z),this.awake()},resetRotation:function(t,e,i){this.angularVelocity.set(0,0,0),this.orientation=this.rotationVectToQuad(new o.Vec3(t,e,i)),this.awake()},getPosition:function(){return(new o.Vec3).scale(this.position,o.WORLD_SCALE)},getRotation:function(){return(new o.Euler).setFromRotationMatrix(this.rotation)},getQuaternion:function(){return(new o.Quaternion).setFromRotationMatrix(this.rotation)},getMatrix:function(){var t,e,i=this.matrix.elements;return this.sleeping?i[15]=1:(t=this.rotation.elements,i[0]=t[0],i[1]=t[3],i[2]=t[6],i[3]=0,i[4]=t[1],i[5]=t[4],i[6]=t[7],i[7]=0,i[8]=t[2],i[9]=t[5],i[10]=t[8],i[11]=0,e=this.position,i[12]=e.x*o.WORLD_SCALE,i[13]=e.y*o.WORLD_SCALE,i[14]=e.z*o.WORLD_SCALE,i[15]=0),i}},o.Body=function(t){var e=t||{};e.world&&(void 0===e.type&&(e.type="box"),this.name=e.name||"",this.body=e.world.add(e))},o.Body.prototype={constructor:o.Body,setPosition:function(t){this.body.setPosition(t)},setQuaternion:function(t){this.body.setQuaternion(t)},setRotation:function(t){this.body.setRotation(t)},getPosition:function(){return this.body.getPosition()},getRotation:function(){return this.body.getRotation()},getQuaternion:function(){return this.body.getQuaternion()},getMatrix:function(){return this.body.getMatrix()},getSleep:function(){return this.body.sleeping},resetPosition:function(t,e,i){this.body.resetPosition(t,e,i)},resetRotation:function(t,e,i){this.body.resetRotation(t,e,i)},awake:function(){this.body.awake()},remove:function(){this.body.dispose()},checkContact:function(t){this.body.checkContact(t)}},o.Link=function(t){var e=t||{};e.world&&(void 0===e.type&&(e.type="jointHinge"),this.name=e.name||"",this.joint=e.world.add(e))},o.Link.prototype={constructor:o.Link,getPosition:function(){return this.joint.getPosition()},getMatrix:function(){return this.joint.getMatrix()},remove:function(){this.joint.dispose()},awake:function(){this.joint.awake()}},o.Dictionary=function(){this.data={},this.keys=[]},o.Dictionary.prototype={constructor:o.Dictionary,set:function(t){var e=t.id;this.get[e]||this.keys.push(e),this.data[e]=t},get:function(t){return this.data[t]},del:function(t){var e=this.keys,i=e.indexOf(t.id);i>-1&&(delete this.data[e[i]],e.splice(i,1))},reset:function(){for(var t=this.data,e=this.keys;e.length>0;)delete t[e.pop()]}},o.Performance=function(t){this.parent=t,this.infos=new n(13),this.f=[0,0,0],this.types=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhase=this.types[this.parent.broadPhase.types],this.version=o.REVISION,this.fps=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0},o.Performance.prototype={upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},updatingTime:function(){return o.fix(this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime))},show:function(){return["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconde<br><br>","broad-phase &nbsp;"+o.fix(this.broadPhaseTime)+"<br>","narrow-phase "+o.fix(this.narrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+o.fix(this.solvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+o.fix(this.totalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;&nbsp;"+this.updatingTime()+"<br>"].join("\n")},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updatingTime(),this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}},o.Mat44=function(t,e,i,r,o,s,a,l,c,u,h,p,d,f,m,g){this.elements=new n(16);var y=this.elements;y[0]=void 0!==t?t:1,y[4]=e||0,y[8]=i||0,y[12]=r||0,y[1]=o||0,y[5]=void 0!==s?s:1,y[9]=a||0,y[13]=l||0,y[2]=c||0,y[6]=u||0,y[10]=void 0!==h?h:1,y[14]=p||0,y[3]=d||0,y[7]=f||0,y[11]=m||0,y[15]=void 0!==g?g:1},o.Mat44.prototype={constructor:o.Mat44,set:function(t,e,i,n,r,o,s,a,l,c,u,h,p,d,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}},o.Mat33=function(t,e,i,r,o,s,a,l,c){this.elements=new n(9);this.elements;this.init(void 0!==t?t:1,e||0,i||0,r||0,void 0!==o?o:1,s||0,a||0,l||0,void 0!==c?c:1)},o.Mat33.prototype={constructor:o.Mat33,set:function(t,e,i,n,r,o,s,a,l){var c=this.elements;return c[0]=t,c[1]=e,c[2]=i,c[3]=n,c[4]=r,c[5]=o,c[6]=s,c[7]=a,c[8]=l,this},init:function(t,e,i,n,r,o,s,a,l){var c=this.elements;return c[0]=t,c[1]=e,c[2]=i,c[3]=n,c[4]=r,c[5]=o,c[6]=s,c[7]=a,c[8]=l,this},multiply:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},add:function(t,e){var i=this.elements,n=t.elements,r=e.elements;return i[0]=n[0]+r[0],i[1]=n[1]+r[1],i[2]=n[2]+r[2],i[3]=n[3]+r[3],i[4]=n[4]+r[4],i[5]=n[5]+r[5],i[6]=n[6]+r[6],i[7]=n[7]+r[7],i[8]=n[8]+r[8],this},addEqual:function(t){var e=this.elements,i=t.elements;return e[0]+=i[0],e[1]+=i[1],e[2]+=i[2],e[3]+=i[3],e[4]+=i[4],e[5]+=i[5],e[6]+=i[6],e[7]+=i[7],e[8]+=i[8],this},sub:function(t,e){var i=this.elements,n=t.elements,r=e.elements;return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],i[3]=n[3]-r[3],i[4]=n[4]-r[4],i[5]=n[5]-r[5],i[6]=n[6]-r[6],i[7]=n[7]-r[7],i[8]=n[8]-r[8],this},subEqual:function(t){var e=this.elements,i=t.elements;return e[0]-=i[0],e[1]-=i[1],e[2]-=i[2],e[3]-=i[3],e[4]-=i[4],e[5]-=i[5],e[6]-=i[6],e[7]-=i[7],e[8]-=i[8],this},scale:function(t,e){var i=this.elements,n=t.elements;return i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*e,i[5]=n[5]*e,i[6]=n[6]*e,i[7]=n[7]*e,i[8]=n[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},mul:function(t,e){var i=this.elements,n=t.elements,r=e.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],g=r[6],y=r[1],_=r[4],v=r[7],b=r[2],x=r[5],A=r[8];return i[0]=o*f+l*m+h*g,i[1]=o*y+l*_+h*v,i[2]=o*b+l*x+h*A,i[3]=s*f+c*m+p*g,i[4]=s*y+c*_+p*v,i[5]=s*b+c*x+p*A,i[6]=a*f+u*m+d*g,i[7]=a*y+u*_+d*v,i[8]=a*b+u*x+d*A,this},mulScale:function(t,e,i,n,r){var o=r||!1,s=this.elements,a=t.elements;return o?(s[0]=e*a[0],s[1]=e*a[1],s[2]=e*a[2],s[3]=i*a[3],s[4]=i*a[4],s[5]=i*a[5],s[6]=n*a[6],s[7]=n*a[7],s[8]=n*a[8]):(s[0]=a[0]*e,s[1]=a[1]*i,s[2]=a[2]*n,s[3]=a[3]*e,s[4]=a[4]*i,s[5]=a[5]*n,s[6]=a[6]*e,s[7]=a[7]*i,s[8]=a[8]*n),this},mulRotate:function(t,e,i,n,r,s){var a=s||!1,l=o.sin(e),c=o.cos(e),u=1-c,h=i*i*u+c,p=i*n*u-r*l,d=i*r*u+n*l,f=n*i*u+r*l,m=n*n*u+c,g=n*r*u-i*l,y=r*i*u-n*l,_=r*n*u+i*l,v=r*r*u+c,b=t.elements,x=b[0],A=b[3],w=b[6],P=b[1],E=b[4],T=b[7],S=b[2],C=b[5],O=b[8],M=this.elements;return a?(M[0]=h*x+p*A+d*w,M[1]=h*P+p*E+d*T,M[2]=h*S+p*C+d*O,M[3]=f*x+m*A+g*w,M[4]=f*P+m*E+g*T,M[5]=f*S+m*C+g*O,M[6]=y*x+_*A+v*w,M[7]=y*P+_*E+v*T,M[8]=y*S+_*C+v*O):(M[0]=x*h+P*f+S*y,M[1]=x*p+P*m+S*_,M[2]=x*d+P*g+S*v,M[3]=A*h+E*f+C*y,M[4]=A*p+E*m+C*_,M[5]=A*d+E*g+C*v,M[6]=w*h+T*f+O*y,M[7]=w*p+T*m+O*_,M[8]=w*d+T*g+O*v),this},transpose:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this},setQuat:function(t){var e=this.elements,i=2*t.x,n=2*t.y,r=2*t.z,o=t.x*i,s=t.y*n,a=t.z*r,l=t.x*n,c=t.y*r,u=t.x*r,h=t.s*i,p=t.s*n,d=t.s*r;return e[0]=1-s-a,e[1]=l-d,e[2]=u+p,e[3]=l+d,e[4]=1-o-a,e[5]=c-h,e[6]=u-p,e[7]=c+h,e[8]=1-o-s,this},invert:function(t){var e=this.elements,i=t.elements,n=i[0],r=i[3],o=i[6],s=i[1],a=i[4],l=i[7],c=i[2],u=i[5],h=i[8],p=a*h-l*u,d=l*c-s*h,f=s*u-a*c,m=n*p+r*d+o*f;return 0!=m&&(m=1/m),e[0]=m*p,e[1]=m*d,e[2]=m*f,e[3]=m*(u*o-r*h),e[4]=m*(n*h-c*o),e[5]=m*(c*r-n*u),e[6]=m*(r*l-a*o),e[7]=m*(s*o-n*l),e[8]=m*(n*a-s*r),this},toEuler:function(){var t,e=this.elements,i=e[0],n=e[3],r=e[6],s=(e[1],e[4]),a=e[7],l=(e[2],e[5]),c=e[8],u=new o.Vec3;new o.Quat;return u.y=o.asin((t=r,o.min(o.max(t,-1),1))),o.abs(r)<.99999?(u.x=o.atan2(-a,c),u.z=o.atan2(-n,i)):(u.x=o.atan2(l,s),u.z=0),u},toString:function(){var t=this.elements;return"Mat33|"+t[0].toFixed(4)+", "+t[1].toFixed(4)+", "+t[2].toFixed(4)+"|\n     |"+t[3].toFixed(4)+", "+t[4].toFixed(4)+", "+t[5].toFixed(4)+"|\n     |"+t[6].toFixed(4)+", "+t[7].toFixed(4)+", "+t[8].toFixed(4)+"|"},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},o.Quat=function(t,e,i,n){this.s=void 0!==t?t:1,this.x=e||0,this.y=i||0,this.z=n||0},o.Quat.prototype={constructor:o.Quat,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.s=n,this},init:function(t,e,i,n){return this.s=void 0!==t?t:1,this.x=e||0,this.y=i||0,this.z=n||0,this},add:function(t,e){return this.s=t.s+e.s,this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addTime:function(t,e){var i=t.x,n=t.y,r=t.z,s=this.s,a=this.x,l=this.y,c=this.z,u=(i*s+n*c-r*l)*(e*=.5),h=(-i*c+n*s+r*a)*e,p=(i*l-n*a+r*s)*e;s+=(-i*a-n*l-r*c)*e,a+=u,l+=h,c+=p;var d=1/o.sqrt(s*s+a*a+l*l+c*c);return this.s=s*d,this.x=a*d,this.y=l*d,this.z=c*d,this},sub:function(t,e){return this.s=t.s-e.s,this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},scale:function(t,e){return this.s=t.s*e,this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},mul:function(t,e){var i=t.x,n=t.y,r=t.z,o=t.s,s=e.x,a=e.y,l=e.z,c=e.s;return this.x=i*c+o*s+n*l-r*a,this.y=n*c+o*a+r*s-i*l,this.z=r*c+o*l+i*a-n*s,this.s=o*c-i*s-n*a-r*l,this},arc:function(t,e){var i=t.x,n=t.y,r=t.z,s=e.x,a=e.y,l=e.z,c=i*s+n*a+r*l;if(-1==c)return s=n*i-r*r,a=-r*n-i*i,l=i*r+n*n,c=1/o.sqrt(s*s+a*a+l*l),this.s=0,this.x=s*c,this.y=a*c,this.z=l*c,this;var u=n*l-r*a,h=r*s-i*l,p=i*a-n*s;return this.s=o.sqrt(.5*(1+c)),c=.5/this.s,this.x=u*c,this.y=h*c,this.z=p*c,this},normalize:function(t){var e=o.sqrt(t.s*t.s+t.x*t.x+t.y*t.y+t.z*t.z);return e>0&&(e=1/e),this.s=t.s*e,this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},invert:function(t){return this.s=t.s,this.x=-t.x,this.y=-t.y,this.z=-t.z,this},length:function(){return o.sqrt(this.s*this.s+this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.s=t.s,this.x=t.x,this.y=t.y,this.z=t.z,this},testDiff:function(t){return this.s!==t.s||this.x!==t.x||this.y!==t.y||this.z!==t.z},clone:function(t){return new o.Quat(this.s,this.x,this.y,this.z)},toString:function(){return"Quat["+this.s.toFixed(4)+", ("+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+")]"}},o.Quaternion=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1},o.Quaternion.prototype={constructor:o.Quaternion,setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[1],s=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],p=i[8],d=n+l+p;return d>0?(e=.5/o.sqrt(d+1),this.w=.25/e,this.x=(h-c)*e,this.y=(s-u)*e,this.z=(a-r)*e):n>l&&n>p?(e=2*o.sqrt(1+n-l-p),this.w=(h-c)/e,this.x=.25*e,this.y=(r+a)/e,this.z=(s+u)/e):l>p?(e=2*o.sqrt(1+l-n-p),this.w=(s-u)/e,this.x=(r+a)/e,this.y=.25*e,this.z=(c+h)/e):(e=2*o.sqrt(1+p-n-l),this.w=(a-r)/e,this.x=(s+u)/e,this.y=(c+h)/e,this.z=.25*e),this}},o.Vec3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},o.Vec3.prototype={constructor:o.Vec3,init:function(t,e,i){return this.x=t||0,this.y=e||0,this.z=i||0,this},set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addTime:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},cross:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this},mul:function(t,e,i){var n=i.elements;return this.x=t.x+e.x*n[0]+e.y*n[1]+e.z*n[2],this.y=t.y+e.x*n[3]+e.y*n[4]+e.z*n[5],this.z=t.z+e.x*n[6]+e.y*n[7]+e.z*n[8],this},mulMat:function(t,e){var i=t.elements;return this.x=i[0]*e.x+i[1]*e.y+i[2]*e.z,this.y=i[3]*e.x+i[4]*e.y+i[5]*e.z,this.z=i[6]*e.x+i[7]*e.y+i[8]*e.z,this},normalize:function(t){var e=t.x,i=t.y,n=t.z,r=e*e+i*i+n*n;return r>0&&(r=1/o.sqrt(r),this.x=e*r,this.y=i*r,this.z=n*r),this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return o.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.s,l=a*e+o*n-s*i,c=a*i+s*e-r*n,u=a*n+r*i-o*e,h=-r*e-o*i-s*n;return this.x=l*a+h*-r+c*-s-u*-o,this.y=c*a+h*-o+u*-r-l*-s,this.z=u*a+h*-s+l*-o-c*-r,this},testZero:function(){return 0!==this.x||0!==this.y||0!==this.z},testDiff:function(t){return t.x!==this.x||t.y!==this.y||t.z!==this.z},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},norm:function(){return this.divideScalar(this.length())}},o.Euler=function(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||o.Euler.DefaultOrder},o.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.Euler.DefaultOrder="XYZ",o.clamp=function(t,e,i){return t<e?e:t>i?i:t},o.Euler.prototype={constructor:o.Euler,_x:0,_y:0,_z:0,_order:o.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e){var i=o.clamp,n=t.elements,r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=n[6],p=n[7],d=n[8];return"XYZ"===(e=e||this._order)?(this._y=o.asin(i(a,-1,1)),o.abs(a)<.99999?(this._x=o.atan2(-u,d),this._z=o.atan2(-s,r)):(this._x=o.atan2(p,c),this._z=0)):"YXZ"===e?(this._x=o.asin(-i(u,-1,1)),o.abs(u)<.99999?(this._y=o.atan2(a,d),this._z=o.atan2(l,c)):(this._y=o.atan2(-h,r),this._z=0)):"ZXY"===e?(this._x=o.asin(i(p,-1,1)),o.abs(p)<.99999?(this._y=o.atan2(-h,d),this._z=o.atan2(-s,c)):(this._y=0,this._z=o.atan2(l,r))):"ZYX"===e?(this._y=o.asin(-i(h,-1,1)),o.abs(h)<.99999?(this._x=o.atan2(p,d),this._z=o.atan2(l,r)):(this._x=0,this._z=o.atan2(-s,c))):"YZX"===e?(this._z=o.asin(i(l,-1,1)),o.abs(l)<.99999?(this._x=o.atan2(-u,c),this._y=o.atan2(-h,r)):(this._x=0,this._y=o.atan2(a,d))):"XZY"===e?(this._z=o.asin(-i(s,-1,1)),o.abs(s)<.99999?(this._x=o.atan2(p,c),this._y=o.atan2(a,r)):(this._x=o.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,this.onChangeCallback(),this},setFromQuaternion:function(t,e,i){var n=o.clamp,r=t.x*t.x,s=t.y*t.y,a=t.z*t.z,l=t.s*t.s;return"XYZ"===(e=e||this._order)?(this._x=o.atan2(2*(t.x*t.s-t.y*t.z),l-r-s+a),this._y=o.asin(n(2*(t.x*t.z+t.y*t.s),-1,1)),this._z=o.atan2(2*(t.z*t.s-t.x*t.y),l+r-s-a)):"YXZ"===e?(this._x=o.asin(n(2*(t.x*t.s-t.y*t.z),-1,1)),this._y=o.atan2(2*(t.x*t.z+t.y*t.s),l-r-s+a),this._z=o.atan2(2*(t.x*t.y+t.z*t.s),l-r+s-a)):"ZXY"===e?(this._x=o.asin(n(2*(t.x*t.s+t.y*t.z),-1,1)),this._y=o.atan2(2*(t.y*t.s-t.z*t.x),l-r-s+a),this._z=o.atan2(2*(t.z*t.s-t.x*t.y),l-r+s-a)):"ZYX"===e?(this._x=o.atan2(2*(t.x*t.s+t.z*t.y),l-r-s+a),this._y=o.asin(n(2*(t.y*t.s-t.x*t.z),-1,1)),this._z=o.atan2(2*(t.x*t.y+t.z*t.s),l+r-s-a)):"YZX"===e?(this._x=o.atan2(2*(t.x*t.s-t.z*t.y),l-r+s-a),this._y=o.atan2(2*(t.y*t.s-t.x*t.z),l+r-s-a),this._z=o.asin(n(2*(t.x*t.y+t.z*t.s),-1,1))):"XZY"===e?(this._x=o.atan2(2*(t.x*t.s+t.y*t.z),l-r+s-a),this._y=o.atan2(2*(t.x*t.z+t.y*t.s),l+r-s-a),this._z=o.asin(n(2*(t.z*t.s-t.x*t.y),-1,1))):console.warn("OIMO.Euler: .setFromQuaternion() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},reorder:(r=new o.Quat,function(t){r.setFromEuler(this),this.setFromQuaternion(r,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new o.Euler(this._x,this._y,this._z,this._order)}},o.EulerToAxis=function(t,e,i){var n=o.cos(.5*e),r=o.sin(.5*e),s=o.cos(.5*i),a=o.sin(.5*i),l=o.cos(.5*t),c=o.sin(.5*t),u=n*s,h=r*a,p=u*l-h*c,d=u*c+h*l,f=r*s*l+n*a*c,m=n*a*l-r*s*c,g=2*o.acos(p),y=d*d+f*f+m*m;return y<.001?(d=1,f=m=0):(d/=y=o.sqrt(y),f/=y,m/=y),[g,d,f,m]},o.EulerToMatrix=function(t,e,i){var n=o.cos(e),r=o.sin(e),s=o.cos(i),a=o.sin(i),l=o.cos(t),c=o.sin(t),u=new o.Mat33,h=u.elements;return h[0]=n*s,h[1]=r*c-n*a*l,h[2]=n*a*c+r*l,h[3]=a,h[4]=s*l,h[5]=-s*c,h[6]=-r*s,h[7]=r*a*l+n*c,h[8]=-r*a*c+n*l,u},o.MatrixToEuler=function(t){var e,i,n,r=t.elements;return r[3]>.998?(i=o.atan2(r[2],r[8]),n=o.PI/2,e=0):r[3]<-.998?(i=o.atan2(r[2],r[8]),n=-o.PI/2,e=0):(i=o.atan2(-r[6],r[0]),e=o.atan2(-r[5],r[4]),n=o.asin(r[3])),[e,i,n]},o.unwrapDegrees=function(t){return(t%=360)>180&&(t-=360),t<-180&&(t+=360),t},o.unwrapRadian=function(t){return(t%=o.TwoPI)>o.PI&&(t-=o.TwoPI),t<-o.PI&&(t+=o.TwoPI),t},o.Distance3d=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return o.sqrt(i*i+n*n+r*r)},o.Constraint=function(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1},o.Constraint.prototype={constructor:o.Constraint,preSolve:function(t,e){o.Error("Constraint","Inheritance error.")},solve:function(){o.Error("Constraint","Inheritance error.")},postSolve:function(){o.Error("Constraint","Inheritance error.")}},o.Joint=function(t){o.Constraint.call(this),this.name="",this.type=o.JOINT_NULL,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=(new o.Vec3).copy(t.localAnchorPoint1),this.localAnchorPoint2=(new o.Vec3).copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new o.Vec3,this.relativeAnchorPoint2=new o.Vec3,this.anchorPoint1=new o.Vec3,this.anchorPoint2=new o.Vec3,this.allowCollision=t.allowCollision,this.b1Link=new o.JointLink(this),this.b2Link=new o.JointLink(this),this.matrix=new o.Mat44},o.Joint.prototype=Object.create(o.Constraint.prototype),o.Joint.prototype.constructor=o.Joint,o.Joint.prototype.updateAnchorPoints=function(){this.relativeAnchorPoint1.mulMat(this.body1.rotation,this.localAnchorPoint1),this.relativeAnchorPoint2.mulMat(this.body2.rotation,this.localAnchorPoint2),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},o.Joint.prototype.attach=function(){this.b1Link.body=this.body2,this.b2Link.body=this.body1,null!=this.body1.jointLink?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,null!=this.body2.jointLink?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++},o.Joint.prototype.detach=function(){var t=this.b1Link.prev,e=this.b1Link.next;null!=t&&(t.next=e),null!=e&&(e.prev=t),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,t=this.b2Link.prev,e=this.b2Link.next,null!=t&&(t.next=e),null!=e&&(e.prev=t),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--,this.b1Link.body=null,this.b2Link.body=null},o.Joint.prototype.awake=function(){this.body1.awake(),this.body2.awake()},o.Joint.prototype.preSolve=function(t,e){},o.Joint.prototype.solve=function(){},o.Joint.prototype.postSolve=function(){},o.Joint.prototype.remove=function(){this.dispose()},o.Joint.prototype.dispose=function(){this.parent.removeJoint(this)},o.Joint.prototype.getPosition=function(){return[(new o.Vec3).scale(this.anchorPoint1,o.WORLD_SCALE),(new o.Vec3).scale(this.anchorPoint2,o.WORLD_SCALE)]},o.Joint.prototype.getMatrix=function(){var t=this.matrix.elements,e=this.anchorPoint1,i=this.anchorPoint2;return t[0]=e.x*o.WORLD_SCALE,t[1]=e.y*o.WORLD_SCALE,t[2]=e.z*o.WORLD_SCALE,t[3]=0,t[4]=i.x*o.WORLD_SCALE,t[5]=i.y*o.WORLD_SCALE,t[6]=i.z*o.WORLD_SCALE,t[7]=0,t},o.JointConfig=function(){this.body1=null,this.body2=null,this.localAnchorPoint1=new o.Vec3,this.localAnchorPoint2=new o.Vec3,this.localAxis1=new o.Vec3,this.localAxis2=new o.Vec3,this.allowCollision=!1},o.JointLink=function(t){this.prev=null,this.next=null,this.body=null,this.joint=t},o.LimitMotor=function(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0},o.LimitMotor.prototype={constructor:o.LimitMotor,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}},o.BallAndSocketJoint=function(t){o.Joint.call(this,t),this.type=o.JOINT_BALL_AND_SOCKET,this.lc=new o.LinearConstraint(this)},o.BallAndSocketJoint.prototype=Object.create(o.Joint.prototype),o.BallAndSocketJoint.prototype.constructor=o.BallAndSocketJoint,o.BallAndSocketJoint.prototype.preSolve=function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},o.BallAndSocketJoint.prototype.solve=function(){this.lc.solve()},o.BallAndSocketJoint.prototype.postSolve=function(){},o.DistanceJoint=function(t,e,i){o.Joint.call(this,t),this.type=o.JOINT_DISTANCE,this.normal=new o.Vec3,this.nr=new o.Vec3,this.limitMotor=new o.LimitMotor(this.normal,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.t=new o.TranslationalConstraint(this,this.limitMotor)},o.DistanceJoint.prototype=Object.create(o.Joint.prototype),o.DistanceJoint.prototype.constructor=o.DistanceJoint,o.DistanceJoint.prototype.preSolve=function(t,e){this.updateAnchorPoints(),this.nr.sub(this.anchorPoint2,this.anchorPoint1),this.normal.normalize(this.nr),this.t.preSolve(t,e)},o.DistanceJoint.prototype.solve=function(){this.t.solve()},o.DistanceJoint.prototype.postSolve=function(){},o.HingeJoint=function(t,e,i){o.Joint.call(this,t),this.type=o.JOINT_HINGE,this.localAxis1=t.localAxis1.clone().norm(),this.localAxis2=t.localAxis2.clone().norm(),this.localAngle1=new o.Vec3(this.localAxis1.y*this.localAxis1.x-this.localAxis1.z*this.localAxis1.z,-this.localAxis1.z*this.localAxis1.y-this.localAxis1.x*this.localAxis1.x,this.localAxis1.x*this.localAxis1.z+this.localAxis1.y*this.localAxis1.y).norm();var n=(new o.Mat33).setQuat((new o.Quat).arc(this.localAxis1,this.localAxis2));this.localAngle2=(new o.Vec3).mulMat(n,this.localAngle1),this.nor=new o.Vec3,this.tan=new o.Vec3,this.bin=new o.Vec3,this.ax1=new o.Vec3,this.ax2=new o.Vec3,this.an1=new o.Vec3,this.an2=new o.Vec3,this.limitMotor=new o.LimitMotor(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.lc=new o.LinearConstraint(this),this.r3=new o.Rotational3Constraint(this,this.limitMotor,new o.LimitMotor(this.tan,!0),new o.LimitMotor(this.bin,!0))},o.HingeJoint.prototype=Object.create(o.Joint.prototype),o.HingeJoint.prototype.constructor=o.HingeJoint,o.HingeJoint.prototype.preSolve=function(t,e){var i,n,r,o;this.updateAnchorPoints(),this.ax1.mulMat(this.body1.rotation,this.localAxis1),this.ax2.mulMat(this.body2.rotation,this.localAxis2),this.an1.mulMat(this.body1.rotation,this.localAngle1),this.an2.mulMat(this.body2.rotation,this.localAngle2),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).norm(),this.tan.set(this.nor.y*this.nor.x-this.nor.z*this.nor.z,-this.nor.z*this.nor.y-this.nor.x*this.nor.x,this.nor.x*this.nor.z+this.nor.y*this.nor.y).norm(),this.bin.set(this.nor.y*this.tan.z-this.nor.z*this.tan.y,this.nor.z*this.tan.x-this.nor.x*this.tan.z,this.nor.x*this.tan.y-this.nor.y*this.tan.x),o=this.acosClamp(this.an1.x*this.an2.x+this.an1.y*this.an2.y+this.an1.z*this.an2.z),this.nor.x*(this.an1.y*this.an2.z-this.an1.z*this.an2.y)+this.nor.y*(this.an1.z*this.an2.x-this.an1.x*this.an2.z)+this.nor.z*(this.an1.x*this.an2.y-this.an1.y*this.an2.x)<0?this.limitMotor.angle=-o:this.limitMotor.angle=o,i=this.ax1.y*this.ax2.z-this.ax1.z*this.ax2.y,n=this.ax1.z*this.ax2.x-this.ax1.x*this.ax2.z,r=this.ax1.x*this.ax2.y-this.ax1.y*this.ax2.x,this.r3.limitMotor2.angle=this.tan.x*i+this.tan.y*n+this.tan.z*r,this.r3.limitMotor3.angle=this.bin.x*i+this.bin.y*n+this.bin.z*r,this.r3.preSolve(t,e),this.lc.preSolve(t,e)},o.HingeJoint.prototype.solve=function(){this.r3.solve(),this.lc.solve()},o.HingeJoint.prototype.postSolve=function(){},o.HingeJoint.prototype.acosClamp=function(t){return t>1?0:t<-1?o.PI:o.acos(t)},o.PrismaticJoint=function(t,e,i){o.Joint.call(this,t),this.type=o.JOINT_PRISMATIC,this.localAxis1=(new o.Vec3).normalize(t.localAxis1),this.localAxis2=(new o.Vec3).normalize(t.localAxis2),this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z,this.nor=new o.Vec3,this.tan=new o.Vec3,this.bin=new o.Vec3,this.ac=new o.AngularConstraint(this,(new o.Quat).arc(this.localAxis1,this.localAxis2)),this.limitMotor=new o.LimitMotor(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=i,this.t3=new o.Translational3Constraint(this,this.limitMotor,new o.LimitMotor(this.tan,!0),new o.LimitMotor(this.bin,!0))},o.PrismaticJoint.prototype=Object.create(o.Joint.prototype),o.PrismaticJoint.prototype.constructor=o.PrismaticJoint,o.PrismaticJoint.prototype.preSolve=function(t,e){var i,n;this.updateAnchorPoints(),i=this.body1.rotation.elements;var r=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],s=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],a=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8];i=this.body2.rotation.elements;var l=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],c=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],u=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],h=r*this.body2.inverseMass+l*this.body1.inverseMass,p=s*this.body2.inverseMass+c*this.body1.inverseMass,d=a*this.body2.inverseMass+u*this.body1.inverseMass;(n=o.sqrt(h*h+p*p+d*d))>0&&(n=1/n);var f=(p*=n)*(h*=n)-(d*=n)*d,m=-d*p-h*h,g=h*d+p*p,y=p*(g*=n=1/o.sqrt(f*f+m*m+g*g))-d*(m*=n),_=d*(f*=n)-h*g,v=h*m-p*f;this.nor.init(h,p,d),this.tan.init(f,m,g),this.bin.init(y,_,v),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},o.PrismaticJoint.prototype.solve=function(){this.ac.solve(),this.t3.solve()},o.PrismaticJoint.prototype.postSolve=function(){},o.SliderJoint=function(t,e,i){var n;o.Joint.call(this,t),this.type=o.JOINT_SLIDER,this.localAxis1=(new o.Vec3).normalize(t.localAxis1),this.localAxis2=(new o.Vec3).normalize(t.localAxis2),this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,n=1/o.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=n,this.localAngAxis1Y*=n,this.localAngAxis1Z*=n,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var r=(new o.Mat33).setQuat((new o.Quat).arc(this.localAxis1,this.localAxis2)).elements;this.localAngAxis2X=this.localAngAxis1X*r[0]+this.localAngAxis1Y*r[1]+this.localAngAxis1Z*r[2],this.localAngAxis2Y=this.localAngAxis1X*r[3]+this.localAngAxis1Y*r[4]+this.localAngAxis1Z*r[5],this.localAngAxis2Z=this.localAngAxis1X*r[6]+this.localAngAxis1Y*r[7]+this.localAngAxis1Z*r[8],this.nor=new o.Vec3,this.tan=new o.Vec3,this.bin=new o.Vec3,this.rotationalLimitMotor=new o.LimitMotor(this.nor,!1),this.r3=new o.Rotational3Constraint(this,this.rotationalLimitMotor,new o.LimitMotor(this.tan,!0),new o.LimitMotor(this.bin,!0)),this.translationalLimitMotor=new o.LimitMotor(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=i,this.t3=new o.Translational3Constraint(this,this.translationalLimitMotor,new o.LimitMotor(this.tan,!0),new o.LimitMotor(this.bin,!0))},o.SliderJoint.prototype=Object.create(o.Joint.prototype),o.SliderJoint.prototype.constructor=o.SliderJoint,o.SliderJoint.prototype.preSolve=function(t,e){var i,n,r,s;this.updateAnchorPoints(),i=this.body1.rotation.elements;var a=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],l=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],c=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8],u=this.localAngAxis1X*i[0]+this.localAngAxis1Y*i[1]+this.localAngAxis1Z*i[2],h=this.localAngAxis1X*i[3]+this.localAngAxis1Y*i[4]+this.localAngAxis1Z*i[5],p=this.localAngAxis1X*i[6]+this.localAngAxis1Y*i[7]+this.localAngAxis1Z*i[8];i=this.body2.rotation.elements;var d=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],f=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],m=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],g=this.localAngAxis2X*i[0]+this.localAngAxis2Y*i[1]+this.localAngAxis2Z*i[2],y=this.localAngAxis2X*i[3]+this.localAngAxis2Y*i[4]+this.localAngAxis2Z*i[5],_=this.localAngAxis2X*i[6]+this.localAngAxis2Y*i[7]+this.localAngAxis2Z*i[8],v=a*this.body2.inverseMass+d*this.body1.inverseMass,b=l*this.body2.inverseMass+f*this.body1.inverseMass,x=c*this.body2.inverseMass+m*this.body1.inverseMass;(n=o.sqrt(v*v+b*b+x*x))>0&&(n=1/n);var A=(b*=n)*(v*=n)-(x*=n)*x,w=-x*b-v*v,P=v*x+b*b,E=b*(P*=n=1/o.sqrt(A*A+w*w+P*P))-x*(w*=n),T=x*(A*=n)-v*P,S=v*w-b*A;this.nor.init(v,b,x),this.tan.init(A,w,P),this.bin.init(E,T,S),this.rotationalLimitMotor.angle=v*(h*_-p*y)+b*(p*g-u*_)+x*(u*y-h*g)<0?-this.acosClamp(u*g+h*y+p*_):this.acosClamp(u*g+h*y+p*_),n=l*m-c*f,r=c*d-a*m,s=a*f-l*d,this.r3.limitMotor2.angle=A*n+w*r+P*s,this.r3.limitMotor3.angle=E*n+T*r+S*s,this.r3.preSolve(t,e),this.t3.preSolve(t,e)},o.SliderJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},o.SliderJoint.prototype.postSolve=function(){},o.SliderJoint.prototype.acosClamp=function(t){return t>1?0:t<-1?o.PI:o.acos(t)},o.WheelJoint=function(t){var e;o.Joint.call(this,t),this.type=o.JOINT_WHEEL,this.localAxis1=(new o.Vec3).normalize(t.localAxis1),this.localAxis2=(new o.Vec3).normalize(t.localAxis2),this.localAxis1X=this.localAxis1.x,this.localAxis1Y=this.localAxis1.y,this.localAxis1Z=this.localAxis1.z,this.localAxis2X=this.localAxis2.x,this.localAxis2Y=this.localAxis2.y,this.localAxis2Z=this.localAxis2.z;var i=this.localAxis1X*this.localAxis2X+this.localAxis1Y*this.localAxis2Y+this.localAxis1Z*this.localAxis2Z;if(i>-1&&i<1)this.localAngAxis1X=this.localAxis2X-i*this.localAxis1X,this.localAngAxis1Y=this.localAxis2Y-i*this.localAxis1Y,this.localAngAxis1Z=this.localAxis2Z-i*this.localAxis1Z,this.localAngAxis2X=this.localAxis1X-i*this.localAxis2X,this.localAngAxis2Y=this.localAxis1Y-i*this.localAxis2Y,this.localAngAxis2Z=this.localAxis1Z-i*this.localAxis2Z,e=1/o.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=e,this.localAngAxis1Y*=e,this.localAngAxis1Z*=e,e=1/o.sqrt(this.localAngAxis2X*this.localAngAxis2X+this.localAngAxis2Y*this.localAngAxis2Y+this.localAngAxis2Z*this.localAngAxis2Z),this.localAngAxis2X*=e,this.localAngAxis2Y*=e,this.localAngAxis2Z*=e;else{this.localAngAxis1X=this.localAxis1Y*this.localAxis1X-this.localAxis1Z*this.localAxis1Z,this.localAngAxis1Y=-this.localAxis1Z*this.localAxis1Y-this.localAxis1X*this.localAxis1X,this.localAngAxis1Z=this.localAxis1X*this.localAxis1Z+this.localAxis1Y*this.localAxis1Y,e=1/o.sqrt(this.localAngAxis1X*this.localAngAxis1X+this.localAngAxis1Y*this.localAngAxis1Y+this.localAngAxis1Z*this.localAngAxis1Z),this.localAngAxis1X*=e,this.localAngAxis1Y*=e,this.localAngAxis1Z*=e;var n=(new o.Mat33).setQuat((new o.Quat).arc(this.localAxis1,this.localAxis2)).elements;this.localAngAxis2X=this.localAngAxis1X*n[0]+this.localAngAxis1Y*n[1]+this.localAngAxis1Z*n[2],this.localAngAxis2Y=this.localAngAxis1X*n[3]+this.localAngAxis1Y*n[4]+this.localAngAxis1Z*n[5],this.localAngAxis2Z=this.localAngAxis1X*n[6]+this.localAngAxis1Y*n[7]+this.localAngAxis1Z*n[8]}this.nor=new o.Vec3,this.tan=new o.Vec3,this.bin=new o.Vec3,this.translationalLimitMotor=new o.LimitMotor(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new o.LimitMotor(this.tan,!1),this.rotationalLimitMotor2=new o.LimitMotor(this.bin,!1),this.t3=new o.Translational3Constraint(this,new o.LimitMotor(this.nor,!0),this.translationalLimitMotor,new o.LimitMotor(this.bin,!0)),this.t3.weight=1,this.r3=new o.Rotational3Constraint(this,new o.LimitMotor(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)},o.WheelJoint.prototype=Object.create(o.Joint.prototype),o.WheelJoint.prototype.constructor=o.WheelJoint,o.WheelJoint.prototype.preSolve=function(t,e){var i,n;this.updateAnchorPoints(),i=this.body1.rotation.elements;var r=this.localAxis1X*i[0]+this.localAxis1Y*i[1]+this.localAxis1Z*i[2],s=this.localAxis1X*i[3]+this.localAxis1Y*i[4]+this.localAxis1Z*i[5],a=this.localAxis1X*i[6]+this.localAxis1Y*i[7]+this.localAxis1Z*i[8],l=this.localAngAxis1X*i[0]+this.localAngAxis1Y*i[1]+this.localAngAxis1Z*i[2],c=this.localAngAxis1X*i[3]+this.localAngAxis1Y*i[4]+this.localAngAxis1Z*i[5],u=this.localAngAxis1X*i[6]+this.localAngAxis1Y*i[7]+this.localAngAxis1Z*i[8];i=this.body2.rotation.elements;var h=this.localAxis2X*i[0]+this.localAxis2Y*i[1]+this.localAxis2Z*i[2],p=this.localAxis2X*i[3]+this.localAxis2Y*i[4]+this.localAxis2Z*i[5],d=this.localAxis2X*i[6]+this.localAxis2Y*i[7]+this.localAxis2Z*i[8],f=this.localAngAxis2X*i[0]+this.localAngAxis2Y*i[1]+this.localAngAxis2Z*i[2],m=this.localAngAxis2X*i[3]+this.localAngAxis2Y*i[4]+this.localAngAxis2Z*i[5],g=this.localAngAxis2X*i[6]+this.localAngAxis2Y*i[7]+this.localAngAxis2Z*i[8];this.r3.limitMotor1.angle=r*h+s*p+a*d,this.rotationalLimitMotor1.angle=r*(c*d-u*p)+s*(u*h-l*d)+a*(l*p-c*h)<0?-this.acosClamp(l*h+c*p+u*d):this.acosClamp(l*h+c*p+u*d),this.rotationalLimitMotor2.angle=h*(m*a-g*s)+p*(g*r-f*a)+d*(f*s-m*r)<0?this.acosClamp(f*r+m*s+g*a):-this.acosClamp(f*r+m*s+g*a);var y=p*a-d*s,_=d*r-h*a,v=h*s-p*r;(n=o.sqrt(y*y+_*_+v*v))>0&&(n=1/n);var b=(_*=n)*d-(v*=n)*p,x=v*h-(y*=n)*d,A=y*p-_*h;(n=o.sqrt(b*b+x*x+A*A))>0&&(n=1/n),b*=n,x*=n,A*=n;var w=s*v-a*_,P=a*y-r*v,E=r*_-s*y;(n=o.sqrt(w*w+P*P+E*E))>0&&(n=1/n),w*=n,P*=n,E*=n,this.nor.init(y,_,v),this.tan.init(b,x,A),this.bin.init(w,P,E),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},o.WheelJoint.prototype.solve=function(){this.r3.solve(),this.t3.solve()},o.WheelJoint.prototype.postSolve=function(){},o.WheelJoint.prototype.acosClamp=function(t){return t>1?0:t<-1?o.PI:o.acos(t)},o.AngularConstraint=function(t,e){this.joint=t,this.targetOrientation=(new o.Quat).invert(e),this.relativeOrientation=new o.Quat,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new o.Vec3,this.imp=new o.Vec3,this.rn0=new o.Vec3,this.rn1=new o.Vec3,this.rn2=new o.Vec3,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia},o.AngularConstraint.prototype={constructor:o.AngularConstraint,preSolve:function(t,e){var i,n,r;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),i=1/((r=(new o.Mat33).add(this.ii1,this.ii2).elements)[0]*(r[4]*r[8]-r[7]*r[5])+r[3]*(r[7]*r[2]-r[1]*r[8])+r[6]*(r[1]*r[5]-r[4]*r[2])),this.dd=new o.Mat33(r[4]*r[8]-r[5]*r[7],r[2]*r[7]-r[1]*r[8],r[1]*r[5]-r[2]*r[4],r[5]*r[6]-r[3]*r[8],r[0]*r[8]-r[2]*r[6],r[2]*r[3]-r[0]*r[5],r[3]*r[7]-r[4]*r[6],r[1]*r[6]-r[0]*r[7],r[0]*r[4]-r[1]*r[3]).multiply(i),this.relativeOrientation.invert(this.b1.orientation),this.relativeOrientation.mul(this.targetOrientation,this.relativeOrientation),this.relativeOrientation.mul(this.b2.orientation,this.relativeOrientation),i=2*this.relativeOrientation.s,this.vel.scale(this.relativeOrientation,i),(n=this.vel.length())>.02?(n=(.02-n)/n*e*.05,this.vel.scaleEqual(n)):this.vel.init(),this.rn1.mulMat(this.ii1,this.imp),this.rn2.mulMat(this.ii2,this.imp),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)},solve:function(){var t=this.a2.clone().subEqual(this.a1).subEqual(this.vel);this.rn0.mulMat(this.dd,t),this.rn1.mulMat(this.ii1,this.rn0),this.rn2.mulMat(this.ii2,this.rn0),this.imp.addEqual(this.rn0),this.a1.addEqual(this.rn1),this.a2.subEqual(this.rn2)}},o.LinearConstraint=function(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0},o.LinearConstraint.prototype={constructor:o.LinearConstraint,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var i=this.ii1.elements,n=this.ii2.elements;this.ax1x=this.r1z*i[1]+-this.r1y*i[2],this.ax1y=this.r1z*i[4]+-this.r1y*i[5],this.ax1z=this.r1z*i[7]+-this.r1y*i[8],this.ay1x=-this.r1z*i[0]+this.r1x*i[2],this.ay1y=-this.r1z*i[3]+this.r1x*i[5],this.ay1z=-this.r1z*i[6]+this.r1x*i[8],this.az1x=this.r1y*i[0]+-this.r1x*i[1],this.az1y=this.r1y*i[3]+-this.r1x*i[4],this.az1z=this.r1y*i[6]+-this.r1x*i[7],this.ax2x=this.r2z*n[1]+-this.r2y*n[2],this.ax2y=this.r2z*n[4]+-this.r2y*n[5],this.ax2z=this.r2z*n[7]+-this.r2y*n[8],this.ay2x=-this.r2z*n[0]+this.r2x*n[2],this.ay2y=-this.r2z*n[3]+this.r2x*n[5],this.ay2z=-this.r2z*n[6]+this.r2x*n[8],this.az2x=this.r2y*n[0]+-this.r2x*n[1],this.az2y=this.r2y*n[3]+-this.r2x*n[4],this.az2z=this.r2y*n[6]+-this.r2x*n[7];var r=this.m1+this.m2,s=new o.Mat33(r,0,0,0,r,0,0,0,r).elements;s[0]+=i[4]*this.r1z*this.r1z-(i[7]+i[5])*this.r1y*this.r1z+i[8]*this.r1y*this.r1y,s[1]+=(i[6]*this.r1y+i[5]*this.r1x)*this.r1z-i[3]*this.r1z*this.r1z-i[8]*this.r1x*this.r1y,s[2]+=(i[3]*this.r1y-i[4]*this.r1x)*this.r1z-i[6]*this.r1y*this.r1y+i[7]*this.r1x*this.r1y,s[3]+=(i[2]*this.r1y+i[7]*this.r1x)*this.r1z-i[1]*this.r1z*this.r1z-i[8]*this.r1x*this.r1y,s[4]+=i[0]*this.r1z*this.r1z-(i[6]+i[2])*this.r1x*this.r1z+i[8]*this.r1x*this.r1x,s[5]+=(i[1]*this.r1x-i[0]*this.r1y)*this.r1z-i[7]*this.r1x*this.r1x+i[6]*this.r1x*this.r1y,s[6]+=(i[1]*this.r1y-i[4]*this.r1x)*this.r1z-i[2]*this.r1y*this.r1y+i[5]*this.r1x*this.r1y,s[7]+=(i[3]*this.r1x-i[0]*this.r1y)*this.r1z-i[5]*this.r1x*this.r1x+i[2]*this.r1x*this.r1y,s[8]+=i[0]*this.r1y*this.r1y-(i[3]+i[1])*this.r1x*this.r1y+i[4]*this.r1x*this.r1x,s[0]+=n[4]*this.r2z*this.r2z-(n[7]+n[5])*this.r2y*this.r2z+n[8]*this.r2y*this.r2y,s[1]+=(n[6]*this.r2y+n[5]*this.r2x)*this.r2z-n[3]*this.r2z*this.r2z-n[8]*this.r2x*this.r2y,s[2]+=(n[3]*this.r2y-n[4]*this.r2x)*this.r2z-n[6]*this.r2y*this.r2y+n[7]*this.r2x*this.r2y,s[3]+=(n[2]*this.r2y+n[7]*this.r2x)*this.r2z-n[1]*this.r2z*this.r2z-n[8]*this.r2x*this.r2y,s[4]+=n[0]*this.r2z*this.r2z-(n[6]+n[2])*this.r2x*this.r2z+n[8]*this.r2x*this.r2x,s[5]+=(n[1]*this.r2x-n[0]*this.r2y)*this.r2z-n[7]*this.r2x*this.r2x+n[6]*this.r2x*this.r2y,s[6]+=(n[1]*this.r2y-n[4]*this.r2x)*this.r2z-n[2]*this.r2y*this.r2y+n[5]*this.r2x*this.r2y,s[7]+=(n[3]*this.r2x-n[0]*this.r2y)*this.r2z-n[5]*this.r2x*this.r2x+n[2]*this.r2x*this.r2y,s[8]+=n[0]*this.r2y*this.r2y-(n[3]+n[1])*this.r2x*this.r2y+n[4]*this.r2x*this.r2x;var a=1/(s[0]*(s[4]*s[8]-s[7]*s[5])+s[3]*(s[7]*s[2]-s[1]*s[8])+s[6]*(s[1]*s[5]-s[4]*s[2]));this.dd=new o.Mat33(s[4]*s[8]-s[5]*s[7],s[2]*s[7]-s[1]*s[8],s[1]*s[5]-s[2]*s[4],s[5]*s[6]-s[3]*s[8],s[0]*s[8]-s[2]*s[6],s[2]*s[3]-s[0]*s[5],s[3]*s[7]-s[4]*s[6],s[1]*s[6]-s[0]*s[7],s[0]*s[4]-s[1]*s[3]).multiply(a),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var l=o.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);l>.005?(l=(.005-l)/l*e*.05,this.velx*=l,this.vely*=l,this.velz*=l):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,i=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,r=e*t[0]+i*t[1]+n*t[2],o=e*t[3]+i*t[4]+n*t[5],s=e*t[6]+i*t[7]+n*t[8];this.impx+=r,this.impy+=o,this.impz+=s,this.l1.x+=r*this.m1,this.l1.y+=o*this.m1,this.l1.z+=s*this.m1,this.a1.x+=r*this.ax1x+o*this.ay1x+s*this.az1x,this.a1.y+=r*this.ax1y+o*this.ay1y+s*this.az1y,this.a1.z+=r*this.ax1z+o*this.ay1z+s*this.az1z,this.l2.x-=r*this.m2,this.l2.y-=o*this.m2,this.l2.z-=s*this.m2,this.a2.x-=r*this.ax2x+o*this.ay2x+s*this.az2x,this.a2.y-=r*this.ax2y+o*this.ay2y+s*this.az2y,this.a2.z-=r*this.ax2z+o*this.ay2z+s*this.az2z}},o.Rotational3Constraint=function(t,e,i,n){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=i,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0},o.Rotational3Constraint.prototype={constructor:o.Rotational3Constraint,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.limitMotor1.frequency,o=this.limitMotor2.frequency,s=this.limitMotor3.frequency,a=r>0,l=o>0,c=s>0,u=this.lowerLimit1<=this.upperLimit1,h=this.lowerLimit2<=this.upperLimit2,p=this.lowerLimit3<=this.upperLimit3,d=this.limitMotor1.angle;u?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-d):d>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-d):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),a||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var f=this.limitMotor2.angle;h?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-f):f<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-f):f>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-f):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),l||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var m=this.limitMotor3.angle;if(p?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m):m>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-m):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),c||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||a)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||l)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||c)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,a&&2!=this.limitState1){var g=6.2831853*r,y=g*g*t,_=e/(y+2*this.limitMotor1.dampingRatio*g);this.cfm1=this.kv00*_,this.limitVelocity1*=y*_}else this.cfm1=0,this.limitVelocity1*=.05*e;l&&2!=this.limitState2?(_=e/((y=(g=6.2831853*o)*g*t)+2*this.limitMotor2.dampingRatio*g),this.cfm2=this.kv11*_,this.limitVelocity2*=y*_):(this.cfm2=0,this.limitVelocity2*=.05*e),c&&2!=this.limitState3?(_=e/((y=(g=6.2831853*s)*g*t)+2*this.limitMotor3.dampingRatio*g),this.cfm3=this.kv22*_,this.limitVelocity3*=y*_):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var v=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*v,this.d01=(this.k02*this.k21-this.k01*this.k22)*v,this.d02=(this.k01*this.k12-this.k02*this.k11)*v,this.d10=(this.k12*this.k20-this.k10*this.k22)*v,this.d11=(this.k00*this.k22-this.k02*this.k20)*v,this.d12=(this.k02*this.k10-this.k00*this.k12)*v,this.d20=(this.k10*this.k21-this.k11*this.k20)*v,this.d21=(this.k01*this.k20-this.k00*this.k21)*v,this.d22=(this.k00*this.k11-this.k01*this.k10)*v,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var b=this.limitImpulse1+this.motorImpulse1,x=this.limitImpulse2+this.motorImpulse2,A=this.limitImpulse3+this.motorImpulse3;this.a1.x+=b*this.a1x1+x*this.a1x2+A*this.a1x3,this.a1.y+=b*this.a1y1+x*this.a1y2+A*this.a1y3,this.a1.z+=b*this.a1z1+x*this.a1z2+A*this.a1z3,this.a2.x-=b*this.a2x1+x*this.a2x2+A*this.a2x3,this.a2.y-=b*this.a2y1+x*this.a2y2+A*this.a2y3,this.a2.z-=b*this.a2z1+x*this.a2z2+A*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z;this.limitVelocity3=30;var n=t*this.ax1+e*this.ay1+i*this.az1-this.limitVelocity1,r=t*this.ax2+e*this.ay2+i*this.az2-this.limitVelocity2,o=t*this.ax3+e*this.ay3+i*this.az3-this.limitVelocity3,s=n*this.d00+r*this.d01+o*this.d02,a=n*this.d10+r*this.d11+o*this.d12,l=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=s,this.limitImpulse2+=a,this.limitImpulse3+=l,this.a1.x+=s*this.a1x1+a*this.a1x2+l*this.a1x3,this.a1.y+=s*this.a1y1+a*this.a1y2+l*this.a1y3,this.a1.z+=s*this.a1z1+a*this.a1z2+l*this.a1z3,this.a2.x-=s*this.a2x1+a*this.a2x2+l*this.a2x3,this.a2.y-=s*this.a2y1+a*this.a2y2+l*this.a2y3,this.a2.z-=s*this.a2z1+a*this.a2z2+l*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z,n=t*this.ax1+e*this.ay1+i*this.az1,r=t*this.ax2+e*this.ay2+i*this.az2,o=t*this.ax3+e*this.ay3+i*this.az3,s=this.motorImpulse1,a=this.motorImpulse2,l=this.motorImpulse3,c=0,u=0,h=0;this.enableMotor1&&(c=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=c,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),c=this.motorImpulse1-s),this.enableMotor2&&(u=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=u,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),u=this.motorImpulse2-a),this.enableMotor3&&(h=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=h,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),h=this.motorImpulse3-l),n+=c*this.kv00+u*this.k01+h*this.k02,r+=c*this.k10+u*this.kv11+h*this.k12,o+=c*this.k20+u*this.k21+h*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,f=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,g=n*this.d10+r*this.d11+o*this.d12,y=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=g,this.limitImpulse3+=y;var _,v=0;switch((2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(r+=(m=-p)*this.k10,o+=m*this.k20,v|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(n+=(g=-d)*this.k01,o+=g*this.k21,v|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(n+=(y=-f)*this.k02,r+=y*this.k12,v|=4),v){case 1:_=1/(this.k11*this.k22-this.k12*this.k21),g=(this.k22*r+-this.k12*o)*_,y=(-this.k21*r+this.k11*o)*_;break;case 2:_=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*_,y=(-this.k20*n+this.k00*o)*_;break;case 3:y=o/this.k22;break;case 4:_=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*_,g=(-this.k10*n+this.k00*r)*_;break;case 5:g=r/this.k11;break;case 6:m=n/this.k00}this.limitImpulse1=m+p,this.limitImpulse2=g+d,this.limitImpulse3=y+f;var b=c+m,x=u+g,A=h+y;this.a1.x+=b*this.a1x1+x*this.a1x2+A*this.a1x3,this.a1.y+=b*this.a1y1+x*this.a1y2+A*this.a1y3,this.a1.z+=b*this.a1z1+x*this.a1z2+A*this.a1z3,this.a2.x-=b*this.a2x1+x*this.a2x2+A*this.a2x3,this.a2.y-=b*this.a2y1+x*this.a2y2+A*this.a2y3,this.a2.z-=b*this.a2z1+x*this.a2z2+A*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,i=this.a2.z-this.a1.z,r=t*this.ax2+e*this.ay2+i*this.az2}},o.RotationalConstraint=function(t,e){this.cfm=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.enableLimit=!1,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},o.RotationalConstraint.prototype={constructor:o.RotationalConstraint,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.limitMotor.frequency,o=r>0,s=this.lowerLimit<=this.upperLimit,a=this.limitMotor.angle;if(s?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a):a<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a):a>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-a):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),o||(this.limitVelocity>.02?this.limitVelocity-=.02:this.limitVelocity<-.02?this.limitVelocity+=.02:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||o)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0),this.a1x=this.ax*this.i1e00+this.ay*this.i1e01+this.az*this.i1e02,this.a1y=this.ax*this.i1e10+this.ay*this.i1e11+this.az*this.i1e12,this.a1z=this.ax*this.i1e20+this.ay*this.i1e21+this.az*this.i1e22,this.a2x=this.ax*this.i2e00+this.ay*this.i2e01+this.az*this.i2e02,this.a2y=this.ax*this.i2e10+this.ay*this.i2e11+this.az*this.i2e12,this.a2z=this.ax*this.i2e20+this.ay*this.i2e21+this.az*this.i2e22,this.motorDenom=this.ax*(this.a1x+this.a2x)+this.ay*(this.a1y+this.a2y)+this.az*(this.a1z+this.a2z),this.invMotorDenom=1/this.motorDenom,o&&2!=this.limitState){var l=6.2831853*r,c=l*l*t,u=e/(c+2*this.limitMotor.dampingRatio*l);this.cfm=this.motorDenom*u,this.limitVelocity*=c*u}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm),this.limitImpulse*=.95,this.motorImpulse*=.95;var h=this.limitImpulse+this.motorImpulse;this.a1.x+=h*this.a1x,this.a1.y+=h*this.a1y,this.a1.z+=h*this.a1z,this.a2.x-=h*this.a2x,this.a2.y-=h*this.a2y,this.a2.z-=h*this.a2z},solve:function(){var t,e,i=this.ax*(this.a2.x-this.a1.x)+this.ay*(this.a2.y-this.a1.y)+this.az*(this.a2.z-this.a1.z);if(this.enableMotor){t=(i-this.motorSpeed)*this.invMotorDenom;var n=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),i-=(t=this.motorImpulse-n)*this.motorDenom}else t=0;if(2!=this.limitState){e=(i-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var r=this.limitImpulse;this.limitImpulse+=e,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),e=this.limitImpulse-r}else e=0;var o=e+t;this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},o.Translational3Constraint=function(t,e,i,n){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=i,this.limitMotor3=n,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1},o.Translational3Constraint.prototype={constructor:o.Translational3Constraint,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,s=this.p2.z-this.p1.z,a=r*this.ax1+o*this.ay1+s*this.az1,l=r*this.ax2+o*this.ay2+s*this.az2,c=r*this.ax3+o*this.ay3+s*this.az3,u=this.limitMotor1.frequency,h=this.limitMotor2.frequency,p=this.limitMotor3.frequency,d=u>0,f=h>0,m=p>0,g=this.lowerLimit1<=this.upperLimit1,y=this.lowerLimit2<=this.upperLimit2,_=this.lowerLimit3<=this.upperLimit3;(d&&a>20||a<-20)&&(d=!1),(f&&l>20||l<-20)&&(f=!1),(m&&c>20||c<-20)&&(m=!1),g?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-a,d||(a=this.lowerLimit1)):a<this.lowerLimit1?(-1!=this.limitState1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-a,d||(a=this.lowerLimit1)):a>this.upperLimit1?(1!=this.limitState1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-a,d||(a=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),d||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),y?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-l,f||(l=this.lowerLimit2)):l<this.lowerLimit2?(-1!=this.limitState2&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-l,f||(l=this.lowerLimit2)):l>this.upperLimit2?(1!=this.limitState2&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-l,f||(l=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),f||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),_?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-c,m||(c=this.lowerLimit3)):c<this.lowerLimit3?(-1!=this.limitState3&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-c,m||(c=this.lowerLimit3)):c>this.upperLimit3?(1!=this.limitState3&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-c,m||(c=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),m||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(0!=this.limitState1||d)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(0!=this.limitState2||f)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(0!=this.limitState3||m)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var v=a*this.ax1+l*this.ax2+c*this.ax2,b=a*this.ay1+l*this.ay2+c*this.ay2,x=a*this.az1+l*this.az2+c*this.az2,A=this.m2/(this.m1+this.m2);this.weight>=0&&(A=this.weight);var w=1-A;this.r1x=this.r1.x+v*A,this.r1y=this.r1.y+b*A,this.r1z=this.r1.z+x*A,this.r2x=this.r2.x-v*w,this.r2y=this.r2.y-b*w,this.r2z=this.r2.z-x*w,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var P=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*P,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*P,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*P,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*P,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*P,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*P,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*P,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*P,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*P,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,d&&2!=this.limitState1){var E=6.2831853*u,T=E*E*t,S=e/(T+2*this.limitMotor1.dampingRatio*E);this.cfm1=this.kv00*S,this.limitVelocity1*=T*S}else this.cfm1=0,this.limitVelocity1*=.05*e;f&&2!=this.limitState2?(S=e/((T=(E=6.2831853*h)*E*t)+2*this.limitMotor2.dampingRatio*E),this.cfm2=this.kv11*S,this.limitVelocity2*=T*S):(this.cfm2=0,this.limitVelocity2*=.05*e),m&&2!=this.limitState3?(S=e/((T=(E=6.2831853*p)*E*t)+2*this.limitMotor3.dampingRatio*E),this.cfm3=this.kv22*S,this.limitVelocity3*=T*S):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var C=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*C,this.d01=(this.k02*this.k21-this.k01*this.k22)*C,this.d02=(this.k01*this.k12-this.k02*this.k11)*C,this.d10=(this.k12*this.k20-this.k10*this.k22)*C,this.d11=(this.k00*this.k22-this.k02*this.k20)*C,this.d12=(this.k02*this.k10-this.k00*this.k12)*C,this.d20=(this.k10*this.k21-this.k11*this.k20)*C,this.d21=(this.k01*this.k20-this.k00*this.k21)*C,this.d22=(this.k00*this.k11-this.k01*this.k10)*C;var O=this.limitImpulse1+this.motorImpulse1,M=this.limitImpulse2+this.motorImpulse2,R=this.limitImpulse3+this.motorImpulse3;this.l1.x+=O*this.l1x1+M*this.l1x2+R*this.l1x3,this.l1.y+=O*this.l1y1+M*this.l1y2+R*this.l1y3,this.l1.z+=O*this.l1z1+M*this.l1z2+R*this.l1z3,this.a1.x+=O*this.a1x1+M*this.a1x2+R*this.a1x3,this.a1.y+=O*this.a1y1+M*this.a1y2+R*this.a1y3,this.a1.z+=O*this.a1z1+M*this.a1z2+R*this.a1z3,this.l2.x-=O*this.l2x1+M*this.l2x2+R*this.l2x3,this.l2.y-=O*this.l2y1+M*this.l2y2+R*this.l2y3,this.l2.z-=O*this.l2z1+M*this.l2z2+R*this.l2z3,this.a2.x-=O*this.a2x1+M*this.a2x2+R*this.a2x3,this.a2.y-=O*this.a2y1+M*this.a2y2+R*this.a2y3,this.a2.z-=O*this.a2z1+M*this.a2z2+R*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,i=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,n=t*this.ax1+e*this.ay1+i*this.az1,r=t*this.ax2+e*this.ay2+i*this.az2,o=t*this.ax3+e*this.ay3+i*this.az3,s=this.motorImpulse1,a=this.motorImpulse2,l=this.motorImpulse3,c=0,u=0,h=0;this.enableMotor1&&(c=(n-this.motorSpeed1)*this.dv00,this.motorImpulse1+=c,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),c=this.motorImpulse1-s),this.enableMotor2&&(u=(r-this.motorSpeed2)*this.dv11,this.motorImpulse2+=u,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),u=this.motorImpulse2-a),this.enableMotor3&&(h=(o-this.motorSpeed3)*this.dv22,this.motorImpulse3+=h,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),h=this.motorImpulse3-l),n+=c*this.kv00+u*this.k01+h*this.k02,r+=c*this.k10+u*this.kv11+h*this.k12,o+=c*this.k20+u*this.k21+h*this.kv22,n-=this.limitVelocity1+this.limitImpulse1*this.cfm1,r-=this.limitVelocity2+this.limitImpulse2*this.cfm2,o-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,d=this.limitImpulse2,f=this.limitImpulse3,m=n*this.d00+r*this.d01+o*this.d02,g=n*this.d10+r*this.d11+o*this.d12,y=n*this.d20+r*this.d21+o*this.d22;this.limitImpulse1+=m,this.limitImpulse2+=g,this.limitImpulse3+=y;var _,v=0;switch((2==this.limitState1||this.limitImpulse1*this.limitState1<0)&&(r+=(m=-p)*this.k10,o+=m*this.k20,v|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2<0)&&(n+=(g=-d)*this.k01,o+=g*this.k21,v|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3<0)&&(n+=(y=-f)*this.k02,r+=y*this.k12,v|=4),v){case 1:_=1/(this.k11*this.k22-this.k12*this.k21),g=(this.k22*r+-this.k12*o)*_,y=(-this.k21*r+this.k11*o)*_;break;case 2:_=1/(this.k00*this.k22-this.k02*this.k20),m=(this.k22*n+-this.k02*o)*_,y=(-this.k20*n+this.k00*o)*_;break;case 3:y=o/this.k22;break;case 4:_=1/(this.k00*this.k11-this.k01*this.k10),m=(this.k11*n+-this.k01*r)*_,g=(-this.k10*n+this.k00*r)*_;break;case 5:g=r/this.k11;break;case 6:m=n/this.k00}this.limitImpulse1=p+m,this.limitImpulse2=d+g,this.limitImpulse3=f+y;var b=c+m,x=u+g,A=h+y;this.l1.x+=b*this.l1x1+x*this.l1x2+A*this.l1x3,this.l1.y+=b*this.l1y1+x*this.l1y2+A*this.l1y3,this.l1.z+=b*this.l1z1+x*this.l1z2+A*this.l1z3,this.a1.x+=b*this.a1x1+x*this.a1x2+A*this.a1x3,this.a1.y+=b*this.a1y1+x*this.a1y2+A*this.a1y3,this.a1.z+=b*this.a1z1+x*this.a1z2+A*this.a1z3,this.l2.x-=b*this.l2x1+x*this.l2x2+A*this.l2x3,this.l2.y-=b*this.l2y1+x*this.l2y2+A*this.l2y3,this.l2.z-=b*this.l2z1+x*this.l2z2+A*this.l2z3,this.a2.x-=b*this.a2x1+x*this.a2x2+A*this.a2x3,this.a2.y-=b*this.a2y1+x*this.a2y2+A*this.a2y3,this.a2.z-=b*this.a2z1+x*this.a2z2+A*this.a2z3}},o.TranslationalConstraint=function(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0},o.TranslationalConstraint.prototype={constructor:o.TranslationalConstraint,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var i=this.i1.elements,n=this.i2.elements;this.i1e00=i[0],this.i1e01=i[1],this.i1e02=i[2],this.i1e10=i[3],this.i1e11=i[4],this.i1e12=i[5],this.i1e20=i[6],this.i1e21=i[7],this.i1e22=i[8],this.i2e00=n[0],this.i2e01=n[1],this.i2e02=n[2],this.i2e10=n[3],this.i2e11=n[4],this.i2e12=n[5],this.i2e20=n[6],this.i2e21=n[7],this.i2e22=n[8];var r=this.p2.x-this.p1.x,o=this.p2.y-this.p1.y,s=this.p2.z-this.p1.z,a=r*this.ax+o*this.ay+s*this.az,l=this.limitMotor.frequency,c=l>0;(c&&a>20||a<-20)&&(c=!1),this.lowerLimit<=this.upperLimit?(this.lowerLimit==this.upperLimit?(0!=this.limitState&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a,c||(a=this.lowerLimit)):a<this.lowerLimit?(-1!=this.limitState&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-a,c||(a=this.lowerLimit)):a>this.upperLimit?(1!=this.limitState&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-a,c||(a=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),c||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(0!=this.limitState||c)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var u=a*this.ax,h=a*this.ay,p=a*this.az,d=this.m1/(this.m1+this.m2),f=1-d;if(this.r1x=this.r1.x+u*d,this.r1y=this.r1.y+h*d,this.r1z=this.r1.z+p*d,this.r2x=this.r2.x-u*f,this.r2y=this.r2.y-h*f,this.r2z=this.r2.z-p*f,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,c&&2!=this.limitState){var m=6.2831853*l,g=m*m*t,y=e/(g+2*this.limitMotor.dampingRatio*m);this.cfm=this.motorDenom*y,this.limitVelocity*=g*y}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm);var _=this.limitImpulse+this.motorImpulse;this.l1.x+=_*this.l1x,this.l1.y+=_*this.l1y,this.l1.z+=_*this.l1z,this.a1.x+=_*this.a1x,this.a1.y+=_*this.a1y,this.a1.z+=_*this.a1z,this.l2.x-=_*this.l2x,this.l2.y-=_*this.l2y,this.l2.z-=_*this.l2z,this.a2.x-=_*this.a2x,this.a2.y-=_*this.a2y,this.a2.z-=_*this.a2z},solve:function(){var t,e,i=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(i-this.motorSpeed)*this.invMotorDenom;var n=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),i-=(t=this.motorImpulse-n)*this.motorDenom}else t=0;if(2!=this.limitState){e=(i-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var r=this.limitImpulse;this.limitImpulse+=e,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),e=this.limitImpulse-r}else e=0;var o=e+t;this.l1.x+=o*this.l1x,this.l1.y+=o*this.l1y,this.l1.z+=o*this.l1z,this.a1.x+=o*this.a1x,this.a1.y+=o*this.a1y,this.a1.z+=o*this.a1z,this.l2.x-=o*this.l2x,this.l2.y-=o*this.l2y,this.l2.z-=o*this.l2z,this.a2.x-=o*this.a2x,this.a2.y-=o*this.a2y,this.a2.z-=o*this.a2z}},o.Contact=function(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.b1Link=new o.ContactLink(this),this.b2Link=new o.ContactLink(this),this.s1Link=new o.ContactLink(this),this.s2Link=new o.ContactLink(this),this.manifold=new o.ContactManifold,this.buffer=[],this.buffer.length=4,this.buffer[0]=new o.ImpulseDataBuffer,this.buffer[1]=new o.ImpulseDataBuffer,this.buffer[2]=new o.ImpulseDataBuffer,this.buffer[3]=new o.ImpulseDataBuffer,this.points=this.manifold.points,this.constraint=new o.ContactConstraint(this.manifold)},o.Contact.prototype={constructor:o.Contact,mixRestitution:function(t,e){return o.sqrt(t*e)},mixFriction:function(t,e){return o.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var i=this.buffer[e],n=this.points[e];i.lp1X=n.localPoint1.x,i.lp1Y=n.localPoint1.y,i.lp1Z=n.localPoint1.z,i.lp2X=n.localPoint2.x,i.lp2Y=n.localPoint2.y,i.lp2Z=n.localPoint2.z,i.impulse=n.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var r=this.manifold.numPoints;if(0!=r)for(this.touching=!0,e=r;e--;){for(var o=(n=this.points[e]).localPoint1.x,s=n.localPoint1.y,a=n.localPoint1.z,l=n.localPoint2.x,c=n.localPoint2.y,u=n.localPoint2.z,h=-1,p=4e-4,d=t;d--;){var f=(i=this.buffer[d]).lp1X-o,m=i.lp1Y-s,g=i.lp1Z-a,y=f*f+m*m+g*g,_=(f=i.lp2X-l)*f+(m=i.lp2Y-c)*m+(g=i.lp2Z-u)*g;y<_?y<p&&(p=y,h=d):_<p&&(p=_,h=d)}if(-1!=h){var v=this.buffer[h];this.buffer[h]=this.buffer[--t],this.buffer[t]=v,n.normalImpulse=v.impulse,n.warmStarted=!0}else n.normalImpulse=0,n.warmStarted=!1}else this.touching=!1},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,null!=t.contactLink?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,null!=e.contactLink?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,null!=this.body1.contactLink?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,null!=this.body2.contactLink?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;null!==t&&(t.next=e),null!==e&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,null!==t&&(t.next=e),null!==e&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}},o.ContactConstraint=function(t){o.Constraint.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.ii1=null,this.ii2=null,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new o.ContactPointDataBuffer,this.cs.next=new o.ContactPointDataBuffer,this.cs.next.next=new o.ContactPointDataBuffer,this.cs.next.next.next=new o.ContactPointDataBuffer},o.ContactConstraint.prototype=Object.create(o.Constraint.prototype),o.ContactConstraint.prototype.attach=function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},o.ContactConstraint.prototype.detach=function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},o.ContactConstraint.prototype.preSolve=function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var i=this.ii1.elements,n=this.ii2.elements,r=this.p1.x,s=this.p1.y,a=this.p1.z,l=this.p2.x,c=this.p2.y,u=this.p2.z,h=this.m1+this.m2;this.num=this.manifold.numPoints;for(var p=this.cs,d=0;d<this.num;d++){var f,m,g,y,_,v,b=this.ps[d],x=(f=b.position.x)-r,A=(m=b.position.y)-s,w=(g=b.position.z)-a,P=f-l,E=m-c,T=g-u;p.rp1X=x,p.rp1Y=A,p.rp1Z=w,p.rp2X=P,p.rp2Y=E,p.rp2Z=T,p.norImp=b.normalImpulse,p.tanImp=b.tangentImpulse,p.binImp=b.binormalImpulse;var S=b.normal.x,C=b.normal.y,O=b.normal.z,M=this.lv2.x+this.av2.y*T-this.av2.z*E-(this.lv1.x+this.av1.y*w-this.av1.z*A),R=this.lv2.y+this.av2.z*P-this.av2.x*T-(this.lv1.y+this.av1.z*x-this.av1.x*w),I=this.lv2.z+this.av2.x*E-this.av2.y*P-(this.lv1.z+this.av1.x*A-this.av1.y*x),D=S*M+C*R+O*I,L=M-D*S,k=R-D*C,F=I-D*O,N=L*L+k*k+F*F;N>.04?N=1/o.sqrt(N):(L=C*S-O*O,k=-O*C-S*S,F=S*O+C*C,N=1/o.sqrt(L*L+k*k+F*F));var B=C*(F*=N)-O*(k*=N),V=O*(L*=N)-S*F,z=S*k-C*L;p.norX=S,p.norY=C,p.norZ=O,p.tanX=L,p.tanY=k,p.tanZ=F,p.binX=B,p.binY=V,p.binZ=z,p.norU1X=S*this.m1,p.norU1Y=C*this.m1,p.norU1Z=O*this.m1,p.norU2X=S*this.m2,p.norU2Y=C*this.m2,p.norU2Z=O*this.m2,p.tanU1X=L*this.m1,p.tanU1Y=k*this.m1,p.tanU1Z=F*this.m1,p.tanU2X=L*this.m2,p.tanU2Y=k*this.m2,p.tanU2Z=F*this.m2,p.binU1X=B*this.m1,p.binU1Y=V*this.m1,p.binU1Z=z*this.m1,p.binU2X=B*this.m2,p.binU2Y=V*this.m2,p.binU2Z=z*this.m2;var U=A*O-w*C,j=w*S-x*O,G=x*C-A*S,W=E*O-T*C,H=T*S-P*O,X=P*C-E*S,Y=A*F-w*k,q=w*L-x*F,K=x*k-A*L,Q=E*F-T*k,Z=T*L-P*F,J=P*k-E*L,$=A*z-w*V,tt=w*B-x*z,et=x*V-A*B,it=E*z-T*V,nt=T*B-P*z,rt=P*V-E*B,ot=U*i[0]+j*i[1]+G*i[2],st=U*i[3]+j*i[4]+G*i[5],at=U*i[6]+j*i[7]+G*i[8],lt=W*n[0]+H*n[1]+X*n[2],ct=W*n[3]+H*n[4]+X*n[5],ut=W*n[6]+H*n[7]+X*n[8],ht=Y*i[0]+q*i[1]+K*i[2],pt=Y*i[3]+q*i[4]+K*i[5],dt=Y*i[6]+q*i[7]+K*i[8],ft=Q*n[0]+Z*n[1]+J*n[2],mt=Q*n[3]+Z*n[4]+J*n[5],gt=Q*n[6]+Z*n[7]+J*n[8],yt=$*i[0]+tt*i[1]+et*i[2],_t=$*i[3]+tt*i[4]+et*i[5],vt=$*i[6]+tt*i[7]+et*i[8],bt=it*n[0]+nt*n[1]+rt*n[2],xt=it*n[3]+nt*n[4]+rt*n[5],At=it*n[6]+nt*n[7]+rt*n[8];p.norT1X=U,p.norT1Y=j,p.norT1Z=G,p.tanT1X=Y,p.tanT1Y=q,p.tanT1Z=K,p.binT1X=$,p.binT1Y=tt,p.binT1Z=et,p.norT2X=W,p.norT2Y=H,p.norT2Z=X,p.tanT2X=Q,p.tanT2Y=Z,p.tanT2Z=J,p.binT2X=it,p.binT2Y=nt,p.binT2Z=rt,p.norTU1X=ot,p.norTU1Y=st,p.norTU1Z=at,p.tanTU1X=ht,p.tanTU1Y=pt,p.tanTU1Z=dt,p.binTU1X=yt,p.binTU1Y=_t,p.binTU1Z=vt,p.norTU2X=lt,p.norTU2Y=ct,p.norTU2Z=ut,p.tanTU2X=ft,p.tanTU2Y=mt,p.tanTU2Z=gt,p.binTU2X=bt,p.binTU2Y=xt,p.binTU2Z=At,f=U*i[0]+j*i[1]+G*i[2],y=(m=U*i[3]+j*i[4]+G*i[5])*w-(g=U*i[6]+j*i[7]+G*i[8])*A,_=g*x-f*w,v=f*A-m*x,f=W*n[0]+H*n[1]+X*n[2];var wt=1/(h+S*(y+=(m=W*n[3]+H*n[4]+X*n[5])*T-(g=W*n[6]+H*n[7]+X*n[8])*E)+C*(_+=g*P-f*T)+O*(v+=f*E-m*P));f=Y*i[0]+q*i[1]+K*i[2],y=(m=Y*i[3]+q*i[4]+K*i[5])*w-(g=Y*i[6]+q*i[7]+K*i[8])*A,_=g*x-f*w,v=f*A-m*x,f=Q*n[0]+Z*n[1]+J*n[2];var Pt=1/(h+L*(y+=(m=Q*n[3]+Z*n[4]+J*n[5])*T-(g=Q*n[6]+Z*n[7]+J*n[8])*E)+k*(_+=g*P-f*T)+F*(v+=f*E-m*P));f=$*i[0]+tt*i[1]+et*i[2],y=(m=$*i[3]+tt*i[4]+et*i[5])*w-(g=$*i[6]+tt*i[7]+et*i[8])*A,_=g*x-f*w,v=f*A-m*x,f=it*n[0]+nt*n[1]+rt*n[2];var Et=1/(h+B*(y+=(m=it*n[3]+nt*n[4]+rt*n[5])*T-(g=it*n[6]+nt*n[7]+rt*n[8])*E)+V*(_+=g*P-f*T)+z*(v+=f*E-m*P));if(p.norDen=wt,p.tanDen=Pt,p.binDen=Et,b.warmStarted){var Tt=b.normalImpulse;this.lv1.x+=p.norU1X*Tt,this.lv1.y+=p.norU1Y*Tt,this.lv1.z+=p.norU1Z*Tt,this.av1.x+=ot*Tt,this.av1.y+=st*Tt,this.av1.z+=at*Tt,this.lv2.x-=p.norU2X*Tt,this.lv2.y-=p.norU2Y*Tt,this.lv2.z-=p.norU2Z*Tt,this.av2.x-=lt*Tt,this.av2.y-=ct*Tt,this.av2.z-=ut*Tt,p.norImp=Tt,p.tanImp=0,p.binImp=0,D=0}else p.norImp=0,p.tanImp=0,p.binImp=0;D>-1&&(D=0);var St=this.restitution*-D,Ct=-(b.penetration+.005)*e*.05;St<Ct&&(St=Ct),p.norTar=St,p.last=d==this.num-1,p=p.next}},o.ContactConstraint.prototype.solve=function(){for(var t=this.lv1.x,e=this.lv1.y,i=this.lv1.z,n=this.lv2.x,r=this.lv2.y,s=this.lv2.z,a=this.av1.x,l=this.av1.y,c=this.av1.z,u=this.av2.x,h=this.av2.y,p=this.av2.z,d=this.cs;;){var f,m,g,y,_=d.norImp,v=d.tanImp,b=d.binImp,x=-_*this.friction,A=n-t,w=r-e,P=s-i;f=v,g=b;var E=(v+=m=(A*d.tanX+w*d.tanY+P*d.tanZ+u*d.tanT2X+h*d.tanT2Y+p*d.tanT2Z-a*d.tanT1X-l*d.tanT1Y-c*d.tanT1Z)*d.tanDen)*v+(b+=y=(A*d.binX+w*d.binY+P*d.binZ+u*d.binT2X+h*d.binT2Y+p*d.binT2Z-a*d.binT1X-l*d.binT1Y-c*d.binT1Z)*d.binDen)*b;if(E>x*x&&(v*=E=x/o.sqrt(E),b*=E),m=v-f,y=b-g,t+=d.tanU1X*m+d.binU1X*y,e+=d.tanU1Y*m+d.binU1Y*y,i+=d.tanU1Z*m+d.binU1Z*y,a+=d.tanTU1X*m+d.binTU1X*y,l+=d.tanTU1Y*m+d.binTU1Y*y,c+=d.tanTU1Z*m+d.binTU1Z*y,n-=d.tanU2X*m+d.binU2X*y,r-=d.tanU2Y*m+d.binU2Y*y,s-=d.tanU2Z*m+d.binU2Z*y,u-=d.tanTU2X*m+d.binTU2X*y,h-=d.tanTU2Y*m+d.binTU2Y*y,p-=d.tanTU2Z*m+d.binTU2Z*y,f=_,(_+=m=((n-t)*d.norX+(r-e)*d.norY+(s-i)*d.norZ+u*d.norT2X+h*d.norT2Y+p*d.norT2Z-a*d.norT1X-l*d.norT1Y-c*d.norT1Z-d.norTar)*d.norDen)>0&&(_=0),m=_-f,t+=d.norU1X*m,e+=d.norU1Y*m,i+=d.norU1Z*m,a+=d.norTU1X*m,l+=d.norTU1Y*m,c+=d.norTU1Z*m,n-=d.norU2X*m,r-=d.norU2Y*m,s-=d.norU2Z*m,u-=d.norTU2X*m,h-=d.norTU2Y*m,p-=d.norTU2Z*m,d.norImp=_,d.tanImp=v,d.binImp=b,d.last)break;d=d.next}this.lv1.x=t,this.lv1.y=e,this.lv1.z=i,this.lv2.x=n,this.lv2.y=r,this.lv2.z=s,this.av1.x=a,this.av1.y=l,this.av1.z=c,this.av2.x=u,this.av2.y=h,this.av2.z=p},o.ContactConstraint.prototype.postSolve=function(){for(var t=this.cs,e=this.num;e--;){var i=this.ps[e];i.normal.x=t.norX,i.normal.y=t.norY,i.normal.z=t.norZ,i.tangent.x=t.tanX,i.tangent.y=t.tanY,i.tangent.z=t.tanZ,i.binormal.x=t.binX,i.binormal.y=t.binY,i.binormal.z=t.binZ,i.normalImpulse=t.norImp,i.tangentImpulse=t.tanImp,i.binormalImpulse=t.binImp,i.normalDenominator=t.norDen,i.tangentDenominator=t.tanDen,i.binormalDenominator=t.binDen,t=t.next}},o.ContactLink=function(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t},o.ContactManifold=function(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[],this.points.length=4,this.points[0]=new o.ManifoldPoint,this.points[1]=new o.ManifoldPoint,this.points[2]=new o.ManifoldPoint,this.points[3]=new o.ManifoldPoint},o.ContactManifold.prototype={constructor:o.ContactManifold,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPoint:function(t,e,i,n,r,o,s,a){var l=this.points[this.numPoints++];l.position.x=t,l.position.y=e,l.position.z=i;var c=this.body1.rotation,u=t-this.body1.position.x,h=e-this.body1.position.y,p=i-this.body1.position.z,d=c.elements;l.localPoint1.x=u*d[0]+h*d[3]+p*d[6],l.localPoint1.y=u*d[1]+h*d[4]+p*d[7],l.localPoint1.z=u*d[2]+h*d[5]+p*d[8],c=this.body2.rotation,u=t-this.body2.position.x,h=e-this.body2.position.y,p=i-this.body2.position.z,l.localPoint2.x=u*d[0]+h*d[3]+p*d[6],l.localPoint2.y=u*d[1]+h*d[4]+p*d[7],l.localPoint2.z=u*d[2]+h*d[5]+p*d[8],l.normalImpulse=0,a?(l.normal.x=-n,l.normal.y=-r,l.normal.z=-o):(l.normal.x=n,l.normal.y=r,l.normal.z=o),l.penetration=s,l.warmStarted=!1}},o.ContactPointDataBuffer=function(){this.norX=NaN,this.norY=NaN,this.norZ=NaN,this.tanX=NaN,this.tanY=NaN,this.tanZ=NaN,this.binX=NaN,this.binY=NaN,this.binZ=NaN,this.rp1X=NaN,this.rp1Y=NaN,this.rp1Z=NaN,this.rp2X=NaN,this.rp2Y=NaN,this.rp2Z=NaN,this.norU1X=NaN,this.norU1Y=NaN,this.norU1Z=NaN,this.norU2X=NaN,this.norU2Y=NaN,this.norU2Z=NaN,this.tanU1X=NaN,this.tanU1Y=NaN,this.tanU1Z=NaN,this.tanU2X=NaN,this.tanU2Y=NaN,this.tanU2Z=NaN,this.binU1X=NaN,this.binU1Y=NaN,this.binU1Z=NaN,this.binU2X=NaN,this.binU2Y=NaN,this.binU2Z=NaN,this.norT1X=NaN,this.norT1Y=NaN,this.norT1Z=NaN,this.norT2X=NaN,this.norT2Y=NaN,this.norT2Z=NaN,this.tanT1X=NaN,this.tanT1Y=NaN,this.tanT1Z=NaN,this.tanT2X=NaN,this.tanT2Y=NaN,this.tanT2Z=NaN,this.binT1X=NaN,this.binT1Y=NaN,this.binT1Z=NaN,this.binT2X=NaN,this.binT2Y=NaN,this.binT2Z=NaN,this.norTU1X=NaN,this.norTU1Y=NaN,this.norTU1Z=NaN,this.norTU2X=NaN,this.norTU2Y=NaN,this.norTU2Z=NaN,this.tanTU1X=NaN,this.tanTU1Y=NaN,this.tanTU1Z=NaN,this.tanTU2X=NaN,this.tanTU2Y=NaN,this.tanTU2Z=NaN,this.binTU1X=NaN,this.binTU1Y=NaN,this.binTU1Z=NaN,this.binTU2X=NaN,this.binTU2Y=NaN,this.binTU2Z=NaN,this.norImp=NaN,this.tanImp=NaN,this.binImp=NaN,this.norDen=NaN,this.tanDen=NaN,this.binDen=NaN,this.norTar=NaN,this.next=null,this.last=!1},o.ImpulseDataBuffer=function(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN},o.ManifoldPoint=function(){this.warmStarted=!1,this.position=new o.Vec3,this.localPoint1=new o.Vec3,this.localPoint2=new o.Vec3,this.normal=new o.Vec3,this.tangent=new o.Vec3,this.binormal=new o.Vec3,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0},o.MassInfo=function(){this.mass=0,this.inertia=new o.Mat33},o.Shape=function(t){this.type=o.SHAPE_NULL,this.id=o.nextID++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new o.Vec3,this.rotation=new o.Mat33,this.relativePosition=(new o.Vec3).copy(t.relativePosition),this.relativeRotation=(new o.Mat33).copy(t.relativeRotation),this.aabb=new o.AABB,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith},o.Shape.prototype={constructor:o.Shape,calculateMassInfo:function(t){o.Error("Shape","Inheritance error.")},updateProxy:function(){o.Error("Shape","Inheritance error.")}},o.ShapeConfig=function(){this.relativePosition=new o.Vec3,this.relativeRotation=new o.Mat33,this.friction=.4,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295},o.BoxShape=function(t,e,i,r){o.Shape.call(this,t),this.type=o.SHAPE_BOX,this.width=e,this.height=i,this.depth=r,this.halfWidth=.5*e,this.halfHeight=.5*i,this.halfDepth=.5*r,this.dimentions=new n(18),this.elements=new n(24)},o.BoxShape.prototype=Object.create(o.Shape.prototype),o.BoxShape.prototype.constructor=o.BoxShape,o.BoxShape.prototype.calculateMassInfo=function(t){var e=this.width*this.height*this.depth*this.density;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.height*this.height)*(1/12))},o.BoxShape.prototype.updateProxy=function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var i=e[9],n=e[10],r=e[11],s=e[12],a=e[13],l=e[14],c=e[15],u=e[16],h=e[17],p=this.position.x,d=this.position.y,f=this.position.z,m=this.elements;m[0]=p+i+s+c,m[1]=d+n+a+u,m[2]=f+r+l+h,m[3]=p+i+s-c,m[4]=d+n+a-u,m[5]=f+r+l-h,m[6]=p+i-s+c,m[7]=d+n-a+u,m[8]=f+r-l+h,m[9]=p+i-s-c,m[10]=d+n-a-u,m[11]=f+r-l-h,m[12]=p-i+s+c,m[13]=d-n+a+u,m[14]=f-r+l+h,m[15]=p-i+s-c,m[16]=d-n+a-u,m[17]=f-r+l-h,m[18]=p-i-s+c,m[19]=d-n-a+u,m[20]=f-r-l+h,m[21]=p-i-s-c,m[22]=d-n-a-u,m[23]=f-r-l-h;var g=e[9]<0?-e[9]:e[9],y=e[10]<0?-e[10]:e[10],_=e[11]<0?-e[11]:e[11];g=e[12]<0?g-e[12]:g+e[12],y=e[13]<0?y-e[13]:y+e[13],_=e[14]<0?_-e[14]:_+e[14],g=e[15]<0?g-e[15]:g+e[15],y=e[16]<0?y-e[16]:y+e[16],_=e[17]<0?_-e[17]:_+e[17];var v=o.AABB_PROX;this.aabb.set(this.position.x-g-v,this.position.x+g+v,this.position.y-y-v,this.position.y+y+v,this.position.z-_-v,this.position.z+_+v),null!=this.proxy&&this.proxy.update()},o.SphereShape=function(t,e){o.Shape.call(this,t),this.type=o.SHAPE_SPHERE,this.radius=e},o.SphereShape.prototype=Object.create(o.Shape.prototype),o.SphereShape.prototype.constructor=o.SphereShape,o.SphereShape.prototype.calculateMassInfo=function(t){var e=1.333*o.PI*this.radius*this.radius*this.radius*this.density;t.mass=e;var i=e*this.radius*this.radius*.4;t.inertia.set(i,0,0,0,i,0,0,0,i)},o.SphereShape.prototype.updateProxy=function(){var t=o.AABB_PROX;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),null!=this.proxy&&this.proxy.update()},o.CylinderShape=function(t,e,i){o.Shape.call(this,t),this.type=o.SHAPE_CYLINDER,this.radius=e,this.height=i,this.halfHeight=.5*i,this.normalDirection=new o.Vec3,this.halfDirection=new o.Vec3},o.CylinderShape.prototype=Object.create(o.Shape.prototype),o.CylinderShape.prototype.constructor=o.CylinderShape,o.CylinderShape.prototype.calculateMassInfo=function(t){var e=this.radius*this.radius,i=o.PI*e*this.height*this.density,n=(.25*e+.0833*this.height*this.height)*i,r=.5*e;t.mass=i,t.inertia.set(n,0,0,0,r,0,0,0,n)},o.CylinderShape.prototype.updateProxy=function(){var t,e,i,n,r,s,a,l,c,u,h,p=this.rotation.elements;r=p[1]*p[1],s=p[4]*p[4],a=p[7]*p[7],this.normalDirection.set(p[1],p[4],p[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),e=1-r,(t=o.sqrt(e*e+r*s+r*a))>0&&(t=this.radius/t),e*=t,i=1-s,(t=o.sqrt(s*r+i*i+s*a))>0&&(t=this.radius/t),i*=t,n=1-a,(t=o.sqrt(a*r+a*s+n*n))>0&&(t=this.radius/t),n*=t,l=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,c=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,u=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,l=e<0?l-e:l+e,c=i<0?c-i:c+i,u=n<0?u-n:u+n,h=o.AABB_PROX,this.aabb.set(this.position.x-l-h,this.position.x+l+h,this.position.y-c-h,this.position.y+c+h,this.position.z-u-h,this.position.z+u+h),null!=this.proxy&&this.proxy.update()},o.TetraShape=function(t,e,i,n,r){o.Shape.call(this,t),this.type=o.SHAPE_TETRA,this.verts=[e,i,n,r],this.faces=[s(0,1,2),s(1,2,3),s(2,3,4),s(4,0,1)]},o.TetraShape.prototype=Object.create(o.Shape.prototype),o.TetraShape.prototype.constructor=o.TetraShape,o.TetraShape.prototype.calculateMassInfo=function(){},o.TetraShape.prototype.updateProxy=function(){this.aabb.setFromPoints(this.verts),null!==this.proxy&&this.proxy.update()},o.CollisionDetector=function(){this.flip=!1},o.CollisionDetector.prototype={constructor:o.CollisionDetector,detectCollision:function(t,e,i){o.Error("CollisionDetector","Inheritance error.")}},o.BoxBoxCollisionDetector=function(){o.CollisionDetector.call(this),this.clipVertices1=new n(24),this.clipVertices2=new n(24),this.used=new n(8),this.INF=1/0},o.BoxBoxCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.BoxBoxCollisionDetector.prototype.constructor=o.BoxBoxCollisionDetector,o.BoxBoxCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r;t.id<e.id?(n=t,r=e):(n=e,r=t);var s,a,l,c,u,h,p,d,f,m,g,y,_,v,b,x,A,w,P,E,T,S,C,O,M,R,I,D,L,k,F,N,B,V,z,U=n.elements,j=r.elements,G=n.dimentions,W=r.dimentions,H=n.position,X=r.position,Y=H.x,q=H.y,K=H.z,Q=X.x,Z=X.y,J=X.z,$=Q-Y,tt=Z-q,et=J-K,it=n.halfWidth,nt=n.halfHeight,rt=n.halfDepth,ot=r.halfWidth,st=r.halfHeight,at=r.halfDepth,lt=G[0],ct=G[1],ut=G[2],ht=G[3],pt=G[4],dt=G[5],ft=G[6],mt=G[7],gt=G[8],yt=G[9],_t=G[10],vt=G[11],bt=G[12],xt=G[13],At=G[14],wt=G[15],Pt=G[16],Et=G[17],Tt=W[0],St=W[1],Ct=W[2],Ot=W[3],Mt=W[4],Rt=W[5],It=W[6],Dt=W[7],Lt=W[8],kt=W[9],Ft=W[10],Nt=W[11],Bt=W[12],Vt=W[13],zt=W[14],Ut=W[15],jt=W[16],Gt=W[17],Wt=ct*Ct-ut*St,Ht=ut*Tt-lt*Ct,Xt=lt*St-ct*Tt,Yt=ct*Rt-ut*Mt,qt=ut*Ot-lt*Rt,Kt=lt*Mt-ct*Ot,Qt=ct*Lt-ut*Dt,Zt=ut*It-lt*Lt,Jt=lt*Dt-ct*It,$t=pt*Ct-dt*St,te=dt*Tt-ht*Ct,ee=ht*St-pt*Tt,ie=pt*Rt-dt*Mt,ne=dt*Ot-ht*Rt,re=ht*Mt-pt*Ot,oe=pt*Lt-dt*Dt,se=dt*It-ht*Lt,ae=ht*Dt-pt*It,le=mt*Ct-gt*St,ce=gt*Tt-ft*Ct,ue=ft*St-mt*Tt,he=mt*Rt-gt*Mt,pe=gt*Ot-ft*Rt,de=ft*Mt-mt*Ot,fe=mt*Lt-gt*Dt,me=gt*It-ft*Lt,ge=ft*Dt-mt*It,ye=!1,_e=!1,ve=!1,be=!1,xe=!1,Ae=!1,we=!1,Pe=!1,Ee=!1;if((s=(F=lt*$+ct*tt+ut*et)>0)||(F=-F),(B=lt*Tt+ct*St+ut*Ct)<0&&(B=-B),(V=lt*Ot+ct*Mt+ut*Rt)<0&&(V=-V),(z=lt*It+ct*Dt+ut*Lt)<0&&(z=-z),!((x=F-(N=it)-(B*ot+V*st+z*at))>0||((a=(F=ht*$+pt*tt+dt*et)>0)||(F=-F),(B=ht*Tt+pt*St+dt*Ct)<0&&(B=-B),(V=ht*Ot+pt*Mt+dt*Rt)<0&&(V=-V),(z=ht*It+pt*Dt+dt*Lt)<0&&(z=-z),(A=F-(N=nt)-(B*ot+V*st+z*at))>0||((l=(F=ft*$+mt*tt+gt*et)>0)||(F=-F),(B=ft*Tt+mt*St+gt*Ct)<0&&(B=-B),(V=ft*Ot+mt*Mt+gt*Rt)<0&&(V=-V),(z=ft*It+mt*Dt+gt*Lt)<0&&(z=-z),(w=F-(N=rt)-(B*ot+V*st+z*at))>0||((c=(F=Tt*$+St*tt+Ct*et)>0)||(F=-F),(B=Tt*lt+St*ct+Ct*ut)<0&&(B=-B),(V=Tt*ht+St*pt+Ct*dt)<0&&(V=-V),(z=Tt*ft+St*mt+Ct*gt)<0&&(z=-z),(P=1*(F-(N=B*it+V*nt+z*rt)-ot))>0||((u=(F=Ot*$+Mt*tt+Rt*et)>0)||(F=-F),(B=Ot*lt+Mt*ct+Rt*ut)<0&&(B=-B),(V=Ot*ht+Mt*pt+Rt*dt)<0&&(V=-V),(z=Ot*ft+Mt*mt+Rt*gt)<0&&(z=-z),(E=1*(F-(N=B*it+V*nt+z*rt)-st))>0||((h=(F=It*$+Dt*tt+Lt*et)>0)||(F=-F),(B=It*lt+Dt*ct+Lt*ut)<0&&(B=-B),(V=It*ht+Dt*pt+Lt*dt)<0&&(V=-V),(z=It*ft+Dt*mt+Lt*gt)<0&&(z=-z),(T=1*(F-(N=B*it+V*nt+z*rt)-at))>0))))))){if((F=Wt*Wt+Ht*Ht+Xt*Xt)>1e-5){if((p=(F=(Wt*=F=1/o.sqrt(F))*$+(Ht*=F)*tt+(Xt*=F)*et)>0)||(F=-F),(B=Wt*ht+Ht*pt+Xt*dt)<0&&(B=-B),(V=Wt*ft+Ht*mt+Xt*gt)<0&&(V=-V),N=B*nt+V*rt,(B=Wt*Ot+Ht*Mt+Xt*Rt)<0&&(B=-B),(V=Wt*It+Ht*Dt+Xt*Lt)<0&&(V=-V),(S=F-N-(B*st+V*at))>0)return}else p=!1,S=0,ye=!0;if((F=Yt*Yt+qt*qt+Kt*Kt)>1e-5){if((d=(F=(Yt*=F=1/o.sqrt(F))*$+(qt*=F)*tt+(Kt*=F)*et)>0)||(F=-F),(B=Yt*ht+qt*pt+Kt*dt)<0&&(B=-B),(V=Yt*ft+qt*mt+Kt*gt)<0&&(V=-V),N=B*nt+V*rt,(B=Yt*Tt+qt*St+Kt*Ct)<0&&(B=-B),(V=Yt*It+qt*Dt+Kt*Lt)<0&&(V=-V),(C=F-N-(B*ot+V*at))>0)return}else d=!1,C=0,_e=!0;if((F=Qt*Qt+Zt*Zt+Jt*Jt)>1e-5){if((f=(F=(Qt*=F=1/o.sqrt(F))*$+(Zt*=F)*tt+(Jt*=F)*et)>0)||(F=-F),(B=Qt*ht+Zt*pt+Jt*dt)<0&&(B=-B),(V=Qt*ft+Zt*mt+Jt*gt)<0&&(V=-V),N=B*nt+V*rt,(B=Qt*Tt+Zt*St+Jt*Ct)<0&&(B=-B),(V=Qt*Ot+Zt*Mt+Jt*Rt)<0&&(V=-V),(O=F-N-(B*ot+V*st))>0)return}else f=!1,O=0,ve=!0;if((F=$t*$t+te*te+ee*ee)>1e-5){if((m=(F=($t*=F=1/o.sqrt(F))*$+(te*=F)*tt+(ee*=F)*et)>0)||(F=-F),(B=$t*lt+te*ct+ee*ut)<0&&(B=-B),(V=$t*ft+te*mt+ee*gt)<0&&(V=-V),N=B*it+V*rt,(B=$t*Ot+te*Mt+ee*Rt)<0&&(B=-B),(V=$t*It+te*Dt+ee*Lt)<0&&(V=-V),(M=F-N-(B*st+V*at))>0)return}else m=!1,M=0,be=!0;if((F=ie*ie+ne*ne+re*re)>1e-5){if((g=(F=(ie*=F=1/o.sqrt(F))*$+(ne*=F)*tt+(re*=F)*et)>0)||(F=-F),(B=ie*lt+ne*ct+re*ut)<0&&(B=-B),(V=ie*ft+ne*mt+re*gt)<0&&(V=-V),N=B*it+V*rt,(B=ie*Tt+ne*St+re*Ct)<0&&(B=-B),(V=ie*It+ne*Dt+re*Lt)<0&&(V=-V),(R=F-N-(B*ot+V*at))>0)return}else g=!1,R=0,xe=!0;if((F=oe*oe+se*se+ae*ae)>1e-5){if((y=(F=(oe*=F=1/o.sqrt(F))*$+(se*=F)*tt+(ae*=F)*et)>0)||(F=-F),(B=oe*lt+se*ct+ae*ut)<0&&(B=-B),(V=oe*ft+se*mt+ae*gt)<0&&(V=-V),N=B*it+V*rt,(B=oe*Tt+se*St+ae*Ct)<0&&(B=-B),(V=oe*Ot+se*Mt+ae*Rt)<0&&(V=-V),(I=F-N-(B*ot+V*st))>0)return}else y=!1,I=0,Ae=!0;if((F=le*le+ce*ce+ue*ue)>1e-5){if((_=(F=(le*=F=1/o.sqrt(F))*$+(ce*=F)*tt+(ue*=F)*et)>0)||(F=-F),(B=le*lt+ce*ct+ue*ut)<0&&(B=-B),(V=le*ht+ce*pt+ue*dt)<0&&(V=-V),N=B*it+V*nt,(B=le*Ot+ce*Mt+ue*Rt)<0&&(B=-B),(V=le*It+ce*Dt+ue*Lt)<0&&(V=-V),(D=F-N-(B*st+V*at))>0)return}else _=!1,D=0,we=!0;if((F=he*he+pe*pe+de*de)>1e-5){if((v=(F=(he*=F=1/o.sqrt(F))*$+(pe*=F)*tt+(de*=F)*et)>0)||(F=-F),(B=he*lt+pe*ct+de*ut)<0&&(B=-B),(V=he*ht+pe*pt+de*dt)<0&&(V=-V),N=B*it+V*nt,(B=he*Tt+pe*St+de*Ct)<0&&(B=-B),(V=he*It+pe*Dt+de*Lt)<0&&(V=-V),(L=F-N-(B*ot+V*at))>0)return}else v=!1,L=0,Pe=!0;if((F=fe*fe+me*me+ge*ge)>1e-5){if((b=(F=(fe*=F=1/o.sqrt(F))*$+(me*=F)*tt+(ge*=F)*et)>0)||(F=-F),(B=fe*lt+me*ct+ge*ut)<0&&(B=-B),(V=fe*ht+me*pt+ge*dt)<0&&(V=-V),N=B*it+V*nt,(B=fe*Tt+me*St+ge*Ct)<0&&(B=-B),(V=fe*Ot+me*Mt+ge*Rt)<0&&(V=-V),(k=F-N-(B*ot+V*st))>0)return}else b=!1,k=0,Ee=!0;var Te=x,Se=x,Ce=0,Oe=s;A>Se&&(Te=A,Se=A,Ce=1,Oe=a),w>Se&&(Te=w,Se=w,Ce=2,Oe=l),P>Se&&(Te=P,Se=P,Ce=3,Oe=c),E>Se&&(Te=E,Se=E,Ce=4,Oe=u),T>Se&&(Te=T,Se=T,Ce=5,Oe=h),S-.01>Se&&!ye&&(Te=S,Se=S-.01,Ce=6,Oe=p),C-.01>Se&&!_e&&(Te=C,Se=C-.01,Ce=7,Oe=d),O-.01>Se&&!ve&&(Te=O,Se=O-.01,Ce=8,Oe=f),M-.01>Se&&!be&&(Te=M,Se=M-.01,Ce=9,Oe=m),R-.01>Se&&!xe&&(Te=R,Se=R-.01,Ce=10,Oe=g),I-.01>Se&&!Ae&&(Te=I,Se=I-.01,Ce=11,Oe=y),D-.01>Se&&!we&&(Te=D,Se=D-.01,Ce=12,Oe=_),L-.01>Se&&!Pe&&(Te=L,Se=L-.01,Ce=13,Oe=v),k-.01>Se&&!Ee&&(Te=k,Ce=14,Oe=b);var Me=0,Re=0,Ie=0,De=0,Le=0,ke=0,Fe=0,Ne=0,Be=0,Ve=0,ze=0,Ue=0,je=0,Ge=0,We=0,He=0,Xe=0,Ye=0,qe=!1;if(0==Ce?(Oe?(Ve=Y+yt,ze=q+_t,Ue=K+vt,Me=lt,Re=ct,Ie=ut):(Ve=Y-yt,ze=q-_t,Ue=K-vt,Me=-lt,Re=-ct,Ie=-ut),je=bt,Ge=xt,We=At,De=-ht,Le=-pt,ke=-dt,He=wt,Xe=Pt,Ye=Et,Fe=-ft,Ne=-mt,Be=-gt):1==Ce?(Oe?(Ve=Y+bt,ze=q+xt,Ue=K+At,Me=ht,Re=pt,Ie=dt):(Ve=Y-bt,ze=q-xt,Ue=K-At,Me=-ht,Re=-pt,Ie=-dt),je=yt,Ge=_t,We=vt,De=-lt,Le=-ct,ke=-ut,He=wt,Xe=Pt,Ye=Et,Fe=-ft,Ne=-mt,Be=-gt):2==Ce?(Oe?(Ve=Y+wt,ze=q+Pt,Ue=K+Et,Me=ft,Re=mt,Ie=gt):(Ve=Y-wt,ze=q-Pt,Ue=K-Et,Me=-ft,Re=-mt,Ie=-gt),je=yt,Ge=_t,We=vt,De=-lt,Le=-ct,ke=-ut,He=bt,Xe=xt,Ye=At,Fe=-ht,Ne=-pt,Be=-dt):3==Ce?(qe=!0,Oe?(Ve=Q-kt,ze=Z-Ft,Ue=J-Nt,Me=-Tt,Re=-St,Ie=-Ct):(Ve=Q+kt,ze=Z+Ft,Ue=J+Nt,Me=Tt,Re=St,Ie=Ct),je=Bt,Ge=Vt,We=zt,De=-Ot,Le=-Mt,ke=-Rt,He=Ut,Xe=jt,Ye=Gt,Fe=-It,Ne=-Dt,Be=-Lt):4==Ce?(qe=!0,Oe?(Ve=Q-Bt,ze=Z-Vt,Ue=J-zt,Me=-Ot,Re=-Mt,Ie=-Rt):(Ve=Q+Bt,ze=Z+Vt,Ue=J+zt,Me=Ot,Re=Mt,Ie=Rt),je=kt,Ge=Ft,We=Nt,De=-Tt,Le=-St,ke=-Ct,He=Ut,Xe=jt,Ye=Gt,Fe=-It,Ne=-Dt,Be=-Lt):5==Ce?(qe=!0,Oe?(Ve=Q-Ut,ze=Z-jt,Ue=J-Gt,Me=-It,Re=-Dt,Ie=-Lt):(Ve=Q+Ut,ze=Z+jt,Ue=J+Gt,Me=It,Re=Dt,Ie=Lt),je=kt,Ge=Ft,We=Nt,De=-Tt,Le=-St,ke=-Ct,He=Bt,Xe=Vt,Ye=zt,Fe=-Ot,Ne=-Mt,Be=-Rt):6==Ce?(Me=Wt,Re=Ht,Ie=Xt,De=lt,Le=ct,ke=ut,Fe=Tt,Ne=St,Be=Ct):7==Ce?(Me=Yt,Re=qt,Ie=Kt,De=lt,Le=ct,ke=ut,Fe=Ot,Ne=Mt,Be=Rt):8==Ce?(Me=Qt,Re=Zt,Ie=Jt,De=lt,Le=ct,ke=ut,Fe=It,Ne=Dt,Be=Lt):9==Ce?(Me=$t,Re=te,Ie=ee,De=ht,Le=pt,ke=dt,Fe=Tt,Ne=St,Be=Ct):10==Ce?(Me=ie,Re=ne,Ie=re,De=ht,Le=pt,ke=dt,Fe=Ot,Ne=Mt,Be=Rt):11==Ce?(Me=oe,Re=se,Ie=ae,De=ht,Le=pt,ke=dt,Fe=It,Ne=Dt,Be=Lt):12==Ce?(Me=le,Re=ce,Ie=ue,De=ft,Le=mt,ke=gt,Fe=Tt,Ne=St,Be=Ct):13==Ce?(Me=he,Re=pe,Ie=de,De=ft,Le=mt,ke=gt,Fe=Ot,Ne=Mt,Be=Rt):14==Ce&&(Me=fe,Re=me,Ie=ge,De=ft,Le=mt,ke=gt,Fe=It,Ne=Dt,Be=Lt),Ce>5){var Ke,Qe,Ze,Je,$e,ti,ei,ii,ni,ri,oi;Oe||(Me=-Me,Re=-Re,Ie=-Ie),Qe=Me*(ti=U[0])+Re*(ei=U[1])+Ie*(ii=U[2]),(Ke=Me*(Ze=U[3])+Re*(Je=U[4])+Ie*($e=U[5]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[6])+Re*(Je=U[7])+Ie*($e=U[8]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[9])+Re*(Je=U[10])+Ie*($e=U[11]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[12])+Re*(Je=U[13])+Ie*($e=U[14]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[15])+Re*(Je=U[16])+Ie*($e=U[17]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[18])+Re*(Je=U[19])+Ie*($e=U[20]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),(Ke=Me*(Ze=U[21])+Re*(Je=U[22])+Ie*($e=U[23]))>Qe&&(Qe=Ke,ti=Ze,ei=Je,ii=$e),Qe=Me*(ni=j[0])+Re*(ri=j[1])+Ie*(oi=j[2]),(Ke=Me*(Ze=j[3])+Re*(Je=j[4])+Ie*($e=j[5]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[6])+Re*(Je=j[7])+Ie*($e=j[8]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[9])+Re*(Je=j[10])+Ie*($e=j[11]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[12])+Re*(Je=j[13])+Ie*($e=j[14]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[15])+Re*(Je=j[16])+Ie*($e=j[17]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[18])+Re*(Je=j[19])+Ie*($e=j[20]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e),(Ke=Me*(Ze=j[21])+Re*(Je=j[22])+Ie*($e=j[23]))<Qe&&(Qe=Ke,ni=Ze,ri=Je,oi=$e);var si=((Ze=ni-ti)*(De-Fe*(B=De*Fe+Le*Ne+ke*Be))+(Je=ri-ei)*(Le-Ne*B)+($e=oi-ii)*(ke-Be*B))/(1-B*B);i.addPoint(ti+De*si+Me*Te*.5,ei+Le*si+Re*Te*.5,ii+ke*si+Ie*Te*.5,Me,Re,Ie,Te,!1)}else{var ai,li,ci,ui,hi,pi,di,fi,mi,gi,yi,_i,vi,bi,xi,Ai,wi,Pi,Ei,Ti,Si,Ci=1,Oi=0,Mi=0;qe?((Oi=lt*Me+ct*Re+ut*Ie)<Ci&&(Ci=Oi,Mi=0),-Oi<Ci&&(Ci=-Oi,Mi=1),(Oi=ht*Me+pt*Re+dt*Ie)<Ci&&(Ci=Oi,Mi=2),-Oi<Ci&&(Ci=-Oi,Mi=3),(Oi=ft*Me+mt*Re+gt*Ie)<Ci&&(Ci=Oi,Mi=4),-Oi<Ci&&(Ci=-Oi,Mi=5),0==Mi?(ai=U[0],li=U[1],ci=U[2],ui=U[6],hi=U[7],pi=U[8],di=U[9],fi=U[10],mi=U[11],gi=U[3],yi=U[4],_i=U[5]):1==Mi?(ai=U[15],li=U[16],ci=U[17],ui=U[21],hi=U[22],pi=U[23],di=U[18],fi=U[19],mi=U[20],gi=U[12],yi=U[13],_i=U[14]):2==Mi?(ai=U[12],li=U[13],ci=U[14],ui=U[0],hi=U[1],pi=U[2],di=U[3],fi=U[4],mi=U[5],gi=U[15],yi=U[16],_i=U[17]):3==Mi?(ai=U[21],li=U[22],ci=U[23],ui=U[9],hi=U[10],pi=U[11],di=U[6],fi=U[7],mi=U[8],gi=U[18],yi=U[19],_i=U[20]):4==Mi?(ai=U[12],li=U[13],ci=U[14],ui=U[18],hi=U[19],pi=U[20],di=U[6],fi=U[7],mi=U[8],gi=U[0],yi=U[1],_i=U[2]):5==Mi&&(ai=U[3],li=U[4],ci=U[5],ui=U[6],hi=U[7],pi=U[8],di=U[21],fi=U[22],mi=U[23],gi=U[15],yi=U[16],_i=U[17])):((Oi=Tt*Me+St*Re+Ct*Ie)<Ci&&(Ci=Oi,Mi=0),-Oi<Ci&&(Ci=-Oi,Mi=1),(Oi=Ot*Me+Mt*Re+Rt*Ie)<Ci&&(Ci=Oi,Mi=2),-Oi<Ci&&(Ci=-Oi,Mi=3),(Oi=It*Me+Dt*Re+Lt*Ie)<Ci&&(Ci=Oi,Mi=4),-Oi<Ci&&(Ci=-Oi,Mi=5),0==Mi?(ai=j[0],li=j[1],ci=j[2],ui=j[6],hi=j[7],pi=j[8],di=j[9],fi=j[10],mi=j[11],gi=j[3],yi=j[4],_i=j[5]):1==Mi?(ai=j[15],li=j[16],ci=j[17],ui=j[21],hi=j[22],pi=j[23],di=j[18],fi=j[19],mi=j[20],gi=j[12],yi=j[13],_i=j[14]):2==Mi?(ai=j[12],li=j[13],ci=j[14],ui=j[0],hi=j[1],pi=j[2],di=j[3],fi=j[4],mi=j[5],gi=j[15],yi=j[16],_i=j[17]):3==Mi?(ai=j[21],li=j[22],ci=j[23],ui=j[9],hi=j[10],pi=j[11],di=j[6],fi=j[7],mi=j[8],gi=j[18],yi=j[19],_i=j[20]):4==Mi?(ai=j[12],li=j[13],ci=j[14],ui=j[18],hi=j[19],pi=j[20],di=j[6],fi=j[7],mi=j[8],gi=j[0],yi=j[1],_i=j[2]):5==Mi&&(ai=j[3],li=j[4],ci=j[5],ui=j[9],hi=j[10],pi=j[11],di=j[21],fi=j[22],mi=j[23],gi=j[15],yi=j[16],_i=j[17])),this.clipVertices1[0]=ai,this.clipVertices1[1]=li,this.clipVertices1[2]=ci,this.clipVertices1[3]=ui,this.clipVertices1[4]=hi,this.clipVertices1[5]=pi,this.clipVertices1[6]=di,this.clipVertices1[7]=fi,this.clipVertices1[8]=mi,this.clipVertices1[9]=gi,this.clipVertices1[10]=yi,this.clipVertices1[11]=_i,bi=0,B=((Ai=this.clipVertices1[9])-Ve-je)*De+((wi=this.clipVertices1[10])-ze-Ge)*Le+((Pi=this.clipVertices1[11])-Ue-We)*ke;for(var Ri=0;Ri<4;Ri++)xi=3*Ri,V=((Ei=this.clipVertices1[xi])-Ve-je)*De+((Ti=this.clipVertices1[xi+1])-ze-Ge)*Le+((Si=this.clipVertices1[xi+2])-Ue-We)*ke,B>0?V>0?(xi=3*bi,bi++,this.clipVertices2[xi]=Ei,this.clipVertices2[xi+1]=Ti,this.clipVertices2[xi+2]=Si):(xi=3*bi,bi++,si=B/(B-V),this.clipVertices2[xi]=Ai+(Ei-Ai)*si,this.clipVertices2[xi+1]=wi+(Ti-wi)*si,this.clipVertices2[xi+2]=Pi+(Si-Pi)*si):V>0&&(xi=3*bi,bi++,si=B/(B-V),this.clipVertices2[xi]=Ai+(Ei-Ai)*si,this.clipVertices2[xi+1]=wi+(Ti-wi)*si,this.clipVertices2[xi+2]=Pi+(Si-Pi)*si,xi=3*bi,bi++,this.clipVertices2[xi]=Ei,this.clipVertices2[xi+1]=Ti,this.clipVertices2[xi+2]=Si),Ai=Ei,wi=Ti,Pi=Si,B=V;if(0!=(vi=bi)){for(bi=0,xi=3*(vi-1),B=((Ai=this.clipVertices2[xi])-Ve-He)*Fe+((wi=this.clipVertices2[xi+1])-ze-Xe)*Ne+((Pi=this.clipVertices2[xi+2])-Ue-Ye)*Be,Ri=0;Ri<vi;Ri++)xi=3*Ri,V=((Ei=this.clipVertices2[xi])-Ve-He)*Fe+((Ti=this.clipVertices2[xi+1])-ze-Xe)*Ne+((Si=this.clipVertices2[xi+2])-Ue-Ye)*Be,B>0?V>0?(xi=3*bi,bi++,this.clipVertices1[xi]=Ei,this.clipVertices1[xi+1]=Ti,this.clipVertices1[xi+2]=Si):(xi=3*bi,bi++,si=B/(B-V),this.clipVertices1[xi]=Ai+(Ei-Ai)*si,this.clipVertices1[xi+1]=wi+(Ti-wi)*si,this.clipVertices1[xi+2]=Pi+(Si-Pi)*si):V>0&&(xi=3*bi,bi++,si=B/(B-V),this.clipVertices1[xi]=Ai+(Ei-Ai)*si,this.clipVertices1[xi+1]=wi+(Ti-wi)*si,this.clipVertices1[xi+2]=Pi+(Si-Pi)*si,xi=3*bi,bi++,this.clipVertices1[xi]=Ei,this.clipVertices1[xi+1]=Ti,this.clipVertices1[xi+2]=Si),Ai=Ei,wi=Ti,Pi=Si,B=V;if(0!=(vi=bi)){for(bi=0,xi=3*(vi-1),B=((Ai=this.clipVertices1[xi])-Ve+je)*-De+((wi=this.clipVertices1[xi+1])-ze+Ge)*-Le+((Pi=this.clipVertices1[xi+2])-Ue+We)*-ke,Ri=0;Ri<vi;Ri++)xi=3*Ri,V=((Ei=this.clipVertices1[xi])-Ve+je)*-De+((Ti=this.clipVertices1[xi+1])-ze+Ge)*-Le+((Si=this.clipVertices1[xi+2])-Ue+We)*-ke,B>0?V>0?(xi=3*bi,bi++,this.clipVertices2[xi]=Ei,this.clipVertices2[xi+1]=Ti,this.clipVertices2[xi+2]=Si):(xi=3*bi,bi++,si=B/(B-V),this.clipVertices2[xi]=Ai+(Ei-Ai)*si,this.clipVertices2[xi+1]=wi+(Ti-wi)*si,this.clipVertices2[xi+2]=Pi+(Si-Pi)*si):V>0&&(xi=3*bi,bi++,si=B/(B-V),this.clipVertices2[xi]=Ai+(Ei-Ai)*si,this.clipVertices2[xi+1]=wi+(Ti-wi)*si,this.clipVertices2[xi+2]=Pi+(Si-Pi)*si,xi=3*bi,bi++,this.clipVertices2[xi]=Ei,this.clipVertices2[xi+1]=Ti,this.clipVertices2[xi+2]=Si),Ai=Ei,wi=Ti,Pi=Si,B=V;if(0!=(vi=bi)){for(bi=0,xi=3*(vi-1),B=((Ai=this.clipVertices2[xi])-Ve+He)*-Fe+((wi=this.clipVertices2[xi+1])-ze+Xe)*-Ne+((Pi=this.clipVertices2[xi+2])-Ue+Ye)*-Be,Ri=0;Ri<vi;Ri++)xi=3*Ri,V=((Ei=this.clipVertices2[xi])-Ve+He)*-Fe+((Ti=this.clipVertices2[xi+1])-ze+Xe)*-Ne+((Si=this.clipVertices2[xi+2])-Ue+Ye)*-Be,B>0?V>0?(xi=3*bi,bi++,this.clipVertices1[xi]=Ei,this.clipVertices1[xi+1]=Ti,this.clipVertices1[xi+2]=Si):(xi=3*bi,bi++,si=B/(B-V),this.clipVertices1[xi]=Ai+(Ei-Ai)*si,this.clipVertices1[xi+1]=wi+(Ti-wi)*si,this.clipVertices1[xi+2]=Pi+(Si-Pi)*si):V>0&&(xi=3*bi,bi++,si=B/(B-V),this.clipVertices1[xi]=Ai+(Ei-Ai)*si,this.clipVertices1[xi+1]=wi+(Ti-wi)*si,this.clipVertices1[xi+2]=Pi+(Si-Pi)*si,xi=3*bi,bi++,this.clipVertices1[xi]=Ei,this.clipVertices1[xi+1]=Ti,this.clipVertices1[xi+2]=Si),Ai=Ei,wi=Ti,Pi=Si,B=V;if(qe){var Ii=n;n=r,r=Ii}if(0!=(vi=bi)){var Di=n!=t;if(vi>4){De=ai-(Ai=.25*(ai+ui+di+gi)),Le=li-(wi=.25*(li+hi+fi+yi)),ke=ci-(Pi=.25*(ci+pi+mi+_i)),Fe=ui-Ai,Ne=hi-wi,Be=pi-Pi;var Li=0,ki=0,Fi=0,Ni=0,Bi=-this.INF;for(Ci=this.INF,Ri=0;Ri<vi;Ri++)this.used[Ri]=!1,xi=3*Ri,(Oi=(Ai=this.clipVertices1[xi])*De+(wi=this.clipVertices1[xi+1])*Le+(Pi=this.clipVertices1[xi+2])*ke)<Ci&&(Ci=Oi,Li=Ri),Oi>Bi&&(Bi=Oi,Fi=Ri);for(this.used[Li]=!0,this.used[Fi]=!0,Bi=-this.INF,Ci=this.INF,Ri=0;Ri<vi;Ri++)this.used[Ri]||(xi=3*Ri,(Oi=(Ai=this.clipVertices1[xi])*Fe+(wi=this.clipVertices1[xi+1])*Ne+(Pi=this.clipVertices1[xi+2])*Be)<Ci&&(Ci=Oi,ki=Ri),Oi>Bi&&(Bi=Oi,Ni=Ri));xi=3*Li,(Oi=((Ai=this.clipVertices1[xi])-Ve)*Me+((wi=this.clipVertices1[xi+1])-ze)*Re+((Pi=this.clipVertices1[xi+2])-Ue)*Ie)<0&&i.addPoint(Ai,wi,Pi,Me,Re,Ie,Oi,Di),xi=3*ki,(Oi=((Ai=this.clipVertices1[xi])-Ve)*Me+((wi=this.clipVertices1[xi+1])-ze)*Re+((Pi=this.clipVertices1[xi+2])-Ue)*Ie)<0&&i.addPoint(Ai,wi,Pi,Me,Re,Ie,Oi,Di),xi=3*Fi,(Oi=((Ai=this.clipVertices1[xi])-Ve)*Me+((wi=this.clipVertices1[xi+1])-ze)*Re+((Pi=this.clipVertices1[xi+2])-Ue)*Ie)<0&&i.addPoint(Ai,wi,Pi,Me,Re,Ie,Oi,Di),xi=3*Ni,(Oi=((Ai=this.clipVertices1[xi])-Ve)*Me+((wi=this.clipVertices1[xi+1])-ze)*Re+((Pi=this.clipVertices1[xi+2])-Ue)*Ie)<0&&i.addPoint(Ai,wi,Pi,Me,Re,Ie,Oi,Di)}else for(Ri=0;Ri<vi;Ri++)xi=3*Ri,(Oi=((Ai=this.clipVertices1[xi])-Ve)*Me+((wi=this.clipVertices1[xi+1])-ze)*Re+((Pi=this.clipVertices1[xi+2])-Ue)*Ie)<0&&i.addPoint(Ai,wi,Pi,Me,Re,Ie,Oi,Di)}}}}}}},o.SphereBoxCollisionDetector=function(t){o.CollisionDetector.call(this),this.flip=t},o.SphereBoxCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.SphereBoxCollisionDetector.prototype.constructor=o.SphereBoxCollisionDetector,o.SphereBoxCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var s,a,l,c,u,h=r.dimentions,p=n.position,d=p.x,f=p.y,m=p.z,g=r.position,y=g.x,_=g.y,v=g.z,b=n.radius,x=r.halfWidth,A=r.halfHeight,w=r.halfDepth,P=d-y,E=f-_,T=m-v,S=h[0]*P+h[1]*E+h[2]*T,C=h[3]*P+h[4]*E+h[5]*T,O=h[6]*P+h[7]*E+h[8]*T,M=0;S>x?S=x:S<-x?S=-x:M=1,C>A?C=A:C<-A?C=-A:M|=2,O>w?O=w:O<-w?O=-w:M|=4,7==M?(T=O<0?w+O:w-O,(P=S<0?x+S:x-S)<(E=C<0?A+C:A-C)?P<T?(c=P-x,S<0?(S=-x,P=h[0],E=h[1],T=h[2]):(S=x,P=-h[0],E=-h[1],T=-h[2])):(c=T-w,O<0?(O=-w,P=h[6],E=h[7],T=h[8]):(O=w,P=-h[6],E=-h[7],T=-h[8])):E<T?(c=E-A,C<0?(C=-A,P=h[3],E=h[4],T=h[5]):(C=A,P=-h[3],E=-h[4],T=-h[5])):(c=T-w,O<0?(O=-w,P=h[6],E=h[7],T=h[8]):(O=w,P=-h[6],E=-h[7],T=-h[8])),s=y+S*h[0]+C*h[3]+O*h[6],a=_+S*h[1]+C*h[4]+O*h[7],l=v+S*h[2]+C*h[5]+O*h[8],i.addPoint(d+b*P,f+b*E,m+b*T,P,E,T,c-b,this.flip)):(s=y+S*h[0]+C*h[3]+O*h[6],a=_+S*h[1]+C*h[4]+O*h[7],l=v+S*h[2]+C*h[5]+O*h[8],(c=(P=s-p.x)*P+(E=a-p.y)*E+(T=l-p.z)*T)>0&&c<b*b&&(P*=u=1/(c=o.sqrt(c)),E*=u,T*=u,i.addPoint(d+b*P,f+b*E,m+b*T,P,E,T,c-b,this.flip)))},o.SphereSphereCollisionDetector=function(){o.CollisionDetector.call(this)},o.SphereSphereCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.SphereSphereCollisionDetector.prototype.constructor=o.SphereSphereCollisionDetector,o.SphereSphereCollisionDetector.prototype.detectCollision=function(t,e,i){var n=t,r=e,s=n.position,a=r.position,l=a.x-s.x,c=a.y-s.y,u=a.z-s.z,h=l*l+c*c+u*u,p=n.radius,d=p+r.radius;if(h>0&&h<d*d){var f=1/(h=o.sqrt(h));l*=f,c*=f,u*=f,i.addPoint(s.x+l*p,s.y+c*p,s.z+u*p,l,c,u,h-d,!1)}},o.BoxCylinderCollisionDetector=function(t){o.CollisionDetector.call(this),this.flip=t},o.BoxCylinderCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.BoxCylinderCollisionDetector.prototype.constructor=o.BoxCylinderCollisionDetector,o.BoxCylinderCollisionDetector.prototype.getSep=function(t,e,i,n,r){var s,a,l,c,u,h,p,d,f,m,g,y,_,v=new o.Vec3,b=t.position.x,x=t.position.y,A=t.position.z,w=e.position.x,P=e.position.y,E=e.position.z,T=w-b,S=P-x,C=E-A;T*T+S*S+C*C==0&&(S=.001);var O=-T,M=-S,R=-C;this.supportPointB(t,-O,-M,-R,v);var I=v.x,D=v.y,L=v.z;this.supportPointC(e,O,M,R,v);var k=v.x,F=v.y,N=v.z,B=k-I,V=F-D,z=N-L;if(B*O+V*M+z*R<=0)return!1;if((O=V*C-z*S)*O+(M=z*T-B*C)*M+(R=B*S-V*T)*R==0)return i.init(B-T,V-S,z-C),i.normalize(i),n.init(.5*(I+k),.5*(D+F),.5*(L+N)),!0;this.supportPointB(t,-O,-M,-R,v);var U=v.x,j=v.y,G=v.z;this.supportPointC(e,O,M,R,v);var W=v.x,H=v.y,X=v.z,Y=W-U,q=H-j,K=X-G;if(Y*O+q*M+K*R<=0)return!1;(O=(a=V-S)*(h=K-C)-(l=z-C)*(u=q-S))*T+(M=l*(c=Y-T)-(s=B-T)*h)*S+(R=s*u-a*c)*C>0&&(s=B,a=V,l=z,B=Y,V=q,z=K,Y=s,q=a,K=l,s=I,a=D,l=L,I=U,D=j,L=G,U=s,j=a,G=l,s=k,a=F,l=N,k=W,F=H,N=X,W=s,H=a,X=l,O=-O,M=-M,R=-R);for(var Q=0;;){if(++Q>100)return!1;this.supportPointB(t,-O,-M,-R,v);var Z=v.x,J=v.y,$=v.z;this.supportPointC(e,O,M,R,v);var tt=v.x,et=v.y,it=v.z,nt=tt-Z,rt=et-J,ot=it-$;if(nt*O+rt*M+ot*R<=0)return!1;if((V*ot-z*rt)*T+(z*nt-B*ot)*S+(B*rt-V*nt)*C<0)Y=nt,q=rt,K=ot,U=Z,j=J,G=$,W=tt,H=et,X=it,O=(a=V-S)*(h=ot-C)-(l=z-C)*(u=rt-S),M=l*(c=nt-T)-(s=B-T)*h,R=s*u-a*c;else if((rt*K-ot*q)*T+(ot*Y-nt*K)*S+(nt*q-rt*Y)*C<0)B=nt,V=rt,z=ot,I=Z,D=J,L=$,k=tt,F=et,N=it,O=(a=rt-S)*(h=K-C)-(l=ot-C)*(u=q-S),M=l*(c=Y-T)-(s=nt-T)*h,R=s*u-a*c;else for(var st=!1;;){if(O=(a=q-V)*(h=ot-z)-(l=K-z)*(u=rt-V),M=l*(c=nt-B)-(s=Y-B)*h,R=s*u-a*c,(O*=p=1/o.sqrt(O*O+M*M+R*R))*B+(M*=p)*V+(R*=p)*z>=0&&!st){var at=(V*K-z*q)*nt+(z*Y-B*K)*rt+(B*q-V*Y)*ot,lt=(rt*K-ot*q)*T+(ot*Y-nt*K)*S+(nt*q-rt*Y)*C,ct=(S*z-C*V)*nt+(C*B-T*z)*rt+(T*V-S*B)*ot,ut=(q*z-K*V)*T+(K*B-Y*z)*S+(Y*V-q*B)*C,ht=at+lt+ct+ut;ht<=0&&(at=0,ht=(lt=(q*ot-K*rt)*O+(K*nt-Y*ot)*M+(Y*rt-q*nt)*R)+(ct=(rt*K-ot*q)*O+(ot*Y-nt*K)*M+(nt*q-rt*Y)*R)+(ut=(V*K-z*q)*O+(z*Y-B*K)*M+(B*q-V*Y)*R));var pt=1/ht;d=(b*at+I*lt+U*ct+Z*ut)*pt,f=(x*at+D*lt+j*ct+J*ut)*pt,m=(A*at+L*lt+G*ct+$*ut)*pt,g=(w*at+k*lt+W*ct+tt*ut)*pt,y=(P*at+F*lt+H*ct+et*ut)*pt,_=(E*at+N*lt+X*ct+it*ut)*pt,st=!0}this.supportPointB(t,-O,-M,-R,v);var dt=v.x,ft=v.y,mt=v.z;this.supportPointC(e,O,M,R,v);var gt=v.x,yt=v.y,_t=v.z,vt=gt-dt,bt=yt-ft,xt=_t-mt,At=-(vt*O+bt*M+xt*R);if((vt-nt)*O+(bt-rt)*M+(xt-ot)*R<=.01||At>=0)return!!st&&(i.init(-O,-M,-R),n.init(.5*(d+g),.5*(f+y),.5*(m+_)),r.x=At,!0);(bt*z-xt*V)*T+(xt*B-vt*z)*S+(vt*V-bt*B)*C<0?(bt*K-xt*q)*T+(xt*Y-vt*K)*S+(vt*q-bt*Y)*C<0?(B=vt,V=bt,z=xt,I=dt,D=ft,L=mt,k=gt,F=yt,N=_t):(nt=vt,rt=bt,ot=xt,Z=dt,J=ft,$=mt,tt=gt,et=yt,it=_t):(bt*ot-xt*rt)*T+(xt*nt-vt*ot)*S+(vt*rt-bt*nt)*C<0?(Y=vt,q=bt,K=xt,U=dt,j=ft,G=mt,W=gt,H=yt,X=_t):(B=vt,V=bt,z=xt,I=dt,D=ft,L=mt,k=gt,F=yt,N=_t)}}},o.BoxCylinderCollisionDetector.prototype.supportPointB=function(t,e,i,n,r){var o,s,a,l=t.rotation.elements,c=l[0]*e+l[3]*i+l[6]*n,u=l[1]*e+l[4]*i+l[7]*n,h=l[2]*e+l[5]*i+l[8]*n,p=t.halfWidth,d=t.halfHeight,f=t.halfDepth;o=c<0?-p:p,s=u<0?-d:d,a=h<0?-f:f,c=l[0]*o+l[1]*s+l[2]*a+t.position.x,u=l[3]*o+l[4]*s+l[5]*a+t.position.y,h=l[6]*o+l[7]*s+l[8]*a+t.position.z,r.init(c,u,h)},o.BoxCylinderCollisionDetector.prototype.supportPointC=function(t,e,i,n,r){var s,a,l,c=t.rotation.elements,u=c[0]*e+c[3]*i+c[6]*n,h=c[1]*e+c[4]*i+c[7]*n,p=c[2]*e+c[5]*i+c[8]*n,d=u,f=p,m=d*d+f*f,g=t.radius,y=t.halfHeight;0==m?h<0?(s=g,a=-y,l=0):(s=g,a=y,l=0):(m=t.radius/o.sqrt(m),h<0?(s=d*m,a=-y,l=f*m):(s=d*m,a=y,l=f*m)),u=c[0]*s+c[1]*a+c[2]*l+t.position.x,h=c[3]*s+c[4]*a+c[5]*l+t.position.y,p=c[6]*s+c[7]*a+c[8]*l+t.position.z,r.init(u,h,p)},o.BoxCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var s=new o.Vec3,a=new o.Vec3,l=new o.Vec3;if(this.getSep(n,r,s,a,l)){var c=n.position.x,u=n.position.y,h=n.position.z,p=r.position.x,d=r.position.y,f=r.position.z,m=n.halfWidth,g=n.halfHeight,y=n.halfDepth,_=r.halfHeight,v=r.radius,b=n.dimentions,x=b[0],A=b[1],w=b[2],P=b[3],E=b[4],T=b[5],S=b[6],C=b[7],O=b[8],M=b[9],R=b[10],I=b[11],D=b[12],L=b[13],k=b[14],F=b[15],N=b[16],B=b[17],V=r.normalDirection.x,z=r.normalDirection.y,U=r.normalDirection.z,j=r.halfDirection.x,G=r.halfDirection.y,W=r.halfDirection.z,H=s.x,X=s.y,Y=s.z,q=H*x+X*A+Y*w,K=H*P+X*E+Y*T,Q=H*S+X*C+Y*O,Z=H*V+X*z+Y*U,J=q>0,$=K>0,tt=Q>0,et=Z>0;J||(q=-q),$||(K=-K),tt||(Q=-Q),et||(Z=-Z);var it,nt,rt,ot,st,at,lt,ct,ut,ht,pt,dt,ft,mt,gt,yt,_t,vt,bt,xt,At,wt,Pt,Et,Tt,St,Ct,Ot,Mt,Rt,It,Dt,Lt,kt,Ft,Nt,Bt,Vt,zt,Ut,jt,Gt,Wt,Ht,Xt,Yt,qt,Kt,Qt,Zt,Jt,$t,te,ee=0;if(Z>.999?ee=q>.999?q>Z?1:4:K>.999?K>Z?2:4:Q>.999&&Q>Z?3:4:q>.999?ee=1:K>.999?ee=2:Q>.999&&(ee=3),0==ee)i.addPoint(a.x,a.y,a.z,H,X,Y,l.x,this.flip);else if(4==ee){var ie,ne,re,oe,se,ae,le,ce,ue,he,pe,de;et?(ot=p-j,st=d-G,at=f-W,H=-V,X=-z,Y=-U):(ot=p+j,st=d+G,at=f+W,H=V,X=z,Y=U),ee=0,(Wt=x*H+A*X+w*Y)<(xt=1)&&(xt=Wt,ee=0),-Wt<xt&&(xt=-Wt,ee=1),(Wt=P*H+E*X+T*Y)<xt&&(xt=Wt,ee=2),-Wt<xt&&(xt=-Wt,ee=3),(Wt=S*H+C*X+O*Y)<xt&&(xt=Wt,ee=4),-Wt<xt&&(xt=-Wt,ee=5);var fe=n.elements;switch(ee){case 0:ie=fe[0],ne=fe[1],re=fe[2],oe=fe[6],se=fe[7],ae=fe[8],le=fe[9],ce=fe[10],ue=fe[11],he=fe[3],pe=fe[4],de=fe[5];break;case 1:ie=fe[15],ne=fe[16],re=fe[17],oe=fe[21],se=fe[22],ae=fe[23],le=fe[18],ce=fe[19],ue=fe[20],he=fe[12],pe=fe[13],de=fe[14];break;case 2:ie=fe[12],ne=fe[13],re=fe[14],oe=fe[0],se=fe[1],ae=fe[2],le=fe[3],ce=fe[4],ue=fe[5],he=fe[15],pe=fe[16],de=fe[17];break;case 3:ie=fe[21],ne=fe[22],re=fe[23],oe=fe[9],se=fe[10],ae=fe[11],le=fe[6],ce=fe[7],ue=fe[8],he=fe[18],pe=fe[19],de=fe[20];break;case 4:ie=fe[12],ne=fe[13],re=fe[14],oe=fe[18],se=fe[19],ae=fe[20],le=fe[6],ce=fe[7],ue=fe[8],he=fe[0],pe=fe[1],de=fe[2];break;case 5:ie=fe[3],ne=fe[4],re=fe[5],oe=fe[9],se=fe[10],ae=fe[11],le=fe[21],ce=fe[22],ue=fe[23],he=fe[15],pe=fe[16],de=fe[17]}(bt=H*(ie-ot)+X*(ne-st)+Y*(re-at))<=0&&i.addPoint(ie,ne,re,-H,-X,-Y,bt,this.flip),(bt=H*(oe-ot)+X*(se-st)+Y*(ae-at))<=0&&i.addPoint(oe,se,ae,-H,-X,-Y,bt,this.flip),(bt=H*(le-ot)+X*(ce-st)+Y*(ue-at))<=0&&i.addPoint(le,ce,ue,-H,-X,-Y,bt,this.flip),(bt=H*(he-ot)+X*(pe-st)+Y*(de-at))<=0&&i.addPoint(he,pe,de,-H,-X,-Y,bt,this.flip)}else{switch(ee){case 1:J?(it=c+M,nt=u+R,rt=h+I,H=x,X=A,Y=w):(it=c-M,nt=u-R,rt=h-I,H=-x,X=-A,Y=-w),Yt=P,qt=E,Kt=T,$t=g,Qt=S,Zt=C,Jt=O,te=y;break;case 2:$?(it=c+D,nt=u+L,rt=h+k,H=P,X=E,Y=T):(it=c-D,nt=u-L,rt=h-k,H=-P,X=-E,Y=-T),Yt=x,qt=A,Kt=w,$t=m,Qt=S,Zt=C,Jt=O,te=y;break;case 3:tt?(it=c+F,nt=u+N,rt=h+B,H=S,X=C,Y=O):(it=c-F,nt=u-N,rt=h-B,H=-S,X=-C,Y=-O),Yt=x,qt=A,Kt=w,$t=m,Qt=P,Zt=E,Jt=T,te=g}if(ot=p+(At=(xt=H*V+X*z+Y*U)<0?_:-_)*V,st=d+At*z,at=f+At*U,Z>=.999999?(wt=-X,Pt=Y,Et=H):(wt=H,Pt=X,Et=Y),St=(At=wt*V+Pt*z+Et*U)*V-wt,Ct=At*z-Pt,Ot=At*U-Et,0==(At=o.sqrt(St*St+Ct*Ct+Ot*Ot)))return;if(wt=ot+(St*=At=v/At),Pt=st+(Ct*=At),Et=at+(Ot*=At),xt<-.96||xt>.96)lt=V*V*1.5-.5,ct=V*z*1.5-.866025403*U,ut=V*U*1.5+.866025403*z,ht=z*V*1.5+.866025403*U,pt=z*z*1.5-.5,dt=z*U*1.5-.866025403*V,ft=U*V*1.5-.866025403*z,mt=U*z*1.5+.866025403*V,gt=U*U*1.5-.5,(Vt=Yt*(wt=(yt=wt)-(bt=H*(yt-it)+X*((_t=Pt)-nt)+Y*((vt=Et)-rt))*H-it)+qt*(Pt=_t-bt*X-nt)+Kt*(Et=vt-bt*Y-rt))<-$t?Vt=-$t:Vt>$t&&(Vt=$t),(Gt=Qt*wt+Zt*Pt+Jt*Et)<-te?Gt=-te:Gt>te&&(Gt=te),yt=it+(wt=Vt*Yt+Gt*Qt),_t=nt+(Pt=Vt*qt+Gt*Zt),vt=rt+(Et=Vt*Kt+Gt*Jt),i.addPoint(yt,_t,vt,H,X,Y,bt,this.flip),_t=St*ht+Ct*pt+Ot*dt,vt=St*ft+Ct*mt+Ot*gt,(bt=H*((yt=(St=yt=St*lt+Ct*ct+Ot*ut)+ot)-it)+X*((_t=(Ct=_t)+st)-nt)+Y*((vt=(Ot=vt)+at)-rt))<=0&&((Vt=Yt*(wt=yt-bt*H-it)+qt*(Pt=_t-bt*X-nt)+Kt*(Et=vt-bt*Y-rt))<-$t?Vt=-$t:Vt>$t&&(Vt=$t),(Gt=Qt*wt+Zt*Pt+Jt*Et)<-te?Gt=-te:Gt>te&&(Gt=te),yt=it+(wt=Vt*Yt+Gt*Qt),_t=nt+(Pt=Vt*qt+Gt*Zt),vt=rt+(Et=Vt*Kt+Gt*Jt),i.addPoint(yt,_t,vt,H,X,Y,bt,this.flip)),_t=St*ht+Ct*pt+Ot*dt,vt=St*ft+Ct*mt+Ot*gt,(bt=H*((yt=(St=yt=St*lt+Ct*ct+Ot*ut)+ot)-it)+X*((_t=(Ct=_t)+st)-nt)+Y*((vt=(Ot=vt)+at)-rt))<=0&&((Vt=Yt*(wt=yt-bt*H-it)+qt*(Pt=_t-bt*X-nt)+Kt*(Et=vt-bt*Y-rt))<-$t?Vt=-$t:Vt>$t&&(Vt=$t),(Gt=Qt*wt+Zt*Pt+Jt*Et)<-te?Gt=-te:Gt>te&&(Gt=te),yt=it+(wt=Vt*Yt+Gt*Qt),_t=nt+(Pt=Vt*qt+Gt*Zt),vt=rt+(Et=Vt*Kt+Gt*Jt),i.addPoint(yt,_t,vt,H,X,Y,bt,this.flip));else{if(Ft=wt,xt>0?(zt=wt+2*j,Ut=Pt+2*G,jt=Et+2*W):(zt=wt-2*j,Ut=Pt-2*G,jt=Et-2*W),wt=(zt-=(Gt=H*(zt-it)+X*(Ut-nt)+Y*(jt-rt))*H)-(Ft-=(Vt=H*(Ft-it)+X*((Nt=Pt)-nt)+Y*((Bt=Et)-rt))*H),Pt=(Ut-=Gt*X)-(Nt-=Vt*X),Et=(jt-=Gt*Y)-(Bt-=Vt*Y),Tt=Gt-Vt,Ht=(K=(Dt=zt-it)*Yt+(Lt=Ut-nt)*qt+(kt=jt-rt)*Kt)-$t,(Wt=(q=(Mt=Ft-it)*Yt+(Rt=Nt-nt)*qt+(It=Bt-rt)*Kt)-$t)>0){if(Ht>0)return;q=(Mt=(Ft+=wt*(Xt=Wt/(Wt-Ht)))-it)*Yt+(Rt=(Nt+=Pt*Xt)-nt)*qt+(It=(Bt+=Et*Xt)-rt)*Kt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=Gt-(Vt+=Tt*Xt)}else Ht>0&&(K=(Dt=(zt=Ft+wt*(Xt=Wt/(Wt-Ht)))-it)*Yt+(Lt=(Ut=Nt+Pt*Xt)-nt)*qt+(kt=(jt=Bt+Et*Xt)-rt)*Kt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=(Gt=Vt+Tt*Xt)-Vt);if(Ht=K+$t,(Wt=q+$t)<0){if(Ht<0)return;Mt=(Ft+=wt*(Xt=Wt/(Wt-Ht)))-it,Rt=(Nt+=Pt*Xt)-nt,It=(Bt+=Et*Xt)-rt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=Gt-(Vt+=Tt*Xt)}else Ht<0&&(Dt=(zt=Ft+wt*(Xt=Wt/(Wt-Ht)))-it,Lt=(Ut=Nt+Pt*Xt)-nt,kt=(jt=Bt+Et*Xt)-rt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=(Gt=Vt+Tt*Xt)-Vt);if(Ht=(K=Dt*Qt+Lt*Zt+kt*Jt)-te,(Wt=(q=Mt*Qt+Rt*Zt+It*Jt)-te)>0){if(Ht>0)return;q=(Mt=(Ft+=wt*(Xt=Wt/(Wt-Ht)))-it)*Qt+(Rt=(Nt+=Pt*Xt)-nt)*Zt+(It=(Bt+=Et*Xt)-rt)*Jt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=Gt-(Vt+=Tt*Xt)}else Ht>0&&(K=(Dt=(zt=Ft+wt*(Xt=Wt/(Wt-Ht)))-it)*Qt+(Lt=(Ut=Nt+Pt*Xt)-nt)*Zt+(kt=(jt=Bt+Et*Xt)-rt)*Jt,wt=zt-Ft,Pt=Ut-Nt,Et=jt-Bt,Tt=(Gt=Vt+Tt*Xt)-Vt);if(Ht=K+te,(Wt=q+te)<0){if(Ht<0)return;Ft+=wt*(Xt=Wt/(Wt-Ht)),Nt+=Pt*Xt,Bt+=Et*Xt,Vt+=Tt*Xt}else Ht<0&&(zt=Ft+wt*(Xt=Wt/(Wt-Ht)),Ut=Nt+Pt*Xt,jt=Bt+Et*Xt,Gt=Vt+Tt*Xt);Vt<0&&i.addPoint(Ft,Nt,Bt,H,X,Y,Vt,this.flip),Gt<0&&i.addPoint(zt,Ut,jt,H,X,Y,Gt,this.flip)}}}},o.CylinderCylinderCollisionDetector=function(){o.CollisionDetector.call(this)},o.CylinderCylinderCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.CylinderCylinderCollisionDetector.prototype.constructor=o.CylinderCylinderCollisionDetector,o.CylinderCylinderCollisionDetector.prototype.getSep=function(t,e,i,n,r){var s,a,l,c,u,h,p,d,f,m,g,y,_,v=new o.Vec3,b=t.position.x,x=t.position.y,A=t.position.z,w=e.position.x,P=e.position.y,E=e.position.z,T=w-b,S=P-x,C=E-A;T*T+S*S+C*C==0&&(S=.001);var O=-T,M=-S,R=-C;this.supportPoint(t,-O,-M,-R,v);var I=v.x,D=v.y,L=v.z;this.supportPoint(e,O,M,R,v);var k=v.x,F=v.y,N=v.z,B=k-I,V=F-D,z=N-L;if(B*O+V*M+z*R<=0)return!1;if((O=V*C-z*S)*O+(M=z*T-B*C)*M+(R=B*S-V*T)*R==0)return i.init(B-T,V-S,z-C),i.normalize(i),n.init(.5*(I+k),.5*(D+F),.5*(L+N)),!0;this.supportPoint(t,-O,-M,-R,v);var U=v.x,j=v.y,G=v.z;this.supportPoint(e,O,M,R,v);var W=v.x,H=v.y,X=v.z,Y=W-U,q=H-j,K=X-G;if(Y*O+q*M+K*R<=0)return!1;(O=(a=V-S)*(h=K-C)-(l=z-C)*(u=q-S))*T+(M=l*(c=Y-T)-(s=B-T)*h)*S+(R=s*u-a*c)*C>0&&(s=B,a=V,l=z,B=Y,V=q,z=K,Y=s,q=a,K=l,s=I,a=D,l=L,I=U,D=j,L=G,U=s,j=a,G=l,s=k,a=F,l=N,k=W,F=H,N=X,W=s,H=a,X=l,O=-O,M=-M,R=-R);for(var Q=0;;){if(++Q>100)return!1;this.supportPoint(t,-O,-M,-R,v);var Z=v.x,J=v.y,$=v.z;this.supportPoint(e,O,M,R,v);var tt=v.x,et=v.y,it=v.z,nt=tt-Z,rt=et-J,ot=it-$;if(nt*O+rt*M+ot*R<=0)return!1;if((V*ot-z*rt)*T+(z*nt-B*ot)*S+(B*rt-V*nt)*C<0)Y=nt,q=rt,K=ot,U=Z,j=J,G=$,W=tt,H=et,X=it,O=(a=V-S)*(h=ot-C)-(l=z-C)*(u=rt-S),M=l*(c=nt-T)-(s=B-T)*h,R=s*u-a*c;else if((rt*K-ot*q)*T+(ot*Y-nt*K)*S+(nt*q-rt*Y)*C<0)B=nt,V=rt,z=ot,I=Z,D=J,L=$,k=tt,F=et,N=it,O=(a=rt-S)*(h=K-C)-(l=ot-C)*(u=q-S),M=l*(c=Y-T)-(s=nt-T)*h,R=s*u-a*c;else for(var st=!1;;){if(O=(a=q-V)*(h=ot-z)-(l=K-z)*(u=rt-V),M=l*(c=nt-B)-(s=Y-B)*h,R=s*u-a*c,(O*=p=1/o.sqrt(O*O+M*M+R*R))*B+(M*=p)*V+(R*=p)*z>=0&&!st){var at=(V*K-z*q)*nt+(z*Y-B*K)*rt+(B*q-V*Y)*ot,lt=(rt*K-ot*q)*T+(ot*Y-nt*K)*S+(nt*q-rt*Y)*C,ct=(S*z-C*V)*nt+(C*B-T*z)*rt+(T*V-S*B)*ot,ut=(q*z-K*V)*T+(K*B-Y*z)*S+(Y*V-q*B)*C,ht=at+lt+ct+ut;ht<=0&&(at=0,ht=(lt=(q*ot-K*rt)*O+(K*nt-Y*ot)*M+(Y*rt-q*nt)*R)+(ct=(rt*K-ot*q)*O+(ot*Y-nt*K)*M+(nt*q-rt*Y)*R)+(ut=(V*K-z*q)*O+(z*Y-B*K)*M+(B*q-V*Y)*R));var pt=1/ht;d=(b*at+I*lt+U*ct+Z*ut)*pt,f=(x*at+D*lt+j*ct+J*ut)*pt,m=(A*at+L*lt+G*ct+$*ut)*pt,g=(w*at+k*lt+W*ct+tt*ut)*pt,y=(P*at+F*lt+H*ct+et*ut)*pt,_=(E*at+N*lt+X*ct+it*ut)*pt,st=!0}this.supportPoint(t,-O,-M,-R,v);var dt=v.x,ft=v.y,mt=v.z;this.supportPoint(e,O,M,R,v);var gt=v.x,yt=v.y,_t=v.z,vt=gt-dt,bt=yt-ft,xt=_t-mt,At=-(vt*O+bt*M+xt*R);if((vt-nt)*O+(bt-rt)*M+(xt-ot)*R<=.01||At>=0)return!!st&&(i.init(-O,-M,-R),n.init(.5*(d+g),.5*(f+y),.5*(m+_)),r.x=At,!0);(bt*z-xt*V)*T+(xt*B-vt*z)*S+(vt*V-bt*B)*C<0?(bt*K-xt*q)*T+(xt*Y-vt*K)*S+(vt*q-bt*Y)*C<0?(B=vt,V=bt,z=xt,I=dt,D=ft,L=mt,k=gt,F=yt,N=_t):(nt=vt,rt=bt,ot=xt,Z=dt,J=ft,$=mt,tt=gt,et=yt,it=_t):(bt*ot-xt*rt)*T+(xt*nt-vt*ot)*S+(vt*rt-bt*nt)*C<0?(Y=vt,q=bt,K=xt,U=dt,j=ft,G=mt,W=gt,H=yt,X=_t):(B=vt,V=bt,z=xt,I=dt,D=ft,L=mt,k=gt,F=yt,N=_t)}}},o.CylinderCylinderCollisionDetector.prototype.supportPoint=function(t,e,i,n,r){var s,a,l,c=t.rotation.elements,u=c[0]*e+c[3]*i+c[6]*n,h=c[1]*e+c[4]*i+c[7]*n,p=c[2]*e+c[5]*i+c[8]*n,d=u,f=p,m=d*d+f*f,g=t.radius,y=t.halfHeight;0==m?h<0?(s=g,a=-y,l=0):(s=g,a=y,l=0):(m=t.radius/o.sqrt(m),h<0?(s=d*m,a=-y,l=f*m):(s=d*m,a=y,l=f*m)),u=c[0]*s+c[1]*a+c[2]*l+t.position.x,h=c[3]*s+c[4]*a+c[5]*l+t.position.y,p=c[6]*s+c[7]*a+c[8]*l+t.position.z,r.init(u,h,p)},o.CylinderCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r;t.id<e.id?(n=t,r=e):(n=e,r=t);var s,a,l,c,u,h,p,d,f,m,g,y,_,v,b,x,A,w,P,E,T,S=n.position,C=r.position,O=S.x,M=S.y,R=S.z,I=C.x,D=C.y,L=C.z,k=n.halfHeight,F=r.halfHeight,N=n.normalDirection,B=r.normalDirection,V=n.halfDirection,z=r.halfDirection,U=n.radius,j=r.radius,G=N.x,W=N.y,H=N.z,X=B.x,Y=B.y,q=B.z,K=V.x,Q=V.y,Z=V.z,J=z.x,$=z.y,tt=z.z,et=O-I,it=M-D,nt=R-L,rt=new o.Vec3,ot=new o.Vec3,st=new o.Vec3;if(this.getSep(n,r,rt,ot,st)){var at=rt.x*G+rt.y*W+rt.z*H,lt=rt.x*X+rt.y*Y+rt.z*q,ct=at>0,ut=lt>0;ct||(at=-at),ut||(lt=-lt);var ht,pt,dt,ft=0;(at>.999||lt>.999)&&(ft=at>lt?1:2);var mt,gt,yt,_t,vt,bt,xt,At,wt,Pt,Et,Tt,St,Ct,Ot,Mt,Rt=st.x;switch(ht=rt.x,pt=rt.y,dt=rt.z,ft){case 0:i.addPoint(ot.x,ot.y,ot.z,ht,pt,dt,Rt,!1);break;case 1:if(ct?(a=O+K,l=M+Q,c=R+Z,ht=G,pt=W,dt=H):(a=O-K,l=M-Q,c=R-Z,ht=-G,pt=-W,dt=-H),u=I+(s=(P=ht*X+pt*Y+dt*q)<0?F:-F)*X,h=D+s*Y,p=L+s*q,lt>=.999999?(d=-pt,f=dt,m=ht):(d=ht,f=pt,m=dt),et=(s=d*X+f*Y+m*q)*X-d,it=s*Y-f,nt=s*q-m,0==(s=o.sqrt(et*et+it*it+nt*nt)))break;if(d=u+(et*=s=j/s),f=h+(it*=s),m=p+(nt*=s),P<-.96||P>.96)mt=X*X*1.5-.5,gt=X*Y*1.5-.866025403*q,yt=X*q*1.5+.866025403*Y,_t=Y*X*1.5+.866025403*q,vt=Y*Y*1.5-.5,bt=Y*q*1.5-.866025403*X,xt=q*X*1.5-.866025403*Y,At=q*Y*1.5+.866025403*X,wt=q*q*1.5-.5,(s=(d=(Pt=d)-(St=ht*(Pt-a)+pt*((Et=f)-l)+dt*((Tt=m)-c))*ht-a)*d+(f=Et-St*pt-l)*f+(m=Tt-St*dt-c)*m)>U*U&&(d*=s=U/o.sqrt(s),f*=s,m*=s),Pt=a+d,Et=l+f,Tt=c+m,i.addPoint(Pt,Et,Tt,ht,pt,dt,St,!1),Et=et*_t+it*vt+nt*bt,Tt=et*xt+it*At+nt*wt,(St=ht*((Pt=(et=Pt=et*mt+it*gt+nt*yt)+u)-a)+pt*((Et=(it=Et)+h)-l)+dt*((Tt=(nt=Tt)+p)-c))<=0&&((s=(d=Pt-St*ht-a)*d+(f=Et-St*pt-l)*f+(m=Tt-St*dt-c)*m)>U*U&&(d*=s=U/o.sqrt(s),f*=s,m*=s),Pt=a+d,Et=l+f,Tt=c+m,i.addPoint(Pt,Et,Tt,ht,pt,dt,St,!1)),Et=et*_t+it*vt+nt*bt,Tt=et*xt+it*At+nt*wt,(St=ht*((Pt=(et=Pt=et*mt+it*gt+nt*yt)+u)-a)+pt*((Et=(it=Et)+h)-l)+dt*((Tt=(nt=Tt)+p)-c))<=0&&((s=(d=Pt-St*ht-a)*d+(f=Et-St*pt-l)*f+(m=Tt-St*dt-c)*m)>U*U&&(d*=s=U/o.sqrt(s),f*=s,m*=s),Pt=a+d,Et=l+f,Tt=c+m,i.addPoint(Pt,Et,Tt,ht,pt,dt,St,!1));else{if(g=d,P>0?(v=d+X*F*2,b=f+Y*F*2,x=m+q*F*2):(v=d-X*F*2,b=f-Y*F*2,x=m-q*F*2),(Mt=(Ct=(et=a-(g-=(A=ht*(g-a)+pt*((y=f)-l)+dt*((_=m)-c))*ht))*(d=(v-=(w=ht*(v-a)+pt*(b-l)+dt*(x-c))*ht)-g)+(it=l-(y-=A*pt))*(f=(b-=w*pt)-y)+(nt=c-(_-=A*dt))*(m=(x-=w*dt)-_))*Ct-(Ot=d*d+f*f+m*m)*(et*et+it*it+nt*nt-U*U))<0)break;(T=(Ct-(Mt=o.sqrt(Mt)))/Ot)<(E=(Ct+Mt)/Ot)&&(s=E,E=T,T=s),T>1&&(T=1),E<0&&(E=0),d=g+(v-g)*E,f=y+(b-y)*E,m=_+(x-_)*E,v=g+(v-g)*T,b=y+(b-y)*T,x=_+(x-_)*T,g=d,y=f,_=m,s=A+(w-A)*E,w=A+(w-A)*T,(A=s)<0&&i.addPoint(g,y,_,ht,pt,dt,St,!1),w<0&&i.addPoint(v,b,x,ht,pt,dt,St,!1)}break;case 2:if(ut?(u=I-J,h=D-$,p=L-tt,ht=-X,pt=-Y,dt=-q):(u=I+J,h=D+$,p=L+tt,ht=X,pt=Y,dt=q),a=O+(s=(P=ht*G+pt*W+dt*H)<0?k:-k)*G,l=M+s*W,c=R+s*H,at>=.999999?(d=-pt,f=dt,m=ht):(d=ht,f=pt,m=dt),et=(s=d*G+f*W+m*H)*G-d,it=s*W-f,nt=s*H-m,0==(s=o.sqrt(et*et+it*it+nt*nt)))break;if(d=a+(et*=s=U/s),f=l+(it*=s),m=c+(nt*=s),P<-.96||P>.96)mt=G*G*1.5-.5,gt=G*W*1.5-.866025403*H,yt=G*H*1.5+.866025403*W,_t=W*G*1.5+.866025403*H,vt=W*W*1.5-.5,bt=W*H*1.5-.866025403*G,xt=H*G*1.5-.866025403*W,At=H*W*1.5+.866025403*G,wt=H*H*1.5-.5,(s=(d=(Pt=d)-(St=ht*(Pt-u)+pt*((Et=f)-h)+dt*((Tt=m)-p))*ht-u)*d+(f=Et-St*pt-h)*f+(m=Tt-St*dt-p)*m)>j*j&&(d*=s=j/o.sqrt(s),f*=s,m*=s),Pt=u+d,Et=h+f,Tt=p+m,i.addPoint(Pt,Et,Tt,-ht,-pt,-dt,St,!1),Et=et*_t+it*vt+nt*bt,Tt=et*xt+it*At+nt*wt,(St=ht*((Pt=(et=Pt=et*mt+it*gt+nt*yt)+a)-u)+pt*((Et=(it=Et)+l)-h)+dt*((Tt=(nt=Tt)+c)-p))<=0&&((s=(d=Pt-St*ht-u)*d+(f=Et-St*pt-h)*f+(m=Tt-St*dt-p)*m)>j*j&&(d*=s=j/o.sqrt(s),f*=s,m*=s),Pt=u+d,Et=h+f,Tt=p+m,i.addPoint(Pt,Et,Tt,-ht,-pt,-dt,St,!1)),Et=et*_t+it*vt+nt*bt,Tt=et*xt+it*At+nt*wt,(St=ht*((Pt=(et=Pt=et*mt+it*gt+nt*yt)+a)-u)+pt*((Et=(it=Et)+l)-h)+dt*((Tt=(nt=Tt)+c)-p))<=0&&((s=(d=Pt-St*ht-u)*d+(f=Et-St*pt-h)*f+(m=Tt-St*dt-p)*m)>j*j&&(d*=s=j/o.sqrt(s),f*=s,m*=s),Pt=u+d,Et=h+f,Tt=p+m,i.addPoint(Pt,Et,Tt,-ht,-pt,-dt,St,!1));else{if(g=d,P>0?(v=d+G*k*2,b=f+W*k*2,x=m+H*k*2):(v=d-G*k*2,b=f-W*k*2,x=m-H*k*2),(Mt=(Ct=(et=u-(g-=(A=ht*(g-u)+pt*((y=f)-h)+dt*((_=m)-p))*ht))*(d=(v-=(w=ht*(v-u)+pt*(b-h)+dt*(x-p))*ht)-g)+(it=h-(y-=A*pt))*(f=(b-=w*pt)-y)+(nt=p-(_-=A*dt))*(m=(x-=w*dt)-_))*Ct-(Ot=d*d+f*f+m*m)*(et*et+it*it+nt*nt-j*j))<0)break;(T=(Ct-(Mt=o.sqrt(Mt)))/Ot)<(E=(Ct+Mt)/Ot)&&(s=E,E=T,T=s),T>1&&(T=1),E<0&&(E=0),d=g+(v-g)*E,f=y+(b-y)*E,m=_+(x-_)*E,v=g+(v-g)*T,b=y+(b-y)*T,x=_+(x-_)*T,g=d,y=f,_=m,s=A+(w-A)*E,w=A+(w-A)*T,(A=s)<0&&i.addPoint(g,y,_,-ht,-pt,-dt,A,!1),w<0&&i.addPoint(v,b,x,-ht,-pt,-dt,w,!1)}}}},o.SphereCylinderCollisionDetector=function(t){o.CollisionDetector.call(this),this.flip=t},o.SphereCylinderCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.SphereCylinderCollisionDetector.prototype.constructor=o.SphereCylinderCollisionDetector,o.SphereCylinderCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r;this.flip?(n=e,r=t):(n=t,r=e);var s=n.position,a=s.x,l=s.y,c=s.z,u=r.position,h=u.x,p=u.y,d=u.z,f=r.normalDirection.x,m=r.normalDirection.y,g=r.normalDirection.z,y=n.radius,_=r.radius,v=y+_,b=r.halfHeight,x=a-h,A=l-p,w=c-d,P=x*f+A*m+w*g;if(!(P<-b-y||P>b+y)){var E,T=h+P*f,S=p+P*m,C=d+P*g,O=a-T,M=l-S,R=c-C,I=O*O+M*M+R*R;if(!(I>v*v))I>_*_&&(O*=I=_/o.sqrt(I),M*=I,R*=I),P<-b?P=-b:P>b&&(P=b),(I=(x=(T=h+P*f+O)-a)*x+(A=(S=p+P*m+M)-l)*A+(w=(C=d+P*g+R)-c)*w)>0&&I<y*y&&(x*=E=1/(I=o.sqrt(I)),A*=E,w*=E,i.addPoint(a+x*y,l+A*y,c+w*y,x,A,w,I-y,this.flip))}},o.TetraTetraCollisionDetector=function(){o.CollisionDetector.call(this)},o.TetraTetraCollisionDetector.prototype=Object.create(o.CollisionDetector.prototype),o.TetraTetraCollisionDetector.prototype.constructor=o.TetraTetraCollisionDetector,o.TetraTetraCollisionDetector.prototype.detectCollision=function(t,e,i){var n,r,o,s,c,u,h=t.faces,p=t.verts,d=(e.faces,e.verts),f=0,m=h;for(n=0;n<4;n++)for(o=p[n],r=0;r<4;r++)s=d[m[n].a],c=d[m[n].b],u=d[m[n].c],a(l(o.x,o.y),l(s.x,s.y),l(c.x,c.y),l(u.x,u.y))&&a(l(o.x,o.z),l(s.x,s.z),l(c.x,c.z),l(u.x,u.z))&&a(l(o.z,o.y),l(s.z,s.y),l(c.z,c.y),l(u.z,u.y))&&f++,4===f&&i.addPoint(o)},o.AABB=function(t,e,i,r,o,s){this.elements=new n(6);var a=this.elements;a[0]=t||0,a[1]=i||0,a[2]=o||0,a[3]=e||0,a[4]=r||0,a[5]=s||0},o.AABB.prototype={constructor:o.AABB,set:function(t,e,i,n,r,o){var s=this.elements;return s[0]=t,s[3]=e,s[1]=i,s[4]=n,s[2]=r,s[5]=o,this},intersectTest:function(t){var e=this.elements,i=t.elements;return e[0]>i[3]||e[1]>i[4]||e[2]>i[5]||e[3]<i[0]||e[4]<i[1]||e[5]<i[2]},intersectTestTwo:function(t){var e=this.elements,i=t.elements;return e[0]<i[0]||e[1]<i[1]||e[2]<i[2]||e[3]>i[3]||e[4]>i[4]||e[5]>i[5]},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t,e){var i=e||0,n=t.elements;return this.set(n[0]-i,n[3]+i,n[1]-i,n[4]+i,n[2]-i,n[5]+i),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var i=t.elements,n=e.elements,r=this.elements;return r[0]=i[0]<n[0]?i[0]:n[0],r[1]=i[1]<n[1]?i[1]:n[1],r[2]=i[2]<n[2]?i[2]:n[2],r[3]=i[3]>n[3]?i[3]:n[3],r[4]=i[4]>n[4]?i[4]:n[4],r[5]=i[5]>n[5]?i[5]:n[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],i=t[4]-t[1],n=t[5]-t[2];return 2*(e*(i+n)+i*n)},intersectsWithPoint:function(t,e,i){var n=this.elements;return t>=n[0]&&t<=n[3]&&e>=n[1]&&e<=n[4]&&i>=n[2]&&i<=n[5]},setFromPoints:function(t){this.makeEmpty();for(var e=0;e<t.length;e++)this.expandByPoint(t[e])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var e=this.elements;this.set(o.min(e[0],t.x),o.min(e[1],t.y),o.min(e[2],t.z),o.max(e[3],t.x),o.max(e[4],t.y),o.max(e[5],t.z))}},o.Proxy=function(t){this.shape=t,this.aabb=t.aabb},o.Proxy.prototype={constructor:o.Proxy,update:function(){o.Error("Proxy","Inheritance error.")}},o.BasicProxy=function(t){o.Proxy.call(this,t),this.id=o.proxyID++},o.BasicProxy.prototype=Object.create(o.Proxy.prototype),o.BasicProxy.prototype.constructor=o.BasicProxy,o.BasicProxy.prototype.update=function(){},o.BroadPhase=function(){this.types=o.BR_NULL,this.numPairChecks=0,this.numPairs=0,this.pairs=[]},o.BroadPhase.prototype={constructor:o.BroadPhase,createProxy:function(t){o.Error("BroadPhase","Inheritance error.")},addProxy:function(t){o.Error("BroadPhase","Inheritance error.")},removeProxy:function(t){o.Error("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var i,n=t.parent,r=e.parent;if(n==r||!n.isDynamic&&!r.isDynamic||0==(t.belongsTo&e.collidesWith)||0==(e.belongsTo&t.collidesWith))return!1;for(i=n.numJoints<r.numJoints?n.jointLink:r.jointLink;null!==i;){var o=i.joint;if(!o.allowCollision&&(o.body1==n&&o.body2==r||o.body1==r&&o.body2==n))return!1;i=i.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){o.Error("BroadPhase","Inheritance error.")},addPair:function(t,e){var i=new o.Pair(t,e);this.pairs.push(i),this.numPairs++}},o.BruteForceBroadPhase=function(){o.BroadPhase.call(this),this.types=o.BR_BRUTE_FORCE,this.proxies=[]},o.BruteForceBroadPhase.prototype=Object.create(o.BroadPhase.prototype),o.BruteForceBroadPhase.prototype.constructor=o.BruteForceBroadPhase,o.BruteForceBroadPhase.prototype.createProxy=function(t){return new o.BasicProxy(t)},o.BruteForceBroadPhase.prototype.addProxy=function(t){this.proxies.push(t)},o.BruteForceBroadPhase.prototype.removeProxy=function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},o.BruteForceBroadPhase.prototype.collectPairs=function(){var t,e,i,n=0,r=this.proxies,o=r.length;for(this.numPairChecks=o*(o-1)>>1;n<o;)for(e=r[n++],t=n+1;t<o;)i=r[t++],!e.aabb.intersectTest(i.aabb)&&this.isAvailablePair(e.shape,i.shape)&&this.addPair(e.shape,i.shape)},o.Pair=function(t,e){this.shape1=t||null,this.shape2=e||null},o.SAPAxis=function(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new n(64)},o.SAPAxis.prototype={constructor:o.SAPAxis,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var i=[],n=this.numElements;n--;)i[n]=this.elements[n]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var i=-1,n=-1,r=0,o=this.numElements;r<o;r++){var s=this.elements[r];if(s==t||s==e){if(-1!=i){n=r;break}i=r}}for(r=i+1,o=n;r<o;r++)this.elements[r-1]=this.elements[r];for(r=n+1,o=this.numElements;r<o;r++)this.elements[r-2]=this.elements[r];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e!=0;)e++;e=e*this.numElements>>2,t=0;for(var i=!1,n=this.elements,r=1,s=this.numElements;r<s;r++){var a=n[r],l=a.value,c=n[r-1];if(c.value>l){var u=r;do{if(n[u]=c,0==--u)break;c=n[u-1]}while(c.value>l);if(n[u]=a,(t+=r-u)>e){i=!0;break}}}if(i){t=2;var h=this.stack;for(h[0]=0,h[1]=this.numElements-1;t>0;){var p=h[--t],d=h[--t],f=p-d;if(f>16){var m=d+o.floor(.5*f);for(a=n[m],n[m]=n[p],n[p]=a,l=a.value,r=d-1,u=p;;){var g,y;do{g=n[++r]}while(g.value<l);do{y=n[--u]}while(l<y.value&&u!=d);if(r>=u)break;n[r]=y,n[u]=g}n[p]=n[r],n[r]=a,r-d>p-r?(h[t++]=d,h[t++]=r-1,h[t++]=r+1,h[t++]=p):(h[t++]=r+1,h[t++]=p,h[t++]=d,h[t++]=r-1)}else for(r=d+1;r<=p;r++)if(l=(a=n[r]).value,(c=n[r-1]).value>l){u=r;do{if(n[u]=c,0==--u)break;c=n[u-1]}while(c.value>l);n[u]=a}}}},calculateTestCount:function(){for(var t=1,e=0,i=1,n=this.numElements;i<n;i++)this.elements[i].max?t--:(e+=t,t++);return e}},o.SAPBroadPhase=function(){o.BroadPhase.call(this),this.types=o.BR_SWEEP_AND_PRUNE,this.numElementsD=0,this.numElementsS=0,this.axesD=[new o.SAPAxis,new o.SAPAxis,new o.SAPAxis],this.axesS=[new o.SAPAxis,new o.SAPAxis,new o.SAPAxis],this.index1=0,this.index2=1},o.SAPBroadPhase.prototype=Object.create(o.BroadPhase.prototype),o.SAPBroadPhase.prototype.constructor=o.SAPBroadPhase,o.SAPBroadPhase.prototype.createProxy=function(t){return new o.SAPProxy(this,t)},o.SAPBroadPhase.prototype.addProxy=function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},o.SAPBroadPhase.prototype.removeProxy=function(t){var e=t;if(0!=e.belongsTo){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2}e.belongsTo=0}},o.SAPBroadPhase.prototype.collectPairs=function(){if(0!=this.numElementsD){var t,e,i,n,r=this.axesD[this.index1],o=this.axesD[this.index2];r.sort(),o.sort(),r.calculateTestCount()<=o.calculateTestCount()?((o=this.axesS[this.index1]).sort(),t=r.elements,e=o.elements):((r=this.axesS[this.index2]).sort(),t=o.elements,e=r.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var s=0,a=0;s<this.numElementsD;){var l,c;if(a==this.numElementsS)l=t[s],c=!0,s++;else{var u=t[s],h=e[a];u.value<h.value?(l=u,c=!0,s++):(l=h,c=!1,a++)}if(l.max){var p=l.pair;if(c){if(p==i){i=i.pair;continue}l=i}else{if(p==n){n=n.pair;continue}l=n}do{if((_=l.pair)==p){l.pair=_.pair;break}l=_}while(null!=l)}else{for(var d=l.proxy.shape,f=l.min1.value,m=l.max1.value,g=l.min2.value,y=l.max2.value,_=i;null!=_;_=_.pair){var v=_.proxy.shape;this.numPairChecks++,f>_.max1.value||m<_.min1.value||g>_.max2.value||y<_.min2.value||!this.isAvailablePair(d,v)||this.addPair(d,v)}if(c){for(_=n;null!=_;_=_.pair)v=_.proxy.shape,this.numPairChecks++,f>_.max1.value||m<_.min1.value||g>_.max2.value||y<_.min2.value||!this.isAvailablePair(d,v)||this.addPair(d,v);l.pair=i,i=l}else l.pair=n,n=l}}this.index2=3^(this.index1|this.index2)}},o.SAPElement=function(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0},o.SAPProxy=function(t,e){o.Proxy.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new o.SAPElement(this,!1),this.max[0]=new o.SAPElement(this,!0),this.min[1]=new o.SAPElement(this,!1),this.max[1]=new o.SAPElement(this,!0),this.min[2]=new o.SAPElement(this,!1),this.max[2]=new o.SAPElement(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]},o.SAPProxy.prototype=Object.create(o.Proxy.prototype),o.SAPProxy.prototype.constructor=o.SAPProxy,o.SAPProxy.prototype.isDynamic=function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},o.SAPProxy.prototype.update=function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(1==this.belongsTo&&!this.isDynamic()||2==this.belongsTo&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))},o.DBVT=function(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new o.AABB},o.DBVT.prototype={constructor:o.DBVT,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(null!=this.root){for(var e,i,n=t.aabb,r=this.root;null==r.proxy;){var s=r.child1,a=r.child2,l=r.aabb,c=s.aabb,u=a.aabb;e=l.surfaceArea(),this.aabb.combine(n,l);var h=2*(i=this.aabb.surfaceArea()),p=2*(i-e),d=p;this.aabb.combine(n,c),null!=s.proxy?d+=this.aabb.surfaceArea():d+=this.aabb.surfaceArea()-c.surfaceArea();var f=p;if(this.aabb.combine(n,u),null!=a.proxy?f+=this.aabb.surfaceArea():f+=this.aabb.surfaceArea()-u.surfaceArea(),d<f){if(h<d)break;r=s}else{if(h<f)break;r=a}}var m,g=r.parent;(m=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new o.DBVTNode).parent=g,m.child1=t,m.child2=r,m.aabb.combine(t.aabb,r.aabb),m.height=r.height+1,r.parent=m,t.parent=m,r==this.root?this.root=m:g.child1==r?g.child1=m:g.child2=m;do{m=this.balance(m),this.fix(m),m=m.parent}while(null!=m)}else this.root=t},getBalance:function(t){return null!=t.proxy?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t!=this.root){var e,i=t.parent;if(e=i.child1==t?i.child2:i.child1,i==this.root)return this.root=e,void(e.parent=null);var n=i.parent;e.parent=n,n.child1==i?n.child1=e:n.child2=e,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=i);do{n=this.balance(n),this.fix(n),n=n.parent}while(null!=n)}else this.root=null},balance:function(t){var e=t.height;if(e<2)return t;var i,n=t.parent,r=t.child1,o=t.child2,s=r.height,a=o.height,l=s-a;if(l>1){var c=r.child1,u=r.child2,h=c.height,p=u.height;return h>p?(r.child2=t,t.parent=r,t.child1=u,u.parent=t,t.aabb.combine(u.aabb,o.aabb),i=p-a,t.height=p-(i&i>>31)+1,r.aabb.combine(c.aabb,t.aabb),i=h-e,r.height=h-(i&i>>31)+1):(r.child1=t,t.parent=r,t.child1=c,c.parent=t,t.aabb.combine(c.aabb,o.aabb),i=h-a,t.height=h-(i&i>>31)+1,r.aabb.combine(t.aabb,u.aabb),i=e-p,r.height=e-(i&i>>31)+1),null!=n?n.child1==t?n.child1=r:n.child2=r:this.root=r,r.parent=n,r}if(l<-1){var d=o.child1,f=o.child2,m=d.height,g=f.height;return m>g?(o.child2=t,t.parent=o,t.child2=f,f.parent=t,t.aabb.combine(r.aabb,f.aabb),i=s-g,t.height=s-(i&i>>31)+1,o.aabb.combine(d.aabb,t.aabb),i=m-e,o.height=m-(i&i>>31)+1):(o.child1=t,t.parent=o,t.child2=d,d.parent=t,t.aabb.combine(r.aabb,d.aabb),i=s-m,t.height=s-(i&i>>31)+1,o.aabb.combine(t.aabb,f.aabb),i=e-g,o.height=e-(i&i>>31)+1),null!=n?n.child1==t?n.child1=o:n.child2=o:this.root=o,o.parent=n,o}return t},fix:function(t){var e=t.child1,i=t.child2;t.aabb.combine(e.aabb,i.aabb),t.height=e.height<i.height?i.height+1:e.height+1}},o.DBVTBroadPhase=function(){o.BroadPhase.call(this),this.types=o.BR_BOUNDING_VOLUME_TREE,this.tree=new o.DBVT,this.stack=[],this.leaves=[],this.numLeaves=0},o.DBVTBroadPhase.prototype=Object.create(o.BroadPhase.prototype),o.DBVTBroadPhase.prototype.constructor=o.DBVTBroadPhase,o.DBVTBroadPhase.prototype.createProxy=function(t){return new o.DBVTProxy(t)},o.DBVTBroadPhase.prototype.addProxy=function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},o.DBVTBroadPhase.prototype.removeProxy=function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},o.DBVTBroadPhase.prototype.collectPairs=function(){if(!(this.numLeaves<2))for(var t,e=this.numLeaves;e--;)(t=this.leaves[e]).proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,.1),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},o.DBVTBroadPhase.prototype.collide=function(t,e){var i,n,r,o,s,a,l=2;for(this.stack[0]=t,this.stack[1]=e;l>0;)if(r=this.stack[--l],o=this.stack[--l],s=null!=r.proxy,a=null!=o.proxy,this.numPairChecks++,s&&a){if((i=r.proxy.shape)==(n=o.proxy.shape)||i.aabb.intersectTest(n.aabb)||!this.isAvailablePair(i,n))continue;this.addPair(i,n)}else{if(r.aabb.intersectTest(o.aabb))continue;a||!s&&r.aabb.surfaceArea()>o.aabb.surfaceArea()?(this.stack[l++]=r.child1,this.stack[l++]=o,this.stack[l++]=r.child2,this.stack[l++]=o):(this.stack[l++]=r,this.stack[l++]=o.child1,this.stack[l++]=r,this.stack[l++]=o.child2)}},o.DBVTNode=function(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new o.AABB},o.DBVTProxy=function(t){o.Proxy.call(this,t),this.leaf=new o.DBVTNode,this.leaf.proxy=this},o.DBVTProxy.prototype=Object.create(o.Proxy.prototype),o.DBVTProxy.prototype.constructor=o.DBVTProxy,o.DBVTProxy.prototype.update=function(){},o.World.prototype.add=function(t){var e=(t=t||{}).type||"box";if("string"==typeof e&&(e=[e]),"joint"==e[0].substring(0,5)){"joint"===e[0]&&(e[0]="jointHinge");var i,n,r=t.axe1||[1,0,0],s=t.axe2||[1,0,0],a=t.pos1||[0,0,0],l=t.pos2||[0,0,0];a=a.map(function(t){return t*o.INV_SCALE}),l=l.map(function(t){return t*o.INV_SCALE}),"jointDistance"===e[0]?(i=t.min||0,n=t.max||10,i*=o.INV_SCALE,n*=o.INV_SCALE):(i=t.min||57.29578,n=t.max||0,i*=o.degtorad,n*=o.degtorad);var c,u=t.limit||null,h=t.spring||null,p=t.motor||null,d=new o.JointConfig;switch(d.allowCollision=t.collision||!1,d.localAxis1.init(r[0],r[1],r[2]),d.localAxis2.init(s[0],s[1],s[2]),d.localAnchorPoint1.init(a[0],a[1],a[2]),d.localAnchorPoint2.init(l[0],l[1],l[2]),("string"==typeof t.body1||t.body1 instanceof String)&&(t.body1=this.getByName(t.body1)),("string"==typeof t.body2||t.body2 instanceof String)&&(t.body2=this.getByName(t.body2)),d.body1=t.body1,d.body2=t.body2,e[0]){case"jointDistance":c=new o.DistanceJoint(d,i,n),null!==h&&c.limitMotor.setSpring(h[0],h[1]),null!==p&&c.limitMotor.setSpring(p[0],p[1]);break;case"jointHinge":c=new o.HingeJoint(d,i,n),null!==h&&c.limitMotor.setSpring(h[0],h[1]),null!==p&&c.limitMotor.setSpring(p[0],p[1]);break;case"jointPrisme":c=new o.PrismaticJoint(d,i,n);break;case"jointSlide":c=new o.SliderJoint(d,i,n);break;case"jointBall":c=new o.BallAndSocketJoint(d);break;case"jointWheel":c=new o.WheelJoint(d),null!==u&&c.rotationalLimitMotor1.setLimit(u[0],u[1]),null!==h&&c.rotationalLimitMotor1.setSpring(h[0],h[1]),null!==p&&c.rotationalLimitMotor1.setSpring(p[0],p[1])}return c.name=t.name||"",this.addJoint(c),c}var f=t.move||!1,m=t.noSleep||!1,g=t.pos||[0,0,0];g=g.map(function(t){return t*o.INV_SCALE});var y=t.size||[1,1,1];y=y.map(function(t){return t*o.INV_SCALE});var _=t.rot||[0,0,0];_=_.map(function(t){return t*o.degtorad});for(var v=[],b=0;b<_.length/3;b++){var x=o.EulerToAxis(_[b+0],_[b+1],_[b+2]);v.push(x[0]),v.push(x[1]),v.push(x[2]),v.push(x[3])}var A=new o.ShapeConfig;void 0!==t.sc&&(A=t.sc),t.config&&(A.density=void 0===t.config[0]?1:t.config[0],A.friction=void 0===t.config[1]?.4:t.config[1],A.restitution=void 0===t.config[2]?.2:t.config[2],A.belongsTo=t.config[3]||1,A.collidesWith=t.config[4]||4294967295),void 0!==t.density&&(A.density=t.density),void 0!==t.friction&&(A.friction=t.friction),void 0!==t.restitution&&(A.restitution=t.restitution),void 0!==t.belongsTo&&(A.belongsTo=t.belongsTo),void 0!==t.collidesWith&&(A.collidesWith=t.collidesWith),t.massPos&&(t.massPos=t.massPos.map(function(t){return t*o.INV_SCALE}),A.relativePosition.init(t.massPos[0],t.massPos[1],t.massPos[2])),t.massRot&&(t.massRot=t.massRot.map(function(t){return t*o.degtorad}),A.relativeRotation=o.EulerToMatrix(t.massRot[0],t.massRot[1],t.massRot[2]));var w,P,E=new o.RigidBody(g[0],g[1],g[2],v[0],v[1],v[2],v[3]),T=[];for(b=0;b<e.length;b++){switch(w=3*b,P=4*b,e[b]){case"sphere":T[b]=new o.SphereShape(A,y[w]);break;case"cylinder":T[b]=new o.CylinderShape(A,y[w],y[w+1]);break;case"box":T[b]=new o.BoxShape(A,y[w],y[w+1],y[w+2])}E.addShape(T[b]),b>0&&(T[b].relativePosition=new o.Vec3(g[w],g[w+1],g[w+2]),v[P+0]&&(T[b].relativeRotation=[v[P],v[P+1],v[P+2],v[P+3]]))}return f?(t.massPos||t.massRot?E.setupMass(1,!1):E.setupMass(1,!0),E.allowSleep=!m):E.setupMass(2),E.name=t.name||" ",this.addRigidBody(E),E};this.OIMO||(t.exports=o)},"Hi/f":function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return o});var n=i("LMZF");function r(){return"undefined"==typeof window}r()||(window["pdfjs-dist/build/pdf"]=i("EsP8"),i("JPLW"),i("QFDX"),PDFJS.verbosity=PDFJS.VERBOSITY_LEVELS.errors);var o=function(){function t(t){this.element=t,this._renderText=!0,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this.afterLoadComplete=new n.r,this.onError=new n.r,this.onProgress=new n.r,this.pageChange=new n.r(!0),r()||"string"==typeof PDFJS.workerSrc||(PDFJS.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/"+PDFJS.version+"/pdf.worker.min.js")}return t.prototype.ngOnInit=function(){r()||this.setupViewer()},t.prototype.onPageResize=function(){var t=this;this._canAutoResize&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.updateSize()},100))},t.prototype.ngOnChanges=function(t){r()||("src"in t?this.loadPDF():this._pdf&&("renderText"in t&&this.setupViewer(),this.update()))},Object.defineProperty(t.prototype,"page",{set:function(t){t=parseInt(t,10),this._pdf&&!this.isValidPageNumber(t)&&(t=1),this._page=t,this.pageChange.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderText",{set:function(t){this._renderText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalSize",{set:function(t){this._originalSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAll",{set:function(t){this._showAll=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickToPage",{set:function(t){this._stickToPage=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t<=0||(this._zoom=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{set:function(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"externalLinkTarget",{set:function(t){this._externalLinkTarget=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoresize",{set:function(t){this._canAutoResize=Boolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitToPage",{set:function(t){this._fitToPage=Boolean(t)},enumerable:!0,configurable:!0}),t.prototype.setupViewer=function(){PDFJS.disableTextLayer=!this._renderText,t.setExternalLinkTarget(this._externalLinkTarget),this.pdfLinkService=new PDFJS.PDFLinkService;var e={container:this.element.nativeElement.querySelector("div"),removePageBorders:!0,linkService:this.pdfLinkService};this.pdfViewer=new PDFJS.PDFViewer(e),this.pdfLinkService.setViewer(this.pdfViewer)},t.prototype.updateSize=function(){var t=this;this._showAll?this._pdf.getPage(this.pdfViewer.currentPageNumber).then(function(e){var i=e.getViewport(t._zoom,t._rotation),n=t._zoom,r=!0;(!t._originalSize||t._fitToPage&&i.width>t.element.nativeElement.offsetWidth)&&(n=t.getScale(e.getViewport(1).width),r=!t._stickToPage),t.pdfViewer._setScale(n,r)}):this.renderPage(this._page)},t.prototype.isValidPageNumber=function(t){return this._pdf.numPages>=t&&t>=1},t.setExternalLinkTarget=function(t){switch(t){case"blank":PDFJS.externalLinkTarget=PDFJS.LinkTarget.BLANK;break;case"none":PDFJS.externalLinkTarget=PDFJS.LinkTarget.NONE;break;case"self":PDFJS.externalLinkTarget=PDFJS.LinkTarget.SELF;break;case"parent":PDFJS.externalLinkTarget=PDFJS.LinkTarget.PARENT;break;case"top":PDFJS.externalLinkTarget=PDFJS.LinkTarget.TOP}},t.prototype.loadPDF=function(){var t=this;if(this.src)if(this.lastLoaded!==this.src){var e=PDFJS.getDocument(this.src);e.onProgress=function(e){t.onProgress.emit(e)};var i=this.src;e.promise.then(function(e){t._pdf=e,t.lastLoaded=i,t.afterLoadComplete.emit(e),t.update()},function(e){t.onError.emit(e)})}else this.update()},t.prototype.update=function(){this._showAll&&(this.setupViewer(),this.pdfViewer&&this.pdfViewer.setDocument(this._pdf)),this.pdfLinkService&&this.pdfLinkService.setDocument(this._pdf,null),this.page=this._page,this.render()},t.prototype.render=function(){this._showAll?this.renderMultiplePages():this.renderPage(this._page)},t.prototype.renderMultiplePages=function(){var t=this;this.isValidPageNumber(this._page)||(this._page=1),0===this._rotation&&this.pdfViewer.pagesRotation===this._rotation||setTimeout(function(){t.pdfViewer.pagesRotation=t._rotation}),this._stickToPage&&setTimeout(function(){t.pdfViewer.currentPageNumber=t._page}),this.updateSize()},t.prototype.renderPage=function(e){var i=this;this._pdf.getPage(e).then(function(e){var n=e.getViewport(i._zoom,i._rotation),r=i.element.nativeElement.querySelector(".pdfViewer"),o=i._zoom;(!i._originalSize||i._fitToPage&&n.width>i.element.nativeElement.offsetWidth)&&(n=e.getViewport(i.element.nativeElement.offsetWidth/n.width,i._rotation),o=i.getScale(e.getViewport(1).width)),t.removeAllChildNodes(r),PDFJS.disableTextLayer=!i._renderText;var s={container:r,removePageBorders:!0,defaultViewport:n,scale:o,id:i._page};i._renderText&&(i.pdfLinkService=new PDFJS.PDFLinkService,s.linkService=i.pdfLinkService,t.setExternalLinkTarget(i._externalLinkTarget),s.textLayerFactory=new PDFJS.DefaultTextLayerFactory,s.annotationLayerFactory=new PDFJS.DefaultAnnotationLayerFactory);var a=new PDFJS.PDFPageView(s);return i._renderText&&i.pdfLinkService.setViewer(a),0===i._rotation&&a.rotation===i._rotation||(a.rotation=i._rotation),a.setPdfPage(e),a.draw()})},t.removeAllChildNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.getScale=function(e){var i=this.element.nativeElement.offsetWidth;return 0===i?1:this._zoom*(i/e)/t.CSS_UNITS},t}();o.CSS_UNITS=96/72,o.decorators=[{type:n.j,args:[{selector:"pdf-viewer",template:'<div class="ng2-pdf-viewer-container"><div class="pdfViewer"></div></div>',styles:['\n    .ng2-pdf-viewer-container {\n      overflow-x: auto; }\n\n    :host /deep/ .textLayer {\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      overflow: hidden;\n      opacity: 0.2;\n      line-height: 1.0; }\n\n    :host /deep/ .textLayer > div {\n      color: transparent;\n      position: absolute;\n      white-space: pre;\n      cursor: text;\n      -webkit-transform-origin: 0% 0%;\n      transform-origin: 0% 0%; }\n\n    :host /deep/ .textLayer .highlight {\n      margin: -1px;\n      padding: 1px;\n      background-color: #002bff;\n      border-radius: 4px; }\n\n    :host /deep/ .textLayer .highlight.begin {\n      border-radius: 4px 0px 0px 4px; }\n\n    :host /deep/ .textLayer .highlight.end {\n      border-radius: 0px 4px 4px 0px; }\n\n    :host /deep/ .textLayer .highlight.middle {\n      border-radius: 0px; }\n\n    :host /deep/ .textLayer .highlight.selected {\n      background-color: darkgreen; }\n\n    :host /deep/ .textLayer ::-moz-selection {\n      background: #002bff; }\n\n    :host /deep/ .textLayer ::selection {\n      background: #002bff; }\n\n    :host /deep/ .textLayer ::-moz-selection {\n      background: #002bff; }\n\n    :host /deep/ .textLayer .endOfContent {\n      display: block;\n      position: absolute;\n      left: 0px;\n      top: 100%;\n      right: 0px;\n      bottom: 0px;\n      z-index: -1;\n      cursor: default;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n      -moz-user-select: none; }\n\n    :host /deep/ .textLayer .endOfContent.active {\n      top: 0px; }\n\n    :host /deep/ .annotationLayer section {\n      position: absolute; }\n\n    :host /deep/ .annotationLayer .linkAnnotation > a {\n      position: absolute;\n      font-size: 1em;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%; }\n\n    :host /deep/ .annotationLayer .linkAnnotation > a {\n      background: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7") 0 0 repeat; }\n\n    :host /deep/ .annotationLayer .linkAnnotation > a:hover {\n      opacity: 0.2;\n      background: #002bff;\n      -webkit-box-shadow: 0px 2px 10px #002bff;\n              box-shadow: 0px 2px 10px #002bff; }\n\n    :host /deep/ .annotationLayer .textAnnotation img {\n      position: absolute;\n      cursor: pointer; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input,\n    :host /deep/ .annotationLayer .textWidgetAnnotation textarea,\n    :host /deep/ .annotationLayer .choiceWidgetAnnotation select,\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input,\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input {\n      background-color: #002bff;\n      border: 1px solid transparent;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      font-size: 9px;\n      height: 100%;\n      padding: 0 3px;\n      vertical-align: top;\n      width: 100%; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation textarea {\n      font: message-box;\n      font-size: 9px;\n      resize: none; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input[disabled],\n    :host /deep/ .annotationLayer .textWidgetAnnotation textarea[disabled],\n    :host /deep/ .annotationLayer .choiceWidgetAnnotation select[disabled],\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled] {\n      background: none;\n      border: 1px solid transparent;\n      cursor: not-allowed; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input:hover,\n    :host /deep/ .annotationLayer .textWidgetAnnotation textarea:hover,\n    :host /deep/ .annotationLayer .choiceWidgetAnnotation select:hover,\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input:hover,\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input:hover {\n      border: 1px solid #000; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input:focus,\n    :host /deep/ .annotationLayer .textWidgetAnnotation textarea:focus,\n    :host /deep/ .annotationLayer .choiceWidgetAnnotation select:focus {\n      background: none;\n      border: 1px solid transparent; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input.comb {\n      font-family: monospace;\n      padding-left: 2px;\n      padding-right: 0; }\n\n    :host /deep/ .annotationLayer .textWidgetAnnotation input.comb:focus {\n      width: 115%; }\n\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input,\n    :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input {\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      -ms-appearance: none;\n      appearance: none; }\n\n    :host /deep/ .annotationLayer .popupWrapper {\n      position: absolute;\n      width: 20em; }\n\n    :host /deep/ .annotationLayer .popup {\n      position: absolute;\n      z-index: 200;\n      max-width: 20em;\n      background-color: #FFFF99;\n      -webkit-box-shadow: 0px 2px 5px #333;\n              box-shadow: 0px 2px 5px #333;\n      border-radius: 2px;\n      padding: 0.6em;\n      margin-left: 5px;\n      cursor: pointer;\n      word-wrap: break-word; }\n\n    :host /deep/ .annotationLayer .popup h1 {\n      font-size: 1em;\n      border-bottom: 1px solid #000000;\n      padding-bottom: 0.2em; }\n\n    :host /deep/ .annotationLayer .popup p {\n      padding-top: 0.2em; }\n\n    :host /deep/ .annotationLayer .highlightAnnotation,\n    :host /deep/ .annotationLayer .underlineAnnotation,\n    :host /deep/ .annotationLayer .squigglyAnnotation,\n    :host /deep/ .annotationLayer .strikeoutAnnotation,\n    :host /deep/ .annotationLayer .fileAttachmentAnnotation {\n      cursor: pointer; }\n\n    :host /deep/ .pdfViewer .canvasWrapper {\n      overflow: hidden; }\n\n    :host /deep/ .pdfViewer .page {\n      direction: ltr;\n      width: 816px;\n      height: 1056px;\n      margin: 1px auto -8px auto;\n      position: relative;\n      overflow: visible;\n      border: 9px solid transparent;\n      background-clip: content-box;\n      -o-border-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=") 9 9 repeat;\n         border-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=") 9 9 repeat;\n      background-color: white; }\n\n    :host /deep/ .pdfViewer.removePageBorders .page {\n      margin: 0px auto 10px auto;\n      border: none; }\n\n    :host /deep/ .pdfViewer.singlePageView {\n      display: inline-block; }\n\n    :host /deep/ .pdfViewer.singlePageView .page {\n      margin: 0;\n      border: none; }\n\n    :host /deep/ .pdfViewer .page canvas {\n      margin: 0;\n      display: block; }\n\n    :host /deep/ .pdfViewer .page .loadingIcon {\n      position: absolute;\n      display: block;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background: url("data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==") center no-repeat; }\n  ']}]}],o.ctorParameters=function(){return[{type:n.o}]},o.propDecorators={afterLoadComplete:[{type:n.H,args:["after-load-complete"]}],onError:[{type:n.H,args:["error"]}],onProgress:[{type:n.H,args:["on-progress"]}],onPageResize:[{type:n.t,args:["window:resize",[]]}],src:[{type:n.y}],page:[{type:n.y,args:["page"]}],pageChange:[{type:n.H}],renderText:[{type:n.y,args:["render-text"]}],originalSize:[{type:n.y,args:["original-size"]}],showAll:[{type:n.y,args:["show-all"]}],stickToPage:[{type:n.y,args:["stick-to-page"]}],zoom:[{type:n.y,args:["zoom"]}],rotation:[{type:n.y,args:["rotation"]}],externalLinkTarget:[{type:n.y,args:["external-link-target"]}],autoresize:[{type:n.y,args:["autoresize"]}],fitToPage:[{type:n.y,args:["fit-to-page"]}]};var s=function(){return function(){}}();s.decorators=[{type:n.C,args:[{declarations:[o],exports:[o]}]}],s.ctorParameters=function(){return[]}},HqJl:function(t,e,i){"use strict";var n=i("ZN67"),r=i("e/xH"),o=i("f8cP"),s=i("e6n3"),a=i("bawV"),l=0,c=1,u=2,h=4,p=5,d=6,f=0,m=1,g=2,y=-2,_=-3,v=-4,b=-5,x=8,A=1,w=2,P=3,E=4,T=5,S=6,C=7,O=8,M=9,R=10,I=11,D=12,L=13,k=14,F=15,N=16,B=17,V=18,z=19,U=20,j=21,G=22,W=23,H=24,X=25,Y=26,q=27,K=28,Q=29,Z=30,J=31,$=32,tt=852,et=592,it=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function rt(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=A,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,f):y}function ot(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,rt(t)):y}function st(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?y:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,ot(t))):y}function at(t,e){var i,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(i=st(t,e))!==f&&(t.state=null),i):y}var lt,ct,ut=!0;function ht(t){if(ut){var e;for(lt=new n.Buf32(512),ct=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(c,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(u,t.lens,0,32,ct,0,t.work,{bits:5}),ut=!1}t.lencode=lt,t.lenbits=9,t.distcode=ct,t.distbits=5}function pt(t,e,i,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),n.arraySet(s.window,e,i-r,o,s.wnext),(r-=o)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=ot,e.inflateReset2=st,e.inflateResetKeep=rt,e.inflateInit=function(t){return at(t,it)},e.inflateInit2=at,e.inflate=function(t,e){var i,tt,et,it,rt,ot,st,at,lt,ct,ut,dt,ft,mt,gt,yt,_t,vt,bt,xt,At,wt,Pt,Et,Tt=0,St=new n.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return y;(i=t.state).mode===D&&(i.mode=L),rt=t.next_out,et=t.output,st=t.avail_out,it=t.next_in,tt=t.input,ot=t.avail_in,at=i.hold,lt=i.bits,ct=ot,ut=st,wt=f;t:for(;;)switch(i.mode){case A:if(0===i.wrap){i.mode=L;break}for(;lt<16;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(2&i.wrap&&35615===at){i.check=0,St[0]=255&at,St[1]=at>>>8&255,i.check=o(i.check,St,2,0),at=0,lt=0,i.mode=w;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&at)<<8)+(at>>8))%31){t.msg="incorrect header check",i.mode=Z;break}if((15&at)!==x){t.msg="unknown compression method",i.mode=Z;break}if(lt-=4,At=8+(15&(at>>>=4)),0===i.wbits)i.wbits=At;else if(At>i.wbits){t.msg="invalid window size",i.mode=Z;break}i.dmax=1<<At,t.adler=i.check=1,i.mode=512&at?R:D,at=0,lt=0;break;case w:for(;lt<16;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(i.flags=at,(255&i.flags)!==x){t.msg="unknown compression method",i.mode=Z;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Z;break}i.head&&(i.head.text=at>>8&1),512&i.flags&&(St[0]=255&at,St[1]=at>>>8&255,i.check=o(i.check,St,2,0)),at=0,lt=0,i.mode=P;case P:for(;lt<32;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.head&&(i.head.time=at),512&i.flags&&(St[0]=255&at,St[1]=at>>>8&255,St[2]=at>>>16&255,St[3]=at>>>24&255,i.check=o(i.check,St,4,0)),at=0,lt=0,i.mode=E;case E:for(;lt<16;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.head&&(i.head.xflags=255&at,i.head.os=at>>8),512&i.flags&&(St[0]=255&at,St[1]=at>>>8&255,i.check=o(i.check,St,2,0)),at=0,lt=0,i.mode=T;case T:if(1024&i.flags){for(;lt<16;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.length=at,i.head&&(i.head.extra_len=at),512&i.flags&&(St[0]=255&at,St[1]=at>>>8&255,i.check=o(i.check,St,2,0)),at=0,lt=0}else i.head&&(i.head.extra=null);i.mode=S;case S:if(1024&i.flags&&((dt=i.length)>ot&&(dt=ot),dt&&(i.head&&(At=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,tt,it,dt,At)),512&i.flags&&(i.check=o(i.check,tt,dt,it)),ot-=dt,it+=dt,i.length-=dt),i.length))break t;i.length=0,i.mode=C;case C:if(2048&i.flags){if(0===ot)break t;dt=0;do{At=tt[it+dt++],i.head&&At&&i.length<65536&&(i.head.name+=String.fromCharCode(At))}while(At&&dt<ot);if(512&i.flags&&(i.check=o(i.check,tt,dt,it)),ot-=dt,it+=dt,At)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=O;case O:if(4096&i.flags){if(0===ot)break t;dt=0;do{At=tt[it+dt++],i.head&&At&&i.length<65536&&(i.head.comment+=String.fromCharCode(At))}while(At&&dt<ot);if(512&i.flags&&(i.check=o(i.check,tt,dt,it)),ot-=dt,it+=dt,At)break t}else i.head&&(i.head.comment=null);i.mode=M;case M:if(512&i.flags){for(;lt<16;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(at!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Z;break}at=0,lt=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=D;break;case R:for(;lt<32;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}t.adler=i.check=nt(at),at=0,lt=0,i.mode=I;case I:if(0===i.havedict)return t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=ot,i.hold=at,i.bits=lt,g;t.adler=i.check=1,i.mode=D;case D:if(e===p||e===d)break t;case L:if(i.last){at>>>=7&lt,lt-=7&lt,i.mode=q;break}for(;lt<3;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}switch(i.last=1&at,lt-=1,3&(at>>>=1)){case 0:i.mode=k;break;case 1:if(ht(i),i.mode=U,e===d){at>>>=2,lt-=2;break t}break;case 2:i.mode=B;break;case 3:t.msg="invalid block type",i.mode=Z}at>>>=2,lt-=2;break;case k:for(at>>>=7&lt,lt-=7&lt;lt<32;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if((65535&at)!=(at>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Z;break}if(i.length=65535&at,at=0,lt=0,i.mode=F,e===d)break t;case F:i.mode=N;case N:if(dt=i.length){if(dt>ot&&(dt=ot),dt>st&&(dt=st),0===dt)break t;n.arraySet(et,tt,it,dt,rt),ot-=dt,it+=dt,st-=dt,rt+=dt,i.length-=dt;break}i.mode=D;break;case B:for(;lt<14;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(i.nlen=257+(31&at),at>>>=5,lt-=5,i.ndist=1+(31&at),at>>>=5,lt-=5,i.ncode=4+(15&at),at>>>=4,lt-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Z;break}i.have=0,i.mode=V;case V:for(;i.have<i.ncode;){for(;lt<3;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.lens[Ct[i.have++]]=7&at,at>>>=3,lt-=3}for(;i.have<19;)i.lens[Ct[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Pt={bits:i.lenbits},wt=a(l,i.lens,0,19,i.lencode,0,i.work,Pt),i.lenbits=Pt.bits,wt){t.msg="invalid code lengths set",i.mode=Z;break}i.have=0,i.mode=z;case z:for(;i.have<i.nlen+i.ndist;){for(;yt=(Tt=i.lencode[at&(1<<i.lenbits)-1])>>>16&255,_t=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(_t<16)at>>>=gt,lt-=gt,i.lens[i.have++]=_t;else{if(16===_t){for(Et=gt+2;lt<Et;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(at>>>=gt,lt-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=Z;break}At=i.lens[i.have-1],dt=3+(3&at),at>>>=2,lt-=2}else if(17===_t){for(Et=gt+3;lt<Et;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}lt-=gt,At=0,dt=3+(7&(at>>>=gt)),at>>>=3,lt-=3}else{for(Et=gt+7;lt<Et;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}lt-=gt,At=0,dt=11+(127&(at>>>=gt)),at>>>=7,lt-=7}if(i.have+dt>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Z;break}for(;dt--;)i.lens[i.have++]=At}}if(i.mode===Z)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Z;break}if(i.lenbits=9,Pt={bits:i.lenbits},wt=a(c,i.lens,0,i.nlen,i.lencode,0,i.work,Pt),i.lenbits=Pt.bits,wt){t.msg="invalid literal/lengths set",i.mode=Z;break}if(i.distbits=6,i.distcode=i.distdyn,Pt={bits:i.distbits},wt=a(u,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Pt),i.distbits=Pt.bits,wt){t.msg="invalid distances set",i.mode=Z;break}if(i.mode=U,e===d)break t;case U:i.mode=j;case j:if(ot>=6&&st>=258){t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=ot,i.hold=at,i.bits=lt,s(t,ut),rt=t.next_out,et=t.output,st=t.avail_out,it=t.next_in,tt=t.input,ot=t.avail_in,at=i.hold,lt=i.bits,i.mode===D&&(i.back=-1);break}for(i.back=0;yt=(Tt=i.lencode[at&(1<<i.lenbits)-1])>>>16&255,_t=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(yt&&0==(240&yt)){for(vt=gt,bt=yt,xt=_t;yt=(Tt=i.lencode[xt+((at&(1<<vt+bt)-1)>>vt)])>>>16&255,_t=65535&Tt,!(vt+(gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}at>>>=vt,lt-=vt,i.back+=vt}if(at>>>=gt,lt-=gt,i.back+=gt,i.length=_t,0===yt){i.mode=Y;break}if(32&yt){i.back=-1,i.mode=D;break}if(64&yt){t.msg="invalid literal/length code",i.mode=Z;break}i.extra=15&yt,i.mode=G;case G:if(i.extra){for(Et=i.extra;lt<Et;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.length+=at&(1<<i.extra)-1,at>>>=i.extra,lt-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=W;case W:for(;yt=(Tt=i.distcode[at&(1<<i.distbits)-1])>>>16&255,_t=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(0==(240&yt)){for(vt=gt,bt=yt,xt=_t;yt=(Tt=i.distcode[xt+((at&(1<<vt+bt)-1)>>vt)])>>>16&255,_t=65535&Tt,!(vt+(gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}at>>>=vt,lt-=vt,i.back+=vt}if(at>>>=gt,lt-=gt,i.back+=gt,64&yt){t.msg="invalid distance code",i.mode=Z;break}i.offset=_t,i.extra=15&yt,i.mode=H;case H:if(i.extra){for(Et=i.extra;lt<Et;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}i.offset+=at&(1<<i.extra)-1,at>>>=i.extra,lt-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Z;break}i.mode=X;case X:if(0===st)break t;if(dt=ut-st,i.offset>dt){if((dt=i.offset-dt)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Z;break}dt>i.wnext?(dt-=i.wnext,ft=i.wsize-dt):ft=i.wnext-dt,dt>i.length&&(dt=i.length),mt=i.window}else mt=et,ft=rt-i.offset,dt=i.length;dt>st&&(dt=st),st-=dt,i.length-=dt;do{et[rt++]=mt[ft++]}while(--dt);0===i.length&&(i.mode=j);break;case Y:if(0===st)break t;et[rt++]=i.length,st--,i.mode=j;break;case q:if(i.wrap){for(;lt<32;){if(0===ot)break t;ot--,at|=tt[it++]<<lt,lt+=8}if(ut-=st,t.total_out+=ut,i.total+=ut,ut&&(t.adler=i.check=i.flags?o(i.check,et,ut,rt-ut):r(i.check,et,ut,rt-ut)),ut=st,(i.flags?at:nt(at))!==i.check){t.msg="incorrect data check",i.mode=Z;break}at=0,lt=0}i.mode=K;case K:if(i.wrap&&i.flags){for(;lt<32;){if(0===ot)break t;ot--,at+=tt[it++]<<lt,lt+=8}if(at!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Z;break}at=0,lt=0}i.mode=Q;case Q:wt=m;break t;case Z:wt=_;break t;case J:return v;case $:default:return y}return t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=ot,i.hold=at,i.bits=lt,(i.wsize||ut!==t.avail_out&&i.mode<Z&&(i.mode<q||e!==h))&&pt(t,t.output,t.next_out,ut-t.avail_out)?(i.mode=J,v):(ct-=t.avail_in,ut-=t.avail_out,t.total_in+=ct,t.total_out+=ut,i.total+=ut,i.wrap&&ut&&(t.adler=i.check=i.flags?o(i.check,et,ut,t.next_out-ut):r(i.check,et,ut,t.next_out-ut)),t.data_type=i.bits+(i.last?64:0)+(i.mode===D?128:0)+(i.mode===U||i.mode===F?256:0),(0===ct&&0===ut||e===h)&&wt===f&&(wt=b),wt)},e.inflateEnd=function(t){if(!t||!t.state)return y;var e=t.state;return e.window&&(e.window=null),t.state=null,f},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?y:(i.head=e,e.done=!1,f):y},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==I?y:i.mode===I&&r(1,e,n,0)!==i.check?_:pt(t,e,n,n)?(i.mode=J,v):(i.havedict=1,f):y},e.inflateInfo="pako inflate (from Nodeca project)"},INGy:function(t,e,i){"use strict";(function(e,n){var r=i("1Rb4").nextTick;t.exports=v;var o,s=i("CDvF");v.ReadableState=_;i("rOzH").EventEmitter;var a=function(t,e){return t.listeners(e).length},l=i("wHgO"),c=i("zOKz").Buffer,u=e.Uint8Array||function(){};var h=i("VIKU");h.inherits=i("lDCR");var p=i(1),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var f,m=i("yY5i"),g=i("iAGO");h.inherits(v,l);var y=["error","close","destroy","pause","resume"];function _(t,e){t=t||{};var n=e instanceof(o=o||i("dJzE"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=i("/cYh").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||i("dJzE"),!(this instanceof v))return new v(t);this._readableState=new _(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function b(t,e,i,n,r){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,P(t)}(t,s)):(r||(o=function(t,e){var i;n=e,c.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?x(t,s,e,!1):T(t,s)):x(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function x(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&P(t)),T(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),i=!0),b(this,t,e,!1,i)},v.prototype.unshift=function(t){return b(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return f||(f=i("/cYh").StringDecoder),this._readableState.decoder=new f(t),this._readableState.encoding=t,this};var A=8388608;function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=A?t=A:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r(E,t):E(t))}function E(t){d("emit readable"),t.emit("readable"),M(t)}function T(t,e){e.readingMore||(e.readingMore=!0,r(S,t,e))}function S(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function C(t){d("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;t-=r.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++n}return e.length-=n,r}(t,e):function(t,e){var i=c.allocUnsafe(t),n=e.head,r=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,s),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function I(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}v.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):P(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&I(this),null;var n,r=e.needReadable;return d("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",r=!0),e.ended||e.reading?d("reading or ended",r=!1):r&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(i,e))),null===(n=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&I(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:v;function c(e,n){d("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),t.removeListener("close",y),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",c),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",m),p=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function u(){d("onend"),t.end()}o.endEmitted?r(l):i.once("end",l),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,M(t))}}(i);t.on("drain",h);var p=!1;var f=!1;function m(e){d("ondata"),f=!1,!1!==t.write(e)||f||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==L(o.pipes,t))&&!p&&(d("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,f=!0),i.pause())}function g(e){d("onerror",e),v(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",_),v()}function _(){d("onfinish"),t.removeListener("close",y),v()}function v(){d("unpipe"),i.unpipe(t)}return i.on("data",m),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",g),t.once("close",y),t.once("finish",_),t.emit("pipe",i),o.flowing||(d("pipe resume"),i.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this,i);return this}var s=L(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},v.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&P(this):r(C,this))}return i},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r(O,t,e))}(this,t)),this},v.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var r in t.on("end",function(){if(d("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(d("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r)||(i.objectMode||r&&r.length)&&(e.push(r)||(n=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},this},v._fromList=R}).call(e,i("GTd5"),i("1WNV"))},IV8e:function(t,e,i){var n,r;r=function(){return function t(e,i,r){function o(a,l){if(!i[a]){if(!e[a]){if(!l&&("function"==typeof n&&n))return n(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return o(i||t)},c,c.exports,t,e,i,r)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){e.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},{}],2:[function(t,e,i){e.exports={version:t("../package.json").version,AABB:t("./collision/AABB"),ArrayCollisionMatrix:t("./collision/ArrayCollisionMatrix"),Body:t("./objects/Body"),Box:t("./shapes/Box"),Broadphase:t("./collision/Broadphase"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),Narrowphase:t("./world/Narrowphase"),ConeTwistConstraint:t("./constraints/ConeTwistConstraint"),ContactMaterial:t("./material/ContactMaterial"),ConvexPolyhedron:t("./shapes/ConvexPolyhedron"),Cylinder:t("./shapes/Cylinder"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventTarget:t("./utils/EventTarget"),FrictionEquation:t("./equations/FrictionEquation"),GSSolver:t("./solver/GSSolver"),GridBroadphase:t("./collision/GridBroadphase"),Heightfield:t("./shapes/Heightfield"),HingeConstraint:t("./constraints/HingeConstraint"),LockConstraint:t("./constraints/LockConstraint"),Mat3:t("./math/Mat3"),Material:t("./material/Material"),NaiveBroadphase:t("./collision/NaiveBroadphase"),ObjectCollisionMatrix:t("./collision/ObjectCollisionMatrix"),Pool:t("./utils/Pool"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),PointToPointConstraint:t("./constraints/PointToPointConstraint"),Quaternion:t("./math/Quaternion"),Ray:t("./collision/Ray"),RaycastVehicle:t("./objects/RaycastVehicle"),RaycastResult:t("./collision/RaycastResult"),RigidVehicle:t("./objects/RigidVehicle"),RotationalEquation:t("./equations/RotationalEquation"),RotationalMotorEquation:t("./equations/RotationalMotorEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),SPHSystem:t("./objects/SPHSystem"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Sphere:t("./shapes/Sphere"),SplitSolver:t("./solver/SplitSolver"),Spring:t("./objects/Spring"),Trimesh:t("./shapes/Trimesh"),Vec3:t("./math/Vec3"),Vec3Pool:t("./utils/Vec3Pool"),World:t("./world/World")}},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(t,e,i){var n=t("../math/Vec3");t("../utils/Utils");function r(t){t=t||{},this.lowerBound=new n,t.lowerBound&&this.lowerBound.copy(t.lowerBound),this.upperBound=new n,t.upperBound&&this.upperBound.copy(t.upperBound)}e.exports=r;var o=new n;r.prototype.setFromPoints=function(t,e,i,n){var r=this.lowerBound,s=this.upperBound,a=i;r.copy(t[0]),a&&a.vmult(r,r),s.copy(r);for(var l=1;l<t.length;l++){var c=t[l];a&&(a.vmult(c,o),c=o),c.x>s.x&&(s.x=c.x),c.x<r.x&&(r.x=c.x),c.y>s.y&&(s.y=c.y),c.y<r.y&&(r.y=c.y),c.z>s.z&&(s.z=c.z),c.z<r.z&&(r.z=c.z)}return e&&(e.vadd(r,r),e.vadd(s,s)),n&&(r.x-=n,r.y-=n,r.z-=n,s.x+=n,s.y+=n,s.z+=n),this},r.prototype.copy=function(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this},r.prototype.clone=function(){return(new r).copy(this)},r.prototype.extend=function(t){var e=t.lowerBound.x;this.lowerBound.x>e&&(this.lowerBound.x=e);var i=t.upperBound.x;this.upperBound.x<i&&(this.upperBound.x=i);e=t.lowerBound.y;this.lowerBound.y>e&&(this.lowerBound.y=e);i=t.upperBound.y;this.upperBound.y<i&&(this.upperBound.y=i);e=t.lowerBound.z;this.lowerBound.z>e&&(this.lowerBound.z=e);i=t.upperBound.z;this.upperBound.z<i&&(this.upperBound.z=i)},r.prototype.overlaps=function(t){var e=this.lowerBound,i=this.upperBound,n=t.lowerBound,r=t.upperBound;return(n.x<=i.x&&i.x<=r.x||e.x<=r.x&&r.x<=i.x)&&(n.y<=i.y&&i.y<=r.y||e.y<=r.y&&r.y<=i.y)&&(n.z<=i.z&&i.z<=r.z||e.z<=r.z&&r.z<=i.z)},r.prototype.contains=function(t){var e=this.lowerBound,i=this.upperBound,n=t.lowerBound,r=t.upperBound;return e.x<=n.x&&i.x>=r.x&&e.y<=n.y&&i.y>=r.y&&e.z<=n.z&&i.z>=r.z},r.prototype.getCorners=function(t,e,i,n,r,o,s,a){var l=this.lowerBound,c=this.upperBound;t.copy(l),e.set(c.x,l.y,l.z),i.set(c.x,c.y,l.z),n.set(l.x,c.y,c.z),r.set(c.x,l.y,l.z),o.set(l.x,c.y,l.z),s.set(l.x,l.y,c.z),a.copy(c)};var s=[new n,new n,new n,new n,new n,new n,new n,new n];r.prototype.toLocalFrame=function(t,e){var i=s,n=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(n,r,o,a,l,c,u,h);for(var p=0;8!==p;p++){var d=i[p];t.pointToLocal(d,d)}return e.setFromPoints(i)},r.prototype.toWorldFrame=function(t,e){var i=s,n=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7];this.getCorners(n,r,o,a,l,c,u,h);for(var p=0;8!==p;p++){var d=i[p];t.pointToWorld(d,d)}return e.setFromPoints(i)}},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(t,e,i){function n(){this.matrix=[]}e.exports=n,n.prototype.get=function(t,e){if(t=t.index,(e=e.index)>t){var i=e;e=t,t=i}return this.matrix[(t*(t+1)>>1)+e-1]},n.prototype.set=function(t,e,i){if(t=t.index,(e=e.index)>t){var n=e;e=t,t=n}this.matrix[(t*(t+1)>>1)+e-1]=i?1:0},n.prototype.reset=function(){for(var t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0},n.prototype.setNumObjects=function(t){this.matrix.length=t*(t-1)>>1}},{}],5:[function(t,e,i){var n=t("../objects/Body"),r=t("../math/Vec3"),o=t("../math/Quaternion");t("../shapes/Shape"),t("../shapes/Plane");function s(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}e.exports=s,s.prototype.collisionPairs=function(t,e,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var a=n.STATIC|n.KINEMATIC;s.prototype.needBroadphaseCollision=function(t,e){return 0!=(t.collisionFilterGroup&e.collisionFilterMask)&&0!=(e.collisionFilterGroup&t.collisionFilterMask)&&(0==(t.type&a)&&t.sleepState!==n.SLEEPING||0==(e.type&a)&&e.sleepState!==n.SLEEPING)},s.prototype.intersectionTest=function(t,e,i,n){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,i,n):this.doBoundingSphereBroadphase(t,e,i,n)};var l=new r;new r,new o,new r;s.prototype.doBoundingSphereBroadphase=function(t,e,i,n){var r=l;e.position.vsub(t.position,r);var o=Math.pow(t.boundingRadius+e.boundingRadius,2);r.norm2()<o&&(i.push(t),n.push(e))},s.prototype.doBoundingBoxBroadphase=function(t,e,i,n){t.aabbNeedsUpdate&&t.computeAABB(),e.aabbNeedsUpdate&&e.computeAABB(),t.aabb.overlaps(e.aabb)&&(i.push(t),n.push(e))};var c={keys:[]},u=[],h=[];s.prototype.makePairsUnique=function(t,e){for(var i=c,n=u,r=h,o=t.length,s=0;s!==o;s++)n[s]=t[s],r[s]=e[s];t.length=0,e.length=0;for(s=0;s!==o;s++){var a=n[s].id,l=r[s].id;i[p=a<l?a+","+l:l+","+a]=s,i.keys.push(p)}for(s=0;s!==i.keys.length;s++){var p,d=i[p=i.keys.pop()];t.push(n[d]),e.push(r[d]),delete i[p]}},s.prototype.setWorld=function(t){};var p=new r;s.boundingSphereCheck=function(t,e){var i=p;return t.position.vsub(e.position,i),Math.pow(t.shape.boundingSphereRadius+e.shape.boundingSphereRadius,2)>i.norm2()},s.prototype.aabbQuery=function(t,e,i){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(t,e,i){e.exports=s;var n=t("./Broadphase"),r=t("../math/Vec3"),o=t("../shapes/Shape");function s(t,e,i,o,s){n.apply(this),this.nx=i||10,this.ny=o||10,this.nz=s||10,this.aabbMin=t||new r(100,100,100),this.aabbMax=e||new r(-100,-100,-100);var a=this.nx*this.ny*this.nz;if(a<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=a,this.binLengths.length=a;for(var l=0;l<a;l++)this.bins[l]=[],this.binLengths[l]=0}s.prototype=new n,s.prototype.constructor=s;var a=new r;new r;s.prototype.collisionPairs=function(t,e,i){for(var n=t.numObjects(),r=t.bodies,s=this.aabbMax,l=this.aabbMin,c=this.nx,u=this.ny,h=this.nz,p=u*h,d=h,f=1,m=s.x,g=s.y,y=s.z,_=l.x,v=l.y,b=l.z,x=c/(m-_),A=u/(g-v),w=h/(y-b),P=(m-_)/c,E=(g-v)/u,T=(y-b)/h,S=.5*Math.sqrt(P*P+E*E+T*T),C=o.types,O=C.SPHERE,M=C.PLANE,R=(C.BOX,C.COMPOUND,C.CONVEXPOLYHEDRON,this.bins),I=this.binLengths,D=this.bins.length,L=0;L!==D;L++)I[L]=0;var k=Math.ceil;l=Math.min,s=Math.max;function F(t,e,i,n,r,o,s){var a=(t-_)*x|0,l=(e-v)*A|0,m=(i-b)*w|0,g=k((n-_)*x),y=k((r-v)*A),P=k((o-b)*w);a<0?a=0:a>=c&&(a=c-1),l<0?l=0:l>=u&&(l=u-1),m<0?m=0:m>=h&&(m=h-1),g<0?g=0:g>=c&&(g=c-1),y<0?y=0:y>=u&&(y=u-1),P<0?P=0:P>=h&&(P=h-1),l*=d,m*=f,g*=p,y*=d,P*=f;for(var E=a*=p;E<=g;E+=p)for(var T=l;T<=y;T+=d)for(var S=m;S<=P;S+=f){var C=E+T+S;R[C][I[C]++]=s}}for(L=0;L!==n;L++){var N=(it=r[L]).shape;switch(N.type){case O:var B=it.position.x,V=it.position.y,z=it.position.z,U=N.radius;F(B-U,V-U,z-U,B+U,V+U,z+U,it);break;case M:N.worldNormalNeedsUpdate&&N.computeWorldNormal(it.quaternion);var j=N.worldNormal,G=_+.5*P-it.position.x,W=v+.5*E-it.position.y,H=b+.5*T-it.position.z,X=a;X.set(G,W,H);for(var Y=0,q=0;Y!==c;Y++,q+=p,X.y=W,X.x+=P)for(var K=0,Q=0;K!==u;K++,Q+=d,X.z=H,X.y+=E)for(var Z=0,J=0;Z!==h;Z++,J+=f,X.z+=T)if(X.dot(j)<S){var $=q+Q+J;R[$][I[$]++]=it}break;default:it.aabbNeedsUpdate&&it.computeAABB(),F(it.aabb.lowerBound.x,it.aabb.lowerBound.y,it.aabb.lowerBound.z,it.aabb.upperBound.x,it.aabb.upperBound.y,it.aabb.upperBound.z,it)}}for(L=0;L!==D;L++){var tt=I[L];if(tt>1){var et=R[L];for(Y=0;Y!==tt;Y++){var it=et[Y];for(K=0;K!==Y;K++){var nt=et[K];this.needBroadphaseCollision(it,nt)&&this.intersectionTest(it,nt,e,i)}}}}this.makePairsUnique(e,i)}},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(t,e,i){e.exports=o;var n=t("./Broadphase"),r=t("./AABB");function o(){n.apply(this)}o.prototype=new n,o.prototype.constructor=o,o.prototype.collisionPairs=function(t,e,i){var n,r,o,s,a=t.bodies,l=a.length;for(n=0;n!==l;n++)for(r=0;r!==n;r++)o=a[n],s=a[r],this.needBroadphaseCollision(o,s)&&this.intersectionTest(o,s,e,i)};new r;o.prototype.aabbQuery=function(t,e,i){i=i||[];for(var n=0;n<t.bodies.length;n++){var r=t.bodies[n];r.aabbNeedsUpdate&&r.computeAABB(),r.aabb.overlaps(e)&&i.push(r)}return i}},{"./AABB":3,"./Broadphase":5}],8:[function(t,e,i){function n(){this.matrix={}}e.exports=n,n.prototype.get=function(t,e){if(t=t.id,(e=e.id)>t){var i=e;e=t,t=i}return t+"-"+e in this.matrix},n.prototype.set=function(t,e,i){if(t=t.id,(e=e.id)>t){var n=e;e=t,t=n}i?this.matrix[t+"-"+e]=!0:delete this.matrix[t+"-"+e]},n.prototype.reset=function(){this.matrix={}},n.prototype.setNumObjects=function(t){}},{}],9:[function(t,e,i){e.exports=c;var n=t("../math/Vec3"),r=t("../math/Quaternion"),o=t("../math/Transform"),s=(t("../shapes/ConvexPolyhedron"),t("../shapes/Box"),t("../collision/RaycastResult")),a=t("../shapes/Shape"),l=t("../collision/AABB");function c(t,e){this.from=t?t.clone():new n,this.to=e?e.clone():new n,this._direction=new n,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=c.ANY,this.result=new s,this.hasHit=!1,this.callback=function(t){}}c.prototype.constructor=c,c.CLOSEST=1,c.ANY=2,c.ALL=4;var u=new l,h=[];c.prototype.intersectWorld=function(t,e){return this.mode=e.mode||c.ANY,this.result=e.result||new s,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask="undefined"!=typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!=typeof e.collisionFilterGroup?e.collisionFilterGroup:-1,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(u),h.length=0,t.broadphase.aabbQuery(t,u,h),this.intersectBodies(h),this.hasHit};var p=new n,d=new n;function f(t,e,i,n){n.vsub(e,L),i.vsub(e,p),t.vsub(e,d);var r,o,s=L.dot(L),a=L.dot(p),l=L.dot(d),c=p.dot(p),u=p.dot(d);return(r=c*l-a*u)>=0&&(o=s*u-a*l)>=0&&r+o<s*c-a*a}c.pointInTriangle=f;var m=new n,g=new r;c.prototype.intersectBody=function(t,e){e&&(this.result=e,this._updateDirection());var i=this.checkCollisionResponse;if((!i||t.collisionResponse)&&0!=(this.collisionFilterGroup&t.collisionFilterMask)&&0!=(t.collisionFilterGroup&this.collisionFilterMask))for(var n=m,r=g,o=0,s=t.shapes.length;o<s;o++){var a=t.shapes[o];if((!i||a.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],r),t.quaternion.vmult(t.shapeOffsets[o],n),n.vadd(t.position,n),this.intersectShape(a,r,n,t),this.result._shouldStop))break}},c.prototype.intersectBodies=function(t,e){e&&(this.result=e,this._updateDirection());for(var i=0,n=t.length;!this.result._shouldStop&&i<n;i++)this.intersectBody(t[i])},c.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},c.prototype.intersectShape=function(t,e,i,n){if(!(function(t,e,i){i.vsub(t,L);var n=L.dot(e);return e.mult(n,k),k.vadd(t,k),i.distanceTo(k)}(this.from,this._direction,i)>t.boundingSphereRadius)){var r=this[t.type];r&&r.call(this,t,e,i,n)}};new n,new n;var y=new n,_=new n,v=new n,b=new n;new n,new s;c.prototype.intersectBox=function(t,e,i,n){return this.intersectConvex(t.convexPolyhedronRepresentation,e,i,n)},c.prototype[a.types.BOX]=c.prototype.intersectBox,c.prototype.intersectPlane=function(t,e,i,r){var o=this.from,s=this.to,a=this._direction,l=new n(0,0,1);e.vmult(l,l);var c=new n;o.vsub(i,c);var u=c.dot(l);if(s.vsub(i,c),!(u*c.dot(l)>0||o.distanceTo(s)<u)){var h=l.dot(a);if(!(Math.abs(h)<this.precision)){var p=new n,d=new n,f=new n;o.vsub(i,p);var m=-l.dot(p)/h;a.scale(m,d),o.vadd(d,f),this.reportIntersection(l,f,t,r,-1)}}},c.prototype[a.types.PLANE]=c.prototype.intersectPlane,c.prototype.getAABB=function(t){var e=this.to,i=this.from;t.lowerBound.x=Math.min(e.x,i.x),t.lowerBound.y=Math.min(e.y,i.y),t.lowerBound.z=Math.min(e.z,i.z),t.upperBound.x=Math.max(e.x,i.x),t.upperBound.y=Math.max(e.y,i.y),t.upperBound.z=Math.max(e.z,i.z)};var x={faceList:[0]};c.prototype.intersectHeightfield=function(t,e,i,r){t.data,t.elementSize;var s=new n,a=new c(this.from,this.to);o.pointToLocalFrame(i,e,a.from,a.from),o.pointToLocalFrame(i,e,a.to,a.to);var l=[],u=null,h=null,p=null,d=null,f=t.getIndexOfPosition(a.from.x,a.from.y,l,!1);if(f&&(u=l[0],h=l[1],p=l[0],d=l[1]),(f=t.getIndexOfPosition(a.to.x,a.to.y,l,!1))&&((null===u||l[0]<u)&&(u=l[0]),(null===p||l[0]>p)&&(p=l[0]),(null===h||l[1]<h)&&(h=l[1]),(null===d||l[1]>d)&&(d=l[1])),null!==u){var m=[];t.getRectMinMax(u,h,p,d,m);for(var g=u;g<=p;g++)for(var y=h;y<=d;y++){if(this.result._shouldStop)return;if(t.getConvexTrianglePillar(g,y,!1),o.pointToWorldFrame(i,e,t.pillarOffset,s),this.intersectConvex(t.pillarConvex,e,s,r,x),this.result._shouldStop)return;t.getConvexTrianglePillar(g,y,!0),o.pointToWorldFrame(i,e,t.pillarOffset,s),this.intersectConvex(t.pillarConvex,e,s,r,x)}}},c.prototype[a.types.HEIGHTFIELD]=c.prototype.intersectHeightfield;var A=new n,w=new n;c.prototype.intersectSphere=function(t,e,i,n){var r=this.from,o=this.to,s=t.radius,a=Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)+Math.pow(o.z-r.z,2),l=2*((o.x-r.x)*(r.x-i.x)+(o.y-r.y)*(r.y-i.y)+(o.z-r.z)*(r.z-i.z)),c=Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)+Math.pow(r.z-i.z,2)-Math.pow(s,2),u=Math.pow(l,2)-4*a*c,h=A,p=w;if(!(u<0))if(0===u)r.lerp(o,u,h),h.vsub(i,p),p.normalize(),this.reportIntersection(p,h,t,n,-1);else{var d=(-l-Math.sqrt(u))/(2*a),f=(-l+Math.sqrt(u))/(2*a);if(d>=0&&d<=1&&(r.lerp(o,d,h),h.vsub(i,p),p.normalize(),this.reportIntersection(p,h,t,n,-1)),this.result._shouldStop)return;f>=0&&f<=1&&(r.lerp(o,f,h),h.vsub(i,p),p.normalize(),this.reportIntersection(p,h,t,n,-1))}},c.prototype[a.types.SPHERE]=c.prototype.intersectSphere;var P=new n,E=(new n,new n,new n);c.prototype.intersectConvex=function(t,e,i,n,r){for(var o=P,s=E,a=r&&r.faceList||null,l=t.faces,c=t.vertices,u=t.faceNormals,h=this._direction,p=this.from,d=this.to,m=p.distanceTo(d),g=a?a.length:l.length,x=this.result,A=0;!x._shouldStop&&A<g;A++){var w=a?a[A]:A,T=l[w],S=u[w],C=e,O=i;s.copy(c[T[0]]),C.vmult(s,s),s.vadd(O,s),s.vsub(p,s),C.vmult(S,o);var M=h.dot(o);if(!(Math.abs(M)<this.precision)){var R=o.dot(s)/M;if(!(R<0)){h.mult(R,y),y.vadd(p,y),_.copy(c[T[0]]),C.vmult(_,_),O.vadd(_,_);for(var I=1;!x._shouldStop&&I<T.length-1;I++){v.copy(c[T[I]]),b.copy(c[T[I+1]]),C.vmult(v,v),C.vmult(b,b),O.vadd(v,v),O.vadd(b,b);var D=y.distanceTo(p);!f(y,_,v,b)&&!f(y,v,_,b)||D>m||this.reportIntersection(o,y,t,n,w)}}}}},c.prototype[a.types.CONVEXPOLYHEDRON]=c.prototype.intersectConvex;var T=new n,S=new n,C=new n,O=new n,M=new n,R=new n,I=(new l,[]),D=new o;c.prototype.intersectTrimesh=function(t,e,i,n,r){var s=T,a=I,l=D,c=E,u=S,h=C,p=O,d=R,m=M,g=(r&&r.faceList,t.indices),x=(t.vertices,t.faceNormals,this.from),A=this.to,w=this._direction;l.position.copy(i),l.quaternion.copy(e),o.vectorToLocalFrame(i,e,w,u),o.pointToLocalFrame(i,e,x,h),o.pointToLocalFrame(i,e,A,p);var P=h.distanceSquared(p);t.tree.rayQuery(this,l,a);for(var L=0,k=a.length;!this.result._shouldStop&&L!==k;L++){var F=a[L];t.getNormal(F,s),t.getVertex(g[3*F],_),_.vsub(h,c);var N=u.dot(s),B=s.dot(c)/N;if(!(B<0)){u.scale(B,y),y.vadd(h,y),t.getVertex(g[3*F+1],v),t.getVertex(g[3*F+2],b);var V=y.distanceSquared(h);!f(y,v,_,b)&&!f(y,_,v,b)||V>P||(o.vectorToWorldFrame(e,s,m),o.pointToWorldFrame(i,e,y,d),this.reportIntersection(m,d,t,n,F))}}a.length=0},c.prototype[a.types.TRIMESH]=c.prototype.intersectTrimesh,c.prototype.reportIntersection=function(t,e,i,n,r){var o=this.from,s=this.to,a=o.distanceTo(e),l=this.result;if(!(this.skipBackfaces&&t.dot(this._direction)>0))switch(l.hitFaceIndex="undefined"!=typeof r?r:-1,this.mode){case c.ALL:this.hasHit=!0,l.set(o,s,t,e,i,n,a),l.hasHit=!0,this.callback(l);break;case c.CLOSEST:(a<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,s,t,e,i,n,a));break;case c.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,s,t,e,i,n,a),l._shouldStop=!0}};var L=new n,k=new n},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(t,e,i){var n=t("../math/Vec3");function r(){this.rayFromWorld=new n,this.rayToWorld=new n,this.hitNormalWorld=new n,this.hitPointWorld=new n,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}e.exports=r,r.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},r.prototype.abort=function(){this._shouldStop=!0},r.prototype.set=function(t,e,i,n,r,o,s){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(n),this.shape=r,this.body=o,this.distance=s}},{"../math/Vec3":30}],11:[function(t,e,i){t("../shapes/Shape");var n=t("../collision/Broadphase");function r(t){n.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var i=e.indexOf(t.body);-1!==i&&e.splice(i,1)},t&&this.setWorld(t)}e.exports=r,r.prototype=new n,r.prototype.setWorld=function(t){this.axisList.length=0;for(var e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0},r.insertionSortX=function(t){for(var e=1,i=t.length;e<i;e++){for(var n=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.x<=n.aabb.lowerBound.x);r--)t[r+1]=t[r];t[r+1]=n}return t},r.insertionSortY=function(t){for(var e=1,i=t.length;e<i;e++){for(var n=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.y<=n.aabb.lowerBound.y);r--)t[r+1]=t[r];t[r+1]=n}return t},r.insertionSortZ=function(t){for(var e=1,i=t.length;e<i;e++){for(var n=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.z<=n.aabb.lowerBound.z);r--)t[r+1]=t[r];t[r+1]=n}return t},r.prototype.collisionPairs=function(t,e,i){var n,o,s=this.axisList,a=s.length,l=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),n=0;n!==a;n++){var c=s[n];for(o=n+1;o<a;o++){var u=s[o];if(this.needBroadphaseCollision(c,u)){if(!r.checkBounds(c,u,l))break;this.intersectionTest(c,u,e,i)}}}},r.prototype.sortList=function(){for(var t=this.axisList,e=this.axisIndex,i=t.length,n=0;n!==i;n++){var o=t[n];o.aabbNeedsUpdate&&o.computeAABB()}0===e?r.insertionSortX(t):1===e?r.insertionSortY(t):2===e&&r.insertionSortZ(t)},r.checkBounds=function(t,e,i){var n,r;0===i?(n=t.position.x,r=e.position.x):1===i?(n=t.position.y,r=e.position.y):2===i&&(n=t.position.z,r=e.position.z);var o=t.boundingRadius,s=e.boundingRadius;return r-s<n+o},r.prototype.autoDetectAxis=function(){for(var t=0,e=0,i=0,n=0,r=0,o=0,s=this.axisList,a=s.length,l=1/a,c=0;c!==a;c++){var u=s[c],h=u.position.x;t+=h,e+=h*h;var p=u.position.y;i+=p,n+=p*p;var d=u.position.z;r+=d,o+=d*d}var f=e-t*t*l,m=n-i*i*l,g=o-r*r*l;this.axisIndex=f>m?f>g?0:2:m>g?1:2},r.prototype.aabbQuery=function(t,e,i){i=i||[],this.dirty&&(this.sortList(),this.dirty=!1);var n=this.axisIndex,r="x";1===n&&(r="y"),2===n&&(r="z");for(var o=this.axisList,s=(e.lowerBound[r],e.upperBound[r],0);s<o.length;s++){var a=o[s];a.aabbNeedsUpdate&&a.computeAABB(),a.aabb.overlaps(e)&&i.push(a)}return i}},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(t,e,i){e.exports=a;t("./Constraint");var n=t("./PointToPointConstraint"),r=t("../equations/ConeEquation"),o=t("../equations/RotationalEquation"),s=(t("../equations/ContactEquation"),t("../math/Vec3"));function a(t,e,i){var a="undefined"!=typeof(i=i||{}).maxForce?i.maxForce:1e6,l=i.pivotA?i.pivotA.clone():new s,c=i.pivotB?i.pivotB.clone():new s;this.axisA=i.axisA?i.axisA.clone():new s,this.axisB=i.axisB?i.axisB.clone():new s,n.call(this,t,l,e,c,a),this.collideConnected=!!i.collideConnected,this.angle="undefined"!=typeof i.angle?i.angle:0;var u=this.coneEquation=new r(t,e,i),h=this.twistEquation=new o(t,e,i);this.twistAngle="undefined"!=typeof i.twistAngle?i.twistAngle:0,u.maxForce=0,u.minForce=-a,h.maxForce=0,h.minForce=-a,this.equations.push(u,h)}a.prototype=new n,a.constructor=a;new s,new s;a.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=this.coneEquation,r=this.twistEquation;n.prototype.update.call(this),t.vectorToWorldFrame(this.axisA,i.axisA),e.vectorToWorldFrame(this.axisB,i.axisB),this.axisA.tangents(r.axisA,r.axisA),t.vectorToWorldFrame(r.axisA,r.axisA),this.axisB.tangents(r.axisB,r.axisB),e.vectorToWorldFrame(r.axisB,r.axisB),i.angle=this.angle,r.maxAngle=this.twistAngle}},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(t,e,i){e.exports=r;var n=t("../utils/Utils");function r(t,e,i){i=n.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=r.idCounter++,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.prototype.enable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!0},r.prototype.disable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!1},r.idCounter=0},{"../utils/Utils":53}],14:[function(t,e,i){e.exports=o;var n=t("./Constraint"),r=t("../equations/ContactEquation");function o(t,e,i,o){n.call(this,t,e),"undefined"==typeof i&&(i=t.position.distanceTo(e.position)),"undefined"==typeof o&&(o=1e6),this.distance=i;var s=this.distanceEquation=new r(t,e);this.equations.push(s),s.minForce=-o,s.maxForce=o}o.prototype=new n,o.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=this.distanceEquation,n=.5*this.distance,r=i.ni;e.position.vsub(t.position,r),r.normalize(),r.mult(n,i.ri),r.mult(-n,i.rj)}},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(t,e,i){e.exports=a;t("./Constraint");var n=t("./PointToPointConstraint"),r=t("../equations/RotationalEquation"),o=t("../equations/RotationalMotorEquation"),s=(t("../equations/ContactEquation"),t("../math/Vec3"));function a(t,e,i){var a="undefined"!=typeof(i=i||{}).maxForce?i.maxForce:1e6,l=i.pivotA?i.pivotA.clone():new s,c=i.pivotB?i.pivotB.clone():new s;n.call(this,t,l,e,c,a),(this.axisA=i.axisA?i.axisA.clone():new s(1,0,0)).normalize(),(this.axisB=i.axisB?i.axisB.clone():new s(1,0,0)).normalize();var u=this.rotationalEquation1=new r(t,e,i),h=this.rotationalEquation2=new r(t,e,i),p=this.motorEquation=new o(t,e,a);p.enabled=!1,this.equations.push(u,h,p)}a.prototype=new n,a.constructor=a,a.prototype.enableMotor=function(){this.motorEquation.enabled=!0},a.prototype.disableMotor=function(){this.motorEquation.enabled=!1},a.prototype.setMotorSpeed=function(t){this.motorEquation.targetVelocity=t},a.prototype.setMotorMaxForce=function(t){this.motorEquation.maxForce=t,this.motorEquation.minForce=-t};var l=new s,c=new s;a.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=this.motorEquation,r=this.rotationalEquation1,o=this.rotationalEquation2,s=l,a=c,u=this.axisA,h=this.axisB;n.prototype.update.call(this),t.quaternion.vmult(u,s),e.quaternion.vmult(h,a),s.tangents(r.axisA,o.axisA),r.axisB.copy(a),o.axisB.copy(a),this.motorEquation.enabled&&(t.quaternion.vmult(this.axisA,i.axisA),e.quaternion.vmult(this.axisB,i.axisB))}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(t,e,i){e.exports=s;t("./Constraint");var n=t("./PointToPointConstraint"),r=t("../equations/RotationalEquation"),o=(t("../equations/RotationalMotorEquation"),t("../equations/ContactEquation"),t("../math/Vec3"));function s(t,e,i){var s="undefined"!=typeof(i=i||{}).maxForce?i.maxForce:1e6,a=new o,l=new o,c=new o;t.position.vadd(e.position,c),c.scale(.5,c),e.pointToLocalFrame(c,l),t.pointToLocalFrame(c,a),n.call(this,t,a,e,l,s);var u=this.rotationalEquation1=new r(t,e,i),h=this.rotationalEquation2=new r(t,e,i),p=this.rotationalEquation3=new r(t,e,i);this.equations.push(u,h,p)}s.prototype=new n,s.constructor=s;new o,new o;s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=(this.motorEquation,this.rotationalEquation1),r=this.rotationalEquation2,s=this.rotationalEquation3;n.prototype.update.call(this),t.vectorToWorldFrame(o.UNIT_X,i.axisA),e.vectorToWorldFrame(o.UNIT_Y,i.axisB),t.vectorToWorldFrame(o.UNIT_Y,r.axisA),e.vectorToWorldFrame(o.UNIT_Z,r.axisB),t.vectorToWorldFrame(o.UNIT_Z,s.axisA),e.vectorToWorldFrame(o.UNIT_X,s.axisB)}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(t,e,i){e.exports=s;var n=t("./Constraint"),r=t("../equations/ContactEquation"),o=t("../math/Vec3");function s(t,e,i,s,a){n.call(this,t,i),a="undefined"!=typeof a?a:1e6,this.pivotA=e?e.clone():new o,this.pivotB=s?s.clone():new o;var l=this.equationX=new r(t,i),c=this.equationY=new r(t,i),u=this.equationZ=new r(t,i);this.equations.push(l,c,u),l.minForce=c.minForce=u.minForce=-a,l.maxForce=c.maxForce=u.maxForce=a,l.ni.set(1,0,0),c.ni.set(0,1,0),u.ni.set(0,0,1)}s.prototype=new n,s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=this.equationX,n=this.equationY,r=this.equationZ;t.quaternion.vmult(this.pivotA,i.ri),e.quaternion.vmult(this.pivotB,i.rj),n.ri.copy(i.ri),n.rj.copy(i.rj),r.ri.copy(i.ri),r.rj.copy(i.rj)}},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(t,e,i){e.exports=o;var n=t("../math/Vec3"),r=(t("../math/Mat3"),t("./Equation"));function o(t,e,i){var o="undefined"!=typeof(i=i||{}).maxForce?i.maxForce:1e6;r.call(this,t,e,-o,o),this.axisA=i.axisA?i.axisA.clone():new n(1,0,0),this.axisB=i.axisB?i.axisB.clone():new n(0,1,0),this.angle="undefined"!=typeof i.angle?i.angle:0}o.prototype=new r,o.prototype.constructor=o;var s=new n,a=new n;o.prototype.computeB=function(t){var e=this.a,i=this.b,n=this.axisA,r=this.axisB,o=s,l=a,c=this.jacobianElementA,u=this.jacobianElementB;return n.cross(r,o),r.cross(n,l),c.rotational.copy(l),u.rotational.copy(o),-(Math.cos(this.angle)-n.dot(r))*e-this.computeGW()*i-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(t,e,i){e.exports=o;var n=t("./Equation"),r=t("../math/Vec3");t("../math/Mat3");function o(t,e,i){i="undefined"!=typeof i?i:1e6,n.call(this,t,e,0,i),this.restitution=0,this.ri=new r,this.rj=new r,this.ni=new r}o.prototype=new n,o.prototype.constructor=o;var s=new r,a=new r,l=new r;o.prototype.computeB=function(t){var e=this.a,i=this.b,n=this.bi,r=this.bj,o=this.ri,c=this.rj,u=s,h=a,p=n.velocity,d=n.angularVelocity,f=(n.force,n.torque,r.velocity),m=r.angularVelocity,g=(r.force,r.torque,l),y=this.jacobianElementA,_=this.jacobianElementB,v=this.ni;o.cross(v,u),c.cross(v,h),v.negate(y.spatial),u.negate(y.rotational),_.spatial.copy(v),_.rotational.copy(h),g.copy(r.position),g.vadd(c,g),g.vsub(n.position,g),g.vsub(o,g);var b=v.dot(g),x=this.restitution+1;return-b*e-(x*f.dot(v)-x*p.dot(v)+m.dot(h)-d.dot(u))*i-t*this.computeGiMf()};var c=new r,u=new r,h=new r,p=new r,d=new r;o.prototype.getImpactVelocityAlongNormal=function(){var t=c,e=u,i=h,n=p,r=d;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,n),this.bi.getVelocityAtWorldPoint(i,t),this.bj.getVelocityAtWorldPoint(n,e),t.vsub(e,r),this.ni.dot(r)}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(t,e,i){e.exports=o;var n=t("../math/JacobianElement"),r=t("../math/Vec3");function o(t,e,i,r){this.id=o.id++,this.minForce="undefined"==typeof i?-1e6:i,this.maxForce="undefined"==typeof r?1e6:r,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new n,this.jacobianElementB=new n,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}o.prototype.constructor=o,o.id=0,o.prototype.setSpookParams=function(t,e,i){var n=e,r=t,o=i;this.a=4/(o*(1+4*n)),this.b=4*n/(1+4*n),this.eps=4/(o*o*r*(1+4*n))},o.prototype.computeB=function(t,e,i){var n=this.computeGW();return-this.computeGq()*t-n*e-this.computeGiMf()*i},o.prototype.computeGq=function(){var t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.position,o=n.position;return t.spatial.dot(r)+e.spatial.dot(o)};var s=new r;o.prototype.computeGW=function(){var t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.velocity,o=n.velocity,a=i.angularVelocity||s,l=n.angularVelocity||s;return t.multiplyVectors(r,a)+e.multiplyVectors(o,l)},o.prototype.computeGWlambda=function(){var t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.vlambda,o=n.vlambda,a=i.wlambda||s,l=n.wlambda||s;return t.multiplyVectors(r,a)+e.multiplyVectors(o,l)};var a=new r,l=new r,c=new r,u=new r;o.prototype.computeGiMf=function(){var t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.force,o=i.torque,s=n.force,h=n.torque,p=i.invMassSolve,d=n.invMassSolve;return i.invInertiaWorldSolve?i.invInertiaWorldSolve.vmult(o,c):c.set(0,0,0),n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(h,u):u.set(0,0,0),r.mult(p,a),s.mult(d,l),t.multiplyVectors(a,c)+e.multiplyVectors(l,u)};var h=new r;o.prototype.computeGiMGt=function(){var t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.invMassSolve,o=n.invMassSolve,s=i.invInertiaWorldSolve,a=n.invInertiaWorldSolve,l=r+o;return s&&(s.vmult(t.rotational,h),l+=h.dot(t.rotational)),a&&(a.vmult(e.rotational,h),l+=h.dot(e.rotational)),l};var p=new r;new r,new r,new r,new r,new r;o.prototype.addToWlambda=function(t){var e=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,r=this.bj,o=p;e.spatial.mult(n.invMassSolve*t,o),n.vlambda.vadd(o,n.vlambda),i.spatial.mult(r.invMassSolve*t,o),r.vlambda.vadd(o,r.vlambda),n.invInertiaWorldSolve&&(n.invInertiaWorldSolve.vmult(e.rotational,o),o.mult(t,o),n.wlambda.vadd(o,n.wlambda)),r.invInertiaWorldSolve&&(r.invInertiaWorldSolve.vmult(i.rotational,o),o.mult(t,o),r.wlambda.vadd(o,r.wlambda))},o.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(t,e,i){e.exports=o;var n=t("./Equation"),r=t("../math/Vec3");t("../math/Mat3");function o(t,e,i){n.call(this,t,e,-i,i),this.ri=new r,this.rj=new r,this.t=new r}o.prototype=new n,o.prototype.constructor=o;var s=new r,a=new r;o.prototype.computeB=function(t){this.a;var e=this.b,i=(this.bi,this.bj,this.ri),n=this.rj,r=s,o=a,l=this.t;i.cross(l,r),n.cross(l,o);var c=this.jacobianElementA,u=this.jacobianElementB;return l.negate(c.spatial),r.negate(c.rotational),u.spatial.copy(l),u.rotational.copy(o),-this.computeGW()*e-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(t,e,i){e.exports=o;var n=t("../math/Vec3"),r=(t("../math/Mat3"),t("./Equation"));function o(t,e,i){var o="undefined"!=typeof(i=i||{}).maxForce?i.maxForce:1e6;r.call(this,t,e,-o,o),this.axisA=i.axisA?i.axisA.clone():new n(1,0,0),this.axisB=i.axisB?i.axisB.clone():new n(0,1,0),this.maxAngle=Math.PI/2}o.prototype=new r,o.prototype.constructor=o;var s=new n,a=new n;o.prototype.computeB=function(t){var e=this.a,i=this.b,n=this.axisA,r=this.axisB,o=s,l=a,c=this.jacobianElementA,u=this.jacobianElementB;return n.cross(r,o),r.cross(n,l),c.rotational.copy(l),u.rotational.copy(o),-(Math.cos(this.maxAngle)-n.dot(r))*e-this.computeGW()*i-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(t,e,i){e.exports=o;var n=t("../math/Vec3"),r=(t("../math/Mat3"),t("./Equation"));function o(t,e,i){i="undefined"!=typeof i?i:1e6,r.call(this,t,e,-i,i),this.axisA=new n,this.axisB=new n,this.targetVelocity=0}o.prototype=new r,o.prototype.constructor=o,o.prototype.computeB=function(t){this.a;var e=this.b,i=(this.bi,this.bj,this.axisA),n=this.axisB,r=this.jacobianElementA,o=this.jacobianElementB;return r.rotational.copy(i),n.negate(o.rotational),-(this.computeGW()-this.targetVelocity)*e-t*this.computeGiMf()}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(t,e,i){var n=t("../utils/Utils");function r(t,e,i){i=n.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=r.idCounter++,this.materials=[t,e],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}e.exports=r,r.idCounter=0},{"../utils/Utils":53}],25:[function(t,e,i){function n(t){var e="";"string"==typeof(t=t||{})?(e=t,t={}):"object"==typeof t&&(e=""),this.name=e,this.id=n.idCounter++,this.friction="undefined"!=typeof t.friction?t.friction:-1,this.restitution="undefined"!=typeof t.restitution?t.restitution:-1}e.exports=n,n.idCounter=0},{}],26:[function(t,e,i){e.exports=r;var n=t("./Vec3");function r(){this.spatial=new n,this.rotational=new n}r.prototype.multiplyElement=function(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)},r.prototype.multiplyVectors=function(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}},{"./Vec3":30}],27:[function(t,e,i){e.exports=r;var n=t("./Vec3");function r(t){this.elements=t||[0,0,0,0,0,0,0,0,0]}r.prototype.identity=function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1},r.prototype.setZero=function(){var t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0},r.prototype.setTrace=function(t){var e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z},r.prototype.getTrace=function(t){t=t||new n;var e=this.elements;t.x=e[0],t.y=e[4],t.z=e[8]},r.prototype.vmult=function(t,e){e=e||new n;var i=this.elements,r=t.x,o=t.y,s=t.z;return e.x=i[0]*r+i[1]*o+i[2]*s,e.y=i[3]*r+i[4]*o+i[5]*s,e.z=i[6]*r+i[7]*o+i[8]*s,e},r.prototype.smult=function(t){for(var e=0;e<this.elements.length;e++)this.elements[e]*=t},r.prototype.mmult=function(t,e){for(var i=e||new r,n=0;n<3;n++)for(var o=0;o<3;o++){for(var s=0,a=0;a<3;a++)s+=t.elements[n+3*a]*this.elements[a+3*o];i.elements[n+3*o]=s}return i},r.prototype.scale=function(t,e){e=e||new r;for(var i=this.elements,n=e.elements,o=0;3!==o;o++)n[3*o+0]=t.x*i[3*o+0],n[3*o+1]=t.y*i[3*o+1],n[3*o+2]=t.z*i[3*o+2];return e},r.prototype.solve=function(t,e){e=e||new n;for(var i,r=[],o=0;o<12;o++)r.push(0);for(o=0;o<3;o++)for(i=0;i<3;i++)r[o+4*i]=this.elements[o+3*i];r[3]=t.x,r[7]=t.y,r[11]=t.z;var s,a,l=3,c=l;do{if(0===r[(o=c-l)+4*o])for(i=o+1;i<c;i++)if(0!==r[o+4*i]){s=4;do{r[(a=4-s)+4*o]+=r[a+4*i]}while(--s);break}if(0!==r[o+4*o])for(i=o+1;i<c;i++){var u=r[o+4*i]/r[o+4*o];s=4;do{r[(a=4-s)+4*i]=a<=o?0:r[a+4*i]-r[a+4*o]*u}while(--s)}}while(--l);if(e.z=r[11]/r[10],e.y=(r[7]-r[6]*e.z)/r[5],e.x=(r[3]-r[2]*e.z-r[1]*e.y)/r[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw"Could not solve equation! Got x=["+e.toString()+"], b=["+t.toString()+"], A=["+this.toString()+"]";return e},r.prototype.e=function(t,e,i){if(void 0===i)return this.elements[e+3*t];this.elements[e+3*t]=i},r.prototype.copy=function(t){for(var e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this},r.prototype.toString=function(){for(var t="",e=0;e<9;e++)t+=this.elements[e]+",";return t},r.prototype.reverse=function(t){t=t||new r;for(var e,i=[],n=0;n<18;n++)i.push(0);for(n=0;n<3;n++)for(e=0;e<3;e++)i[n+6*e]=this.elements[n+3*e];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;var o,s,a=3,l=a;do{if(0===i[(n=l-a)+6*n])for(e=n+1;e<l;e++)if(0!==i[n+6*e]){o=6;do{i[(s=6-o)+6*n]+=i[s+6*e]}while(--o);break}if(0!==i[n+6*n])for(e=n+1;e<l;e++){var c=i[n+6*e]/i[n+6*n];o=6;do{i[(s=6-o)+6*e]=s<=n?0:i[s+6*e]-i[s+6*n]*c}while(--o)}}while(--a);n=2;do{e=n-1;do{c=i[n+6*e]/i[n+6*n];o=6;do{i[(s=6-o)+6*e]=i[s+6*e]-i[s+6*n]*c}while(--o)}while(e--)}while(--n);n=2;do{c=1/i[n+6*n];o=6;do{i[(s=6-o)+6*n]=i[s+6*n]*c}while(--o)}while(n--);n=2;do{e=2;do{if(s=i[3+e+6*n],isNaN(s)||s===1/0)throw"Could not reverse! A=["+this.toString()+"]";t.e(n,e,s)}while(e--)}while(n--);return t},r.prototype.setRotationFromQuaternion=function(t){var e=t.x,i=t.y,n=t.z,r=t.w,o=e+e,s=i+i,a=n+n,l=e*o,c=e*s,u=e*a,h=i*s,p=i*a,d=n*a,f=r*o,m=r*s,g=r*a,y=this.elements;return y[0]=1-(h+d),y[1]=c-g,y[2]=u+m,y[3]=c+g,y[4]=1-(l+d),y[5]=p-f,y[6]=u-m,y[7]=p+f,y[8]=1-(l+h),this},r.prototype.transpose=function(t){for(var e=(t=t||new r).elements,i=this.elements,n=0;3!==n;n++)for(var o=0;3!==o;o++)e[3*n+o]=i[3*o+n];return t}},{"./Vec3":30}],28:[function(t,e,i){e.exports=r;var n=t("./Vec3");function r(t,e,i,n){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0,this.w=void 0!==n?n:1}r.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.z=i,this.w=n},r.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},r.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},r.prototype.setFromAxisAngle=function(t,e){var i=Math.sin(.5*e);this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(.5*e)},r.prototype.toAxisAngle=function(t){t=t||new n,this.normalize();var e=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/i,t.y=this.y/i,t.z=this.z/i),[t,e]};var o=new n,s=new n;r.prototype.setFromVectors=function(t,e){if(t.isAntiparallelTo(e)){var i=o,n=s;t.tangents(i,n),this.setFromAxisAngle(i,Math.PI)}else{var r=t.cross(e);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(t.norm(),2)*Math.pow(e.norm(),2))+t.dot(e),this.normalize()}};var a=new n,l=new n,c=new n;r.prototype.mult=function(t,e){e=e||new r;var i=this.w,n=a,o=l,s=c;return n.set(this.x,this.y,this.z),o.set(t.x,t.y,t.z),e.w=i*t.w-n.dot(o),n.cross(o,s),e.x=i*o.x+t.w*n.x+s.x,e.y=i*o.y+t.w*n.y+s.y,e.z=i*o.z+t.w*n.z+s.z,e},r.prototype.inverse=function(t){var e=this.x,i=this.y,n=this.z,o=this.w;t=t||new r,this.conjugate(t);var s=1/(e*e+i*i+n*n+o*o);return t.x*=s,t.y*=s,t.z*=s,t.w*=s,t},r.prototype.conjugate=function(t){return(t=t||new r).x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t},r.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t)},r.prototype.normalizeFast=function(){var t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t)},r.prototype.vmult=function(t,e){e=e||new n;var i=t.x,r=t.y,o=t.z,s=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*o-l*r,h=c*r+l*i-s*o,p=c*o+s*r-a*i,d=-s*i-a*r-l*o;return e.x=u*c+d*-s+h*-l-p*-a,e.y=h*c+d*-a+p*-s-u*-l,e.z=p*c+d*-l+u*-a-h*-s,e},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},r.prototype.toEuler=function(t,e){var i,n,r;e=e||"YZX";var o=this.x,s=this.y,a=this.z,l=this.w;switch(e){case"YZX":var c=o*s+a*l;if(c>.499&&(i=2*Math.atan2(o,l),n=Math.PI/2,r=0),c<-.499&&(i=-2*Math.atan2(o,l),n=-Math.PI/2,r=0),isNaN(i)){var u=o*o,h=s*s,p=a*a;i=Math.atan2(2*s*l-2*o*a,1-2*h-2*p),n=Math.asin(2*c),r=Math.atan2(2*o*l-2*s*a,1-2*u-2*p)}break;default:throw new Error("Euler order "+e+" not supported yet.")}t.y=i,t.z=n,t.x=r},r.prototype.setFromEuler=function(t,e,i,n){n=n||"XYZ";var r=Math.cos(t/2),o=Math.cos(e/2),s=Math.cos(i/2),a=Math.sin(t/2),l=Math.sin(e/2),c=Math.sin(i/2);return"XYZ"===n?(this.x=a*o*s+r*l*c,this.y=r*l*s-a*o*c,this.z=r*o*c+a*l*s,this.w=r*o*s-a*l*c):"YXZ"===n?(this.x=a*o*s+r*l*c,this.y=r*l*s-a*o*c,this.z=r*o*c-a*l*s,this.w=r*o*s+a*l*c):"ZXY"===n?(this.x=a*o*s-r*l*c,this.y=r*l*s+a*o*c,this.z=r*o*c+a*l*s,this.w=r*o*s-a*l*c):"ZYX"===n?(this.x=a*o*s-r*l*c,this.y=r*l*s+a*o*c,this.z=r*o*c-a*l*s,this.w=r*o*s+a*l*c):"YZX"===n?(this.x=a*o*s+r*l*c,this.y=r*l*s+a*o*c,this.z=r*o*c-a*l*s,this.w=r*o*s-a*l*c):"XZY"===n&&(this.x=a*o*s-r*l*c,this.y=r*l*s-a*o*c,this.z=r*o*c+a*l*s,this.w=r*o*s+a*l*c),this},r.prototype.clone=function(){return new r(this.x,this.y,this.z,this.w)}},{"./Vec3":30}],29:[function(t,e,i){var n=t("./Vec3"),r=t("./Quaternion");function o(t){t=t||{},this.position=new n,t.position&&this.position.copy(t.position),this.quaternion=new r,t.quaternion&&this.quaternion.copy(t.quaternion)}e.exports=o;var s=new r;o.pointToLocalFrame=function(t,e,i,r){r=r||new n;return i.vsub(t,r),e.conjugate(s),s.vmult(r,r),r},o.prototype.pointToLocal=function(t,e){return o.pointToLocalFrame(this.position,this.quaternion,t,e)},o.pointToWorldFrame=function(t,e,i,r){r=r||new n;return e.vmult(i,r),r.vadd(t,r),r},o.prototype.pointToWorld=function(t,e){return o.pointToWorldFrame(this.position,this.quaternion,t,e)},o.prototype.vectorToWorldFrame=function(t,e){e=e||new n;return this.quaternion.vmult(t,e),e},o.vectorToWorldFrame=function(t,e,i){return t.vmult(e,i),i},o.vectorToLocalFrame=function(t,e,i,r){r=r||new n;return e.w*=-1,e.vmult(i,r),e.w*=-1,r}},{"./Quaternion":28,"./Vec3":30}],30:[function(t,e,i){e.exports=r;var n=t("./Mat3");function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}r.ZERO=new r(0,0,0),r.UNIT_X=new r(1,0,0),r.UNIT_Y=new r(0,1,0),r.UNIT_Z=new r(0,0,1),r.prototype.cross=function(t,e){var i=t.x,n=t.y,o=t.z,s=this.x,a=this.y,l=this.z;return(e=e||new r).x=a*o-l*n,e.y=l*i-s*o,e.z=s*n-a*i,e},r.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},r.prototype.setZero=function(){this.x=this.y=this.z=0},r.prototype.vadd=function(t,e){if(!e)return new r(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z},r.prototype.vsub=function(t,e){if(!e)return new r(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z},r.prototype.crossmat=function(){return new n([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},r.prototype.normalize=function(){var t=this.x,e=this.y,i=this.z,n=Math.sqrt(t*t+e*e+i*i);if(n>0){var r=1/n;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return n},r.prototype.unit=function(t){t=t||new r;var e=this.x,i=this.y,n=this.z,o=Math.sqrt(e*e+i*i+n*n);return o>0?(o=1/o,t.x=e*o,t.y=i*o,t.z=n*o):(t.x=1,t.y=0,t.z=0),t},r.prototype.norm=function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},r.prototype.length=r.prototype.norm,r.prototype.norm2=function(){return this.dot(this)},r.prototype.lengthSquared=r.prototype.norm2,r.prototype.distanceTo=function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z;return Math.sqrt((r-e)*(r-e)+(o-i)*(o-i)+(s-n)*(s-n))},r.prototype.distanceSquared=function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z;return(r-e)*(r-e)+(o-i)*(o-i)+(s-n)*(s-n)},r.prototype.mult=function(t,e){e=e||new r;var i=this.x,n=this.y,o=this.z;return e.x=t*i,e.y=t*n,e.z=t*o,e},r.prototype.scale=r.prototype.mult,r.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},r.prototype.negate=function(t){return(t=t||new r).x=-this.x,t.y=-this.y,t.z=-this.z,t};var o=new r,s=new r;r.prototype.tangents=function(t,e){var i=this.norm();if(i>0){var n=o,r=1/i;n.set(this.x*r,this.y*r,this.z*r);var a=s;Math.abs(n.x)<.9?(a.set(1,0,0),n.cross(a,t)):(a.set(0,1,0),n.cross(a,t)),n.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)},r.prototype.toString=function(){return this.x+","+this.y+","+this.z},r.prototype.toArray=function(){return[this.x,this.y,this.z]},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},r.prototype.lerp=function(t,e,i){var n=this.x,r=this.y,o=this.z;i.x=n+(t.x-n)*e,i.y=r+(t.y-r)*e,i.z=o+(t.z-o)*e},r.prototype.almostEquals=function(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)},r.prototype.almostZero=function(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)};var a=new r;r.prototype.isAntiparallelTo=function(t,e){return this.negate(a),a.almostEquals(t,e)},r.prototype.clone=function(){return new r(this.x,this.y,this.z)}},{"./Mat3":27}],31:[function(t,e,i){e.exports=c;var n=t("../utils/EventTarget"),r=(t("../shapes/Shape"),t("../math/Vec3")),o=t("../math/Mat3"),s=t("../math/Quaternion"),a=(t("../material/Material"),t("../collision/AABB")),l=t("../shapes/Box");function c(t){t=t||{},n.apply(this),this.id=c.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new r,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:1,this.collisionResponse=!0,this.position=new r,t.position&&this.position.copy(t.position),this.previousPosition=new r,this.initPosition=new r,this.velocity=new r,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new r,this.force=new r;var e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?c.STATIC:c.DYNAMIC,typeof t.type==typeof c.STATIC&&(this.type=t.type),this.allowSleep="undefined"==typeof t.allowSleep||t.allowSleep,this.sleepState=0,this.sleepSpeedLimit="undefined"!=typeof t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit="undefined"!=typeof t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new r,this.quaternion=new s,t.quaternion&&this.quaternion.copy(t.quaternion),this.initQuaternion=new s,this.angularVelocity=new r,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new r,this.interpolatedPosition=new r,this.interpolatedQuaternion=new s,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new r,this.invInertia=new r,this.invInertiaWorld=new o,this.invMassSolve=0,this.invInertiaSolve=new r,this.invInertiaWorldSolve=new o,this.fixedRotation="undefined"!=typeof t.fixedRotation&&t.fixedRotation,this.angularDamping="undefined"!=typeof t.angularDamping?t.angularDamping:.01,this.aabb=new a,this.aabbNeedsUpdate=!0,this.wlambda=new r,t.shape&&this.addShape(t.shape),this.updateMassProperties()}c.prototype=new n,c.prototype.constructor=c,c.DYNAMIC=1,c.STATIC=2,c.KINEMATIC=4,c.AWAKE=0,c.SLEEPY=1,c.SLEEPING=2,c.idCounter=0,c.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=0,t===c.SLEEPING&&this.dispatchEvent({type:"wakeup"})},c.prototype.sleep=function(){this.sleepState=c.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},c.sleepyEvent={type:"sleepy"},c.sleepEvent={type:"sleep"},c.prototype.sleepTick=function(t){if(this.allowSleep){var e=this.sleepState,i=this.velocity.norm2()+this.angularVelocity.norm2(),n=Math.pow(this.sleepSpeedLimit,2);e===c.AWAKE&&i<n?(this.sleepState=c.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(c.sleepyEvent)):e===c.SLEEPY&&i>n?this.wakeUp():e===c.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(c.sleepEvent))}},c.prototype.updateSolveMassProperties=function(){this.sleepState===c.SLEEPING||this.type===c.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},c.prototype.pointToLocalFrame=function(t,e){e=e||new r;return t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e},c.prototype.vectorToLocalFrame=function(t,e){e=e||new r;return this.quaternion.conjugate().vmult(t,e),e},c.prototype.pointToWorldFrame=function(t,e){e=e||new r;return this.quaternion.vmult(t,e),e.vadd(this.position,e),e},c.prototype.vectorToWorldFrame=function(t,e){e=e||new r;return this.quaternion.vmult(t,e),e};var u=new r,h=new s;c.prototype.addShape=function(t,e,i){var n=new r,o=new s;return e&&n.copy(e),i&&o.copy(i),this.shapes.push(t),this.shapeOffsets.push(n),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},c.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=this.shapeOffsets,i=t.length,n=0,r=0;r!==i;r++){var o=t[r];o.updateBoundingSphereRadius();var s=e[r].norm(),a=o.boundingSphereRadius;s+a>n&&(n=s+a)}this.boundingRadius=n};var p=new a;c.prototype.computeAABB=function(){for(var t=this.shapes,e=this.shapeOffsets,i=this.shapeOrientations,n=t.length,r=u,o=h,s=this.quaternion,a=this.aabb,l=p,c=0;c!==n;c++){var d=t[c];i[c].mult(s,o),o.vmult(e[c],r),r.vadd(this.position,r),d.calculateWorldAABB(r,o,l.lowerBound,l.upperBound),0===c?a.copy(l):a.extend(l)}this.aabbNeedsUpdate=!1};var d=new o,f=new o;new o;c.prototype.updateInertiaWorld=function(t){var e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){var i=d,n=f;i.setRotationFromQuaternion(this.quaternion),i.transpose(n),i.scale(e,i),i.mmult(n,this.invInertiaWorld)}else;};var m=new r,g=new r;c.prototype.applyForce=function(t,e){if(this.type===c.DYNAMIC){var i=m;e.vsub(this.position,i);var n=g;i.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}};var y=new r,_=new r;c.prototype.applyLocalForce=function(t,e){if(this.type===c.DYNAMIC){var i=y,n=_;this.vectorToWorldFrame(t,i),this.pointToWorldFrame(e,n),this.applyForce(i,n)}};var v=new r,b=new r,x=new r;c.prototype.applyImpulse=function(t,e){if(this.type===c.DYNAMIC){var i=v;e.vsub(this.position,i);var n=b;n.copy(t),n.mult(this.invMass,n),this.velocity.vadd(n,this.velocity);var r=x;i.cross(t,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}};var A=new r,w=new r;c.prototype.applyLocalImpulse=function(t,e){if(this.type===c.DYNAMIC){var i=A,n=w;this.vectorToWorldFrame(t,i),this.pointToWorldFrame(e,n),this.applyImpulse(i,n)}};var P=new r;c.prototype.updateMassProperties=function(){var t=P;this.invMass=this.mass>0?1/this.mass:0;var e=this.inertia,i=this.fixedRotation;this.computeAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),l.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!i?1/e.x:0,e.y>0&&!i?1/e.y:0,e.z>0&&!i?1/e.z:0),this.updateInertiaWorld(!0)},c.prototype.getVelocityAtWorldPoint=function(t,e){var i=new r;return t.vsub(this.position,i),this.angularVelocity.cross(i,e),this.velocity.vadd(e,e),e}},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(t,e,i){t("./Body");var n=t("../math/Vec3"),r=t("../math/Quaternion"),o=(t("../collision/RaycastResult"),t("../collision/Ray")),s=t("../objects/WheelInfo");function a(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis="undefined"!=typeof t.indexRightAxis?t.indexRightAxis:1,this.indexForwardAxis="undefined"!=typeof t.indexForwardAxis?t.indexForwardAxis:0,this.indexUpAxis="undefined"!=typeof t.indexUpAxis?t.indexUpAxis:2}e.exports=a;new n,new n,new n;var l=new n,c=new n,u=new n;new o;a.prototype.addWheel=function(t){var e=new s(t=t||{}),i=this.wheelInfos.length;return this.wheelInfos.push(e),i},a.prototype.setSteeringValue=function(t,e){this.wheelInfos[e].steering=t};new n;a.prototype.applyEngineForce=function(t,e){this.wheelInfos[e].engineForce=t},a.prototype.setBrake=function(t,e){this.wheelInfos[e].brake=t},a.prototype.addToWorld=function(t){this.constraints;t.add(this.chassisBody);var e=this;this.preStepCallback=function(){e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t},a.prototype.getVehicleAxisWorld=function(t,e){e.set(0===t?1:0,1===t?1:0,2===t?1:0),this.chassisBody.vectorToWorldFrame(e,e)},a.prototype.updateVehicle=function(t){for(var e=this.wheelInfos,i=e.length,r=this.chassisBody,o=0;o<i;o++)this.updateWheelTransform(o);this.currentVehicleSpeedKmHour=3.6*r.velocity.norm();var s=new n;this.getVehicleAxisWorld(this.indexForwardAxis,s),s.dot(r.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(o=0;o<i;o++)this.castRay(e[o]);this.updateSuspension(t);var a=new n,l=new n;for(o=0;o<i;o++){var c=(d=e[o]).suspensionForce;c>d.maxSuspensionForce&&(c=d.maxSuspensionForce),d.raycastResult.hitNormalWorld.scale(c*t,a),d.raycastResult.hitPointWorld.vsub(r.position,l),r.applyImpulse(a,d.raycastResult.hitPointWorld)}this.updateFriction(t);var u=new n,h=new n,p=new n;for(o=0;o<i;o++){var d=e[o];r.getVelocityAtWorldPoint(d.chassisConnectionPointWorld,p);var f=1;switch(this.indexUpAxis){case 1:f=-1}if(d.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,h);var m=h.dot(d.raycastResult.hitNormalWorld);d.raycastResult.hitNormalWorld.scale(m,u),h.vsub(u,h);var g=h.dot(p);d.deltaRotation=f*g*t/d.radius}!d.sliding&&d.isInContact||0===d.engineForce||!d.useCustomSlidingRotationalSpeed||(d.deltaRotation=(d.engineForce>0?1:-1)*d.customSlidingRotationalSpeed*t),Math.abs(d.brake)>Math.abs(d.engineForce)&&(d.deltaRotation=0),d.rotation+=d.deltaRotation,d.deltaRotation*=.99}},a.prototype.updateSuspension=function(t){for(var e=this.chassisBody.mass,i=this.wheelInfos,n=i.length,r=0;r<n;r++){var o=i[r];if(o.isInContact){var s,a=o.suspensionRestLength-o.suspensionLength;s=o.suspensionStiffness*a*o.clippedInvContactDotSuspension;var l=o.suspensionRelativeVelocity;s-=(l<0?o.dampingCompression:o.dampingRelaxation)*l,o.suspensionForce=s*e,o.suspensionForce<0&&(o.suspensionForce=0)}else o.suspensionForce=0}},a.prototype.removeFromWorld=function(t){this.constraints;t.remove(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null};var h=new n,p=new n;a.prototype.castRay=function(t){var e=h,i=p;this.updateWheelTransformWorld(t);var r=this.chassisBody,o=-1,s=t.suspensionRestLength+t.radius;t.directionWorld.scale(s,e);var a=t.chassisConnectionPointWorld;a.vadd(e,i);var l=t.raycastResult;l.reset();var c=r.collisionResponse;r.collisionResponse=!1,this.world.rayTest(a,i,l),r.collisionResponse=c;var u=l.body;if(t.raycastResult.groundObject=0,u){o=l.distance,t.raycastResult.hitNormalWorld=l.hitNormalWorld,t.isInContact=!0;var d=l.distance;t.suspensionLength=d-t.radius;var f=t.suspensionRestLength-t.maxSuspensionTravel,m=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<f&&(t.suspensionLength=f),t.suspensionLength>m&&(t.suspensionLength=m,t.raycastResult.reset());var g=t.raycastResult.hitNormalWorld.dot(t.directionWorld),y=new n;r.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,y);var _=t.raycastResult.hitNormalWorld.dot(y);if(g>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=10;else{var v=-1/g;t.suspensionRelativeVelocity=_*v,t.clippedInvContactDotSuspension=v}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return o},a.prototype.updateWheelTransformWorld=function(t){t.isInContact=!1;var e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)},a.prototype.updateWheelTransform=function(t){var e=l,i=c,n=u,o=this.wheelInfos[t];this.updateWheelTransformWorld(o),o.directionLocal.scale(-1,e),i.copy(o.axleLocal),e.cross(i,n),n.normalize(),i.normalize();var s=o.steering,a=new r;a.setFromAxisAngle(e,s);var h=new r;h.setFromAxisAngle(i,o.rotation);var p=o.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,p),p.mult(h,p),p.normalize();var d=o.worldTransform.position;d.copy(o.directionWorld),d.scale(o.suspensionLength,d),d.vadd(o.chassisConnectionPointWorld,d)};var d=[new n(1,0,0),new n(0,1,0),new n(0,0,1)];a.prototype.getWheelTransformWorld=function(t){return this.wheelInfos[t].worldTransform};var f=new n,m=[],g=[];a.prototype.updateFriction=function(t){for(var e=f,i=this.wheelInfos,r=i.length,o=this.chassisBody,s=g,a=m,l=0;l<r;l++){(p=(T=i[l]).raycastResult.body)&&0,T.sideImpulse=0,T.forwardImpulse=0,s[l]||(s[l]=new n),a[l]||(a[l]=new n)}for(l=0;l<r;l++){if(p=(T=i[l]).raycastResult.body){var c=a[l];this.getWheelTransformWorld(l).vectorToWorldFrame(d[this.indexRightAxis],c);var u=T.raycastResult.hitNormalWorld,h=c.dot(u);u.scale(h,e),c.vsub(e,c),c.normalize(),u.cross(c,s[l]),s[l].normalize(),T.sideImpulse=O(o,T.raycastResult.hitPointWorld,p,T.raycastResult.hitPointWorld,c),T.sideImpulse*=1}}this.sliding=!1;for(l=0;l<r;l++){var p=(T=i[l]).raycastResult.body,y=0;if(T.slipInfo=1,p){var _=T.brake?T.brake:0;y=b(o,p,T.raycastResult.hitPointWorld,s[l],_);var v=_/(y+=T.engineForce*t);T.slipInfo*=v}if(T.forwardImpulse=0,T.skidInfo=1,p){T.skidInfo=1;var x=T.suspensionForce*t*T.frictionSlip,A=x*x;T.forwardImpulse=y;var w=.5*T.forwardImpulse,P=1*T.sideImpulse,E=w*w+P*P;if(T.sliding=!1,E>A){this.sliding=!0,T.sliding=!0;v=x/Math.sqrt(E);T.skidInfo*=v}}}if(this.sliding)for(l=0;l<r;l++){0!==(T=i[l]).sideImpulse&&T.skidInfo<1&&(T.forwardImpulse*=T.skidInfo,T.sideImpulse*=T.skidInfo)}for(l=0;l<r;l++){var T=i[l],S=new n;if(S.copy(T.raycastResult.hitPointWorld),0!==T.forwardImpulse){var C=new n;s[l].scale(T.forwardImpulse,C),o.applyImpulse(C,S)}if(0!==T.sideImpulse){p=T.raycastResult.body;var M=new n;M.copy(T.raycastResult.hitPointWorld);var R=new n;a[l].scale(T.sideImpulse,R),o.pointToLocalFrame(S,S),S["xyz"[this.indexUpAxis]]*=T.rollInfluence,o.pointToWorldFrame(S,S),o.applyImpulse(R,S),R.scale(-1,R),p.applyImpulse(R,M)}}};var y=new n,_=new n,v=new n;function b(t,e,i,n,r){var o=0,s=i,a=y,l=_,c=v;t.getVelocityAtWorldPoint(s,a),e.getVelocityAtWorldPoint(s,l),a.vsub(l,c);return r<(o=-n.dot(c)*(1/(E(t,i,n)+E(e,i,n))))&&(o=r),o<-r&&(o=-r),o}var x=new n,A=new n,w=new n,P=new n;function E(t,e,i){var n=x,r=A,o=w,s=P;return e.vsub(t.position,n),n.cross(i,r),t.invInertiaWorld.vmult(r,s),s.cross(n,o),t.invMass+i.dot(o)}var T=new n,S=new n,C=new n;function O(t,e,i,n,r,o){if(r.norm2()>1.1)return 0;var s=T,a=S,l=C;t.getVelocityAtWorldPoint(e,s),i.getVelocityAtWorldPoint(n,a),s.vsub(a,l);return-.2*r.dot(l)*(1/(t.invMass+i.invMass))}},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(t,e,i){var n=t("./Body"),r=t("../shapes/Sphere"),o=t("../shapes/Box"),s=t("../math/Vec3"),a=t("../constraints/HingeConstraint");function l(t){if(this.wheelBodies=[],this.coordinateSystem="undefined"==typeof t.coordinateSystem?new s(1,2,3):t.coordinateSystem.clone(),this.chassisBody=t.chassisBody,!this.chassisBody){var e=new o(new s(5,2,.5));this.chassisBody=new n(1,e)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}e.exports=l,l.prototype.addWheel=function(t){var e=(t=t||{}).body;e||(e=new n(1,new r(1.2))),this.wheelBodies.push(e),this.wheelForces.push(0);new s;var i="undefined"!=typeof t.position?t.position.clone():new s,o=new s;this.chassisBody.pointToWorldFrame(i,o),e.position.set(o.x,o.y,o.z);var l="undefined"!=typeof t.axis?t.axis.clone():new s(0,1,0);this.wheelAxes.push(l);var c=new a(this.chassisBody,e,{pivotA:i,axisA:l,pivotB:s.ZERO,axisB:l,collideConnected:!1});return this.constraints.push(c),this.wheelBodies.length-1},l.prototype.setSteeringValue=function(t,e){var i=this.wheelAxes[e],n=Math.cos(t),r=Math.sin(t),o=i.x,s=i.y;this.constraints[e].axisA.set(n*o-r*s,r*o+n*s,0)},l.prototype.setMotorSpeed=function(t,e){var i=this.constraints[e];i.enableMotor(),i.motorTargetVelocity=t},l.prototype.disableMotor=function(t){this.constraints[t].disableMotor()};var c=new s;l.prototype.setWheelForce=function(t,e){this.wheelForces[e]=t},l.prototype.applyWheelForce=function(t,e){var i=this.wheelAxes[e],n=this.wheelBodies[e],r=n.torque;i.scale(t,c),n.vectorToWorldFrame(c,c),r.vadd(c,r)},l.prototype.addToWorld=function(t){for(var e=this.constraints,i=this.wheelBodies.concat([this.chassisBody]),n=0;n<i.length;n++)t.add(i[n]);for(n=0;n<e.length;n++)t.addConstraint(e[n]);t.addEventListener("preStep",this._update.bind(this))},l.prototype._update=function(){for(var t=this.wheelForces,e=0;e<t.length;e++)this.applyWheelForce(t[e],e)},l.prototype.removeFromWorld=function(t){for(var e=this.constraints,i=this.wheelBodies.concat([this.chassisBody]),n=0;n<i.length;n++)t.remove(i[n]);for(n=0;n<e.length;n++)t.removeConstraint(e[n])};var u=new s;l.prototype.getWheelSpeed=function(t){var e=this.wheelAxes[t],i=this.wheelBodies[t].angularVelocity;return this.chassisBody.vectorToWorldFrame(e,u),i.dot(u)}},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(t,e,i){e.exports=r;t("../shapes/Shape");var n=t("../math/Vec3");t("../math/Quaternion"),t("../shapes/Particle"),t("../objects/Body"),t("../material/Material");function r(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}r.prototype.add=function(t){this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])},r.prototype.remove=function(t){var e=this.particles.indexOf(t);-1!==e&&(this.particles.splice(e,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var o=new n;r.prototype.getNeighbors=function(t,e){for(var i=this.particles.length,n=t.id,r=this.smoothingRadius*this.smoothingRadius,s=o,a=0;a!==i;a++){var l=this.particles[a];l.position.vsub(t.position,s),n!==l.id&&s.norm2()<r&&e.push(l)}};var s=new n,a=new n,l=new n,c=new n,u=new n,h=new n;r.prototype.update=function(){for(var t=this.particles.length,e=s,i=this.speedOfSound,n=this.eps,r=0;r!==t;r++){var o=this.particles[r];(E=this.neighbors[r]).length=0,this.getNeighbors(o,E),E.push(this.particles[r]);for(var p=E.length,d=0,f=0;f!==p;f++){o.position.vsub(E[f].position,e);var m=e.norm(),g=this.w(m);d+=E[f].mass*g}this.densities[r]=d,this.pressures[r]=i*i*(this.densities[r]-this.density)}var y=a,_=l,v=c,b=u,x=h;for(r=0;r!==t;r++){var A,w,P=this.particles[r];y.set(0,0,0),_.set(0,0,0);var E;for(p=(E=this.neighbors[r]).length,f=0;f!==p;f++){var T=E[f];P.position.vsub(T.position,b);var S=b.norm();A=-T.mass*(this.pressures[r]/(this.densities[r]*this.densities[r]+n)+this.pressures[f]/(this.densities[f]*this.densities[f]+n)),this.gradw(b,v),v.mult(A,v),y.vadd(v,y),T.velocity.vsub(P.velocity,x),x.mult(1/(1e-4+this.densities[r]*this.densities[f])*this.viscosity*T.mass,x),w=this.nablaw(S),x.mult(w,x),_.vadd(x,_)}_.mult(P.mass,_),y.mult(P.mass,y),P.force.vadd(_,P.force),P.force.vadd(y,P.force)}},r.prototype.w=function(t){var e=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(e,9))*Math.pow(e*e-t*t,3)},r.prototype.gradw=function(t,e){var i=t.norm(),n=this.smoothingRadius;t.mult(945/(32*Math.PI*Math.pow(n,9))*Math.pow(n*n-i*i,2),e)},r.prototype.nablaw=function(t){var e=this.smoothingRadius;return 945/(32*Math.PI*Math.pow(e,9))*(e*e-t*t)*(7*t*t-3*e*e)}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(t,e,i){var n=t("../math/Vec3");function r(t,e,i){i=i||{},this.restLength="number"==typeof i.restLength?i.restLength:1,this.stiffness=i.stiffness||100,this.damping=i.damping||1,this.bodyA=t,this.bodyB=e,this.localAnchorA=new n,this.localAnchorB=new n,i.localAnchorA&&this.localAnchorA.copy(i.localAnchorA),i.localAnchorB&&this.localAnchorB.copy(i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB)}e.exports=r,r.prototype.setWorldAnchorA=function(t){this.bodyA.pointToLocalFrame(t,this.localAnchorA)},r.prototype.setWorldAnchorB=function(t){this.bodyB.pointToLocalFrame(t,this.localAnchorB)},r.prototype.getWorldAnchorA=function(t){this.bodyA.pointToWorldFrame(this.localAnchorA,t)},r.prototype.getWorldAnchorB=function(t){this.bodyB.pointToWorldFrame(this.localAnchorB,t)};var o=new n,s=new n,a=new n,l=new n,c=new n,u=new n,h=new n,p=new n,d=new n,f=new n,m=new n;r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,g=o,y=s,_=a,v=l,b=m,x=c,A=u,w=h,P=p,E=d,T=f;this.getWorldAnchorA(x),this.getWorldAnchorB(A),x.vsub(n.position,w),A.vsub(r.position,P),A.vsub(x,g);var S=g.norm();y.copy(g),y.normalize(),r.velocity.vsub(n.velocity,_),r.angularVelocity.cross(P,b),_.vadd(b,_),n.angularVelocity.cross(w,b),_.vsub(b,_),y.mult(-t*(S-i)-e*_.dot(y),v),n.force.vsub(v,n.force),r.force.vadd(v,r.force),w.cross(v,E),P.cross(v,T),n.torque.vsub(E,n.torque),r.torque.vadd(T,r.torque)}},{"../math/Vec3":30}],36:[function(t,e,i){var n=t("../math/Vec3"),r=t("../math/Transform"),o=t("../collision/RaycastResult"),s=t("../utils/Utils");function a(t){t=s.defaults(t,{chassisConnectionPointLocal:new n,chassisConnectionPointWorld:new n,directionLocal:new n,directionWorld:new n,axleLocal:new n,axleWorld:new n,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new o,this.worldTransform=new r,this.isInContact=!1}e.exports=a;var l=new n,c=new n;l=new n;a.prototype.updateWheel=function(t){var e=this.raycastResult;if(this.isInContact){var i=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,c),t.getVelocityAtWorldPoint(c,l);var n=e.hitNormalWorld.dot(l);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var r=-1/i;this.suspensionRelativeVelocity=n*r,this.clippedInvContactDotSuspension=r}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(t,e,i){e.exports=s;var n=t("./Shape"),r=t("../math/Vec3"),o=t("./ConvexPolyhedron");function s(t){n.call(this),this.type=n.types.BOX,this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}s.prototype=new n,s.prototype.constructor=s,s.prototype.updateConvexPolyhedronRepresentation=function(){var t=this.halfExtents.x,e=this.halfExtents.y,i=this.halfExtents.z,n=r,s=[new n(-t,-e,-i),new n(t,-e,-i),new n(t,e,-i),new n(-t,e,-i),new n(-t,-e,i),new n(t,-e,i),new n(t,e,i),new n(-t,e,i)],a=(new n(0,0,1),new n(0,1,0),new n(1,0,0),new o(s,[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]]));this.convexPolyhedronRepresentation=a,a.material=this.material},s.prototype.calculateLocalInertia=function(t,e){return e=e||new r,s.calculateInertia(this.halfExtents,t,e),e},s.calculateInertia=function(t,e,i){var n=t;i.x=1/12*e*(2*n.y*2*n.y+2*n.z*2*n.z),i.y=1/12*e*(2*n.x*2*n.x+2*n.z*2*n.z),i.z=1/12*e*(2*n.y*2*n.y+2*n.x*2*n.x)},s.prototype.getSideNormals=function(t,e){var i=t,n=this.halfExtents;if(i[0].set(n.x,0,0),i[1].set(0,n.y,0),i[2].set(0,0,n.z),i[3].set(-n.x,0,0),i[4].set(0,-n.y,0),i[5].set(0,0,-n.z),void 0!==e)for(var r=0;r!==i.length;r++)e.vmult(i[r],i[r]);return i},s.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},s.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var a=new r;new r;s.prototype.forEachWorldCorner=function(t,e,i){for(var n=this.halfExtents,r=[[n.x,n.y,n.z],[-n.x,n.y,n.z],[-n.x,-n.y,n.z],[-n.x,-n.y,-n.z],[n.x,-n.y,-n.z],[n.x,n.y,-n.z],[-n.x,n.y,-n.z],[n.x,-n.y,n.z]],o=0;o<r.length;o++)a.set(r[o][0],r[o][1],r[o][2]),e.vmult(a,a),t.vadd(a,a),i(a.x,a.y,a.z)};var l=[new r,new r,new r,new r,new r,new r,new r,new r];s.prototype.calculateWorldAABB=function(t,e,i,n){var r=this.halfExtents;l[0].set(r.x,r.y,r.z),l[1].set(-r.x,r.y,r.z),l[2].set(-r.x,-r.y,r.z),l[3].set(-r.x,-r.y,-r.z),l[4].set(r.x,-r.y,-r.z),l[5].set(r.x,r.y,-r.z),l[6].set(-r.x,r.y,-r.z),l[7].set(r.x,-r.y,r.z);var o=l[0];e.vmult(o,o),t.vadd(o,o),n.copy(o),i.copy(o);for(var s=1;s<8;s++){o=l[s];e.vmult(o,o),t.vadd(o,o);var a=o.x,c=o.y,u=o.z;a>n.x&&(n.x=a),c>n.y&&(n.y=c),u>n.z&&(n.z=u),a<i.x&&(i.x=a),c<i.y&&(i.y=c),u<i.z&&(i.z=u)}}},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(t,e,i){e.exports=s;var n=t("./Shape"),r=t("../math/Vec3"),o=(t("../math/Quaternion"),t("../math/Transform"));function s(t,e,i){n.call(this),this.type=n.types.CONVEXPOLYHEDRON,this.vertices=t||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=e||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=i?i.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}s.prototype=new n,s.prototype.constructor=s;var a=new r;s.prototype.computeEdges=function(){var t=this.faces,e=this.vertices,i=(e.length,this.uniqueEdges);i.length=0;for(var n=a,r=0;r!==t.length;r++)for(var o=t[r],s=o.length,l=0;l!==s;l++){var c=(l+1)%s;e[o[l]].vsub(e[o[c]],n),n.normalize();for(var u=!1,h=0;h!==i.length;h++)if(i[h].almostEquals(n)||i[h].almostEquals(n)){u=!0;break}u||i.push(n.clone())}},s.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var t=0;t<this.faces.length;t++){for(var e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error("Vertex "+this.faces[t][e]+" not found!");var i=this.faceNormals[t]||new r;this.getFaceNormal(t,i),i.negate(i),this.faceNormals[t]=i;var n=this.vertices[this.faces[t][0]];if(i.dot(n)<0){console.error(".faceNormals["+t+"] = Vec3("+i.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(e=0;e<this.faces[t].length;e++)console.warn(".vertices["+this.faces[t][e]+"] = Vec3("+this.vertices[this.faces[t][e]].toString()+")")}}};var l=new r,c=new r;s.computeNormal=function(t,e,i,n){e.vsub(t,c),i.vsub(e,l),l.cross(c,n),n.isZero()||n.normalize()},s.prototype.getFaceNormal=function(t,e){var i=this.faces[t],n=this.vertices[i[0]],r=this.vertices[i[1]],o=this.vertices[i[2]];return s.computeNormal(n,r,o,e)};var u=new r;s.prototype.clipAgainstHull=function(t,e,i,n,o,s,a,l,c){for(var h=u,p=-1,d=-Number.MAX_VALUE,f=0;f<i.faces.length;f++){h.copy(i.faceNormals[f]),o.vmult(h,h);var m=h.dot(s);m>d&&(d=m,p=f)}for(var g=[],y=i.faces[p],_=y.length,v=0;v<_;v++){var b=i.vertices[y[v]],x=new r;x.copy(b),o.vmult(x,x),n.vadd(x,x),g.push(x)}p>=0&&this.clipFaceAgainstHull(s,t,e,g,a,l,c)};var h=new r,p=new r,d=new r,f=new r,m=new r,g=new r;s.prototype.findSeparatingAxis=function(t,e,i,n,r,o,s,a){var l=h,c=p,u=d,y=f,_=m,v=g,b=Number.MAX_VALUE;if(this.uniqueAxes)for(A=0;A!==this.uniqueAxes.length;A++){if(i.vmult(this.uniqueAxes[A],l),!1===(E=this.testSepAxis(l,t,e,i,n,r)))return!1;E<b&&(b=E,o.copy(l))}else for(var x=s?s.length:this.faces.length,A=0;A<x;A++){var w=s?s[A]:A;if(l.copy(this.faceNormals[w]),i.vmult(l,l),!1===(E=this.testSepAxis(l,t,e,i,n,r)))return!1;E<b&&(b=E,o.copy(l))}if(t.uniqueAxes)for(A=0;A!==t.uniqueAxes.length;A++){if(r.vmult(t.uniqueAxes[A],c),0,!1===(E=this.testSepAxis(c,t,e,i,n,r)))return!1;E<b&&(b=E,o.copy(c))}else for(var P=a?a.length:t.faces.length,A=0;A<P;A++){var E;w=a?a[A]:A;if(c.copy(t.faceNormals[w]),r.vmult(c,c),0,!1===(E=this.testSepAxis(c,t,e,i,n,r)))return!1;E<b&&(b=E,o.copy(c))}for(var T=0;T!==this.uniqueEdges.length;T++){i.vmult(this.uniqueEdges[T],y);for(var S=0;S!==t.uniqueEdges.length;S++)if(r.vmult(t.uniqueEdges[S],_),y.cross(_,v),!v.almostZero()){v.normalize();var C=this.testSepAxis(v,t,e,i,n,r);if(!1===C)return!1;C<b&&(b=C,o.copy(v))}}return n.vsub(e,u),u.dot(o)>0&&o.negate(o),!0};var y=[],_=[];s.prototype.testSepAxis=function(t,e,i,n,r,o){s.project(this,t,i,n,y),s.project(e,t,r,o,_);var a=y[0],l=y[1],c=_[0],u=_[1];if(a<u||c<l)return!1;var h=a-u,p=c-l;return h<p?h:p};var v=new r,b=new r;s.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(v,b);var i=b.x-v.x,n=b.y-v.y,r=b.z-v.z;e.x=1/12*t*(2*n*2*n+2*r*2*r),e.y=1/12*t*(2*i*2*i+2*r*2*r),e.z=1/12*t*(2*n*2*n+2*i*2*i)},s.prototype.getPlaneConstantOfFace=function(t){var e=this.faces[t],i=this.faceNormals[t],n=this.vertices[e[0]];return-i.dot(n)};var x=new r,A=new r,w=new r,P=new r,E=new r,T=new r,S=new r,C=new r;s.prototype.clipFaceAgainstHull=function(t,e,i,n,r,o,s){for(var a=x,l=A,c=w,u=P,h=E,p=T,d=S,f=C,m=n,g=[],y=-1,_=Number.MAX_VALUE,v=0;v<this.faces.length;v++){a.copy(this.faceNormals[v]),i.vmult(a,a);var b=a.dot(t);b<_&&(_=b,y=v)}if(!(y<0)){var O=this.faces[y];O.connectedFaces=[];for(var M=0;M<this.faces.length;M++)for(var R=0;R<this.faces[M].length;R++)-1!==O.indexOf(this.faces[M][R])&&M!==y&&-1===O.connectedFaces.indexOf(M)&&O.connectedFaces.push(M);m.length;for(var I=O.length,D=0;D<I;D++){var L=this.vertices[O[D]],k=this.vertices[O[(D+1)%I]];L.vsub(k,l),c.copy(l),i.vmult(c,c),e.vadd(c,c),u.copy(this.faceNormals[y]),i.vmult(u,u),e.vadd(u,u),c.cross(u,h),h.negate(h),p.copy(L),i.vmult(p,p),e.vadd(p,p);p.dot(h);var F=O.connectedFaces[D];d.copy(this.faceNormals[F]);var N=this.getPlaneConstantOfFace(F);f.copy(d),i.vmult(f,f);var B=N-f.dot(e);for(this.clipFaceAgainstPlane(m,g,f,B);m.length;)m.shift();for(;g.length;)m.push(g.shift())}d.copy(this.faceNormals[y]);N=this.getPlaneConstantOfFace(y);f.copy(d),i.vmult(f,f);for(B=N-f.dot(e),M=0;M<m.length;M++){var V=f.dot(m[M])+B;if(V<=r&&(console.log("clamped: depth="+V+" to minDist="+r),V=r),V<=o){var z=m[M];if(V<=0){var U={point:z,normal:f,depth:V};s.push(U)}}}}},s.prototype.clipFaceAgainstPlane=function(t,e,i,n){var o,s,a=t.length;if(a<2)return e;var l=t[t.length-1],c=t[0];o=i.dot(l)+n;for(var u=0;u<a;u++){if(c=t[u],s=i.dot(c)+n,o<0)if(s<0){(h=new r).copy(c),e.push(h)}else{var h=new r;l.lerp(c,o/(o-s),h),e.push(h)}else if(s<0){h=new r;l.lerp(c,o/(o-s),h),e.push(h),e.push(c)}l=c,o=s}return e},s.prototype.computeWorldVertices=function(t,e){for(var i=this.vertices.length;this.worldVertices.length<i;)this.worldVertices.push(new r);for(var n=this.vertices,o=this.worldVertices,s=0;s!==i;s++)e.vmult(n[s],o[s]),t.vadd(o[s],o[s]);this.worldVerticesNeedsUpdate=!1};new r;s.prototype.computeLocalAABB=function(t,e){var i=this.vertices.length,n=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0;r<i;r++){var o=n[r];o.x<t.x?t.x=o.x:o.x>e.x&&(e.x=o.x),o.y<t.y?t.y=o.y:o.y>e.y&&(e.y=o.y),o.z<t.z?t.z=o.z:o.z>e.z&&(e.z=o.z)}},s.prototype.computeWorldFaceNormals=function(t){for(var e=this.faceNormals.length;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new r);for(var i=this.faceNormals,n=this.worldFaceNormals,o=0;o!==e;o++)t.vmult(i[o],n[o]);this.worldFaceNormalsNeedsUpdate=!1},s.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,i=0,n=e.length;i!==n;i++){var r=e[i].norm2();r>t&&(t=r)}this.boundingSphereRadius=Math.sqrt(t)};var O=new r;s.prototype.calculateWorldAABB=function(t,e,i,n){for(var r,o,s,a,l,c,u=this.vertices.length,h=this.vertices,p=0;p<u;p++){O.copy(h[p]),e.vmult(O,O),t.vadd(O,O);var d=O;d.x<r||void 0===r?r=d.x:(d.x>a||void 0===a)&&(a=d.x),d.y<o||void 0===o?o=d.y:(d.y>l||void 0===l)&&(l=d.y),d.z<s||void 0===s?s=d.z:(d.z>c||void 0===c)&&(c=d.z)}i.set(r,o,s),n.set(a,l,c)},s.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},s.prototype.getAveragePointLocal=function(t){t=t||new r;for(var e=this.vertices.length,i=this.vertices,n=0;n<e;n++)t.vadd(i[n],t);return t.mult(1/e,t),t},s.prototype.transformAllPoints=function(t,e){var i=this.vertices.length,n=this.vertices;if(e){for(var r=0;r<i;r++){var o=n[r];e.vmult(o,o)}for(r=0;r<this.faceNormals.length;r++){o=this.faceNormals[r];e.vmult(o,o)}}if(t)for(r=0;r<i;r++){(o=n[r]).vadd(t,o)}};var M=new r,R=new r,I=new r;s.prototype.pointIsInside=function(t){var e=this.vertices.length,i=this.vertices,n=this.faces,r=this.faceNormals,o=this.faces.length,s=M;this.getAveragePointLocal(s);for(var a=0;a<o;a++){this.faces[a].length,e=r[a];var l=i[n[a][0]],c=R;t.vsub(l,c);var u=e.dot(c),h=I;s.vsub(l,h);var p=e.dot(h);if(u<0&&p>0||u>0&&p<0)return!1}return-1};new r;var D=new r,L=new r;s.project=function(t,e,i,n,r){var s=t.vertices.length,a=D,l=0,c=0,u=L,h=t.vertices;u.setZero(),o.vectorToLocalFrame(i,n,e,a),o.pointToLocalFrame(i,n,u,u);var p=u.dot(a);c=l=h[0].dot(a);for(var d=1;d<s;d++){var f=h[d].dot(a);f>l&&(l=f),f<c&&(c=f)}if((c-=p)>(l-=p)){var m=c;c=l,l=m}r[0]=l,r[1]=c}},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(t,e,i){e.exports=s;var n=t("./Shape"),r=t("../math/Vec3"),o=(t("../math/Quaternion"),t("./ConvexPolyhedron"));function s(t,e,i,s){var a=s,l=[],c=[],u=[],h=[],p=[],d=Math.cos,f=Math.sin;l.push(new r(e*d(0),e*f(0),.5*-i)),h.push(0),l.push(new r(t*d(0),t*f(0),.5*i)),p.push(1);for(var m=0;m<a;m++){var g=2*Math.PI/a*(m+1),y=2*Math.PI/a*(m+.5);m<a-1?(l.push(new r(e*d(g),e*f(g),.5*-i)),h.push(2*m+2),l.push(new r(t*d(g),t*f(g),.5*i)),p.push(2*m+3),u.push([2*m+2,2*m+3,2*m+1,2*m])):u.push([0,1,2*m+1,2*m]),(a%2==1||m<a/2)&&c.push(new r(d(y),f(y),0))}u.push(p),c.push(new r(0,0,1));var _=[];for(m=0;m<h.length;m++)_.push(h[h.length-m-1]);u.push(_),this.type=n.types.CONVEXPOLYHEDRON,o.call(this,l,u,c)}s.prototype=new o},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(t,e,i){var n=t("./Shape"),r=t("./ConvexPolyhedron"),o=t("../math/Vec3"),s=t("../utils/Utils");function a(t,e){e=s.defaults(e,{maxValue:null,minValue:null,elementSize:1}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,null===e.minValue&&this.updateMinValue(),null===e.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,n.call(this),this.pillarConvex=new r,this.pillarOffset=new o,this.type=n.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}e.exports=a,a.prototype=new n,a.prototype.update=function(){this._cachedPillars={}},a.prototype.updateMinValue=function(){for(var t=this.data,e=t[0][0],i=0;i!==t.length;i++)for(var n=0;n!==t[i].length;n++){var r=t[i][n];r<e&&(e=r)}this.minValue=e},a.prototype.updateMaxValue=function(){for(var t=this.data,e=t[0][0],i=0;i!==t.length;i++)for(var n=0;n!==t[i].length;n++){var r=t[i][n];r>e&&(e=r)}this.maxValue=e},a.prototype.setHeightValueAtIndex=function(t,e,i){this.data[t][e]=i,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)},a.prototype.getRectMinMax=function(t,e,i,n,r){r=r||[];for(var o=this.data,s=this.minValue,a=t;a<=i;a++)for(var l=e;l<=n;l++){var c=o[a][l];c>s&&(s=c)}r[0]=this.minValue,r[1]=s},a.prototype.getIndexOfPosition=function(t,e,i,n){var r=this.elementSize,o=this.data,s=Math.floor(t/r),a=Math.floor(e/r);return i[0]=s,i[1]=a,n&&(s<0&&(s=0),a<0&&(a=0),s>=o.length-1&&(s=o.length-1),a>=o[0].length-1&&(a=o[0].length-1)),!(s<0||a<0||s>=o.length-1||a>=o[0].length-1)},a.prototype.getHeightAt=function(t,e,i){var n=[];this.getIndexOfPosition(t,e,n,i);var r=[];return this.getRectMinMax(n[0],n[1]+1,n[0],n[1]+1,r),(r[0]+r[1])/2},a.prototype.getCacheConvexTrianglePillarKey=function(t,e,i){return t+"_"+e+"_"+(i?1:0)},a.prototype.getCachedConvexTrianglePillar=function(t,e,i){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]},a.prototype.setCachedConvexTrianglePillar=function(t,e,i,n,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]={convex:n,offset:r}},a.prototype.clearCachedConvexTrianglePillar=function(t,e,i){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]},a.prototype.getConvexTrianglePillar=function(t,e,i){var n=this.pillarConvex,s=this.pillarOffset;if(this.cacheEnabled){if(a=this.getCachedConvexTrianglePillar(t,e,i))return this.pillarConvex=a.convex,void(this.pillarOffset=a.offset);n=new r,s=new o,this.pillarConvex=n,this.pillarOffset=s}var a=this.data,l=this.elementSize,c=n.faces;n.vertices.length=6;for(var u=0;u<6;u++)n.vertices[u]||(n.vertices[u]=new o);c.length=5;for(u=0;u<5;u++)c[u]||(c[u]=[]);var h=n.vertices,p=(Math.min(a[t][e],a[t+1][e],a[t][e+1],a[t+1][e+1])-this.minValue)/2+this.minValue;i?(s.set((t+.75)*l,(e+.75)*l,p),h[0].set(.25*l,.25*l,a[t+1][e+1]-p),h[1].set(-.75*l,.25*l,a[t][e+1]-p),h[2].set(.25*l,-.75*l,a[t+1][e]-p),h[3].set(.25*l,.25*l,-p-1),h[4].set(-.75*l,.25*l,-p-1),h[5].set(.25*l,-.75*l,-p-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=2,c[2][1]=5,c[2][2]=3,c[2][3]=0,c[3][0]=3,c[3][1]=4,c[3][2]=1,c[3][3]=0,c[4][0]=1,c[4][1]=4,c[4][2]=5,c[4][3]=2):(s.set((t+.25)*l,(e+.25)*l,p),h[0].set(-.25*l,-.25*l,a[t][e]-p),h[1].set(.75*l,-.25*l,a[t+1][e]-p),h[2].set(-.25*l,.75*l,a[t][e+1]-p),h[3].set(-.25*l,-.25*l,-p-1),h[4].set(.75*l,-.25*l,-p-1),h[5].set(-.25*l,.75*l,-p-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=0,c[2][1]=2,c[2][2]=5,c[2][3]=3,c[3][0]=1,c[3][1]=0,c[3][2]=3,c[3][3]=4,c[4][0]=4,c[4][1]=5,c[4][2]=2,c[4][3]=1),n.computeNormals(),n.computeEdges(),n.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,i,n,s)},a.prototype.calculateLocalInertia=function(t,e){return(e=e||new o).set(0,0,0),e},a.prototype.volume=function(){return Number.MAX_VALUE},a.prototype.calculateWorldAABB=function(t,e,i,n){i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),n.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},a.prototype.updateBoundingSphereRadius=function(){var t=this.data,e=this.elementSize;this.boundingSphereRadius=new o(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(t,e,i){e.exports=o;var n=t("./Shape"),r=t("../math/Vec3");function o(){n.call(this),this.type=n.types.PARTICLE}o.prototype=new n,o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(t,e){return(e=e||new r).set(0,0,0),e},o.prototype.volume=function(){return 0},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},o.prototype.calculateWorldAABB=function(t,e,i,n){i.copy(t),n.copy(t)}},{"../math/Vec3":30,"./Shape":43}],42:[function(t,e,i){e.exports=o;var n=t("./Shape"),r=t("../math/Vec3");function o(){n.call(this),this.type=n.types.PLANE,this.worldNormal=new r,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}o.prototype=new n,o.prototype.constructor=o,o.prototype.computeWorldNormal=function(t){var e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1},o.prototype.calculateLocalInertia=function(t,e){return e=e||new r},o.prototype.volume=function(){return Number.MAX_VALUE};var s=new r;o.prototype.calculateWorldAABB=function(t,e,i,n){s.set(0,0,1),e.vmult(s,s);var r=Number.MAX_VALUE;i.set(-r,-r,-r),n.set(r,r,r),1===s.x&&(n.x=t.x),1===s.y&&(n.y=t.y),1===s.z&&(n.z=t.z),-1===s.x&&(i.x=t.x),-1===s.y&&(i.y=t.y),-1===s.z&&(i.z=t.z)},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},{"../math/Vec3":30,"./Shape":43}],43:[function(t,e,i){e.exports=n;var n=t("./Shape");t("../math/Vec3"),t("../math/Quaternion"),t("../material/Material");function n(){this.id=n.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}n.prototype.constructor=n,n.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},n.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},n.prototype.calculateLocalInertia=function(t,e){throw"calculateLocalInertia() not implemented for shape type "+this.type},n.idCounter=0,n.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(t,e,i){e.exports=o;var n=t("./Shape"),r=t("../math/Vec3");function o(t){if(n.call(this),this.radius=void 0!==t?Number(t):1,this.type=n.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}o.prototype=new n,o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(t,e){e=e||new r;var i=2*t*this.radius*this.radius/5;return e.x=i,e.y=i,e.z=i,e},o.prototype.volume=function(){return 4*Math.PI*this.radius/3},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},o.prototype.calculateWorldAABB=function(t,e,i,n){for(var r=this.radius,o=["x","y","z"],s=0;s<o.length;s++){var a=o[s];i[a]=t[a]-r,n[a]=t[a]+r}}},{"../math/Vec3":30,"./Shape":43}],45:[function(t,e,i){e.exports=l;var n=t("./Shape"),r=t("../math/Vec3"),o=(t("../math/Quaternion"),t("../math/Transform")),s=t("../collision/AABB"),a=t("../utils/Octree");function l(t,e){n.call(this),this.type=n.types.TRIMESH,this.vertices=new Float32Array(t),this.indices=new Int16Array(e),this.normals=new Float32Array(e.length),this.aabb=new s,this.edges=null,this.scale=new r(1,1,1),this.tree=new a,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}l.prototype=new n,l.prototype.constructor=l;var c=new r;l.prototype.updateTree=function(){var t=this.tree;t.reset(),t.aabb.copy(this.aabb);var e=this.scale;t.aabb.lowerBound.x*=1/e.x,t.aabb.lowerBound.y*=1/e.y,t.aabb.lowerBound.z*=1/e.z,t.aabb.upperBound.x*=1/e.x,t.aabb.upperBound.y*=1/e.y,t.aabb.upperBound.z*=1/e.z;for(var i=new s,n=new r,o=new r,a=new r,l=[n,o,a],c=0;c<this.indices.length/3;c++){var u=3*c;this._getUnscaledVertex(this.indices[u],n),this._getUnscaledVertex(this.indices[u+1],o),this._getUnscaledVertex(this.indices[u+2],a),i.setFromPoints(l),t.insert(i,c)}t.removeEmptyNodes()};var u=new s;l.prototype.getTrianglesInAABB=function(t,e){u.copy(t);var i=this.scale,n=i.x,r=i.y,o=i.z,s=u.lowerBound,a=u.upperBound;return s.x/=n,s.y/=r,s.z/=o,a.x/=n,a.y/=r,a.z/=o,this.tree.aabbQuery(u,e)},l.prototype.setScale=function(t){var e=this.scale.x===this.scale.y===this.scale.z,i=t.x===t.y===t.z;e&&i||this.updateNormals(),this.scale.copy(t),this.updateAABB(),this.updateBoundingSphereRadius()},l.prototype.updateNormals=function(){for(var t=c,e=this.normals,i=0;i<this.indices.length/3;i++){var n=3*i,r=this.indices[n],o=this.indices[n+1],s=this.indices[n+2];this.getVertex(r,m),this.getVertex(o,g),this.getVertex(s,y),l.computeNormal(g,m,y,t),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z}},l.prototype.updateEdges=function(){for(var t={},e=function(e,i){t[r<o?r+"_"+o:o+"_"+r]=!0},i=0;i<this.indices.length/3;i++){var n=3*i,r=this.indices[n],o=this.indices[n+1];this.indices[n+2];e(),e(),e()}var s=Object.keys(t);this.edges=new Int16Array(2*s.length);for(i=0;i<s.length;i++){var a=s[i].split("_");this.edges[2*i]=parseInt(a[0],10),this.edges[2*i+1]=parseInt(a[1],10)}},l.prototype.getEdgeVertex=function(t,e,i){var n=this.edges[2*t+(e?1:0)];this.getVertex(n,i)};var h=new r,p=new r;l.prototype.getEdgeVector=function(t,e){var i=h,n=p;this.getEdgeVertex(t,0,i),this.getEdgeVertex(t,1,n),n.vsub(i,e)};var d=new r,f=new r;l.computeNormal=function(t,e,i,n){e.vsub(t,f),i.vsub(e,d),d.cross(f,n),n.isZero()||n.normalize()};var m=new r,g=new r,y=new r;l.prototype.getVertex=function(t,e){var i=this.scale;return this._getUnscaledVertex(t,e),e.x*=i.x,e.y*=i.y,e.z*=i.z,e},l.prototype._getUnscaledVertex=function(t,e){var i=3*t,n=this.vertices;return e.set(n[i],n[i+1],n[i+2])},l.prototype.getWorldVertex=function(t,e,i,n){return this.getVertex(t,n),o.pointToWorldFrame(e,i,n,n),n},l.prototype.getTriangleVertices=function(t,e,i,n){var r=3*t;this.getVertex(this.indices[r],e),this.getVertex(this.indices[r+1],i),this.getVertex(this.indices[r+2],n)},l.prototype.getNormal=function(t,e){var i=3*t;return e.set(this.normals[i],this.normals[i+1],this.normals[i+2])};var _=new s;l.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(_);var i=_.upperBound.x-_.lowerBound.x,n=_.upperBound.y-_.lowerBound.y,r=_.upperBound.z-_.lowerBound.z;return e.set(1/12*t*(2*n*2*n+2*r*2*r),1/12*t*(2*i*2*i+2*r*2*r),1/12*t*(2*n*2*n+2*i*2*i))};var v=new r;l.prototype.computeLocalAABB=function(t){var e=t.lowerBound,i=t.upperBound,n=this.vertices.length,r=(this.vertices,v);this.getVertex(0,r),e.copy(r),i.copy(r);for(var o=0;o!==n;o++)this.getVertex(o,r),r.x<e.x?e.x=r.x:r.x>i.x&&(i.x=r.x),r.y<e.y?e.y=r.y:r.y>i.y&&(i.y=r.y),r.z<e.z?e.z=r.z:r.z>i.z&&(i.z=r.z)},l.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},l.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,i=new r,n=0,o=e.length/3;n!==o;n++){this.getVertex(n,i);var s=i.norm2();s>t&&(t=s)}this.boundingSphereRadius=Math.sqrt(t)};new r;var b=new o,x=new s;l.prototype.calculateWorldAABB=function(t,e,i,n){var r=b,o=x;r.position=t,r.quaternion=e,this.aabb.toWorldFrame(r,o),i.copy(o.lowerBound),n.copy(o.upperBound)},l.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},l.createTorus=function(t,e,i,n,r){t=t||1,e=e||.5,i=i||8,n=n||6,r=r||2*Math.PI;for(var o=[],s=[],a=0;a<=i;a++)for(var c=0;c<=n;c++){var u=c/n*r,h=a/i*Math.PI*2,p=(t+e*Math.cos(h))*Math.cos(u),d=(t+e*Math.cos(h))*Math.sin(u),f=e*Math.sin(h);o.push(p,d,f)}for(a=1;a<=i;a++)for(c=1;c<=n;c++){var m=(n+1)*a+c-1,g=(n+1)*(a-1)+c-1,y=(n+1)*(a-1)+c,_=(n+1)*a+c;s.push(m,g,_),s.push(g,y,_)}return new l(o,s)}},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(t,e,i){e.exports=r;t("../math/Vec3"),t("../math/Quaternion");var n=t("./Solver");function r(){n.call(this),this.iterations=10,this.tolerance=1e-7}r.prototype=new n;var o=[],s=[],a=[];r.prototype.solve=function(t,e){var i,n,r,l,c,u=0,h=this.iterations,p=this.tolerance*this.tolerance,d=this.equations,f=d.length,m=e.bodies,g=m.length,y=t;if(0!==f)for(var _=0;_!==g;_++)m[_].updateSolveMassProperties();var v=s,b=a,x=o;v.length=f,b.length=f,x.length=f;for(_=0;_!==f;_++){var A=d[_];x[_]=0,b[_]=A.computeB(y),v[_]=1/A.computeC()}if(0!==f){for(_=0;_!==g;_++){var w=(T=m[_]).vlambda,P=T.wlambda;w.set(0,0,0),P&&P.set(0,0,0)}for(u=0;u!==h;u++){l=0;for(var E=0;E!==f;E++){A=d[E];i=b[E],n=v[E],(c=x[E])+(r=n*(i-A.computeGWlambda()-A.eps*c))<A.minForce?r=A.minForce-c:c+r>A.maxForce&&(r=A.maxForce-c),x[E]+=r,l+=r>0?r:-r,A.addToWlambda(r)}if(l*l<p)break}for(_=0;_!==g;_++){var T,S=(T=m[_]).velocity,C=T.angularVelocity;S.vadd(T.vlambda,S),C&&C.vadd(T.wlambda,C)}}return u}},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(t,e,i){function n(){this.equations=[]}e.exports=n,n.prototype.solve=function(t,e){return 0},n.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},n.prototype.removeEquation=function(t){var e=this.equations,i=e.indexOf(t);-1!==i&&e.splice(i,1)},n.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(t,e,i){e.exports=o;t("../math/Vec3"),t("../math/Quaternion");var n=t("./Solver"),r=t("../objects/Body");function o(t){for(n.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=t,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}o.prototype=new n;var s=[],a=[],l={bodies:[]},c=r.STATIC;function u(t){for(var e=t.length,i=0;i!==e;i++){var n=t[i];if(!(n.visited||n.body.type&c))return n}return!1}var h=[];function p(t,e,i,n){for(h.push(t),t.visited=!0,e(t,i,n);h.length;)for(var r,o=h.pop();r=u(o.children);)r.visited=!0,e(r,i,n),h.push(r)}function d(t,e,i){e.push(t.body);for(var n=t.eqs.length,r=0;r!==n;r++){var o=t.eqs[r];-1===i.indexOf(o)&&i.push(o)}}function f(t,e){return e.id-t.id}o.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},o.prototype.solve=function(t,e){for(var i=s,n=this.nodePool,r=e.bodies,o=this.equations,c=o.length,h=r.length,m=this.subsolver;n.length<h;)n.push(this.createNode());i.length=h;for(var g=0;g<h;g++)i[g]=n[g];for(g=0;g!==h;g++){var y=i[g];y.body=r[g],y.children.length=0,y.eqs.length=0,y.visited=!1}for(var _=0;_!==c;_++){var v=o[_],b=(g=r.indexOf(v.bi),r.indexOf(v.bj)),x=i[g],A=i[b];x.children.push(A),x.eqs.push(v),A.children.push(x),A.eqs.push(v)}var w,P=0,E=a;m.tolerance=this.tolerance,m.iterations=this.iterations;for(var T=l;w=u(i);){E.length=0,T.bodies.length=0,p(w,d,T.bodies,E);var S=E.length;E=E.sort(f);for(g=0;g!==S;g++)m.addEquation(E[g]);m.solve(t,T);m.removeAllEquations(),P++}return P}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(t,e,i){var n=function(){};e.exports=n,n.prototype={constructor:n,addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;return void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e),this},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return this;var i=this._listeners;if(void 0===i[t])return this;var n=i[t].indexOf(e);return-1!==n&&i[t].splice(n,1),this},dispatchEvent:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=e.length;i<n;i++)e[i].call(this,t)}return this}}},{}],50:[function(t,e,i){var n=t("../collision/AABB"),r=t("../math/Vec3");function o(t){t=t||{},this.root=t.root||null,this.aabb=t.aabb?t.aabb.clone():new n,this.data=[],this.children=[]}function s(t,e){(e=e||{}).root=null,e.aabb=t,o.call(this,e),this.maxDepth="undefined"!=typeof e.maxDepth?e.maxDepth:8}e.exports=s,s.prototype=new o,o.prototype.reset=function(t,e){this.children.length=this.data.length=0},o.prototype.insert=function(t,e,i){var n=this.data;if(i=i||0,!this.aabb.contains(t))return!1;var r=this.children;if(i<(this.maxDepth||this.root.maxDepth)){var o=!1;r.length||(this.subdivide(),o=!0);for(var s=0;8!==s;s++)if(r[s].insert(t,e,i+1))return!0;o&&(r.length=0)}return n.push(e),!0};var a=new r;o.prototype.subdivide=function(){var t=this.aabb,e=t.lowerBound,i=t.upperBound,s=this.children;s.push(new o({aabb:new n({lowerBound:new r(0,0,0)})}),new o({aabb:new n({lowerBound:new r(1,0,0)})}),new o({aabb:new n({lowerBound:new r(1,1,0)})}),new o({aabb:new n({lowerBound:new r(1,1,1)})}),new o({aabb:new n({lowerBound:new r(0,1,1)})}),new o({aabb:new n({lowerBound:new r(0,0,1)})}),new o({aabb:new n({lowerBound:new r(1,0,1)})}),new o({aabb:new n({lowerBound:new r(0,1,0)})})),i.vsub(e,a),a.scale(.5,a);for(var l=this.root||this,c=0;8!==c;c++){var u=s[c];u.root=l;var h=u.aabb.lowerBound;h.x*=a.x,h.y*=a.y,h.z*=a.z,h.vadd(e,h),h.vadd(a,u.aabb.upperBound)}},o.prototype.aabbQuery=function(t,e){this.data,this.children;for(var i=[this];i.length;){var n=i.pop();n.aabb.overlaps(t)&&Array.prototype.push.apply(e,n.data),Array.prototype.push.apply(i,n.children)}return e};var l=new n;o.prototype.rayQuery=function(t,e,i){return t.getAABB(l),l.toLocalFrame(e,l),this.aabbQuery(l,i),i},o.prototype.removeEmptyNodes=function(){for(var t=[this];t.length;){for(var e=t.pop(),i=e.children.length-1;i>=0;i--)e.children[i].data.length||e.children.splice(i,1);Array.prototype.push.apply(t,e.children)}}},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(t,e,i){function n(){this.objects=[],this.type=Object}e.exports=n,n.prototype.release=function(){for(var t=arguments.length,e=0;e!==t;e++)this.objects.push(arguments[e])},n.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},n.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},{}],52:[function(t,e,i){function n(){this.data={keys:[]}}e.exports=n,n.prototype.get=function(t,e){if(t>e){var i=e;e=t,t=i}return this.data[t+"-"+e]},n.prototype.set=function(t,e,i){if(t>e){var n=e;e=t,t=n}var r=t+"-"+e;this.get(t,e)||this.data.keys.push(r),this.data[r]=i},n.prototype.reset=function(){for(var t=this.data,e=t.keys;e.length>0;){delete t[e.pop()]}}},{}],53:[function(t,e,i){function n(){}e.exports=n,n.defaults=function(t,e){for(var i in t=t||{},e)i in t||(t[i]=e[i]);return t}},{}],54:[function(t,e,i){e.exports=o;var n=t("../math/Vec3"),r=t("./Pool");function o(){r.call(this),this.type=n}o.prototype=new r,o.prototype.constructObject=function(){return new n}},{"../math/Vec3":30,"./Pool":51}],55:[function(t,e,i){e.exports=p;var n=t("../collision/AABB"),r=t("../shapes/Shape"),o=t("../collision/Ray"),s=t("../math/Vec3"),a=t("../math/Transform"),l=(t("../shapes/ConvexPolyhedron"),t("../math/Quaternion")),c=(t("../solver/Solver"),t("../utils/Vec3Pool")),u=t("../equations/ContactEquation"),h=t("../equations/FrictionEquation");function p(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new c,this.world=t,this.currentContactMaterial=null,this.enableFrictionReduction=!1}p.prototype.createContactEquation=function(t,e,i,n,r,o){var s;this.contactPointPool.length?((s=this.contactPointPool.pop()).bi=t,s.bj=e):s=new u(t,e),s.enabled=t.collisionResponse&&e.collisionResponse&&i.collisionResponse&&n.collisionResponse;var a=this.currentContactMaterial;s.restitution=a.restitution,s.setSpookParams(a.contactEquationStiffness,a.contactEquationRelaxation,this.world.dt);var l=i.material||t.material,c=n.material||e.material;return l&&c&&l.restitution>=0&&c.restitution>=0&&(s.restitution=l.restitution*c.restitution),s.si=r||i,s.sj=o||n,s},p.prototype.createFrictionEquationsFromContact=function(t,e){var i=t.bi,n=t.bj,r=t.si,o=t.sj,s=this.world,a=this.currentContactMaterial,l=a.friction,c=r.material||i.material,u=o.material||n.material;if(c&&u&&c.friction>=0&&u.friction>=0&&(l=c.friction*u.friction),l>0){var p=l*s.gravity.length(),d=i.invMass+n.invMass;d>0&&(d=1/d);var f=this.frictionEquationPool,m=f.length?f.pop():new h(i,n,p*d),g=f.length?f.pop():new h(i,n,p*d);return m.bi=g.bi=i,m.bj=g.bj=n,m.minForce=g.minForce=-p*d,m.maxForce=g.maxForce=p*d,m.ri.copy(t.ri),m.rj.copy(t.rj),g.ri.copy(t.ri),g.rj.copy(t.rj),t.ni.tangents(m.t,g.t),m.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,s.dt),g.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,s.dt),m.enabled=g.enabled=t.enabled,e.push(m,g),!0}return!1};var d=new s,f=new s,m=new s;p.prototype.createFrictionFromAverage=function(t){var e=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(e,this.frictionResult)&&1!==t){var i=this.frictionResult[this.frictionResult.length-2],n=this.frictionResult[this.frictionResult.length-1];d.setZero(),f.setZero(),m.setZero();for(var r=e.bi,o=(e.bj,0);o!==t;o++)(e=this.result[this.result.length-1-o]).bodyA!==r?(d.vadd(e.ni,d),f.vadd(e.ri,f),m.vadd(e.rj,m)):(d.vsub(e.ni,d),f.vadd(e.rj,f),m.vadd(e.ri,m));var s=1/t;f.scale(s,i.ri),m.scale(s,i.rj),n.ri.copy(i.ri),n.rj.copy(i.rj),d.normalize(),d.tangents(i.t,n.t)}};var g=new s,y=new s,_=new l,v=new l;p.prototype.getContacts=function(t,e,i,n,r,o,s){this.contactPointPool=r,this.frictionEquationPool=s,this.result=n,this.frictionResult=o;for(var a=_,l=v,c=g,u=y,h=0,p=t.length;h!==p;h++){var d=t[h],f=e[h],m=null;d.material&&f.material&&(m=i.getContactMaterial(d.material,f.material)||null);for(var b=0;b<d.shapes.length;b++){d.quaternion.mult(d.shapeOrientations[b],a),d.quaternion.vmult(d.shapeOffsets[b],c),c.vadd(d.position,c);for(var x=d.shapes[b],A=0;A<f.shapes.length;A++){f.quaternion.mult(f.shapeOrientations[A],l),f.quaternion.vmult(f.shapeOffsets[A],u),u.vadd(f.position,u);var w=f.shapes[A];if(!(c.distanceTo(u)>x.boundingSphereRadius+w.boundingSphereRadius)){var P=null;x.material&&w.material&&(P=i.getContactMaterial(x.material,w.material)||null),this.currentContactMaterial=P||m||i.defaultContactMaterial;var E=this[x.type|w.type];E&&(x.type<w.type?E.call(this,x,w,c,u,a,l,d,f,x,w):E.call(this,w,x,u,c,l,a,f,d,x,w))}}}}};p.prototype[r.types.BOX|r.types.BOX]=p.prototype.boxBox=function(t,e,i,n,r,o,s,a){t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,i,n,r,o,s,a,t,e)},p.prototype[r.types.BOX|r.types.CONVEXPOLYHEDRON]=p.prototype.boxConvex=function(t,e,i,n,r,o,s,a){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,i,n,r,o,s,a,t,e)},p.prototype[r.types.BOX|r.types.PARTICLE]=p.prototype.boxParticle=function(t,e,i,n,r,o,s,a){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,i,n,r,o,s,a,t,e)},p.prototype[r.types.SPHERE]=p.prototype.sphereSphere=function(t,e,i,n,r,o,s,a){var l=this.createContactEquation(s,a,t,e);n.vsub(i,l.ni),l.ni.normalize(),l.ri.copy(l.ni),l.rj.copy(l.ni),l.ri.mult(t.radius,l.ri),l.rj.mult(-e.radius,l.rj),l.ri.vadd(i,l.ri),l.ri.vsub(s.position,l.ri),l.rj.vadd(n,l.rj),l.rj.vsub(a.position,l.rj),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)};var b=new s,x=new s,A=new s;p.prototype[r.types.PLANE|r.types.TRIMESH]=p.prototype.planeTrimesh=function(t,e,i,n,r,o,l,c){var u=new s,h=b;h.set(0,0,1),r.vmult(h,h);for(var p=0;p<e.vertices.length/3;p++){e.getVertex(p,u);var d=new s;d.copy(u),a.pointToWorldFrame(n,o,d,u);var f=x;if(u.vsub(i,f),h.dot(f)<=0){var m=this.createContactEquation(l,c,t,e);m.ni.copy(h);var g=A;h.scale(f.dot(h),g),u.vsub(g,g),m.ri.copy(g),m.ri.vsub(l.position,m.ri),m.rj.copy(u),m.rj.vsub(c.position,m.rj),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}};var w=new s,P=new s,E=(new s,new s),T=new s,S=new s,C=new s,O=new s,M=new s,R=new s,I=new s,D=new s,L=new s,k=new s,F=new n,N=[];p.prototype[r.types.SPHERE|r.types.TRIMESH]=p.prototype.sphereTrimesh=function(t,e,i,n,r,s,l,c){var u=S,h=C,p=O,d=M,f=R,m=I,g=F,y=T,_=P,v=N;a.pointToLocalFrame(n,s,i,f);var b=t.radius;g.lowerBound.set(f.x-b,f.y-b,f.z-b),g.upperBound.set(f.x+b,f.y+b,f.z+b),e.getTrianglesInAABB(g,v);for(var x=E,A=t.radius*t.radius,B=0;B<v.length;B++)for(var V=0;V<3;V++){if(e.getVertex(e.indices[3*v[B]+V],x),x.vsub(f,_),_.norm2()<=A)y.copy(x),a.pointToWorldFrame(n,s,y,x),x.vsub(i,_),(j=this.createContactEquation(l,c,t,e)).ni.copy(_),j.ni.normalize(),j.ri.copy(j.ni),j.ri.scale(t.radius,j.ri),j.ri.vadd(i,j.ri),j.ri.vsub(l.position,j.ri),j.rj.copy(x),j.rj.vsub(c.position,j.rj),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult)}for(B=0;B<v.length;B++)for(V=0;V<3;V++){e.getVertex(e.indices[3*v[B]+V],u),e.getVertex(e.indices[3*v[B]+(V+1)%3],h),h.vsub(u,p),f.vsub(h,m);var z=m.dot(p);f.vsub(u,m);var U=m.dot(p);if(U>0&&z<0)if(f.vsub(u,m),d.copy(p),d.normalize(),U=m.dot(d),d.scale(U,m),m.vadd(u,m),(q=m.distanceTo(f))<t.radius){var j=this.createContactEquation(l,c,t,e);m.vsub(f,j.ni),j.ni.normalize(),j.ni.scale(t.radius,j.ri),a.pointToWorldFrame(n,s,m,m),m.vsub(c.position,j.rj),a.vectorToWorldFrame(s,j.ni,j.ni),a.vectorToWorldFrame(s,j.ri,j.ri),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult)}}for(var G=D,W=L,H=k,X=w,Y=(B=0,v.length);B!==Y;B++){e.getTriangleVertices(v[B],G,W,H),e.getNormal(v[B],X),f.vsub(G,m);var q=m.dot(X);if(X.scale(q,m),f.vsub(m,m),q=m.distanceTo(f),o.pointInTriangle(m,G,W,H)&&q<t.radius){j=this.createContactEquation(l,c,t,e);m.vsub(f,j.ni),j.ni.normalize(),j.ni.scale(t.radius,j.ri),a.pointToWorldFrame(n,s,m,m),m.vsub(c.position,j.rj),a.vectorToWorldFrame(s,j.ni,j.ni),a.vectorToWorldFrame(s,j.ri,j.ri),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult)}}v.length=0};var B=new s,V=new s;p.prototype[r.types.SPHERE|r.types.PLANE]=p.prototype.spherePlane=function(t,e,i,n,r,o,s,a){var l=this.createContactEquation(s,a,t,e);if(l.ni.set(0,0,1),o.vmult(l.ni,l.ni),l.ni.negate(l.ni),l.ni.normalize(),l.ni.mult(t.radius,l.ri),i.vsub(n,B),l.ni.mult(l.ni.dot(B),V),B.vsub(V,l.rj),-B.dot(l.ni)<=t.radius){var c=l.ri,u=l.rj;c.vadd(i,c),c.vsub(s.position,c),u.vadd(n,u),u.vsub(a.position,u),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}};var z=new s,U=new s,j=new s;function G(t,e,i){for(var n=null,r=t.length,o=0;o!==r;o++){var s=t[o],a=z;t[(o+1)%r].vsub(s,a);var l=U;a.cross(e,l);var c=j;i.vsub(s,c);var u=l.dot(c);if(!(null===n||u>0&&!0===n||u<=0&&!1===n))return!1;null===n&&(n=u>0)}return!0}var W=new s,H=new s,X=new s,Y=new s,q=[new s,new s,new s,new s,new s,new s],K=new s,Q=new s,Z=new s,J=new s;p.prototype[r.types.SPHERE|r.types.BOX]=p.prototype.sphereBox=function(t,e,i,n,r,o,s,a){var l=this.v3pool,c=q;i.vsub(n,W),e.getSideNormals(c,o);for(var u=t.radius,h=!1,p=Q,d=Z,f=J,m=null,g=0,y=0,_=0,v=null,b=0,x=c.length;b!==x&&!1===h;b++){var A=H;A.copy(c[b]);var w=A.norm();A.normalize();var P=W.dot(A);if(P<w+u&&P>0){var E=X,T=Y;E.copy(c[(b+1)%3]),T.copy(c[(b+2)%3]);var S=E.norm(),C=T.norm();E.normalize(),T.normalize();var O=W.dot(E),M=W.dot(T);if(O<S&&O>-S&&M<C&&M>-C){var R=Math.abs(P-w-u);(null===v||R<v)&&(v=R,y=O,_=M,m=w,p.copy(A),d.copy(E),f.copy(T),g++)}}}if(g){h=!0;var I=this.createContactEquation(s,a,t,e);p.mult(-u,I.ri),I.ni.copy(p),I.ni.negate(I.ni),p.mult(m,p),d.mult(y,d),p.vadd(d,p),f.mult(_,f),p.vadd(f,I.rj),I.ri.vadd(i,I.ri),I.ri.vsub(s.position,I.ri),I.rj.vadd(n,I.rj),I.rj.vsub(a.position,I.rj),this.result.push(I),this.createFrictionEquationsFromContact(I,this.frictionResult)}for(var D=l.get(),L=K,k=0;2!==k&&!h;k++)for(var F=0;2!==F&&!h;F++)for(var N=0;2!==N&&!h;N++){if(D.set(0,0,0),k?D.vadd(c[0],D):D.vsub(c[0],D),F?D.vadd(c[1],D):D.vsub(c[1],D),N?D.vadd(c[2],D):D.vsub(c[2],D),n.vadd(D,L),L.vsub(i,L),L.norm2()<u*u)h=!0,(I=this.createContactEquation(s,a,t,e)).ri.copy(L),I.ri.normalize(),I.ni.copy(I.ri),I.ri.mult(u,I.ri),I.rj.copy(D),I.ri.vadd(i,I.ri),I.ri.vsub(s.position,I.ri),I.rj.vadd(n,I.rj),I.rj.vsub(a.position,I.rj),this.result.push(I),this.createFrictionEquationsFromContact(I,this.frictionResult)}l.release(D),D=null;var B=l.get(),V=l.get(),z=(I=l.get(),l.get()),U=(R=l.get(),c.length);for(k=0;k!==U&&!h;k++)for(F=0;F!==U&&!h;F++)if(k%3!=F%3){c[F].cross(c[k],B),B.normalize(),c[k].vadd(c[F],V),I.copy(i),I.vsub(V,I),I.vsub(n,I);var j=I.dot(B);B.mult(j,z);for(N=0;N===k%3||N===F%3;)N++;R.copy(i),R.vsub(z,R),R.vsub(V,R),R.vsub(n,R);var G=Math.abs(j),$=R.norm();if(G<c[N].norm()&&$<u){h=!0;var tt=this.createContactEquation(s,a,t,e);V.vadd(z,tt.rj),tt.rj.copy(tt.rj),R.negate(tt.ni),tt.ni.normalize(),tt.ri.copy(tt.rj),tt.ri.vadd(n,tt.ri),tt.ri.vsub(i,tt.ri),tt.ri.normalize(),tt.ri.mult(u,tt.ri),tt.ri.vadd(i,tt.ri),tt.ri.vsub(s.position,tt.ri),tt.rj.vadd(n,tt.rj),tt.rj.vsub(a.position,tt.rj),this.result.push(tt),this.createFrictionEquationsFromContact(tt,this.frictionResult)}}l.release(B,V,I,z,R)};var $=new s,tt=new s,et=new s,it=new s,nt=new s,rt=new s,ot=new s,st=new s,at=new s,lt=new s;p.prototype[r.types.SPHERE|r.types.CONVEXPOLYHEDRON]=p.prototype.sphereConvex=function(t,e,i,n,r,o,s,a){var l=this.v3pool;i.vsub(n,$);for(var c=e.faceNormals,u=e.faces,h=e.vertices,p=t.radius,d=0;d!==h.length;d++){var f=h[d],m=nt;o.vmult(f,m),n.vadd(m,m);var g=it;if(m.vsub(i,g),g.norm2()<p*p)return y=!0,(R=this.createContactEquation(s,a,t,e)).ri.copy(g),R.ri.normalize(),R.ni.copy(R.ri),R.ri.mult(p,R.ri),m.vsub(n,R.rj),R.ri.vadd(i,R.ri),R.ri.vsub(s.position,R.ri),R.rj.vadd(n,R.rj),R.rj.vsub(a.position,R.rj),this.result.push(R),void this.createFrictionEquationsFromContact(R,this.frictionResult)}for(var y=!1,_=(d=0,u.length);d!==_&&!1===y;d++){var v=c[d],b=u[d],x=rt;o.vmult(v,x);var A=ot;o.vmult(h[b[0]],A),A.vadd(n,A);var w=st;x.mult(-p,w),i.vadd(w,w);var P=at;w.vsub(A,P);var E=P.dot(x),T=lt;if(i.vsub(A,T),E<0&&T.dot(x)>0){for(var S=[],C=0,O=b.length;C!==O;C++){var M=l.get();o.vmult(h[b[C]],M),n.vadd(M,M),S.push(M)}if(G(S,x,i)){y=!0;var R=this.createContactEquation(s,a,t,e);x.mult(-p,R.ri),x.negate(R.ni);var I=l.get();x.mult(-E,I);var D=l.get();x.mult(-p,D),i.vsub(n,R.rj),R.rj.vadd(D,R.rj),R.rj.vadd(I,R.rj),R.rj.vadd(n,R.rj),R.rj.vsub(a.position,R.rj),R.ri.vadd(i,R.ri),R.ri.vsub(s.position,R.ri),l.release(I),l.release(D),this.result.push(R),this.createFrictionEquationsFromContact(R,this.frictionResult);C=0;for(var L=S.length;C!==L;C++)l.release(S[C]);return}for(C=0;C!==b.length;C++){var k=l.get(),F=l.get();o.vmult(h[b[(C+1)%b.length]],k),o.vmult(h[b[(C+2)%b.length]],F),n.vadd(k,k),n.vadd(F,F);var N=tt;F.vsub(k,N);var B=et;N.unit(B);var V=l.get(),z=l.get();i.vsub(k,z);var U=z.dot(B);B.mult(U,V),V.vadd(k,V);var j=l.get();if(V.vsub(i,j),U>0&&U*U<N.norm2()&&j.norm2()<p*p){R=this.createContactEquation(s,a,t,e);V.vsub(n,R.rj),V.vsub(i,R.ni),R.ni.normalize(),R.ni.mult(p,R.ri),R.rj.vadd(n,R.rj),R.rj.vsub(a.position,R.rj),R.ri.vadd(i,R.ri),R.ri.vsub(s.position,R.ri),this.result.push(R),this.createFrictionEquationsFromContact(R,this.frictionResult);for(C=0,L=S.length;C!==L;C++)l.release(S[C]);return l.release(k),l.release(F),l.release(V),l.release(j),void l.release(z)}l.release(k),l.release(F),l.release(V),l.release(j),l.release(z)}for(C=0,L=S.length;C!==L;C++)l.release(S[C])}}};new s,new s;p.prototype[r.types.PLANE|r.types.BOX]=p.prototype.planeBox=function(t,e,i,n,r,o,s,a){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.planeConvex(t,e.convexPolyhedronRepresentation,i,n,r,o,s,a)};var ct=new s,ut=new s,ht=new s,pt=new s;p.prototype[r.types.PLANE|r.types.CONVEXPOLYHEDRON]=p.prototype.planeConvex=function(t,e,i,n,r,o,s,a){var l=ct,c=ut;c.set(0,0,1),r.vmult(c,c);for(var u=0,h=ht,p=0;p!==e.vertices.length;p++){if(l.copy(e.vertices[p]),o.vmult(l,l),n.vadd(l,l),l.vsub(i,h),c.dot(h)<=0){var d=this.createContactEquation(s,a,t,e),f=pt;c.mult(c.dot(h),f),l.vsub(f,f),f.vsub(i,d.ri),d.ni.copy(c),l.vsub(n,d.rj),d.ri.vadd(i,d.ri),d.ri.vsub(s.position,d.ri),d.rj.vadd(n,d.rj),d.rj.vsub(a.position,d.rj),this.result.push(d),u++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(d,this.frictionResult)}}this.enableFrictionReduction&&u&&this.createFrictionFromAverage(u)};var dt=new s,ft=new s;p.prototype[r.types.CONVEXPOLYHEDRON]=p.prototype.convexConvex=function(t,e,i,n,r,o,s,a,l,c,u,h){var p=dt;if(!(i.distanceTo(n)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,i,r,n,o,p,u,h)){var d=[],f=ft;t.clipAgainstHull(i,r,e,n,o,p,-100,100,d);for(var m=0,g=0;g!==d.length;g++){var y=this.createContactEquation(s,a,t,e,l,c),_=y.ri,v=y.rj;p.negate(y.ni),d[g].normal.negate(f),f.mult(d[g].depth,f),d[g].point.vadd(f,_),v.copy(d[g].point),_.vsub(i,_),v.vsub(n,v),_.vadd(i,_),_.vsub(s.position,_),v.vadd(n,v),v.vsub(a.position,v),this.result.push(y),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(y,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}};var mt=new s,gt=new s,yt=new s;p.prototype[r.types.PLANE|r.types.PARTICLE]=p.prototype.planeParticle=function(t,e,i,n,r,o,s,a){var l=mt;l.set(0,0,1),s.quaternion.vmult(l,l);var c=gt;if(n.vsub(s.position,c),l.dot(c)<=0){var u=this.createContactEquation(a,s,e,t);u.ni.copy(l),u.ni.negate(u.ni),u.ri.set(0,0,0);var h=yt;l.mult(l.dot(n),h),n.vsub(h,h),u.rj.copy(h),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}};var _t=new s;p.prototype[r.types.PARTICLE|r.types.SPHERE]=p.prototype.sphereParticle=function(t,e,i,n,r,o,s,a){var l=_t;if(l.set(0,0,1),n.vsub(i,l),l.norm2()<=t.radius*t.radius){var c=this.createContactEquation(a,s,e,t);l.normalize(),c.rj.copy(l),c.rj.mult(t.radius,c.rj),c.ni.copy(l),c.ni.negate(c.ni),c.ri.set(0,0,0),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}};var vt=new l,bt=new s,xt=(new s,new s),At=new s,wt=new s;p.prototype[r.types.PARTICLE|r.types.CONVEXPOLYHEDRON]=p.prototype.convexParticle=function(t,e,i,n,r,o,s,a){var l=-1,c=xt,u=wt,h=null,p=bt;if(p.copy(n),p.vsub(i,p),r.conjugate(vt),vt.vmult(p,p),t.pointIsInside(p)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(i,r),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(r);for(var d=0,f=t.faces.length;d!==f;d++){var m=[t.worldVertices[t.faces[d][0]]],g=t.worldFaceNormals[d];n.vsub(m[0],At);var y=-g.dot(At);(null===h||Math.abs(y)<Math.abs(h))&&(h=y,l=d,c.copy(g),0)}if(-1!==l){var _=this.createContactEquation(a,s,e,t);c.mult(h,u),u.vadd(n,u),u.vsub(i,u),_.rj.copy(u),c.negate(_.ni),_.ri.set(0,0,0);var v=_.ri,b=_.rj;v.vadd(n,v),v.vsub(a.position,v),b.vadd(i,b),b.vsub(s.position,b),this.result.push(_),this.createFrictionEquationsFromContact(_,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},p.prototype[r.types.BOX|r.types.HEIGHTFIELD]=p.prototype.boxHeightfield=function(t,e,i,n,r,o,s,a){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,i,n,r,o,s,a)};var Pt=new s,Et=new s,Tt=[0];p.prototype[r.types.CONVEXPOLYHEDRON|r.types.HEIGHTFIELD]=p.prototype.convexHeightfield=function(t,e,i,n,r,o,s,l){var c=e.data,u=e.elementSize,h=t.boundingSphereRadius,p=Et,d=Tt,f=Pt;a.pointToLocalFrame(n,o,i,f);var m=Math.floor((f.x-h)/u)-1,g=Math.ceil((f.x+h)/u)+1,y=Math.floor((f.y-h)/u)-1,_=Math.ceil((f.y+h)/u)+1;if(!(g<0||_<0||m>c.length||y>c[0].length)){m<0&&(m=0),g<0&&(g=0),y<0&&(y=0),_<0&&(_=0),m>=c.length&&(m=c.length-1),g>=c.length&&(g=c.length-1),_>=c[0].length&&(_=c[0].length-1),y>=c[0].length&&(y=c[0].length-1);var v=[];e.getRectMinMax(m,y,g,_,v);var b=v[0],x=v[1];if(!(f.z-h>x||f.z+h<b))for(var A=m;A<g;A++)for(var w=y;w<_;w++)e.getConvexTrianglePillar(A,w,!1),a.pointToWorldFrame(n,o,e.pillarOffset,p),i.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,i,p,r,o,s,l,null,null,d,null),e.getConvexTrianglePillar(A,w,!0),a.pointToWorldFrame(n,o,e.pillarOffset,p),i.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,i,p,r,o,s,l,null,null,d,null)}};var St=new s,Ct=new s;p.prototype[r.types.SPHERE|r.types.HEIGHTFIELD]=p.prototype.sphereHeightfield=function(t,e,i,n,r,o,s,l){var c=e.data,u=t.radius,h=e.elementSize,p=Ct,d=St;a.pointToLocalFrame(n,o,i,d);var f=Math.floor((d.x-u)/h)-1,m=Math.ceil((d.x+u)/h)+1,g=Math.floor((d.y-u)/h)-1,y=Math.ceil((d.y+u)/h)+1;if(!(m<0||y<0||f>c.length||y>c[0].length)){f<0&&(f=0),m<0&&(m=0),g<0&&(g=0),y<0&&(y=0),f>=c.length&&(f=c.length-1),m>=c.length&&(m=c.length-1),y>=c[0].length&&(y=c[0].length-1),g>=c[0].length&&(g=c[0].length-1);var _=[];e.getRectMinMax(f,g,m,y,_);var v=_[0],b=_[1];if(!(d.z-u>b||d.z+u<v))for(var x=this.result,A=f;A<m;A++)for(var w=g;w<y;w++){var P=x.length;if(e.getConvexTrianglePillar(A,w,!1),a.pointToWorldFrame(n,o,e.pillarOffset,p),i.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,i,p,r,o,s,l),e.getConvexTrianglePillar(A,w,!0),a.pointToWorldFrame(n,o,e.pillarOffset,p),i.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,i,p,r,o,s,l),x.length-P>2)return}}}},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(t,e,i){e.exports=_;var n=t("../shapes/Shape"),r=t("../math/Vec3"),o=t("../math/Quaternion"),s=t("../solver/GSSolver"),a=(t("../utils/Vec3Pool"),t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("./Narrowphase")),l=t("../utils/EventTarget"),c=t("../collision/ArrayCollisionMatrix"),u=t("../material/Material"),h=t("../material/ContactMaterial"),p=t("../objects/Body"),d=t("../utils/TupleDictionary"),f=t("../collision/RaycastResult"),m=t("../collision/AABB"),g=t("../collision/Ray"),y=t("../collision/NaiveBroadphase");function _(){l.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new r,this.broadphase=new y,this.bodies=[],this.solver=new s,this.constraints=[],this.narrowphase=new a(this),this.collisionMatrix=new c,this.collisionMatrixPrevious=new c,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new d,this.defaultMaterial=new u("default"),this.defaultContactMaterial=new h(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}_.prototype=new l;new m;var v=new g;if(_.prototype.getContactMaterial=function(t,e){return this.contactMaterialTable.get(t.id,e.id)},_.prototype.numObjects=function(){return this.bodies.length},_.prototype.collisionMatrixTick=function(){var t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset()},_.prototype.add=_.prototype.addBody=function(t){-1===this.bodies.indexOf(t)&&(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof p&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.dispatchEvent(this.addBodyEvent))},_.prototype.addConstraint=function(t){this.constraints.push(t)},_.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)},_.prototype.rayTest=function(t,e,i){i instanceof f?this.raycastClosest(t,e,{skipBackfaces:!0},i):this.raycastAll(t,e,{skipBackfaces:!0},i)},_.prototype.raycastAll=function(t,e,i,n){return i.mode=g.ALL,i.from=t,i.to=e,i.callback=n,v.intersectWorld(this,i)},_.prototype.raycastAny=function(t,e,i,n){return i.mode=g.ANY,i.from=t,i.to=e,i.result=n,v.intersectWorld(this,i)},_.prototype.raycastClosest=function(t,e,i,n){return i.mode=g.CLOSEST,i.from=t,i.to=e,i.result=n,v.intersectWorld(this,i)},_.prototype.remove=function(t){t.world=null;var e=this.bodies.length-1,i=this.bodies,n=i.indexOf(t);if(-1!==n){i.splice(n,1);for(var r=0;r!==i.length;r++)i[r].index=r;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,this.dispatchEvent(this.removeBodyEvent)}},_.prototype.removeBody=_.prototype.remove,_.prototype.addMaterial=function(t){this.materials.push(t)},_.prototype.addContactMaterial=function(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)},"undefined"==typeof performance&&(performance={}),!performance.now){var b=Date.now();performance.timing&&performance.timing.navigationStart&&(b=performance.timing.navigationStart),performance.now=function(){return Date.now()-b}}var x=new r;_.prototype.step=function(t,e,i){if(i=i||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{var n=Math.floor((this.time+e)/t)-Math.floor(this.time/t);n=Math.min(n,i);for(var r=performance.now(),o=0;o!==n&&(this.internalStep(t),!(performance.now()-r>1e3*t));o++);this.time+=e;for(var s=this.time%t/t,a=x,l=this.bodies,c=0;c!==l.length;c++){var u=l[c];u.type!==p.STATIC&&u.sleepState!==p.SLEEPING?(u.position.vsub(u.previousPosition,a),a.scale(s,a),u.position.vadd(a,u.interpolatedPosition)):(u.interpolatedPosition.copy(u.position),u.interpolatedQuaternion.copy(u.quaternion))}}};var A={type:"postStep"},w={type:"preStep"},P={type:"collide",body:null,contact:null},E=[],T=[],S=[],C=[],O=(new r,new r,new r,new r,new r,new r,new r,new r,new r,new o,new o),M=new o,R=new r;_.prototype.internalStep=function(t){this.dt=t;var e,i=this.contacts,r=S,o=C,s=this.numObjects(),a=this.bodies,l=this.solver,c=this.gravity,u=this.doProfiling,h=this.profile,d=p.DYNAMIC,f=this.constraints,m=T,g=(c.norm(),c.x),y=c.y,_=c.z,v=0;for(u&&(e=performance.now()),v=0;v!==s;v++){if((z=a[v]).type&d){var b=z.force,x=z.mass;b.x+=x*g,b.y+=x*y,b.z+=x*_}}v=0;for(var I=this.subsystems.length;v!==I;v++)this.subsystems[v].update();u&&(e=performance.now()),r.length=0,o.length=0,this.broadphase.collisionPairs(this,r,o),u&&(h.broadphase=performance.now()-e);var D=f.length;for(v=0;v!==D;v++){if(!(j=f[v]).collideConnected)for(var L=r.length-1;L>=0;L-=1)(j.bodyA===r[L]&&j.bodyB===o[L]||j.bodyB===r[L]&&j.bodyA===o[L])&&(r.splice(L,1),o.splice(L,1))}this.collisionMatrixTick(),u&&(e=performance.now());var k=E,F=i.length;for(v=0;v!==F;v++)k.push(i[v]);i.length=0;var N=this.frictionEquations.length;for(v=0;v!==N;v++)m.push(this.frictionEquations[v]);this.frictionEquations.length=0,this.narrowphase.getContacts(r,o,this,i,k,this.frictionEquations,m),u&&(h.narrowphase=performance.now()-e),u&&(e=performance.now());for(v=0;v<this.frictionEquations.length;v++)l.addEquation(this.frictionEquations[v]);for(var B=i.length,V=0;V!==B;V++){var z=(j=i[V]).bi,U=j.bj;j.si,j.sj,(z.material&&U.material&&this.getContactMaterial(z.material,U.material)||this.defaultContactMaterial).friction;if(z.material&&U.material&&(z.material.friction>=0&&U.material.friction>=0&&z.material.friction*U.material.friction,z.material.restitution>=0&&U.material.restitution>=0&&(j.restitution=z.material.restitution*U.material.restitution)),l.addEquation(j),z.allowSleep&&z.type===p.DYNAMIC&&z.sleepState===p.SLEEPING&&U.sleepState===p.AWAKE&&U.type!==p.STATIC)U.velocity.norm2()+U.angularVelocity.norm2()>=2*Math.pow(U.sleepSpeedLimit,2)&&(z._wakeUpAfterNarrowphase=!0);if(U.allowSleep&&U.type===p.DYNAMIC&&U.sleepState===p.SLEEPING&&z.sleepState===p.AWAKE&&z.type!==p.STATIC)z.velocity.norm2()+z.angularVelocity.norm2()>=2*Math.pow(z.sleepSpeedLimit,2)&&(U._wakeUpAfterNarrowphase=!0);this.collisionMatrix.set(z,U,!0),this.collisionMatrixPrevious.get(z,U)||(P.body=U,P.contact=j,z.dispatchEvent(P),P.body=z,U.dispatchEvent(P))}for(u&&(h.makeContactConstraints=performance.now()-e,e=performance.now()),v=0;v!==s;v++){(z=a[v])._wakeUpAfterNarrowphase&&(z.wakeUp(),z._wakeUpAfterNarrowphase=!1)}D=f.length;for(v=0;v!==D;v++){var j;(j=f[v]).update();L=0;for(var G=j.equations.length;L!==G;L++){var W=j.equations[L];l.addEquation(W)}}l.solve(t,this),u&&(h.solve=performance.now()-e),l.removeAllEquations();var H=Math.pow;for(v=0;v!==s;v++){if((z=a[v]).type&d){var X=H(1-z.linearDamping,t),Y=z.velocity;Y.mult(X,Y);var q=z.angularVelocity;if(q){var K=H(1-z.angularDamping,t);q.mult(K,q)}}}for(this.dispatchEvent(w),v=0;v!==s;v++){(z=a[v]).preStep&&z.preStep.call(z)}u&&(e=performance.now());var Q=O,Z=M,J=this.stepnumber,$=p.DYNAMIC|p.KINEMATIC,tt=J%(this.quatNormalizeSkip+1)==0,et=this.quatNormalizeFast,it=.5*t;n.types.PLANE,n.types.CONVEXPOLYHEDRON;for(v=0;v!==s;v++){var nt=a[v],rt=nt.force,ot=nt.torque;if(nt.type&$&&nt.sleepState!==p.SLEEPING){var st=nt.velocity,at=nt.angularVelocity,lt=nt.position,ct=nt.quaternion,ut=nt.invMass,ht=nt.invInertiaWorld;st.x+=rt.x*ut*t,st.y+=rt.y*ut*t,st.z+=rt.z*ut*t,nt.angularVelocity&&(ht.vmult(ot,R),R.mult(t,R),R.vadd(at,at)),lt.x+=st.x*t,lt.y+=st.y*t,lt.z+=st.z*t,nt.angularVelocity&&(Q.set(at.x,at.y,at.z,0),Q.mult(ct,Z),ct.x+=it*Z.x,ct.y+=it*Z.y,ct.z+=it*Z.z,ct.w+=it*Z.w,tt&&(et?ct.normalizeFast():ct.normalize())),nt.aabb&&(nt.aabbNeedsUpdate=!0),nt.updateInertiaWorld&&nt.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,u&&(h.integrate=performance.now()-e),this.time+=t,this.stepnumber+=1,this.dispatchEvent(A),v=0;v!==s;v++){var pt=(z=a[v]).postStep;pt&&pt.call(z)}if(this.allowSleep)for(v=0;v!==s;v++)a[v].sleepTick(this.time)},_.prototype.clearForces=function(){for(var t=this.bodies,e=t.length,i=0;i!==e;i++){var n=t[i];n.force,n.torque;n.force.set(0,0,0),n.torque.set(0,0,0)}}},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2)},t.exports=r()},IkyP:function(t,e,i){"use strict";i.d(e,"a",function(){return d}),e.b=f;var n=i("LMZF"),r=i("3uJi"),o=i("l6RC"),s=i("Un6q"),a=i("V8+5"),l=i("ppgG"),c=i("8Xfy"),u=i("RyBE"),h=i("j5BN"),p=i("0nO6"),d=(n._13(r.b,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(4608,a.a,a.a,[]),n._25(4608,l.b,l.b,[]),n._25(4608,s.k,s.j,[n.B,[2,s.r]]),n._25(4608,c.j,c.j,[a.a]),n._25(4608,c.i,c.i,[c.j,n.F,s.c]),n._25(136192,c.e,c.c,[[3,c.e],s.c]),n._25(5120,c.n,c.m,[[3,c.n],[2,c.k],s.c]),n._25(5120,c.h,c.f,[[3,c.h],n.F,a.a]),n._25(4608,u.f,h.e,[[2,h.i],[2,h.n]]),n._25(512,o.a,o.a,[]),n._25(256,h.f,!0,[]),n._25(512,h.n,h.n,[[2,h.f]]),n._25(512,a.b,a.b,[]),n._25(512,h.y,h.y,[]),n._25(512,l.c,l.c,[]),n._25(512,s.b,s.b,[]),n._25(512,c.a,c.a,[]),n._25(512,r.b,r.b,[])])}),n._14({encapsulation:2,styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px,0,0)}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}.mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-right:8px;margin-left:0}.mat-slide-toggle-label-before .mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0,0,0);transition:all 80ms linear;transition-property:transform;cursor:-webkit-grab;cursor:grab}.mat-slide-toggle-thumb-container.mat-dragging,.mat-slide-toggle-thumb-container:active{cursor:-webkit-grabbing;cursor:grabbing;transition-duration:0s}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-slide-toggle-thumb{background:#fff;border:solid 1px #000}}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}@media screen and (-ms-high-contrast:active){.mat-slide-toggle-bar{background:#fff}}.mat-slide-toggle-input{bottom:0;left:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}.mat-slide-toggle-ripple{position:absolute;top:-13px;left:-13px;height:46px;width:46px;z-index:1;pointer-events:none}"],data:{}}));function f(t){return n._39(2,[n._35(402653184,1,{_inputElement:0}),n._35(402653184,2,{_ripple:0}),(t()(),n._16(2,0,[["label",1]],null,10,"label",[["class","mat-slide-toggle-label"]],null,null,null,null,null)),(t()(),n._16(3,0,null,null,6,"div",[["class","mat-slide-toggle-bar"]],[[2,"mat-slide-toggle-bar-no-side-margin",null]],null,null,null,null)),(t()(),n._16(4,0,[[1,0],["input",1]],null,0,"input",[["class","mat-slide-toggle-input cdk-visually-hidden"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"tabIndex",0],[8,"checked",0],[8,"disabled",0],[1,"name",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"change"],[null,"click"]],function(t,e,i){var n=!0,r=t.component;"change"===e&&(n=!1!==r._onChangeEvent(i)&&n);"click"===e&&(n=!1!==r._onInputClick(i)&&n);return n},null,null)),(t()(),n._16(5,0,null,null,4,"div",[["class","mat-slide-toggle-thumb-container"]],null,[[null,"slidestart"],[null,"slide"],[null,"slideend"]],function(t,e,i){var n=!0,r=t.component;"slidestart"===e&&(n=!1!==r._onDragStart()&&n);"slide"===e&&(n=!1!==r._onDrag(i)&&n);"slideend"===e&&(n=!1!==r._onDragEnd()&&n);return n},null,null)),(t()(),n._16(6,0,null,null,0,"div",[["class","mat-slide-toggle-thumb"]],null,null,null,null,null)),(t()(),n._16(7,0,null,null,2,"div",[["class","mat-slide-toggle-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),n._15(8,212992,[[2,4]],0,h.x,[n.o,n.F,a.a,[2,h.m]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),n._31(9,{enterDuration:0}),(t()(),n._16(10,0,[["labelContent",1]],null,2,"span",[["class","mat-slide-toggle-content"]],null,[[null,"cdkObserveContent"]],function(t,e,i){var n=!0,r=t.component;"cdkObserveContent"===e&&(n=!1!==r._onLabelTextChange()&&n);return n},null,null)),n._15(11,1720320,null,0,l.a,[l.b,n.o,n.F],null,{event:"cdkObserveContent"}),n._27(null,0)],function(t,e){var i=e.component;t(e,8,0,!0,23,t(e,9,0,300),i.disableRipple||i.disabled,n._28(e,2))},function(t,e){var i=e.component;t(e,3,0,!n._28(e,10).textContent||!n._28(e,10).textContent.trim()),t(e,4,0,i.inputId,i.required,i.tabIndex,i.checked,i.disabled,i.name,i.ariaLabel,i.ariaLabelledby),t(e,7,0,n._28(e,8).unbounded)})}n._12("mat-slide-toggle",r.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null]],null,null,f,d)),n._33(5120,null,p.g,function(t){return[t]},[r.a]),n._15(2,1228800,null,0,r.a,[n.o,a.a,c.h,n.h,[8,null]],null,null)],null,function(t,e){t(e,0,0,n._28(e,2).id,n._28(e,2).checked,n._28(e,2).disabled,"before"==n._28(e,2).labelPosition)})},{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:"aria-label",ariaLabelledby:"aria-labelledby",required:"required",checked:"checked"},{change:"change"},["*"])},Ioj9:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return g}),i.d(e,"c",function(){return y}),i.d(e,"e",function(){return _}),i.d(e,"d",function(){return v});var n=i("LMZF"),r=i("j5BN"),o=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-card-content",host:{class:"mat-card-content"}}]}],t.ctorParameters=function(){return[]},t}(),s=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-card-title, [mat-card-title], [matCardTitle]",host:{class:"mat-card-title"}}]}],t.ctorParameters=function(){return[]},t}(),a=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-card-subtitle, [mat-card-subtitle], [matCardSubtitle]",host:{class:"mat-card-subtitle"}}]}],t.ctorParameters=function(){return[]},t}(),l=function(){function t(){this.align="start"}return t.decorators=[{type:n.n,args:[{selector:"mat-card-actions",exportAs:"matCardActions",host:{class:"mat-card-actions","[class.mat-card-actions-align-end]":'align === "end"'}}]}],t.ctorParameters=function(){return[]},t.propDecorators={align:[{type:n.y}]},t}(),c=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-card-footer",host:{class:"mat-card-footer"}}]}],t.ctorParameters=function(){return[]},t}(),u=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-image], [matCardImage]",host:{class:"mat-card-image"}}]}],t.ctorParameters=function(){return[]},t}(),h=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-sm-image], [matCardImageSmall]",host:{class:"mat-card-sm-image"}}]}],t.ctorParameters=function(){return[]},t}(),p=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-md-image], [matCardImageMedium]",host:{class:"mat-card-md-image"}}]}],t.ctorParameters=function(){return[]},t}(),d=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-lg-image], [matCardImageLarge]",host:{class:"mat-card-lg-image"}}]}],t.ctorParameters=function(){return[]},t}(),f=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-xl-image], [matCardImageXLarge]",host:{class:"mat-card-xl-image"}}]}],t.ctorParameters=function(){return[]},t}(),m=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-card-avatar], [matCardAvatar]",host:{class:"mat-card-avatar"}}]}],t.ctorParameters=function(){return[]},t}(),g=function(){function t(){}return t.decorators=[{type:n.j,args:[{selector:"mat-card",exportAs:"matCard",template:'<ng-content></ng-content><ng-content select="mat-card-footer"></ng-content>',styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:24px;border-radius:2px}.mat-card:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-card .mat-divider{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider{left:auto;right:0}.mat-card .mat-divider.mat-divider-inset{position:static;margin:0}@media screen and (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-flat{box-shadow:none}.mat-card-actions,.mat-card-content,.mat-card-subtitle,.mat-card-title{display:block;margin-bottom:16px}.mat-card-actions{margin-left:-16px;margin-right:-16px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 48px);margin:0 -24px 16px -24px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-footer{display:block;margin:0 -24px -24px -24px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button{margin:0 4px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header-text{margin:0 8px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0}.mat-card-lg-image,.mat-card-md-image,.mat-card-sm-image{margin:-8px 0}.mat-card-title-group{display:flex;justify-content:space-between;margin:0 -8px}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}@media (max-width:599px){.mat-card{padding:24px 16px}.mat-card-actions{margin-left:-8px;margin-right:-8px}.mat-card-image{width:calc(100% + 32px);margin:16px -16px}.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}.mat-card-header{margin:-8px 0 0 0}.mat-card-footer{margin-left:-16px;margin-right:-16px}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-24px}.mat-card>.mat-card-actions:last-child{margin-bottom:-16px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,host:{class:"mat-card"}}]}],t.ctorParameters=function(){return[]},t}(),y=function(){function t(){}return t.decorators=[{type:n.j,args:[{selector:"mat-card-header",template:'<ng-content select="[mat-card-avatar], [matCardAvatar]"></ng-content><div class="mat-card-header-text"><ng-content select="mat-card-title, mat-card-subtitle, [mat-card-title], [mat-card-subtitle], [matCardTitle], [matCardSubtitle]"></ng-content></div><ng-content></ng-content>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,host:{class:"mat-card-header"}}]}],t.ctorParameters=function(){return[]},t}(),_=function(){function t(){}return t.decorators=[{type:n.j,args:[{selector:"mat-card-title-group",template:'<div><ng-content select="mat-card-title, mat-card-subtitle, [mat-card-title], [mat-card-subtitle], [matCardTitle], [matCardSubtitle]"></ng-content></div><ng-content select="img"></ng-content><ng-content></ng-content>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,host:{class:"mat-card-title-group"}}]}],t.ctorParameters=function(){return[]},t}(),v=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.n],exports:[g,y,_,o,s,a,l,c,h,p,d,u,f,m,r.n],declarations:[g,y,_,o,s,a,l,c,h,p,d,u,f,m]}]}],t.ctorParameters=function(){return[]},t}()},JPLW:function(t,e,i){(function(e){var i;i=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=70)}([function(t,e,i){"use strict";var n=i(41)("wks"),r=i(11),o=i(1).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,i){"use strict";t.exports=!i(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(6),r=i(15);t.exports=i(2)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){"use strict";var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,i){"use strict";var n=i(9),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){"use strict";var n=i(12),r=i(34),o=i(25),s=Object.defineProperty;e.f=i(2)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===("undefined"==typeof t?"undefined":n(t))?null!==t:"function"==typeof t}},function(t,e,i){"use strict";t.exports={}},function(t,e,i){"use strict";var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,i){"use strict";var n=i(31);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,i){"use strict";var n=i(7);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";var n=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(t,e,i){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n=i(9),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){"use strict";var n=i(35),r=i(31);t.exports=function(t){return n(r(t))}},function(t,e,i){"use strict";var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,i){"use strict";var n=i(26);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){"use strict";t.exports=!1},function(t,e,i){"use strict";var n=i(1),r=i(3),o=i(4),s=i(11)("src"),a=Function.toString,l=(""+a).split("toString");i(13).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(o(i,s)||r(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,i){"use strict";var n=i(6).f,r=i(4),o=i(0)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){"use strict";var n=i(41)("keys"),r=i(11);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){"use strict";var n=i(7);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){"use strict";var n=i(10),r=i(16),o=i(5);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);c>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(17),r=i(5),o=i(16);t.exports=function(t){return function(e,i,s){var a,l=n(e),c=r(l.length),u=o(s,c);if(t&&i!=i){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){"use strict";var n=i(18),r=i(0)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){"use strict";t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(7),r=i(1).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){"use strict";var n=i(1),r=i(13),o=i(3),s=i(22),a=i(19),l=function t(e,i,l){var c,u,h,p,d=e&t.F,f=e&t.G,m=e&t.P,g=e&t.B,y=f?n:e&t.S?n[i]||(n[i]={}):(n[i]||{}).prototype,_=f?r:r[i]||(r[i]={}),v=_.prototype||(_.prototype={});for(c in f&&(l=i),l)h=((u=!d&&y&&void 0!==y[c])?y:l)[c],p=g&&u?a(h,n):m&&"function"==typeof h?a(Function.call,h):h,y&&s(y,c,h,e&t.U),_[c]!=h&&o(_,c,p),m&&v[c]!=h&&(v[c]=h)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){"use strict";t.exports=!i(2)&&!i(14)(function(){return 7!=Object.defineProperty(i(32)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){"use strict";var n=i(12),r=i(58),o=i(20),s=i(24)("IE_PROTO"),a=function(){},l=function(){var t,e=i(32)("iframe"),n=o.length;for(e.style.display="none",i(51).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e,i){"use strict";var n=i(39),r=i(20).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";var n=i(4),r=i(10),o=i(24)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){"use strict";var n=i(4),r=i(17),o=i(29)(!1),s=i(24)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(c,i)||c.push(i));return c}},function(t,e,i){"use strict";var n=i(22);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(1),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){"use strict";var n=i(9),r=i(5);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){"use strict";for(var n,r=i(1),o=i(3),s=i(11),a=s("typed_array"),l=s("view"),c=!(!r.ArrayBuffer||!r.DataView),u=c,h=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=r[p[h++]])?(o(n.prototype,a,!0),o(n.prototype,l,!0)):u=!1;t.exports={ABV:c,CONSTR:u,TYPED:a,VIEW:l}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof PDFJS||!PDFJS.compatibilityChecked){var r=i(69),o="undefined"!=typeof navigator&&navigator.userAgent||"",s=/Android/.test(o),a=/Android\s[0-2][^\d]/.test(o),l=/Android\s[0-4][^\d]/.test(o),c=o.indexOf("Chrom")>=0,u=/Chrome\/(39|40)\./.test(o),h=o.indexOf("CriOS")>=0,p=o.indexOf("Trident")>=0,d=/\b(iPad|iPhone|iPod)(?=;)/.test(o),f=o.indexOf("Opera")>=0,m=/Safari\//.test(o)&&!/(Chrome\/|Android\s)/.test(o),g="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document));"undefined"==typeof PDFJS&&(r.PDFJS={}),PDFJS.compatibilityChecked=!0,function(){if("undefined"==typeof Uint8ClampedArray&&(r.Uint8ClampedArray=i(45)),"undefined"!=typeof Uint8Array)return"undefined"==typeof Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(t,e){return new Uint8Array(this.slice(t,e))},Float32Array.prototype.subarray=function(t,e){return new Float32Array(this.slice(t,e))}),void("undefined"==typeof Float64Array&&(r.Float64Array=Float32Array));function t(t,e){return new l(this.slice(t,e))}function e(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function o(t,e){this.buffer=t,this.byteLength=t.length,this.length=e,function(t){for(;s<t;)Object.defineProperty(o.prototype,s,a(s)),s++}(this.length)}o.prototype=Object.create(null);var s=0;function a(t){return{get:function(){var e=this.buffer,i=t<<2;return(e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24)>>>0},set:function(e){var i=this.buffer,n=t<<2;i[n]=255&e,i[n+1]=e>>8&255,i[n+2]=e>>16&255,i[n+3]=e>>>24&255}}}function l(i){var r,o,s;if("number"==typeof i)for(r=[],o=0;o<i;++o)r[o]=0;else if("slice"in i)r=i.slice(0);else for(r=[],o=0,s=i.length;o<s;++o)r[o]=i[o];return r.subarray=t,r.buffer=r,r.byteLength=r.length,r.set=e,"object"===("undefined"==typeof i?"undefined":n(i))&&i.buffer&&(r.buffer=i.buffer),r}r.Uint8Array=l,r.Int8Array=l,r.Int32Array=l,r.Uint16Array=l,r.Float32Array=l,r.Float64Array=l,r.Uint32Array=function(){if(3===arguments.length){if(0!==arguments[1])throw new Error("offset !== 0 is not supported");return new o(arguments[0],arguments[2])}return l.apply(this,arguments)}}(),function(){if(g&&window.CanvasPixelArray){var t=window.CanvasPixelArray.prototype;"buffer"in t||(Object.defineProperty(t,"buffer",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(t,"byteLength",{get:function(){return this.length},enumerable:!1,configurable:!0}))}}(),r.URL||(r.URL=r.webkitURL),function(){if("undefined"!=typeof Object.defineProperty){var t=!0;try{g&&Object.defineProperty(new Image,"id",{value:"test"});var e=function(){};e.prototype={get id(){}},Object.defineProperty(new e,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(e){t=!1}if(t)return}Object.defineProperty=function(t,e,i){delete t[e],"get"in i&&t.__defineGetter__(e,i.get),"set"in i&&t.__defineSetter__(e,i.set),"value"in i&&(t.__defineSetter__(e,function(t){return this.__defineGetter__(e,function(){return t}),t}),t[e]=i.value)}}(),function(){if("undefined"!=typeof XMLHttpRequest){var t=XMLHttpRequest.prototype,e=new XMLHttpRequest;"overrideMimeType"in e||Object.defineProperty(t,"overrideMimeType",{value:function(t){}}),"responseType"in e||(Object.defineProperty(t,"responseType",{get:function(){return this._responseType||"text"},set:function(t){"text"!==t&&"arraybuffer"!==t||(this._responseType=t,"arraybuffer"===t&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"==typeof VBArray?Object.defineProperty(t,"response",{get:function(){if("arraybuffer"!==this.responseType)return this.responseText;var t,e=this.responseText,i=e.length,n=new Uint8Array(i);for(t=0;t<i;++t)n[t]=255&e.charCodeAt(t);return n.buffer}}):Object.defineProperty(t,"response",{get:function(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}}))}}(),function(){if(!("btoa"in r)){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.btoa=function(e){var i,n,r="";for(i=0,n=e.length;i<n;i+=3){var o=255&e.charCodeAt(i),s=255&e.charCodeAt(i+1),a=255&e.charCodeAt(i+2),l=(3&o)<<4|s>>4,c=i+1<n?(15&s)<<2|a>>6:64,u=i+2<n?63&a:64;r+=t.charAt(o>>2)+t.charAt(l)+t.charAt(c)+t.charAt(u)}return r}}}(),function(){if(!("atob"in r)){r.atob=function(t){if((t=t.replace(/=+$/,"")).length%4==1)throw new Error("bad atob input");for(var e,i,n=0,r=0,o="";i=t.charAt(r++);~i&&(e=n%4?64*e+i:i,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}}}(),"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e=this,i=Array.prototype.slice.call(arguments,1);return function(){var n=i.concat(Array.prototype.slice.call(arguments));return e.apply(t,n)}}),g&&("dataset"in document.createElement("div")||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var t={},e=0,i=this.attributes.length;e<i;e++){var n=this.attributes[e];"data-"===n.name.substring(0,5)&&(t[n.name.substring(5).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})]=n.value)}return Object.defineProperty(this,"_dataset",{value:t,writable:!1,enumerable:!1}),t},enumerable:!0})),function(){function t(t,e,i,n){var r=(t.className||"").split(/\s+/g);""===r[0]&&r.shift();var o=r.indexOf(e);return o<0&&i&&r.push(e),o>=0&&n&&r.splice(o,1),t.className=r.join(" "),o>=0}if(g&&!("classList"in document.createElement("div"))){var e={add:function(e){t(this.element,e,!0,!1)},contains:function(e){return t(this.element,e,!1,!1)},remove:function(e){t(this.element,e,!1,!0)},toggle:function(e){t(this.element,e,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var t=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:t,writable:!1,enumerable:!1}),t},enumerable:!0})}}(),function(){if(!("undefined"==typeof importScripts||"console"in r)){var t={},e={log:function(){var t=Array.prototype.slice.call(arguments);r.postMessage({targetName:"main",action:"console_log",data:t})},error:function(){var t=Array.prototype.slice.call(arguments);r.postMessage({targetName:"main",action:"console_error",data:t})},time:function(e){t[e]=Date.now()},timeEnd:function(e){var i=t[e];if(!i)throw new Error("Unknown timer name "+e);this.log("Timer:",e,Date.now()-i)}};r.console=e}}(),function(){var t;if(g){if("console"in window)return"bind"in console.log?void 0:(console.log=(t=console.log,function(e){return t(e)}),console.error=function(t){return function(e){return t(e)}}(console.error),void(console.warn=function(t){return function(e){return t(e)}}(console.warn)));window.console={log:function(){},error:function(){},warn:function(){}}}}(),function(){f&&document.addEventListener("click",function(t){(function t(e){return e.disabled||e.parentNode&&t(e.parentNode)})(t.target)&&t.stopPropagation()},!0)}(),(p||h)&&(PDFJS.disableCreateObjectURL=!0),"undefined"!=typeof navigator&&("language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")),(m||a||u||d)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0),g&&(history.pushState&&!a||(PDFJS.disableHistory=!0)),function(){if(g)if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(t){for(var e=0,i=this.length;e<i;e++)this[e]=t[e]});else{var t,e=!1;if(c?e=(t=o.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(t[2])<21:s?e=l:m&&(e=(t=o.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//))&&parseInt(t[1])<6),e){var i=window.CanvasRenderingContext2D.prototype,n=i.createImageData;i.createImageData=function(t,e){var i=n.call(this,t,e);return i.data.set=function(t){for(var e=0,i=this.length;e<i;e++)this[e]=t[e]},i},i=null}}}(),function(){function t(){window.requestAnimationFrame=function(t){return window.setTimeout(t,20)},window.cancelAnimationFrame=function(t){window.clearTimeout(t)}}g&&(d?t():"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame||t()))}(),(d||s)&&(PDFJS.maxCanvasPixels=5242880),g&&p&&window.parent!==window&&(PDFJS.disableFullscreen=!0),g&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var t=document.getElementsByTagName("script");return t[t.length-1]},enumerable:!0,configurable:!0})),function(){if(g){var t=document.createElement("input");try{t.type="number"}catch(n){var e=t.constructor.prototype,i=Object.getOwnPropertyDescriptor(e,"type");Object.defineProperty(e,"type",{get:function(){return i.get.call(this)},set:function(t){i.set.call(this,"number"===t?"text":t)},enumerable:!0,configurable:!0})}}}(),function(){if(g&&document.attachEvent){var t=document.constructor.prototype,e=Object.getOwnPropertyDescriptor(t,"readyState");Object.defineProperty(t,"readyState",{get:function(){var t=e.get.call(this);return"interactive"===t?"loading":t},set:function(t){e.set.call(this,t)},enumerable:!0,configurable:!0})}}(),g&&"undefined"==typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),function(){if(r.Promise)return"function"!=typeof r.Promise.all&&(r.Promise.all=function(t){var e,i,n=0,o=[],s=new r.Promise(function(t,n){e=t,i=n});return t.forEach(function(t,r){n++,t.then(function(t){o[r]=t,0===--n&&e(o)},i)}),0===n&&e(o),s}),"function"!=typeof r.Promise.resolve&&(r.Promise.resolve=function(t){return new r.Promise(function(e){e(t)})}),"function"!=typeof r.Promise.reject&&(r.Promise.reject=function(t){return new r.Promise(function(e,i){i(t)})}),void("function"!=typeof r.Promise.prototype.catch&&(r.Promise.prototype.catch=function(t){return r.Promise.prototype.then(void 0,t)}));var t=2,e={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(t){0!==t._status&&(this.handlers=this.handlers.concat(t._handlers),t._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var e=Date.now()+1;this.handlers.length>0;){var i=this.handlers.shift(),n=i.thisPromise._status,r=i.thisPromise._value;try{1===n?"function"==typeof i.onResolve&&(r=i.onResolve(r)):"function"==typeof i.onReject&&(r=i.onReject(r),n=1,i.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(i.thisPromise))}catch(e){n=t,r=e}if(i.nextPromise._updateStatus(n,r),Date.now()>=e)break}this.handlers.length>0?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++)this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)},scheduleRejectionCheck:function(){var t=this;this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){t.pendingRejectionCheck=!1;for(var e=Date.now(),i=0;i<t.unhandledRejections.length;i++)if(e-t.unhandledRejections[i].time>500){var n=t.unhandledRejections[i].promise._value,r="Unhandled rejection: "+n;n.stack&&(r+="\n"+n.stack);try{throw new Error(r)}catch(t){console.warn(r)}t.unhandledRejections.splice(i),i--}t.unhandledRejections.length&&t.scheduleRejectionCheck()},500))}},i=function(t){this._status=0,this._handlers=[];try{t.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}};i.all=function(e){var n,r,o=new i(function(t,e){n=t,r=e}),s=e.length,a=[];if(0===s)return n(a),o;function l(e){o._status!==t&&(a=[],r(e))}for(var c=0,u=e.length;c<u;++c){var h=e[c],p=function(e){return function(i){o._status!==t&&(a[e]=i,0===--s&&n(a))}}(c);i.isPromise(h)?h.then(p,l):p(h)}return o},i.isPromise=function(t){return t&&"function"==typeof t.then},i.resolve=function(t){return new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,i){i(t)})},i.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(n,r){1!==this._status&&this._status!==t&&(1===n&&i.isPromise(r)?r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,t)):(this._status=n,this._value=r,n===t&&0===this._handlers.length&&(this._unhandledRejection=!0,e.addUnhandledRejection(this)),e.scheduleHandlers(this)))},_resolve:function(t){this._updateStatus(1,t)},_reject:function(e){this._updateStatus(t,e)},then:function(t,n){var r=new i(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:t,onReject:n,nextPromise:r}),e.scheduleHandlers(this),r},catch:function(t){return this.then(void 0,t)}},r.Promise=i}(),function(){if(!r.WeakMap){var t=0;e.prototype={has:function(t){return("object"===("undefined"==typeof t?"undefined":n(t))||"function"==typeof t)&&null!==t&&!!Object.getOwnPropertyDescriptor(t,this.id)},get:function(t){return this.has(t)?t[this.id]:void 0},set:function(t,e){Object.defineProperty(t,this.id,{value:e,enumerable:!1,configurable:!0})},delete:function(t){delete t[this.id]}},r.WeakMap=e}function e(){this.id="$weakmap"+t++}}(),function(){var t=!1;try{if("function"==typeof URL&&"object"===n(URL.prototype)&&"origin"in URL.prototype){var e=new URL("b","http://a");e.pathname="c%20d",t="http://a/c%20d"===e.href}}catch(t){}if(!t){var i=Object.create(null);i.ftp=21,i.file=0,i.gopher=70,i.http=80,i.https=443,i.ws=80,i.wss=443;var o=Object.create(null);o["%2e"]=".",o[".%2e"]="..",o["%2e."]="..",o["%2e%2e"]="..";var s,a=/[a-zA-Z]/,l=/[a-zA-Z0-9\+\-\.]/;y.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){g.call(this),m.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||m.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&m.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],m.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),m.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),m.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new y(this._schemeData).origin||"null"}catch(t){}return"null"}return(t=this.host)?this._scheme+"://"+t:""}};var c=r.URL;c&&(y.createObjectURL=function(t){return c.createObjectURL.apply(c,arguments)},y.revokeObjectURL=function(t){c.revokeObjectURL(t)}),r.URL=y}function u(t){return void 0!==i[t]}function h(){g.call(this),this._isInvalid=!0}function p(t){return""===t&&h.call(this),t.toLowerCase()}function d(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function f(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function m(t,e,n){function r(t){v.push(t)}var c=e||"scheme start",m=0,g="",y=!1,_=!1,v=[];t:for(;(t[m-1]!==s||0===m)&&!this._isInvalid;){var b=t[m];switch(c){case"scheme start":if(!b||!a.test(b)){if(e){r("Invalid scheme.");break t}g="",c="no scheme";continue}g+=b.toLowerCase(),c="scheme";break;case"scheme":if(b&&l.test(b))g+=b.toLowerCase();else{if(":"!==b){if(e){if(b===s)break t;r("Code point not allowed in scheme: "+b);break t}g="",m=0,c="no scheme";continue}if(this._scheme=g,g="",e)break t;u(this._scheme)&&(this._isRelative=!0),c="file"===this._scheme?"relative":this._isRelative&&n&&n._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===b?(this._query="?",c="query"):"#"===b?(this._fragment="#",c="fragment"):b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._schemeData+=d(b));break;case"no scheme":if(n&&u(n._scheme)){c="relative";continue}r("Missing scheme."),h.call(this);break;case"relative or authority":if("/"!==b||"/"!==t[m+1]){r("Expected /, got: "+b),c="relative";continue}c="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=n._scheme),b===s){this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._username=n._username,this._password=n._password;break t}if("/"===b||"\\"===b)"\\"===b&&r("\\ is an invalid code point."),c="relative slash";else if("?"===b)this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query="?",this._username=n._username,this._password=n._password,c="query";else{if("#"!==b){var x=t[m+1],A=t[m+2];("file"!==this._scheme||!a.test(b)||":"!==x&&"|"!==x||A!==s&&"/"!==A&&"\\"!==A&&"?"!==A&&"#"!==A)&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password,this._path=n._path.slice(),this._path.pop()),c="relative path";continue}this._host=n._host,this._port=n._port,this._path=n._path.slice(),this._query=n._query,this._fragment="#",this._username=n._username,this._password=n._password,c="fragment"}break;case"relative slash":if("/"!==b&&"\\"!==b){"file"!==this._scheme&&(this._host=n._host,this._port=n._port,this._username=n._username,this._password=n._password),c="relative path";continue}"\\"===b&&r("\\ is an invalid code point."),c="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==b){r("Expected '/', got: "+b),c="authority ignore slashes";continue}c="authority second slash";break;case"authority second slash":if(c="authority ignore slashes","/"!==b){r("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!==b&&"\\"!==b){c="authority";continue}r("Expected authority, got: "+b);break;case"authority":if("@"===b){y&&(r("@ already seen."),g+="%40"),y=!0;for(var w=0;w<g.length;w++){var P=g[w];if("\t"!==P&&"\n"!==P&&"\r"!==P)if(":"!==P||null!==this._password){var E=d(P);null!==this._password?this._password+=E:this._username+=E}else this._password="";else r("Invalid whitespace in authority.")}g=""}else{if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){m-=g.length,g="",c="host";continue}g+=b}break;case"file host":if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){2!==g.length||!a.test(g[0])||":"!==g[1]&&"|"!==g[1]?0===g.length?c="relative path start":(this._host=p.call(this,g),g="",c="relative path start"):c="relative path";continue}"\t"===b||"\n"===b||"\r"===b?r("Invalid whitespace in file host."):g+=b;break;case"host":case"hostname":if(":"!==b||_){if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b){if(this._host=p.call(this,g),g="",c="relative path start",e)break t;continue}"\t"!==b&&"\n"!==b&&"\r"!==b?("["===b?_=!0:"]"===b&&(_=!1),g+=b):r("Invalid code point in host/hostname: "+b)}else if(this._host=p.call(this,g),g="",c="port","hostname"===e)break t;break;case"port":if(/[0-9]/.test(b))g+=b;else{if(b===s||"/"===b||"\\"===b||"?"===b||"#"===b||e){if(""!==g){var T=parseInt(g,10);T!==i[this._scheme]&&(this._port=T+""),g=""}if(e)break t;c="relative path start";continue}"\t"===b||"\n"===b||"\r"===b?r("Invalid code point in port: "+b):h.call(this)}break;case"relative path start":if("\\"===b&&r("'\\' not allowed in path."),c="relative path","/"!==b&&"\\"!==b)continue;break;case"relative path":var S;if(b!==s&&"/"!==b&&"\\"!==b&&(e||"?"!==b&&"#"!==b))"\t"!==b&&"\n"!==b&&"\r"!==b&&(g+=d(b));else"\\"===b&&r("\\ not allowed in relative path."),(S=o[g.toLowerCase()])&&(g=S),".."===g?(this._path.pop(),"/"!==b&&"\\"!==b&&this._path.push("")):"."===g&&"/"!==b&&"\\"!==b?this._path.push(""):"."!==g&&("file"===this._scheme&&0===this._path.length&&2===g.length&&a.test(g[0])&&"|"===g[1]&&(g=g[0]+":"),this._path.push(g)),g="","?"===b?(this._query="?",c="query"):"#"===b&&(this._fragment="#",c="fragment");break;case"query":e||"#"!==b?b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._query+=f(b)):(this._fragment="#",c="fragment");break;case"fragment":b!==s&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._fragment+=b)}m++}}function g(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function y(t,e){void 0===e||e instanceof y||(e=new y(String(e))),this._url=t,g.call(this);var i=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");m.call(this,i,null,e)}}()}},function(t,e,i){"use strict";i(68),t.exports=i(13).Uint8ClampedArray},function(t,e,i){"use strict";var n=i(0)("unscopables"),r=Array.prototype;null==r[n]&&i(3)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){"use strict";var n=i(10),r=i(16),o=i(5);t.exports=[].copyWithin||function(t,e){var i=n(this),s=o(i.length),a=r(t,s),l=r(e,s),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?s:r(c,s))-l,s-a),h=1;for(l<a&&a<l+u&&(h=-1,l+=u-1,a+=u-1);u-- >0;)l in i?i[a]=i[l]:delete i[a],a+=h,l+=h;return i}},function(t,e,i){"use strict";var n=i(19),r=i(35),o=i(10),s=i(5),a=i(50);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,h=6==t,p=5==t||h,d=e||a;return function(e,a,f){for(var m,g,y=o(e),_=r(y),v=n(a,f,3),b=s(_.length),x=0,A=i?d(e,b):l?d(e,0):void 0;b>x;x++)if((p||x in _)&&(g=v(m=_[x],x,y),t))if(i)A[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:A.push(m)}else if(u)return!1;return h?-1:c||u?u:A}}},function(t,e,i){"use strict";var n=i(7),r=i(53),o=i(0)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(49);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(1).document;t.exports=n&&n.documentElement},function(t,e,i){"use strict";var n=i(8),r=i(0)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){"use strict";var n=i(18);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";var n=i(36),r=i(15),o=i(23),s={};i(3)(s,i(0)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(21),r=i(33),o=i(22),s=i(3),a=i(4),l=i(8),c=i(54),u=i(23),h=i(38),p=i(0)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,m,g,y,_){c(i,e,m);var v,b,x,A=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",P="values"==g,E=!1,T=t.prototype,S=T[p]||T["@@iterator"]||g&&T[g],C=S||A(g),O=g?P?A("entries"):C:void 0,M="Array"==e&&T.entries||S;if(M&&(x=h(M.call(new t)))!==Object.prototype&&x.next&&(u(x,w,!0),n||a(x,p)||s(x,p,f)),P&&S&&"values"!==S.name&&(E=!0,C=function(){return S.call(this)}),n&&!_||!d&&!E&&T[p]||s(T,p,C),l[e]=C,l[w]=f,g)if(v={values:P?C:A("values"),keys:y?C:A("keys"),entries:O},_)for(b in v)b in T||o(T,b,v[b]);else r(r.P+r.F*(d||E),e,v);return v}},function(t,e,i){"use strict";var n=i(0)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(6),r=i(12),o=i(60);t.exports=i(2)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){"use strict";var n=i(61),r=i(15),o=i(17),s=i(25),a=i(4),l=i(34),c=Object.getOwnPropertyDescriptor;e.f=i(2)?c:function(t,e){if(t=o(t),e=s(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){"use strict";var n=i(39),r=i(20);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){"use strict";e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";var n=i(1),r=i(6),o=i(2),s=i(0)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){"use strict";var n=i(12),r=i(26),o=i(0)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[o])?e:r(i)}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(i(2)){var r=i(21),o=i(1),s=i(14),a=i(33),l=i(43),c=i(65),u=i(19),h=i(27),p=i(15),d=i(3),f=i(40),m=i(9),g=i(5),y=i(42),_=i(16),v=i(25),b=i(4),x=i(30),A=i(7),w=i(10),P=i(52),E=i(36),T=i(38),S=i(37).f,C=i(66),O=i(11),M=i(0),R=i(48),I=i(29),D=i(63),L=i(67),k=i(8),F=i(56),N=i(62),B=i(28),V=i(47),z=i(6),U=i(59),j=z.f,G=U.f,W=o.RangeError,H=o.TypeError,X=o.Uint8Array,Y=Array.prototype,q=c.ArrayBuffer,K=c.DataView,Q=R(0),Z=R(2),J=R(3),$=R(4),tt=R(5),et=R(6),it=I(!0),nt=I(!1),rt=L.values,ot=L.keys,st=L.entries,at=Y.lastIndexOf,lt=Y.reduce,ct=Y.reduceRight,ut=Y.join,ht=Y.sort,pt=Y.slice,dt=Y.toString,ft=Y.toLocaleString,mt=M("iterator"),gt=M("toStringTag"),yt=O("typed_constructor"),_t=O("def_constructor"),vt=l.CONSTR,bt=l.TYPED,xt=l.VIEW,At=R(1,function(t,e){return St(D(t,t[_t]),e)}),wt=s(function(){return 1===new X(new Uint16Array([1]).buffer)[0]}),Pt=!!X&&!!X.prototype.set&&s(function(){new X(1).set({})}),Et=function(t,e){var i=m(t);if(i<0||i%e)throw W("Wrong offset!");return i},Tt=function(t){if(A(t)&&bt in t)return t;throw H(t+" is not a typed array!")},St=function(t,e){if(!(A(t)&&yt in t))throw H("It is not a typed array constructor!");return new t(e)},Ct=function(t,e){return Ot(D(t,t[_t]),e)},Ot=function(t,e){for(var i=0,n=e.length,r=St(t,n);n>i;)r[i]=e[i++];return r},Mt=function(t,e,i){j(t,e,{get:function(){return this._d[i]}})},Rt=function(t){var e,i,n,r,o,s,a=w(t),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,p=C(a);if(null!=p&&!P(p)){for(s=p.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(h&&l>2&&(c=u(c,arguments[2],2)),e=0,i=g(a.length),r=St(this,i);i>e;e++)r[e]=h?c(a[e],e):a[e];return r},It=function(){for(var t=0,e=arguments.length,i=St(this,e);e>t;)i[t]=arguments[t++];return i},Dt=!!X&&s(function(){ft.call(new X(1))}),Lt=function(){return ft.apply(Dt?pt.call(Tt(this)):Tt(this),arguments)},kt={copyWithin:function(t,e){return V.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return $(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Tt(this),arguments)},filter:function(t){return Ct(this,Z(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Tt(this),arguments)},lastIndexOf:function(t){return at.apply(Tt(this),arguments)},map:function(t){return At(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Tt(this),arguments)},reduceRight:function(t){return ct.apply(Tt(this),arguments)},reverse:function(){for(var t,e=Tt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return J(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ht.call(Tt(this),t)},subarray:function(t,e){var i=Tt(this),n=i.length,r=_(t,n);return new(D(i,i[_t]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,g((void 0===e?n:_(e,n))-r))}},Ft=function(t,e){return Ct(this,pt.call(Tt(this),t,e))},Nt=function(t){Tt(this);var e=Et(arguments[1],1),i=this.length,n=w(t),r=g(n.length),o=0;if(r+e>i)throw W("Wrong length!");for(;o<r;)this[e+o]=n[o++]},Bt={entries:function(){return st.call(Tt(this))},keys:function(){return ot.call(Tt(this))},values:function(){return rt.call(Tt(this))}},Vt=function(t,e){return A(t)&&t[bt]&&"symbol"!=("undefined"==typeof e?"undefined":n(e))&&e in t&&String(+e)==String(e)},zt=function(t,e){return Vt(t,e=v(e,!0))?p(2,t[e]):G(t,e)},Ut=function(t,e,i){return!(Vt(t,e=v(e,!0))&&A(i)&&b(i,"value"))||b(i,"get")||b(i,"set")||i.configurable||b(i,"writable")&&!i.writable||b(i,"enumerable")&&!i.enumerable?j(t,e,i):(t[e]=i.value,t)};vt||(U.f=zt,z.f=Ut),a(a.S+a.F*!vt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Ut}),s(function(){dt.call({})})&&(dt=ft=function(){return ut.call(this)});var jt=f({},kt);f(jt,Bt),d(jt,mt,Bt.values),f(jt,{slice:Ft,set:Nt,constructor:function(){},toString:dt,toLocaleString:Lt}),Mt(jt,"buffer","b"),Mt(jt,"byteOffset","o"),Mt(jt,"byteLength","l"),Mt(jt,"length","e"),j(jt,gt,{get:function(){return this[bt]}}),t.exports=function(t,e,i,n){var c=t+((n=!!n)?"Clamped":"")+"Array",u="get"+t,p="set"+t,f=o[c],m=f||{},_=f&&T(f),v=!f||!l.ABV,b={},w=f&&f.prototype,P=function(t,i){j(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[u](i*e+n.o,wt)}(this,i)},set:function(t){return function(t,i,r){var o=t._d;n&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](i*e+o.o,r,wt)}(this,i,t)},enumerable:!0})};v?(f=i(function(t,i,n,r){h(t,f,c,"_d");var o,s,a,l,u=0,p=0;if(A(i)){if(!(i instanceof q||"ArrayBuffer"==(l=x(i))||"SharedArrayBuffer"==l))return bt in i?Ot(f,i):Rt.call(f,i);o=i,p=Et(n,e);var m=i.byteLength;if(void 0===r){if(m%e)throw W("Wrong length!");if((s=m-p)<0)throw W("Wrong length!")}else if((s=g(r)*e)+p>m)throw W("Wrong length!");a=s/e}else a=y(i),o=new q(s=a*e);for(d(t,"_d",{b:o,o:p,l:s,e:a,v:new K(o)});u<a;)P(t,u++)}),w=f.prototype=E(jt),d(w,"constructor",f)):s(function(){f(1)})&&s(function(){new f(-1)})&&F(function(t){new f,new f(null),new f(1.5),new f(t)},!0)||(f=i(function(t,i,n,r){var o;return h(t,f,c),A(i)?i instanceof q||"ArrayBuffer"==(o=x(i))||"SharedArrayBuffer"==o?void 0!==r?new m(i,Et(n,e),r):void 0!==n?new m(i,Et(n,e)):new m(i):bt in i?Ot(f,i):Rt.call(f,i):new m(y(i))}),Q(_!==Function.prototype?S(m).concat(S(_)):S(m),function(t){t in f||d(f,t,m[t])}),f.prototype=w,r||(w.constructor=f));var C=w[mt],O=!!C&&("values"==C.name||null==C.name),M=Bt.values;d(f,yt,!0),d(w,bt,c),d(w,xt,!0),d(w,_t,f),(n?new f(1)[gt]==c:gt in w)||j(w,gt,{get:function(){return c}}),b[c]=f,a(a.G+a.W+a.F*(f!=m),b),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*s(function(){m.of.call(f,1)}),c,{from:Rt,of:It}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),a(a.P,c,kt),N(c),a(a.P+a.F*Pt,c,{set:Nt}),a(a.P+a.F*!O,c,Bt),r||w.toString==dt||(w.toString=dt),a(a.P+a.F*s(function(){new f(1).slice()}),c,{slice:Ft}),a(a.P+a.F*(s(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!s(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Lt}),k[c]=O?C:M,r||O||d(w,mt,M)}}else t.exports=function(){}},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(21),s=i(43),a=i(3),l=i(40),c=i(14),u=i(27),h=i(9),p=i(5),d=i(42),f=i(37).f,m=i(6).f,g=i(28),y=i(23),_="prototype",v="Wrong index!",b=n.ArrayBuffer,x=n.DataView,A=n.Math,w=n.RangeError,P=n.Infinity,E=b,T=A.abs,S=A.pow,C=A.floor,O=A.log,M=A.LN2,R=r?"_b":"buffer",I=r?"_l":"byteLength",D=r?"_o":"byteOffset";function L(t,e,i){var n,r,o,s=Array(i),a=8*i-e-1,l=(1<<a)-1,c=l>>1,u=23===e?S(2,-24)-S(2,-77):0,h=0,p=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===P?(r=t!=t?1:0,n=l):(n=C(O(t)/M),t*(o=S(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?u/o:u*S(2,1-c))*o>=2&&(n++,o/=2),n+c>=l?(r=0,n=l):n+c>=1?(r=(t*o-1)*S(2,e),n+=c):(r=t*S(2,c-1)*S(2,e),n=0));e>=8;s[h++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[h++]=255&n,n/=256,a-=8);return s[--h]|=128*p,s}function k(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,l=i-1,c=t[l--],u=127&c;for(c>>=7;a>0;u=256*u+t[l],l--,a-=8);for(n=u&(1<<-a)-1,u>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===u)u=1-s;else{if(u===o)return n?NaN:c?-P:P;n+=S(2,e),u-=s}return(c?-1:1)*n*S(2,u-e)}function F(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function N(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function V(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return L(t,52,8)}function U(t){return L(t,23,4)}function j(t,e,i){m(t[_],e,{get:function(){return this[i]}})}function G(t,e,i,n){var r=d(+i);if(r+e>t[I])throw w(v);var o=t[R]._b,s=r+t[D],a=o.slice(s,s+e);return n?a:a.reverse()}function W(t,e,i,n,r,o){var s=d(+i);if(s+e>t[I])throw w(v);for(var a=t[R]._b,l=s+t[D],c=n(+r),u=0;u<e;u++)a[l+u]=c[o?u:e-u-1]}if(s.ABV){if(!c(function(){b(1)})||!c(function(){new b(-1)})||c(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var H,X=(b=function(t){return u(this,b),new E(d(t))})[_]=E[_],Y=f(E),q=0;Y.length>q;)(H=Y[q++])in b||a(b,H,E[H]);o||(X.constructor=b)}var K=new x(new b(2)),Q=x[_].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||l(x[_],{setInt8:function(t,e){Q.call(this,t,e<<24>>24)},setUint8:function(t,e){Q.call(this,t,e<<24>>24)}},!0)}else b=function(t){u(this,b,"ArrayBuffer");var e=d(t);this._b=g.call(Array(e),0),this[I]=e},x=function(t,e,i){u(this,x,"DataView"),u(t,b,"DataView");var n=t[I],r=h(e);if(r<0||r>n)throw w("Wrong offset!");if(r+(i=void 0===i?n-r:p(i))>n)throw w("Wrong length!");this[R]=t,this[D]=r,this[I]=i},r&&(j(b,"byteLength","_l"),j(x,"buffer","_b"),j(x,"byteLength","_l"),j(x,"byteOffset","_o")),l(x[_],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return F(G(this,4,t,arguments[1]))},getUint32:function(t){return F(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return k(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return k(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){W(this,1,t,N,e)},setUint8:function(t,e){W(this,1,t,N,e)},setInt16:function(t,e){W(this,2,t,B,e,arguments[2])},setUint16:function(t,e){W(this,2,t,B,e,arguments[2])},setInt32:function(t,e){W(this,4,t,V,e,arguments[2])},setUint32:function(t,e){W(this,4,t,V,e,arguments[2])},setFloat32:function(t,e){W(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){W(this,8,t,z,e,arguments[2])}});y(b,"ArrayBuffer"),y(x,"DataView"),a(x[_],s.VIEW,!0),e.ArrayBuffer=b,e.DataView=x},function(t,e,i){"use strict";var n=i(30),r=i(0)("iterator"),o=i(8);t.exports=i(13).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){"use strict";var n=i(46),r=i(57),o=i(8),s=i(17);t.exports=i(55)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";i(64)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,i,n){"use strict";t.exports="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:{}},function(t,e,i){"use strict";i(44)}])},t.exports=i()}).call(e,i("GTd5"))},Jsyr:function(t,e,i){"use strict";var n=i("AP4T"),r=i("Ecq+"),o=i("1j/l"),s=i("qgI0"),a=i("lI6h"),l=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=function(t){function e(e,i){t.call(this),this.sources=e,this.resultSelector=i}return l(e,t),e.create=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];if(null===t||0===arguments.length)return new r.a;var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),0===t.length?new r.a:new e(t,n)},e.prototype._subscribe=function(t){return new u(t,this.sources,this.resultSelector)},e}(n.a),u=function(t){function e(e,i,n){t.call(this,e),this.sources=i,this.resultSelector=n,this.completed=0,this.haveValues=0;var r=i.length;this.total=r,this.values=new Array(r);for(var o=0;o<r;o++){var a=i[o],l=Object(s.a)(this,a,null,o);l&&(l.outerIndex=o,this.add(l))}}return l(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.values[i]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,i=this.haveValues,n=this.resultSelector,r=this.values,o=r.length;if(t._hasValue){if(this.completed++,this.completed===o){if(i===o){var s=n?n.apply(this,r):r;e.next(s)}e.complete()}}else e.complete()},e}(a.a);i.d(e,"a",function(){return h});var h=c.create},KRwF:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("xIGM"),r=i("AP4T"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=function(t){function e(e,i){t.call(this),this.promise=e,this.scheduler=i}return o(e,t),e.create=function(t,i){return new e(t,i)},e.prototype._subscribe=function(t){var e=this,i=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):i.then(function(i){e.value=i,e._isScalar=!0,t.closed||(t.next(i),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){n.a.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return r.schedule(a,0,{value:this.value,subscriber:t})}else i.then(function(i){e.value=i,e._isScalar=!0,t.closed||t.add(r.schedule(a,0,{value:i,subscriber:t}))},function(e){t.closed||t.add(r.schedule(l,0,{err:e,subscriber:t}))}).then(null,function(t){n.a.setTimeout(function(){throw t})})},e}(r.a);function a(t){var e=t.value,i=t.subscriber;i.closed||(i.next(e),i.complete())}function l(t){var e=t.err,i=t.subscriber;i.closed||i.error(e)}},LMZF:function(t,e,i){"use strict";(function(t){i.d(e,"e",function(){return Je}),i.d(e,"_3",function(){return He}),i.d(e,"_6",function(){return Xe}),i.d(e,"_2",function(){return qe}),i.d(e,"E",function(){return Ye}),i.d(e,"a",function(){return ee}),i.d(e,"J",function(){return oe}),i.d(e,"I",function(){return se}),i.d(e,"b",function(){return $t}),i.d(e,"c",function(){return te}),i.d(e,"_5",function(){return vi}),i.d(e,"V",function(){return Ne}),i.d(e,"_8",function(){return Ve}),i.d(e,"B",function(){return Gi}),i.d(e,"d",function(){return qi}),i.d(e,"r",function(){return Oe}),i.d(e,"q",function(){return Pt}),i.d(e,"P",function(){return Qi}),i.d(e,"Q",function(){return Ki}),i.d(e,"f",function(){return y}),i.d(e,"l",function(){return b}),i.d(e,"m",function(){return v}),i.d(e,"X",function(){return A}),i.d(e,"Y",function(){return x}),i.d(e,"j",function(){return T}),i.d(e,"n",function(){return E}),i.d(e,"t",function(){return M}),i.d(e,"y",function(){return C}),i.d(e,"H",function(){return O}),i.d(e,"K",function(){return S}),i.d(e,"C",function(){return R}),i.d(e,"_0",function(){return I}),i.d(e,"W",function(){return D}),i.d(e,"_4",function(){return Q}),i.d(e,"x",function(){return it}),i.d(e,"w",function(){return c}),i.d(e,"u",function(){return k}),i.d(e,"G",function(){return F}),i.d(e,"v",function(){return N}),i.d(e,"R",function(){return B}),i.d(e,"T",function(){return V}),i.d(e,"s",function(){return z}),i.d(e,"F",function(){return Me}),i.d(e,"L",function(){return ti}),i.d(e,"M",function(){return ni}),i.d(e,"N",function(){return ei}),i.d(e,"O",function(){return ii}),i.d(e,"i",function(){return ue}),i.d(e,"k",function(){return ve}),i.d(e,"o",function(){return ri}),i.d(e,"D",function(){return Ae}),i.d(e,"U",function(){return ci}),i.d(e,"Z",function(){return ui}),i.d(e,"p",function(){return pi}),i.d(e,"g",function(){return w}),i.d(e,"h",function(){return hi}),i.d(e,"z",function(){return Fi}),i.d(e,"A",function(){return Ni}),i.d(e,"S",function(){return wi}),i.d(e,"_1",function(){return Ai}),i.d(e,"_7",function(){return ji}),i.d(e,"_20",function(){return Pi}),i.d(e,"_10",function(){return le}),i.d(e,"_9",function(){return be}),i.d(e,"_17",function(){return G}),i.d(e,"_23",function(){return q}),i.d(e,"_36",function(){return K}),i.d(e,"_21",function(){return Jt}),i.d(e,"_22",function(){return Zt}),i.d(e,"_11",function(){return Hn}),i.d(e,"_12",function(){return hr}),i.d(e,"_13",function(){return vs}),i.d(e,"_14",function(){return mn}),i.d(e,"_15",function(){return Lr}),i.d(e,"_16",function(){return Xn}),i.d(e,"_19",function(){return Gn}),i.d(e,"_24",function(){return er}),i.d(e,"_25",function(){return tr}),i.d(e,"_27",function(){return io}),i.d(e,"_28",function(){return Ar}),i.d(e,"_30",function(){return kr}),i.d(e,"_33",function(){return Fr}),i.d(e,"_31",function(){return oo}),i.d(e,"_32",function(){return ro}),i.d(e,"_35",function(){return Zr}),i.d(e,"_37",function(){return ao}),i.d(e,"_38",function(){return pn}),i.d(e,"_39",function(){return uo}),i.d(e,"_26",function(){return Hi}),i.d(e,"_29",function(){return Xi}),i.d(e,"_34",function(){return Yi}),i.d(e,"_18",function(){return ie});var n=i("6Xbx"),r=i("AP4T"),o=i("2kLc"),s=i("URbD"),a=i("TO51"),l=i("qLnt"),c=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),u="__annotations__",h="__paramaters__",p="__prop__metadata__";function d(t,e,i,n){var r=f(e);function o(t){if(this instanceof o)return r.call(this,t),this;var e=new o(t),i=function(t){return(t.hasOwnProperty(u)?t[u]:Object.defineProperty(t,u,{value:[]})[u]).push(e),t};return n&&n(i),i}return i&&(o.prototype=Object.create(i.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function f(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t){var n=t.apply(void 0,e);for(var r in n)this[r]=n[r]}}}function m(t,e,i){var n=f(e);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof r)return n.apply(this,t),this;var i,o=new((i=r).bind.apply(i,[void 0].concat(t)));return s.annotation=o,s;function s(t,e,i){for(var n=t.hasOwnProperty(h)?t[h]:Object.defineProperty(t,h,{value:[]})[h];n.length<=i;)n.push(null);return(n[i]=n[i]||[]).push(o),t}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}function g(t,e,i){var n=f(e);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof r)return n.apply(this,t),this;var i,o=new((i=r).bind.apply(i,[void 0].concat(t)));return function(t,e){var i=t.constructor,n=i.hasOwnProperty(p)?i[p]:Object.defineProperty(i,p,{value:{}})[p];n[e]=n.hasOwnProperty(e)&&n[e]||[],n[e].unshift(o)}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}new c("AnalyzeForEntryComponents");var y=m("Attribute",function(t){return{attributeName:t}}),_=function(){return function(){}}(),v=g("ContentChildren",function(t,e){return void 0===e&&(e={}),Object(n.a)({selector:t,first:!1,isViewQuery:!1,descendants:!1},e)},_),b=g("ContentChild",function(t,e){return void 0===e&&(e={}),Object(n.a)({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},_),x=g("ViewChildren",function(t,e){return void 0===e&&(e={}),Object(n.a)({selector:t,first:!1,isViewQuery:!0,descendants:!0},e)},_),A=g("ViewChild",function(t,e){return Object(n.a)({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},_),w={OnPush:0,Default:1};w[w.OnPush]="OnPush",w[w.Default]="Default";var P={CheckOnce:0,Checked:1,CheckAlways:2,Detached:3,Errored:4,Destroyed:5};P[P.CheckOnce]="CheckOnce",P[P.Checked]="Checked",P[P.CheckAlways]="CheckAlways",P[P.Detached]="Detached",P[P.Errored]="Errored",P[P.Destroyed]="Destroyed";var E=d("Directive",function(t){return void 0===t&&(t={}),t}),T=d("Component",function(t){return void 0===t&&(t={}),Object(n.a)({changeDetection:w.Default},t)},E),S=d("Pipe",function(t){return Object(n.a)({pure:!0},t)}),C=g("Input",function(t){return{bindingPropertyName:t}}),O=g("Output",function(t){return{bindingPropertyName:t}}),M=(g("HostBinding",function(t){return{hostPropertyName:t}}),g("HostListener",function(t,e){return{eventName:t,args:e}})),R=d("NgModule",function(t){return t}),I={Emulated:0,Native:1,None:2};I[I.Emulated]="Emulated",I[I.Native]="Native",I[I.None]="None";var D=function(){return function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}(),L=new D("5.2.4"),k=m("Inject",function(t){return{token:t}}),F=m("Optional"),N=d("Injectable"),B=m("Self"),V=m("SkipSelf"),z=m("Host"),U="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,G=U||"undefined"!=typeof t&&t||j,W=Promise.resolve(0),H=null;function X(){if(!H){var t=G.Symbol;if(t&&t.iterator)H=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),i=0;i<e.length;++i){var n=e[i];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(H=n)}}return H}function Y(t){"undefined"==typeof Zone?W.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function q(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function K(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(K).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var i=e.indexOf("\n");return-1===i?e:e.substring(0,i)}function Q(t){return t.__forward_ref__=Q,t.toString=function(){return K(this())},t}function Z(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===Q?t():t}var J="__source",$=new Object,tt=$,et=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=$),e===$)throw new Error("NullInjectorError: No provider for "+K(t)+"!");return e},t}(),it=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new dt(t,e):new dt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=$,t.NULL=new et,t}(),nt=function(t){return t},rt=[],ot=nt,st=function(){return Array.prototype.slice.call(arguments)},at={},lt=function(t){for(var e in t)if(t[e]===at)return e;throw Error("!prop")}({provide:String,useValue:at}),ct="ngTempTokenPath",ut=it.NULL,ht=/\n/gm,pt="\u0275",dt=function(){function t(t,e,i){void 0===e&&(e=ut),void 0===i&&(i=null),this.parent=e,this.source=i;var n=this._records=new Map;n.set(it,{token:it,fn:nt,deps:rt,value:this,useNew:!1}),function t(e,i){if(i)if((i=Z(i))instanceof Array)for(var n=0;n<i.length;n++)t(e,i[n]);else{if("function"==typeof i)throw yt("Function/Class not supported",i);if(!i||"object"!=typeof i||!i.provide)throw yt("Unexpected provider",i);var r=Z(i.provide),o=function(t){var e=function(t){var e=rt,i=t.deps;if(i&&i.length){e=[];for(var n=0;n<i.length;n++){var r=6,o=Z(i[n]);if(o instanceof Array)for(var s=0,a=o;s<a.length;s++){var l=a[s];l instanceof F||l==F?r|=1:l instanceof V||l==V?r&=-3:l instanceof B||l==B?r&=-5:o=l instanceof k?l.token:Z(l)}e.push({token:o,options:r})}}else if(t.useExisting){var o=Z(t.useExisting);e=[{token:o,options:6}]}else if(!(i||lt in t))throw yt("'deps' required",t);return e}(t),i=nt,n=rt,r=!1,o=Z(t.provide);if(lt in t)n=t.useValue;else if(t.useFactory)i=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,i=Z(t.useClass);else{if("function"!=typeof o)throw yt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,i=o}return{deps:e,fn:i,useNew:r,value:n}}(i);if(!0===i.multi){var s=e.get(r);if(s){if(s.fn!==st)throw ft(r)}else e.set(r,s={token:i.provide,deps:[],useNew:!1,fn:st,value:rt});r=i,s.deps.push({token:r,options:6})}var a=e.get(r);if(a&&a.fn==st)throw ft(r);e.set(r,o)}}(n,t)}return t.prototype.get=function(t,e){var i=this._records.get(t);try{return mt(t,i,this._records,this.parent,e)}catch(e){var n=e[ct];throw t[J]&&n.unshift(t[J]),e.message=gt("\n"+e.message,n,this.source),e.ngTokenPath=n,e[ct]=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,i){return t.push(K(i))}),"StaticInjector["+t.join(", ")+"]"},t}();function ft(t){return yt("Cannot mix multi providers and regular providers",t)}function mt(t,e,i,n,r){try{return function(t,e,i,n,r){var o,s;if(e){if((o=e.value)==ot)throw Error(pt+"Circular dependency");if(o===rt){e.value=ot;var a=void 0,l=e.useNew,c=e.fn,u=e.deps,h=rt;if(u.length){h=[];for(var p=0;p<u.length;p++){var d=u[p],f=d.options,m=2&f?i.get(d.token):void 0;h.push(mt(d.token,m,i,m||4&f?n:ut,1&f?null:it.THROW_IF_NOT_FOUND))}}e.value=o=l?new((s=c).bind.apply(s,[void 0].concat(h))):c.apply(a,h)}}else o=n.get(t,r);return o}(t,e,i,n,r)}catch(i){throw i instanceof Error||(i=new Error(i)),(i[ct]=i[ct]||[]).unshift(t),e&&e.value==ot&&(e.value=rt),i}}function gt(t,e,i){void 0===i&&(i=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==pt?t.substr(2):t;var n=K(e);if(e instanceof Array)n=e.map(K).join(" -> ");else if("object"==typeof e){var r=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];r.push(o+":"+("string"==typeof s?JSON.stringify(s):K(s)))}n="{"+r.join(", ")+"}"}return"StaticInjectorError"+(i?"("+i+")":"")+"["+n+"]: "+t.replace(ht,"\n  ")}function yt(t,e){return new Error(gt(t,e))}var _t="ngDebugContext",vt="ngOriginalError",bt="ngErrorLogger";function xt(t){return t[_t]}function At(t){return t[vt]}function wt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t.error.apply(t,e)}var Pt=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),i=this._findContext(t),n=function(t){return t[bt]||wt}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e),i&&n(this._console,"ERROR CONTEXT",i)},t.prototype._findContext=function(t){return t?xt(t)?xt(t):this._findContext(At(t)):null},t.prototype._findOriginalError=function(t){for(var e=At(t);e&&At(e);)e=At(e);return e},t}();function Et(t){return t.length>1?" ("+function(t){for(var e=[],i=0;i<t.length;++i){if(e.indexOf(t[i])>-1)return e.push(t[i]),e;e.push(t[i])}return e}(t.slice().reverse()).map(function(t){return K(t.token)}).join(" -> ")+")":""}function Tt(t,e,i,n){var r=[e],o=i(r),s=n?function(t,e){var i=t+" caused by: "+(e instanceof Error?e.message:e),n=Error(i);return n[vt]=e,n}(o,n):Error(o);return s.addKey=St,s.keys=r,s.injectors=[t],s.constructResolvingMessage=i,s[vt]=n,s}function St(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Ct(t,e){for(var i=[],n=0,r=e.length;n<r;n++){var o=e[n];o&&0!=o.length?i.push(o.map(K).join(" ")):i.push("?")}return Error("Cannot resolve all parameters for '"+K(t)+"'("+i.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+K(t)+"' is decorated with Injectable.")}var Ot=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=K(this.token)}return t.get=function(t){return Mt.get(Z(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return Mt.numberOfKeys},enumerable:!0,configurable:!0}),t}(),Mt=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof Ot)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new Ot(t,Ot.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),Rt=Function;function It(t){return"function"==typeof t}var Dt=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Lt=function(){function t(t){this._reflect=t||G.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new(t.bind.apply(t,[void 0].concat(e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var i;i="undefined"==typeof t?new Array(e.length):new Array(t.length);for(var n=0;n<i.length;n++)"undefined"==typeof t?i[n]=[]:t[n]!=Object?i[n]=[t[n]]:i[n]=[],e&&null!=e[n]&&(i[n]=i[n].concat(e[n]));return i},t.prototype._ownParameters=function(t,e){if(Dt.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var i=t.ctorParameters;if(i&&i!==e.ctorParameters){var n="function"==typeof i?i():i,r=n.map(function(t){return t&&t.type}),o=n.map(function(t){return t&&kt(t.decorators)});return this._zipTypesAndAnnotations(r,o)}var s=t.hasOwnProperty(h)&&t[h],a=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return a||s?this._zipTypesAndAnnotations(a,s):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!It(t))return[];var e=Ft(t),i=this._ownParameters(t,e);return i||e===Object||(i=this.parameters(e)),i||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var i=t.annotations;return"function"==typeof i&&i.annotations&&(i=i.annotations),i}return t.decorators&&t.decorators!==e.decorators?kt(t.decorators):t.hasOwnProperty(u)?t[u]:null},t.prototype.annotations=function(t){if(!It(t))return[];var e=Ft(t),i=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(i)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var i=t.propMetadata;return"function"==typeof i&&i.propMetadata&&(i=i.propMetadata),i}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var n=t.propDecorators,r={};return Object.keys(n).forEach(function(t){r[t]=kt(n[t])}),r}return t.hasOwnProperty(p)?t[p]:null},t.prototype.propMetadata=function(t){if(!It(t))return{};var e=Ft(t),i={};if(e!==Object){var n=this.propMetadata(e);Object.keys(n).forEach(function(t){i[t]=n[t]})}var r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(function(t){var e=[];i.hasOwnProperty(t)&&e.push.apply(e,i[t]),e.push.apply(e,r[t]),i[t]=e}),i},t.prototype.hasLifecycleHook=function(t,e){return t instanceof Rt&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+K(t)},t.prototype.resourceUri=function(t){return"./"+K(t)},t.prototype.resolveIdentifier=function(t,e,i,n){return n},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function kt(t){return t?t.map(function(t){var e=t.type.annotationCls,i=t.args?t.args:[];return new(e.bind.apply(e,[void 0].concat(i)))}):[]}function Ft(t){var e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}var Nt=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,i,n){return this.reflectionCapabilities.resolveIdentifier(t,e,i,n)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new Lt),Bt=function(){function t(t,e,i){this.key=t,this.optional=e,this.visibility=i}return t.fromKey=function(e){return new t(e,!1,null)},t}(),Vt=[],zt=function(){return function(t,e,i){this.key=t,this.resolvedFactories=e,this.multiProvider=i,this.resolvedFactory=this.resolvedFactories[0]}}(),Ut=function(){return function(t,e){this.factory=t,this.dependencies=e}}();function jt(t){var e,i;if(t.useClass){var n=Z(t.useClass);e=Nt.factory(n),i=Ht(n)}else t.useExisting?(e=function(t){return t},i=[Bt.fromKey(Ot.get(t.useExisting))]):t.useFactory?(e=t.useFactory,i=function(t,e){if(e){var i=e.map(function(t){return[t]});return e.map(function(e){return Xt(t,e,i)})}return Ht(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},i=Vt);return new Ut(e,i)}function Gt(t){return new zt(Ot.get(t.provide),[jt(t)],t.multi||!1)}function Wt(t){var e=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e.get(n.key.id);if(r){if(n.multiProvider!==r.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+r+" "+n);if(n.multiProvider)for(var o=0;o<n.resolvedFactories.length;o++)r.resolvedFactories.push(n.resolvedFactories[o]);else e.set(n.key.id,n)}else{var s=void 0;s=n.multiProvider?new zt(n.key,n.resolvedFactories.slice(),n.multiProvider):n,e.set(n.key.id,s)}}return e}(function t(e,i){e.forEach(function(e){if(e instanceof Rt)i.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)i.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,i)}});return i}(t,[]).map(Gt),new Map);return Array.from(e.values())}function Ht(t){var e=Nt.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw Ct(t,e);return e.map(function(i){return Xt(t,i,e)})}function Xt(t,e,i){var n=null,r=!1;if(!Array.isArray(e))return Yt(e instanceof k?e.token:e,r,null);for(var o=null,s=0;s<e.length;++s){var a=e[s];a instanceof Rt?n=a:a instanceof k?n=a.token:a instanceof F?r=!0:a instanceof B||a instanceof V?o=a:a instanceof c&&(n=a)}if(null!=(n=Z(n)))return Yt(n,r,o);throw Ct(t,i)}function Yt(t,e,i){return new Bt(Ot.get(t),e,i)}var qt=new Object,Kt=function(){function t(){}return t.resolve=function(t){return Wt(t)},t.resolveAndCreate=function(e,i){var n=t.resolve(e);return t.fromResolvedProviders(n,i)},t.fromResolvedProviders=function(t,e){return new Qt(t,e)},t}(),Qt=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var i=t.length;this.keyIds=new Array(i),this.objs=new Array(i);for(var n=0;n<i;n++)this.keyIds[n]=t[n].key.id,this.objs[n]=qt}return t.prototype.get=function(t,e){return void 0===e&&(e=tt),this._getByKey(Ot.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=Kt.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var i=new t(e);return i.parent=this,i},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(Kt.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw e=this,i=t.key,Tt(e,i,function(t){return"Cannot instantiate cyclic dependency!"+Et(t)});var e,i;return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),i=0;i<t.resolvedFactories.length;++i)e[i]=this._instantiate(t,t.resolvedFactories[i]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var i,n,r,o,s,a=this,l=e.factory;try{i=e.dependencies.map(function(t){return a._getByReflectiveDependency(t)})}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{n=l.apply(void 0,i)}catch(e){throw r=this,o=e,e.stack,s=t.key,Tt(r,s,function(t){var e=K(t[0].token);return o.message+": Error during instantiation of "+e+"!"+Et(t)+"."},o)}return n},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:tt)},t.prototype._getByKey=function(e,i,n){return e===t.INJECTOR_KEY?this:i instanceof B?this._getByKeySelf(e,n):this._getByKeyDefault(e,n,i)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===qt&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return qt},t.prototype._throwOrNull=function(t,e){if(e!==tt)return e;throw function(t,e){return Tt(t,e,function(t){return"No provider for "+K(t[0].token)+"!"+Et(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var i=this._getObjByKeyId(t.id);return i!==qt?i:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,i,n){var r;for(r=n instanceof V?this.parent:this;r instanceof t;){var o=r,s=o._getObjByKeyId(e.id);if(s!==qt)return s;r=o.parent}return null!==r?r.get(e.token,i):this._throwOrNull(e,i)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var i=new Array(t._providers.length),n=0;n<t._providers.length;++n)i[n]=e(t.getProviderAtIndex(n));return i}(this,function(t){return' "'+t.key.displayName+'" '}).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=Ot.get(it),t}();function Zt(t){return!!t&&"function"==typeof t.then}function Jt(t){return!!t&&"function"==typeof t.subscribe}var $t=new c("Application Initializer"),te=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,i){e.resolve=t,e.reject=i})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],i=function(){t.done=!0,t.resolve()};if(this.appInits)for(var n=0;n<this.appInits.length;n++){var r=this.appInits[n]();Zt(r)&&e.push(r)}Promise.all(e).then(function(){i()}).catch(function(e){t.reject(e)}),0===e.length&&i(),this.initialized=!0}},t.decorators=[{type:N}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:k,args:[$t]},{type:F}]}]},t}(),ee=new c("AppId");function ie(){return""+re()+re()+re()}var ne={provide:ee,useFactory:ie,deps:[]};function re(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var oe=new c("Platform Initializer"),se=new c("Platform ID"),ae=new c("appBootstrapListener"),le=(new c("Application Packages Root URL"),function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.decorators=[{type:N}],t.ctorParameters=function(){return[]},t}());function ce(){throw new Error("Runtime compiler is not loaded")}var ue=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw ce()},t.prototype.compileModuleAsync=function(t){throw ce()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw ce()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw ce()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.decorators=[{type:N}],t.ctorParameters=function(){return[]},t}(),he=(new c("compilerOptions"),function(){return function(){}}()),pe=function(){return function(){}}(),de=function(){return function(){}}();function fe(t){var e=Error("No component factory found for "+K(t)+". Did you add it to @NgModule.entryComponents?");return e[ye]=t,e}var me,ge,ye="ngComponent",_e=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw fe(t)},t}(),ve=function(){function t(){}return t.NULL=new _e,t}(),be=function(){function t(t,e,i){this._parent=e,this._ngModule=i,this._factories=new Map;for(var n=0;n<t.length;n++){var r=t[n];this._factories.set(r.componentType,r)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw fe(t);return new xe(e,this._ngModule)},t}(),xe=function(t){function e(e,i){var n=t.call(this)||this;return n.factory=e,n.ngModule=i,n.selector=e.selector,n.componentType=e.componentType,n.ngContentSelectors=e.ngContentSelectors,n.inputs=e.inputs,n.outputs=e.outputs,n}return Object(n.b)(e,t),e.prototype.create=function(t,e,i,n){return this.factory.create(t,e,i,n||this.ngModule)},e}(de),Ae=function(){return function(){}}(),we=function(){return function(){}}();var Pe,Ee=!(!(Pe=G.wtf)||!(me=Pe.trace)||(ge=me.events,0));function Te(t,e){return null}var Se=Ee?function(t,e){return void 0===e&&(e=null),ge.createScope(t,e)}:function(t,e){return Te},Ce=Ee?function(t,e){return me.leaveScope(t,e),e}:function(t,e){return e},Oe=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i.__isAsync=e,i}return Object(n.b)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,i,n){var r,o=function(t){return null},s=function(){return null};e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},i&&(o=this.__isAsync?function(t){setTimeout(function(){return i(t)})}:function(t){i(t)}),n&&(s=this.__isAsync?function(){setTimeout(function(){return n()})}:function(){n()}));var a=t.prototype.subscribe.call(this,r,o,s);return e instanceof l.a&&e.add(a),a},e}(a.a),Me=function(){function t(t){var e=t.enableLongStackTrace,i=void 0!==e&&e;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oe(!1),this.onMicrotaskEmpty=new Oe(!1),this.onStable=new Oe(!1),this.onError=new Oe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var n;this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,r,o,s){try{return Le(n),t.invokeTask(i,r,o,s)}finally{ke(n)}},onInvoke:function(t,e,i,r,o,s,a){try{return Le(n),t.invoke(i,r,o,s,a)}finally{ke(n)}},onHasTask:function(t,e,i,r){t.hasTask(i,r),e===i&&("microTask"==r.change?(n.hasPendingMicrotasks=r.microTask,De(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,e,i,r){return t.handleError(i,r),n.runOutsideAngular(function(){return n.onError.emit(r)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,i){return this._inner.run(t,e,i)},t.prototype.runTask=function(t,e,i,n){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+n,t,Ie,Re,Re);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}},t.prototype.runGuarded=function(t,e,i){return this._inner.runGuarded(t,e,i)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Re(){}var Ie={};function De(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Le(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ke(t){t._nesting--,De(t)}var Fe=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oe,this.onMicrotaskEmpty=new Oe,this.onStable=new Oe,this.onError=new Oe}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Ne=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Me.assertNotInAngularZone(),Y(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?Y(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,i){return[]},t.decorators=[{type:N}],t.ctorParameters=function(){return[{type:Me}]},t}(),Be=function(){function t(){this._applications=new Map,Ue.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Ue.findTestabilityInTree(this,t,e)},t.decorators=[{type:N}],t.ctorParameters=function(){return[]},t}();function Ve(t){Ue=t}var ze,Ue=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,i){return null},t}()),je=!0,Ge=!1,We=new c("AllowMultipleToken");function He(){if(Ge)throw new Error("Cannot enable prod mode after platform setup.");je=!1}function Xe(){return Ge=!0,je}var Ye=function(){return function(t,e){this.name=t,this.token=e}}();function qe(t,e,i){void 0===i&&(i=[]);var n="Platform: "+e,r=new c(n);return function(e){void 0===e&&(e=[]);var o=Ke();if(!o||o.injector.get(We,!1))if(t)t(i.concat(e).concat({provide:r,useValue:!0}));else{var s=i.concat(e).concat({provide:r,useValue:!0});!function(t){if(ze&&!ze.destroyed&&!ze.injector.get(We,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ze=t.get(Qe);var e=t.get(oe,null);e&&e.forEach(function(t){return t()})}(it.create({providers:s,name:n}))}return function(t){var e=Ke();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Ke(){return ze&&!ze.destroyed?ze:null}var Qe=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var i=this,n=function(t){var e;e="noop"===t?new Fe:("zone.js"===t?void 0:t)||new Me({enableLongStackTrace:Xe()});return e}(e?e.ngZone:void 0),r=[{provide:Me,useValue:n}];return n.run(function(){var e=it.create({providers:r,parent:i.injector,name:t.moduleType.name}),o=t.create(e),s=o.injector.get(Pt,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.onDestroy(function(){return $e(i._modules,o)}),n.runOutsideAngular(function(){return n.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,i){try{var n=i();return Zt(n)?n.catch(function(i){throw e.runOutsideAngular(function(){return t.handleError(i)}),i}):n}catch(i){throw e.runOutsideAngular(function(){return t.handleError(i)}),i}}(s,n,function(){var t=o.injector.get(te);return t.runInitializers(),t.donePromise.then(function(){return i._moduleDoBootstrap(o),o})})})},t.prototype.bootstrapModule=function(t,e){var i=this;void 0===e&&(e=[]);var n=this.injector.get(he),r=Ze({},e);return n.createCompiler([r]).compileModuleAsync(t).then(function(t){return i.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(Je);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+K(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t.decorators=[{type:N}],t.ctorParameters=function(){return[{type:it}]},t}();function Ze(t,e){return t=Array.isArray(e)?e.reduce(Ze,t):Object(n.a)({},t,e)}var Je=function(){function t(t,e,i,n,a,l){var c=this;this._zone=t,this._console=e,this._injector=i,this._exceptionHandler=n,this._componentFactoryResolver=a,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Xe(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var u=new r.a(function(t){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){t.next(c._stable),t.complete()})}),h=new r.a(function(t){var e;c._zone.runOutsideAngular(function(){e=c._zone.onStable.subscribe(function(){Me.assertNotInAngularZone(),Y(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,t.next(!0))})})});var i=c._zone.onUnstable.subscribe(function(){Me.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),i.unsubscribe()}});this.isStable=Object(o.a)(u,s.a.call(h))}return t.prototype.bootstrap=function(t,e){var i,n=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");i=t instanceof de?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);var r=i instanceof xe?null:this._injector.get(Ae),o=e||i.selector,s=i.create(it.NULL,[],o,r);s.onDestroy(function(){n._unloadComponent(s)});var a=s.injector.get(Ne,null);return a&&s.injector.get(Be).registerApplication(s.location.nativeElement,a),this._loadComponent(s),Xe()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var i=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Ce(i)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;$e(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ae,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),$e(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Se("ApplicationRef#tick()"),t.decorators=[{type:N}],t.ctorParameters=function(){return[{type:Me},{type:le},{type:it},{type:Pt},{type:ve},{type:te}]},t}();function $e(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}var ti=function(){return function(){}}(),ei=(new c("Renderer2Interceptor"),function(){}(),function(){return function(){}}()),ii={Important:1,DashCase:2};ii[ii.Important]="Important",ii[ii.DashCase]="DashCase";var ni=function(){return function(){}}(),ri=function(){return function(t){this.nativeElement=t}}();new Map;var oi=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Oe}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[X()]=function(){return this._results[X()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,i){var n=Array.isArray(i)?t(i):i;return e.concat(n)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}();var si=function(){return function(){}}(),ai={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};!function(){function t(t,e){this._compiler=t,this._config=e||ai}t.prototype.load=function(t){return this._compiler instanceof ue?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,n=t.split("#"),r=n[0],o=n[1];return void 0===o&&(o="default"),i("YuZA")(r).then(function(t){return t[o]}).then(function(t){return li(t,r,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),n=e[0],r=e[1],o="NgFactory";return void 0===r&&(r="default",o=""),i("YuZA")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(function(t){return t[r+o]}).then(function(t){return li(t,n,r)})},t.decorators=[{type:N}],t.ctorParameters=function(){return[{type:ue},{type:si,decorators:[{type:F}]}]}}();function li(t,e,i){if(!t)throw new Error("Cannot find '"+i+"' in '"+e+"'");return t}var ci=function(){return function(){}}(),ui=function(){return function(){}}(),hi=function(){return function(){}}(),pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.b)(e,t),e}(hi)),di=function(){return function(t,e){this.name=t,this.callback=e}}(),fi=function(){function t(t,e,i){this._debugContext=i,this.nativeNode=t,e&&e instanceof mi?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),mi=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=e,r}return Object(n.b)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var i,n=this,r=this.childNodes.indexOf(t);-1!==r&&((i=this.childNodes).splice.apply(i,[r+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=n}))},e.prototype.insertBefore=function(t,e){var i=this.childNodes.indexOf(t);-1===i?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(i,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return gi(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return yi(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(i){i.name==t&&i.callback(e)})},e}(fi);function gi(t,e,i){t.childNodes.forEach(function(t){t instanceof mi&&(e(t)&&i.push(t),gi(t,e,i))})}function yi(t,e,i){t instanceof mi&&t.childNodes.forEach(function(t){e(t)&&i.push(t),t instanceof mi&&yi(t,e,i)})}var _i=new Map;function vi(t){return _i.get(t)||null}function bi(t){_i.set(t.nativeNode,t)}function xi(t,e){var i=Pi(t),n=Pi(e);return i&&n?function(t,e,i){var n=t[X()](),r=e[X()]();for(;;){var o=n.next(),s=r.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!i(o.value,s.value))return!1}}(t,e,xi):!(i||!(t&&("object"==typeof t||"function"==typeof t))||n||!(e&&("object"==typeof e||"function"==typeof e)))||q(t,e)}var Ai=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),wi=function(){function t(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Pi(t){return!!Ei(t)&&(Array.isArray(t)||!(t instanceof Map)&&X()in t)}function Ei(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Ti=function(){function t(){}return t.prototype.supports=function(t){return Pi(t)},t.prototype.create=function(t){return new Ci(t)},t}(),Si=function(t,e){return e},Ci=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Si}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,i=this._removalsHead,n=0,r=null;e||i;){var o=!i||e&&e.currentIndex<Ii(i,n,r)?e:i,s=Ii(o,n,r),a=o.currentIndex;if(o===i)n--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)n++;else{r||(r=[]);var l=s-n,c=a-n;if(l!=c){for(var u=0;u<l;u++){var h=u<r.length?r[u]:r[u]=0,p=h+u;c<=p&&p<l&&(r[u]=h+1)}r[o.previousIndex]=c-l}}s!==a&&t(o,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Pi(t))throw new Error("Error trying to diff '"+K(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var i,n,r,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)n=t[a],r=this._trackByFn(a,n),null!==o&&q(o.trackById,r)?(s&&(o=this._verifyReinsertion(o,n,r,a)),q(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,r,a),s=!0),o=o._next}else i=0,function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;i++)e(t[i]);else for(var n=t[X()](),r=void 0;!(r=n.next()).done;)e(r.value)}(t,function(t){r=e._trackByFn(i,t),null!==o&&q(o.trackById,r)?(s&&(o=e._verifyReinsertion(o,t,r,i)),q(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,r,i),s=!0),o=o._next,i++}),this.length=i;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,i,n){var r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,n))?(q(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,n)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(q(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,n)):t=this._addAfter(new Oi(e,i),r,n),t},t.prototype._verifyReinsertion=function(t,e,i,n){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?t=this._reinsertAfter(r,t._prev,n):t.currentIndex!=n&&(t.currentIndex=n,this._addToMoves(t,n)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var n=t._prevRemoved,r=t._nextRemoved;return null===n?this._removalsHead=r:n._nextRemoved=r,null===r?this._removalsTail=n:r._prevRemoved=n,this._insertAfter(t,e,i),this._addToMoves(t,i),t},t.prototype._moveAfter=function(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t},t.prototype._addAfter=function(t,e,i){return this._insertAfter(t,e,i),null===this._additionsTail?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,i){var n=null===e?this._itHead:e._next;return t._next=n,t._prev=e,null===n?this._itTail=t:n._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ri),this._linkedRecords.put(t),t.currentIndex=i,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(null===this._movesTail?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ri),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t},t}(),Oi=function(){return function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),Mi=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&q(i.trackById,t))return i;return null},t.prototype.remove=function(t){var e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head},t}(),Ri=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,i=this.map.get(e);i||(i=new Mi,this.map.set(e,i)),i.add(t)},t.prototype.get=function(t,e){var i=t,n=this.map.get(i);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Ii(t,e,i){var n=t.previousIndex;if(null===n)return n;var r=0;return i&&n<i.length&&(r=i[n]),n+e+r}var Di=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Ei(t)},t.prototype.create=function(){return new Li},t}(),Li=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Ei(t)))throw new Error("Error trying to diff '"+K(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var i=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,n){if(i&&i.key===n)e._maybeAddToChanges(i,t),e._appendAfter=i,i=i._next;else{var r=e._getOrCreateRecordForKey(n,t);i=e._insertBeforeOrAppend(i,r)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(var n=i;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var i=this._records.get(t);this._maybeAddToChanges(i,e);var n=i._prev,r=i._next;return n&&(n._next=r),r&&(r._prev=n),i._next=null,i._prev=null,i}var o=new ki(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){q(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(i){return e(t[i],i)})},t}(),ki=function(){return function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Fi=function(){function t(t){this.factories=t}return t.create=function(e,i){if(null!=i){var n=i.factories.slice();return new t(e=e.concat(n))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(i){if(!i)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,i)},deps:[[t,new V,new F]]}},t.prototype.find=function(t){var e,i=this.factories.find(function(e){return e.supports(t)});if(null!=i)return i;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}();var Ni=function(){function t(t){this.factories=t}return t.create=function(e,i){if(i){var n=i.factories.slice();e=e.concat(n)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(i){if(!i)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,i)},deps:[[t,new V,new F]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Bi=[new Di],Vi=[new Ti],zi=new Fi(Vi),Ui=new Ni(Bi),ji=qe(null,"core",[{provide:se,useValue:"unknown"},{provide:Qe,deps:[it]},{provide:Be,deps:[]},{provide:le,deps:[]}]),Gi=new c("LocaleId"),Wi=(new c("Translations"),new c("TranslationsFormat"),{Error:0,Warning:1,Ignore:2});function Hi(){return zi}function Xi(){return Ui}function Yi(t){return t||"en-US"}Wi[Wi.Error]="Error",Wi[Wi.Warning]="Warning",Wi[Wi.Ignore]="Ignore";var qi=function(){function t(t){}return t.decorators=[{type:R,args:[{providers:[Je,te,ue,ne,{provide:Fi,useFactory:Hi},{provide:Ni,useFactory:Xi},{provide:Gi,useFactory:Yi,deps:[[new k(Gi),new F,new V]]}]}]}],t.ctorParameters=function(){return[{type:Je}]},t}(),Ki={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};Ki[Ki.NONE]="NONE",Ki[Ki.HTML]="HTML",Ki[Ki.STYLE]="STYLE",Ki[Ki.SCRIPT]="SCRIPT",Ki[Ki.URL]="URL",Ki[Ki.RESOURCE_URL]="RESOURCE_URL";var Qi=function(){return function(){}}();function Zi(t,e,i){var n=t.state,r=1792&n;return r===e?(t.state=-1793&n|i,t.initIndex=-1,!0):r===i}function Ji(t,e,i){return(1792&t.state)===e&&t.initIndex<=i&&(t.initIndex=i+1,!0)}function $i(t,e){return t.nodes[e]}function tn(t,e){return t.nodes[e]}function en(t,e){return t.nodes[e]}function nn(t,e){return t.nodes[e]}function rn(t,e){return t.nodes[e]}var on={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function sn(t,e,i,n){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+i+"'.";return n&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var i=new Error(t);return an(i,e),i}(r,t)}function an(t,e){t[_t]=e,t[bt]=e.logError.bind(e)}function ln(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var cn=function(){},un=new Map;function hn(t){var e=un.get(t);return e||(e=K(t)+"_"+un.size,un.set(t,e)),e}function pn(t,e,i,n){if(Ai.isWrapped(n)){n=Ai.unwrap(n);var r=t.def.nodes[e].bindingIndex+i,o=Ai.unwrap(t.oldValues[r]);t.oldValues[r]=new Ai(o)}return n}var dn="$$undefined",fn="$$empty";function mn(t){return{id:dn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var gn=0;function yn(t){if(t&&t.id===dn){var e=null!=t.encapsulation&&t.encapsulation!==I.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+gn++:fn}return t&&t.id===fn&&(t=null),t||null}function _n(t,e,i,n){var r=t.oldValues;return!(!(2&t.state)&&q(r[e.bindingIndex+i],n))}function vn(t,e,i,n){return!!_n(t,e,i,n)&&(t.oldValues[e.bindingIndex+i]=n,!0)}function bn(t,e,i,n){var r=t.oldValues[e.bindingIndex+i];if(1&t.state||!xi(r,n)){var o=e.bindings[i].name;throw sn(on.createDebugContext(t,e.nodeIndex),o+": "+r,o+": "+n,0!=(1&t.state))}}function xn(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function An(t,e){for(var i=t;i&&i!==e;)i.state|=64,i=i.viewContainerParent||i.parent}function wn(t,e,i,n){try{return xn(33554432&t.def.nodes[e].flags?tn(t,e).componentView:t),on.handleEvent(t,e,i,n)}catch(e){t.root.errorHandler.handleError(e)}}function Pn(t){return t.parent?tn(t.parent,t.parentNodeDef.nodeIndex):null}function En(t){return t.parent?t.parentNodeDef.parent:null}function Tn(t,e){switch(201347067&e.flags){case 1:return tn(t,e.nodeIndex).renderElement;case 2:return $i(t,e.nodeIndex).renderText}}function Sn(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Cn(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function On(t){return 1<<t%32}function Mn(t){var e={},i=0,n={};return t&&t.forEach(function(t){var r=t[0],o=t[1];"number"==typeof r?(e[r]=o,i|=On(r)):n[r]=o}),{matchedQueries:e,references:n,matchedQueryIds:i}}function Rn(t,e){return t.map(function(t){var i,n;return Array.isArray(t)?(n=t[0],i=t[1]):(n=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,J,{value:e,configurable:!0}),{flags:n,token:i,tokenKey:hn(i)}})}function In(t,e,i){var n=i.renderParent;return n?0==(1&n.flags)||0==(33554432&n.flags)||n.element.componentRendererType&&n.element.componentRendererType.encapsulation===I.Native?tn(t,i.renderParent.nodeIndex).renderElement:void 0:e}var Dn=new WeakMap;function Ln(t){var e=Dn.get(t);return e||((e=t(function(){return cn})).factory=t,Dn.set(t,e)),e}function kn(t,e,i,n,r){3===e&&(i=t.renderer.parentNode(Tn(t,t.def.lastRenderRootNode))),Fn(t,e,0,t.def.nodes.length-1,i,n,r)}function Fn(t,e,i,n,r,o,s){for(var a=i;a<=n;a++){var l=t.def.nodes[a];11&l.flags&&Bn(t,l,e,r,o,s),a+=l.childCount}}function Nn(t,e,i,n,r,o){for(var s=t;s&&!Sn(s);)s=s.parent;for(var a=s.parent,l=En(s),c=l.nodeIndex+1,u=l.nodeIndex+l.childCount,h=c;h<=u;h++){var p=a.def.nodes[h];p.ngContentIndex===e&&Bn(a,p,i,n,r,o),h+=p.childCount}if(!a.parent){var d=t.root.projectableNodes[e];if(d)for(h=0;h<d.length;h++)Vn(t,d[h],i,n,r,o)}}function Bn(t,e,i,n,r,o){if(8&e.flags)Nn(t,e.ngContent.index,i,n,r,o);else{var s=Tn(t,e);if(3===i&&33554432&e.flags&&48&e.bindingFlags){if(16&e.bindingFlags&&Vn(t,s,i,n,r,o),32&e.bindingFlags)Vn(tn(t,e.nodeIndex).componentView,s,i,n,r,o)}else Vn(t,s,i,n,r,o);if(16777216&e.flags)for(var a=tn(t,e.nodeIndex).viewContainer._embeddedViews,l=0;l<a.length;l++)kn(a[l],i,n,r,o);1&e.flags&&!e.element.name&&Fn(t,i,e.nodeIndex+1,e.nodeIndex+e.childCount,n,r,o)}}function Vn(t,e,i,n,r,o){var s=t.renderer;switch(i){case 1:s.appendChild(n,e);break;case 2:s.insertBefore(n,e,r);break;case 3:s.removeChild(n,e);break;case 0:o.push(e)}}var zn=/^:([^:]+):(.+)$/;function Un(t){if(":"===t[0]){var e=t.match(zn);return[e[1],e[2]]}return["",t]}function jn(t){for(var e=0,i=0;i<t.length;i++)e|=t[i].flags;return e}function Gn(t,e,i,n,r,o,s,a,l,c,u,h,p,d,f,m,g,y,_,v){switch(t){case 1:return e+Wn(i)+n;case 2:return e+Wn(i)+n+Wn(r)+o;case 3:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a;case 4:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c;case 5:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c+Wn(u)+h;case 6:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c+Wn(u)+h+Wn(p)+d;case 7:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c+Wn(u)+h+Wn(p)+d+Wn(f)+m;case 8:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c+Wn(u)+h+Wn(p)+d+Wn(f)+m+Wn(g)+y;case 9:return e+Wn(i)+n+Wn(r)+o+Wn(s)+a+Wn(l)+c+Wn(u)+h+Wn(p)+d+Wn(f)+m+Wn(g)+y+Wn(_)+v;default:throw new Error("Does not support more than 9 expressions")}}function Wn(t){return null!=t?t.toString():""}function Hn(t,e,i,n,r,o){t|=1;var s=Mn(e),a=s.matchedQueries,l=s.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:s.matchedQueryIds,references:l,ngContentIndex:i,childCount:n,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Ln(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||cn},provider:null,text:null,query:null,ngContent:null}}function Xn(t,e,i,n,r,o,s,a,l,c,u,h){void 0===s&&(s=[]),c||(c=cn);var p=Mn(i),d=p.matchedQueries,f=p.references,m=p.matchedQueryIds,g=null,y=null;o&&(g=(D=Un(o))[0],y=D[1]),a=a||[];for(var _=new Array(a.length),v=0;v<a.length;v++){var b=a[v],x=b[0],A=b[1],w=b[2],P=Un(A),E=P[0],T=P[1],S=void 0,C=void 0;switch(15&x){case 4:C=w;break;case 1:case 8:S=w}_[v]={flags:x,ns:E,name:T,nonMinifiedName:T,securityContext:S,suffix:C}}l=l||[];var O=new Array(l.length);for(v=0;v<l.length;v++){var M=l[v],R=M[0],I=M[1];O[v]={type:0,target:R,eventName:I,propName:null}}var D,L=(s=s||[]).map(function(t){var e=t[0],i=t[1],n=Un(e);return[n[0],n[1],i]});return h=yn(h),u&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:m,references:f,ngContentIndex:n,childCount:r,bindings:_,bindingFlags:jn(_),outputs:O,element:{ns:g,name:y,attrs:L,template:null,componentProvider:null,componentView:u||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||cn},provider:null,text:null,query:null,ngContent:null}}function Yn(t,e,i){var n,r=i.element,o=t.root.selectorOrNode,s=t.renderer;if(t.parent||!o){n=r.name?s.createElement(r.name,r.ns):s.createComment("");var a=In(t,e,i);a&&s.appendChild(a,n)}else n=s.selectRootElement(o);if(r.attrs)for(var l=0;l<r.attrs.length;l++){var c=r.attrs[l],u=c[0],h=c[1],p=c[2];s.setAttribute(n,h,p,u)}return n}function qn(t,e,i,n){for(var r=0;r<i.outputs.length;r++){var o=i.outputs[r],s=Kn(t,i.nodeIndex,(u=o.target,h=o.eventName,u?u+":"+h:h)),a=o.target,l=t;"component"===o.target&&(a=null,l=e);var c=l.renderer.listen(a||n,o.eventName,s);t.disposables[i.outputIndex+r]=c}var u,h}function Kn(t,e,i){return function(n){return wn(t,e,i,n)}}function Qn(t,e,i,n){if(!vn(t,e,i,n))return!1;var r=e.bindings[i],o=tn(t,e.nodeIndex),s=o.renderElement,a=r.name;switch(15&r.flags){case 1:!function(t,e,i,n,r,o){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var l=t.renderer;null!=o?l.setAttribute(i,r,a,n):l.removeAttribute(i,r,n)}(t,r,s,r.ns,a,n);break;case 2:!function(t,e,i,n){var r=t.renderer;n?r.addClass(e,i):r.removeClass(e,i)}(t,s,a,n);break;case 4:!function(t,e,i,n,r){var o=t.root.sanitizer.sanitize(Ki.STYLE,r);if(null!=o){o=o.toString();var s=e.suffix;null!=s&&(o+=s)}else o=null;var a=t.renderer;null!=o?a.setStyle(i,n,o):a.removeStyle(i,n)}(t,r,s,a,n);break;case 8:!function(t,e,i,n,r){var o=e.securityContext,s=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(i,n,s)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,s,a,n)}return!0}var Zn=new Object,Jn=hn(it),$n=hn(Ae);function tr(t,e,i,n){return i=Z(i),{index:-1,deps:Rn(n,K(e)),flags:t,token:e,value:i}}function er(t){for(var e={},i=0;i<t.length;i++){var n=t[i];n.index=i,e[hn(n.token)]=n}return{factory:null,providersByKey:e,providers:t}}function ir(t,e,i){if(void 0===i&&(i=it.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(i=null),1&e.flags)return t._parent.get(e.token,i);var n=e.tokenKey;switch(n){case Jn:case $n:return t}var r=t._def.providersByKey[n];if(r){var o=t._providers[r.index];return void 0===o&&(o=t._providers[r.index]=nr(t,r)),o===Zn?void 0:o}return t._parent.get(e.token,i)}function nr(t,e){var i;switch(201347067&e.flags){case 512:i=function(t,e,i){var n=i.length;switch(n){case 0:return new e;case 1:return new e(ir(t,i[0]));case 2:return new e(ir(t,i[0]),ir(t,i[1]));case 3:return new e(ir(t,i[0]),ir(t,i[1]),ir(t,i[2]));default:for(var r=new Array(n),o=0;o<n;o++)r[o]=ir(t,i[o]);return new(e.bind.apply(e,[void 0].concat(r)))}}(t,e.value,e.deps);break;case 1024:i=function(t,e,i){var n=i.length;switch(n){case 0:return e();case 1:return e(ir(t,i[0]));case 2:return e(ir(t,i[0]),ir(t,i[1]));case 3:return e(ir(t,i[0]),ir(t,i[1]),ir(t,i[2]));default:for(var r=Array(n),o=0;o<n;o++)r[o]=ir(t,i[o]);return e.apply(void 0,r)}}(t,e.value,e.deps);break;case 2048:i=ir(t,e.deps[0]);break;case 256:i=e.value}return void 0===i?Zn:i}function rr(t,e,i,n){var r=e.viewContainer._embeddedViews;null==i&&(i=r.length),n.viewContainerParent=t,lr(r,i,n),function(t,e){var i=Pn(e);if(!i||i===t||16&e.state)return;e.state|=16;var n=i.template._projectedViews;n||(n=i.template._projectedViews=[]);n.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;var i=e.parent;for(;i;)i.childFlags|=4,i=i.parent}(e.parent.def,e.parentNodeDef)}(e,n),on.dirtyParentQueries(n),sr(e,i>0?r[i-1]:null,n)}function or(t,e){var i=t.viewContainer._embeddedViews;if((null==e||e>=i.length)&&(e=i.length-1),e<0)return null;var n=i[e];return n.viewContainerParent=null,cr(i,e),on.dirtyParentQueries(n),ar(n),n}function sr(t,e,i){var n=e?Tn(e,e.def.lastRenderRootNode):t.renderElement;kn(i,2,i.renderer.parentNode(n),i.renderer.nextSibling(n),void 0)}function ar(t){kn(t,3,null,null,void 0)}function lr(t,e,i){e>=t.length?t.push(i):t.splice(e,0,i)}function cr(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var ur=new Object;function hr(t,e,i,n,r,o){return new pr(t,e,i,n,r,o)}var pr=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a.selector=e,a.componentType=i,a._inputs=r,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=n,a}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var i in e){var n=e[i];t.push({propName:i,templateName:n})}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs){var i=this._outputs[e];t.push({propName:e,templateName:i})}return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,i,n){if(!n)throw new Error("ngModule should be provided");var r=Ln(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,s=on.createRootView(t,e||[],i,r,n,ur),a=en(s,o).instance;return i&&s.renderer.setAttribute(tn(s,0).renderElement,"ng-version",L.full),new dr(s,new yr(s),a)},e}(de),dr=function(t){function e(e,i,n){var r=t.call(this)||this;return r._view=e,r._viewRef=i,r._component=n,r._elDef=r._view.def.nodes[0],r.hostView=i,r.changeDetectorRef=i,r.instance=n,r}return Object(n.b)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new ri(tn(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new xr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(pe);function fr(t,e,i){return new mr(t,e,i)}var mr=function(){function t(t,e,i){this._view=t,this._elDef=e,this._data=i,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new ri(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new xr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=En(t),t=t.parent;return t?new xr(t,e):new xr(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=or(this._data,t);on.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var i=new yr(e);return i.attachToViewContainerRef(this),i}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,i){var n=t.createEmbeddedView(e||{});return this.insert(n,i),n},t.prototype.createComponent=function(t,e,i,n,r){var o=i||this.parentInjector;r||t instanceof xe||(r=o.get(Ae));var s=t.create(o,n,void 0,r);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var i=t,n=i._view;return rr(this._view,this._data,e,n),i.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var i,n,r,o,s,a=this._embeddedViews.indexOf(t._view);return i=this._data,n=a,r=e,o=i.viewContainer._embeddedViews,s=o[n],cr(o,n),null==r&&(r=o.length),lr(o,r,s),on.dirtyParentQueries(s),ar(s),sr(i,r>0?o[r-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=or(this._data,t);e&&on.destroyView(e)},t.prototype.detach=function(t){var e=or(this._data,t);return e?new yr(e):null},t}();function gr(t){return new yr(t)}var yr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return kn(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){xn(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{on.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){on.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),on.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,ar(this._view),on.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function _r(t,e){return new vr(t,e)}var vr=function(t){function e(e,i){var n=t.call(this)||this;return n._parentView=e,n._def=i,n}return Object(n.b)(e,t),e.prototype.createEmbeddedView=function(t){return new yr(on.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new ri(tn(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(ci);function br(t,e){return new xr(t,e)}var xr=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){void 0===e&&(e=it.THROW_IF_NOT_FOUND);var i=!!this.elDef&&0!=(33554432&this.elDef.flags);return on.resolveDep(this.view,this.elDef,i,{flags:0,token:t,tokenKey:hn(t)},e)},t}();function Ar(t,e){var i=t.def.nodes[e];if(1&i.flags){var n=tn(t,i.nodeIndex);return i.element.template?n.template:n.renderElement}if(2&i.flags)return $i(t,i.nodeIndex).renderText;if(20240&i.flags)return en(t,i.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function wr(t){return new Pr(t.renderer)}var Pr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var i=Un(e),n=i[0],r=i[1],o=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,o),o},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var i=this.delegate.createText(e);return t&&this.delegate.appendChild(t,i),i},t.prototype.projectNodes=function(t,e){for(var i=0;i<e.length;i++)this.delegate.appendChild(t,e[i])},t.prototype.attachViewAfter=function(t,e){for(var i=this.delegate.parentNode(t),n=this.delegate.nextSibling(t),r=0;r<e.length;r++)this.delegate.insertBefore(i,e[r],n)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=this.delegate.parentNode(i);this.delegate.removeChild(n,i)}},t.prototype.destroyView=function(t,e){for(var i=0;i<e.length;i++)this.delegate.destroyNode(e[i])},t.prototype.listen=function(t,e,i){return this.delegate.listen(t,e,i)},t.prototype.listenGlobal=function(t,e,i){return this.delegate.listen(t,e,i)},t.prototype.setElementProperty=function(t,e,i){this.delegate.setProperty(t,e,i)},t.prototype.setElementAttribute=function(t,e,i){var n=Un(e),r=n[0],o=n[1];null!=i?this.delegate.setAttribute(t,o,i,r):this.delegate.removeAttribute(t,o,r)},t.prototype.setBindingDebugInfo=function(t,e,i){},t.prototype.setElementClass=function(t,e,i){i?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,i){null!=i?this.delegate.setStyle(t,e,i):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,i){t[e].apply(t,i)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Er(t,e,i,n){return new Tr(t,e,i,n)}var Tr=function(){function t(t,e,i,n){this._moduleType=t,this._parent=e,this._bootstrapComponents=i,this._def=n,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,i=t._providers=new Array(e.providers.length),n=0;n<e.providers.length;n++){var r=e.providers[n];4096&r.flags||(i[n]=nr(t,r))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=it.THROW_IF_NOT_FOUND),ir(this,{token:t,tokenKey:hn(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(ve)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+K(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var i=t._def,n=0;n<i.providers.length;n++)if(131072&i.providers[n].flags){var r=t._providers[n];r&&r!==Zn&&r.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),Sr=hn(ti),Cr=hn(ni),Or=hn(ri),Mr=hn(ui),Rr=hn(ci),Ir=hn(hi),Dr=hn(it);function Lr(t,e,i,n,r,o,s,a){var l=[];if(s)for(var c in s){var u=s[c],h=u[0],p=u[1];l[h]={flags:8,name:c,nonMinifiedName:p,ns:null,securityContext:null,suffix:null}}var d=[];if(a)for(var f in a)d.push({type:1,propName:f,target:null,eventName:a[f]});return Nr(t,e|=16384,i,n,r,r,o,l,d)}function kr(t,e,i){return Nr(-1,t|=16,null,0,e,e,i)}function Fr(t,e,i,n,r){return Nr(-1,t,e,0,i,n,r)}function Nr(t,e,i,n,r,o,s,a,l){var c=Mn(i),u=c.matchedQueries,h=c.references,p=c.matchedQueryIds;l||(l=[]),a||(a=[]),o=Z(o);var d=Rn(s,K(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:p,references:h,ngContentIndex:-1,childCount:n,bindings:a,bindingFlags:jn(a),outputs:l,element:null,provider:{token:r,value:o,deps:d},text:null,query:null,ngContent:null}}function Br(t,e){return jr(t,e)}function Vr(t,e){for(var i=t;i.parent&&!Sn(i);)i=i.parent;return Gr(i.parent,En(i),!0,e.provider.value,e.provider.deps)}function zr(t,e){var i=(32768&e.flags)>0,n=Gr(t,e.parent,i,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var o=e.outputs[r],s=n[o.propName].subscribe(Ur(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+r]=s.unsubscribe.bind(s)}return n}function Ur(t,e,i){return function(n){return wn(t,e,i,n)}}function jr(t,e){var i=(8192&e.flags)>0,n=e.provider;switch(201347067&e.flags){case 512:return Gr(t,e.parent,i,n.value,n.deps);case 1024:return function(t,e,i,n,r){var o=r.length;switch(o){case 0:return n();case 1:return n(Hr(t,e,i,r[0]));case 2:return n(Hr(t,e,i,r[0]),Hr(t,e,i,r[1]));case 3:return n(Hr(t,e,i,r[0]),Hr(t,e,i,r[1]),Hr(t,e,i,r[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=Hr(t,e,i,r[a]);return n.apply(void 0,s)}}(t,e.parent,i,n.value,n.deps);case 2048:return Hr(t,e.parent,i,n.deps[0]);case 256:return n.value}}function Gr(t,e,i,n,r){var o=r.length;switch(o){case 0:return new n;case 1:return new n(Hr(t,e,i,r[0]));case 2:return new n(Hr(t,e,i,r[0]),Hr(t,e,i,r[1]));case 3:return new n(Hr(t,e,i,r[0]),Hr(t,e,i,r[1]),Hr(t,e,i,r[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=Hr(t,e,i,r[a]);return new(n.bind.apply(n,[void 0].concat(s)))}}var Wr={};function Hr(t,e,i,n,r){if(void 0===r&&(r=it.THROW_IF_NOT_FOUND),8&n.flags)return n.token;var o=t;2&n.flags&&(r=null);var s=n.tokenKey;for(s===Ir&&(i=!(!e||!e.element.componentView)),e&&1&n.flags&&(i=!1,e=e.parent);t;){if(e)switch(s){case Sr:return wr(Xr(t,e,i));case Cr:return Xr(t,e,i).renderer;case Or:return new ri(tn(t,e.nodeIndex).renderElement);case Mr:return tn(t,e.nodeIndex).viewContainer;case Rr:if(e.element.template)return tn(t,e.nodeIndex).template;break;case Ir:return gr(Xr(t,e,i));case Dr:return br(t,e);default:var a=(i?e.element.allProviders:e.element.publicProviders)[s];if(a){var l=en(t,a.nodeIndex);return l||(l={instance:jr(t,a)},t.nodes[a.nodeIndex]=l),l.instance}}i=Sn(t),e=En(t),t=t.parent}var c=o.root.injector.get(n.token,Wr);return c!==Wr||r===Wr?c:o.root.ngModule.injector.get(n.token,r)}function Xr(t,e,i){var n;if(i)n=tn(t,e.nodeIndex).componentView;else for(n=t;n.parent&&!Sn(n);)n=n.parent;return n}function Yr(t,e,i,n,r,o){if(32768&i.flags){var s=tn(t,i.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}var a=i.bindings[n].name;if(e.instance[a]=r,524288&i.flags){o=o||{};var l=Ai.unwrap(t.oldValues[i.bindingIndex+n]);o[i.bindings[n].nonMinifiedName]=new wi(l,r,0!=(2&t.state))}return t.oldValues[i.bindingIndex+n]=r,o}function qr(t,e){if(t.def.nodeFlags&e)for(var i=t.def.nodes,n=0,r=0;r<i.length;r++){var o=i[r],s=o.parent;for(!s&&o.flags&e&&Qr(t,r,o.flags&e,n++),0==(o.childFlags&e)&&(r+=o.childCount);s&&1&s.flags&&r===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(n=Kr(t,s,e,n)),s=s.parent}}function Kr(t,e,i,n){for(var r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){var o=t.def.nodes[r];o.flags&i&&Qr(t,r,o.flags&i,n++),r+=o.childCount}return n}function Qr(t,e,i,n){var r=en(t,e);if(r){var o=r.instance;o&&(on.setCurrentNode(t,e),1048576&i&&Ji(t,512,n)&&o.ngAfterContentInit(),2097152&i&&o.ngAfterContentChecked(),4194304&i&&Ji(t,768,n)&&o.ngAfterViewInit(),8388608&i&&o.ngAfterViewChecked(),131072&i&&o.ngOnDestroy())}}function Zr(t,e,i){var n=[];for(var r in i){var o=i[r];n.push({propName:r,bindingType:o})}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:On(e),bindings:n},ngContent:null}}function Jr(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Cn(t);){var i=t.parentNodeDef;t=t.parent;for(var n=i.nodeIndex+i.childCount,r=0;r<=n;r++){67108864&(o=t.def.nodes[r]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&rn(t,r).setDirty(),!(1&o.flags&&r+o.childCount<i.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}}if(134217728&t.def.nodeFlags)for(r=0;r<t.def.nodes.length;r++){var o;134217728&(o=t.def.nodes[r]).flags&&536870912&o.flags&&rn(t,r).setDirty(),r+=o.childCount}}function $r(t,e){var i=rn(t,e.nodeIndex);if(i.dirty){var n,r=void 0;if(67108864&e.flags){var o=e.parent.parent;r=to(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),n=en(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=to(t,0,t.def.nodes.length-1,e.query,[]),n=t.component);i.reset(r);for(var s=e.query.bindings,a=!1,l=0;l<s.length;l++){var c=s[l],u=void 0;switch(c.bindingType){case 0:u=i.first;break;case 1:u=i,a=!0}n[c.propName]=u}a&&i.notifyOnChanges()}}function to(t,e,i,n,r){for(var o=e;o<=i;o++){var s=t.def.nodes[o],a=s.matchedQueries[n.id];if(null!=a&&r.push(eo(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&n.filterId)===n.filterId){var l=tn(t,o);if((s.childMatchedQueries&n.filterId)===n.filterId&&(to(t,o+1,o+s.childCount,n,r),o+=s.childCount),16777216&s.flags)for(var c=l.viewContainer._embeddedViews,u=0;u<c.length;u++){var h=c[u],p=Pn(h);p&&p===l&&to(h,0,h.def.nodes.length-1,n,r)}var d=l.template._projectedViews;if(d)for(u=0;u<d.length;u++){var f=d[u];to(f,0,f.def.nodes.length-1,n,r)}}(s.childMatchedQueries&n.filterId)!==n.filterId&&(o+=s.childCount)}return r}function eo(t,e,i){if(null!=i)switch(i){case 1:return tn(t,e.nodeIndex).renderElement;case 0:return new ri(tn(t,e.nodeIndex).renderElement);case 2:return tn(t,e.nodeIndex).template;case 3:return tn(t,e.nodeIndex).viewContainer;case 4:return en(t,e.nodeIndex).instance}}function io(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function no(t,e,i){var n=In(t,e,i);n&&Nn(t,i.ngContent.index,1,n,null,void 0)}function ro(t,e){return so(128,t,new Array(e+1))}function oo(t,e){for(var i=Object.keys(e),n=i.length,r=new Array(n),o=0;o<n;o++){var s=i[o];r[e[s]]=s}return so(64,t,r)}function so(t,e,i){for(var n=new Array(i.length),r=0;r<i.length;r++){var o=i[r];n[r]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:n,bindingFlags:jn(n),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function ao(t,e,i){for(var n=new Array(i.length-1),r=1;r<i.length;r++)n[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:i[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:n,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:i[0]},query:null,ngContent:null}}function lo(t,e,i){var n,r=t.renderer;n=r.createText(i.text.prefix);var o=In(t,e,i);return o&&r.appendChild(o,n),{renderText:n}}function co(t,e){return(null!=t?t.toString():"")+e.suffix}function uo(t,e,i,n){for(var r=0,o=0,s=0,a=0,l=0,c=null,u=null,h=!1,p=!1,d=null,f=0;f<e.length;f++){var m=e[f];if(m.nodeIndex=f,m.parent=c,m.bindingIndex=r,m.outputIndex=o,m.renderParent=u,s|=m.flags,l|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=c?c.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,p=!1,m.element.template&&(l|=m.element.template.nodeMatchedQueries)}if(po(c,m,e.length),r+=m.bindings.length,o+=m.outputs.length,!u&&3&m.flags&&(d=m),20224&m.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(8192&m.flags),_=0!=(32768&m.flags);!y||_?c.element.publicProviders[hn(m.provider.token)]=m:(p||(p=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[hn(m.provider.token)]=m),_&&(c.element.componentProvider=m)}if(c?(c.childFlags|=m.flags,c.directChildFlags|=m.flags,c.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(c.childMatchedQueries|=m.element.template.nodeMatchedQueries)):a|=m.flags,m.childCount>0)c=m,ho(m)||(u=m);else for(;c&&f===c.nodeIndex+c.childCount;){var v=c.parent;v&&(v.childFlags|=c.childFlags,v.childMatchedQueries|=c.childMatchedQueries),u=(c=v)&&ho(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:i||cn,updateRenderer:n||cn,handleEvent:function(t,i,n,r){return e[i].element.handleEvent(t,n,r)},bindingCount:r,outputCount:o,lastRenderRootNode:d}}function ho(t){return 0!=(1&t.flags)&&null===t.element.name}function po(t,e,i){var n=e.element&&e.element.template;if(n){if(!n.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(n.lastRenderRootNode&&16777216&n.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var r=t?t.nodeIndex+t.childCount:i-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function fo(t,e,i,n){var r=yo(t.root,t.renderer,t,e,i);return _o(r,t.component,n),vo(r),r}function mo(t,e,i){var n=yo(t,t.renderer,null,null,e);return _o(n,i,i),vo(n),n}function go(t,e,i,n){var r,o=e.element.componentRendererType;return r=o?t.root.rendererFactory.createRenderer(n,o):t.root.renderer,yo(t.root,r,t,e.element.componentProvider,i)}function yo(t,e,i,n,r){var o=new Array(r.nodes.length),s=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:i,viewContainerParent:null,parentNodeDef:n,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:s,initIndex:-1}}function _o(t,e,i){t.component=e,t.context=i}function vo(t){var e;if(Sn(t)){var i=t.parentNodeDef;e=tn(t.parent,i.parent.nodeIndex).renderElement}for(var n=t.def,r=t.nodes,o=0;o<n.nodes.length;o++){var s=n.nodes[o];on.setCurrentNode(t,o);var a=void 0;switch(201347067&s.flags){case 1:var l=Yn(t,e,s),c=void 0;if(33554432&s.flags){var u=Ln(s.element.componentView);c=on.createComponentView(t,s,u,l)}qn(t,c,s,l),a={renderElement:l,componentView:c,viewContainer:null,template:s.element.template?_r(t,s):void 0},16777216&s.flags&&(a.viewContainer=fr(t,s,a));break;case 2:a=lo(t,e,s);break;case 512:case 1024:case 2048:case 256:if(!((a=r[o])||4096&s.flags))a={instance:Br(t,s)};break;case 16:a={instance:Vr(t,s)};break;case 16384:if(!(a=r[o]))a={instance:zr(t,s)};if(32768&s.flags)_o(tn(t,s.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new oi;break;case 8:no(t,e,s),a=void 0}r[o]=a}Co(t,So.CreateViewNodes),Io(t,201326592,268435456,0)}function bo(t){wo(t),on.updateDirectives(t,1),Oo(t,So.CheckNoChanges),on.updateRenderer(t,1),Co(t,So.CheckNoChanges),t.state&=-97}function xo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Zi(t,0,256),wo(t),on.updateDirectives(t,0),Oo(t,So.CheckAndUpdate),Io(t,67108864,536870912,0);var e=Zi(t,256,512);qr(t,2097152|(e?1048576:0)),on.updateRenderer(t,0),Co(t,So.CheckAndUpdate),Io(t,134217728,536870912,0),qr(t,8388608|((e=Zi(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Zi(t,768,1024)}function Ao(t,e,i,n,r,o,s,a,l,c,u,h,p){return 0===i?function(t,e,i,n,r,o,s,a,l,c,u,h){switch(201347067&e.flags){case 1:return function(t,e,i,n,r,o,s,a,l,c,u,h){var p=e.bindings.length,d=!1;return p>0&&Qn(t,e,0,i)&&(d=!0),p>1&&Qn(t,e,1,n)&&(d=!0),p>2&&Qn(t,e,2,r)&&(d=!0),p>3&&Qn(t,e,3,o)&&(d=!0),p>4&&Qn(t,e,4,s)&&(d=!0),p>5&&Qn(t,e,5,a)&&(d=!0),p>6&&Qn(t,e,6,l)&&(d=!0),p>7&&Qn(t,e,7,c)&&(d=!0),p>8&&Qn(t,e,8,u)&&(d=!0),p>9&&Qn(t,e,9,h)&&(d=!0),d}(t,e,i,n,r,o,s,a,l,c,u,h);case 2:return function(t,e,i,n,r,o,s,a,l,c,u,h){var p=!1,d=e.bindings,f=d.length;if(f>0&&vn(t,e,0,i)&&(p=!0),f>1&&vn(t,e,1,n)&&(p=!0),f>2&&vn(t,e,2,r)&&(p=!0),f>3&&vn(t,e,3,o)&&(p=!0),f>4&&vn(t,e,4,s)&&(p=!0),f>5&&vn(t,e,5,a)&&(p=!0),f>6&&vn(t,e,6,l)&&(p=!0),f>7&&vn(t,e,7,c)&&(p=!0),f>8&&vn(t,e,8,u)&&(p=!0),f>9&&vn(t,e,9,h)&&(p=!0),p){var m=e.text.prefix;f>0&&(m+=co(i,d[0])),f>1&&(m+=co(n,d[1])),f>2&&(m+=co(r,d[2])),f>3&&(m+=co(o,d[3])),f>4&&(m+=co(s,d[4])),f>5&&(m+=co(a,d[5])),f>6&&(m+=co(l,d[6])),f>7&&(m+=co(c,d[7])),f>8&&(m+=co(u,d[8])),f>9&&(m+=co(h,d[9]));var g=$i(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return p}(t,e,i,n,r,o,s,a,l,c,u,h);case 16384:return function(t,e,i,n,r,o,s,a,l,c,u,h){var p=en(t,e.nodeIndex),d=p.instance,f=!1,m=void 0,g=e.bindings.length;return g>0&&_n(t,e,0,i)&&(f=!0,m=Yr(t,p,e,0,i,m)),g>1&&_n(t,e,1,n)&&(f=!0,m=Yr(t,p,e,1,n,m)),g>2&&_n(t,e,2,r)&&(f=!0,m=Yr(t,p,e,2,r,m)),g>3&&_n(t,e,3,o)&&(f=!0,m=Yr(t,p,e,3,o,m)),g>4&&_n(t,e,4,s)&&(f=!0,m=Yr(t,p,e,4,s,m)),g>5&&_n(t,e,5,a)&&(f=!0,m=Yr(t,p,e,5,a,m)),g>6&&_n(t,e,6,l)&&(f=!0,m=Yr(t,p,e,6,l,m)),g>7&&_n(t,e,7,c)&&(f=!0,m=Yr(t,p,e,7,c,m)),g>8&&_n(t,e,8,u)&&(f=!0,m=Yr(t,p,e,8,u,m)),g>9&&_n(t,e,9,h)&&(f=!0,m=Yr(t,p,e,9,h,m)),m&&d.ngOnChanges(m),65536&e.flags&&Ji(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),f}(t,e,i,n,r,o,s,a,l,c,u,h);case 32:case 64:case 128:return function(t,e,i,n,r,o,s,a,l,c,u,h){var p=e.bindings,d=!1,f=p.length;if(f>0&&vn(t,e,0,i)&&(d=!0),f>1&&vn(t,e,1,n)&&(d=!0),f>2&&vn(t,e,2,r)&&(d=!0),f>3&&vn(t,e,3,o)&&(d=!0),f>4&&vn(t,e,4,s)&&(d=!0),f>5&&vn(t,e,5,a)&&(d=!0),f>6&&vn(t,e,6,l)&&(d=!0),f>7&&vn(t,e,7,c)&&(d=!0),f>8&&vn(t,e,8,u)&&(d=!0),f>9&&vn(t,e,9,h)&&(d=!0),d){var m=nn(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(p.length),f>0&&(g[0]=i),f>1&&(g[1]=n),f>2&&(g[2]=r),f>3&&(g[3]=o),f>4&&(g[4]=s),f>5&&(g[5]=a),f>6&&(g[6]=l),f>7&&(g[7]=c),f>8&&(g[8]=u),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[p[0].name]=i),f>1&&(g[p[1].name]=n),f>2&&(g[p[2].name]=r),f>3&&(g[p[3].name]=o),f>4&&(g[p[4].name]=s),f>5&&(g[p[5].name]=a),f>6&&(g[p[6].name]=l),f>7&&(g[p[7].name]=c),f>8&&(g[p[8].name]=u),f>9&&(g[p[9].name]=h);break;case 128:var y=i;switch(f){case 1:g=y.transform(i);break;case 2:g=y.transform(n);break;case 3:g=y.transform(n,r);break;case 4:g=y.transform(n,r,o);break;case 5:g=y.transform(n,r,o,s);break;case 6:g=y.transform(n,r,o,s,a);break;case 7:g=y.transform(n,r,o,s,a,l);break;case 8:g=y.transform(n,r,o,s,a,l,c);break;case 9:g=y.transform(n,r,o,s,a,l,c,u);break;case 10:g=y.transform(n,r,o,s,a,l,c,u,h)}}m.value=g}return d}(t,e,i,n,r,o,s,a,l,c,u,h);default:throw"unreachable"}}(t,e,n,r,o,s,a,l,c,u,h,p):function(t,e,i){switch(201347067&e.flags){case 1:return function(t,e,i){for(var n=!1,r=0;r<i.length;r++)Qn(t,e,r,i[r])&&(n=!0);return n}(t,e,i);case 2:return function(t,e,i){for(var n=e.bindings,r=!1,o=0;o<i.length;o++)vn(t,e,o,i[o])&&(r=!0);if(r){var s="";for(o=0;o<i.length;o++)s+=co(i[o],n[o]);s=e.text.prefix+s;var a=$i(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return r}(t,e,i);case 16384:return function(t,e,i){for(var n=en(t,e.nodeIndex),r=n.instance,o=!1,s=void 0,a=0;a<i.length;a++)_n(t,e,a,i[a])&&(o=!0,s=Yr(t,n,e,a,i[a],s));return s&&r.ngOnChanges(s),65536&e.flags&&Ji(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,i);case 32:case 64:case 128:return function(t,e,i){for(var n=e.bindings,r=!1,o=0;o<i.length;o++)vn(t,e,o,i[o])&&(r=!0);if(r){var s=nn(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=i;break;case 64:for(a={},o=0;o<i.length;o++)a[n[o].name]=i[o];break;case 128:var l=i[0],c=i.slice(1);a=l.transform.apply(l,c)}s.value=a}return r}(t,e,i);default:throw"unreachable"}}(t,e,n)}function wo(t){var e=t.def;if(4&e.nodeFlags)for(var i=0;i<e.nodes.length;i++){var n=e.nodes[i];if(4&n.flags){var r=tn(t,i).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.state|=32,An(s,t)}}else 0==(4&n.childFlags)&&(i+=n.childCount)}}function Po(t,e,i,n,r,o,s,a,l,c,u,h,p){return 0===i?function(t,e,i,n,r,o,s,a,l,c,u,h){var p=e.bindings.length;p>0&&bn(t,e,0,i);p>1&&bn(t,e,1,n);p>2&&bn(t,e,2,r);p>3&&bn(t,e,3,o);p>4&&bn(t,e,4,s);p>5&&bn(t,e,5,a);p>6&&bn(t,e,6,l);p>7&&bn(t,e,7,c);p>8&&bn(t,e,8,u);p>9&&bn(t,e,9,h)}(t,e,n,r,o,s,a,l,c,u,h,p):function(t,e,i){for(var n=0;n<i.length;n++)bn(t,e,n,i[n])}(t,e,n),!1}function Eo(t,e){if(rn(t,e.nodeIndex).dirty)throw sn(on.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function To(t){if(!(128&t.state)){if(Oo(t,So.Destroy),Co(t,So.Destroy),qr(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Pn(t);if(e){var i=e.template._projectedViews;i&&(cr(i,i.indexOf(t)),on.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,i=0;i<e;i++){var n=t.def.nodes[i];1&n.flags?t.renderer.destroyNode(tn(t,i).renderElement):2&n.flags?t.renderer.destroyNode($i(t,i).renderText):(67108864&n.flags||134217728&n.flags)&&rn(t,i).destroy()}}(t),Sn(t)&&t.renderer.destroy(),t.state|=128}}var So={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};function Co(t,e){var i=t.def;if(33554432&i.nodeFlags)for(var n=0;n<i.nodes.length;n++){var r=i.nodes[n];33554432&r.flags?Mo(tn(t,n).componentView,e):0==(33554432&r.childFlags)&&(n+=r.childCount)}}function Oo(t,e){var i=t.def;if(16777216&i.nodeFlags)for(var n=0;n<i.nodes.length;n++){var r=i.nodes[n];if(16777216&r.flags)for(var o=tn(t,n).viewContainer._embeddedViews,s=0;s<o.length;s++)Mo(o[s],e);else 0==(16777216&r.childFlags)&&(n+=r.childCount)}}function Mo(t,e){var i=t.state;switch(e){case So.CheckNoChanges:0==(128&i)&&(12==(12&i)?bo(t):64&i&&Ro(t,So.CheckNoChangesProjectedViews));break;case So.CheckNoChangesProjectedViews:0==(128&i)&&(32&i?bo(t):64&i&&Ro(t,e));break;case So.CheckAndUpdate:0==(128&i)&&(12==(12&i)?xo(t):64&i&&Ro(t,So.CheckAndUpdateProjectedViews));break;case So.CheckAndUpdateProjectedViews:0==(128&i)&&(32&i?xo(t):64&i&&Ro(t,e));break;case So.Destroy:To(t);break;case So.CreateViewNodes:vo(t)}}function Ro(t,e){Oo(t,e),Co(t,e)}function Io(t,e,i,n){if(t.def.nodeFlags&e&&t.def.nodeFlags&i)for(var r=t.def.nodes.length,o=0;o<r;o++){var s=t.def.nodes[o];if(s.flags&e&&s.flags&i)switch(on.setCurrentNode(t,s.nodeIndex),n){case 0:$r(t,s);break;case 1:Eo(t,s)}s.childFlags&e&&s.childFlags&i||(o+=s.childCount)}}So[So.CreateViewNodes]="CreateViewNodes",So[So.CheckNoChanges]="CheckNoChanges",So[So.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",So[So.CheckAndUpdate]="CheckAndUpdate",So[So.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",So[So.Destroy]="Destroy";var Do=!1;function Lo(){if(!Do){Do=!0;var t=Xe()?{setCurrentNode:is,createRootView:Fo,createEmbeddedView:Bo,createComponentView:Vo,createNgModuleRef:zo,overrideProvider:Go,overrideComponentView:Wo,clearOverrides:Ho,checkAndUpdateView:Ko,checkNoChangesView:Qo,destroyView:Zo,createDebugContext:function(t,e){return new ds(t,e)},handleEvent:ns,updateDirectives:rs,updateRenderer:os}:{setCurrentNode:function(){},createRootView:ko,createEmbeddedView:fo,createComponentView:go,createNgModuleRef:Er,overrideProvider:cn,overrideComponentView:cn,clearOverrides:cn,checkAndUpdateView:xo,checkNoChangesView:bo,destroyView:To,createDebugContext:function(t,e){return new ds(t,e)},handleEvent:function(t,e,i,n){return t.def.handleEvent(t,e,i,n)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Yo:qo,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Yo:qo,t)}};on.setCurrentNode=t.setCurrentNode,on.createRootView=t.createRootView,on.createEmbeddedView=t.createEmbeddedView,on.createComponentView=t.createComponentView,on.createNgModuleRef=t.createNgModuleRef,on.overrideProvider=t.overrideProvider,on.overrideComponentView=t.overrideComponentView,on.clearOverrides=t.clearOverrides,on.checkAndUpdateView=t.checkAndUpdateView,on.checkNoChangesView=t.checkNoChangesView,on.destroyView=t.destroyView,on.resolveDep=Hr,on.createDebugContext=t.createDebugContext,on.handleEvent=t.handleEvent,on.updateDirectives=t.updateDirectives,on.updateRenderer=t.updateRenderer,on.dirtyParentQueries=Jr}}function ko(t,e,i,n,r,o){return mo(No(t,r,r.injector.get(ei),e,i),n,o)}function Fo(t,e,i,n,r,o){var s=r.injector.get(ei),a=No(t,r,new ys(s),e,i),l=Xo(n);return ms(es.create,mo,null,[a,l,o])}function No(t,e,i,n,r){var o=e.injector.get(Qi),s=e.injector.get(Pt);return{ngModule:e,injector:t,projectableNodes:n,selectorOrNode:r,sanitizer:o,rendererFactory:i,renderer:i.createRenderer(null,null),errorHandler:s}}function Bo(t,e,i,n){var r=Xo(i);return ms(es.create,fo,null,[t,e,r,n])}function Vo(t,e,i,n){var r=jo.get(e.element.componentProvider.provider.token);return i=r||Xo(i),ms(es.create,go,null,[t,e,i,n])}function zo(t,e,i,n){return Er(t,e,i,function(t){var e=function(t){var e=!1,i=!1;if(0===Uo.size)return{hasOverrides:e,hasDeprecatedOverrides:i};return t.providers.forEach(function(t){var n=Uo.get(t.token);3840&t.flags&&n&&(e=!0,i=i||n.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:i}}(t),i=e.hasOverrides,n=e.hasDeprecatedOverrides;if(!i)return t;return function(t){for(var e=0;e<t.providers.length;e++){var i=t.providers[e];n&&(i.flags|=4096);var r=Uo.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=Rn(r.deps),i.value=r.value)}}(t=t.factory(function(){return cn})),t}(n))}var Uo=new Map,jo=new Map;function Go(t){Uo.set(t.token,t)}function Wo(t,e){var i=Ln(Ln(e.viewDefFactory).nodes[0].element.componentView);jo.set(t,i)}function Ho(){Uo.clear(),jo.clear()}function Xo(t){if(0===Uo.size)return t;var e=function(t){for(var e=[],i=null,n=0;n<t.nodes.length;n++){var r=t.nodes[n];1&r.flags&&(i=r),i&&3840&r.flags&&Uo.has(r.provider.token)&&(e.push(i.nodeIndex),i=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return cn});for(var i=0;i<e.length;i++)n(t,e[i]);return t;function n(t,e){for(var i=e+1;i<t.nodes.length;i++){var n=t.nodes[i];if(1&n.flags)return;if(3840&n.flags){var r=n.provider,o=Uo.get(r.token);o&&(n.flags=-3841&n.flags|o.flags,r.deps=Rn(o.deps),r.value=o.value)}}}}function Yo(t,e,i,n,r,o,s,a,l,c,u,h,p){var d=t.def.nodes[e];return Ao(t,d,i,n,r,o,s,a,l,c,u,h,p),224&d.flags?nn(t,e).value:void 0}function qo(t,e,i,n,r,o,s,a,l,c,u,h,p){var d=t.def.nodes[e];return Po(t,d,i,n,r,o,s,a,l,c,u,h,p),224&d.flags?nn(t,e).value:void 0}function Ko(t){return ms(es.detectChanges,xo,null,[t])}function Qo(t){return ms(es.checkNoChanges,bo,null,[t])}function Zo(t){return ms(es.destroy,To,null,[t])}var Jo,$o,ts,es={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};function is(t,e){$o=t,ts=e}function ns(t,e,i,n){return is(t,e),ms(es.handleEvent,t.def.handleEvent,null,[t,e,i,n])}function rs(t,e){if(128&t.state)throw ln(es[Jo]);return is(t,hs(t,0)),t.def.updateDirectives(function(t,i,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=t.def.nodes[i];0===e?ss(t,s,n,r):as(t,s,n,r);16384&s.flags&&is(t,hs(t,i));return 224&s.flags?nn(t,s.nodeIndex).value:void 0},t)}function os(t,e){if(128&t.state)throw ln(es[Jo]);return is(t,ps(t,0)),t.def.updateRenderer(function(t,i,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=t.def.nodes[i];0===e?ss(t,s,n,r):as(t,s,n,r);3&s.flags&&is(t,ps(t,i));return 224&s.flags?nn(t,s.nodeIndex).value:void 0},t)}function ss(t,e,i,n){if(Ao.apply(void 0,[t,e,i].concat(n))){var r=1===i?n[0]:n;if(16384&e.flags){for(var o={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],l=r[s];8&a.flags&&(o[ls(a.nonMinifiedName)]=us(l))}var c=e.parent,u=tn(t,c.nodeIndex).renderElement;if(c.element.name)for(var h in o){null!=(l=o[h])?t.renderer.setAttribute(u,h,l):t.renderer.removeAttribute(u,h)}else t.renderer.setValue(u,"bindings="+JSON.stringify(o,null,2))}}}function as(t,e,i,n){Po.apply(void 0,[t,e,i].concat(n))}function ls(t){return"ng-reflect-"+(t=t.replace(/[$@]/g,"_").replace(cs,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()}))}es[es.create]="create",es[es.detectChanges]="detectChanges",es[es.checkNoChanges]="checkNoChanges",es[es.destroy]="destroy",es[es.handleEvent]="handleEvent";var cs=/([A-Z])/g;function us(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function hs(t,e){for(var i=e;i<t.def.nodes.length;i++){var n=t.def.nodes[i];if(16384&n.flags&&n.bindings&&n.bindings.length)return i}return null}function ps(t,e){for(var i=e;i<t.def.nodes.length;i++){var n=t.def.nodes[i];if(3&n.flags&&n.bindings&&n.bindings.length)return i}return null}var ds=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var i=this.nodeDef,n=t;i&&0==(1&i.flags);)i=i.parent;if(!i)for(;!i&&n;)i=En(n),n=n.parent;this.elDef=i,this.elView=n}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return tn(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return br(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var i=this.elView.def.nodes[e];20224&i.flags&&t.push(i.provider.token),e+=i.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){fs(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var i=this.elView.def.nodes[e];20224&i.flags&&fs(this.elView,i,t),e+=i.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!Sn(t);)t=t.parent;if(t.parent)return tn(t.parent,En(t).nodeIndex);return null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Tn(this.view,this.nodeDef):Tn(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];2&this.nodeDef.flags?(e=this.view.def,i=this.nodeDef.nodeIndex):(e=this.elView.def,i=this.elDef.nodeIndex);var o=function(t,e){for(var i=-1,n=0;n<=e;n++){var r=t.nodes[n];3&r.flags&&i++}return i}(e,i),s=-1;e.factory(function(){return++s===o?(e=t.error).bind.apply(e,[t].concat(n)):cn;var e}),s<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))},t}();function fs(t,e,i){for(var n in e.references)i[n]=eo(t,e,e.references[n])}function ms(t,e,i,n){var r=Jo,o=$o,s=ts;try{Jo=t;var a=e.apply(i,n);return $o=o,ts=s,Jo=r,a}catch(t){if(xt(t)||!$o)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),an(t,e),t}(t,gs())}}function gs(){return $o?new ds($o,ts):null}var ys=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new _s(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),_s=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){_i.delete(t.nativeNode)}(vi(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var i=this.delegate.createElement(t,e),n=gs();if(n){var r=new mi(i,null,n);r.name=t,bi(r)}return i},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),i=gs();return i&&bi(new fi(e,null,i)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),i=gs();return i&&bi(new fi(e,null,i)),e},t.prototype.appendChild=function(t,e){var i=vi(t),n=vi(e);i&&n&&i instanceof mi&&i.addChild(n),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,i){var n=vi(t),r=vi(e),o=vi(i);n&&r&&n instanceof mi&&n.insertBefore(o,r),this.delegate.insertBefore(t,e,i)},t.prototype.removeChild=function(t,e){var i=vi(t),n=vi(e);i&&n&&i instanceof mi&&i.removeChild(n),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),i=gs();return i&&bi(new mi(e,null,i)),e},t.prototype.setAttribute=function(t,e,i,n){var r=vi(t);if(r&&r instanceof mi){var o=n?n+":"+e:e;r.attributes[o]=i}this.delegate.setAttribute(t,e,i,n)},t.prototype.removeAttribute=function(t,e,i){var n=vi(t);if(n&&n instanceof mi){var r=i?i+":"+e:e;n.attributes[r]=null}this.delegate.removeAttribute(t,e,i)},t.prototype.addClass=function(t,e){var i=vi(t);i&&i instanceof mi&&(i.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var i=vi(t);i&&i instanceof mi&&(i.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,i,n){var r=vi(t);r&&r instanceof mi&&(r.styles[e]=i),this.delegate.setStyle(t,e,i,n)},t.prototype.removeStyle=function(t,e,i){var n=vi(t);n&&n instanceof mi&&(n.styles[e]=null),this.delegate.removeStyle(t,e,i)},t.prototype.setProperty=function(t,e,i){var n=vi(t);n&&n instanceof mi&&(n.properties[e]=i),this.delegate.setProperty(t,e,i)},t.prototype.listen=function(t,e,i){if("string"!=typeof t){var n=vi(t);n&&n.listeners.push(new di(e,i))}return this.delegate.listen(t,e,i)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function vs(t,e,i){return new bs(t,e,i)}var bs=function(t){function e(e,i,n){var r=t.call(this)||this;return r.moduleType=e,r._bootstrapComponents=i,r._ngModuleDefFactory=n,r}return Object(n.b)(e,t),e.prototype.create=function(t){Lo();var e=Ln(this._ngModuleDefFactory);return on.createNgModuleRef(this.moduleType,t||it.NULL,this._bootstrapComponents,e)},e}(we);function xs(t){return"string"==typeof t?'"'+t+'"':""+t}function As(t,e){ws(t,null,e)}function ws(t,e,i){t==e&&Ps(t,e,i,"!=")}function Ps(t,e,i,n,r){throw void 0===r&&(r=xs),new Error("ASSERT: expected "+i+" "+n+" "+r(e)+" but was "+r(t)+"!")}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0));!function(){function t(){this.dirty=!1,this._valuesTree=null,this._values=null}Object.defineProperty(t.prototype,"length",{get:function(){return ngDevMode&&As(this._values,"refreshed"),this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){ngDevMode&&As(this._values,"refreshed");var t=this._values;return t.length?t[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){ngDevMode&&As(this._values,"refreshed");var t=this._values;return t.length?t[t.length-1]:null},enumerable:!0,configurable:!0}),t.prototype._refresh=function(){return null===this._values&&(this._values=this._valuesTree,!0)},t.prototype.map=function(t){throw new Error("Method not implemented.")},t.prototype.filter=function(t){throw new Error("Method not implemented.")},t.prototype.find=function(t){throw new Error("Method not implemented.")},t.prototype.reduce=function(t,e){throw new Error("Method not implemented.")},t.prototype.forEach=function(t){throw new Error("Method not implemented.")},t.prototype.some=function(t){throw new Error("Method not implemented.")},t.prototype.toArray=function(){return ngDevMode&&As(this._values,"refreshed"),this._values},t.prototype.toString=function(){throw new Error("Method not implemented.")},t.prototype.reset=function(t){throw new Error("Method not implemented.")},t.prototype.notifyOnChanges=function(){throw new Error("Method not implemented.")},t.prototype.setDirty=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){throw new Error("Method not implemented.")}}();var Es={Important:1,DashCase:2};Es[Es.Important]="Important",Es[Es.DashCase]="DashCase";var Ts;function Ss(t,e,i){return{parent:Ts,id:t,node:null,data:[],ngStaticData:i,cleanup:null,renderer:e,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}Ts=Ss(null,null,[])}).call(e,i("GTd5"))},LT5m:function(t,e,i){"use strict";i.d(e,"d",function(){return E}),i.d(e,"b",function(){return w}),i.d(e,"c",function(){return A}),i.d(e,"a",function(){return g}),i.d(e,"e",function(){return m}),i.d(e,"f",function(){return x});var n=i("LMZF"),r=i("Un6q"),o=i("OFGE"),s=i("CZgk"),a=i("8Xfy"),l=i("3Czw"),c=i("j5BN"),u=i("6Xbx"),h=i("pXwq"),p=i("5O0w"),d=i("TO51"),f=i("fAeS"),m=function(){function t(t,e){var i=this;this._overlayRef=e,this._afterDismissed=new d.a,this._afterOpened=new d.a,this._onAction=new d.a,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(function(){return i.dismiss()}),t._onExit.subscribe(function(){return i._finishDismiss()})}return t.prototype.dismiss=function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)},t.prototype.dismissWithAction=function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())},t.prototype.closeWithAction=function(){this.dismissWithAction()},t.prototype._dismissAfter=function(t){var e=this;this._durationTimeoutId=setTimeout(function(){return e.dismiss()},t)},t.prototype._open=function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())},t.prototype._finishDismiss=function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1},t.prototype.afterDismissed=function(){return this._afterDismissed.asObservable()},t.prototype.afterOpened=function(){return this.containerInstance._onEnter},t.prototype.onAction=function(){return this._onAction.asObservable()},t}(),g=new n.w("MatSnackBarData"),y=function(){return function(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.direction="ltr",this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}(),_=c.b.ENTERING+" "+c.a.DECELERATION_CURVE,v=c.b.EXITING+" "+c.a.ACCELERATION_CURVE,b={contentFade:Object(f.m)("contentFade",[Object(f.l)(":enter",[Object(f.k)({opacity:"0"}),Object(f.e)(c.b.COMPLEX+" "+c.a.STANDARD_CURVE)])]),snackBarState:Object(f.m)("state",[Object(f.j)("visible-top, visible-bottom",Object(f.k)({transform:"translateY(0%)"})),Object(f.l)("visible-top => hidden-top, visible-bottom => hidden-bottom",Object(f.e)(v)),Object(f.l)("void => visible-top, void => visible-bottom",Object(f.e)(_))])},x=function(){function t(t,e){this.snackBarRef=t,this.data=e}return t.prototype.action=function(){this.snackBarRef.dismissWithAction()},Object.defineProperty(t.prototype,"hasAction",{get:function(){return!!this.data.action},enumerable:!0,configurable:!0}),t.decorators=[{type:n.j,args:[{selector:"simple-snack-bar",template:'{{data.message}} <button class="mat-simple-snackbar-action" *ngIf="hasAction" (click)="action()">{{data.action}}</button>',styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;line-height:20px;opacity:1}.mat-simple-snackbar-action{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;background:0 0;flex-shrink:0;margin-left:48px}[dir=rtl] .mat-simple-snackbar-action{margin-right:48px;margin-left:0}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,animations:[b.contentFade],host:{"[@contentFade]":"",class:"mat-simple-snackbar"}}]}],t.ctorParameters=function(){return[{type:m},{type:void 0,decorators:[{type:n.u,args:[g]}]}]},t}(),A=function(t){function e(e,i,n){var r=t.call(this)||this;return r._ngZone=e,r._elementRef=i,r._changeDetectorRef=n,r._destroyed=!1,r._onExit=new d.a,r._onEnter=new d.a,r._animationState="void",r}return Object(u.b)(e,t),e.prototype.attachComponentPortal=function(t){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached");var e=this._elementRef.nativeElement;return(this.snackBarConfig.panelClass||this.snackBarConfig.extraClasses)&&(this._setCssClasses(this.snackBarConfig.panelClass),this._setCssClasses(this.snackBarConfig.extraClasses)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top"),this._portalOutlet.attachComponentPortal(t)},e.prototype.attachTemplatePortal=function(){throw Error("Not yet implemented")},e.prototype.onAnimationEnd=function(t){var e=t.fromState,i=t.toState;if(("void"===i&&"void"!==e||i.startsWith("hidden"))&&this._completeExit(),i.startsWith("visible")){var n=this._onEnter;this._ngZone.run(function(){n.next(),n.complete()})}},e.prototype.enter=function(){this._destroyed||(this._animationState="visible-"+this.snackBarConfig.verticalPosition,this._changeDetectorRef.detectChanges())},e.prototype.exit=function(){return this._animationState="hidden-"+this.snackBarConfig.verticalPosition,this._onExit},e.prototype.ngOnDestroy=function(){this._destroyed=!0,this._completeExit()},e.prototype._completeExit=function(){var t=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(h.a)(1)).subscribe(function(){t._onExit.next(),t._onExit.complete()})},e.prototype._setCssClasses=function(t){if(t){var e=this._elementRef.nativeElement;Array.isArray(t)?t.forEach(function(t){return e.classList.add(t)}):e.classList.add(t)}},e.decorators=[{type:n.j,args:[{selector:"snack-bar-container",template:"<ng-template cdkPortalOutlet></ng-template>",styles:[".mat-snack-bar-container{border-radius:2px;box-sizing:border-box;display:block;margin:24px;max-width:568px;min-width:288px;padding:14px 24px;transform:translateY(100%) translateY(24px)}.mat-snack-bar-container.mat-snack-bar-center{margin:0;transform:translateY(100%)}.mat-snack-bar-container.mat-snack-bar-top{transform:translateY(-100%) translateY(-24px)}.mat-snack-bar-container.mat-snack-bar-top.mat-snack-bar-center{transform:translateY(-100%)}@media screen and (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:0;max-width:inherit;width:100%}"],changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1,animations:[b.snackBarState],host:{role:"alert",class:"mat-snack-bar-container","[@state]":"_animationState","(@state.done)":"onAnimationEnd($event)"}}]}],e.ctorParameters=function(){return[{type:n.F},{type:n.o},{type:n.h}]},e.propDecorators={_portalOutlet:[{type:n.X,args:[s.c]}]},e}(s.a),w=function(){function t(t,e,i,n,r){this._overlay=t,this._live=e,this._injector=i,this._breakpointObserver=n,this._parentSnackBar=r,this._snackBarRefAtThisLevel=null}return Object.defineProperty(t.prototype,"_openedSnackBarRef",{get:function(){var t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t},enumerable:!0,configurable:!0}),t.prototype.openFromComponent=function(t,e){var i=this,n=P(e),r=this._attach(t,n);return r.afterDismissed().subscribe(function(){i._openedSnackBarRef==r&&(i._openedSnackBarRef=null)}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(function(){r.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):r.containerInstance.enter(),n.duration&&n.duration>0&&r.afterOpened().subscribe(function(){return r._dismissAfter(n.duration)}),n.announcementMessage&&this._live.announce(n.announcementMessage,n.politeness),this._openedSnackBarRef=r,this._openedSnackBarRef},t.prototype.open=function(t,e,i){void 0===e&&(e="");var n=P(i);return n.data={message:t,action:e},n.announcementMessage=t,this.openFromComponent(x,n)},t.prototype.dismiss=function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()},t.prototype._attachSnackBarContainer=function(t,e){var i=new s.d(A,e.viewContainerRef),n=t.attach(i);return n.instance.snackBarConfig=e,n.instance},t.prototype._attach=function(t,e){var i=this._createOverlay(e),n=this._attachSnackBarContainer(i,e),r=new m(n,i),o=this._createInjector(e,r),a=new s.d(t,void 0,o),c=n.attachComponentPortal(a);return r.instance=c.instance,this._breakpointObserver.observe(l.b.Handset).pipe(Object(p.a)(i.detachments().pipe(Object(h.a)(1)))).subscribe(function(t){t.matches?i.overlayElement.classList.add("mat-snack-bar-handset"):i.overlayElement.classList.remove("mat-snack-bar-handset")}),r},t.prototype._createOverlay=function(t){var e=new o.d;e.direction=t.direction;var i=this._overlay.position().global(),n="rtl"===t.direction,r="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!n||"end"===t.horizontalPosition&&n,s=!r&&"center"!==t.horizontalPosition;return r?i.left("0"):s?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),e.positionStrategy=i,this._overlay.create(e)},t.prototype._createInjector=function(t,e){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,n=new WeakMap;return n.set(m,e),n.set(g,t.data),new s.f(i||this._injector,n)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:o.c},{type:a.n},{type:n.x},{type:l.a},{type:t,decorators:[{type:n.G},{type:n.T}]}]},t}();function P(t){return Object(u.a)({},new y,t)}var E=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[o.g,s.g,r.b,c.n,l.c],exports:[A,c.n],declarations:[A,x],entryComponents:[A,x],providers:[w,a.l]}]}],t.ctorParameters=function(){return[]},t}()},LaOa:function(t,e,i){"use strict";e.a=function(t,e){return function(i){return i.lift(new o(t,e))}};var n=i("E9/g"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,i,n){t.call(this,e),this.predicate=i,this.thisArg=n,this.count=0}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(n.a)},"Lpd/":function(t,e,i){"use strict";i.d(e,"d",function(){return C}),i.d(e,"a",function(){return f}),i.d(e,"b",function(){return S}),i.d(e,"c",function(){return g}),i.d(e,"e",function(){return w});var n=i("Un6q"),r=i("LMZF"),o=i("V8+5"),s=i("6Xbx"),a=i("XEj9"),l=i("j5BN"),c=i("kH4A"),u=i("fNvg"),h=i("pXwq"),p=i("fAeS"),d=0,f=function(){function t(){this.id="mat-error-"+d++}return t.decorators=[{type:r.n,args:[{selector:"mat-error",host:{class:"mat-error",role:"alert","[attr.id]":"id"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={id:[{type:r.y}]},t}(),m={transitionMessages:Object(p.m)("transitionMessages",[Object(p.j)("enter",Object(p.k)({opacity:1,transform:"translateY(0%)"})),Object(p.l)("void => enter",[Object(p.k)({opacity:0,transform:"translateY(-100%)"}),Object(p.e)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},g=function(){return function(){}}();function y(t){return Error("A hint was already declared for 'align=\""+t+"\"'.")}var _=0,v=function(){function t(){this.align="start",this.id="mat-hint-"+_++}return t.decorators=[{type:r.n,args:[{selector:"mat-hint",host:{class:"mat-hint","[class.mat-right]":'align == "end"',"[attr.id]":"id","[attr.align]":"null"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={align:[{type:r.y}],id:[{type:r.y}]},t}(),b=function(){function t(){}return t.decorators=[{type:r.n,args:[{selector:"mat-label"}]}],t.ctorParameters=function(){return[]},t}(),x=function(){function t(){}return t.decorators=[{type:r.n,args:[{selector:"mat-placeholder"}]}],t.ctorParameters=function(){return[]},t}(),A=function(){function t(){}return t.decorators=[{type:r.n,args:[{selector:"[matPrefix]"}]}],t.ctorParameters=function(){return[]},t}(),w=function(){function t(){}return t.decorators=[{type:r.n,args:[{selector:"[matSuffix]"}]}],t.ctorParameters=function(){return[]},t}(),P=function(){return function(t){this._elementRef=t}}(),E=Object(l.C)(P,"primary"),T=0,S=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._elementRef=e,r._changeDetectorRef=i,r._showAlwaysAnimate=!1,r._subscriptAnimationState="",r._hintLabel="",r._hintLabelId="mat-hint-"+T++,r._labelOptions=n||{},r.floatLabel=r._labelOptions.float||"auto",r}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"dividerColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRequiredMarker",{get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=Object(a.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_shouldAlwaysFloat",{get:function(){return"always"===this._floatLabel&&!this._showAlwaysAnimate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canLabelFloat",{get:function(){return"never"!==this._floatLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintLabel",{get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatPlaceholder",{get:function(){return this._floatLabel},set:function(t){this.floatLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatLabel",{get:function(){return this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this._validateControlChild(),this._control.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+this._control.controlType),this._control.stateChanges.pipe(Object(u.a)(null)).subscribe(function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()});var e=this._control.ngControl;e&&e.valueChanges&&e.valueChanges.subscribe(function(){t._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Object(u.a)(null)).subscribe(function(){t._processHints(),t._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Object(u.a)(null)).subscribe(function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})},e.prototype.ngAfterContentChecked=function(){this._validateControlChild()},e.prototype.ngAfterViewInit=function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()},e.prototype._shouldForward=function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]},e.prototype._hasPlaceholder=function(){return!(!this._control.placeholder&&!this._placeholderChild)},e.prototype._hasLabel=function(){return!!this._labelChild},e.prototype._shouldLabelFloat=function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._control.shouldPlaceholderFloat||this._shouldAlwaysFloat)},e.prototype._hideControlPlaceholder=function(){return!this._hasLabel()||!this._shouldLabelFloat()},e.prototype._hasFloatingLabel=function(){return this._hasLabel()||this._hasPlaceholder()},e.prototype._getDisplayedMessages=function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"},e.prototype._animateAndLockLabel=function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._showAlwaysAnimate=!0,this._floatLabel="always",Object(c.a)(this._label.nativeElement,"transitionend").pipe(Object(h.a)(1)).subscribe(function(){t._showAlwaysAnimate=!1}),this._changeDetectorRef.markForCheck())},e.prototype._validatePlaceholders=function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")},e.prototype._processHints=function(){this._validateHints(),this._syncDescribedByIds()},e.prototype._validateHints=function(){var t,e,i=this;this._hintChildren&&this._hintChildren.forEach(function(n){if("start"===n.align){if(t||i.hintLabel)throw y("start");t=n}else if("end"===n.align){if(e)throw y("end");e=n}})},e.prototype._syncDescribedByIds=function(){if(this._control){var t=[];if("hint"===this._getDisplayedMessages()){var e=this._hintChildren?this._hintChildren.find(function(t){return"start"===t.align}):null,i=this._hintChildren?this._hintChildren.find(function(t){return"end"===t.align}):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&(t=this._errorChildren.map(function(t){return t.id}));this._control.setDescribedByIds(t)}},e.prototype._validateControlChild=function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")},e.decorators=[{type:r.j,args:[{selector:"mat-input-container, mat-form-field",exportAs:"matFormField",template:'<div class="mat-input-wrapper mat-form-field-wrapper"><div class="mat-input-flex mat-form-field-flex" #connectionContainer (click)="_control.onContainerClick && _control.onContainerClick($event)"><div class="mat-input-prefix mat-form-field-prefix" *ngIf="_prefixChildren.length"><ng-content select="[matPrefix]"></ng-content></div><div class="mat-input-infix mat-form-field-infix" #inputContainer><ng-content></ng-content><span class="mat-form-field-label-wrapper mat-input-placeholder-wrapper mat-form-field-placeholder-wrapper"><label class="mat-form-field-label mat-input-placeholder mat-form-field-placeholder" [attr.for]="_control.id" [attr.aria-owns]="_control.id" [class.mat-empty]="_control.empty && !_shouldAlwaysFloat" [class.mat-form-field-empty]="_control.empty && !_shouldAlwaysFloat" [class.mat-accent]="color == \'accent\'" [class.mat-warn]="color == \'warn\'" #label *ngIf="_hasFloatingLabel()" [ngSwitch]="_hasLabel()"><ng-container *ngSwitchCase="false"><ng-content select="mat-placeholder"></ng-content>{{_control.placeholder}}</ng-container><ng-content select="mat-label" *ngSwitchCase="true"></ng-content><span class="mat-placeholder-required mat-form-field-required-marker" aria-hidden="true" *ngIf="!hideRequiredMarker && _control.required && !_control.disabled">&nbsp;*</span></label></span></div><div class="mat-input-suffix mat-form-field-suffix" *ngIf="_suffixChildren.length"><ng-content select="[matSuffix]"></ng-content></div></div><div class="mat-input-underline mat-form-field-underline" #underline><span class="mat-input-ripple mat-form-field-ripple" [class.mat-accent]="color == \'accent\'" [class.mat-warn]="color == \'warn\'"></span></div><div class="mat-input-subscript-wrapper mat-form-field-subscript-wrapper" [ngSwitch]="_getDisplayedMessages()"><div *ngSwitchCase="\'error\'" [@transitionMessages]="_subscriptAnimationState"><ng-content select="mat-error"></ng-content></div><div class="mat-input-hint-wrapper mat-form-field-hint-wrapper" *ngSwitchCase="\'hint\'" [@transitionMessages]="_subscriptAnimationState"><div *ngIf="hintLabel" [id]="_hintLabelId" class="mat-hint">{{hintLabel}}</div><ng-content select="mat-hint:not([align=\'end\'])"></ng-content><div class="mat-input-hint-spacer mat-form-field-hint-spacer"></div><ng-content select="mat-hint[align=\'end\']"></ng-content></div></div></div>',styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform:perspective(100px);-ms-transform:none;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;height:1px;width:100%}.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.mat-form-field-underline .mat-form-field-ripple{position:absolute;top:0;left:0;width:100%;height:2px;transform-origin:50%;transform:scaleX(.5);visibility:hidden;opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field-invalid:not(.mat-focused) .mat-form-field-underline .mat-form-field-ripple{height:1px}.mat-focused .mat-form-field-underline .mat-form-field-ripple,.mat-form-field-invalid .mat-form-field-underline .mat-form-field-ripple{visibility:visible;opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block} .mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-autosize{resize:none}"],animations:[m.transitionMessages],host:{class:"mat-input-container mat-form-field","[class.mat-input-invalid]":"_control.errorState","[class.mat-form-field-invalid]":"_control.errorState","[class.mat-form-field-can-float]":"_canLabelFloat","[class.mat-form-field-should-float]":"_shouldLabelFloat()","[class.mat-form-field-hide-placeholder]":"_hideControlPlaceholder()","[class.mat-form-field-disabled]":"_control.disabled","[class.mat-focused]":"_control.focused","[class.ng-untouched]":'_shouldForward("untouched")',"[class.ng-touched]":'_shouldForward("touched")',"[class.ng-pristine]":'_shouldForward("pristine")',"[class.ng-dirty]":'_shouldForward("dirty")',"[class.ng-valid]":'_shouldForward("valid")',"[class.ng-invalid]":'_shouldForward("invalid")',"[class.ng-pending]":'_shouldForward("pending")'},inputs:["color"],encapsulation:r._0.None,preserveWhitespaces:!1,changeDetection:r.g.OnPush}]}],e.ctorParameters=function(){return[{type:r.o},{type:r.h},{type:void 0,decorators:[{type:r.G},{type:r.u,args:[l.j]}]}]},e.propDecorators={dividerColor:[{type:r.y}],hideRequiredMarker:[{type:r.y}],hintLabel:[{type:r.y}],floatPlaceholder:[{type:r.y}],floatLabel:[{type:r.y}],underlineRef:[{type:r.X,args:["underline"]}],_connectionContainerRef:[{type:r.X,args:["connectionContainer"]}],_inputContainerRef:[{type:r.X,args:["inputContainer"]}],_label:[{type:r.X,args:["label"]}],_control:[{type:r.l,args:[g]}],_placeholderChild:[{type:r.l,args:[x]}],_labelChild:[{type:r.l,args:[b]}],_errorChildren:[{type:r.m,args:[f]}],_hintChildren:[{type:r.m,args:[v]}],_prefixChildren:[{type:r.m,args:[A]}],_suffixChildren:[{type:r.m,args:[w]}]},e}(E),C=function(){function t(){}return t.decorators=[{type:r.C,args:[{declarations:[f,v,S,x,A,w,b],imports:[n.b,o.b],exports:[f,v,S,x,A,w,b]}]}],t.ctorParameters=function(){return[]},t}()},MCDL:function(t,e,i){"use strict";i.d(e,"a",function(){return A}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return m}),i.d(e,"e",function(){return y}),i.d(e,"f",function(){return _}),i.d(e,"d",function(){return g});var n=i("LMZF"),r=i("RyBE"),o=i("6Xbx"),s=i("fAeS"),a=i("S0PE"),l=function(t){function e(e,i){var r=t.call(this)||this;r._nextAnimationId=0;var o={id:"0",encapsulation:n._0.None,styles:[],data:{animation:[]}};return r._renderer=e.createRenderer(i.body,o),r}return Object(o.b)(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var i=Array.isArray(t)?Object(s.i)(t):t;return h(this._renderer,null,e,"register",[i]),new c(e,this._renderer)},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:n.N},{type:void 0,decorators:[{type:n.u,args:[r.b]}]}]},e}(s.b),c=function(t){function e(e,i){var n=t.call(this)||this;return n._id=e,n._renderer=i,n}return Object(o.b)(e,t),e.prototype.create=function(t,e){return new u(this._id,t,e||{},this._renderer)},e}(s.c),u=function(){function t(t,e,i,n){this.id=t,this.element=e,this._renderer=n,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return h(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function h(t,e,i,n,r){return t.setProperty(e,"@@"+i+":"+n,r)}var p=function(){function t(t,e,i){this.delegate=t,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var i=this,n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var r=this._rendererCache.get(n);return r||(r=new d("",n,this.engine),this._rendererCache.set(n,r)),r}var o=e.id,s=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(s,t),e.data.animation.forEach(function(e){return i.engine.registerTrigger(o,s,t,e.name,e)}),new f(this,s,n,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;this.promise.then(function(){t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,i){var n=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(i)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){n._zone.run(function(){n._animationCallbacksBuffer.forEach(function(t){(0,t[0])(t[1])}),n._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,i]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:n.N},{type:a.b},{type:n.F}]},t}(),d=function(){function t(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,i){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,i,n){this.delegate.setAttribute(t,e,i,n)},t.prototype.removeAttribute=function(t,e,i){this.delegate.removeAttribute(t,e,i)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,i,n){this.delegate.setStyle(t,e,i,n)},t.prototype.removeStyle=function(t,e,i){this.delegate.removeStyle(t,e,i)},t.prototype.setProperty=function(t,e,i){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,i){return this.delegate.listen(t,e,i)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),f=function(t){function e(e,i,n,r){var o=t.call(this,i,n,r)||this;return o.factory=e,o.namespaceId=i,o}return Object(o.b)(e,t),e.prototype.setProperty=function(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?(i=void 0===i||!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)},e.prototype.listen=function(t,e,i){var n,r=this;if("@"==e.charAt(0)){var o=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),s=e.substr(1),a="";return"@"!=s.charAt(0)&&(s=(n=function(t){var e=t.indexOf("."),i=t.substring(0,e),n=t.substr(e+1);return[i,n]}(s))[0],a=n[1]),this.engine.listen(this.namespaceId,o,s,a,function(t){var e=t._data||-1;r.factory.scheduleListenerCallback(e,i,t)})}return this.delegate.listen(t,e,i)},e}(d);var m=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(o.b)(e,t),e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:a.a},{type:a.c}]},e}(a.b);function g(){return Object(a.g)()?new a.e:new a.d}function y(){return new a.f}function _(t,e,i){return new p(t,e,i)}var v=[{provide:s.b,useClass:l},{provide:a.c,useFactory:y},{provide:a.b,useClass:m},{provide:n.N,useFactory:_,deps:[r.l,a.b,n.F]}],b=[{provide:a.a,useFactory:g}].concat(v),x=[{provide:a.a,useClass:a.d}].concat(v),A=function(){function t(){}return t.decorators=[{type:n.C,args:[{exports:[r.a],providers:b}]}],t.ctorParameters=function(){return[]},t}();!function(){function t(){}t.decorators=[{type:n.C,args:[{exports:[r.a],providers:x}]}],t.ctorParameters=function(){return[]}}()},MZnR:function(t,e,i){"use strict";e.a=function(t){return t instanceof Date&&!isNaN(+t)}},"N+n4":function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),l=n[i];i<o;l=n[++i])m(l)||!b(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(i,r){if(_(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}};var o,s={};function a(t,i){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(i)?n.showHidden=i:i&&e._extend(n,i),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),u(n,t,n.depth)}function l(t,e){var i=a.styles[e];return i?"\x1b["+a.colors[i][0]+"m"+t+"\x1b["+a.colors[i][1]+"m":t}function c(t,e){return t}function u(t,i,n){if(t.customInspect&&i&&w(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return y(r)||(r=u(t,r,n)),r}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(y(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(g(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,i);if(o)return o;var s=Object.keys(i),a=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),A(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(i);if(0===s.length){if(w(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(v(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(x(i))return t.stylize(Date.prototype.toString.call(i),"date");if(A(i))return h(i)}var c,b="",P=!1,E=["{","}"];(d(i)&&(P=!0,E=["[","]"]),w(i))&&(b=" [Function"+(i.name?": "+i.name:"")+"]");return v(i)&&(b=" "+RegExp.prototype.toString.call(i)),x(i)&&(b=" "+Date.prototype.toUTCString.call(i)),A(i)&&(b=" "+h(i)),0!==s.length||P&&0!=i.length?n<0?v(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=P?function(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)S(e,String(s))?o.push(p(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,e,i,n,r,!0))}),o}(t,i,n,a,s):s.map(function(e){return p(t,i,n,a,e,P)}),t.seen.pop(),function(t,e,i){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(c,b,E)):E[0]+b+E[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,n,r,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),S(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(i)?u(t,l.value,null):u(t,l.value,i-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===P(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===P(t)}function A(t){return b(t)&&("[object Error]"===P(t)||t instanceof Error)}function w(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(_(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var i=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=f,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=v,e.isObject=b,e.isDate=x,e.isError=A,e.isFunction=w,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t},e.isBuffer=i("PIb/");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(t=new Date,i=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i("RC4L"),e._extend=function(t,e){if(!e||!b(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(e,i("GTd5"),i("1WNV"))},NGRF:function(t,e,i){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},NePw:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={e:{}}},OFGE:function(t,e,i){"use strict";i.d(e,"c",function(){return z}),i.d(e,"e",function(){return F}),i.d(e,"b",function(){return H}),i.d(e,"a",function(){return X}),i.d(e,"f",function(){return D}),i.d(e,"h",function(){return I}),i.d(e,"d",function(){return y}),i.d(e,"i",function(){return S}),i.d(e,"g",function(){return q}),i.d(e,"n",function(){return L}),i.d(e,"k",function(){return N}),i.d(e,"l",function(){return j}),i.d(e,"m",function(){return G});var n=i("LMZF"),r=i("4jwp"),o=i("Un6q"),s=i("l6RC"),a=i("CZgk"),l=i("6Xbx"),c=i("pXwq"),u=i("TO51"),h=i("qLnt"),p=i("LaOa"),d=i("kH4A"),f=i("XEj9"),m=i("rT01");i.d(e,"j",function(){return r.g});var g=function(){function t(){}return t.prototype.enable=function(){},t.prototype.disable=function(){},t.prototype.attach=function(){},t}(),y=function(){return function(t){var e=this;this.scrollStrategy=new g,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.direction="ltr",t&&Object.keys(t).filter(function(e){return"undefined"!=typeof t[e]}).forEach(function(i){return e[i]=t[i]})}}(),_=function(){return function(t,e,i,n){this.offsetX=i,this.offsetY=n,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}(),v=function(){return function(){}}(),b=function(){function t(t,e){this.connectionPair=t,this.scrollableViewProperties=e}return t.ctorParameters=function(){return[{type:_},{type:v,decorators:[{type:n.G}]}]},t}();function x(){return Error("Scroll strategy has already been attached.")}var A=function(){function t(t,e,i,n){var r=this;this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n,this._scrollSubscription=null,this._detach=function(){r.disable(),r._overlayRef.hasAttached()&&r._ngZone.run(function(){return r._overlayRef.detach()})}}return t.prototype.attach=function(t){if(this._overlayRef)throw x();this._overlayRef=t},t.prototype.enable=function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),w=function(){function t(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}return t.prototype.attach=function(){},t.prototype.enable=function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=-this._previousScrollPosition.left+"px",t.style.top=-this._previousScrollPosition.top+"px",t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}},t.prototype.disable=function(){if(this._isEnabled){var t=this._document.documentElement,e=this._document.body,i=t.style.scrollBehavior||"",n=e.style.scrollBehavior||"";this._isEnabled=!1,t.style.left=this._previousHTMLStyles.left,t.style.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),t.style.scrollBehavior=e.style.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.style.scrollBehavior=i,e.style.scrollBehavior=n}},t.prototype._canBeEnabled=function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width},t}();function P(t,e){return e.some(function(e){var i=t.bottom<e.top,n=t.top>e.bottom,r=t.right<e.left,o=t.left>e.right;return i||n||r||o})}function E(t,e){return e.some(function(e){var i=t.top<e.top,n=t.bottom>e.bottom,r=t.left<e.left,o=t.right>e.right;return i||n||r||o})}var T=function(){function t(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n,this._scrollSubscription=null}return t.prototype.attach=function(t){if(this._overlayRef)throw x();this._overlayRef=t},t.prototype.enable=function(){var t=this;if(!this._scrollSubscription){var e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),i=t._viewportRuler.getViewportSize(),n=i.width,r=i.height;P(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(t.disable(),t._ngZone.run(function(){return t._overlayRef.detach()}))}})}},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),S=function(){function t(t,e,i,n){var r=this;this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this.noop=function(){return new g},this.close=function(t){return new A(r._scrollDispatcher,r._ngZone,r._viewportRuler,t)},this.block=function(){return new w(r._viewportRuler,r._document)},this.reposition=function(t){return new T(r._scrollDispatcher,r._viewportRuler,r._ngZone,t)},this._document=n}return t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:r.d},{type:r.g},{type:n.F},{type:void 0,decorators:[{type:n.u,args:[o.c]}]}]},t}(),C=function(){function t(t,e,i,n,r,o){this._portalOutlet=t,this._pane=e,this._config=i,this._ngZone=n,this._keyboardDispatcher=r,this._document=o,this._backdropElement=null,this._backdropClick=new u.a,this._attachments=new u.a,this._detachments=new u.a,this._keydownEvents=new u.a,i.scrollStrategy&&i.scrollStrategy.attach(this)}return Object.defineProperty(t.prototype,"overlayElement",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backdropElement",{get:function(){return this._backdropElement},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this,i=this._portalOutlet.attach(t);return this._config.positionStrategy&&this._config.positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Object(c.a)(1)).subscribe(function(){e.hasAttached()&&e.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&(Array.isArray(this._config.panelClass)?this._config.panelClass.forEach(function(t){return e._pane.classList.add(t)}):this._pane.classList.add(this._config.panelClass)),this._attachments.next(),this._keyboardDispatcher.add(this),i},t.prototype.detach=function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._config.positionStrategy&&this._config.positionStrategy.detach&&this._config.positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),t}},t.prototype.dispose=function(){var t=this.hasAttached();this._config.positionStrategy&&this._config.positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),t&&this._detachments.next(),this._detachments.complete()},t.prototype.hasAttached=function(){return this._portalOutlet.hasAttached()},t.prototype.backdropClick=function(){return this._backdropClick.asObservable()},t.prototype.attachments=function(){return this._attachments.asObservable()},t.prototype.detachments=function(){return this._detachments.asObservable()},t.prototype.keydownEvents=function(){return this._keydownEvents.asObservable()},t.prototype.getConfig=function(){return this._config},t.prototype.updatePosition=function(){this._config.positionStrategy&&this._config.positionStrategy.apply()},t.prototype.updateSize=function(t){this._config=Object(l.a)({},this._config,t),this._updateElementSize()},t.prototype.setDirection=function(t){this._config=Object(l.a)({},this._config,{direction:t}),this._updateElementDirection()},t.prototype._updateElementDirection=function(){this._pane.setAttribute("dir",this._config.direction)},t.prototype._updateElementSize=function(){(this._config.width||0===this._config.width)&&(this._pane.style.width=O(this._config.width)),(this._config.height||0===this._config.height)&&(this._pane.style.height=O(this._config.height)),(this._config.minWidth||0===this._config.minWidth)&&(this._pane.style.minWidth=O(this._config.minWidth)),(this._config.minHeight||0===this._config.minHeight)&&(this._pane.style.minHeight=O(this._config.minHeight)),(this._config.maxWidth||0===this._config.maxWidth)&&(this._pane.style.maxWidth=O(this._config.maxWidth)),(this._config.maxHeight||0===this._config.maxHeight)&&(this._pane.style.maxHeight=O(this._config.maxHeight))},t.prototype._togglePointerEvents=function(t){this._pane.style.pointerEvents=t?"auto":"none"},t.prototype._attachBackdrop=function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._backdropElement.classList.add(this._config.backdropClass),this._pane.parentElement.insertBefore(this._backdropElement,this._pane),this._backdropElement.addEventListener("click",function(e){return t._backdropClick.next(e)}),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")},t.prototype._updateStackingOrder=function(){this._pane.nextSibling&&this._pane.parentNode.appendChild(this._pane)},t.prototype.detachBackdrop=function(){var t=this,e=this._backdropElement;if(e){var i=function(){e&&e.parentNode&&e.parentNode.removeChild(e),t._backdropElement==e&&(t._backdropElement=null)};e.classList.remove("cdk-overlay-backdrop-showing"),this._config.backdropClass&&e.classList.remove(this._config.backdropClass),e.addEventListener("transitionend",i),e.style.pointerEvents="none",this._ngZone.runOutsideAngular(function(){setTimeout(i,500)})}},t}();function O(t){return"string"==typeof t?t:t+"px"}var M=function(){function t(t,e,i,n,r){this._connectedTo=i,this._viewportRuler=n,this._document=r,this._dir="ltr",this._offsetX=0,this._offsetY=0,this.scrollables=[],this._resizeSubscription=h.a.EMPTY,this._preferredPositions=[],this._applied=!1,this._positionLocked=!1,this._onPositionChange=new u.a,this._origin=this._connectedTo.nativeElement,this.withFallbackPosition(t,e)}return Object.defineProperty(t.prototype,"_isRtl",{get:function(){return"rtl"===this._dir},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPositionChange",{get:function(){return this._onPositionChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this;this._overlayRef=t,this._pane=t.overlayElement,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){return e.apply()})},t.prototype.dispose=function(){this._applied=!1,this._resizeSubscription.unsubscribe(),this._onPositionChange.complete()},t.prototype.detach=function(){this._applied=!1,this._resizeSubscription.unsubscribe()},t.prototype.apply=function(){if(this._applied&&this._positionLocked&&this._lastConnectedPosition)this.recalculateLastPosition();else{this._applied=!0;for(var t,e,i=this._pane,n=this._origin.getBoundingClientRect(),r=i.getBoundingClientRect(),o=this._viewportRuler.getViewportSize(),s=0,a=this._preferredPositions;s<a.length;s++){var l=a[s],c=this._getOriginConnectionPoint(n,l),u=this._getOverlayPoint(c,r,o,l);if(u.fitsInViewport)return this._setElementPosition(i,r,u,l),void(this._lastConnectedPosition=l);(!t||t.visibleArea<u.visibleArea)&&(t=u,e=l)}this._setElementPosition(i,r,t,e)}},t.prototype.recalculateLastPosition=function(){if(this._lastConnectedPosition){var t=this._origin.getBoundingClientRect(),e=this._pane.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),n=this._lastConnectedPosition||this._preferredPositions[0],r=this._getOriginConnectionPoint(t,n),o=this._getOverlayPoint(r,e,i,n);this._setElementPosition(this._pane,e,o,n)}},t.prototype.withScrollableContainers=function(t){this.scrollables=t},t.prototype.withFallbackPosition=function(t,e,i,n){var r=new _(t,e,i,n);return this._preferredPositions.push(r),this},t.prototype.withDirection=function(t){return this._dir=t,this},t.prototype.withOffsetX=function(t){return this._offsetX=t,this},t.prototype.withOffsetY=function(t){return this._offsetY=t,this},t.prototype.withLockedPosition=function(t){return this._positionLocked=t,this},t.prototype.withPositions=function(t){return this._preferredPositions=t.slice(),this},t.prototype.setOrigin=function(t){return this._origin=t.nativeElement,this},t.prototype._getStartX=function(t){return this._isRtl?t.right:t.left},t.prototype._getEndX=function(t){return this._isRtl?t.left:t.right},t.prototype._getOriginConnectionPoint=function(t,e){var i=this._getStartX(t),n=this._getEndX(t);return{x:"center"==e.originX?i+t.width/2:"start"==e.originX?i:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}},t.prototype._getOverlayPoint=function(t,e,i,n){var r,o;r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl?-e.width:0:this._isRtl?0:-e.width,o="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height;var s="undefined"==typeof n.offsetX?this._offsetX:n.offsetX,a="undefined"==typeof n.offsetY?this._offsetY:n.offsetY,l=t.x+r+s,c=t.y+o+a,u=0-l,h=l+e.width-i.width,p=0-c,d=c+e.height-i.height,f=this._subtractOverflows(e.width,u,h)*this._subtractOverflows(e.height,p,d);return{x:l,y:c,fitsInViewport:e.width*e.height===f,visibleArea:f}},t.prototype._getScrollVisibility=function(t){var e=this._origin.getBoundingClientRect(),i=t.getBoundingClientRect(),n=this.scrollables.map(function(t){return t.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:E(e,n),isOriginOutsideView:P(e,n),isOverlayClipped:E(i,n),isOverlayOutsideView:P(i,n)}},t.prototype._setElementPosition=function(t,e,i,n){var r,o="bottom"===n.overlayY?"bottom":"top",s="top"===o?i.y:this._document.documentElement.clientHeight-(i.y+e.height),a="left"===(r="rtl"===this._dir?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left")?i.x:this._document.documentElement.clientWidth-(i.x+e.width);["top","bottom","left","right"].forEach(function(e){return t.style[e]=null}),t.style[o]=s+"px",t.style[r]=a+"px";var l=this._getScrollVisibility(t),c=new b(n,l);this._onPositionChange.next(c)},t.prototype._subtractOverflows=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(t,e){return t-Math.max(e,0)},t)},t}(),R=function(){function t(t){this._document=t,this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height="",this._wrapper=null}return t.prototype.attach=function(t){this._overlayRef=t},t.prototype.top=function(t){return void 0===t&&(t=""),this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this},t.prototype.left=function(t){return void 0===t&&(t=""),this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this},t.prototype.bottom=function(t){return void 0===t&&(t=""),this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this},t.prototype.right=function(t){return void 0===t&&(t=""),this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this},t.prototype.width=function(t){return void 0===t&&(t=""),this._width=t,"100%"===t&&this.left("0px"),this},t.prototype.height=function(t){return void 0===t&&(t=""),this._height=t,"100%"===t&&this.top("0px"),this},t.prototype.centerHorizontally=function(t){return void 0===t&&(t=""),this.left(t),this._justifyContent="center",this},t.prototype.centerVertically=function(t){return void 0===t&&(t=""),this.top(t),this._alignItems="center",this},t.prototype.apply=function(){if(this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement;!this._wrapper&&t.parentNode&&(this._wrapper=this._document.createElement("div"),this._wrapper.classList.add("cdk-global-overlay-wrapper"),t.parentNode.insertBefore(this._wrapper,t),this._wrapper.appendChild(t));var e=t.style,i=t.parentNode.style;e.position=this._cssPosition,e.marginTop=this._topOffset,e.marginLeft=this._leftOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,e.width=this._width,e.height=this._height,i.justifyContent=this._justifyContent,i.alignItems=this._alignItems}},t.prototype.dispose=function(){this._wrapper&&this._wrapper.parentNode&&(this._wrapper.parentNode.removeChild(this._wrapper),this._wrapper=null)},t}(),I=function(){function t(t,e){this._viewportRuler=t,this._document=e}return t.prototype.global=function(){return new R(this._document)},t.prototype.connectedTo=function(t,e,i){return new M(e,i,t,this._viewportRuler,this._document)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:r.g},{type:void 0,decorators:[{type:n.u,args:[o.c]}]}]},t}(),D=function(){function t(t){this._document=t,this._attachedOverlays=[]}return t.prototype.ngOnDestroy=function(){this._unsubscribeFromKeydownEvents()},t.prototype.add=function(t){this._keydownEventSubscription||this._subscribeToKeydownEvents(),this._attachedOverlays.push(t)},t.prototype.remove=function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._unsubscribeFromKeydownEvents()},t.prototype._subscribeToKeydownEvents=function(){var t=this,e=Object(d.a)(this._document.body,"keydown",!0);this._keydownEventSubscription=e.pipe(Object(p.a)(function(){return!!t._attachedOverlays.length})).subscribe(function(e){t._selectOverlayFromEvent(e)._keydownEvents.next(e)})},t.prototype._unsubscribeFromKeydownEvents=function(){this._keydownEventSubscription&&(this._keydownEventSubscription.unsubscribe(),this._keydownEventSubscription=null)},t.prototype._selectOverlayFromEvent=function(t){return this._attachedOverlays.find(function(e){return e.overlayElement===t.target||e.overlayElement.contains(t.target)})||this._attachedOverlays[this._attachedOverlays.length-1]},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[o.c]}]}]},t}();function L(t,e){return t||new D(e)}var k={provide:D,deps:[[new n.G,new n.T,D],o.c],useFactory:L},F=function(){function t(t){this._document=t}return t.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},t.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},t.prototype._createContainer=function(){var t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),this._document.body.appendChild(t),this._containerElement=t},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[o.c]}]}]},t}();function N(t,e){return t||new F(e)}var B={provide:F,deps:[[new n.G,new n.T,F],o.c],useFactory:N},V=0,z=function(){function t(t,e,i,n,r,o,s,a,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=i,this._positionBuilder=n,this._keyboardDispatcher=r,this._appRef=o,this._injector=s,this._ngZone=a,this._document=l}return t.prototype.create=function(t){var e=this._createPaneElement(),i=this._createPortalOutlet(e);return new C(i,e,new y(t),this._ngZone,this._keyboardDispatcher,this._document)},t.prototype.position=function(){return this._positionBuilder},t.prototype._createPaneElement=function(){var t=this._document.createElement("div");return t.id="cdk-overlay-"+V++,t.classList.add("cdk-overlay-pane"),this._overlayContainer.getContainerElement().appendChild(t),t},t.prototype._createPortalOutlet=function(t){return new a.e(t,this._componentFactoryResolver,this._appRef,this._injector)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:S},{type:F},{type:n.k},{type:I},{type:D},{type:n.e},{type:n.x},{type:n.F},{type:void 0,decorators:[{type:n.u,args:[o.c]}]}]},t}(),U=[new _({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new _({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new _({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new _({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"})],j=new n.w("cdk-connected-overlay-scroll-strategy");function G(t){return function(){return t.scrollStrategies.reposition()}}var W={provide:j,deps:[z],useFactory:G},H=function(){function t(t){this.elementRef=t}return t.decorators=[{type:n.n,args:[{selector:"[cdk-overlay-origin], [overlay-origin], [cdkOverlayOrigin]",exportAs:"cdkOverlayOrigin"}]}],t.ctorParameters=function(){return[{type:n.o}]},t}(),X=function(){function t(t,e,i,r,o){this._overlay=t,this._scrollStrategy=r,this._dir=o,this._hasBackdrop=!1,this._backdropSubscription=h.a.EMPTY,this._offsetX=0,this._offsetY=0,this.scrollStrategy=this._scrollStrategy(),this.open=!1,this.backdropClick=new n.r,this.positionChange=new n.r,this.attach=new n.r,this.detach=new n.r,this._templatePortal=new a.h(e,i)}return Object.defineProperty(t.prototype,"offsetX",{get:function(){return this._offsetX},set:function(t){this._offsetX=t,this._position&&this._position.withOffsetX(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this._offsetY},set:function(t){this._offsetY=t,this._position&&this._position.withOffsetY(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=Object(f.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOrigin",{get:function(){return this.origin},set:function(t){this.origin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedPositions",{get:function(){return this.positions},set:function(t){this.positions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOffsetX",{get:function(){return this.offsetX},set:function(t){this.offsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOffsetY",{get:function(){return this.offsetY},set:function(t){this.offsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedWidth",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedHeight",{get:function(){return this.height},set:function(t){this.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedMinWidth",{get:function(){return this.minWidth},set:function(t){this.minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedMinHeight",{get:function(){return this.minHeight},set:function(t){this.minHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedBackdropClass",{get:function(){return this.backdropClass},set:function(t){this.backdropClass=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedScrollStrategy",{get:function(){return this.scrollStrategy},set:function(t){this.scrollStrategy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOpen",{get:function(){return this.open},set:function(t){this.open=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedHasBackdrop",{get:function(){return this.hasBackdrop},set:function(t){this.hasBackdrop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayRef",{get:function(){return this._overlayRef},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir?this._dir.value:"ltr"},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this._destroyOverlay()},t.prototype.ngOnChanges=function(t){this._position&&((t.positions||t._deprecatedPositions)&&this._position.withPositions(this.positions),(t.origin||t._deprecatedOrigin)&&(this._position.setOrigin(this.origin.elementRef),this.open&&this._position.apply())),(t.open||t._deprecatedOpen)&&(this.open?this._attachOverlay():this._detachOverlay())},t.prototype._createOverlay=function(){this.positions&&this.positions.length||(this.positions=U),this._overlayRef=this._overlay.create(this._buildConfig())},t.prototype._buildConfig=function(){var t=this._position=this._createPositionStrategy(),e=new y({positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),e},t.prototype._createPositionStrategy=function(){for(var t=this,e=this.positions[0],i={originX:e.originX,originY:e.originY},n={overlayX:e.overlayX,overlayY:e.overlayY},r=this._overlay.position().connectedTo(this.origin.elementRef,i,n).withOffsetX(this.offsetX).withOffsetY(this.offsetY),o=1;o<this.positions.length;o++)r.withFallbackPosition({originX:this.positions[o].originX,originY:this.positions[o].originY},{overlayX:this.positions[o].overlayX,overlayY:this.positions[o].overlayY});return r.onPositionChange.subscribe(function(e){return t.positionChange.emit(e)}),r},t.prototype._attachOverlay=function(){var t=this;this._overlayRef||(this._createOverlay(),this._overlayRef.keydownEvents().subscribe(function(e){e.keyCode===m.g&&t._detachOverlay()})),this._position.withDirection(this.dir),this._overlayRef.setDirection(this.dir),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop&&(this._backdropSubscription=this._overlayRef.backdropClick().subscribe(function(){t.backdropClick.emit()}))},t.prototype._detachOverlay=function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()},t.prototype._destroyOverlay=function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()},t.decorators=[{type:n.n,args:[{selector:"[cdk-connected-overlay], [connected-overlay], [cdkConnectedOverlay]",exportAs:"cdkConnectedOverlay"}]}],t.ctorParameters=function(){return[{type:z},{type:n.U},{type:n.Z},{type:void 0,decorators:[{type:n.u,args:[j]}]},{type:s.c,decorators:[{type:n.G}]}]},t.propDecorators={origin:[{type:n.y,args:["cdkConnectedOverlayOrigin"]}],positions:[{type:n.y,args:["cdkConnectedOverlayPositions"]}],offsetX:[{type:n.y,args:["cdkConnectedOverlayOffsetX"]}],offsetY:[{type:n.y,args:["cdkConnectedOverlayOffsetY"]}],width:[{type:n.y,args:["cdkConnectedOverlayWidth"]}],height:[{type:n.y,args:["cdkConnectedOverlayHeight"]}],minWidth:[{type:n.y,args:["cdkConnectedOverlayMinWidth"]}],minHeight:[{type:n.y,args:["cdkConnectedOverlayMinHeight"]}],backdropClass:[{type:n.y,args:["cdkConnectedOverlayBackdropClass"]}],scrollStrategy:[{type:n.y,args:["cdkConnectedOverlayScrollStrategy"]}],open:[{type:n.y,args:["cdkConnectedOverlayOpen"]}],hasBackdrop:[{type:n.y,args:["cdkConnectedOverlayHasBackdrop"]}],_deprecatedOrigin:[{type:n.y,args:["origin"]}],_deprecatedPositions:[{type:n.y,args:["positions"]}],_deprecatedOffsetX:[{type:n.y,args:["offsetX"]}],_deprecatedOffsetY:[{type:n.y,args:["offsetY"]}],_deprecatedWidth:[{type:n.y,args:["width"]}],_deprecatedHeight:[{type:n.y,args:["height"]}],_deprecatedMinWidth:[{type:n.y,args:["minWidth"]}],_deprecatedMinHeight:[{type:n.y,args:["minHeight"]}],_deprecatedBackdropClass:[{type:n.y,args:["backdropClass"]}],_deprecatedScrollStrategy:[{type:n.y,args:["scrollStrategy"]}],_deprecatedOpen:[{type:n.y,args:["open"]}],_deprecatedHasBackdrop:[{type:n.y,args:["hasBackdrop"]}],backdropClick:[{type:n.H}],positionChange:[{type:n.H}],attach:[{type:n.H}],detach:[{type:n.H}]},t}(),Y=[z,I,k,r.e,B,W],q=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[s.a,a.g,r.c],exports:[X,H,r.c],declarations:[X,H],providers:[Y,S]}]}],t.ctorParameters=function(){return[]},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(l.b)(e,t),e.prototype._createContainer=function(){var e=this;t.prototype._createContainer.call(this),this._adjustParentForFullscreenChange(),this._addFullscreenChangeListener(function(){return e._adjustParentForFullscreenChange()})},e.prototype._adjustParentForFullscreenChange=function(){this._containerElement&&(this.getFullscreenElement()||document.body).appendChild(this._containerElement)},e.prototype._addFullscreenChangeListener=function(t){document.fullscreenEnabled?document.addEventListener("fullscreenchange",t):document.webkitFullscreenEnabled?document.addEventListener("webkitfullscreenchange",t):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t):document.msFullscreenEnabled&&document.addEventListener("MSFullscreenChange",t)},e.prototype.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[]}}(F)},OSds:function(t,e,i){"use strict";var n=i("Rmdh"),r=i("Yuvf");e.JsonConverter=function(t){t[n.Settings.MAPPER_PROPERTY]=""},e.JsonObject=function(t){t[n.Settings.MAPPING_PROPERTY]=[]},e.JsonProperty=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e,i){var o=i,s=r.Any,a=!1;switch(t.length){case 0:break;case 1:o=t[0];break;case 2:if(void 0===t[1])throw new Error('Fatal error in JsonConvert. It\'s not allowed to explicitely pass "undefined" as second parameter in the @JsonProperty decorator.\n\n\tClass name: \n\t\t'+e.constructor.name+"\n\n\tClass property: \n\t\t"+i+'\n\nUse "Any" to allow any type. You can import this class from "json2typescript".\n\n');o=t[0],s=t[1];break;case 3:o=t[0],s=t[1],a=t[2]}"undefined"==typeof e[n.Settings.MAPPING_PROPERTY]&&(e[n.Settings.MAPPING_PROPERTY]=[]);var l=e.constructor.name;"undefined"==typeof o&&(o=i);var c=new n.MappingOptions;c.classPropertyName=i,c.jsonPropertyName=o,c.isOptional=a||!1,"undefined"!=typeof s&&null!==s&&"undefined"!=typeof s[n.Settings.MAPPER_PROPERTY]?c.customConverter=new s:c.expectedJsonType=s,e[n.Settings.MAPPING_PROPERTY][l+"."+i]=c}}},Oryw:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("AP4T"),r=i("8Ut3"),o=i("Ecq+"),s=i("3iOE"),a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=function(t){function e(e,i){t.call(this),this.array=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return a(e,t),e.create=function(t,i){return new e(t,i)},e.of=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var n=t[t.length-1];Object(s.a)(n)?t.pop():n=null;var a=t.length;return a>1?new e(t,n):1===a?new r.a(t[0],n):new o.a(n)},e.dispatch=function(t){var e=t.array,i=t.index,n=t.count,r=t.subscriber;i>=n?r.complete():(r.next(e[i]),r.closed||(t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.array,n=i.length,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{array:i,index:0,count:n,subscriber:t});for(var o=0;o<n&&!t.closed;o++)t.next(i[o]);t.complete()},e}(n.a)},Osec:function(t,e,i){(e=t.exports=i("INGy")).Stream=e,e.Readable=e,e.Writable=i("6QZ3"),e.Duplex=i("dJzE"),e.Transform=i("C7jF"),e.PassThrough=i("5E84")},OvP2:function(t,e,i){"use strict";var n=function(){function t(){}return t.UUID=function(){if("undefined"!=typeof window&&"undefined"!=typeof window.crypto&&"undefined"!=typeof window.crypto.getRandomValues){var t=new Uint16Array(8);return window.crypto.getRandomValues(t),this.pad4(t[0])+this.pad4(t[1])+"-"+this.pad4(t[2])+"-"+this.pad4(t[3])+"-"+this.pad4(t[4])+"-"+this.pad4(t[5])+this.pad4(t[6])+this.pad4(t[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},t.pad4=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e},t.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t}();e.UUID=n},PAZ8:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("AP4T"),r=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return n.a.of(this.value);case"E":return n.a.throw(this.error);case"C":return n.a.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},"PIb/":function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},PlHj:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){return function(){this.strokeWidth=1,this.strokeColor="rgba(255,255,255,1)",this.dragIconStrokeWidth=1,this.dragIconStrokeColor="rgba(0,0,0,1)",this.dragIconFillColor="rgba(255,255,255,1)"}}()},QEDK:function(t,e,i){"use strict";(function(t,n){var r=i("iw1t"),o=i("SBDi"),s=i("sZAi"),a=i("HqJl"),l=i("6Shc");for(var c in l)e[c]=l[c];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7;function u(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||a.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},u.prototype.write=function(t,e,i,n,r,o,s){return this._write(!0,t,e,i,n,r,o,s)},u.prototype.writeSync=function(t,e,i,n,r,o,s){return this._write(!1,t,e,i,n,r,o,s)},u.prototype._write=function(i,o,s,a,l,c,u,h){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==e.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=t.alloc(0),l=0,a=0),this.strm.avail_in=l,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=u,this.flush=o,!i)return this._process(),this._checkError()?this._afterSync():void 0;var p=this;return n.nextTick(function(){p._process(),p._after()}),this},u.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},u.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},u.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(t,i,n,o,s){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(t>=8&&t<=15,"invalid windowBits"),r(i>=-1&&i<=9,"invalid compression level"),r(n>=1&&n<=9,"invalid memlevel"),r(o===e.Z_FILTERED||o===e.Z_HUFFMAN_ONLY||o===e.Z_RLE||o===e.Z_FIXED||o===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(i,t,n,o,s),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(t,i,n,r,l){switch(this.level=t,this.windowBits=i,this.memLevel=n,this.strategy=r,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=s.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=a.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=u}).call(e,i("v0OU").Buffer,i("1WNV"))},QFDX:function(t,e,i){var n;n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(t,e,n){"use strict";var r;r="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:i("EsP8"),t.exports=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localized=e.animationStarted=e.normalizeWheelEventDelta=e.binarySearchFirstItem=e.watchScroll=e.scrollIntoView=e.getOutputScale=e.approximateFraction=e.roundToDivide=e.getVisibleElements=e.parseQueryString=e.noContextMenuHandler=e.getPDFFileNameFromURL=e.ProgressBar=e.EventBus=e.NullL10n=e.mozL10n=e.RendererType=e.cloneObj=e.VERTICAL_PADDING=e.SCROLLBAR_PADDING=e.MAX_AUTO_SCALE=e.UNKNOWN_SCALE=e.MAX_SCALE=e.MIN_SCALE=e.DEFAULT_SCALE=e.DEFAULT_SCALE_VALUE=e.CSS_UNITS=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s={get:function(t,e,i){return Promise.resolve(function(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,function(t,i){return i in e?e[i]:"{{"+i+"}}"}):t}(i,e))},translate:function(t){return Promise.resolve()}};function a(t,e){var i=0,n=t.length-1;if(0===t.length||!e(t[n]))return t.length;if(e(t[i]))return i;for(;i<n;){var r=i+n>>1;e(t[r])?n=r:i=r+1}return i}r.PDFJS.disableFullscreen=void 0!==r.PDFJS.disableFullscreen&&r.PDFJS.disableFullscreen,r.PDFJS.useOnlyCssZoom=void 0!==r.PDFJS.useOnlyCssZoom&&r.PDFJS.useOnlyCssZoom,r.PDFJS.maxCanvasPixels=void 0===r.PDFJS.maxCanvasPixels?16777216:r.PDFJS.maxCanvasPixels,r.PDFJS.disableHistory=void 0!==r.PDFJS.disableHistory&&r.PDFJS.disableHistory,r.PDFJS.disableTextLayer=void 0!==r.PDFJS.disableTextLayer&&r.PDFJS.disableTextLayer,r.PDFJS.ignoreCurrentPositionOnZoom=void 0!==r.PDFJS.ignoreCurrentPositionOnZoom&&r.PDFJS.ignoreCurrentPositionOnZoom,r.PDFJS.locale=void 0===r.PDFJS.locale&&"undefined"!=typeof navigator?navigator.language:r.PDFJS.locale;var l=new Promise(function(t){window.requestAnimationFrame(t)}),c=Promise.resolve(),u=function(){function t(){o(this,t),this._listeners=Object.create(null)}return n(t,[{key:"on",value:function(t,e){var i=this._listeners[t];i||(i=[],this._listeners[t]=i),i.push(e)}},{key:"off",value:function(t,e){var i=this._listeners[t],n=void 0;!i||(n=i.indexOf(e))<0||i.splice(n,1)}},{key:"dispatch",value:function(t){var e=this._listeners[t];if(e&&0!==e.length){var i=Array.prototype.slice.call(arguments,1);e.slice(0).forEach(function(t){t.apply(null,i)})}}}]),t}();var h=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.height,r=i.width,s=i.units;o(this,t),this.visible=!0,this.div=document.querySelector(e+" .progress"),this.bar=this.div.parentNode,this.height=n||100,this.width=r||100,this.units=s||"%",this.div.style.height=this.height+this.units,this.percent=0}return n(t,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units}},{key:"setWidth",value:function(t){if(t){var e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&this.bar.setAttribute("style","width: calc(100% - "+e+"px);")}}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function(){return this._percent},set:function(t){var e,i,n;this._indeterminate=isNaN(t),this._percent=(e=t,i=0,n=100,Math.min(Math.max(e,i),n)),this._updateBar()}}]),t}();e.CSS_UNITS=96/72,e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.MIN_SCALE=.25,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5,e.cloneObj=function(t){var e=Object.create(null);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.RendererType={CANVAS:"canvas",SVG:"svg"},e.mozL10n=void 0,e.NullL10n=s,e.EventBus=u,e.ProgressBar=h,e.getPDFFileNameFromURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(function(t){for(var e=0,i=t.length;e<i&&""===t[e].trim();)e++;return"data:"===t.substr(e,5).toLowerCase()}(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),e;var i=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&-1!==(r=r[0]).indexOf("%"))try{r=i.exec(decodeURIComponent(r))[0]}catch(t){}return r||e},e.noContextMenuHandler=function(t){t.preventDefault()},e.parseQueryString=function(t){for(var e=t.split("&"),i=Object.create(null),n=0,r=e.length;n<r;++n){var o=e[n].split("="),s=o[0].toLowerCase(),a=o.length>1?o[1]:null;i[decodeURIComponent(s)]=decodeURIComponent(a)}return i},e.getVisibleElements=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.scrollTop,r=n+t.clientHeight,o=t.scrollLeft,s=o+t.clientWidth,l=[],c=void 0,u=void 0,h=void 0,p=void 0,d=void 0,f=void 0,m=0===e.length?0:a(e,function(t){var e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>n}),g=e.length;m<g&&(h=(u=(c=e[m]).div).offsetTop+u.clientTop,p=u.clientHeight,!(h>r));m++)(f=u.offsetLeft+u.clientLeft)+u.clientWidth<o||f>s||(d=100*(p-(Math.max(0,n-h)+Math.max(0,h+p-r)))/p|0,l.push({id:c.id,x:f,y:h,view:c,percent:d}));var y=l[0],_=l[l.length-1];return i&&l.sort(function(t,e){var i=t.percent-e.percent;return Math.abs(i)>.001?-i:t.id-e.id}),{first:y,last:_,views:l}},e.roundToDivide=function(t,e){var i=t%e;return 0===i?t:Math.round(t-i+e)},e.approximateFraction=function(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var i=t>1?e:t,n=0,r=1,o=1,s=1;;){var a=n+o,l=r+s;if(l>8)break;i<=a/l?(o=a,s=l):(n=a,r=l)}return i-n/r<o/s-i?i===t?[n,r]:[r,n]:i===t?[o,s]:[s,o]},e.getOutputScale=function(t){var e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return{sx:e,sy:e,scaled:1!==e}},e.scrollIntoView=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.offsetParent;if(n){for(var r=t.offsetTop+t.clientTop,o=t.offsetLeft+t.clientLeft;n.clientHeight===n.scrollHeight||i&&"hidden"===getComputedStyle(n).overflow;)if(n.dataset._scaleY&&(r/=n.dataset._scaleY,o/=n.dataset._scaleX),r+=n.offsetTop,o+=n.offsetLeft,!(n=n.offsetParent))return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(o+=e.left,n.scrollLeft=o)),n.scrollTop=r}else console.error("offsetParent is not set -- cannot scroll")},e.watchScroll=function(t,e){var i=function(i){r||(r=window.requestAnimationFrame(function(){r=null;var i=t.scrollTop,o=n.lastY;i!==o&&(n.down=i>o),n.lastY=i,e(n)}))},n={down:!0,lastY:t.scrollTop,_eventHandler:i},r=null;return t.addEventListener("scroll",i,!0),n},e.binarySearchFirstItem=a,e.normalizeWheelEventDelta=function(t){var e=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY),i=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(e=-e),0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e},e.animationStarted=l,e.localized=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlobalEventBus=e.attachDOMEventsToEventBus=void 0;var n=i(1);function r(t){t.on("documentload",function(){var t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),t.on("pagerendered",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagerendered",!0,!0,{pageNumber:t.pageNumber,cssTransform:t.cssTransform}),t.source.div.dispatchEvent(e)}),t.on("textlayerrendered",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t.pageNumber}),t.source.textLayerDiv.dispatchEvent(e)}),t.on("pagechange",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("pagechange",!0,!0,window,0),e.pageNumber=t.pageNumber,t.source.container.dispatchEvent(e)}),t.on("pagesinit",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesinit",!0,!0,null),t.source.container.dispatchEvent(e)}),t.on("pagesloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t.pagesCount}),t.source.container.dispatchEvent(e)}),t.on("scalechange",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("scalechange",!0,!0,window,0),e.scale=t.scale,e.presetValue=t.presetValue,t.source.container.dispatchEvent(e)}),t.on("updateviewarea",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("updateviewarea",!0,!0,window,0),e.location=t.location,t.source.container.dispatchEvent(e)}),t.on("find",function(t){if(t.source!==window){var e=document.createEvent("CustomEvent");e.initCustomEvent("find"+t.type,!0,!0,{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:t.caseSensitive,highlightAll:t.highlightAll,findPrevious:t.findPrevious}),window.dispatchEvent(e)}}),t.on("attachmentsloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t.attachmentsCount}),t.source.container.dispatchEvent(e)}),t.on("sidebarviewchanged",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("sidebarviewchanged",!0,!0,{view:t.view}),t.source.outerContainer.dispatchEvent(e)}),t.on("pagemode",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagemode",!0,!0,{mode:t.mode}),t.source.pdfViewer.container.dispatchEvent(e)}),t.on("namedaction",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("namedaction",!0,!0,{action:t.action}),t.source.pdfViewer.container.dispatchEvent(e)}),t.on("presentationmodechanged",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("presentationmodechanged",!0,!0,{active:t.active,switchInProgress:t.switchInProgress}),window.dispatchEvent(e)}),t.on("outlineloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t.outlineCount}),t.source.container.dispatchEvent(e)})}var o=null;e.attachDOMEventsToEventBus=r,e.getGlobalEventBus=function(){return o||(r(o=new n.EventBus),o)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),s=i(1);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).eventBus;a(this,t),this.eventBus=e||(0,o.getGlobalEventBus)(),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return r(t,[{key:"setDocument",value:function(t,e){this.baseUrl=e,this.pdfDocument=t,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setHistory",value:function(t){this.pdfHistory=t}},{key:"navigateTo",value:function(t){var e=this;new Promise(function(i,n){"string"!=typeof t?i({namedDest:"",explicitDest:t}):e.pdfDocument.getDestination(t).then(function(e){i({namedDest:t,explicitDest:e})})}).then(function(i){i.explicitDest instanceof Array?function i(n){var r=n.namedDest,o=n.explicitDest,s=o[0],a=void 0;if(s instanceof Object){if(null===(a=e._cachedPageNumber(s)))return void e.pdfDocument.getPageIndex(s).then(function(t){e.cachePageRef(t+1,s),i({namedDest:r,explicitDest:o})}).catch(function(){console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid page reference, for dest="'+t+'".')})}else{if((0|s)!==s)return void console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid destination reference, for dest="'+t+'".');a=s+1}!a||a<1||a>e.pagesCount?console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid page number, for dest="'+t+'".'):(e.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:o}),e.pdfHistory&&e.pdfHistory.push({dest:o,hash:r,page:a}))}(i):console.error('PDFLinkService.navigateTo: "'+i.explicitDest+'" is not a valid destination array, for dest="'+t+'".')})}},{key:"getDestinationHash",value:function(t){if("string"==typeof t)return this.getAnchorUrl("#"+escape(t));if(t instanceof Array){var e=JSON.stringify(t);return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(t){return(this.baseUrl||"")+t}},{key:"setHash",value:function(t){var e=void 0,i=void 0;if(t.indexOf("=")>=0){var r=(0,s.parseQueryString)(t);if("search"in r&&this.eventBus.dispatch("findfromurlhash",{source:this,query:r.search.replace(/"/g,""),phraseSearch:"true"===r.phrase}),"nameddest"in r)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(r.nameddest),void this.navigateTo(r.nameddest);if("page"in r&&(e=0|r.page||1),"zoom"in r){var o=r.zoom.split(","),a=o[0],l=parseFloat(a);-1===a.indexOf("Fit")?i=[null,{name:"XYZ"},o.length>1?0|o[1]:null,o.length>2?0|o[2]:null,l?l/100:a]:"Fit"===a||"FitB"===a?i=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?i=[null,{name:a},o.length>1?0|o[1]:null]:"FitR"===a?5!==o.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:a},0|o[1],0|o[2],0|o[3],0|o[4]]:console.error('PDFLinkService.setHash: "'+a+'" is not a valid zoom value.')}i?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:i,allowNegativeOffset:!0}):e&&(this.page=e),"pagemode"in r&&this.eventBus.dispatch("pagemode",{source:this,mode:r.pagemode})}else{/^\d+$/.test(t)&&t<=this.pagesCount&&(console.warn('PDFLinkService_setHash: specifying a page number directly after the hash symbol (#) is deprecated, please use the "#page='+t+'" form instead.'),this.page=0|t),i=unescape(t);try{(i=JSON.parse(i))instanceof Array||(i=i.toString())}catch(t){}if("string"==typeof i||function(t){if(!(t instanceof Array))return!1;var e=t.length,i=!0;if(e<2)return!1;var r=t[0];if(!("object"===("undefined"==typeof r?"undefined":n(r))&&"number"==typeof r.num&&(0|r.num)===r.num&&"number"==typeof r.gen&&(0|r.gen)===r.gen||"number"==typeof r&&(0|r)===r&&r>=0))return!1;var o=t[1];if("object"!==("undefined"==typeof o?"undefined":n(o))||"string"!=typeof o.name)return!1;switch(o.name){case"XYZ":if(5!==e)return!1;break;case"Fit":case"FitB":return 2===e;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==e)return!1;break;case"FitR":if(6!==e)return!1;i=!1;break;default:return!1}for(var s=2;s<e;s++){var a=t[s];if(!("number"==typeof a||i&&null===a))return!1}return!0}(i))return this.pdfHistory&&this.pdfHistory.updateNextHashParam(i),void this.navigateTo(i);console.error('PDFLinkService.setHash: "'+unescape(t)+'" is not a valid destination.')}}},{key:"executeNamedAction",value:function(t){switch(t){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"onFileAttachmentAnnotation",value:function(t){var e=t.id,i=t.filename,n=t.content;this.eventBus.dispatch("fileattachmentannotation",{source:this,id:e,filename:i,content:n})}},{key:"cachePageRef",value:function(t,e){var i=e.num+" "+e.gen+" R";this._pagesRefCache[i]=t}},{key:"_cachedPageNumber",value:function(t){var e=t.num+" "+t.gen+" R";return this._pagesRefCache&&this._pagesRefCache[e]||null}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(t){this.pdfViewer.currentPageNumber=t}}]),t}();var c=function(){function t(){a(this,t)}return r(t,[{key:"navigateTo",value:function(t){}},{key:"getDestinationHash",value:function(t){return"#"}},{key:"getAnchorUrl",value:function(t){return"#"}},{key:"setHash",value:function(t){}},{key:"executeNamedAction",value:function(t){}},{key:"onFileAttachmentAnnotation",value:function(t){t.id,t.filename,t.content}},{key:"cachePageRef",value:function(t,e){}},{key:"page",get:function(){return 0},set:function(t){}}]),t}();e.PDFLinkService=l,e.SimpleLinkService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultAnnotationLayerFactory=e.AnnotationLayerBuilder=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),o=i(1),s=i(3);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(e){var i=e.pageDiv,n=e.pdfPage,r=e.linkService,s=e.downloadManager,l=e.renderInteractiveForms,c=void 0!==l&&l,u=e.l10n,h=void 0===u?o.NullL10n:u;a(this,t),this.pageDiv=i,this.pdfPage=n,this.linkService=r,this.downloadManager=s,this.renderInteractiveForms=c,this.l10n=h,this.div=null}return n(t,[{key:"render",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:i}).then(function(i){var n={viewport:t.clone({dontFlip:!0}),div:e.div,annotations:i,page:e.pdfPage,renderInteractiveForms:e.renderInteractiveForms,linkService:e.linkService,downloadManager:e.downloadManager};if(e.div)r.AnnotationLayer.update(n);else{if(0===i.length)return;e.div=document.createElement("div"),e.div.className="annotationLayer",e.pageDiv.appendChild(e.div),n.div=e.div,r.AnnotationLayer.render(n),e.l10n.translate(e.div)}})}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),t}(),c=function(){function t(){a(this,t)}return n(t,[{key:"createAnnotationLayerBuilder",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.NullL10n;return new l({pageDiv:t,pdfPage:e,renderInteractiveForms:i,linkService:new s.SimpleLinkService,l10n:n})}}]),t}();e.AnnotationLayerBuilder=l,e.DefaultAnnotationLayerFactory=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),o=i(0),s=i(2),a=i(7);var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=e.container,n=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||r.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this.hasRestrictedScaling=!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.eventBus=e.eventBus||(0,s.getGlobalEventBus)(),this.renderingQueue=e.renderingQueue,this.textLayerFactory=e.textLayerFactory,this.annotationLayerFactory=e.annotationLayerFactory,this.renderer=e.renderer||r.RendererType.CANVAS,this.l10n=e.l10n||r.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.error=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;var o=document.createElement("div");o.className="page",o.style.width=Math.floor(this.viewport.width)+"px",o.style.height=Math.floor(this.viewport.height)+"px",o.setAttribute("data-page-number",this.id),this.div=o,i.appendChild(o)}return n(t,[{key:"setPdfPage",value:function(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;var e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport(this.scale*r.CSS_UNITS,e),this.stats=t.stats,this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&(this.pdfPage.cleanup(),this.pdfPage=null)}},{key:"_resetZoomLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var e=this.zoomLayer.firstChild;this.paintedViewportMap.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering();var i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";for(var n=i.childNodes,r=t&&this.zoomLayer||null,o=e&&this.annotationLayer&&this.annotationLayer.div||null,s=n.length-1;s>=0;s--){var a=n[s];r!==a&&o!==a&&i.removeChild(a)}i.removeAttribute("data-loaded"),o?this.annotationLayer.hide():this.annotationLayer=null,r||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",i.appendChild(this.loadingIconDiv)}},{key:"update",value:function(t,e){this.scale=t||this.scale,"undefined"!=typeof e&&(this.rotation=e);var i=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*r.CSS_UNITS,rotation:i}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});var n=!1;if(this.canvas&&o.PDFJS.maxCanvasPixels>0){var s=this.outputScale;(Math.floor(this.viewport.width)*s.sx|0)*(Math.floor(this.viewport.height)*s.sy|0)>o.PDFJS.maxCanvasPixels&&(n=!0)}if(this.canvas){if(o.PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&n)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function(){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null)}},{key:"cssTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.viewport.width,n=this.viewport.height,r=this.div;t.style.width=t.parentNode.style.width=r.style.width=Math.floor(i)+"px",t.style.height=t.parentNode.style.height=r.style.height=Math.floor(n)+"px";var s=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,a=Math.abs(s),l=1,c=1;90!==a&&270!==a||(l=n/i,c=i/n);var u="rotate("+s+"deg) scale("+l+","+c+")";if(o.CustomStyle.setProp("transform",t,u),this.textLayer){var h=this.textLayer.viewport,p=this.viewport.rotation-h.rotation,d=Math.abs(p),f=i/h.width;90!==d&&270!==d||(f=i/h.height);var m=this.textLayer.textLayerDiv,g=void 0,y=void 0;switch(d){case 0:g=y=0;break;case 90:g=0,y="-"+m.style.height;break;case 180:g="-"+m.style.width,y="-"+m.style.height;break;case 270:g="-"+m.style.width,y=0;break;default:console.error("Bad rotation value.")}o.CustomStyle.setProp("transform",m,"rotate("+d+"deg) scale("+f+", "+f+") translate("+g+", "+y+")"),o.CustomStyle.setProp("transformOrigin",m,"0% 0%")}e&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")}},{key:"getPagePoint",value:function(t,e){return this.viewport.convertToPdfPoint(t,e)}},{key:"draw",value:function(){var t=this;if(this.renderingState!==a.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset()),!this.pdfPage)return this.renderingState=a.RenderingStates.FINISHED,Promise.reject(new Error("Page is not loaded"));this.renderingState=a.RenderingStates.RUNNING;var e=this.pdfPage,i=this.div,n=document.createElement("div");n.style.width=i.style.width,n.style.height=i.style.height,n.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?i.insertBefore(n,this.annotationLayer.div):i.appendChild(n);var s=null;if(this.textLayerFactory){var l=document.createElement("div");l.className="textLayer",l.style.width=n.style.width,l.style.height=n.style.height,this.annotationLayer&&this.annotationLayer.div?i.insertBefore(l,this.annotationLayer.div):i.appendChild(l),s=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.enhanceTextSelection)}this.textLayer=s;var c=null;this.renderingQueue&&(c=function(e){if(!t.renderingQueue.isHighestPriority(t))return t.renderingState=a.RenderingStates.PAUSED,void(t.resume=function(){t.renderingState=a.RenderingStates.RUNNING,e()});e()});var u=function(n){return h===t.paintTask&&(t.paintTask=null),"cancelled"===n||n instanceof o.RenderingCancelledException?(t.error=null,Promise.resolve(void 0)):(t.renderingState=a.RenderingStates.FINISHED,t.loadingIconDiv&&(i.removeChild(t.loadingIconDiv),delete t.loadingIconDiv),t._resetZoomLayer(!0),t.error=n,t.stats=e.stats,t.onAfterDraw&&t.onAfterDraw(),t.eventBus.dispatch("pagerendered",{source:t,pageNumber:t.id,cssTransform:!1}),n?Promise.reject(n):Promise.resolve(void 0))},h=this.renderer===r.RendererType.SVG?this.paintOnSvg(n):this.paintOnCanvas(n);h.onRenderContinue=c,this.paintTask=h;var p=h.promise.then(function(){return u(null).then(function(){if(s){var t=e.streamTextContent({normalizeWhitespace:!0});s.setTextContentStream(t),s.render()}})},function(t){return u(t)});return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(i,e,this.renderInteractiveForms,this.l10n)),this.annotationLayer.render(this.viewport,"display")),i.setAttribute("data-loaded",!0),this.onBeforeDraw&&this.onBeforeDraw(),p}},{key:"paintOnCanvas",value:function(t){var e=(0,o.createPromiseCapability)(),i={promise:e.promise,onRenderContinue:function(t){t()},cancel:function(){y.cancel()}},n=this.viewport,s=document.createElement("canvas");s.id=this.renderingId,s.setAttribute("hidden","hidden");var a=!0,l=function(){a&&(s.removeAttribute("hidden"),a=!1)};t.appendChild(s),this.canvas=s,s.mozOpaque=!0;var c=s.getContext("2d",{alpha:!1}),u=(0,r.getOutputScale)(c);if(this.outputScale=u,o.PDFJS.useOnlyCssZoom){var h=n.clone({scale:r.CSS_UNITS});u.sx*=h.width/n.width,u.sy*=h.height/n.height,u.scaled=!0}if(o.PDFJS.maxCanvasPixels>0){var p=n.width*n.height,d=Math.sqrt(o.PDFJS.maxCanvasPixels/p);u.sx>d||u.sy>d?(u.sx=d,u.sy=d,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var f=(0,r.approximateFraction)(u.sx),m=(0,r.approximateFraction)(u.sy);s.width=(0,r.roundToDivide)(n.width*u.sx,f[0]),s.height=(0,r.roundToDivide)(n.height*u.sy,m[0]),s.style.width=(0,r.roundToDivide)(n.width,f[1])+"px",s.style.height=(0,r.roundToDivide)(n.height,m[1])+"px",this.paintedViewportMap.set(s,n);var g={canvasContext:c,transform:u.scaled?[u.sx,0,0,u.sy,0,0]:null,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms},y=this.pdfPage.render(g);return y.onContinue=function(t){l(),i.onRenderContinue?i.onRenderContinue(t):t()},y.promise.then(function(){l(),e.resolve(void 0)},function(t){l(),e.reject(t)}),i}},{key:"paintOnSvg",value:function(t){var e=this,i=!1,n=function(){if(i)throw o.PDFJS.pdfjsNext?new o.RenderingCancelledException("Rendering cancelled, page "+e.id,"svg"):"cancelled"},s=this.pdfPage,l=this.viewport.clone({scale:r.CSS_UNITS});return{promise:s.getOperatorList().then(function(i){return n(),new o.SVGGraphics(s.commonObjs,s.objs).getSVG(i,l).then(function(i){n(),e.svg=i,e.paintedViewportMap.set(i,l),i.style.width=t.style.width,i.style.height=t.style.height,e.renderingState=a.RenderingStates.FINISHED,t.appendChild(i)})}),onRenderContinue:function(t){t()},cancel:function(){i=!0}}}},{key:"setPageLabel",value:function(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}}]),t}();e.PDFPageView=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTextLayerFactory=e.TextLayerBuilder=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(2),o=i(0);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){var i=e.textLayerDiv,n=e.eventBus,o=e.pageIndex,a=e.viewport,l=e.findController,c=void 0===l?null:l,u=e.enhanceTextSelection,h=void 0!==u&&u;s(this,t),this.textLayerDiv=i,this.eventBus=n||(0,r.getGlobalEventBus)(),this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=o,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=a,this.textDivs=[],this.findController=c,this.textLayerRenderTask=null,this.enhanceTextSelection=h,this._bindMouse()}return n(t,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var i=document.createDocumentFragment();this.textLayerRenderTask=(0,o.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){t.textLayerDiv.appendChild(i),t._finishRendering(),t.updateMatches()},function(t){})}}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null)}},{key:"setTextContentStream",value:function(t){this.cancel(),this.textContentStream=t}},{key:"setTextContent",value:function(t){this.cancel(),this.textContent=t}},{key:"convertMatches",value:function(t,e){var i=0,n=0,r=this.textContentItemsStr,o=r.length-1,s=null===this.findController?0:this.findController.state.query.length,a=[];if(!t)return a;for(var l=0,c=t.length;l<c;l++){for(var u=t[l];i!==o&&u>=n+r[i].length;)n+=r[i].length,i++;i===r.length&&console.error("Could not find a matching mapping");var h={begin:{divIdx:i,offset:u-n}};for(u+=e?e[l]:s;i!==o&&u>n+r[i].length;)n+=r[i].length,i++;h.end={divIdx:i,offset:u-n},a.push(h)}return a}},{key:"renderMatches",value:function(t){if(0!==t.length){var e=this.textContentItemsStr,i=this.textDivs,n=null,r=this.pageIdx,o=null!==this.findController&&r===this.findController.selected.pageIdx,s=null===this.findController?-1:this.findController.selected.matchIdx,a={divIdx:-1,offset:void 0},l=s,c=l+1;if(null!==this.findController&&this.findController.state.highlightAll)l=0,c=t.length;else if(!o)return;for(var u=l;u<c;u++){var h=t[u],p=h.begin,d=h.end,f=o&&u===s?" selected":"";if(this.findController&&this.findController.updateMatchPosition(r,u,i,p.divIdx),n&&p.divIdx===n.divIdx?_(n.divIdx,n.offset,p.offset):(null!==n&&_(n.divIdx,n.offset,a.offset),y(p)),p.divIdx===d.divIdx)_(p.divIdx,p.offset,d.offset,"highlight"+f);else{_(p.divIdx,p.offset,a.offset,"highlight begin"+f);for(var m=p.divIdx+1,g=d.divIdx;m<g;m++)i[m].className="highlight middle"+f;y(d,"highlight end"+f)}n=d}n&&_(n.divIdx,n.offset,a.offset)}function y(t,e){var n=t.divIdx;i[n].textContent="",_(n,0,t.offset,e)}function _(t,n,r,o){var s=i[t],a=e[t].substring(n,r),l=document.createTextNode(a);if(o){var c=document.createElement("span");return c.className=o,c.appendChild(l),void s.appendChild(c)}s.appendChild(l)}}},{key:"updateMatches",value:function(){if(this.renderingDone){for(var t=this.matches,e=this.textDivs,i=this.textContentItemsStr,n=-1,r=0,o=t.length;r<o;r++){for(var s=t[r],a=Math.max(n,s.begin.divIdx),l=s.end.divIdx;a<=l;a++){var c=e[a];c.textContent=i[a],c.className=""}n=s.end.divIdx+1}if(null!==this.findController&&this.findController.active){var u=void 0,h=void 0;null!==this.findController&&(u=this.findController.pageMatches[this.pageIdx]||null,h=this.findController.pageMatchesLength&&this.findController.pageMatchesLength[this.pageIdx]||null),this.matches=this.convertMatches(u,h),this.renderMatches(this.matches)}}}},{key:"_bindMouse",value:function(){var t=this,e=this.textLayerDiv,i=null;e.addEventListener("mousedown",function(n){if(t.enhanceTextSelection&&t.textLayerRenderTask)return t.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));var r=e.querySelector(".endOfContent");if(r){var o=n.target!==e;if(o=o&&"none"!==window.getComputedStyle(r).getPropertyValue("-moz-user-select")){var s=e.getBoundingClientRect(),a=Math.max(0,(n.pageY-s.top)/s.height);r.style.top=(100*a).toFixed(2)+"%"}r.classList.add("active")}}),e.addEventListener("mouseup",function(){if(t.enhanceTextSelection&&t.textLayerRenderTask)i=setTimeout(function(){t.textLayerRenderTask&&t.textLayerRenderTask.expandTextDivs(!1),i=null},300);else{var n=e.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))}})}}]),t}(),l=function(){function t(){s(this,t)}return n(t,[{key:"createTextLayerBuilder",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new a({textLayerDiv:t,pageIndex:e,viewport:i,enhanceTextSelection:n})}}]),t}();e.TextLayerBuilder=a,e.DefaultTextLayerFactory=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return n(t,[{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function(t){return this.highestPriorityPage===t.renderingId}},{key:"renderHighestPriority",value:function(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(t,e,i){var n=t.views,r=n.length;if(0===r)return!1;for(var o=0;o<r;++o){var s=n[o].view;if(!this.isViewFinished(s))return s}if(i){var a=t.last.id;if(e[a]&&!this.isViewFinished(e[a]))return e[a]}else{var l=t.first.id-2;if(e[l]&&!this.isViewFinished(e[l]))return e[l]}return null}},{key:"isViewFinished",value:function(t){return t.renderingState===r.FINISHED}},{key:"renderView",value:function(t){var e=this;switch(t.renderingState){case r.FINISHED:return!1;case r.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case r.RUNNING:this.highestPriorityPage=t.renderingId;break;case r.INITIAL:this.highestPriorityPage=t.renderingId;var i=function(){e.renderHighestPriority()};t.draw().then(i,i)}return!0}}]),t}();e.RenderingStates=r,e.PDFRenderingQueue=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0);function o(t,e){var i=document.createElement("a");if(i.click)i.href=t,i.target="_parent","download"in i&&(i.download=e),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&t.split("#")[0]===window.location.href.split("#")[0]){var n=-1===t.indexOf("?")?"?":"&";t=t.replace(/#|$/,n+"$&")}window.open(t,"_parent")}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"downloadUrl",value:function(t,e){(0,r.createValidAbsoluteUrl)(t,"http://example.com")&&o(t+"#pdfjs.action=download",e)}},{key:"downloadData",value:function(t,e,i){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([t],{type:i}),e);o((0,r.createObjectURL)(t,i,r.PDFJS.disableCreateObjectURL),e)}},{key:"download",value:function(t,e,i){navigator.msSaveBlob?navigator.msSaveBlob(t,i)||this.downloadUrl(e,i):r.PDFJS.disableCreateObjectURL?this.downloadUrl(e,i):o(URL.createObjectURL(t),i)}}]),t}();e.DownloadManager=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(13);var r=document.webL10n,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._lang=e,this._ready=new Promise(function(t,i){r.setLanguage(e,function(){t(r)})})}return n(t,[{key:"getDirection",value:function(){return this._ready.then(function(t){return t.getDirection()})}},{key:"get",value:function(t,e,i){return this._ready.then(function(n){return n.get(t,e,i)})}},{key:"translate",value:function(t){return this._ready.then(function(e){return e.translate(t)})}}]),t}();e.GenericL10n=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),o=i(1);var s={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},a={"\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},l=function(){function t(e){var i=e.pdfViewer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=i,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();var n=Object.keys(a).join("");this.normalizationRegex=new RegExp("["+n+"]","g")}return n(t,[{key:"reset",value:function(){var t=this;this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this._firstPagePromise=new Promise(function(e){t.resolveFirstPage=e})}},{key:"normalize",value:function(t){return t.replace(this.normalizationRegex,function(t){return a[t]})}},{key:"_prepareMatches",value:function(t,e,i){function n(t,e){var i=t[e],n=t[e+1];if(e<t.length-1&&i.match===n.match)return i.skipped=!0,!0;for(var r=e-1;r>=0;r--){var o=t[r];if(!o.skipped){if(o.match+o.matchLength<i.match)break;if(o.match+o.matchLength>=i.match+i.matchLength)return i.skipped=!0,!0}}return!1}t.sort(function(t,e){return t.match===e.match?t.matchLength-e.matchLength:t.match-e.match});for(var r=0,o=t.length;r<o;r++)n(t,r)||(e.push(t[r].match),i.push(t[r].matchLength))}},{key:"calcFindPhraseMatch",value:function(t,e,i){for(var n=[],r=t.length,o=-r;-1!==(o=i.indexOf(t,o+r));)n.push(o);this.pageMatches[e]=n}},{key:"calcFindWordMatch",value:function(t,e,i){for(var n=[],r=t.match(/\S+/g),o=0,s=r.length;o<s;o++)for(var a=r[o],l=a.length,c=-l;-1!==(c=i.indexOf(a,c+l));)n.push({match:c,matchLength:l,skipped:!1});this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[e]=[],this.pageMatches[e]=[],this._prepareMatches(n,this.pageMatches[e],this.pageMatchesLength[e])}},{key:"calcFindMatch",value:function(t){var e=this.normalize(this.pageContents[t]),i=this.normalize(this.state.query),n=this.state.caseSensitive,r=this.state.phraseSearch;0!==i.length&&(n||(e=e.toLowerCase(),i=i.toLowerCase()),r?this.calcFindPhraseMatch(i,t,e):this.calcFindWordMatch(i,t,e),this.updatePage(t),this.resumePageIdx===t&&(this.resumePageIdx=null,this.nextPageMatch()),this.pageMatches[t].length>0&&(this.matchCount+=this.pageMatches[t].length,this.updateUIResultsCount()))}},{key:"extractText",value:function(){var t=this;if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents.length=0;for(var e=Promise.resolve(),i=function(i,n){var o=(0,r.createPromiseCapability)();t.extractTextPromises[i]=o.promise,e=e.then(function(){return t.pdfViewer.getPageTextContent(i).then(function(e){for(var n=e.items,r=[],s=0,a=n.length;s<a;s++)r.push(n[s].str);t.pageContents[i]=r.join(""),o.resolve(i)},function(e){console.error("Unable to get page "+(i+1)+" text content",e),t.pageContents[i]="",o.resolve(i)})})},n=0,o=this.pdfViewer.pagesCount;n<o;n++)i(n)}}},{key:"executeCommand",value:function(t,e){var i=this;null!==this.state&&"findagain"===t||(this.dirtyMatch=!0),this.state=e,this.updateUIState(s.PENDING),this._firstPagePromise.then(function(){i.extractText(),clearTimeout(i.findTimeout),"find"===t?i.findTimeout=setTimeout(i.nextMatch.bind(i),250):i.nextMatch()})}},{key:"updatePage",value:function(t){this.selected.pageIdx===t&&(this.pdfViewer.currentPageNumber=t+1);var e=this.pdfViewer.getPageView(t);e.textLayer&&e.textLayer.updateMatches()}},{key:"nextMatch",value:function(){var t=this,e=this.state.findPrevious,i=this.pdfViewer.currentPageNumber-1,n=this.pdfViewer.pagesCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=i,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var r=0;r<n;r++)this.updatePage(r),r in this.pendingFindMatches||(this.pendingFindMatches[r]=!0,this.extractTextPromises[r].then(function(e){delete t.pendingFindMatches[e],t.calcFindMatch(e)}))}if(""!==this.state.query){if(!this.resumePageIdx){var o=this.offset;if(this.pagesToSearch=n,null!==o.matchIdx){var a=this.pageMatches[o.pageIdx].length;if(!e&&o.matchIdx+1<a||e&&o.matchIdx>0)return this.hadMatch=!0,o.matchIdx=e?o.matchIdx-1:o.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(e)}this.nextPageMatch()}}else this.updateUIState(s.FOUND)}},{key:"matchesReady",value:function(t){var e=this.offset,i=t.length,n=this.state.findPrevious;return i?(this.hadMatch=!0,e.matchIdx=n?i-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(n),!!(e.wrapped&&(e.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))}},{key:"updateMatchPosition",value:function(t,e,i,n){if(this.selected.matchIdx===e&&this.selected.pageIdx===t){var r={top:-50,left:-400};(0,o.scrollIntoView)(i[n],r,!0)}}},{key:"nextPageMatch",value:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var e=this.offset.pageIdx;if(!(t=this.pageMatches[e])){this.resumePageIdx=e;break}}while(!this.matchesReady(t))}},{key:"advanceOffsetPage",value:function(t){var e=this.offset,i=this.extractTextPromises.length;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this.pagesToSearch--,(e.pageIdx>=i||e.pageIdx<0)&&(e.pageIdx=t?i-1:0,e.wrapped=!0)}},{key:"updateMatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=s.NOT_FOUND,i=this.offset.wrapped;if(this.offset.wrapped=!1,t){var n=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,e=i?s.WRAPPED:s.FOUND,-1!==n&&n!==this.selected.pageIdx&&this.updatePage(n)}this.updateUIState(e,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)}},{key:"updateUIResultsCount",value:function(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)}},{key:"updateUIState",value:function(t,e){this.onUpdateState&&this.onUpdateState(t,e,this.matchCount)}}]),t}();e.FindState=s,e.PDFFindController=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFHistory=void 0;var n=i(2);function r(t){this.linkService=t.linkService,this.eventBus=t.eventBus||(0,n.getGlobalEventBus)(),this.initialized=!1,this.initialDestination=null,this.initialBookmark=null}r.prototype={initialize:function(t){this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.isViewerInPresentationMode=!1,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=t,this.currentUid=this.uid=0,this.current={};var e=window.history.state;this._isStateObjectDefined(e)?(e.target.dest?this.initialDestination=e.target.dest:this.initialBookmark=e.target.hash,this.currentUid=e.uid,this.uid=e.uid+1,this.current=e.target):(e&&e.fingerprint&&this.fingerprint!==e.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var i=this;function n(){i.previousHash=window.location.hash.slice(1),i._pushToHistory({hash:i.previousHash},!1,!0),i._updatePreviousBookmark()}function r(){var t=i._getPreviousParams(null,!0);if(t){var e=!i.current.dest&&i.current.hash!==i.previousHash;i._pushToHistory(t,!1,e),i._updatePreviousBookmark()}window.removeEventListener("beforeunload",r)}window.addEventListener("popstate",function(t){i.historyUnlocked&&(t.state?i._goTo(t.state):0===i.uid?function(t,e){function n(){window.removeEventListener("popstate",n),i.allowHashChange=!0,i.historyUnlocked=!0,e()}i.historyUnlocked=!1,i.allowHashChange=!1,window.addEventListener("popstate",function e(){window.removeEventListener("popstate",e);window.addEventListener("popstate",n);i._pushToHistory(t,!1,!0);history.forward()}),history.back()}(i.previousHash&&i.currentBookmark&&i.previousHash!==i.currentBookmark?{hash:i.currentBookmark,page:i.currentPage}:{page:1},function(){n()}):n())}),window.addEventListener("beforeunload",r),window.addEventListener("pageshow",function(t){window.addEventListener("beforeunload",r)}),i.eventBus.on("presentationmodechanged",function(t){i.isViewerInPresentationMode=t.active})},clearHistoryState:function(){this._pushOrReplaceState(null,!0)},_isStateObjectDefined:function(t){return!!(t&&t.uid>=0&&t.fingerprint&&this.fingerprint===t.fingerprint&&t.target&&t.target.hash)},_pushOrReplaceState:function(t,e){e?window.history.replaceState(t,"",document.URL):window.history.pushState(t,"",document.URL)},get isHashChangeUnlocked(){return!this.initialized||this.allowHashChange},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(t,e){this.initialized&&(this.currentBookmark=t.substring(1),this.currentPage=0|e,this._updatePreviousBookmark())},updateNextHashParam:function(t){this.initialized&&(this.nextHashParam=t)},push:function(t,e){if(this.initialized&&this.historyUnlocked){if(t.dest&&!t.hash&&(t.hash=this.current.hash&&this.current.dest&&this.current.dest===t.dest?this.current.hash:this.linkService.getDestinationHash(t.dest).split("#")[1]),t.page&&(t.page|=0),e){var i=window.history.state.target;return i||(this._pushToHistory(t,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=!this.nextHashParam,void(i&&this._updatePreviousBookmark())}if(this.nextHashParam){if(this.nextHashParam===t.hash)return this.nextHashParam=null,void(this.updatePreviousBookmark=!0);this.nextHashParam=null}t.hash?this.current.hash?this.current.hash!==t.hash?this._pushToHistory(t,!0):(!this.current.page&&t.page&&this._pushToHistory(t,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(t,!0):this.current.page&&t.page&&this.current.page!==t.page&&this._pushToHistory(t,!0)}},_getPreviousParams:function(t,e){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!t||e){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!t)return null;if(this.previousPage===this.currentPage)return null}var i={hash:this.currentBookmark,page:this.currentPage};return this.isViewerInPresentationMode&&(i.hash=null),i},_stateObj:function(t){return{fingerprint:this.fingerprint,uid:this.uid,target:t}},_pushToHistory:function(t,e,i){if(this.initialized){if(!t.hash&&t.page&&(t.hash="page="+t.page),e&&!i){var n=this._getPreviousParams();if(n){var r=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(n,!1,r)}}this._pushOrReplaceState(this._stateObj(t),i||0===this.uid),this.currentUid=this.uid++,this.current=t,this.updatePreviousBookmark=!0}},_goTo:function(t){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(t)){if(!this.reInitialized&&t.uid<this.currentUid){var e=this._getPreviousParams(!0);if(e)return this._pushToHistory(this.current,!1),this._pushToHistory(e,!1),this.currentUid=t.uid,void window.history.back()}this.historyUnlocked=!1,t.target.dest?this.linkService.navigateTo(t.target.dest):this.linkService.setHash(t.target.hash),this.currentUid=t.uid,t.uid>this.uid&&(this.uid=t.uid),this.current=t.target,this.updatePreviousBookmark=!0;var i=window.location.hash.substring(1);this.previousHash!==i&&(this.allowHashChange=!1),this.previousHash=i,this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(t){if(this.initialized&&this.historyUnlocked){var e=window.history.state;-1===t&&e&&e.uid>0?window.history.back():1===t&&e&&e.uid<this.uid-1&&window.history.forward()}}},e.PDFHistory=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=e.PresentationModeState=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),o=i(1),s=i(7),a=i(4),l=i(2),c=i(5),u=i(3),h=i(6);var p={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};function d(t){return t.width<=t.height}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.eventBus=e.eventBus||(0,l.getGlobalEventBus)(),this.linkService=e.linkService||new u.SimpleLinkService,this.downloadManager=e.downloadManager||null,this.removePageBorders=e.removePageBorders||!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.renderer=e.renderer||o.RendererType.CANVAS,this.l10n=e.l10n||o.NullL10n,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new s.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=(0,o.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=p.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return n(t,[{key:"getPageView",value:function(t){return this._pages[t]}},{key:"_setCurrentPageNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber!==t)if(0<t&&t<=this.pagesCount){var i={source:this,pageNumber:t,pageLabel:this._pageLabels&&this._pageLabels[t-1]};this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",i),this.eventBus.dispatch("pagechange",i),e&&this._resetCurrentPageView()}else console.error('PDFViewer._setCurrentPageNumber: "'+t+'" is out of bounds.');else e&&this._resetCurrentPageView()}},{key:"setDocument",value:function(t){var e=this;if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=t,t){var i=t.numPages,n=(0,r.createPromiseCapability)();this.pagesPromise=n.promise,n.promise.then(function(){e._pageViewsReady=!0,e.eventBus.dispatch("pagesloaded",{source:e,pagesCount:i})});var s=!1,a=(0,r.createPromiseCapability)();this.onePageRendered=a.promise;var l=function(t){t.onBeforeDraw=function(){e._buffer.push(t)},t.onAfterDraw=function(){s||(s=!0,a.resolve())}},u=t.getPage(1);this.firstPagePromise=u,u.then(function(s){for(var u=e.currentScale,h=s.getViewport(u*o.CSS_UNITS),p=1;p<=i;++p){var d=null;r.PDFJS.disableTextLayer||(d=e);var f=new c.PDFPageView({container:e.viewer,eventBus:e.eventBus,id:p,scale:u,defaultViewport:h.clone(),renderingQueue:e.renderingQueue,textLayerFactory:d,annotationLayerFactory:e,enhanceTextSelection:e.enhanceTextSelection,renderInteractiveForms:e.renderInteractiveForms,renderer:e.renderer,l10n:e.l10n});l(f),e._pages.push(f)}a.promise.then(function(){if(r.PDFJS.disableAutoFetch)n.resolve();else for(var o=i,s=function(i){t.getPage(i).then(function(t){var r=e._pages[i-1];r.pdfPage||r.setPdfPage(t),e.linkService.cachePageRef(i,t.ref),0==--o&&n.resolve()},function(t){console.error("Unable to get page "+i+" to initialize viewer",t),0==--o&&n.resolve()})},a=1;a<=i;++a)s(a)}),e.eventBus.dispatch("pagesinit",{source:e}),e.defaultRenderingQueue&&e.update(),e.findController&&e.findController.resolveFirstPage()}).catch(function(t){console.error("Unable to initialize viewer",t)})}}},{key:"setPageLabels",value:function(t){if(this.pdfDocument){t?t instanceof Array&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("PDFViewer.setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var e=0,i=this._pages.length;e<i;e++){var n=this._pages[e],r=this._pageLabels&&this._pageLabels[e];n.setPageLabel(r)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=o.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new function(t){var e=[];this.push=function(i){var n=e.indexOf(i);n>=0&&e.splice(n,1),e.push(i),e.length>t&&e.shift().destroy()},this.resize=function(i){for(t=i;e.length>t;)e.shift().destroy()}}(10),this._location=null,this._pagesRotation=0,this._pagesRequests=[],this._pageViewsReady=!1,this.viewer.textContent=""}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_setScaleDispatchEvent",value:function(t,e){var i={source:this,scale:t,presetValue:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e:void 0};this.eventBus.dispatch("scalechanging",i),this.eventBus.dispatch("scalechange",i)}},{key:"_setScaleUpdatePages",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=e.toString(),function(t,e){return e===t||Math.abs(e-t)<1e-15}(this._currentScale,t))n&&this._setScaleDispatchEvent(t,e,!0);else{for(var o=0,s=this._pages.length;o<s;o++)this._pages[o].update(t);if(this._currentScale=t,!i){var a=this._currentPageNumber,l=void 0;!this._location||r.PDFJS.ignoreCurrentPositionOnZoom||this.isInPresentationMode||this.isChangingPresentationMode||(a=this._location.pageNumber,l=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:a,destArray:l,allowNegativeOffset:!0})}this._setScaleDispatchEvent(t,e,n),this.defaultRenderingQueue&&this.update()}}},{key:"_setScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=parseFloat(t);if(i>0)this._setScaleUpdatePages(i,t,e,!1);else{var n=this._pages[this._currentPageNumber-1];if(!n)return;var r=this.isInPresentationMode||this.removePageBorders?0:o.SCROLLBAR_PADDING,s=this.isInPresentationMode||this.removePageBorders?0:o.VERTICAL_PADDING,a=(this.container.clientWidth-r)/n.width*n.scale,l=(this.container.clientHeight-s)/n.height*n.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=l;break;case"page-fit":i=Math.min(a,l);break;case"auto":var c=n.width>n.height?Math.min(l,a):a;i=Math.min(o.MAX_AUTO_SCALE,c);break;default:return void console.error('PDFViewer._setScale: "'+t+'" is an unknown zoom value.')}this._setScaleUpdatePages(i,t,e,!0)}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var t=this._pages[this._currentPageNumber-1];(0,o.scrollIntoView)(t.div)}},{key:"scrollPageIntoView",value:function(t){if(arguments.length>1||"number"==typeof t)console.error("Call of scrollPageIntoView() with obsolete signature.");else if(this.pdfDocument){var e=t.pageNumber||0,i=t.destArray||null,n=t.allowNegativeOffset||!1;if(!this.isInPresentationMode&&i){var r=this._pages[e-1];if(r){var s=0,a=0,l=0,c=0,u=void 0,h=void 0,p=r.rotation%180!=0,d=(p?r.height:r.width)/r.scale/o.CSS_UNITS,f=(p?r.width:r.height)/r.scale/o.CSS_UNITS,m=0;switch(i[1].name){case"XYZ":s=i[2],a=i[3],m=i[4],s=null!==s?s:0,a=null!==a?a:f;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":m="page-width",null===(a=i[2])&&this._location&&(s=this._location.left,a=this._location.top);break;case"FitV":case"FitBV":s=i[2],l=d,c=f,m="page-height";break;case"FitR":s=i[2],a=i[3],l=i[4]-s,c=i[5]-a;var g=this.removePageBorders?0:o.SCROLLBAR_PADDING,y=this.removePageBorders?0:o.VERTICAL_PADDING;u=(this.container.clientWidth-g)/l/o.CSS_UNITS,h=(this.container.clientHeight-y)/c/o.CSS_UNITS,m=Math.min(Math.abs(u),Math.abs(h));break;default:return void console.error('PDFViewer.scrollPageIntoView: "'+i[1].name+'" is not a valid destination type.')}if(m&&m!==this._currentScale?this.currentScaleValue=m:this._currentScale===o.UNKNOWN_SCALE&&(this.currentScaleValue=o.DEFAULT_SCALE_VALUE),"page-fit"!==m||i[4]){var _=[r.viewport.convertToViewportPoint(s,a),r.viewport.convertToViewportPoint(s+l,a+c)],v=Math.min(_[0][0],_[1][0]),b=Math.min(_[0][1],_[1][1]);n||(v=Math.max(v,0),b=Math.max(b,0)),(0,o.scrollIntoView)(r.div,{left:v,top:b})}else(0,o.scrollIntoView)(r.div)}else console.error('PDFViewer.scrollPageIntoView: Invalid "pageNumber" parameter.')}else this._setCurrentPageNumber(e,!0)}}},{key:"_updateLocation",value:function(t){var e=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===e?Math.round(1e4*e)/100:i,r=t.id,o="#page="+r;o+="&zoom="+n;var s=this._pages[r-1],a=this.container,l=s.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),c=Math.round(l[0]),u=Math.round(l[1]);o+=","+c+","+u,this._location={pageNumber:r,scale:n,top:u,left:c,pdfOpenParams:o}}},{key:"update",value:function(){var t=this._getVisiblePages(),e=t.views;if(0!==e.length){var i=Math.max(10,2*e.length+1);this._buffer.resize(i),this.renderingQueue.renderHighestPriority(t);for(var n=this._currentPageNumber,r=t.first,o=!1,s=0,a=e.length;s<a;++s){var l=e[s];if(l.percent<100)break;if(l.id===n){o=!0;break}}o||(n=e[0].id),this.isInPresentationMode||this._setCurrentPageNumber(n),this._updateLocation(r),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(t){return this.container.contains(t)}},{key:"focus",value:function(){this.container.focus()}},{key:"_getVisiblePages",value:function(){if(!this.isInPresentationMode)return(0,o.getVisibleElements)(this.container,this._pages,!0);var t=[],e=this._pages[this._currentPageNumber-1];return t.push({id:e.id,view:e}),{first:e,last:e,views:t}}},{key:"cleanup",value:function(){for(var t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].renderingState!==s.RenderingStates.FINISHED&&this._pages[t].reset()}},{key:"_cancelRendering",value:function(){for(var t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function(t){var e=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);var i=t.id;if(this._pagesRequests[i])return this._pagesRequests[i];var n=this.pdfDocument.getPage(i).then(function(n){return t.pdfPage||t.setPdfPage(n),e._pagesRequests[i]=null,n}).catch(function(t){console.error("Unable to get page for page view",t),e._pagesRequests[i]=null});return this._pagesRequests[i]=n,n}},{key:"forceRendering",value:function(t){var e=this,i=t||this._getVisiblePages(),n=this.renderingQueue.getHighestPriority(i,this._pages,this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(function(){e.renderingQueue.renderView(n)}),!0)}},{key:"getPageTextContent",value:function(t){return this.pdfDocument.getPage(t+1).then(function(t){return t.getTextContent({normalizeWhitespace:!0})})}},{key:"createTextLayerBuilder",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new h.TextLayerBuilder({textLayerDiv:t,eventBus:this.eventBus,pageIndex:e,viewport:i,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&n})}},{key:"createAnnotationLayerBuilder",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.NullL10n;return new a.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,renderInteractiveForms:i,linkService:this.linkService,downloadManager:this.downloadManager,l10n:n})}},{key:"setFindController",value:function(t){this.findController=t}},{key:"getPagesOverview",value:function(){var t=this._pages.map(function(t){var e=t.pdfPage.getViewport(1);return{width:e.width,height:e.height,rotation:e.rotation}});if(!this.enablePrintAutoRotate)return t;var e=d(t[0]);return t.map(function(t){return e===d(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}})}},{key:"pagesCount",get:function(){return this._pages.length}},{key:"pageViewsReady",get:function(){return this._pageViewsReady}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(t){if((0|t)!==t)throw new Error("Invalid page number.");this.pdfDocument&&this._setCurrentPageNumber(t,!0)}},{key:"currentPageLabel",get:function(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function(t){var e=0|t;if(this._pageLabels){var i=this._pageLabels.indexOf(t);i>=0&&(e=i+1)}this.currentPageNumber=e}},{key:"currentScale",get:function(){return this._currentScale!==o.UNKNOWN_SCALE?this._currentScale:o.DEFAULT_SCALE},set:function(t){if(isNaN(t))throw new Error("Invalid numeric scale");this.pdfDocument&&this._setScale(t,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(t){this.pdfDocument&&this._setScale(t,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(t){if("number"!=typeof t||t%90!=0)throw new Error("Invalid pages rotation angle.");if(this.pdfDocument){this._pagesRotation=t;for(var e=0,i=this._pages.length;e<i;e++){var n=this._pages[e];n.update(n.scale,t)}this._setScale(this._currentScaleValue,!0),this.defaultRenderingQueue&&this.update()}}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===p.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===p.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"hasEqualPageSizes",get:function(){for(var t=this._pages[0],e=1,i=this._pages.length;e<i;++e){var n=this._pages[e];if(n.width!==t.width||n.height!==t.height)return!1}return!0}}]),t}();e.PresentationModeState=p,e.PDFViewer=f},function(t,e,i){"use strict";document.webL10n=function(t,e,i){var n={},r="",o="textContent",s="",a={},l="loading",c=!0;function u(t){var i=e.createEvent("Event");i.initEvent("localized",!0,!1),i.language=t,e.dispatchEvent(i)}function h(t,e,i){e=e||function(t){},i=i||function(){};var n=new XMLHttpRequest;n.open("GET",t,c),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0===n.status?e(n.responseText):i())},n.onerror=i,n.ontimeout=i;try{n.send(null)}catch(t){i()}}function p(t,e,i,s){var a=t.replace(/[^\/]*$/,"")||"./";h(t,function(t){r+=t,function(t,i){var n={},r=/^\s*|\s*$/,o=/^\s*#|^\s*$/,s=/^\s*\[(.*)\]\s*$/,l=/^\s*@import\s+url\((.*)\)\s*$/i,c=/^([^=\s]*)\s*=\s*(.+)$/;function u(t,i,u){var h=t.replace(r,"").split(/[\r\n]+/),d="*",f=e.split("-",1)[0],m=!1,g="";!function t(){for(;;){if(!h.length)return void u();var r=h.shift();if(!o.test(r)){if(i){if(g=s.exec(r)){d=g[1].toLowerCase(),m="*"!==d&&d!==e&&d!==f;continue}if(m)continue;if(g=l.exec(r))return void p(a+g[1],t)}var y=r.match(c);y&&3==y.length&&(n[y[1]]=(_=y[2]).lastIndexOf("\\")<0?_:_.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'"))}}var _}()}function p(t,e){h(t,function(t){u(t,!1,e)},function(){console.warn(t+" not found."),e()})}u(t,!0,function(){i(n)})}(t,function(t){for(var e in t){var r,s,a=e.lastIndexOf(".");a>0?(r=e.substring(0,a),s=e.substr(a+1)):(r=e,s=o),n[r]||(n[r]={}),n[r][s]=t[e]}i&&i()})},s)}function d(t,i){t&&(t=t.toLowerCase()),i=i||function(){},n={},r="",s="",s=t;var o,a=e.querySelectorAll('link[type="application/l10n"]'),c=a.length;if(0===c){var h=(o=e.querySelector('script[type="application/l10n"]'))?JSON.parse(o.innerHTML):null;if(h&&h.locales&&h.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(n=h.locales[t])){var d=h.default_locale.toLowerCase();for(var f in h.locales){if((f=f.toLowerCase())===t){n=h.locales[t];break}f===d&&(n=h.locales[d])}}i()}else console.log("no resource to load, early way out");return u(t),void(l="complete")}var m,g=0;function y(t){var e=t.href;this.load=function(t,i){p(e,t,i,function(){console.warn(e+" not found."),console.warn('"'+t+'" resource not found'),s="",i()})}}m=function(){++g>=c&&(i(),u(t),l="complete")};for(var _=0;_<c;_++){new y(a[_]).load(t,m)}}function f(t,e,i){var r=n[t];if(!r){if(console.warn("#"+t+" is undefined."),!i)return null;r=i}var o={};for(var s in r){var a=r[s];a=g(a=m(a,e,t,s),e,t),o[s]=a}return o}function m(t,e,i,r){var o=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!o||!o.length)return t;var s,l=o[1],c=o[2];(e&&c in e?s=e[c]:c in n&&(s=n[c]),l in a)&&(t=(0,a[l])(t,s,i,r));return t}function g(t,e,i){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,function(t,r){return e&&r in e?e[r]:r in n?n[r]:(console.log("argument {{"+r+"}} for #"+i+" is undefined."),t)})}function y(t){var i=function(t){if(!t)return{};var e=t.getAttribute("data-l10n-id"),i=t.getAttribute("data-l10n-args"),n={};if(i)try{n=JSON.parse(i)}catch(t){console.warn("could not parse arguments for #"+e)}return{id:e,args:n}}(t);if(i.id){var n=f(i.id,i.args);if(n){if(n[o]){if(0===function(t){if(t.children)return t.children.length;if("undefined"!=typeof t.childElementCount)return t.childElementCount;for(var e=0,i=0;i<t.childNodes.length;i++)e+=1===t.nodeType?1:0;return e}(t))t[o]=n[o];else{for(var r=t.childNodes,s=!1,a=0,l=r.length;a<l;a++)3===r[a].nodeType&&/\S/.test(r[a].nodeValue)&&(s?r[a].nodeValue="":(r[a].nodeValue=n[o],s=!0));if(!s){var c=e.createTextNode(n[o]);t.insertBefore(c,t.firstChild)}}delete n[o]}for(var u in n)t[u]=n[u]}else console.warn("#"+i.id+" is undefined.")}}return a.plural=function(t,e,i,r){var l=parseFloat(e);if(isNaN(l))return t;if(r!=o)return t;a._pluralRules||(a._pluralRules=function(t){function e(t,e){return-1!==e.indexOf(t)}function i(t,e,i){return e<=t&&t<=i}var n={0:function(t){return"other"},1:function(t){return i(t%100,3,10)?"few":0===t?"zero":i(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function(t){return 1==t?"one":"other"},4:function(t){return i(t,0,1)?"one":"other"},5:function(t){return i(t,0,2)&&2!=t?"one":"other"},6:function(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function(t){return 2==t?"two":1==t?"one":"other"},8:function(t){return i(t,3,6)?"few":i(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function(t){return 0===t||1!=t&&i(t%100,1,19)?"few":1==t?"one":"other"},10:function(t){return i(t%10,2,9)&&!i(t%100,11,19)?"few":t%10!=1||i(t%100,11,19)?"other":"one"},11:function(t){return i(t%10,2,4)&&!i(t%100,12,14)?"few":t%10==0||i(t%10,5,9)||i(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function(t){return i(t,2,4)?"few":1==t?"one":"other"},13:function(t){return i(t%10,2,4)&&!i(t%100,12,14)?"few":1!=t&&i(t%10,0,1)||i(t%10,5,9)||i(t%100,12,14)?"many":1==t?"one":"other"},14:function(t){return i(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function(t){return 0===t||i(t%100,2,10)?"few":i(t%100,11,19)?"many":1==t?"one":"other"},16:function(t){return t%10==1&&11!=t?"one":"other"},17:function(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function(t){return 0===t?"zero":i(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function(t){return i(t,2,10)?"few":i(t,0,1)?"one":"other"},20:function(t){return!i(t%10,3,4)&&t%10!=9||i(t%100,10,19)||i(t%100,70,79)||i(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||e(t%100,[12,72,92])?t%10!=1||e(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1==t?"one":"other"},22:function(t){return i(t,0,1)||i(t,11,99)?"one":"other"},23:function(t){return i(t%10,1,2)||t%20==0?"one":"other"},24:function(t){return i(t,3,10)||i(t,13,19)?"few":e(t,[2,12])?"two":e(t,[1,11])?"one":"other"}},r={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return r in n?n[r]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(s));var c="["+a._pluralRules(l)+"]";return 0===l&&i+"[zero]"in n?t=n[i+"[zero]"][r]:1==l&&i+"[one]"in n?t=n[i+"[one]"][r]:2==l&&i+"[two]"in n?t=n[i+"[two]"][r]:i+c in n?t=n[i+c][r]:i+"[other]"in n&&(t=n[i+"[other]"][r]),t},{get:function(t,e,i){var n,r=t.lastIndexOf("."),s=o;r>0&&(s=t.substr(r+1),t=t.substring(0,r)),i&&((n={})[s]=i);var a=f(t,e,n);return a&&s in a?a[s]:"{{"+t+"}}"},getData:function(){return n},getText:function(){return r},getLanguage:function(){return s},setLanguage:function(t,e){d(t,function(){e&&e()})},getDirection:function(){var t=s.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function(t){for(var i=function(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||e.documentElement),n=i.length,r=0;r<n;r++)y(i[r]);y(t)},getReadyState:function(){return l},ready:function(i){i&&("complete"==l||"interactive"==l?t.setTimeout(function(){i()}):e.addEventListener&&e.addEventListener("localized",function t(){e.removeEventListener("localized",t),i()}))}}}(window,document)},function(t,e,i){"use strict";var n=i(0),r=i(12),o=i(5),s=i(3),a=i(6),l=i(4),c=i(11),u=i(10),h=i(1),p=i(8),d=i(9),f=n.PDFJS;f.PDFViewer=r.PDFViewer,f.PDFPageView=o.PDFPageView,f.PDFLinkService=s.PDFLinkService,f.TextLayerBuilder=a.TextLayerBuilder,f.DefaultTextLayerFactory=a.DefaultTextLayerFactory,f.AnnotationLayerBuilder=l.AnnotationLayerBuilder,f.DefaultAnnotationLayerFactory=l.DefaultAnnotationLayerFactory,f.PDFHistory=c.PDFHistory,f.PDFFindController=u.PDFFindController,f.EventBus=h.EventBus,f.DownloadManager=p.DownloadManager,f.ProgressBar=h.ProgressBar,f.GenericL10n=d.GenericL10n,f.NullL10n=h.NullL10n,e.PDFJS=f}])},t.exports=n()},QRYi:function(t,e,i){t.exports=i("6QZ3")},R1vt:function(t,e,i){"use strict";i.d(e,"b",function(){return C}),i.d(e,"e",function(){return D}),i.d(e,"c",function(){return S}),i.d(e,"a",function(){return T}),i.d(e,"d",function(){return P}),i.d(e,"f",function(){return R}),i.d(e,"g",function(){return O});var n=i("8Xfy"),r=i("OFGE"),o=i("Un6q"),s=i("LMZF"),a=i("j5BN"),l=i("CZgk"),c=i("rT01"),u=i("fNvg"),h=i("5jKg"),p=i("pXwq"),d=i("2kLc"),f=i("qLnt"),m=i("fAeS"),g=i("6Xbx"),y=i("TO51"),_=i("XEj9"),v=i("l6RC"),b=i("LaOa"),x=i("GZB0"),A={transformMenu:Object(m.m)("transformMenu",[Object(m.j)("void",Object(m.k)({opacity:0,transform:"scale(0.01, 0.01)"})),Object(m.j)("enter-start",Object(m.k)({opacity:1,transform:"scale(1, 0.5)"})),Object(m.j)("enter",Object(m.k)({transform:"scale(1, 1)"})),Object(m.l)("void => enter-start",Object(m.e)("100ms linear")),Object(m.l)("enter-start => enter",Object(m.e)("300ms cubic-bezier(0.25, 0.8, 0.25, 1)")),Object(m.l)("* => void",Object(m.e)("150ms 50ms linear",Object(m.k)({opacity:0})))]),fadeInItems:Object(m.m)("fadeInItems",[Object(m.j)("showing",Object(m.k)({opacity:1})),Object(m.l)("void => *",[Object(m.k)({opacity:0}),Object(m.e)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};var w=function(){return function(){}}(),P=function(t){function e(e,i,n){var r=t.call(this)||this;return r._elementRef=e,r._focusMonitor=n,r._hovered=new y.a,r._highlighted=!1,r._triggersSubmenu=!1,n&&n.monitor(r._getHostElement(),!1),r._document=i,r}return Object(g.b)(e,t),e.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),t):this._getHostElement().focus()},e.prototype.ngOnDestroy=function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._getHostElement()),this._hovered.complete()},e.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._checkDisabled=function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())},e.prototype._emitHoverEvent=function(){this.disabled||this._hovered.next(this)},e.prototype.getLabel=function(){var t=this._elementRef.nativeElement,e=this._document?this._document.TEXT_NODE:3,i="";if(t.childNodes)for(var n=t.childNodes.length,r=0;r<n;r++)t.childNodes[r].nodeType===e&&(i+=t.childNodes[r].textContent);return i.trim()},e.decorators=[{type:s.j,args:[{selector:"[mat-menu-item]",exportAs:"matMenuItem",inputs:["disabled","disableRipple"],host:{role:"menuitem",class:"mat-menu-item","[class.mat-menu-item-highlighted]":"_highlighted","[class.mat-menu-item-submenu-trigger]":"_triggersSubmenu","[attr.tabindex]":"_getTabIndex()","[attr.aria-disabled]":"disabled.toString()","[attr.disabled]":"disabled || null","(click)":"_checkDisabled($event)","(mouseenter)":"_emitHoverEvent()"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1,template:'<ng-content></ng-content><div class="mat-menu-ripple" matRipple [matRippleDisabled]="disableRipple || disabled" [matRippleTrigger]="_getHostElement()"></div>'}]}],e.ctorParameters=function(){return[{type:s.o},{type:void 0,decorators:[{type:s.u,args:[o.c]}]},{type:n.h}]},e}(Object(a.D)(Object(a.E)(w))),E=function(){function t(t,e,i,n,r,o){this._template=t,this._componentFactoryResolver=e,this._appRef=i,this._injector=n,this._viewContainerRef=r,this._document=o}return t.prototype.attach=function(t){void 0===t&&(t={}),this._portal?this._portal.isAttached&&this._portal.detach():this._portal=new l.h(this._template,this._viewContainerRef),this._outlet||(this._outlet=new l.e(this._document.createElement("div"),this._componentFactoryResolver,this._appRef,this._injector));var e=this._template.elementRef.nativeElement;e.parentNode.insertBefore(this._outlet.outletElement,e),this._portal.attach(this._outlet,t)},t.prototype.ngOnDestroy=function(){this._outlet&&this._outlet.dispose()},t.decorators=[{type:s.n,args:[{selector:"ng-template[matMenuContent]"}]}],t.ctorParameters=function(){return[{type:s.U},{type:s.k},{type:s.e},{type:s.x},{type:s.Z},{type:void 0,decorators:[{type:s.u,args:[o.c]}]}]},t}(),T=new s.w("mat-menu-default-options"),S=function(){function t(t,e,i){this._elementRef=t,this._ngZone=e,this._defaultOptions=i,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._tabSubscription=f.a.EMPTY,this._classList={},this._panelAnimationState="void",this._overlapTrigger=this._defaultOptions.overlapTrigger,this.closed=new s.r,this.close=this.closed}return Object.defineProperty(t.prototype,"xPosition",{get:function(){return this._xPosition},set:function(t){"before"!==t&&"after"!==t&&function(){throw Error('x-position value must be either \'before\' or after\'.\n      Example: <mat-menu x-position="before" #menu="matMenu"></mat-menu>')}(),this._xPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yPosition",{get:function(){return this._yPosition},set:function(t){"above"!==t&&"below"!==t&&function(){throw Error('y-position value must be either \'above\' or below\'.\n      Example: <mat-menu y-position="above" #menu="matMenu"></mat-menu>')}(),this._yPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlapTrigger",{get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=Object(_.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panelClass",{set:function(t){t&&t.length&&(this._classList=t.split(" ").reduce(function(t,e){return t[e]=!0,t},{}),this._elementRef.nativeElement.className="",this.setPositionClasses())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.panelClass},set:function(t){this.panelClass=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._keyManager=new n.g(this.items).withWrap().withTypeAhead(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return t.close.emit("keydown")})},t.prototype.ngOnDestroy=function(){this._tabSubscription.unsubscribe(),this.closed.complete()},t.prototype._hovered=function(){var t=this;return this.items?this.items.changes.pipe(Object(u.a)(this.items),Object(h.a)(function(t){return d.a.apply(void 0,t.map(function(t){return t._hovered}))})):this._ngZone.onStable.asObservable().pipe(Object(p.a)(1),Object(h.a)(function(){return t._hovered()}))},t.prototype._handleKeydown=function(t){switch(t.keyCode){case c.g:this.closed.emit("keydown"),t.stopPropagation();break;case c.i:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case c.m:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:this._keyManager.onKeydown(t)}},t.prototype.focusFirstItem=function(t){var e=this;void 0===t&&(t="program"),this.lazyContent?this._ngZone.onStable.asObservable().pipe(Object(p.a)(1)).subscribe(function(){return e._keyManager.setFocusOrigin(t).setFirstItemActive()}):this._keyManager.setFocusOrigin(t).setFirstItemActive()},t.prototype.resetActiveItem=function(){this._keyManager.setActiveItem(-1)},t.prototype.setPositionClasses=function(t,e){void 0===t&&(t=this.xPosition),void 0===e&&(e=this.yPosition),this._classList["mat-menu-before"]="before"===t,this._classList["mat-menu-after"]="after"===t,this._classList["mat-menu-above"]="above"===e,this._classList["mat-menu-below"]="below"===e},t.prototype.setElevation=function(t){var e="mat-elevation-z"+(2+t),i=Object.keys(this._classList).find(function(t){return t.startsWith("mat-elevation-z")});i&&i!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)},t.prototype._startAnimation=function(){this._panelAnimationState="enter-start"},t.prototype._resetAnimation=function(){this._panelAnimationState="void"},t.prototype._onAnimationDone=function(t){"enter-start"===t.toState&&(this._panelAnimationState="enter")},t.decorators=[{type:s.j,args:[{selector:"mat-menu",template:'<ng-template><div class="mat-menu-panel" [ngClass]="_classList" (keydown)="_handleKeydown($event)" (click)="closed.emit(\'click\')" [@transformMenu]="_panelAnimationState" (@transformMenu.done)="_onAnimationDone($event)" tabindex="-1" role="menu"><div class="mat-menu-content" [@fadeInItems]="\'showing\'"><ng-content></ng-content></div></div></ng-template>',styles:[".mat-menu-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:2px;outline:0}.mat-menu-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:left top}.mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:right top}.mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:right top}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:left top}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.ng-animating{pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content{padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item .mat-icon{vertical-align:middle}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1,animations:[A.transformMenu,A.fadeInItems],exportAs:"matMenu"}]}],t.ctorParameters=function(){return[{type:s.o},{type:s.F},{type:void 0,decorators:[{type:s.u,args:[T]}]}]},t.propDecorators={xPosition:[{type:s.y}],yPosition:[{type:s.y}],templateRef:[{type:s.X,args:[s.U]}],items:[{type:s.m,args:[P]}],lazyContent:[{type:s.l,args:[E]}],overlapTrigger:[{type:s.y}],panelClass:[{type:s.y,args:["class"]}],classList:[{type:s.y}],closed:[{type:s.H}],close:[{type:s.H}]},t}(),C=new s.w("mat-menu-scroll-strategy");function O(t){return function(){return t.scrollStrategies.reposition()}}var M={provide:C,deps:[r.c],useFactory:O},R=function(){function t(t,e,i,n,r,o,a,l){this._overlay=t,this._element=e,this._viewContainerRef=i,this._scrollStrategy=n,this._parentMenu=r,this._menuItemInstance=o,this._dir=a,this._focusMonitor=l,this._overlayRef=null,this._menuOpen=!1,this._closeSubscription=f.a.EMPTY,this._hoverSubscription=f.a.EMPTY,this._openedByMouse=!1,this.menuOpened=new s.r,this.onMenuOpen=this.menuOpened,this.menuClosed=new s.r,this.onMenuClose=this.menuClosed,o&&(o._triggersSubmenu=this.triggersSubmenu())}return Object.defineProperty(t.prototype,"_deprecatedMatMenuTriggerFor",{get:function(){return this.menu},set:function(t){this.menu=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._checkMenu(),this.menu.close.subscribe(function(e){t._destroyMenu(),"click"===e&&t._parentMenu&&t._parentMenu.closed.emit(e)}),this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(Object(b.a)(function(e){return e===t._menuItemInstance})).subscribe(function(){t._openedByMouse=!0,t.openMenu()}))},t.prototype.ngOnDestroy=function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._cleanUpSubscriptions()},Object.defineProperty(t.prototype,"menuOpen",{get:function(){return this._menuOpen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},enumerable:!0,configurable:!0}),t.prototype.triggersSubmenu=function(){return!(!this._menuItemInstance||!this._parentMenu)},t.prototype.toggleMenu=function(){return this._menuOpen?this.closeMenu():this.openMenu()},t.prototype.openMenu=function(){var t=this;this._menuOpen||(this._createOverlay().attach(this._portal),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closeSubscription=this._menuClosingActions().subscribe(function(){return t.closeMenu()}),this._initMenu(),this.menu instanceof S&&this.menu._startAnimation())},t.prototype.closeMenu=function(){this.menu.close.emit()},t.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._element.nativeElement,t):this._element.nativeElement.focus()},t.prototype._destroyMenu=function(){this._overlayRef&&this.menuOpen&&(this._resetMenu(),this._closeSubscription.unsubscribe(),this._overlayRef.detach(),this.menu instanceof S&&this.menu._resetAnimation())},t.prototype._initMenu=function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedByMouse?"mouse":"program")},t.prototype._setMenuElevation=function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}},t.prototype._resetMenu=function(){this._setIsMenuOpen(!1),this._openedByMouse?this.triggersSubmenu()||this.focus("mouse"):this.focus(),this._openedByMouse=!1},t.prototype._setIsMenuOpen=function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)},t.prototype._checkMenu=function(){this.menu||function(){throw Error('mat-menu-trigger: must pass in an mat-menu instance.\n\n    Example:\n      <mat-menu #menu="matMenu"></mat-menu>\n      <button [matMenuTriggerFor]="menu"></button>')}()},t.prototype._createOverlay=function(){if(!this._overlayRef){this._portal=new l.h(this.menu.templateRef,this._viewContainerRef);var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t)}return this._overlayRef},t.prototype._getOverlayConfig=function(){return new r.d({positionStrategy:this._getPosition(),hasBackdrop:!this.triggersSubmenu(),backdropClass:"cdk-overlay-transparent-backdrop",direction:this.dir,scrollStrategy:this._scrollStrategy()})},t.prototype._subscribeToPositions=function(t){var e=this;t.onPositionChange.subscribe(function(t){var i="start"===t.connectionPair.overlayX?"after":"before",n="top"===t.connectionPair.overlayY?"below":"above";e.menu.setPositionClasses(i,n)})},t.prototype._getPosition=function(){var t="before"===this.menu.xPosition?["end","start"]:["start","end"],e=t[0],i=t[1],n="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],r=n[0],o=n[1],s=[r,o],a=s[0],l=s[1],c=[e,i],u=c[0],h=c[1],p=0;return this.triggersSubmenu()?(h=e="before"===this.menu.xPosition?"start":"end",i=u="end"===e?"start":"end",p="bottom"===r?8:-8):this.menu.overlapTrigger||(a="top"===r?"bottom":"top",l="top"===o?"bottom":"top"),this._overlay.position().connectedTo(this._element,{originX:e,originY:a},{overlayX:u,overlayY:r}).withDirection(this.dir).withOffsetY(p).withFallbackPosition({originX:i,originY:a},{overlayX:h,overlayY:r}).withFallbackPosition({originX:e,originY:l},{overlayX:u,overlayY:o},void 0,-p).withFallbackPosition({originX:i,originY:l},{overlayX:h,overlayY:o},void 0,-p)},t.prototype._cleanUpSubscriptions=function(){this._closeSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()},t.prototype._menuClosingActions=function(){var t=this,e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),n=this._parentMenu?this._parentMenu.close:Object(x.a)(),r=this._parentMenu?this._parentMenu._hovered().pipe(Object(b.a)(function(e){return e!==t._menuItemInstance}),Object(b.a)(function(){return t._menuOpen})):Object(x.a)();return Object(d.a)(e,n,r,i)},t.prototype._handleMousedown=function(t){Object(n.o)(t)||(this._openedByMouse=!0,this.triggersSubmenu()&&t.preventDefault())},t.prototype._handleKeydown=function(t){var e=t.keyCode;this.triggersSubmenu()&&(e===c.m&&"ltr"===this.dir||e===c.i&&"rtl"===this.dir)&&this.openMenu()},t.prototype._handleClick=function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()},t.decorators=[{type:s.n,args:[{selector:"[mat-menu-trigger-for], [matMenuTriggerFor]",host:{"aria-haspopup":"true","(mousedown)":"_handleMousedown($event)","(keydown)":"_handleKeydown($event)","(click)":"_handleClick($event)"},exportAs:"matMenuTrigger"}]}],t.ctorParameters=function(){return[{type:r.c},{type:s.o},{type:s.Z},{type:void 0,decorators:[{type:s.u,args:[C]}]},{type:S,decorators:[{type:s.G}]},{type:P,decorators:[{type:s.G},{type:s.R}]},{type:v.c,decorators:[{type:s.G}]},{type:n.h}]},t.propDecorators={_deprecatedMatMenuTriggerFor:[{type:s.y,args:["mat-menu-trigger-for"]}],menu:[{type:s.y,args:["matMenuTriggerFor"]}],menuData:[{type:s.y,args:["matMenuTriggerData"]}],menuOpened:[{type:s.H}],onMenuOpen:[{type:s.H}],menuClosed:[{type:s.H}],onMenuClose:[{type:s.H}]},t}(),I={overlapTrigger:!0,xPosition:"after",yPosition:"below"},D=function(){function t(){}return t.decorators=[{type:s.C,args:[{imports:[n.a,o.b,a.n,a.y,r.g,l.g],exports:[S,P,R,E,a.n],declarations:[S,P,R,E],providers:[M,{provide:T,useValue:I}]}]}],t.ctorParameters=function(){return[]},t}()},RC4L:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},Rmdh:function(t,e,i){"use strict";var n=function(){function t(){}return t.MAPPING_PROPERTY="__jsonconvert__mapping__",t.MAPPER_PROPERTY="__jsonconvert__mapper__",t}();e.Settings=n;var r=function(){return function(){this.classPropertyName="",this.jsonPropertyName="",this.expectedJsonType=void 0,this.isOptional=!1,this.customConverter=null}}();e.MappingOptions=r},Rx5t:function(t,e,i){"use strict";e.a=function(t,e){void 0===e&&(e=r.a);return function(i){return i.lift(new s(t,e))}};var n=i("E9/g"),r=i("XecN"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var s=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))},t}(),a=function(t){function e(e,i,n){t.call(this,e),this.dueTime=i,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(n.a);function l(t){t.debouncedNext()}},RyBE:function(t,e,i){"use strict";i.d(e,"a",function(){return Qt}),i.d(e,"j",function(){return qt}),i.d(e,"h",function(){return v}),i.d(e,"i",function(){return w}),i.d(e,"b",function(){return g}),i.d(e,"d",function(){return R}),i.d(e,"e",function(){return I}),i.d(e,"f",function(){return ot}),i.d(e,"g",function(){return st}),i.d(e,"c",function(){return Bt}),i.d(e,"s",function(){return a}),i.d(e,"l",function(){return j}),i.d(e,"k",function(){return nt}),i.d(e,"n",function(){return at}),i.d(e,"o",function(){return ut}),i.d(e,"m",function(){return k}),i.d(e,"p",function(){return L}),i.d(e,"q",function(){return Kt}),i.d(e,"t",function(){return O}),i.d(e,"r",function(){return Vt});var n=i("Un6q"),r=i("LMZF"),o=i("6Xbx"),s=null;function a(){return s}var l,c=function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var i=e.createElement("div",document);if(null!=e.getStyle(i,"animationName"))e._animationPrefix="";else for(var n=["Webkit","Moz","O","ms"],r=0;r<n.length;r++)if(null!=e.getStyle(i,n[r]+"AnimationName")){e._animationPrefix="-"+n[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(i,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(o.b)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,i){t.href=null==i?e:e+"/../"+i},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}()),u={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r._17.Node&&(l=r._17.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var d,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,s||(s=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,i){t[e]=i},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,i){var n;(n=t)[e].apply(n,i)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return u},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return l.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,i){t.addEventListener(e,i,!1)},e.prototype.onAndCancel=function(t,e,i){return t.addEventListener(e,i,!1),function(){t.removeEventListener(e,i,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,i=new Array(e.length),n=0;n<e.length;n++)i[n]=e[n];return i},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,i){t.replaceChild(e,i)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,i){t.insertBefore(i,e)},e.prototype.insertAllBefore=function(t,e,i){i.forEach(function(i){return t.insertBefore(i,e)})},e.prototype.insertAfter=function(t,e,i){t.insertBefore(i,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,i){return(i=i||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,i){var n=(i=i||this.getDefaultDocument()).createElement("SCRIPT");return n.setAttribute(t,e),n},e.prototype.createStyleElement=function(t,e){var i=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(i,this.createTextNode(t,e)),i},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,i){t.style[e]=i},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,i){var n=this.getStyle(t,e)||"";return i?n==i:n.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,i=t.attributes,n=0;n<i.length;n++){var r=i.item(n);e.set(r.name,r.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,i){return t.hasAttributeNS(e,i)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,i){return t.getAttributeNS(e,i)},e.prototype.setAttribute=function(t,e,i){t.setAttribute(e,i)},e.prototype.setAttributeNS=function(t,e,i,n){t.setAttributeNS(e,i,n)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,i){t.removeAttributeNS(e,i)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&p.hasOwnProperty(e)&&(e=p[e]))}return h[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e=function(){if(!m&&!(m=document.querySelector("base")))return null;return m.getAttribute("href")}();return null==e?null:function(t){d||(d=document.createElement("a"));return d.setAttribute("href",t),"/"===d.pathname.charAt(0)?d.pathname:"/"+d.pathname}(e)},e.prototype.resetBaseElement=function(){m=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,i){this.setAttribute(t,"data-"+e,i)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Object(n.s)(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(c),m=null;var g=n.c;function y(){return!!window.history.pushState}var _=function(t){function e(e){var i=t.call(this)||this;return i._doc=e,i._init(),i}return Object(o.b)(e,t),e.prototype._init=function(){this.location=a().getLocation(),this._history=a().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return a().getBaseHref(this._doc)},e.prototype.onPopState=function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,i){y()?this._history.pushState(t,e,i):this.location.hash=i},e.prototype.replaceState=function(t,e,i){y()?this._history.replaceState(t,e,i):this.location.hash=i},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},e}(n.p),v=function(){function t(t){this._doc=t,this._dom=a()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var i=this;return void 0===e&&(e=!1),t?t.reduce(function(t,n){return n&&t.push(i._getOrCreateElement(n,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var i=this.getTag(e);return i?this._setMetaElementAttributes(t,i):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var i=this._parseSelector(t),n=this.getTag(i);if(n&&this._containsAttributes(t,n))return n}var r=this._dom.createElement("meta");this._setMetaElementAttributes(t,r);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,r),r},t.prototype._setMetaElementAttributes=function(t,e){var i=this;return Object.keys(t).forEach(function(n){return i._dom.setAttribute(e,n,t[n])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var i=this;return Object.keys(t).every(function(n){return i._dom.getAttribute(e,n)===t[n]})},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},t}(),b=new r.w("TRANSITION_ID");var x=[{provide:r.b,useFactory:function(t,e,i){return function(){i.get(r.c).donePromise.then(function(){var i=a();Array.prototype.slice.apply(i.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return i.getAttribute(e,"ng-transition")===t}).forEach(function(t){return i.remove(t)})})}},deps:[b,g,r.x],multi:!0}],A=function(){function t(){}return t.init=function(){Object(r._8)(new t)},t.prototype.addToWindow=function(t){r._17.getAngularTestability=function(e,i){void 0===i&&(i=!0);var n=t.findTestabilityInTree(e,i);if(null==n)throw new Error("Could not find testability for element.");return n},r._17.getAllAngularTestabilities=function(){return t.getAllTestabilities()},r._17.getAllAngularRootElements=function(){return t.getAllRootElements()};r._17.frameworkStabilizers||(r._17.frameworkStabilizers=[]),r._17.frameworkStabilizers.push(function(t){var e=r._17.getAllAngularTestabilities(),i=e.length,n=!1,o=function(e){n=n||e,0==--i&&t(n)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,i){if(null==e)return null;var n=t.getTestability(e);return null!=n?n:i?a().isShadowRoot(e)?this.findTestabilityInTree(t,a().getHost(e),!0):this.findTestabilityInTree(t,a().parentElement(e),!0):null},t}(),w=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return a().getTitle(this._doc)},t.prototype.setTitle=function(t){a().setTitle(this._doc,t)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},t}();function P(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r._17.ng=r._17.ng||{})[t]=e)}var E={ApplicationRef:r.e,NgZone:r.F},T="probe",S="coreTokens";function C(t){return Object(r._5)(t)}function O(t){return P(T,C),P(S,Object(o.a)({},E,(t||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return C}}var M=[{provide:r.b,useFactory:O,deps:[[r.E,new r.G]],multi:!0}],R=new r.w("EventManagerPlugins"),I=function(){function t(t,e){var i=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=i}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,i){return this._findPluginFor(e).addEventListener(t,e,i)},t.prototype.addGlobalEventListener=function(t,e,i){return this._findPluginFor(e).addGlobalEventListener(t,e,i)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var i=this._plugins,n=0;n<i.length;n++){var r=i[n];if(r.supports(t))return this._eventNameToPlugin.set(t,r),r}throw new Error("No event manager plugin found for event "+t)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:r.u,args:[R]}]},{type:r.F}]},t}(),D=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,i){var n=a().getGlobalEventTarget(this._doc,t);if(!n)throw new Error("Unsupported event target "+n+" for event "+e);return this.addEventListener(n,e,i)},t}(),L=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,i=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),i.add(t))}),this.onStylesAdded(i)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}(),k=function(t){function e(e){var i=t.call(this)||this;return i._doc=e,i._hostNodes=new Set,i._styleNodes=new Set,i._hostNodes.add(e.head),i}return Object(o.b)(e,t),e.prototype._addStylesToHost=function(t,e){var i=this;t.forEach(function(t){var n=i._doc.createElement("style");n.textContent=t,i._styleNodes.add(e.appendChild(n))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(i){return e._addStylesToHost(t,i)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return a().remove(t)})},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},e}(L),F={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=/%COMP%/g,B="_nghost-%COMP%",V="_ngcontent-%COMP%";function z(t,e,i){for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?z(t,r,i):(r=r.replace(N,t),i.push(r))}return i}function U(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var j=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new G(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r._0.Emulated:var i=this.rendererByCompId.get(e.id);return i||(i=new Y(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,i)),i.applyToHost(t),i;case r._0.Native:return new q(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var n=z(e.id,e.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[{type:I},{type:k}]},t}(),G=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(F[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,i){t&&t.insertBefore(e,i)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,i,n){if(n){e=n+":"+e;var r=F[n];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)},t.prototype.removeAttribute=function(t,e,i){if(i){var n=F[i];n?t.removeAttributeNS(n,e):t.removeAttribute(i+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,i,n){n&r.O.DashCase?t.style.setProperty(e,i,n&r.O.Important?"important":""):t.style[e]=i},t.prototype.removeStyle=function(t,e,i){i&r.O.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,i){H(e,"property"),t[e]=i},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,i){return H(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,U(i)):this.eventManager.addEventListener(t,e,U(i))},t}(),W="@".charCodeAt(0);function H(t,e){if(t.charCodeAt(0)===W)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var X,Y=function(t){function e(e,i,n){var r=t.call(this,e)||this;r.component=n;var o,s=z(n.id,n.styles,[]);return i.addStyles(s),r.contentAttr=(o=n.id,V.replace(N,o)),r.hostAttr=function(t){return B.replace(N,t)}(n.id),r}return Object(o.b)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,i){var n=t.prototype.createElement.call(this,e,i);return t.prototype.setAttribute.call(this,n,this.contentAttr,""),n},e}(G),q=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;o.sharedStylesHost=i,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=z(r.id,r.styles,[]),a=0;a<s.length;a++){var l=document.createElement("style");l.textContent=s[a],o.shadowRoot.appendChild(l)}return o}return Object(o.b)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,i){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),i)},e.prototype.insertBefore=function(e,i,n){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),i,n)},e.prototype.removeChild=function(e,i){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),i)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(G),K="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Q=K("addEventListener"),Z=K("removeEventListener"),J={},$="__zone_symbol__propagationStopped",tt="undefined"!=typeof Zone&&Zone[K("BLACK_LISTED_EVENTS")];tt&&(X={},tt.forEach(function(t){X[t]=t}));var et=function(t){return!!X&&X.hasOwnProperty(t)},it=function(t){var e=J[t.type];if(e){var i=this[e];if(i){var n=[t];if(1===i.length)return(s=i[0]).zone!==Zone.current?s.zone.run(s.handler,this,n):s.handler.apply(this,n);for(var r=i.slice(),o=0;o<r.length&&!0!==t[$];o++){var s;(s=r[o]).zone!==Zone.current?s.zone.run(s.handler,this,n):s.handler.apply(this,n)}}}},nt=function(t){function e(e,i){var n=t.call(this,e)||this;return n.ngZone=i,n.patchEvent(),n}return Object(o.b)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[$]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,i){var n=this,o=t[Q],s=i;if(!o||r.F.isInAngularZone()&&!et(e))t.addEventListener(e,s,!1);else{var a=J[e];a||(a=J[e]=K("ANGULAR"+e+"FALSE"));var l=t[a],c=l&&l.length>0;l||(l=t[a]=[]);var u=et(e)?Zone.root:Zone.current;if(0===l.length)l.push({zone:u,handler:s});else{for(var h=!1,p=0;p<l.length;p++)if(l[p].handler===s){h=!0;break}h||l.push({zone:u,handler:s})}c||t[Q](e,it,!1)}return function(){return n.removeEventListener(t,e,s)}},e.prototype.removeEventListener=function(t,e,i){var n=t[Z];if(!n)return t.removeEventListener.apply(t,[e,i,!1]);var r=J[e],o=r&&t[r];if(!o)return t.removeEventListener.apply(t,[e,i,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===i){s=!0,o.splice(a,1);break}s?0===o.length&&n.apply(t,[e,it,!1]):t.removeEventListener.apply(t,[e,i,!1])},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]},{type:r.F}]},e}(D),rt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ot=new r.w("HammerGestureConfig"),st=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var i in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(i).set(this.overrides[i]);return e},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}(),at=function(t){function e(e,i){var n=t.call(this,e)||this;return n._config=i,n}return Object(o.b)(e,t),e.prototype.supports=function(t){if(!rt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,i){var n=this,r=this.manager.getZone();return e=e.toLowerCase(),r.runOutsideAngular(function(){var o=n._config.buildHammer(t),s=function(t){r.runGuarded(function(){i(t)})};return o.on(e,s),function(){return o.off(e,s)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]},{type:st,decorators:[{type:r.u,args:[ot]}]}]},e}(D),lt=["alt","control","meta","shift"],ct={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ut=function(t){function e(e){return t.call(this,e)||this}return Object(o.b)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,i,n){var r=e.parseEventName(i),o=e.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return a().onAndCancel(t,r.domEventName,o)})},e.parseEventName=function(t){var i=t.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;var r=e._normalizeKey(i.pop()),o="";if(lt.forEach(function(t){var e=i.indexOf(t);e>-1&&(i.splice(e,1),o+=t+".")}),o+=r,0!=i.length||0===r.length)return null;var s={};return s.domEventName=n,s.fullKey=o,s},e.getEventFullKey=function(t){var e="",i=a().getEventKey(t);return" "===(i=i.toLowerCase())?i="space":"."===i&&(i="dot"),lt.forEach(function(n){n!=i&&((0,ct[n])(t)&&(e+=n+"."))}),e+=i},e.eventCallback=function(t,i,n){return function(r){e.getEventFullKey(r)===t&&n.runGuarded(function(){return i(r)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},e}(D),ht=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,pt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function dt(t){return(t=String(t)).match(ht)||t.match(pt)?t:(Object(r._6)()&&a().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}var ft=null,mt=null;function gt(t){for(var e={},i=0,n=t.split(",");i<n.length;i++){e[n[i]]=!0}return e}function yt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i={},n=0,r=t;n<r.length;n++){var o=r[n];for(var s in o)o.hasOwnProperty(s)&&(i[s]=!0)}return i}var _t=gt("area,br,col,hr,img,wbr"),vt=gt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bt=gt("rp,rt"),xt=yt(bt,vt),At=yt(vt,gt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wt=yt(bt,gt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pt=yt(_t,At,wt,xt),Et=gt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tt=gt("srcset"),St=gt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ct=yt(Et,Tt,St),Ot=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(mt.isElementNode(e)?this.startElement(e):mt.isTextNode(e)?this.chars(mt.nodeValue(e)):this.sanitizedSomething=!0,mt.firstChild(e))e=mt.firstChild(e);else for(;e;){mt.isElementNode(e)&&this.endElement(e);var i=Mt(e,mt.nextSibling(e));if(i){e=i;break}e=Mt(e,mt.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,i=mt.nodeName(t).toLowerCase();Pt.hasOwnProperty(i)?(this.buf.push("<"),this.buf.push(i),mt.attributeMap(t).forEach(function(t,i){var n,r=i.toLowerCase();Ct.hasOwnProperty(r)?(Et[r]&&(t=dt(t)),Tt[r]&&(n=t,t=(n=String(n)).split(",").map(function(t){return dt(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(i),e.buf.push('="'),e.buf.push(Dt(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=mt.nodeName(t).toLowerCase();Pt.hasOwnProperty(e)&&!_t.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Dt(t))},t}();function Mt(t,e){if(e&&mt.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+mt.getOuterHTML(t));return e}var Rt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,It=/([^\#-~ |!])/g;function Dt(t){return t.replace(/&/g,"&amp;").replace(Rt,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(It,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Lt(t){mt.attributeMap(t).forEach(function(e,i){"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||mt.removeAttribute(t,i)});for(var e=0,i=mt.childNodesAsList(t);e<i.length;e++){var n=i[e];mt.isElementNode(n)&&Lt(n)}}function kt(t,e){try{var i=function(){if(ft)return ft;var t=(mt=a()).createElement("template");if("content"in t)return t;var e=mt.createHtmlDocument();if(null==(ft=mt.querySelector(e,"body"))){var i=mt.createElement("html",e);ft=mt.createElement("body",e),mt.appendChild(i,ft),mt.appendChild(e,i)}return ft}(),n=e?String(e):"",o=5,s=n;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,n=s,mt.setInnerHTML(i,n),t.documentMode&&Lt(i),s=mt.getInnerHTML(i)}while(n!==s);for(var l=new Ot,c=l.sanitizeChildren(mt.getTemplateContent(i)||i),u=mt.getTemplateContent(i)||i,h=0,p=mt.childNodesAsList(u);h<p.length;h++){var d=p[h];mt.removeChild(u,d)}return Object(r._6)()&&l.sanitizedSomething&&mt.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),c}catch(t){throw ft=null,t}}var Ft=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Nt=/^url\(([^)]+)\)$/;var Bt=function(){return function(){}}(),Vt=function(t){function e(e){var i=t.call(this)||this;return i._doc=e,i}return Object(o.b)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.Q.NONE:return e;case r.Q.HTML:return e instanceof Ut?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),kt(this._doc,String(e)));case r.Q.STYLE:return e instanceof jt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Nt);return e&&dt(e[1])===e[1]||t.match(Ft)&&function(t){for(var e=!0,i=!0,n=0;n<t.length;n++){var r=t.charAt(n);"'"===r&&i?e=!e:'"'===r&&e&&(i=!i)}return e&&i}(t)?t:(Object(r._6)()&&a().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case r.Q.SCRIPT:if(e instanceof Gt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.Q.URL:return e instanceof Ht||e instanceof Wt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),dt(String(e)));case r.Q.RESOURCE_URL:if(e instanceof Ht)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof zt)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Ut(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new jt(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Gt(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Wt(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Ht(t)},e.decorators=[{type:r.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.u,args:[g]}]}]},e}(Bt),zt=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(zt),jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(zt),Gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(zt),Wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(zt),Ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.b)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(zt),Xt=[{provide:r.I,useValue:n.q},{provide:r.J,useValue:function(){f.makeCurrent(),A.init()},multi:!0},{provide:n.p,useClass:_,deps:[g]},{provide:g,useFactory:function(){return document},deps:[]}],Yt=[{provide:r.P,useExisting:Bt},{provide:Bt,useClass:Vt,deps:[g]}],qt=Object(r._2)(r._7,"browser",Xt);function Kt(){return new r.q}var Qt=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:b,useExisting:r.a},x]}},t.decorators=[{type:r.C,args:[{providers:[Yt,{provide:r.q,useFactory:Kt,deps:[]},{provide:R,useClass:nt,multi:!0},{provide:R,useClass:ut,multi:!0},{provide:R,useClass:at,multi:!0},{provide:ot,useClass:st},j,{provide:r.N,useExisting:j},{provide:L,useExisting:k},k,r.V,I,M,v,w],exports:[n.b,r.d]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:r.G},{type:r.T}]}]},t}(),Zt="undefined"!=typeof window&&window||{},Jt=function(){return function(t,e){this.msPerTick=t,this.numTicks=e}}();!function(){function t(t){this.appRef=t.injector.get(r.e)}t.prototype.timeChangeDetection=function(t){var e=t&&t.record,i=null!=Zt.console.profile;e&&i&&Zt.console.profile("Change Detection");for(var n=a().performanceNow(),r=0;r<5||a().performanceNow()-n<500;)this.appRef.tick(),r++;var o=a().performanceNow();e&&i&&Zt.console.profileEnd("Change Detection");var s=(o-n)/r;return Zt.console.log("ran "+r+" change detection cycles"),Zt.console.log(s.toFixed(2)+" ms per check"),new Jt(s,r)}}();var $t=function(){function t(){this.store={},this.onSerializeCallbacks={}}return t.init=function(e){var i=new t;return i.store=e,i},t.prototype.get=function(t,e){return this.store[t]||e},t.prototype.set=function(t,e){this.store[t]=e},t.prototype.remove=function(t){delete this.store[t]},t.prototype.hasKey=function(t){return this.store.hasOwnProperty(t)},t.prototype.onSerialize=function(t,e){this.onSerializeCallbacks[t]=e},t.prototype.toJson=function(){for(var t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(t){console.warn("Exception in onSerialize callback: ",t)}return JSON.stringify(this.store)},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}();function te(t,e){var i,n,r=t.getElementById(e+"-state"),o={};if(r&&r.textContent)try{o=JSON.parse((i=r.textContent,n={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"},i.replace(/&[^;]+;/g,function(t){return n[t]})))}catch(t){console.warn("Exception while restoring TransferState for app "+e,t)}return $t.init(o)}(function(){function t(){}t.decorators=[{type:r.C,args:[{providers:[{provide:$t,useFactory:te,deps:[g,r.a]}]}]}],t.ctorParameters=function(){return[]}})(),function(){function t(){}t.all=function(){return function(t){return!0}},t.css=function(t){return function(e){return null!=e.nativeElement&&a().elementMatches(e.nativeElement,t)}},t.directive=function(t){return function(e){return-1!==e.providerTokens.indexOf(t)}}}(),new r.W("5.2.4")},S0PE:function(t,e,i){"use strict";i.d(e,"a",function(){return E}),i.d(e,"c",function(){return yt}),i.d(e,"f",function(){return _t}),i.d(e,"d",function(){return P}),i.d(e,"b",function(){return Yt}),i.d(e,"e",function(){return Qt}),i.d(e,"g",function(){return Zt});var n=i("fAeS"),r=i("6Xbx");function o(t){switch(t.length){case 0:return new n.d;case 1:return t[0];default:return new n.n(t)}}function s(t,e,i,r,o,s){void 0===o&&(o={}),void 0===s&&(s={});var a=[],l=[],c=-1,u=null;if(r.forEach(function(t){var i=t.offset,r=i==c,h=r&&u||{};Object.keys(t).forEach(function(i){var r=i,l=t[i];if("offset"!==i)switch(r=e.normalizePropertyName(r,a),l){case n.o:l=o[i];break;case n.a:l=s[i];break;default:l=e.normalizeStyleValue(i,r,l,a)}h[r]=l}),r||l.push(h),u=h,c=i}),a.length){throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "))}return l}function a(t,e,i,n){switch(e){case"start":t.onStart(function(){return n(i&&l(i,"start",t.totalTime))});break;case"done":t.onDone(function(){return n(i&&l(i,"done",t.totalTime))});break;case"destroy":t.onDestroy(function(){return n(i&&l(i,"destroy",t.totalTime))})}}function l(t,e,i){var n=c(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i),r=t._data;return null!=r&&(n._data=r),n}function c(t,e,i,n,r,o){return void 0===r&&(r=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:i,toState:n,phaseName:r,totalTime:o}}function u(t,e,i){var n;return t instanceof Map?(n=t.get(e))||t.set(e,n=i):(n=t[e])||(n=t[e]=i),n}function h(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var p=function(t,e){return!1},d=function(t,e){return!1},f=function(t,e,i){return[]};if("undefined"!=typeof Element){if(p=function(t,e){return t.contains(e)},Element.prototype.matches)d=function(t,e){return t.matches(e)};else{var m=Element.prototype,g=m.matchesSelector||m.mozMatchesSelector||m.msMatchesSelector||m.oMatchesSelector||m.webkitMatchesSelector;g&&(d=function(t,e){return g.apply(t,[e])})}f=function(t,e,i){var n=[];if(i)n.push.apply(n,t.querySelectorAll(e));else{var r=t.querySelector(e);r&&n.push(r)}return n}}var y=null,_=!1;function v(t){y||(y=b()||{},_=!!y.style&&"WebkitAppearance"in y.style);var e=!0;y.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in y.style)&&_&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in y.style));return e}function b(){return"undefined"!=typeof document?document.body:null}var x=d,A=p,w=f,P=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return v(t)},t.prototype.matchesElement=function(t,e){return x(t,e)},t.prototype.containsElement=function(t,e){return A(t,e)},t.prototype.query=function(t,e,i){return w(t,e,i)},t.prototype.computeStyle=function(t,e,i){return i||""},t.prototype.animate=function(t,e,i,r,o,s){return void 0===s&&(s=[]),new n.d},t}(),E=function(){function t(){}return t.NOOP=new P,t}(),T=1e3,S=".ng-trigger",C=".ng-animating";function O(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:M(parseFloat(e[1]),e[2])}function M(t,e){switch(e){case"s":return t*T;default:return t}}function R(t,e,i){return t.hasOwnProperty("duration")?t:function(t,e,i){var n,r=0,o="";if("string"==typeof t){var s=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};n=M(parseFloat(s[1]),s[2]);var a=s[3];null!=a&&(r=M(Math.floor(parseFloat(a)),s[4]));var l=s[5];l&&(o=l)}else n=t;if(!i){var c=!1,u=e.length;n<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(u,0,'The provided timing value "'+t+'" is invalid.')}return{duration:n,delay:r,easing:o}}(t,e,i)}function I(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function D(t){var e={};return Array.isArray(t)?t.forEach(function(t){return L(t,!1,e)}):L(t,!1,e),e}function L(t,e,i){if(void 0===i&&(i={}),e)for(var n in t)i[n]=t[n];else I(t,i);return i}function k(t,e){t.style&&Object.keys(e).forEach(function(i){var n=G(i);t.style[n]=e[i]})}function F(t,e){t.style&&Object.keys(e).forEach(function(e){var i=G(e);t.style[i]=""})}function N(t){return Array.isArray(t)?1==t.length?t[0]:Object(n.i)(t):t}var B=new RegExp("{{\\s*(.+?)\\s*}}","g");function V(t){var e=[];if("string"==typeof t){for(var i=t.toString(),n=void 0;n=B.exec(i);)e.push(n[1]);B.lastIndex=0}return e}function z(t,e,i){var n=t.toString(),r=n.replace(B,function(t,n){var r=e[n];return e.hasOwnProperty(n)||(i.push("Please provide a value for the animation param "+n),r=""),r.toString()});return r==n?t:r}function U(t){for(var e=[],i=t.next();!i.done;)e.push(i.value),i=t.next();return e}var j=/-+([a-z0-9])/g;function G(t){return t.replace(j,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function W(t,e,i){switch(e.type){case 7:return t.visitTrigger(e,i);case 0:return t.visitState(e,i);case 1:return t.visitTransition(e,i);case 2:return t.visitSequence(e,i);case 3:return t.visitGroup(e,i);case 4:return t.visitAnimate(e,i);case 5:return t.visitKeyframes(e,i);case 6:return t.visitStyle(e,i);case 8:return t.visitReference(e,i);case 9:return t.visitAnimateChild(e,i);case 10:return t.visitAnimateRef(e,i);case 11:return t.visitQuery(e,i);case 12:return t.visitStagger(e,i);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}var H="*";function X(t,e){var i=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(function(t){return function(t,e,i){if(":"==t[0]){var n=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,i);if("function"==typeof n)return void e.push(n);t=n}var r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return i.push('The provided transition expression "'+t+'" is not supported'),e;var o=r[1],s=r[2],a=r[3];e.push(K(o,a));var l=o==H&&a==H;"<"!=s[0]||l||e.push(K(a,o))}(t,i,e)}):i.push(t),i}var Y=new Set(["true","1"]),q=new Set(["false","0"]);function K(t,e){var i=Y.has(t)||q.has(t),n=Y.has(e)||q.has(e);return function(r,o){var s=t==H||t==r,a=e==H||e==o;return!s&&i&&"boolean"==typeof r&&(s=r?Y.has(t):q.has(t)),!a&&n&&"boolean"==typeof o&&(a=o?Y.has(e):q.has(e)),s&&a}}var Q=":self",Z=new RegExp("s*"+Q+"s*,?","g");function J(t,e,i){return new $(t).build(e,i)}var $=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var i=new tt(e);return this._resetContextStyleTimingState(i),W(this,N(t),i)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var i=this,n=e.queryCount=0,r=e.depCount=0,o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(i._resetContextStyleTimingState(e),0==t.type){var a=t,l=a.name;l.split(/\s*,\s*/).forEach(function(t){a.name=t,o.push(i.visitState(a,e))}),a.name=l}else if(1==t.type){var c=i.visitTransition(t,e);n+=c.queryCount,r+=c.depCount,s.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:s,queryCount:n,depCount:r,options:null}},t.prototype.visitState=function(t,e){var i=this.visitStyle(t.styles,e),n=t.options&&t.options.params||null;if(i.containsDynamicStyles){var r=new Set,o=n||{};if(i.styles.forEach(function(t){if(et(t)){var e=t;Object.keys(e).forEach(function(t){V(e[t]).forEach(function(t){o.hasOwnProperty(t)||r.add(t)})})}}),r.size){var s=U(r.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+s.join(", "))}}return{type:0,name:t.name,style:i,options:n?{params:n}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var i=W(this,N(t.animation),e);return{type:1,matchers:X(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:it(t.options)}},t.prototype.visitSequence=function(t,e){var i=this;return{type:2,steps:t.steps.map(function(t){return W(i,t,e)}),options:it(t.options)}},t.prototype.visitGroup=function(t,e){var i=this,n=e.currentTime,r=0,o=t.steps.map(function(t){e.currentTime=n;var o=W(i,t,e);return r=Math.max(r,e.currentTime),o});return e.currentTime=r,{type:3,steps:o,options:it(t.options)}},t.prototype.visitAnimate=function(t,e){var i,r=function(t,e){var i=null;if(t.hasOwnProperty("duration"))i=t;else if("number"==typeof t){var n=R(t,e).duration;return nt(n,0,"")}var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var o=nt(0,0,"");return o.dynamic=!0,o.strValue=r,o}return nt((i=i||R(r,e)).duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var o=t.styles?t.styles:Object(n.k)({});if(5==o.type)i=this.visitKeyframes(o,e);else{var s=t.styles,a=!1;if(!s){a=!0;var l={};r.easing&&(l.easing=r.easing),s=Object(n.k)(l)}e.currentTime+=r.duration+r.delay;var c=this.visitStyle(s,e);c.isEmptyStep=a,i=c}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}},t.prototype.visitStyle=function(t,e){var i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i},t.prototype._makeStyleAst=function(t,e){var i=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==n.a?i.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):i.push(t)}):i.push(t.styles);var r=!1,o=null;return i.forEach(function(t){if(et(t)){var e=t,i=e.easing;if(i&&(o=i,delete e.easing),!r)for(var n in e){if(e[n].toString().indexOf("{{")>=0){r=!0;break}}}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var i=this,n=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(n){if(i._driver.validateStyleProperty(n)){var s,a,l,c,u,h=e.collectedStyles[e.currentQuerySelector],p=h[n],d=!0;p&&(o!=r&&o>=p.startTime&&r<=p.endTime&&(e.errors.push('The CSS property "'+n+'" that exists between the times of "'+p.startTime+'ms" and "'+p.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+r+'ms"'),d=!1),o=p.startTime),d&&(h[n]={startTime:o,endTime:r}),e.options&&(s=t[n],a=e.options,l=e.errors,c=a.params||{},(u=V(s)).length&&u.forEach(function(t){c.hasOwnProperty(t)||l.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+n+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var i=this,n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;var r=0,o=[],s=!1,a=!1,l=0,c=t.steps.map(function(t){var n=i._makeStyleAst(t,e),c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(et(t)&&t.hasOwnProperty("offset")){var i=t;e=parseFloat(i.offset),delete i.offset}});else if(et(t)&&t.hasOwnProperty("offset")){var i=t;e=parseFloat(i.offset),delete i.offset}return e}(n.styles),u=0;return null!=c&&(r++,u=n.offset=c),a=a||u<0||u>1,s=s||u<l,l=u,o.push(u),n});a&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");var u=t.steps.length,h=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(u-1));var p=u-1,d=e.currentTime,f=e.currentAnimateTimings,m=f.duration;return c.forEach(function(t,r){var s=h>0?r==p?1:h*r:o[r],a=s*m;e.currentTime=d+f.delay+a,f.duration=a,i._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n},t.prototype.visitReference=function(t,e){return{type:8,animation:W(this,N(t.animation),e),options:it(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:it(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:it(t.options)}},t.prototype.visitQuery=function(t,e){var i=e.currentQuerySelector,n=t.options||{};e.queryCount++,e.currentQuery=t;var r=function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return t==Q});e&&(t=t.replace(Z,""));return[t=t.replace(/@\*/g,S).replace(/@\w+/g,function(t){return S+"-"+t.substr(1)}).replace(/:animating/g,C),e]}(t.selector),o=r[0],s=r[1];e.currentQuerySelector=i.length?i+" "+o:o,u(e.collectedStyles,e.currentQuerySelector,{});var a=W(this,N(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:n.limit||0,optional:!!n.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:it(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var i="full"===t.timings?{duration:0,delay:0,easing:"full"}:R(t.timings,e.errors,!0);return{type:12,animation:W(this,N(t.animation),e),timings:i,options:null}},t}();var tt=function(){return function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}();function et(t){return!Array.isArray(t)&&"object"==typeof t}function it(t){var e;return t?(t=I(t)).params&&(t.params=(e=t.params)?I(e):null):t={},t}function nt(t,e,i){return{duration:t,delay:e,easing:i}}function rt(t,e,i,n,r,o,s,a){return void 0===s&&(s=null),void 0===a&&(a=!1),{type:1,element:t,keyframes:e,preStyleProps:i,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var ot=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var i=this._map.get(t);i||this._map.set(t,i=[]),i.push.apply(i,e)},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),st=new RegExp(":enter","g"),at=new RegExp(":leave","g");function lt(t,e,i,n,r,o,s,a,l,c){return void 0===o&&(o={}),void 0===s&&(s={}),void 0===c&&(c=[]),(new ct).buildKeyframes(t,e,i,n,r,o,s,a,l,c)}var ct=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,i,n,r,o,s,a,l,c){void 0===c&&(c=[]),l=l||new ot;var u=new ht(t,e,l,n,r,c,[]);u.options=a,u.currentTimeline.setStyles([o],null,u.errors,a),W(this,i,u);var h=u.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(s).length){var p=h[h.length-1];p.allowOnlyTimelineStyles()||p.setStyles([s],null,u.errors,a)}return h.length?h.map(function(t){return t.buildKeyframes()}):[rt(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var i=e.subInstructions.consume(e.element);if(i){var n=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,n,n.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,i){var n=e.currentTimeline.currentTime,r=null!=i.duration?O(i.duration):null,o=null!=i.delay?O(i.delay):null;return 0!==r&&t.forEach(function(t){var i=e.appendInstructionToTimeline(t,r,o);n=Math.max(n,i.duration+i.delay)}),n},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),W(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var i=this,n=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&((r=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ut);var s=O(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(function(t){return W(i,t,r)}),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var i=this,n=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?O(t.options.delay):0;t.steps.forEach(function(s){var a=e.createSubContext(t.options);o&&a.delayNextStep(o),W(i,s,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(r),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var i=t.strValue;return R(e.params?z(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var i=e.currentAnimateTimings=this._visitTiming(t.timings,e),n=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),n.snapshotCurrentStyles());var r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var i=e.currentTimeline,n=e.currentAnimateTimings;!n&&i.getCurrentStyleProperties().length&&i.forwardFrame();var r=n&&n.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(r):i.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var i=e.currentAnimateTimings,n=e.currentTimeline.duration,r=i.duration,o=e.createSubContext().currentTimeline;o.easing=i.easing,t.styles.forEach(function(t){var i=t.offset||0;o.forwardTime(i*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(n+r),e.previousNode=t},t.prototype.visitQuery=function(t,e){var i=this,n=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?O(r.delay):0;o&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ut);var s=n,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;var l=null;a.forEach(function(n,r){e.currentQueryIndex=r;var a=e.createSubContext(t.options,n);o&&a.delayNextStep(o),n===e.element&&(l=a.currentTimeline),W(i,t.animation,a),a.currentTimeline.applyStylesToKeyframe();var c=a.currentTimeline.currentTime;s=Math.max(s,c)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var i=e.parentContext,n=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),s=o*(e.currentQueryTotal-1),a=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=s-a;break;case"full":a=i.currentStaggerTime}var l=e.currentTimeline;a&&l.delayNextStep(a);var c=l.currentTime;W(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=n.currentTime-c+(n.startTime-i.currentTimeline.startTime)},t}(),ut={},ht=function(){function t(t,e,i,n,r,o,s,a){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=r,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ut,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new pt(this._driver,e,0),s.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var i=this;if(t){var n=t,r=this.options;null!=n.duration&&(r.duration=O(n.duration)),null!=n.delay&&(r.delay=O(n.delay));var o=n.params;if(o){var s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(function(t){e&&s.hasOwnProperty(t)||(s[t]=z(o[t],s,i.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var i=t.params={};Object.keys(e).forEach(function(t){i[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,i,n){void 0===e&&(e=null);var r=i||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=ut,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,i){var n={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},r=new dt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,n,t.stretchStartingKeyframe);return this.timelines.push(r),n},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,i,n,r,o){var s=[];if(n&&s.push(this.element),t.length>0){t=(t=t.replace(st,"."+this._enterClassName)).replace(at,"."+this._leaveClassName);var a=1!=i,l=this._driver.query(this.element,t,a);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),s.push.apply(s,l)}return r||0!=s.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),s},t}(),pt=function(){function t(t,e,i,n){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=n,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,i){return this.applyStylesToKeyframe(),new t(this._driver,e,i||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||n.a,e._currentKeyframe[t]=n.a}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,i,r){var o=this;e&&(this._previousKeyframe.easing=e);var s=r&&r.params||{},a=function(t,e){var i,r={};return t.forEach(function(t){"*"===t?(i=i||Object.keys(e)).forEach(function(t){r[t]=n.a}):L(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=z(a[t],s,i);o._pendingStyles[t]=e,o._localTimelineStyles.hasOwnProperty(t)||(o._backFill[t]=o._globalTimelineStyles.hasOwnProperty(t)?o._globalTimelineStyles[t]:n.a),o._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,i=Object.keys(e);0!=i.length&&(this._pendingStyles={},i.forEach(function(i){var n=e[i];t._currentKeyframe[i]=n}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var i=t._localTimelineStyles[e];t._pendingStyles[e]=i,t._updateStyle(e,i)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(i){var n=e._styleSummary[i],r=t._styleSummary[i];(!n||r.time>n.time)&&e._updateStyle(i,r.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,i=new Set,r=1===this._keyframes.size&&0===this.duration,o=[];this._keyframes.forEach(function(s,a){var l=L(s,!0);Object.keys(l).forEach(function(t){var r=l[t];r==n.o?e.add(t):r==n.a&&i.add(t)}),r||(l.offset=a/t.duration),o.push(l)});var s=e.size?U(e.values()):[],a=i.size?U(i.values()):[];if(r){var l=o[0],c=I(l);l.offset=0,c.offset=1,o=[l,c]}return rt(this.element,o,s,a,this.duration,this.startTime,this.easing,!1)},t}(),dt=function(t){function e(e,i,n,r,o,s,a){void 0===a&&(a=!1);var l=t.call(this,e,i,s.delay)||this;return l.element=i,l.keyframes=n,l.preStyleProps=r,l.postStyleProps=o,l._stretchStartingKeyframe=a,l.timings={duration:s.duration,delay:s.delay,easing:s.easing},l}return Object(r.b)(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,i=e.delay,n=e.duration,r=e.easing;if(this._stretchStartingKeyframe&&i){var o=[],s=n+i,a=i/s,l=L(t[0],!1);l.offset=0,o.push(l);var c=L(t[0],!1);c.offset=ft(a),o.push(c);for(var u=t.length-1,h=1;h<=u;h++){var p=L(t[h],!1),d=i+p.offset*n;p.offset=ft(d/s),o.push(p)}n=s,i=0,r="",t=o}return rt(this.element,t,this.preStyleProps,this.postStyleProps,n,i,r,!0)},e}(pt);function ft(t,e){void 0===e&&(e=3);var i=Math.pow(10,e-1);return Math.round(t*i)/i}!function(){function t(t,e){this._driver=t;var i=[],n=J(t,e,i);if(i.length){var r="animation validation failed:\n"+i.join("\n");throw new Error(r)}this._animationAst=n}t.prototype.buildTimelines=function(t,e,i,n,r){var o=Array.isArray(e)?D(e):e,s=Array.isArray(i)?D(i):i,a=[];r=r||new ot;var l=lt(this._driver,t,this._animationAst,"ng-enter","ng-leave",o,s,n,r,a);if(a.length){var c="animation building failed:\n"+a.join("\n");throw new Error(c)}return l}}();var mt,gt,yt=function(){return function(){}}(),_t=(function(){function t(){}t.prototype.normalizePropertyName=function(t,e){return t},t.prototype.normalizeStyleValue=function(t,e,i,n){return i}}(),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.normalizePropertyName=function(t,e){return G(t)},e.prototype.normalizeStyleValue=function(t,e,i,n){var r="",o=i.toString().trim();if(vt[e]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{var s=i.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&n.push("Please provide a CSS unit value for "+t+":"+i)}return o+r},e}(yt)),vt=(mt="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),gt={},mt.forEach(function(t){return gt[t]=!0}),gt);function bt(t,e,i,n,r,o,s,a,l,c,u,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:i,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,errors:h}}var xt={},At=function(){function t(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}return t.prototype.match=function(t,e){return function(t,e,i){return t.some(function(t){return t(e,i)})}(this.ast.matchers,t,e)},t.prototype.buildStyles=function(t,e,i){var n=this._stateStyles["*"],r=this._stateStyles[t],o=n?n.buildStyles(e,i):{};return r?r.buildStyles(e,i):o},t.prototype.build=function(t,e,i,n,o,s,a,l,c){var h=[],p=this.ast.options&&this.ast.options.params||xt,d=a&&a.params||xt,f=this.buildStyles(i,d,h),m=l&&l.params||xt,g=this.buildStyles(n,m,h),y=new Set,_=new Map,v=new Map,b="void"===n,x={params:Object(r.a)({},p,m)},A=lt(t,e,this.ast.animation,o,s,f,g,x,c,h);if(h.length)return bt(e,this._triggerName,i,n,b,f,g,[],[],_,v,h);A.forEach(function(t){var i=t.element,n=u(_,i,{});t.preStyleProps.forEach(function(t){return n[t]=!0});var r=u(v,i,{});t.postStyleProps.forEach(function(t){return r[t]=!0}),i!==e&&y.add(i)});var w=U(y.values());return bt(e,this._triggerName,i,n,b,f,g,A,w,_,v)},t}();var wt=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var i={},n=I(this.defaultParams);return Object.keys(t).forEach(function(e){var i=t[e];null!=i&&(n[e]=i)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var r=t;Object.keys(r).forEach(function(t){var o=r[t];o.length>1&&(o=z(o,n,e)),i[t]=o})}}),i},t}();var Pt=function(){function t(t,e){var i,n,r=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){var e=t.options&&t.options.params||{};r.states[t.name]=new wt(t.style,e)}),Et(this.states,"true","1"),Et(this.states,"false","0"),e.transitions.forEach(function(e){r.transitionFactories.push(new At(t,e,r.states))}),this.fallbackTransition=(i=t,n=this.states,new At(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},n))}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e){return this.transitionFactories.find(function(i){return i.match(t,e)})||null},t.prototype.matchStyles=function(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)},t}();function Et(t,e,i){t.hasOwnProperty(e)?t.hasOwnProperty(i)||(t[i]=t[e]):t.hasOwnProperty(i)&&(t[e]=t[i])}var Tt=new ot,St=function(){function t(t,e){this._driver=t,this._normalizer=e,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var i=[],n=J(this._driver,e,i);if(i.length)throw new Error("Unable to build the animation due to the following errors: "+i.join("\n"));this._animations[t]=n},t.prototype._buildPlayer=function(t,e,i){var n=t.element,r=s(this._driver,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(n,r,t.duration,t.delay,t.easing,[])},t.prototype.create=function(t,e,i){var r=this;void 0===i&&(i={});var s,a=[],l=this._animations[t],c=new Map;if(l?(s=lt(this._driver,e,l,"ng-enter","ng-leave",{},{},i,Tt,a)).forEach(function(t){var e=u(c,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(a.push("The requested animation doesn't exist or has already been destroyed"),s=[]),a.length)throw new Error("Unable to create the animation due to the following errors: "+a.join("\n"));c.forEach(function(t,e){Object.keys(t).forEach(function(i){t[i]=r._driver.computeStyle(e,i,n.a)})});var h=o(s.map(function(t){var e=c.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=h,h.onDestroy(function(){return r.destroy(t)}),this.players.push(h),h},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,i,n){var r=c(e,"","","");return a(this._getPlayer(t),i,r,n),function(){}},t.prototype.command=function(t,e,i,n){if("register"!=i)if("create"!=i){var r=this._getPlayer(t);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(t)}}else{var o=n[0]||{};this.create(t,e,o)}else this.register(t,n[0])},t}(),Ct=[],Ot={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},Mt={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},Rt="__ng_removed",It=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var i=t&&t.hasOwnProperty("value"),n=i?t.value:t;if(this.value=function(t){return null!=t?t:null}(n),i){var r=I(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var i=this.options.params;Object.keys(e).forEach(function(t){null==i[t]&&(i[t]=e[t])})}},t}(),Dt=new It("void"),Lt=new It("DELETED"),kt=function(){function t(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Gt(e,this._hostClassName)}return t.prototype.listen=function(t,e,i,n){var r,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+i+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==i||0==i.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(r=i)&&"done"!=r)throw new Error('The provided animation trigger event "'+i+'" for the animation trigger "'+e+'" is not supported!');var s=u(this._elementListeners,t,[]),a={name:e,phase:i,callback:n};s.push(a);var l=u(this._engine.statesByElement,t,{});return l.hasOwnProperty(e)||(Gt(t,"ng-trigger"),Gt(t,"ng-trigger-"+e),l[e]=Dt),function(){o._engine.afterFlush(function(){var t=s.indexOf(a);t>=0&&s.splice(t,1),o._triggers[e]||delete l[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,i,n){var r=this;void 0===n&&(n=!0);var o=this._getTrigger(e),s=new Nt(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Gt(t,"ng-trigger"),Gt(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,a={}));var l=a[e],c=new It(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l){if(l===Lt)return s}else l=Dt;if("void"===c.value||l.value!==c.value){var h=u(this._engine.playersByElement,t,[]);h.forEach(function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()});var p=o.matchTransition(l.value,c.value),d=!1;if(!p){if(!n)return;p=o.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:p,fromState:l,toState:c,player:s,isFallbackTransition:d}),d||(Gt(t,"ng-animate-queued"),s.onStart(function(){Wt(t,"ng-animate-queued")})),s.onDone(function(){var e=r.players.indexOf(s);e>=0&&r.players.splice(e,1);var i=r._engine.playersByElement.get(t);if(i){var n=i.indexOf(s);n>=0&&i.splice(n,1)}}),this.players.push(s),h.push(s),s}if(!function(t,e){var i=Object.keys(t),n=Object.keys(e);if(i.length!=n.length)return!1;for(var r=0;r<i.length;r++){var o=i[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(l.params,c.params)){var f=[],m=o.matchStyles(l.value,l.params,f),g=o.matchStyles(c.value,c.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){F(t,m),k(t,g)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,i){delete e[t]}),this._elementListeners.forEach(function(i,n){e._elementListeners.set(n,i.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,i){var n=this;void 0===i&&(i=!1),this._engine.driver.query(t,S,!0).forEach(function(t){if(!t[Rt]){var i=n._engine.fetchNamespacesByElement(t);i.size?i.forEach(function(i){return i.triggerLeaveAnimation(t,e,!1,!0)}):n.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,i,n){var r=this,s=this._engine.statesByElement.get(t);if(s){var a=[];if(Object.keys(s).forEach(function(e){if(r._triggers[e]){var i=r.trigger(t,e,"void",n);i&&a.push(i)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),i&&o(a).onDone(function(){return r._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,i=this._elementListeners.get(t);if(i){var n=new Set;i.forEach(function(i){var r=i.name;if(!n.has(r)){n.add(r);var o=e._triggers[r].fallbackTransition,s=e._engine.statesByElement.get(t)[r]||Dt,a=new It("void"),l=new Nt(e.id,r,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:r,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var i=this,n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var r=!1;if(n.totalAnimations){var o=n.players.length?n.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else for(var s=t;s=s.parentNode;){if(n.statesByElement.get(s)){r=!0;break}}}this.prepareLeaveAnimationListeners(t),r?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(function(){return i.clearElementCache(t)}),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){Gt(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,i=[];return this._queue.forEach(function(n){var r=n.player;if(!r.destroyed){var o=n.element,s=e._elementListeners.get(o);s&&s.forEach(function(e){if(e.name==n.triggerName){var i=c(o,n.triggerName,n.fromState.value,n.toState.value);i._data=t,a(n.player,e.phase,i,e.callback)}}),r.markedForDestroy?e._engine.afterFlush(function(){r.destroy()}):i.push(n)}}),this._queue=[],i.sort(function(t,i){var n=t.transition.ast.depCount,r=i.transition.ast.depCount;return 0==n||0==r?n-r:e._engine.driver.containsElement(t.element,i.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(function(e){return e.element===t})||e},t}(),Ft=function(){function t(t,e){this.driver=t,this._normalizer=e,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var i=new kt(t,e,this);return e.parentNode?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i},t.prototype._balanceNamespaceList=function(t,e){var i=this._namespaceList.length-1;if(i>=0){for(var n=!1,r=i;r>=0;r--){var o=this._namespaceList[r];if(this.driver.containsElement(o.hostElement,e)){this._namespaceList.splice(r+1,0,t),n=!0;break}}n||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i},t.prototype.registerTrigger=function(t,e,i){var n=this._namespaceLookup[t];n&&n.register(e,i)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var i=this;if(t){var n=this._fetchNamespace(t);this.afterFlush(function(){i.namespacesByHostElement.delete(n.hostElement),delete i._namespaceLookup[t];var e=i._namespaceList.indexOf(n);e>=0&&i._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return n.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,i=this.statesByElement.get(t);if(i)for(var n=Object.keys(i),r=0;r<n.length;r++){var o=i[n[r]].namespaceId;if(o){var s=this._fetchNamespace(o);s&&e.add(s)}}return e},t.prototype.trigger=function(t,e,i,n){return!!Bt(e)&&(this._fetchNamespace(t).trigger(e,i,n),!0)},t.prototype.insertNode=function(t,e,i,n){if(Bt(e)){var r=e[Rt];r&&r.setForRemoval&&(r.setForRemoval=!1),t&&this._fetchNamespace(t).insertNode(e,i),n&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Gt(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Wt(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,i){if(Bt(e)){var n=t?this._fetchNamespace(t):null;n?n.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i)}else this._onRemovalComplete(e,i)},t.prototype.markElementAsRemoved=function(t,e,i,n){this.collectedLeaveElements.push(e),e[Rt]={namespaceId:t,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,i,n,r){return Bt(e)?this._fetchNamespace(t).listen(e,i,n,r):function(){}},t.prototype._buildInstruction=function(t,e,i,n){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,n,t.fromState.options,t.toState.options,e)},t.prototype.destroyInnerAnimations=function(t){var e=this,i=this.driver.query(t,S,!0);i.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(i=this.driver.query(t,C,!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()});var i=this.statesByElement.get(t);i&&Object.keys(i).forEach(function(t){return i[t]=Lt})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return o(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,i=t[Rt];if(i&&i.setForRemoval){if(t[Rt]=Ot,i.namespaceId){this.destroyInnerAnimations(t);var n=this._fetchNamespace(i.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(i){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var i=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,i){return e._balanceNamespaceList(t,i)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var n=0;n<this.collectedEnterElements.length;n++){Gt(this.collectedEnterElements[n],"ng-star-inserted")}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{i=this._flushAnimations(r,t)}finally{for(n=0;n<r.length;n++)r[n]()}}else for(n=0;n<this.collectedLeaveElements.length;n++){var s=this.collectedLeaveElements[n];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var a=this._whenQuietFns;this._whenQuietFns=[],i.length?o(i).onDone(function(){a.forEach(function(t){return t()})}):a.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var i=this,s=new ot,a=[],l=new Map,c=[],h=new Map,p=new Map,d=new Map,f=new Set;this.disabledNodes.forEach(function(t){f.add(t);for(var e=i.driver.query(t,".ng-animate-queued",!0),n=0;n<e.length;n++)f.add(e[n])});var m=b(),g=Array.from(this.statesByElement.keys()),y=Ut(g,this.collectedEnterElements),_=new Map,v=0;y.forEach(function(t,e){var i="ng-enter"+v++;_.set(e,i),t.forEach(function(t){return Gt(t,i)})});for(var x=[],A=new Set,w=new Set,P=0;P<this.collectedLeaveElements.length;P++){(W=(G=this.collectedLeaveElements[P])[Rt])&&W.setForRemoval&&(x.push(G),A.add(G),W.hasAnimation?this.driver.query(G,".ng-star-inserted",!0).forEach(function(t){return A.add(t)}):w.add(G))}var E=new Map,T=Ut(g,Array.from(A));T.forEach(function(t,e){var i="ng-leave"+v++;E.set(e,i),t.forEach(function(t){return Gt(t,i)})}),t.push(function(){y.forEach(function(t,e){var i=_.get(e);t.forEach(function(t){return Wt(t,i)})}),T.forEach(function(t,e){var i=E.get(e);t.forEach(function(t){return Wt(t,i)})}),x.forEach(function(t){i.processLeaveNode(t)})});for(var S=[],O=[],M=this._namespaceList.length-1;M>=0;M--){this._namespaceList[M].drainQueuedTransitions(e).forEach(function(t){var e=t.player;S.push(e);var n=t.element;if(m&&i.driver.containsElement(m,n)){var r=E.get(n),o=_.get(n),l=i._buildInstruction(t,s,o,r);if(l.errors&&l.errors.length)O.push(l);else{if(t.isFallbackTransition)return e.onStart(function(){return F(n,l.fromStyles)}),e.onDestroy(function(){return k(n,l.toStyles)}),void a.push(e);l.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),s.append(n,l.timelines);var f={instruction:l,player:e,element:n};c.push(f),l.queriedElements.forEach(function(t){return u(h,t,[]).push(e)}),l.preStyleProps.forEach(function(t,e){var i=Object.keys(t);if(i.length){var n=p.get(e);n||p.set(e,n=new Set),i.forEach(function(t){return n.add(t)})}}),l.postStyleProps.forEach(function(t,e){var i=Object.keys(t),n=d.get(e);n||d.set(e,n=new Set),i.forEach(function(t){return n.add(t)})})}}else e.destroy()})}if(O.length){var R=[];O.forEach(function(t){R.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return R.push("- "+t+"\n")})}),S.forEach(function(t){return t.destroy()}),this.reportError(R)}var I=new Map,D=new Map;c.forEach(function(t){var e=t.element;s.has(e)&&(D.set(e,e),i._beforeAnimationBuild(t.player.namespaceId,t.instruction,I))}),a.forEach(function(t){var e=t.element;i._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){u(I,e,[]).push(t),t.destroy()})});var L=x.filter(function(t){return Xt(t,p,d)}),N=new Map;zt(N,this.driver,w,d,n.a).forEach(function(t){Xt(t,p,d)&&L.push(t)});var B=new Map;y.forEach(function(t,e){zt(B,i.driver,new Set(t),p,n.o)}),L.forEach(function(t){var e=N.get(t),i=B.get(t);N.set(t,Object(r.a)({},e,i))});var V=[],z=[],U={};c.forEach(function(t){var e=t.element,n=t.player,r=t.instruction;if(s.has(e)){if(f.has(e))return n.onDestroy(function(){return k(e,r.toStyles)}),void a.push(n);var c=U;if(D.size>1){for(var u=e,h=[];u=u.parentNode;){var p=D.get(u);if(p){c=p;break}h.push(u)}h.forEach(function(t){return D.set(t,c)})}var d=i._buildAnimation(n.namespaceId,r,I,l,B,N);if(n.setRealPlayer(d),c===U)V.push(n);else{var m=i.playersByElement.get(c);m&&m.length&&(n.parentPlayer=o(m)),a.push(n)}}else F(e,r.fromStyles),n.onDestroy(function(){return k(e,r.toStyles)}),z.push(n),f.has(e)&&a.push(n)}),z.forEach(function(t){var e=l.get(t.element);if(e&&e.length){var i=o(e);t.setRealPlayer(i)}}),a.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var j=0;j<x.length;j++){var G,W=(G=x[j])[Rt];if(Wt(G,"ng-leave"),!W||!W.hasAnimation){var H=[];if(h.size){var X=h.get(G);X&&X.length&&H.push.apply(H,X);for(var Y=this.driver.query(G,C,!0),q=0;q<Y.length;q++){var K=h.get(Y[q]);K&&K.length&&H.push.apply(H,K)}}var Q=H.filter(function(t){return!t.destroyed});Q.length?Ht(this,G,Q):this.processLeaveNode(G)}}return x.length=0,V.forEach(function(t){i.players.push(t),t.onDone(function(){t.destroy();var e=i.players.indexOf(t);i.players.splice(e,1)}),t.play()}),V},t.prototype.elementContainsData=function(t,e){var i=!1,n=e[Rt];return n&&n.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,i,n,r){var o=[];if(e){var s=this.playersByQueriedElement.get(t);s&&(o=s)}else{var a=this.playersByElement.get(t);if(a){var l=!r||"void"==r;a.forEach(function(t){t.queued||(l||t.triggerName==n)&&o.push(t)})}}return(i||n)&&(o=o.filter(function(t){return(!i||i==t.namespaceId)&&(!n||n==t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,i){for(var n=e.triggerName,r=e.element,o=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:n,a=function(t){var n=t.element,a=n!==r,c=u(i,n,[]);l._getPreviousPlayers(n,a,o,s,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})},l=this,c=0,h=e.timelines;c<h.length;c++){a(h[c])}F(r,e.fromStyles)},t.prototype._buildAnimation=function(t,e,i,r,a,l){var c=this,h=e.triggerName,p=e.element,d=[],f=new Set,m=new Set,g=e.timelines.map(function(e){var o=e.element;f.add(o);var u=o[Rt];if(u&&u.removedBeforeQueried)return new n.d;var g,y,_=o!==p,v=(g=(i.get(o)||Ct).map(function(t){return t.getRealPlayer()}),y=[],function t(e,i){for(var r=0;r<e.length;r++){var o=e[r];o instanceof n.n?t(o.players,i):i.push(o)}}(g,y),y).filter(function(t){var e=t;return!!e.element&&e.element===o}),b=a.get(o),x=l.get(o),A=s(c.driver,c._normalizer,0,e.keyframes,b,x),w=c._buildPlayer(e,A,v);if(e.subTimeline&&r&&m.add(o),_){var P=new Nt(t,h,o);P.setRealPlayer(w),d.push(P)}return w});d.forEach(function(t){u(c.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,i){var n;if(t instanceof Map){if(n=t.get(e)){if(n.length){var r=n.indexOf(i);n.splice(r,1)}0==n.length&&t.delete(e)}}else if(n=t[e]){if(n.length){var r=n.indexOf(i);n.splice(r,1)}0==n.length&&delete t[e]}return n}(c.playersByQueriedElement,t.element,t)})}),f.forEach(function(t){return Gt(t,"ng-animating")});var y=o(g);return y.onDestroy(function(){f.forEach(function(t){return Wt(t,"ng-animating")}),k(p,e.toStyles)}),m.forEach(function(t){u(r,t,[]).push(y)}),y},t.prototype._buildPlayer=function(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new n.d},t}(),Nt=function(){function t(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new n.d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.queued=!0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(i){e._queuedCallbacks[i].forEach(function(e){return a(t,i,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.syncPlayerEvents=function(t){var e=this,i=this._player;i.triggerCallback&&t.onStart(function(){return i.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){u(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._player.totalTime},enumerable:!0,configurable:!0}),t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function Bt(t){return t&&1===t.nodeType}function Vt(t,e){var i=t.style.display;return t.style.display=null!=e?e:"none",i}function zt(t,e,i,n,r){var o=[];i.forEach(function(t){return o.push(Vt(t))});var s=[];n.forEach(function(i,n){var o={};i.forEach(function(t){var i=o[t]=e.computeStyle(n,t,r);i&&0!=i.length||(n[Rt]=Mt,s.push(n))}),t.set(n,o)});var a=0;return i.forEach(function(t){return Vt(t,o[a++])}),s}function Ut(t,e){var i=new Map;if(t.forEach(function(t){return i.set(t,[])}),0==e.length)return i;var n=1,r=new Set(e),o=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return n;var s=o.get(e);if(s)return s;var a=e.parentNode;return s=i.has(a)?a:r.has(a)?n:t(a),o.set(e,s),s}(t);e!==n&&i.get(e).push(t)}),i}var jt="$$classes";function Gt(t,e){if(t.classList)t.classList.add(e);else{var i=t[jt];i||(i=t[jt]={}),i[e]=!0}}function Wt(t,e){if(t.classList)t.classList.remove(e);else{var i=t[jt];i&&delete i[e]}}function Ht(t,e,i){o(i).onDone(function(){return t.processLeaveNode(e)})}function Xt(t,e,i){var n=i.get(t);if(!n)return!1;var r=e.get(t);return r?n.forEach(function(t){return r.add(t)}):e.set(t,n),i.delete(t),!0}var Yt=function(){function t(t,e){var i=this;this._driver=t,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Ft(t,e),this._timelineEngine=new St(t,e),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,i,n,r){var o=t+"-"+n,s=this._triggerCache[o];if(!s){var a=[],l=J(this._driver,r,a);if(a.length)throw new Error('The animation trigger "'+n+'" has failed to build due to the following errors:\n - '+a.join("\n - "));s=function(t,e){return new Pt(t,e)}(n,l),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,n,s)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,i,n){this._transitionEngine.insertNode(t,e,i,n)},t.prototype.onRemove=function(t,e,i){this._transitionEngine.removeNode(t,e,i)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,i,n){if("@"==i.charAt(0)){var r=h(i),o=r[0],s=r[1],a=n;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,i,n)},t.prototype.listen=function(t,e,i,n,r){if("@"==i.charAt(0)){var o=h(i),s=o[0],a=o[1];return this._timelineEngine.listen(s,e,a,r)}return this._transitionEngine.listen(t,e,i,n,r)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),qt=function(){function t(t,e,i,n){void 0===n&&(n=[]);var r,o,s=this;this.element=t,this.keyframes=e,this.options=i,this.previousPlayers=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay,r=this._duration,o=this._delay,(0===r||0===o)&&n.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return s.previousStyles[t]=e[t]})})}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes.map(function(t){return L(t,!1)}),i=Object.keys(this.previousStyles);if(i.length&&e.length){var n=e[0],r=[];if(i.forEach(function(e){n.hasOwnProperty(e)||r.push(e),n[e]=t.previousStyles[e]}),r.length)for(var o=this,s=function(){var t=e[a];r.forEach(function(e){t[e]=Kt(o.element,e)})},a=1;a<e.length;a++)s()}this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,i){return t.animate(e,i)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(i){"offset"!=i&&(e[i]=t._finished?t._finalKeyframe[i]:Kt(t.element,i))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}();function Kt(t,e){return window.getComputedStyle(t)[e]}var Qt=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return v(t)},t.prototype.matchesElement=function(t,e){return x(t,e)},t.prototype.containsElement=function(t,e){return A(t,e)},t.prototype.query=function(t,e,i){return w(t,e,i)},t.prototype.computeStyle=function(t,e,i){return window.getComputedStyle(t)[e]},t.prototype.animate=function(t,e,i,n,r,o){void 0===o&&(o=[]);var s={duration:i,delay:n,fill:0==n?"both":"forwards"};r&&(s.easing=r);var a=o.filter(function(t){return t instanceof qt});return new qt(t,e,s,a)},t}();function Zt(){return"undefined"!=typeof Element&&"function"==typeof Element.prototype.animate}},SBDi:function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},SMsG:function(t,e,i){"use strict";i.d(e,"a",function(){return c}),e.b=u;var n=i("LMZF"),r=i("YXpL"),o=i("l6RC"),s=i("Un6q"),a=i("V8+5"),l=i("j5BN"),c=(n._13(r.b,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(4608,a.a,a.a,[]),n._25(512,o.a,o.a,[]),n._25(256,l.f,!0,[]),n._25(512,l.n,l.n,[[2,l.f]]),n._25(512,a.b,a.b,[]),n._25(512,r.b,r.b,[])])}),n._14({encapsulation:2,styles:[".mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}}));function u(t){return n._39(2,[n._27(null,0),n._27(null,1)],null,null)}n._12("mat-toolbar",r.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,"mat-toolbar",[["class","mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,u,c)),n._15(1,4243456,null,1,r.a,[n.o,a.a,s.c],null,null),n._35(603979776,1,{_toolbarRows:1})],null,function(t,e){t(e,0,0,n._28(e,1)._toolbarRows.length,!n._28(e,1)._toolbarRows.length)})},{color:"color"},{},["*","mat-toolbar-row"])},SlD5:function(t,e,i){"use strict";i.d(e,"c",function(){return x}),i.d(e,"b",function(){return b}),i.d(e,"a",function(){return g});var n=i("V8+5"),r=i("Un6q"),o=i("LMZF"),s=i("Lpd/"),a=i("kH4A"),l=i("n0xB"),c=i("5O0w"),u=i("TO51"),h=i("6Xbx"),p=i("XEj9"),d=i("0nO6"),f=i("j5BN"),m=function(){function t(t,e,i){this._elementRef=t,this._platform=e,this._ngZone=i,this._destroyed=new u.a}return Object.defineProperty(t.prototype,"minRows",{get:function(){return this._minRows},set:function(t){this._minRows=t,this._setMinHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxRows",{get:function(){return this._maxRows},set:function(t){this._maxRows=t,this._setMaxHeight()},enumerable:!0,configurable:!0}),t.prototype._setMinHeight=function(){var t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&this._setTextareaStyle("minHeight",t)},t.prototype._setMaxHeight=function(){var t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&this._setTextareaStyle("maxHeight",t)},t.prototype.ngAfterViewInit=function(){var t=this;this._platform.isBrowser&&(this.resizeToFitContent(),this._ngZone&&this._ngZone.runOutsideAngular(function(){Object(a.a)(window,"resize").pipe(Object(l.a)(16),Object(c.a)(t._destroyed)).subscribe(function(){return t.resizeToFitContent(!0)})}))},t.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},t.prototype._setTextareaStyle=function(t,e){this._elementRef.nativeElement.style[t]=e},t.prototype._cacheTextareaLineHeight=function(){if(!this._cachedLineHeight){var t=this._elementRef.nativeElement,e=t.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",t.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,t.parentNode.removeChild(e),this._setMinHeight(),this._setMaxHeight()}},t.prototype.ngDoCheck=function(){this._platform.isBrowser&&this.resizeToFitContent()},t.prototype.resizeToFitContent=function(t){if(void 0===t&&(t=!1),this._cacheTextareaLineHeight(),this._cachedLineHeight){var e=this._elementRef.nativeElement,i=e.value;if(i!==this._previousValue||t){var n=e.placeholder;e.style.height="auto",e.style.overflow="hidden",e.placeholder="",e.style.height=e.scrollHeight+"px",e.style.overflow="",e.placeholder=n,this._previousValue=i}}},t.decorators=[{type:o.n,args:[{selector:"textarea[mat-autosize], textarea[matTextareaAutosize]",exportAs:"matTextareaAutosize",host:{class:"mat-autosize",rows:"1"}}]}],t.ctorParameters=function(){return[{type:o.o},{type:n.a},{type:o.F}]},t.propDecorators={minRows:[{type:o.y,args:["matAutosizeMinRows"]}],maxRows:[{type:o.y,args:["matAutosizeMaxRows"]}]},t}();var g=new o.w("MAT_INPUT_VALUE_ACCESSOR"),y=["button","checkbox","file","hidden","image","radio","range","reset","submit"],_=0,v=function(){return function(t,e,i,n){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=n}}(),b=function(t){function e(e,i,r,o,s,a,l){var c=t.call(this,a,o,s,r)||this;return c._elementRef=e,c._platform=i,c.ngControl=r,c._uid="mat-input-"+_++,c._isServer=!1,c.focused=!1,c.stateChanges=new u.a,c.controlType="mat-input",c._disabled=!1,c.placeholder="",c._required=!1,c._type="text",c._readonly=!1,c._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(function(t){return Object(n.c)().has(t)}),c._inputValueAccessor=l||c._elementRef.nativeElement,c._previousNativeValue=c.value,c.id=c.id,i.IOS&&e.nativeElement.addEventListener("keyup",function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}),c._isServer=!c._platform.isBrowser,c}return Object(h.b)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(p.c)(t),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(p.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Object(n.c)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(t){this._readonly=Object(p.c)(t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._focusChanged=function(t){t===this.focused||this.readonly||(this.focused=t,this.stateChanges.next())},e.prototype._onInput=function(){},e.prototype._dirtyCheckNativeValue=function(){var t=this.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())},e.prototype._validateType=function(){if(y.indexOf(this._type)>-1)throw t=this._type,Error('Input type "'+t+"\" isn't supported by matInput.");var t},e.prototype._isNeverEmpty=function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1},e.prototype._isBadInput=function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput},e.prototype._isTextarea=function(){var t=this._elementRef.nativeElement,e=this._platform.isBrowser?t.nodeName:t.name;return!!e&&"textarea"===e.toLowerCase()},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.onContainerClick=function(){this.focus()},e.decorators=[{type:o.n,args:[{selector:"input[matInput], textarea[matInput]",exportAs:"matInput",host:{class:"mat-input-element mat-form-field-autofill-control","[class.mat-input-server]":"_isServer","[attr.id]":"id","[placeholder]":"placeholder","[disabled]":"disabled","[required]":"required","[readonly]":"readonly","[attr.aria-describedby]":"_ariaDescribedby || null","[attr.aria-invalid]":"errorState","[attr.aria-required]":"required.toString()","(blur)":"_focusChanged(false)","(focus)":"_focusChanged(true)","(input)":"_onInput()"},providers:[{provide:s.c,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:o.o},{type:n.a},{type:d.h,decorators:[{type:o.G},{type:o.R}]},{type:d.j,decorators:[{type:o.G}]},{type:d.d,decorators:[{type:o.G}]},{type:f.d},{type:void 0,decorators:[{type:o.G},{type:o.R},{type:o.u,args:[g]}]}]},e.propDecorators={disabled:[{type:o.y}],id:[{type:o.y}],placeholder:[{type:o.y}],required:[{type:o.y}],type:[{type:o.y}],errorStateMatcher:[{type:o.y}],value:[{type:o.y}],readonly:[{type:o.y}]},e}(Object(f.F)(v)),x=function(){function t(){}return t.decorators=[{type:o.C,args:[{declarations:[b,m],imports:[r.b,s.d,n.b],exports:[s.d,b,m],providers:[f.d]}]}],t.ctorParameters=function(){return[]},t}()},"T+QS":function(t,e,i){"use strict";var n=i("AP4T"),r=i("2kLc");n.a.merge=r.a},TMwh:function(t,e,i){"use strict";i.d(e,"c",function(){return a}),i.d(e,"h",function(){return N}),i.d(e,"a",function(){return V}),i.d(e,"f",function(){return B}),i.d(e,"b",function(){return m}),i.d(e,"g",function(){return f}),i.d(e,"d",function(){return q}),i.d(e,"e",function(){return $}),i.d(e,"i",function(){return y}),i.d(e,"j",function(){return Q}),i.d(e,"k",function(){return Z});var n=i("LMZF"),r=i("6Xbx"),o=i("AP4T"),s=i("RyBE"),a=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),l={Get:0,Post:1,Put:2,Delete:3,Options:4,Head:5,Patch:6};l[l.Get]="Get",l[l.Post]="Post",l[l.Put]="Put",l[l.Delete]="Delete",l[l.Options]="Options",l[l.Head]="Head",l[l.Patch]="Patch";var c={Unsent:0,Open:1,HeadersReceived:2,Loading:3,Done:4,Cancelled:5};c[c.Unsent]="Unsent",c[c.Open]="Open",c[c.HeadersReceived]="HeadersReceived",c[c.Loading]="Loading",c[c.Done]="Done",c[c.Cancelled]="Cancelled";var u={Basic:0,Cors:1,Default:2,Error:3,Opaque:4};u[u.Basic]="Basic",u[u.Cors]="Cors",u[u.Default]="Default",u[u.Error]="Error",u[u.Opaque]="Opaque";var h={NONE:0,JSON:1,FORM:2,FORM_DATA:3,TEXT:4,BLOB:5,ARRAY_BUFFER:6};h[h.NONE]="NONE",h[h.JSON]="JSON",h[h.FORM]="FORM",h[h.FORM_DATA]="FORM_DATA",h[h.TEXT]="TEXT",h[h.BLOB]="BLOB",h[h.ARRAY_BUFFER]="ARRAY_BUFFER";var p={Text:0,Json:1,ArrayBuffer:2,Blob:3};p[p.Text]="Text",p[p.Json]="Json",p[p.ArrayBuffer]="ArrayBuffer",p[p.Blob]="Blob";var d=function(){function t(e){var i=this;this._headers=new Map,this._normalizedNames=new Map,e&&(e instanceof t?e.forEach(function(t,e){t.forEach(function(t){return i.append(e,t)})}):Object.keys(e).forEach(function(t){var n=Array.isArray(e[t])?e[t]:[e[t]];i.delete(t),n.forEach(function(e){return i.append(t,e)})}))}return t.fromResponseHeaderString=function(e){var i=new t;return e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var n=t.slice(0,e),r=t.slice(e+1).trim();i.set(n,r)}}),i},t.prototype.append=function(t,e){var i=this.getAll(t);null===i?this.set(t,e):i.push(e)},t.prototype.delete=function(t){var e=t.toLowerCase();this._normalizedNames.delete(e),this._headers.delete(e)},t.prototype.forEach=function(t){var e=this;this._headers.forEach(function(i,n){return t(i,e._normalizedNames.get(n),e._headers)})},t.prototype.get=function(t){var e=this.getAll(t);return null===e?null:e.length>0?e[0]:null},t.prototype.has=function(t){return this._headers.has(t.toLowerCase())},t.prototype.keys=function(){return Array.from(this._normalizedNames.values())},t.prototype.set=function(t,e){Array.isArray(e)?e.length&&this._headers.set(t.toLowerCase(),[e.join(",")]):this._headers.set(t.toLowerCase(),[e]),this.mayBeSetNormalizedName(t)},t.prototype.values=function(){return Array.from(this._headers.values())},t.prototype.toJSON=function(){var t=this,e={};return this._headers.forEach(function(i,n){var r=[];i.forEach(function(t){return r.push.apply(r,t.split(","))}),e[t._normalizedNames.get(n)]=r}),e},t.prototype.getAll=function(t){return this.has(t)&&this._headers.get(t.toLowerCase())||null},t.prototype.entries=function(){throw new Error('"entries" method is not implemented on Headers class')},t.prototype.mayBeSetNormalizedName=function(t){var e=t.toLowerCase();this._normalizedNames.has(e)||this._normalizedNames.set(e,t)},t}(),f=function(){function t(t){void 0===t&&(t={});var e=t.body,i=t.status,n=t.headers,r=t.statusText,o=t.type,s=t.url;this.body=null!=e?e:null,this.status=null!=i?i:null,this.headers=null!=n?n:null,this.statusText=null!=r?r:null,this.type=null!=o?o:null,this.url=null!=s?s:null}return t.prototype.merge=function(e){return new t({body:e&&null!=e.body?e.body:this.body,status:e&&null!=e.status?e.status:this.status,headers:e&&null!=e.headers?e.headers:this.headers,statusText:e&&null!=e.statusText?e.statusText:this.statusText,type:e&&null!=e.type?e.type:this.type,url:e&&null!=e.url?e.url:this.url})},t}(),m=function(t){function e(){return t.call(this,{status:200,statusText:"Ok",type:u.Default,headers:new d})||this}return Object(r.b)(e,t),e.decorators=[{type:n.v}],e.ctorParameters=function(){return[]},e}(f),g=function(){return function(){}}(),y=(function(){}(),function(){return function(){}}());function _(t){if("string"!=typeof t)return t;switch(t.toUpperCase()){case"GET":return l.Get;case"POST":return l.Post;case"PUT":return l.Put;case"DELETE":return l.Delete;case"OPTIONS":return l.Options;case"HEAD":return l.Head;case"PATCH":return l.Patch}throw new Error('Invalid request method. The method "'+t+'" is not supported.')}var v=function(t){return t>=200&&t<300};var b=function(){function t(){}return t.prototype.encodeKey=function(t){return x(t)},t.prototype.encodeValue=function(t){return x(t)},t}();function x(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var A=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e=new b),this.rawParams=t,this.queryEncoder=e,this.paramsMap=function(t){void 0===t&&(t="");var e=new Map;return t.length>0&&t.split("&").forEach(function(t){var i=t.indexOf("="),n=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)],r=n[0],o=n[1],s=e.get(r)||[];s.push(o),e.set(r,s)}),e}(t)}return t.prototype.clone=function(){var e=new t("",this.queryEncoder);return e.appendAll(this),e},t.prototype.has=function(t){return this.paramsMap.has(t)},t.prototype.get=function(t){var e=this.paramsMap.get(t);return Array.isArray(e)?e[0]:null},t.prototype.getAll=function(t){return this.paramsMap.get(t)||[]},t.prototype.set=function(t,e){if(null!=e){var i=this.paramsMap.get(t)||[];i.length=0,i.push(e),this.paramsMap.set(t,i)}else this.delete(t)},t.prototype.setAll=function(t){var e=this;t.paramsMap.forEach(function(t,i){var n=e.paramsMap.get(i)||[];n.length=0,n.push(t[0]),e.paramsMap.set(i,n)})},t.prototype.append=function(t,e){if(null!=e){var i=this.paramsMap.get(t)||[];i.push(e),this.paramsMap.set(t,i)}},t.prototype.appendAll=function(t){var e=this;t.paramsMap.forEach(function(t,i){for(var n=e.paramsMap.get(i)||[],r=0;r<t.length;++r)n.push(t[r]);e.paramsMap.set(i,n)})},t.prototype.replaceAll=function(t){var e=this;t.paramsMap.forEach(function(t,i){var n=e.paramsMap.get(i)||[];n.length=0;for(var r=0;r<t.length;++r)n.push(t[r]);e.paramsMap.set(i,n)})},t.prototype.toString=function(){var t=this,e=[];return this.paramsMap.forEach(function(i,n){i.forEach(function(i){return e.push(t.queryEncoder.encodeKey(n)+"="+t.queryEncoder.encodeValue(i))})}),e.join("&")},t.prototype.delete=function(t){this.paramsMap.delete(t)},t}(),w=function(){function t(){}return t.prototype.json=function(){return"string"==typeof this._body?JSON.parse(this._body):this._body instanceof ArrayBuffer?JSON.parse(this.text()):this._body},t.prototype.text=function(t){if(void 0===t&&(t="legacy"),this._body instanceof A)return this._body.toString();if(this._body instanceof ArrayBuffer)switch(t){case"legacy":return String.fromCharCode.apply(null,new Uint16Array(this._body));case"iso-8859":return String.fromCharCode.apply(null,new Uint8Array(this._body));default:throw new Error("Invalid value for encodingHint: "+t)}return null==this._body?"":"object"==typeof this._body?JSON.stringify(this._body,null,2):this._body.toString()},t.prototype.arrayBuffer=function(){return this._body instanceof ArrayBuffer?this._body:function(t){for(var e=new Uint16Array(t.length),i=0,n=t.length;i<n;i++)e[i]=t.charCodeAt(i);return e.buffer}(this.text())},t.prototype.blob=function(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")},t}(),P=function(t){function e(e){var i=t.call(this)||this;return i._body=e.body,i.status=e.status,i.ok=i.status>=200&&i.status<=299,i.statusText=e.statusText,i.headers=e.headers,i.type=e.type,i.url=e.url,i}return Object(r.b)(e,t),e.prototype.toString=function(){return"Response with status: "+this.status+" "+this.statusText+" for URL: "+this.url},e}(w),E=0,T="__ng_jsonp__",S=null;function C(){var t="object"==typeof window?window:{};return null===S&&(S=t[T]={}),S}var O=function(){function t(){}return t.prototype.build=function(t){var e=document.createElement("script");return e.src=t,e},t.prototype.nextRequestID=function(){return"__req"+E++},t.prototype.requestCallback=function(t){return T+"."+t+".finished"},t.prototype.exposeConnection=function(t,e){C()[t]=e},t.prototype.removeConnection=function(t){C()[t]=null},t.prototype.send=function(t){document.body.appendChild(t)},t.prototype.cleanup=function(t){t.parentNode&&t.parentNode.removeChild(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),M="JSONP injected script did not invoke callback.",R="JSONP requests must use GET request method.",I=function(){function t(t,e,i){var n=this;if(this._dom=e,this.baseResponseOptions=i,this._finished=!1,t.method!==l.Get)throw new TypeError(R);this.request=t,this.response=new o.a(function(r){n.readyState=c.Loading;var o=n._id=e.nextRequestID();e.exposeConnection(o,n);var s=e.requestCallback(n._id),a=t.url;a.indexOf("=JSONP_CALLBACK&")>-1?a=a.replace("=JSONP_CALLBACK&","="+s+"&"):a.lastIndexOf("=JSONP_CALLBACK")===a.length-"=JSONP_CALLBACK".length&&(a=a.substring(0,a.length-"=JSONP_CALLBACK".length)+"="+s);var l=n._script=e.build(a),h=function(t){if(n.readyState!==c.Cancelled){if(n.readyState=c.Done,e.cleanup(l),!n._finished){var o=new f({body:M,type:u.Error,url:a});return i&&(o=i.merge(o)),void r.error(new P(o))}var s=new f({body:n._responseData,url:a});n.baseResponseOptions&&(s=n.baseResponseOptions.merge(s)),r.next(new P(s)),r.complete()}},p=function(t){if(n.readyState!==c.Cancelled){n.readyState=c.Done,e.cleanup(l);var o=new f({body:t.message,type:u.Error});i&&(o=i.merge(o)),r.error(new P(o))}};return l.addEventListener("load",h),l.addEventListener("error",p),e.send(l),function(){n.readyState=c.Cancelled,l.removeEventListener("load",h),l.removeEventListener("error",p),n._dom.cleanup(l)}})}return t.prototype.finished=function(t){this._finished=!0,this._dom.removeConnection(this._id),this.readyState!==c.Cancelled&&(this._responseData=t)},t}(),D=function(t){function e(e,i){var n=t.call(this)||this;return n._browserJSONP=e,n._baseResponseOptions=i,n}return Object(r.b)(e,t),e.prototype.createConnection=function(t){return new I(t,this._browserJSONP,this._baseResponseOptions)},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:O},{type:f}]},e}(g),L=/^\)\]\}',?\n/,k=function(){function t(t,e,i){var n=this;this.request=t,this.response=new o.a(function(r){var o=e.build();o.open(l[t.method].toUpperCase(),t.url),null!=t.withCredentials&&(o.withCredentials=t.withCredentials);var s=function(){var e=1223===o.status?204:o.status,n=null;204!==e&&"string"==typeof(n="undefined"==typeof o.response?o.responseText:o.response)&&(n=n.replace(L,"")),0===e&&(e=n?200:0);var s,a=d.fromResponseHeaderString(o.getAllResponseHeaders()),l=("responseURL"in(s=o)?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):null)||t.url,c=o.statusText||"OK",u=new f({body:n,status:e,headers:a,statusText:c,url:l});null!=i&&(u=i.merge(u));var h=new P(u);if(h.ok=v(e),h.ok)return r.next(h),void r.complete();r.error(h)},a=function(t){var e=new f({body:t,type:u.Error,status:o.status,statusText:o.statusText});null!=i&&(e=i.merge(e)),r.error(new P(e))};if(n.setDetectedContentType(t,o),null==t.headers&&(t.headers=new d),t.headers.has("Accept")||t.headers.append("Accept","application/json, text/plain, */*"),t.headers.forEach(function(t,e){return o.setRequestHeader(e,t.join(","))}),null!=t.responseType&&null!=o.responseType)switch(t.responseType){case p.ArrayBuffer:o.responseType="arraybuffer";break;case p.Json:o.responseType="json";break;case p.Text:o.responseType="text";break;case p.Blob:o.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return o.addEventListener("load",s),o.addEventListener("error",a),o.send(n.request.getBody()),function(){o.removeEventListener("load",s),o.removeEventListener("error",a),o.abort()}})}return t.prototype.setDetectedContentType=function(t,e){if(null==t.headers||null==t.headers.get("Content-Type"))switch(t.contentType){case h.NONE:break;case h.JSON:e.setRequestHeader("content-type","application/json");break;case h.FORM:e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case h.TEXT:e.setRequestHeader("content-type","text/plain");break;case h.BLOB:var i=t.blob();i.type&&e.setRequestHeader("content-type",i.type)}},t}(),F=function(){function t(t,e){void 0===t&&(t="XSRF-TOKEN"),void 0===e&&(e="X-XSRF-TOKEN"),this._cookieName=t,this._headerName=e}return t.prototype.configureRequest=function(t){var e=Object(s.s)().getCookie(this._cookieName);e&&t.headers.set(this._headerName,e)},t}(),N=function(){function t(t,e,i){this._browserXHR=t,this._baseResponseOptions=e,this._xsrfStrategy=i}return t.prototype.createConnection=function(t){return this._xsrfStrategy.configureRequest(t),new k(t,this._browserXHR,this._baseResponseOptions)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:a},{type:f},{type:y}]},t}(),B=function(){function t(t){void 0===t&&(t={});var e=t.method,i=t.headers,n=t.body,r=t.url,o=t.search,s=t.params,a=t.withCredentials,l=t.responseType;this.method=null!=e?_(e):null,this.headers=null!=i?i:null,this.body=null!=n?n:null,this.url=null!=r?r:null,this.params=this._mergeSearchParams(s||o),this.withCredentials=null!=a?a:null,this.responseType=null!=l?l:null}return Object.defineProperty(t.prototype,"search",{get:function(){return this.params},set:function(t){this.params=t},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){return new t({method:e&&null!=e.method?e.method:this.method,headers:e&&null!=e.headers?e.headers:new d(this.headers),body:e&&null!=e.body?e.body:this.body,url:e&&null!=e.url?e.url:this.url,params:e&&this._mergeSearchParams(e.params||e.search),withCredentials:e&&null!=e.withCredentials?e.withCredentials:this.withCredentials,responseType:e&&null!=e.responseType?e.responseType:this.responseType})},t.prototype._mergeSearchParams=function(t){return t?t instanceof A?t.clone():"string"==typeof t?new A(t):this._parseParams(t):this.params},t.prototype._parseParams=function(t){var e=this;void 0===t&&(t={});var i=new A;return Object.keys(t).forEach(function(n){var r=t[n];Array.isArray(r)?r.forEach(function(t){return e._appendParam(n,t,i)}):e._appendParam(n,r,i)}),i},t.prototype._appendParam=function(t,e,i){"string"!=typeof e&&(e=JSON.stringify(e)),i.append(t,e)},t}(),V=function(t){function e(){return t.call(this,{method:l.Get,headers:new d})||this}return Object(r.b)(e,t),e.decorators=[{type:n.v}],e.ctorParameters=function(){return[]},e}(B),z=function(t){function e(e){var i=t.call(this)||this,n=e.url;i.url=e.url;var r=e.params||e.search;if(r){var o=void 0;if((o="object"!=typeof r||r instanceof A?r.toString():function(t){var e=new A;return Object.keys(t).forEach(function(i){var n=t[i];n&&Array.isArray(n)?n.forEach(function(t){return e.append(i,t.toString())}):e.append(i,n.toString())}),e}(r).toString()).length>0){var s="?";-1!=i.url.indexOf("?")&&(s="&"==i.url[i.url.length-1]?"":"&"),i.url=n+s+o}}return i._body=e.body,i.method=_(e.method),i.headers=new d(e.headers),i.contentType=i.detectContentType(),i.withCredentials=e.withCredentials,i.responseType=e.responseType,i}return Object(r.b)(e,t),e.prototype.detectContentType=function(){switch(this.headers.get("content-type")){case"application/json":return h.JSON;case"application/x-www-form-urlencoded":return h.FORM;case"multipart/form-data":return h.FORM_DATA;case"text/plain":case"text/html":return h.TEXT;case"application/octet-stream":return this._body instanceof H?h.ARRAY_BUFFER:h.BLOB;default:return this.detectContentTypeFromBody()}},e.prototype.detectContentTypeFromBody=function(){return null==this._body?h.NONE:this._body instanceof A?h.FORM:this._body instanceof G?h.FORM_DATA:this._body instanceof W?h.BLOB:this._body instanceof H?h.ARRAY_BUFFER:this._body&&"object"==typeof this._body?h.JSON:h.TEXT},e.prototype.getBody=function(){switch(this.contentType){case h.JSON:case h.FORM:return this.text();case h.FORM_DATA:return this._body;case h.TEXT:return this.text();case h.BLOB:return this.blob();case h.ARRAY_BUFFER:return this.arrayBuffer();default:return null}},e}(w);var U=function(){},j="object"==typeof window?window:U,G=j.FormData||U,W=j.Blob||U,H=j.ArrayBuffer||U;function X(t,e){return t.createConnection(e).response}function Y(t,e,i,n){var r=t;return e?r.merge(new B({method:e.method||i,url:e.url||n,search:e.search,params:e.params,headers:e.headers,body:e.body,withCredentials:e.withCredentials,responseType:e.responseType})):r.merge(new B({method:i,url:n}))}var q=function(){function t(t,e){this._backend=t,this._defaultOptions=e}return t.prototype.request=function(t,e){var i;if("string"==typeof t)i=X(this._backend,new z(Y(this._defaultOptions,e,l.Get,t)));else{if(!(t instanceof z))throw new Error("First argument must be a url string or Request instance.");i=X(this._backend,t)}return i},t.prototype.get=function(t,e){return this.request(new z(Y(this._defaultOptions,e,l.Get,t)))},t.prototype.post=function(t,e,i){return this.request(new z(Y(this._defaultOptions.merge(new B({body:e})),i,l.Post,t)))},t.prototype.put=function(t,e,i){return this.request(new z(Y(this._defaultOptions.merge(new B({body:e})),i,l.Put,t)))},t.prototype.delete=function(t,e){return this.request(new z(Y(this._defaultOptions,e,l.Delete,t)))},t.prototype.patch=function(t,e,i){return this.request(new z(Y(this._defaultOptions.merge(new B({body:e})),i,l.Patch,t)))},t.prototype.head=function(t,e){return this.request(new z(Y(this._defaultOptions,e,l.Head,t)))},t.prototype.options=function(t,e){return this.request(new z(Y(this._defaultOptions,e,l.Options,t)))},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:g},{type:B}]},t}(),K=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(r.b)(e,t),e.prototype.request=function(t,e){if("string"==typeof t&&(t=new z(Y(this._defaultOptions,e,l.Get,t))),!(t instanceof z))throw new Error("First argument must be a url string or Request instance.");if(t.method!==l.Get)throw new Error("JSONP requests must use GET request method.");return X(this._backend,t)},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:g},{type:B}]},e}(q);function Q(){return new F}function Z(t,e){return new q(t,e)}function J(t,e){return new K(t,e)}var $=function(){function t(){}return t.decorators=[{type:n.C,args:[{providers:[{provide:q,useFactory:Z,deps:[N,B]},a,{provide:B,useClass:V},{provide:f,useClass:m},N,{provide:y,useFactory:Q}]}]}],t.ctorParameters=function(){return[]},t}();(function(){function t(){}t.decorators=[{type:n.C,args:[{providers:[{provide:K,useFactory:J,deps:[D,B]},O,{provide:B,useClass:V},{provide:f,useClass:m},D]}]}],t.ctorParameters=function(){return[]}})(),new n.W("5.2.4")},TO51:function(t,e,i){"use strict";i.d(e,"b",function(){return u}),i.d(e,"a",function(){return h});var n=i("AP4T"),r=i("E9/g"),o=i("qLnt"),s=i("Upor"),a=i("jaVc"),l=i("V7AE"),c=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=function(t){function e(e){t.call(this,e),this.destination=e}return c(e,t),e}(r.a),h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return c(e,t),e.prototype[l.a]=function(){return new u(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))},e.prototype.asObservable=function(){var t=new n.a;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(n.a),p=function(t){function e(e,i){t.call(this),this.destination=e,this.source=i}return c(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.a.EMPTY},e}(h)},URbD:function(t,e,i){"use strict";e.a=function(){return Object(n.a)()(this)};var n=i("eIqN")},Un6q:function(t,e,i){"use strict";i.d(e,"j",function(){return R}),i.d(e,"k",function(){return O}),i.d(e,"s",function(){return I}),i.d(e,"b",function(){return ue}),i.d(e,"g",function(){return D}),i.d(e,"h",function(){return F}),i.d(e,"i",function(){return B}),i.d(e,"l",function(){return X}),i.d(e,"m",function(){return U}),i.d(e,"n",function(){return j}),i.d(e,"o",function(){return G}),i.d(e,"c",function(){return pe}),i.d(e,"a",function(){return Qt}),i.d(e,"d",function(){return dt}),i.d(e,"e",function(){return re}),i.d(e,"q",function(){return de}),i.d(e,"p",function(){return o}),i.d(e,"f",function(){return l}),i.d(e,"r",function(){return C});var n=i("LMZF"),r=i("6Xbx"),o=function(){return function(){}}(),s=(new n.w("Location Initialized"),function(){return function(){}}()),a=new n.w("appBaseHref"),l=function(){function t(e){var i=this;this._subject=new n.r,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(c(r)),this._platformStrategy.onPopState(function(t){i._subject.emit({url:i.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,i){return void 0===i&&(i=""),this.path()==this.normalize(e+t.normalizeQueryParams(i))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,c(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,i){return this._subject.subscribe({next:t,error:e,complete:i})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var i=0;return t.endsWith("/")&&i++,e.startsWith("/")&&i++,2==i?t+e.substring(1):1==i?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),i=e&&e.index||t.length,n=i-("/"===t[i-1]?1:0);return t.slice(0,n)+t.slice(i)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:s}]},t}();function c(t){return t.replace(/\/index.html$/,"")}(function(t){function e(e,i){var n=t.call(this)||this;return n._platformLocation=e,n._baseHref="",null!=i&&(n._baseHref=i),n}Object(r.b)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=l.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,i,n){var r=this.prepareExternalUrl(i+l.normalizeQueryParams(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)},e.prototype.replaceState=function(t,e,i,n){var r=this.prepareExternalUrl(i+l.normalizeQueryParams(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:o},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[a]}]}]}})(s),function(t){function e(e,i){var n=t.call(this)||this;if(n._platformLocation=e,null==i&&(i=n._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return n._baseHref=i,n}Object(r.b)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return l.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?""+e+i:e},e.prototype.pushState=function(t,e,i,n){var r=this.prepareExternalUrl(i+l.normalizeQueryParams(n));this._platformLocation.pushState(t,e,r)},e.prototype.replaceState=function(t,e,i,n){var r=this.prepareExternalUrl(i+l.normalizeQueryParams(n));this._platformLocation.replaceState(t,e,r)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:o},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[a]}]}]}}(s);var u={AOA:[,"Kz"],ARS:[,"$"],AUD:["A$","$"],BAM:[,"KM"],BBD:[,"$"],BDT:[,"\u09f3"],BMD:[,"$"],BND:[,"$"],BOB:[,"Bs"],BRL:["R$"],BSD:[,"$"],BWP:[,"P"],BYN:[,"\u0440."],BZD:[,"$"],CAD:["CA$","$"],CLP:[,"$"],CNY:["CN\xa5","\xa5"],COP:[,"$"],CRC:[,"\u20a1"],CUC:[,"$"],CUP:[,"$"],CZK:[,"K\u010d"],DKK:[,"kr"],DOP:[,"$"],EGP:[,"E\xa3"],ESP:[,"\u20a7"],EUR:["\u20ac"],FJD:[,"$"],FKP:[,"\xa3"],GBP:["\xa3"],GEL:[,"\u20be"],GIP:[,"\xa3"],GNF:[,"FG"],GTQ:[,"Q"],GYD:[,"$"],HKD:["HK$","$"],HNL:[,"L"],HRK:[,"kn"],HUF:[,"Ft"],IDR:[,"Rp"],ILS:["\u20aa"],INR:["\u20b9"],ISK:[,"kr"],JMD:[,"$"],JPY:["\xa5"],KHR:[,"\u17db"],KMF:[,"CF"],KPW:[,"\u20a9"],KRW:["\u20a9"],KYD:[,"$"],KZT:[,"\u20b8"],LAK:[,"\u20ad"],LBP:[,"L\xa3"],LKR:[,"Rs"],LRD:[,"$"],LTL:[,"Lt"],LVL:[,"Ls"],MGA:[,"Ar"],MMK:[,"K"],MNT:[,"\u20ae"],MUR:[,"Rs"],MXN:["MX$","$"],MYR:[,"RM"],NAD:[,"$"],NGN:[,"\u20a6"],NIO:[,"C$"],NOK:[,"kr"],NPR:[,"Rs"],NZD:["NZ$","$"],PHP:[,"\u20b1"],PKR:[,"Rs"],PLN:[,"z\u0142"],PYG:[,"\u20b2"],RON:[,"lei"],RUB:[,"\u20bd"],RUR:[,"\u0440."],RWF:[,"RF"],SBD:[,"$"],SEK:[,"kr"],SGD:[,"$"],SHP:[,"\xa3"],SRD:[,"$"],SSP:[,"\xa3"],STD:[,"Db"],SYP:[,"\xa3"],THB:[,"\u0e3f"],TOP:[,"T$"],TRY:[,"\u20ba"],TTD:[,"$"],TWD:["NT$","$"],UAH:[,"\u20b4"],USD:["$"],UYU:[,"$"],VEF:[,"Bs"],VND:["\u20ab"],XAF:["FCFA"],XCD:["EC$","$"],XOF:["CFA"],XPF:["CFPF"],ZAR:[,"R"],ZMW:[,"ZK"]};var h=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}],p={};var d={Decimal:0,Percent:1,Currency:2,Scientific:3};d[d.Decimal]="Decimal",d[d.Percent]="Percent",d[d.Currency]="Currency",d[d.Scientific]="Scientific";var f={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};f[f.Zero]="Zero",f[f.One]="One",f[f.Two]="Two",f[f.Few]="Few",f[f.Many]="Many",f[f.Other]="Other";var m={Format:0,Standalone:1};m[m.Format]="Format",m[m.Standalone]="Standalone";var g={Narrow:0,Abbreviated:1,Wide:2,Short:3};g[g.Narrow]="Narrow",g[g.Abbreviated]="Abbreviated",g[g.Wide]="Wide",g[g.Short]="Short";var y={Short:0,Medium:1,Long:2,Full:3};y[y.Short]="Short",y[y.Medium]="Medium",y[y.Long]="Long",y[y.Full]="Full";var _={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};_[_.Decimal]="Decimal",_[_.Group]="Group",_[_.List]="List",_[_.PercentSign]="PercentSign",_[_.PlusSign]="PlusSign",_[_.MinusSign]="MinusSign",_[_.Exponential]="Exponential",_[_.SuperscriptingExponent]="SuperscriptingExponent",_[_.PerMille]="PerMille",_[_.Infinity]="Infinity",_[_.NaN]="NaN",_[_.TimeSeparator]="TimeSeparator",_[_.CurrencyDecimal]="CurrencyDecimal",_[_.CurrencyGroup]="CurrencyGroup";var v={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function b(t,e){return E(S(t)[10],e)}function x(t,e){return E(S(t)[11],e)}function A(t,e){return E(S(t)[12],e)}function w(t,e){var i=S(t),n=i[13][e];if("undefined"==typeof n){if(e===_.CurrencyDecimal)return i[13][_.Decimal];if(e===_.CurrencyGroup)return i[13][_.Group]}return n}function P(t){if(!t[18])throw new Error('Missing extra locale data for the locale "'+t[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function E(t,e){for(var i=e;i>-1;i--)if("undefined"!=typeof t[i])return t[i];throw new Error("Locale data API: locale data undefined")}function T(t){var e=t.split(":");return{hours:+e[0],minutes:+e[1]}}function S(t){var e=t.toLowerCase().replace(/_/g,"-"),i=p[e];if(i)return i;var n=e.split("-")[0];if(i=p[n])return i;if("en"===n)return h;throw new Error('Missing locale data for the locale "'+t+'".')}v[v.Sunday]="Sunday",v[v.Monday]="Monday",v[v.Tuesday]="Tuesday",v[v.Wednesday]="Wednesday",v[v.Thursday]="Thursday",v[v.Friday]="Friday",v[v.Saturday]="Saturday";var C=new n.w("UseV4Plurals"),O=function(){return function(){}}();function M(t,e,i,n){var r="="+t;if(e.indexOf(r)>-1)return r;if(r=i.getPluralCategory(t,n),e.indexOf(r)>-1)return r;if(e.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'+t+'"')}var R=function(t){function e(e,i){var n=t.call(this)||this;return n.locale=e,n.deprecatedPluralFn=i,n}return Object(r.b)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return S(t)[17]}(e||this.locale)(t)){case f.Zero:return"zero";case f.One:return"one";case f.Two:return"two";case f.Few:return"few";case f.Many:return"many";default:return"other"}},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[C]}]}]},e}(O);function I(t,e){e=encodeURIComponent(e);for(var i=0,n=t.split(";");i<n.length;i++){var r=n[i],o=r.indexOf("="),s=-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)],a=s[1];if(s[0].trim()===e)return decodeURIComponent(a)}return null}var D=function(){function t(t,e,i,n){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=i,this._renderer=n,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._applyInitialClasses(!0),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(n._20)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(n._36)(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(i){return e._toggleClass(i,!t)})},t.prototype._applyClasses=function(t,e){var i=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return i._toggleClass(t,!e)}):Object.keys(t).forEach(function(n){null!=t[n]&&i._toggleClass(n,!e)}))},t.prototype._toggleClass=function(t,e){var i=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?i._renderer.addClass(i._ngEl.nativeElement,t):i._renderer.removeClass(i._ngEl.nativeElement,t)})},t.decorators=[{type:n.n,args:[{selector:"[ngClass]"}]}],t.ctorParameters=function(){return[{type:n.z},{type:n.A},{type:n.o},{type:n.M}]},t.propDecorators={klass:[{type:n.y,args:["class"]}],ngClass:[{type:n.y}]},t}(),L=function(){function t(t){this._viewContainerRef=t,this._componentRef=null,this._moduleRef=null}return t.prototype.ngOnChanges=function(t){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var e=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(t.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var i=e.get(n.D);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(i.injector)}else this._moduleRef=null;var r=(this._moduleRef?this._moduleRef.componentFactoryResolver:e.get(n.k)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(r,this._viewContainerRef.length,e,this.ngComponentOutletContent)}},t.prototype.ngOnDestroy=function(){this._moduleRef&&this._moduleRef.destroy()},t.decorators=[{type:n.n,args:[{selector:"[ngComponentOutlet]"}]}],t.ctorParameters=function(){return[{type:n.Z}]},t.propDecorators={ngComponentOutlet:[{type:n.y}],ngComponentOutletInjector:[{type:n.y}],ngComponentOutletContent:[{type:n.y}],ngComponentOutletNgModuleFactory:[{type:n.y}]},t}(),k=function(){function t(t,e,i,n){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=n}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),F=function(){function t(t,e,i){this._viewContainer=t,this._template=e,this._differs=i,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(n._6)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((i=e).name||typeof i)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var i},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,i=[];t.forEachOperation(function(t,n,r){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new k(null,e.ngForOf,-1,-1),r),s=new N(t,o);i.push(s)}else if(null==r)e._viewContainer.remove(n);else{o=e._viewContainer.get(n);e._viewContainer.move(o,r);s=new N(t,o);i.push(s)}});for(var n=0;n<i.length;n++)this._perViewChange(i[n].view,i[n].record);n=0;for(var r=this._viewContainer.length;n<r;n++){var o=this._viewContainer.get(n);o.context.index=n,o.context.count=r}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.decorators=[{type:n.n,args:[{selector:"[ngFor][ngForOf]"}]}],t.ctorParameters=function(){return[{type:n.Z},{type:n.U},{type:n.z}]},t.propDecorators={ngForOf:[{type:n.y}],ngForTrackBy:[{type:n.y}],ngForTemplate:[{type:n.y}]},t}(),N=function(){return function(t,e){this.record=t,this.view=e}}();var B=function(){function t(t,e){this._viewContainer=t,this._context=new V,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t.decorators=[{type:n.n,args:[{selector:"[ngIf]"}]}],t.ctorParameters=function(){return[{type:n.Z},{type:n.U}]},t.propDecorators={ngIf:[{type:n.y}],ngIfThen:[{type:n.y}],ngIfElse:[{type:n.y}]},t}(),V=function(){return function(){this.$implicit=null,this.ngIf=null}}(),z=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),U=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++){this._defaultViews[e].enforceState(t)}}},t.decorators=[{type:n.n,args:[{selector:"[ngSwitch]"}]}],t.ctorParameters=function(){return[]},t.propDecorators={ngSwitch:[{type:n.y}]},t}(),j=function(){function t(t,e,i){this.ngSwitch=i,i._addCase(),this._view=new z(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t.decorators=[{type:n.n,args:[{selector:"[ngSwitchCase]"}]}],t.ctorParameters=function(){return[{type:n.Z},{type:n.U},{type:U,decorators:[{type:n.s}]}]},t.propDecorators={ngSwitchCase:[{type:n.y}]},t}(),G=function(){function t(t,e,i){i._addDefault(new z(t,e))}return t.decorators=[{type:n.n,args:[{selector:"[ngSwitchDefault]"}]}],t.ctorParameters=function(){return[{type:n.Z},{type:n.U},{type:U,decorators:[{type:n.s}]}]},t}(),W=function(){function t(t){this._localization=t,this._caseViews={}}return Object.defineProperty(t.prototype,"ngPlural",{set:function(t){this._switchValue=t,this._updateView()},enumerable:!0,configurable:!0}),t.prototype.addCase=function(t,e){this._caseViews[t]=e},t.prototype._updateView=function(){this._clearViews();var t=Object.keys(this._caseViews),e=M(this._switchValue,t,this._localization);this._activateView(this._caseViews[e])},t.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},t.prototype._activateView=function(t){t&&(this._activeView=t,this._activeView.create())},t.decorators=[{type:n.n,args:[{selector:"[ngPlural]"}]}],t.ctorParameters=function(){return[{type:O}]},t.propDecorators={ngPlural:[{type:n.y}]},t}(),H=function(){function t(t,e,i,n){this.value=t;var r=!isNaN(Number(t));n.addCase(r?"="+t:t,new z(i,e))}return t.decorators=[{type:n.n,args:[{selector:"[ngPluralCase]"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.f,args:["ngPluralCase"]}]},{type:n.U},{type:n.Z},{type:W,decorators:[{type:n.s}]}]},t}(),X=function(){function t(t,e,i){this._differs=t,this._ngEl=e,this._renderer=i}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var i=t.split("."),n=i[0],r=i[1];null!=(e=null!=e&&r?""+e+r:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)},t.decorators=[{type:n.n,args:[{selector:"[ngStyle]"}]}],t.ctorParameters=function(){return[{type:n.A},{type:n.o},{type:n.M}]},t.propDecorators={ngStyle:[{type:n.y}]},t}(),Y=function(){function t(t){this._viewContainerRef=t}return t.prototype.ngOnChanges=function(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},t.prototype._shouldRecreateView=function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)},t.prototype._hasContextShapeChanged=function(t){var e=Object.keys(t.previousValue||{}),i=Object.keys(t.currentValue||{});if(e.length===i.length){for(var n=0,r=i;n<r.length;n++){var o=r[n];if(-1===e.indexOf(o))return!0}return!1}return!0},t.prototype._updateExistingContext=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this._viewRef.context[n]=this.ngTemplateOutletContext[n]}},t.decorators=[{type:n.n,args:[{selector:"[ngTemplateOutlet]"}]}],t.ctorParameters=function(){return[{type:n.Z}]},t.propDecorators={ngTemplateOutletContext:[{type:n.y}],ngTemplateOutlet:[{type:n.y}]},t}(),q=[D,L,F,B,Y,X,U,j,G,W,H],K={},Q=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Z={Short:0,ShortGMT:1,Long:2,Extended:3};Z[Z.Short]="Short",Z[Z.ShortGMT]="ShortGMT",Z[Z.Long]="Long",Z[Z.Extended]="Extended";var J={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,Milliseconds:6,Day:7};J[J.FullYear]="FullYear",J[J.Month]="Month",J[J.Date]="Date",J[J.Hours]="Hours",J[J.Minutes]="Minutes",J[J.Seconds]="Seconds",J[J.Milliseconds]="Milliseconds",J[J.Day]="Day";var $={DayPeriods:0,Days:1,Months:2,Eras:3};function tt(t,e,i,n){e=function t(e,i){var n=function(t){return S(t)[0]}(e);K[n]=K[n]||{};if(K[n][i])return K[n][i];var r="";switch(i){case"shortDate":r=b(e,y.Short);break;case"mediumDate":r=b(e,y.Medium);break;case"longDate":r=b(e,y.Long);break;case"fullDate":r=b(e,y.Full);break;case"shortTime":r=x(e,y.Short);break;case"mediumTime":r=x(e,y.Medium);break;case"longTime":r=x(e,y.Long);break;case"fullTime":r=x(e,y.Full);break;case"short":var o=t(e,"shortTime"),s=t(e,"shortDate");r=et(A(e,y.Short),[o,s]);break;case"medium":var a=t(e,"mediumTime"),l=t(e,"mediumDate");r=et(A(e,y.Medium),[a,l]);break;case"long":var c=t(e,"longTime"),u=t(e,"longDate");r=et(A(e,y.Long),[c,u]);break;case"full":var h=t(e,"fullTime"),p=t(e,"fullDate");r=et(A(e,y.Full),[h,p])}r&&(K[n][i]=r);return r}(i,e)||e;for(var r,o=[];e;){if(!(r=Q.exec(e))){o.push(e);break}var s=(o=o.concat(r.slice(1))).pop();if(!s)break;e=s}var a=t.getTimezoneOffset();n&&(a=ut(n,a),t=function(t,e,i){var n=i?-1:1,r=t.getTimezoneOffset(),o=ut(e,r);return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(o-r))}(t,n,!0));var l="";return o.forEach(function(e){var n=function(t){if(ct[t])return ct[t];var e;switch(t){case"G":case"GG":case"GGG":e=rt($.Eras,g.Abbreviated);break;case"GGGG":e=rt($.Eras,g.Wide);break;case"GGGGG":e=rt($.Eras,g.Narrow);break;case"y":e=nt(J.FullYear,1,0,!1,!0);break;case"yy":e=nt(J.FullYear,2,0,!0,!0);break;case"yyy":e=nt(J.FullYear,3,0,!1,!0);break;case"yyyy":e=nt(J.FullYear,4,0,!1,!0);break;case"M":case"L":e=nt(J.Month,1,1);break;case"MM":case"LL":e=nt(J.Month,2,1);break;case"MMM":e=rt($.Months,g.Abbreviated);break;case"MMMM":e=rt($.Months,g.Wide);break;case"MMMMM":e=rt($.Months,g.Narrow);break;case"LLL":e=rt($.Months,g.Abbreviated,m.Standalone);break;case"LLLL":e=rt($.Months,g.Wide,m.Standalone);break;case"LLLLL":e=rt($.Months,g.Narrow,m.Standalone);break;case"w":e=lt(1);break;case"ww":e=lt(2);break;case"W":e=lt(1,!0);break;case"d":e=nt(J.Date,1);break;case"dd":e=nt(J.Date,2);break;case"E":case"EE":case"EEE":e=rt($.Days,g.Abbreviated);break;case"EEEE":e=rt($.Days,g.Wide);break;case"EEEEE":e=rt($.Days,g.Narrow);break;case"EEEEEE":e=rt($.Days,g.Short);break;case"a":case"aa":case"aaa":e=rt($.DayPeriods,g.Abbreviated);break;case"aaaa":e=rt($.DayPeriods,g.Wide);break;case"aaaaa":e=rt($.DayPeriods,g.Narrow);break;case"b":case"bb":case"bbb":e=rt($.DayPeriods,g.Abbreviated,m.Standalone,!0);break;case"bbbb":e=rt($.DayPeriods,g.Wide,m.Standalone,!0);break;case"bbbbb":e=rt($.DayPeriods,g.Narrow,m.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt($.DayPeriods,g.Abbreviated,m.Format,!0);break;case"BBBB":e=rt($.DayPeriods,g.Wide,m.Format,!0);break;case"BBBBB":e=rt($.DayPeriods,g.Narrow,m.Format,!0);break;case"h":e=nt(J.Hours,1,-12);break;case"hh":e=nt(J.Hours,2,-12);break;case"H":e=nt(J.Hours,1);break;case"HH":e=nt(J.Hours,2);break;case"m":e=nt(J.Minutes,1);break;case"mm":e=nt(J.Minutes,2);break;case"s":e=nt(J.Seconds,1);break;case"ss":e=nt(J.Seconds,2);break;case"S":e=nt(J.Milliseconds,1);break;case"SS":e=nt(J.Milliseconds,2);break;case"SSS":e=nt(J.Milliseconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ot(Z.Short);break;case"ZZZZZ":e=ot(Z.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ot(Z.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ot(Z.Long);break;default:return null}return ct[t]=e,e}(e);l+=n?n(t,i,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function et(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),t}function it(t,e,i,n,r){void 0===i&&(i="-");var o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=i));for(var s=""+t;s.length<e;)s="0"+s;return n&&(s=s.substr(s.length-e)),o+s}function nt(t,e,i,n,r){return void 0===i&&(i=0),void 0===n&&(n=!1),void 0===r&&(r=!1),function(o,s){var a=function(t,e,i){switch(t){case J.FullYear:return e.getFullYear();case J.Month:return e.getMonth();case J.Date:return e.getDate();case J.Hours:return e.getHours();case J.Minutes:return e.getMinutes();case J.Seconds:return e.getSeconds();case J.Milliseconds:var n=1===i?100:2===i?10:1;return Math.round(e.getMilliseconds()/n);case J.Day:return e.getDay();default:throw new Error('Unknown DateType value "'+t+'".')}}(t,o,e);return(i>0||a>-i)&&(a+=i),t===J.Hours&&0===a&&-12===i&&(a=12),it(a,e,w(s,_.MinusSign),n,r)}}function rt(t,e,i,n){return void 0===i&&(i=m.Format),void 0===n&&(n=!1),function(r,o){return function(t,e,i,n,r,o){switch(i){case $.Months:return function(t,e,i){var n=S(t);return E(E([n[5],n[6]],e),i)}(e,r,n)[t.getMonth()];case $.Days:return function(t,e,i){var n=S(t);return E(E([n[3],n[4]],e),i)}(e,r,n)[t.getDay()];case $.DayPeriods:var s=t.getHours(),a=t.getMinutes();if(o){var l,c=function(t){var e=S(t);return P(e),(e[18][2]||[]).map(function(t){return"string"==typeof t?T(t):[T(t[0]),T(t[1])]})}(e),u=function(t,e,i){var n=S(t);return P(n),E(E([n[18][0],n[18][1]],e)||[],i)||[]}(e,r,n);if(c.forEach(function(t,e){if(Array.isArray(t)){var i=t[0],n=i.hours,r=i.minutes,o=t[1],c=o.hours,h=o.minutes;s>=n&&a>=r&&(s<c||s===c&&a<h)&&(l=u[e])}else{var p=t.hours,d=t.minutes;p===s&&d===a&&(l=u[e])}}),l)return l}return function(t,e,i){var n=S(t);return E(E([n[1],n[2]],e),i)}(e,r,n)[s<12?0:1];case $.Eras:return function(t,e){return E(S(t)[7],e)}(e,n)[t.getFullYear()<=0?0:1];default:var h=i;throw new Error("unexpected translation type "+h)}}(r,o,t,e,i,n)}}function ot(t){return function(e,i,n){var r=-1*n,o=w(i,_.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Z.Short:return(r>=0?"+":"")+it(s,2,o)+it(Math.abs(r%60),2,o);case Z.ShortGMT:return"GMT"+(r>=0?"+":"")+it(s,1,o);case Z.Long:return"GMT"+(r>=0?"+":"")+it(s,2,o)+":"+it(Math.abs(r%60),2,o);case Z.Extended:return 0===n?"Z":(r>=0?"+":"")+it(s,2,o)+":"+it(Math.abs(r%60),2,o);default:throw new Error('Unknown zone width "'+t+'"')}}}$[$.DayPeriods]="DayPeriods",$[$.Days]="Days",$[$.Months]="Months",$[$.Eras]="Eras";var st=0,at=4;function lt(t,e){return void 0===e&&(e=!1),function(i,n){var r,o,s,a;if(e){var l=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,c=i.getDate();r=1+Math.floor((c+l)/7)}else{var u=(s=i.getFullYear(),a=new Date(s,st,1).getDay(),new Date(s,0,1+(a<=at?at:at+7)-a)),h=(o=i,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(at-o.getDay()))).getTime()-u.getTime();r=1+Math.round(h/6048e5)}return it(r,t,w(n,_.MinusSign))}}var ct={};function ut(t,e){t=t.replace(/:/g,"");var i=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(i)?e:i}function ht(t,e){return Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(n._36)(t)+"'")}var pt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dt=function(){function t(t){this.locale=t}return t.prototype.transform=function(e,i,n,r){if(void 0===i&&(i="mediumDate"),null==e||""===e||e!=e)return null;var o,s;if("string"==typeof e&&(e=e.trim()),mt(e))o=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var a=e.split("-").map(function(t){return+t}),l=a[0],c=a[1],u=a[2];o=new Date(l,c-1,u)}else o="string"==typeof e&&(s=e.match(pt))?ft(s):new Date(e);else o=new Date(parseFloat(e));if(!mt(o))throw ht(t,e);return tt(o,i,r||this.locale,n)},t.decorators=[{type:n.K,args:[{name:"date",pure:!0}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}();function ft(t){var e=new Date(0),i=0,n=0,r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(i=+(t[9]+t[10]),n=+(t[9]+t[11])),r.call(e,+t[1],+t[2]-1,+t[3]);var s=+(t[4]||"0")-i,a=+(t[5]||"0")-n,l=+(t[6]||"0"),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,l,c),e}function mt(t){return t instanceof Date&&!isNaN(t.valueOf())}var gt,yt=function(){function t(){}return t.format=function(t,e,i,n){void 0===n&&(n={});var r=n.minimumIntegerDigits,o=n.minimumFractionDigits,s=n.maximumFractionDigits,a=n.currency,l=n.currencyAsSymbol,c=void 0!==l&&l,u={minimumIntegerDigits:r,minimumFractionDigits:o,maximumFractionDigits:s,style:d[i].toLowerCase()};return i==d.Currency&&(u.currency="string"==typeof a?a:void 0,u.currencyDisplay=c?"symbol":"code"),new Intl.NumberFormat(e,u).format(t)},t}(),_t=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,vt={yMMMdjms:Ot(Ct([Tt("year",1),St("month",3),Tt("day",1),Tt("hour",1),Tt("minute",1),Tt("second",1)])),yMdjm:Ot(Ct([Tt("year",1),Tt("month",1),Tt("day",1),Tt("hour",1),Tt("minute",1)])),yMMMMEEEEd:Ot(Ct([Tt("year",1),St("month",4),St("weekday",4),Tt("day",1)])),yMMMMd:Ot(Ct([Tt("year",1),St("month",4),Tt("day",1)])),yMMMd:Ot(Ct([Tt("year",1),St("month",3),Tt("day",1)])),yMd:Ot(Ct([Tt("year",1),Tt("month",1),Tt("day",1)])),jms:Ot(Ct([Tt("hour",1),Tt("second",1),Tt("minute",1)])),jm:Ot(Ct([Tt("hour",1),Tt("minute",1)]))},bt={yyyy:Ot(Tt("year",4)),yy:Ot(Tt("year",2)),y:Ot(Tt("year",1)),MMMM:Ot(St("month",4)),MMM:Ot(St("month",3)),MM:Ot(Tt("month",2)),M:Ot(Tt("month",1)),LLLL:Ot(St("month",4)),L:Ot(St("month",1)),dd:Ot(Tt("day",2)),d:Ot(Tt("day",1)),HH:xt(At(Ot(Et(Tt("hour",2),!1)))),H:At(Ot(Et(Tt("hour",1),!1))),hh:xt(At(Ot(Et(Tt("hour",2),!0)))),h:At(Ot(Et(Tt("hour",1),!0))),jj:Ot(Tt("hour",2)),j:Ot(Tt("hour",1)),mm:xt(Ot(Tt("minute",2))),m:Ot(Tt("minute",1)),ss:xt(Ot(Tt("second",2))),s:Ot(Tt("second",1)),sss:Ot(Tt("second",3)),EEEE:Ot(St("weekday",4)),EEE:Ot(St("weekday",3)),EE:Ot(St("weekday",2)),E:Ot(St("weekday",1)),a:(gt=Ot(Et(Tt("hour",1),!0)),function(t,e){return gt(t,e).split(" ")[1]}),Z:Pt("short"),z:Pt("long"),ww:Ot({}),w:Ot({}),G:Ot(St("era",1)),GG:Ot(St("era",2)),GGG:Ot(St("era",3)),GGGG:Ot(St("era",4))};function xt(t){return function(e,i){var n=t(e,i);return 1==n.length?"0"+n:n}}function At(t){return function(e,i){return t(e,i).split(" ")[0]}}function wt(t,e,i){return new Intl.DateTimeFormat(e,i).format(t).replace(/[\u200e\u200f]/g,"")}function Pt(t){var e={hour:"2-digit",hour12:!1,timeZoneName:t};return function(t,i){var n=wt(t,i,e);return n?n.substring(3):""}}function Et(t,e){return t.hour12=e,t}function Tt(t,e){var i={};return i[t]=2===e?"2-digit":"numeric",i}function St(t,e){var i={};return i[t]=e<4?e>1?"short":"narrow":"long",i}function Ct(t){return t.reduce(function(t,e){return Object(r.a)({},t,e)},{})}function Ot(t){return function(e,i){return wt(e,i,t)}}var Mt=new Map;var Rt=function(){function t(){}return t.format=function(t,e,i){return function(t,e,i){var n=vt[t];if(n)return n(e,i);var r=t,o=Mt.get(r);if(!o){o=[];var s=void 0;_t.exec(t);for(var a=t;a;)(s=_t.exec(a))?a=(o=o.concat(s.slice(1))).pop():(o.push(a),a=null);Mt.set(r,o)}return o.reduce(function(t,n){var r=bt[n];return t+(r?r(e,i):function(t){return"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(n))},"")}(i,t,e)},t}(),It=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i){if(void 0===i&&(i="mediumDate"),null==e||""===e||e!=e)return null;var n;if("string"==typeof e&&(e=e.trim()),Dt(e))n=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=e.split("-").map(function(t){return parseInt(t,10)}),o=r[0],s=r[1],a=r[2];n=new Date(o,s-1,a)}else n=new Date(e);else n=new Date(parseFloat(e));if(!Dt(n)){var l=void 0;if("string"!=typeof e||!(l=e.match(pt)))throw ht(t,e);n=ft(l)}return Rt.format(n,this._locale,t._ALIASES[i]||i)},t._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},t.decorators=[{type:n.K,args:[{name:"date",pure:!0}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}();function Dt(t){return t instanceof Date&&!isNaN(t.valueOf())}var Lt=/^(\d+)?\.((\d+)(-(\d+))?)?$/,kt=22,Ft=".",Nt="0",Bt=";",Vt=",",zt="#",Ut="\xa4",jt="%";function Gt(t,e,i,n,r){void 0===r&&(r=null);var o,s={str:null},a=function(t,e){return S(t)[14][e]}(e,i);if("string"!=typeof t||isNaN(+t-parseFloat(t))){if("number"!=typeof t)return s.error=t+" is not a number",s;o=t}else o=+t;var l=function(t,e){void 0===e&&(e="-");var i={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(Bt),r=n[0],o=n[1],s=-1!==r.indexOf(Ft)?r.split(Ft):[r.substring(0,r.lastIndexOf(Nt)+1),r.substring(r.lastIndexOf(Nt)+1)],a=s[0],l=s[1]||"";i.posPre=a.substr(0,a.indexOf(zt));for(var c=0;c<l.length;c++){var u=l.charAt(c);u===Nt?i.minFrac=i.maxFrac=c+1:u===zt?i.maxFrac=c+1:i.posSuf+=u}var h=a.split(Vt);if(i.gSize=h[1]?h[1].length:0,i.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var p=r.length-i.posPre.length-i.posSuf.length,d=o.indexOf(zt);i.negPre=o.substr(0,d).replace(/'/g,""),i.negSuf=o.substr(d+p).replace(/'/g,"")}else i.negPre=e+i.posPre,i.negSuf=i.posSuf;return i}(a,w(e,_.MinusSign)),c="",u=!1;if(isFinite(o)){var h=function(t){var e,i,n,r,o,s=Math.abs(t)+"",a=0;(i=s.indexOf(Ft))>-1&&(s=s.replace(Ft,""));(n=s.search(/e/i))>0?(i<0&&(i=n),i+=+s.slice(n+1),s=s.substring(0,n)):i<0&&(i=s.length);for(n=0;s.charAt(n)===Nt;n++);if(n===(o=s.length))e=[0],i=1;else{for(o--;s.charAt(o)===Nt;)o--;for(i-=n,e=[],r=0;n<=o;n++,r++)e[r]=+s.charAt(n)}i>kt&&(e=e.splice(0,kt-1),a=i-1,i=1);return{digits:e,exponent:a,integerLen:i}}(o);i===d.Percent&&(h=function(t){if(0===t.digits[0])return t;var e=t.digits.length-t.integerLen;t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2);return t}(h));var p=l.minInt,f=l.minFrac,m=l.maxFrac;if(n){var g=n.match(Lt);if(null===g)return s.error=n+" is not a valid digit info",s;var y=g[1],v=g[3],b=g[5];null!=y&&(p=Wt(y)),null!=v&&(f=Wt(v)),null!=b?m=Wt(b):null!=v&&f>m&&(m=f)}!function(t,e,i){if(e>i)throw new Error("The minimum number of digits after fraction ("+e+") is higher than the maximum ("+i+").");var n=t.digits,r=n.length-t.integerLen,o=Math.min(Math.max(e,r),i),s=o+t.integerLen,a=n[s];if(s>0){n.splice(Math.max(t.integerLen,s));for(var l=s;l<n.length;l++)n[l]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,s=o+1),n[0]=0;for(var c=1;c<s;c++)n[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[s-1]++;for(;r<Math.max(0,o);r++)n.push(0);var h=0!==o,p=e+t.integerLen,d=n.reduceRight(function(t,e,i,n){return e+=t,n[i]=e<10?e:e-10,h&&(0===n[i]&&i>=p?n.pop():h=!1),e>=10?1:0},0);d&&(n.unshift(d),t.integerLen++)}(h,f,m);var x=h.digits,A=h.integerLen,P=h.exponent,E=[];for(u=x.every(function(t){return!t});A<p;A++)x.unshift(0);for(;A<0;A++)x.unshift(0);A>0?E=x.splice(A,x.length):(E=x,x=[0]);var T=[];for(x.length>=l.lgSize&&T.unshift(x.splice(-l.lgSize,x.length).join(""));x.length>l.gSize;)T.unshift(x.splice(-l.gSize,x.length).join(""));x.length&&T.unshift(x.join(""));var C=r?_.CurrencyGroup:_.Group;if(c=T.join(w(e,C)),E.length)c+=w(e,r?_.CurrencyDecimal:_.Decimal)+E.join("");P&&(c+=w(e,_.Exponential)+"+"+P)}else c=w(e,_.Infinity);return c=o<0&&!u?l.negPre+c+l.negSuf:l.posPre+c+l.posSuf,i===d.Currency&&null!==r?(s.str=c.replace(Ut,r).replace(Ut,""),s):i===d.Percent?(s.str=c.replace(new RegExp(jt,"g"),w(e,_.PercentSign)),s):(s.str=c,s)}function Wt(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Ht(t,e,i,n,r,o,s){if(void 0===o&&(o=null),void 0===s&&(s=!1),null==i)return null;if("number"!=typeof(i="string"!=typeof i||isNaN(+i-parseFloat(i))?i:+i))throw ht(t,i);var a,l,c;if(n!==d.Currency&&(a=1,l=0,c=3),r){var u=r.match(Lt);if(null===u)throw new Error(r+" is not a valid digit info for number pipes");null!=u[1]&&(a=Wt(u[1])),null!=u[3]&&(l=Wt(u[3])),null!=u[5]&&(c=Wt(u[5]))}return yt.format(i,e,n,{minimumIntegerDigits:a,minimumFractionDigits:l,maximumFractionDigits:c,currency:o,currencyAsSymbol:s})}var Xt=[function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i){return Ht(t,this._locale,e,d.Decimal,i)},t.decorators=[{type:n.K,args:[{name:"number"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}(),function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i){return Ht(t,this._locale,e,d.Percent,i)},t.decorators=[{type:n.K,args:[{name:"percent"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}(),function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i,n,r){return void 0===i&&(i="USD"),void 0===n&&(n=!1),Ht(t,this._locale,e,d.Currency,r,i,n)},t.decorators=[{type:n.K,args:[{name:"currency"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}(),It],Yt=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),qt=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),Kt=new Yt,Qt=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,n._1.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(i){return e._updateLatestValue(t,i)})},t.prototype._selectStrategy=function(e){if(Object(n._22)(e))return qt;if(Object(n._21)(e))return Kt;throw ht(t,e)},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t.decorators=[{type:n.K,args:[{name:"async",pure:!1}]}],t.ctorParameters=function(){return[{type:n.h}]},t}(),Zt=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw ht(t,e);return e.toLowerCase()},t.decorators=[{type:n.K,args:[{name:"lowercase"}]}],t.ctorParameters=function(){return[]},t}();var Jt=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw ht(t,e);return e.split(/\b/g).map(function(t){return function(t){return t?t[0].toUpperCase()+t.substr(1).toLowerCase():t}(t)}).join("")},t.decorators=[{type:n.K,args:[{name:"titlecase"}]}],t.ctorParameters=function(){return[]},t}(),$t=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw ht(t,e);return e.toUpperCase()},t.decorators=[{type:n.K,args:[{name:"uppercase"}]}],t.ctorParameters=function(){return[]},t}(),te=/#/g,ee=function(){function t(t){this._localization=t}return t.prototype.transform=function(e,i,n){if(null==e)return"";if("object"!=typeof i||null===i)throw ht(t,i);return i[M(e,Object.keys(i),this._localization,n)].replace(te,e.toString())},t.decorators=[{type:n.K,args:[{name:"i18nPlural",pure:!0}]}],t.ctorParameters=function(){return[{type:O}]},t}(),ie=function(){function t(){}return t.prototype.transform=function(e,i){if(null==e)return"";if("object"!=typeof i||"string"!=typeof e)throw ht(t,i);return i.hasOwnProperty(e)?i[e]:i.hasOwnProperty("other")?i.other:""},t.decorators=[{type:n.K,args:[{name:"i18nSelect",pure:!0}]}],t.ctorParameters=function(){return[]},t}(),ne=function(){function t(){}return t.prototype.transform=function(t){return JSON.stringify(t,null,2)},t.decorators=[{type:n.K,args:[{name:"json",pure:!1}]}],t.ctorParameters=function(){return[]},t}(),re=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i,n){if(ae(e))return null;var r=Gt(e,n=n||this._locale,d.Decimal,i),o=r.str,s=r.error;if(s)throw ht(t,s);return o},t.decorators=[{type:n.K,args:[{name:"number"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}(),oe=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i,n){if(ae(e))return null;var r=Gt(e,n=n||this._locale,d.Percent,i),o=r.str,s=r.error;if(s)throw ht(t,s);return o},t.decorators=[{type:n.K,args:[{name:"percent"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}(),se=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,i,n,r,o){if(void 0===n&&(n="symbol"),ae(e))return null;o=o||this._locale,"boolean"==typeof n&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),n=n?"symbol":"code");var s=i||"USD";"code"!==n&&(s=function(t,e){var i=u[t]||[],n=i[1];return"narrow"===e&&"string"==typeof n?n:i[0]||t}(s,"symbol"===n?"wide":"narrow"));var a=Gt(e,o,d.Currency,r,s),l=a.str,c=a.error;if(c)throw ht(t,c);return l},t.decorators=[{type:n.K,args:[{name:"currency"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.u,args:[n.B]}]}]},t}();function ae(t){return null==t||""===t||t!=t}var le=function(){function t(){}return t.prototype.transform=function(e,i,n){if(null==e)return e;if(!this.supports(e))throw ht(t,e);return e.slice(i,n)},t.prototype.supports=function(t){return"string"==typeof t||Array.isArray(t)},t.decorators=[{type:n.K,args:[{name:"slice",pure:!1}]}],t.ctorParameters=function(){return[]},t}(),ce=[Qt,$t,Zt,ne,le,re,oe,Jt,se,dt,ee,ie],ue=function(){function t(){}return t.decorators=[{type:n.C,args:[{declarations:[q,ce],exports:[q,ce],providers:[{provide:O,useClass:R}]}]}],t.ctorParameters=function(){return[]},t}(),he=function(t,e){"string"==typeof e&&(e=parseInt(e,10));var i=e,n=i.toString().replace(/^[^.]*\.?/,""),r=Math.floor(Math.abs(i)),o=n.length,s=parseInt(n,10),a=parseInt(i.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(t.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===i?f.One:f.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return i===Math.floor(i)&&i>=0&&i<=1?f.One:f.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===r||1===i?f.One:f.Other;case"ar":return 0===i?f.Zero:1===i?f.One:2===i?f.Two:i%100===Math.floor(i%100)&&i%100>=3&&i%100<=10?f.Few:i%100===Math.floor(i%100)&&i%100>=11&&i%100<=99?f.Many:f.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===r&&0===o?f.One:f.Other;case"be":return i%10==1&&i%100!=11?f.One:i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?f.Few:i%10==0||i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?f.Many:f.Other;case"br":return i%10==1&&i%100!=11&&i%100!=71&&i%100!=91?f.One:i%10==2&&i%100!=12&&i%100!=72&&i%100!=92?f.Two:i%10===Math.floor(i%10)&&(i%10>=3&&i%10<=4||i%10==9)&&!(i%100>=10&&i%100<=19||i%100>=70&&i%100<=79||i%100>=90&&i%100<=99)?f.Few:0!==i&&i%1e6==0?f.Many:f.Other;case"bs":case"hr":case"sr":return 0===o&&r%10==1&&r%100!=11||s%10==1&&s%100!=11?f.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)||s%10===Math.floor(s%10)&&s%10>=2&&s%10<=4&&!(s%100>=12&&s%100<=14)?f.Few:f.Other;case"cs":case"sk":return 1===r&&0===o?f.One:r===Math.floor(r)&&r>=2&&r<=4&&0===o?f.Few:0!==o?f.Many:f.Other;case"cy":return 0===i?f.Zero:1===i?f.One:2===i?f.Two:3===i?f.Few:6===i?f.Many:f.Other;case"da":return 1===i||0!==a&&(0===r||1===r)?f.One:f.Other;case"dsb":case"hsb":return 0===o&&r%100==1||s%100==1?f.One:0===o&&r%100==2||s%100==2?f.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||s%100===Math.floor(s%100)&&s%100>=3&&s%100<=4?f.Few:f.Other;case"ff":case"fr":case"hy":case"kab":return 0===r||1===r?f.One:f.Other;case"fil":return 0===o&&(1===r||2===r||3===r)||0===o&&r%10!=4&&r%10!=6&&r%10!=9||0!==o&&s%10!=4&&s%10!=6&&s%10!=9?f.One:f.Other;case"ga":return 1===i?f.One:2===i?f.Two:i===Math.floor(i)&&i>=3&&i<=6?f.Few:i===Math.floor(i)&&i>=7&&i<=10?f.Many:f.Other;case"gd":return 1===i||11===i?f.One:2===i||12===i?f.Two:i===Math.floor(i)&&(i>=3&&i<=10||i>=13&&i<=19)?f.Few:f.Other;case"gv":return 0===o&&r%10==1?f.One:0===o&&r%10==2?f.Two:0!==o||r%100!=0&&r%100!=20&&r%100!=40&&r%100!=60&&r%100!=80?0!==o?f.Many:f.Other:f.Few;case"he":return 1===r&&0===o?f.One:2===r&&0===o?f.Two:0!==o||i>=0&&i<=10||i%10!=0?f.Other:f.Many;case"is":return 0===a&&r%10==1&&r%100!=11||0!==a?f.One:f.Other;case"ksh":return 0===i?f.Zero:1===i?f.One:f.Other;case"kw":case"naq":case"se":case"smn":return 1===i?f.One:2===i?f.Two:f.Other;case"lag":return 0===i?f.Zero:0!==r&&1!==r||0===i?f.Other:f.One;case"lt":return i%10!=1||i%100>=11&&i%100<=19?i%10===Math.floor(i%10)&&i%10>=2&&i%10<=9&&!(i%100>=11&&i%100<=19)?f.Few:0!==s?f.Many:f.Other:f.One;case"lv":case"prg":return i%10==0||i%100===Math.floor(i%100)&&i%100>=11&&i%100<=19||2===o&&s%100===Math.floor(s%100)&&s%100>=11&&s%100<=19?f.Zero:i%10==1&&i%100!=11||2===o&&s%10==1&&s%100!=11||2!==o&&s%10==1?f.One:f.Other;case"mk":return 0===o&&r%10==1||s%10==1?f.One:f.Other;case"mt":return 1===i?f.One:0===i||i%100===Math.floor(i%100)&&i%100>=2&&i%100<=10?f.Few:i%100===Math.floor(i%100)&&i%100>=11&&i%100<=19?f.Many:f.Other;case"pl":return 1===r&&0===o?f.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?f.Few:0===o&&1!==r&&r%10===Math.floor(r%10)&&r%10>=0&&r%10<=1||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=12&&r%100<=14?f.Many:f.Other;case"pt":return i===Math.floor(i)&&i>=0&&i<=2&&2!==i?f.One:f.Other;case"ro":return 1===r&&0===o?f.One:0!==o||0===i||1!==i&&i%100===Math.floor(i%100)&&i%100>=1&&i%100<=19?f.Few:f.Other;case"ru":case"uk":return 0===o&&r%10==1&&r%100!=11?f.One:0===o&&r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?f.Few:0===o&&r%10==0||0===o&&r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||0===o&&r%100===Math.floor(r%100)&&r%100>=11&&r%100<=14?f.Many:f.Other;case"shi":return 0===r||1===i?f.One:i===Math.floor(i)&&i>=2&&i<=10?f.Few:f.Other;case"si":return 0===i||1===i||0===r&&1===s?f.One:f.Other;case"sl":return 0===o&&r%100==1?f.One:0===o&&r%100==2?f.Two:0===o&&r%100===Math.floor(r%100)&&r%100>=3&&r%100<=4||0!==o?f.Few:f.Other;case"tzm":return i===Math.floor(i)&&i>=0&&i<=1||i===Math.floor(i)&&i>=11&&i<=99?f.One:f.Other;default:return f.Other}},pe=(function(){function t(){}t.decorators=[{type:n.C,args:[{declarations:[Xt],exports:[Xt],providers:[{provide:C,useValue:he}]}]}],t.ctorParameters=function(){return[]}}(),new n.w("DocumentToken")),de="browser";new n.W("5.2.4")},Upor:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error)},V7AE:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("xIGM").a.Symbol,r="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber"},"V8+5":function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"d",function(){return l}),i.d(e,"c",function(){return u}),i.d(e,"b",function(){return h});var n,r,o=i("LMZF"),s="undefined"!=typeof Intl&&Intl.v8BreakIterator,a=function(){function t(){this.isBrowser="object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!s)&&!!CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return t.decorators=[{type:o.v}],t.ctorParameters=function(){return[]},t}();function l(){if(null==n&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return n=!0}}))}finally{n=n||!1}return n}var c=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function u(){if(r)return r;if("object"!=typeof document||!document)return r=new Set(c);var t=document.createElement("input");return r=new Set(c.filter(function(e){return t.setAttribute("type",e),t.type===e}))}var h=function(){function t(){}return t.decorators=[{type:o.C,args:[{providers:[a]}]}],t.ctorParameters=function(){return[]},t}()},VIKU:function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t},e.isBuffer=t.isBuffer}).call(e,i("v0OU").Buffer)},Wy0q:function(t,e,i){"use strict";var n=i("AP4T"),r=i("XecN"),o=i("Rx5t");n.a.prototype.debounceTime=function(t,e){return void 0===e&&(e=r.a),Object(o.a)(t,e)(this)}},X3fp:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var i=t.Set;if(i&&"function"==typeof(new i)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var r=Object.getOwnPropertyNames(n.prototype),o=0;o<r.length;++o){var s=r[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}(i("xIGM").a)},XEj9:function(t,e,i){"use strict";function n(t){return null!=t&&""+t!="false"}function r(t,e){return void 0===e&&(e=0),o(t)?Number(t):e}function o(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function s(t){return Array.isArray(t)?t:[t]}i.d(e,"c",function(){return n}),i.d(e,"d",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s})},XKqF:function(t,e,i){(function(e){var n,r=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});!function(t){var e=function(){function e(){this._defines={},this._currentRank=32,this._maxRank=-1}return e.prototype.unBindMesh=function(){this._mesh=null},e.prototype.addFallback=function(t,e){this._defines[t]||(t<this._currentRank&&(this._currentRank=t),t>this._maxRank&&(this._maxRank=t),this._defines[t]=new Array),this._defines[t].push(e)},e.prototype.addCPUSkinningFallback=function(t,e){this._mesh=e,t<this._currentRank&&(this._currentRank=t),t>this._maxRank&&(this._maxRank=t)},Object.defineProperty(e.prototype,"isMoreFallbacks",{get:function(){return this._currentRank<=this._maxRank},enumerable:!0,configurable:!0}),e.prototype.reduce=function(e){if(this._mesh&&this._mesh.computeBonesUsingShaders&&this._mesh.numBoneInfluencers>0){this._mesh.computeBonesUsingShaders=!1,e=e.replace("#define NUM_BONE_INFLUENCERS "+this._mesh.numBoneInfluencers,"#define NUM_BONE_INFLUENCERS 0"),t.Tools.Log("Falling back to CPU skinning for "+this._mesh.name);for(var i=this._mesh.getScene(),n=0;n<i.meshes.length;n++){var r=i.meshes[n];r.material===this._mesh.material&&r.computeBonesUsingShaders&&r.numBoneInfluencers>0&&(r.computeBonesUsingShaders=!1)}}else{var o=this._defines[this._currentRank];if(o)for(n=0;n<o.length;n++)e=e.replace("#define "+o[n],"");this._currentRank++}return e},e}();t.EffectFallbacks=e;var i=function(){return function(){}}();t.EffectCreationOptions=i;var n=function(){function e(i,n,r,o,s,a,l,c,u,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===c&&(c=null),void 0===u&&(u=null);var p,d,f,m=this;if(this.uniqueId=0,this.onCompileObservable=new t.Observable,this.onErrorObservable=new t.Observable,this.onBindObservable=new t.Observable,this._uniformBuffersNames={},this._isReady=!1,this._compilationError="",this.name=i,n.attributes){var g=n;if(this._engine=r,this._attributesNames=g.attributes,this._uniformsNames=g.uniformsNames.concat(g.samplers),this._samplers=g.samplers,this.defines=g.defines,this.onError=g.onError,this.onCompiled=g.onCompiled,this._fallbacks=g.fallbacks,this._indexParameters=g.indexParameters,this._transformFeedbackVaryings=g.transformFeedbackVaryings,g.uniformBuffersNames)for(var y=0;y<g.uniformBuffersNames.length;y++)this._uniformBuffersNames[g.uniformBuffersNames[y]]=y}else this._engine=s,this.defines=a,this._uniformsNames=r.concat(o),this._samplers=o,this._attributesNames=n,this.onError=u,this.onCompiled=c,this._indexParameters=h,this._fallbacks=l;this.uniqueId=e._uniqueIdSeed++,i.vertexElement?(p=document.getElementById(i.vertexElement))||(p=i.vertexElement):p=i.vertex||i,i.fragmentElement?(d=document.getElementById(i.fragmentElement))||(d=i.fragmentElement):d=i.fragment||i,this._loadVertexShaderAsync(p).then(function(t){return m._processIncludesAsync(t)}).then(function(t){return f=m._processShaderConversion(t,!1),m._loadFragmentShaderAsync(d)}).then(function(t){return m._processIncludesAsync(t)}).then(function(t){var e=m._processShaderConversion(t,!0);if(i){var n=i.vertexElement||i.vertex||i,r=i.fragmentElement||i.fragment||i;m._vertexSourceCode="#define SHADER_NAME vertex:"+n+"\n"+f,m._fragmentSourceCode="#define SHADER_NAME fragment:"+r+"\n"+e}else m._vertexSourceCode=f,m._fragmentSourceCode=e;m._prepareEffect()})}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._isReady},e.prototype.getEngine=function(){return this._engine},e.prototype.getProgram=function(){return this._program},e.prototype.getAttributesNames=function(){return this._attributesNames},e.prototype.getAttributeLocation=function(t){return this._attributes[t]},e.prototype.getAttributeLocationByName=function(t){var e=this._attributesNames.indexOf(t);return this._attributes[e]},e.prototype.getAttributesCount=function(){return this._attributes.length},e.prototype.getUniformIndex=function(t){return this._uniformsNames.indexOf(t)},e.prototype.getUniform=function(t){return this._uniforms[this._uniformsNames.indexOf(t)]},e.prototype.getSamplers=function(){return this._samplers},e.prototype.getCompilationError=function(){return this._compilationError},e.prototype.executeWhenCompiled=function(t){this.isReady()?t(this):this.onCompileObservable.add(function(e){t(e)})},e.prototype._loadVertexShaderAsync=function(i){if(t.Tools.IsWindowObjectExist()&&i instanceof HTMLElement){var n=t.Tools.GetDOMTextContent(i);return Promise.resolve(n)}if("base64:"===i.substr(0,7)){var r=window.atob(i.substr(7));return Promise.resolve(r)}return e.ShadersStore[i+"VertexShader"]?Promise.resolve(e.ShadersStore[i+"VertexShader"]):(o="."===i[0]||"/"===i[0]||i.indexOf("http")>-1?i:t.Engine.ShadersRepository+i,this._engine._loadFileAsync(o+".vertex.fx"));var o},e.prototype._loadFragmentShaderAsync=function(i){if(t.Tools.IsWindowObjectExist()&&i instanceof HTMLElement){var n=t.Tools.GetDOMTextContent(i);return Promise.resolve(n)}if("base64:"===i.substr(0,7)){var r=window.atob(i.substr(7));return Promise.resolve(r)}return e.ShadersStore[i+"PixelShader"]?Promise.resolve(e.ShadersStore[i+"PixelShader"]):e.ShadersStore[i+"FragmentShader"]?Promise.resolve(e.ShadersStore[i+"FragmentShader"]):(o="."===i[0]||"/"===i[0]||i.indexOf("http")>-1?i:t.Engine.ShadersRepository+i,this._engine._loadFileAsync(o+".fragment.fx"));var o},e.prototype._dumpShadersSource=function(e,i,n){var r=(this._engine.webGLVersion>1?"#version 300 es\n":"")+(n?n+"\n":"");i=r+i;var o=2,s=/\n/gm,a="\n1\t"+(e=r+e).replace(s,function(){return"\n"+o+++"\t"});o=2;var l="\n1\t"+i.replace(s,function(){return"\n"+o+++"\t"});this.name.vertexElement?(t.Tools.Error("Vertex shader: "+this.name.vertexElement+a),t.Tools.Error("Fragment shader: "+this.name.fragmentElement+l)):this.name.vertex?(t.Tools.Error("Vertex shader: "+this.name.vertex+a),t.Tools.Error("Fragment shader: "+this.name.fragment+l)):(t.Tools.Error("Vertex shader: "+this.name+a),t.Tools.Error("Fragment shader: "+this.name+l))},e.prototype._processShaderConversion=function(t,e){var i=this._processPrecision(t);if(1==this._engine.webGLVersion)return i;if(-1!==i.indexOf("#version 3"))return i.replace("#version 300 es","");var n=-1!==i.search(/#extension.+GL_EXT_draw_buffers.+require/),r=i.replace(/#extension.+(GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g,"");return r=(r=(r=r.replace(/varying(?![\n\r])\s/g,e?"in ":"out ")).replace(/attribute[ \t]/g,"in ")).replace(/[ \t]attribute/g," in"),e&&(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/texture2DLodEXT\s*\(/g,"textureLod(")).replace(/textureCubeLodEXT\s*\(/g,"textureLod(")).replace(/texture2D\s*\(/g,"texture(")).replace(/textureCube\s*\(/g,"texture(")).replace(/gl_FragDepthEXT/g,"gl_FragDepth")).replace(/gl_FragColor/g,"glFragColor")).replace(/gl_FragData/g,"glFragData")).replace(/void\s+?main\s*\(/g,(n?"":"out vec4 glFragColor;\n")+"void main(")),r},e.prototype._processIncludesAsync=function(i){var n=this;return new Promise(function(r,o){for(var s=/#include<(.+)>(\((.*)\))*(\[(.*)\])*/g,a=s.exec(i),l=i;null!=a;){var c=a[1];if(-1!==c.indexOf("__decl__")&&(c=c.replace(/__decl__/,""),n._engine.supportsUniformBuffers&&(c=(c=c.replace(/Vertex/,"Ubo")).replace(/Fragment/,"Ubo")),c+="Declaration"),!e.IncludesShadersStore[c]){var u=t.Engine.ShadersRepository+"ShadersInclude/"+c+".fx";return void n._engine._loadFileAsync(u).then(function(t){return e.IncludesShadersStore[c]=t,n._processIncludesAsync(l)}).then(function(t){r(t)})}var h=e.IncludesShadersStore[c];if(a[2])for(var p=a[3].split(","),d=0;d<p.length;d+=2){var f=new RegExp(p[d],"g"),m=p[d+1];h=h.replace(f,m)}if(a[4]){var g=a[5];if(-1!==g.indexOf("..")){var y=g.split(".."),_=parseInt(y[0]),v=parseInt(y[1]),b=h.slice(0);h="",isNaN(v)&&(v=n._indexParameters[y[1]]);for(var x=_;x<v;x++)n._engine.supportsUniformBuffers||(b=b.replace(/light\{X\}.(\w*)/g,function(t,e){return e+"{X}"})),h+=b.replace(/\{X\}/g,x.toString())+"\n"}else n._engine.supportsUniformBuffers||(h=h.replace(/light\{X\}.(\w*)/g,function(t,e){return e+"{X}"})),h=h.replace(/\{X\}/g,g)}l=l.replace(a[0],h),a=s.exec(i)}r(l)})},e.prototype._processPrecision=function(t){return-1===t.indexOf("precision highp float")?t=this._engine.getCaps().highPrecisionShaderSupported?"precision highp float;\n"+t:"precision mediump float;\n"+t:this._engine.getCaps().highPrecisionShaderSupported||(t=t.replace("precision highp float","precision mediump float")),t},e.prototype._rebuildProgram=function(e,i,n,r){var o=this;this._isReady=!1,this._vertexSourceCodeOverride=e,this._fragmentSourceCodeOverride=i,this.onError=function(t,e){r&&r(e)},this.onCompiled=function(){for(var e=o.getEngine().scenes,i=0;i<e.length;i++)e[i].markAllMaterialsAsDirty(t.Material.TextureDirtyFlag);n&&n(o._program)},this._fallbacks=null,this._prepareEffect()},e.prototype.getSpecificUniformLocations=function(t){return this._engine.getUniforms(this._program,t)},e.prototype._prepareEffect=function(){var e=this._attributesNames,i=this.defines,n=this._fallbacks;this._valueCache={};var r=this._program;try{var o,s=this._engine;if(this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._program=s.createRawShaderProgram(this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,void 0,this._transformFeedbackVaryings):this._program=s.createShaderProgram(this._vertexSourceCode,this._fragmentSourceCode,i,void 0,this._transformFeedbackVaryings),this._program.__SPECTOR_rebuildProgram=this._rebuildProgram.bind(this),s.supportsUniformBuffers)for(var a in this._uniformBuffersNames)this.bindUniformBlock(a,this._uniformBuffersNames[a]);for(this._uniforms=s.getUniforms(this._program,this._uniformsNames),this._attributes=s.getAttributes(this._program,e),o=0;o<this._samplers.length;o++)null==this.getUniform(this._samplers[o])&&(this._samplers.splice(o,1),o--);s.bindSamplers(this),this._compilationError="",this._isReady=!0,this.onCompiled&&this.onCompiled(this),this.onCompileObservable.notifyObservers(this),this.onCompileObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh(),r&&this.getEngine()._deleteProgram(r)}catch(s){this._compilationError=s.message,t.Tools.Error("Unable to compile effect:"),t.Tools.Error("Uniforms: "+this._uniformsNames.map(function(t){return" "+t})),t.Tools.Error("Attributes: "+e.map(function(t){return" "+t})),this._dumpShadersSource(this._vertexSourceCode,this._fragmentSourceCode,i),t.Tools.Error("Error: "+this._compilationError),r&&(this._program=r,this._isReady=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this)),n&&n.isMoreFallbacks?(t.Tools.Error("Trying next fallback."),this.defines=n.reduce(this.defines),this._prepareEffect()):(this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this),this.onErrorObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh())}},Object.defineProperty(e.prototype,"isSupported",{get:function(){return""===this._compilationError},enumerable:!0,configurable:!0}),e.prototype._bindTexture=function(t,e){this._engine._bindTexture(this._samplers.indexOf(t),e)},e.prototype.setTexture=function(t,e){this._engine.setTexture(this._samplers.indexOf(t),this.getUniform(t),e)},e.prototype.setTextureArray=function(t,e){if(-1===this._samplers.indexOf(t+"Ex"))for(var i=this._samplers.indexOf(t),n=1;n<e.length;n++)this._samplers.splice(i+n,0,t+"Ex");this._engine.setTextureArray(this._samplers.indexOf(t),this.getUniform(t),e)},e.prototype.setTextureFromPostProcess=function(t,e){this._engine.setTextureFromPostProcess(this._samplers.indexOf(t),e)},e.prototype._cacheMatrix=function(t,e){var i=this._valueCache[t],n=e.updateFlag;return(void 0===i||i!==n)&&(this._valueCache[t]=n,!0)},e.prototype._cacheFloat2=function(t,e,i){var n=this._valueCache[t];if(!n)return n=[e,i],this._valueCache[t]=n,!0;var r=!1;return n[0]!==e&&(n[0]=e,r=!0),n[1]!==i&&(n[1]=i,r=!0),r},e.prototype._cacheFloat3=function(t,e,i,n){var r=this._valueCache[t];if(!r)return r=[e,i,n],this._valueCache[t]=r,!0;var o=!1;return r[0]!==e&&(r[0]=e,o=!0),r[1]!==i&&(r[1]=i,o=!0),r[2]!==n&&(r[2]=n,o=!0),o},e.prototype._cacheFloat4=function(t,e,i,n,r){var o=this._valueCache[t];if(!o)return o=[e,i,n,r],this._valueCache[t]=o,!0;var s=!1;return o[0]!==e&&(o[0]=e,s=!0),o[1]!==i&&(o[1]=i,s=!0),o[2]!==n&&(o[2]=n,s=!0),o[3]!==r&&(o[3]=r,s=!0),s},e.prototype.bindUniformBuffer=function(t,i){var n=this._uniformBuffersNames[i];void 0!==n&&e._baseCache[n]!==t&&(e._baseCache[n]=t,this._engine.bindUniformBufferBase(t,n))},e.prototype.bindUniformBlock=function(t,e){this._engine.bindUniformBlock(this._program,t,e)},e.prototype.setInt=function(t,e){var i=this._valueCache[t];return void 0!==i&&i===e?this:(this._valueCache[t]=e,this._engine.setInt(this.getUniform(t),e),this)},e.prototype.setIntArray=function(t,e){return this._valueCache[t]=null,this._engine.setIntArray(this.getUniform(t),e),this},e.prototype.setIntArray2=function(t,e){return this._valueCache[t]=null,this._engine.setIntArray2(this.getUniform(t),e),this},e.prototype.setIntArray3=function(t,e){return this._valueCache[t]=null,this._engine.setIntArray3(this.getUniform(t),e),this},e.prototype.setIntArray4=function(t,e){return this._valueCache[t]=null,this._engine.setIntArray4(this.getUniform(t),e),this},e.prototype.setFloatArray=function(t,e){return this._valueCache[t]=null,this._engine.setFloatArray(this.getUniform(t),e),this},e.prototype.setFloatArray2=function(t,e){return this._valueCache[t]=null,this._engine.setFloatArray2(this.getUniform(t),e),this},e.prototype.setFloatArray3=function(t,e){return this._valueCache[t]=null,this._engine.setFloatArray3(this.getUniform(t),e),this},e.prototype.setFloatArray4=function(t,e){return this._valueCache[t]=null,this._engine.setFloatArray4(this.getUniform(t),e),this},e.prototype.setArray=function(t,e){return this._valueCache[t]=null,this._engine.setArray(this.getUniform(t),e),this},e.prototype.setArray2=function(t,e){return this._valueCache[t]=null,this._engine.setArray2(this.getUniform(t),e),this},e.prototype.setArray3=function(t,e){return this._valueCache[t]=null,this._engine.setArray3(this.getUniform(t),e),this},e.prototype.setArray4=function(t,e){return this._valueCache[t]=null,this._engine.setArray4(this.getUniform(t),e),this},e.prototype.setMatrices=function(t,e){return e?(this._valueCache[t]=null,this._engine.setMatrices(this.getUniform(t),e),this):this},e.prototype.setMatrix=function(t,e){return this._cacheMatrix(t,e)&&this._engine.setMatrix(this.getUniform(t),e),this},e.prototype.setMatrix3x3=function(t,e){return this._valueCache[t]=null,this._engine.setMatrix3x3(this.getUniform(t),e),this},e.prototype.setMatrix2x2=function(t,e){return this._valueCache[t]=null,this._engine.setMatrix2x2(this.getUniform(t),e),this},e.prototype.setFloat=function(t,e){var i=this._valueCache[t];return void 0!==i&&i===e?this:(this._valueCache[t]=e,this._engine.setFloat(this.getUniform(t),e),this)},e.prototype.setBool=function(t,e){var i=this._valueCache[t];return void 0!==i&&i===e?this:(this._valueCache[t]=e,this._engine.setBool(this.getUniform(t),e?1:0),this)},e.prototype.setVector2=function(t,e){return this._cacheFloat2(t,e.x,e.y)&&this._engine.setFloat2(this.getUniform(t),e.x,e.y),this},e.prototype.setFloat2=function(t,e,i){return this._cacheFloat2(t,e,i)&&this._engine.setFloat2(this.getUniform(t),e,i),this},e.prototype.setVector3=function(t,e){return this._cacheFloat3(t,e.x,e.y,e.z)&&this._engine.setFloat3(this.getUniform(t),e.x,e.y,e.z),this},e.prototype.setFloat3=function(t,e,i,n){return this._cacheFloat3(t,e,i,n)&&this._engine.setFloat3(this.getUniform(t),e,i,n),this},e.prototype.setVector4=function(t,e){return this._cacheFloat4(t,e.x,e.y,e.z,e.w)&&this._engine.setFloat4(this.getUniform(t),e.x,e.y,e.z,e.w),this},e.prototype.setFloat4=function(t,e,i,n,r){return this._cacheFloat4(t,e,i,n,r)&&this._engine.setFloat4(this.getUniform(t),e,i,n,r),this},e.prototype.setColor3=function(t,e){return this._cacheFloat3(t,e.r,e.g,e.b)&&this._engine.setColor3(this.getUniform(t),e),this},e.prototype.setColor4=function(t,e,i){return this._cacheFloat4(t,e.r,e.g,e.b,i)&&this._engine.setColor4(this.getUniform(t),e,i),this},e.ResetCache=function(){e._baseCache={}},e._uniqueIdSeed=0,e._baseCache={},e.ShadersStore={},e.IncludesShadersStore={},e}();t.Effect=n}(l||(l={})),function(t){var e=function(){function t(){}return Object.defineProperty(t,"KEYDOWN",{get:function(){return t._KEYDOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"KEYUP",{get:function(){return t._KEYUP},enumerable:!0,configurable:!0}),t._KEYDOWN=1,t._KEYUP=2,t}();t.KeyboardEventTypes=e;var i=function(){return function(t,e){this.type=t,this.event=e}}();t.KeyboardInfo=i;var n=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.skipOnPointerObservable=!1,n}return o(e,t),e}(i);t.KeyboardInfoPre=n}(l||(l={})),function(t){var e=function(){function t(){}return Object.defineProperty(t,"POINTERDOWN",{get:function(){return t._POINTERDOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERUP",{get:function(){return t._POINTERUP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERMOVE",{get:function(){return t._POINTERMOVE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERWHEEL",{get:function(){return t._POINTERWHEEL},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERPICK",{get:function(){return t._POINTERPICK},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERTAP",{get:function(){return t._POINTERTAP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POINTERDOUBLETAP",{get:function(){return t._POINTERDOUBLETAP},enumerable:!0,configurable:!0}),t._POINTERDOWN=1,t._POINTERUP=2,t._POINTERMOVE=4,t._POINTERWHEEL=8,t._POINTERPICK=16,t._POINTERTAP=32,t._POINTERDOUBLETAP=64,t}();t.PointerEventTypes=e;var i=function(){return function(t,e){this.type=t,this.event=e}}();t.PointerInfoBase=i;var n=function(e){function i(i,n,r,o){var s=e.call(this,i,n)||this;return s.skipOnPointerObservable=!1,s.localPosition=new t.Vector2(r,o),s}return o(i,e),i}(i);t.PointerInfoPre=n;var r=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.pickInfo=n,r}return o(e,t),e}(i);t.PointerInfo=r}(l||(l={})),function(t){t.ToGammaSpace=1/2.2,t.ToLinearSpace=2.2,t.Epsilon=.001;var e=function(){function e(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=i}return e.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},e.prototype.getClassName=function(){return"Color3"},e.prototype.getHashCode=function(){var t=this.r||0;return 397*(t=397*t^(this.g||0))^(this.b||0)},e.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this},e.prototype.toColor4=function(t){return void 0===t&&(t=1),new i(this.r,this.g,this.b,t)},e.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},e.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},e.prototype.multiply=function(t){return new e(this.r*t.r,this.g*t.g,this.b*t.b)},e.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this},e.prototype.equals=function(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b},e.prototype.equalsFloats=function(t,e,i){return this.r===t&&this.g===e&&this.b===i},e.prototype.scale=function(t){return new e(this.r*t,this.g*t,this.b*t)},e.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this},e.prototype.clampToRef=function(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=1),n.r=t.Scalar.Clamp(this.r,e,i),n.g=t.Scalar.Clamp(this.g,e,i),n.b=t.Scalar.Clamp(this.b,e,i),this},e.prototype.add=function(t){return new e(this.r+t.r,this.g+t.g,this.b+t.b)},e.prototype.addToRef=function(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this},e.prototype.subtract=function(t){return new e(this.r-t.r,this.g-t.g,this.b-t.b)},e.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this},e.prototype.clone=function(){return new e(this.r,this.g,this.b)},e.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},e.prototype.copyFromFloats=function(t,e,i){return this.r=t,this.g=e,this.b=i,this},e.prototype.set=function(t,e,i){return this.copyFromFloats(t,e,i)},e.prototype.toHexString=function(){var e=255*this.r|0,i=255*this.g|0,n=255*this.b|0;return"#"+t.Scalar.ToHex(e)+t.Scalar.ToHex(i)+t.Scalar.ToHex(n)},e.prototype.toLinearSpace=function(){var t=new e;return this.toLinearSpaceToRef(t),t},e.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,t.ToLinearSpace),e.g=Math.pow(this.g,t.ToLinearSpace),e.b=Math.pow(this.b,t.ToLinearSpace),this},e.prototype.toGammaSpace=function(){var t=new e;return this.toGammaSpaceToRef(t),t},e.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,t.ToGammaSpace),e.g=Math.pow(this.g,t.ToGammaSpace),e.b=Math.pow(this.b,t.ToGammaSpace),this},e.FromHexString=function(t){if("#"!==t.substring(0,1)||7!==t.length)return new e(0,0,0);var i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return e.FromInts(i,n,r)},e.FromArray=function(t,i){return void 0===i&&(i=0),new e(t[i],t[i+1],t[i+2])},e.FromInts=function(t,i,n){return new e(t/255,i/255,n/255)},e.Lerp=function(t,i,n){return new e(t.r+(i.r-t.r)*n,t.g+(i.g-t.g)*n,t.b+(i.b-t.b)*n)},e.Red=function(){return new e(1,0,0)},e.Green=function(){return new e(0,1,0)},e.Blue=function(){return new e(0,0,1)},e.Black=function(){return new e(0,0,0)},e.White=function(){return new e(1,1,1)},e.Purple=function(){return new e(.5,0,.5)},e.Magenta=function(){return new e(1,0,1)},e.Yellow=function(){return new e(1,1,0)},e.Gray=function(){return new e(.5,.5,.5)},e.Teal=function(){return new e(0,1,1)},e.Random=function(){return new e(Math.random(),Math.random(),Math.random())},e}();t.Color3=e;var i=function(){function e(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.r=t,this.g=e,this.b=i,this.a=n}return e.prototype.addInPlace=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},e.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},e.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this},e.prototype.add=function(t){return new e(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},e.prototype.subtract=function(t){return new e(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)},e.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this},e.prototype.scale=function(t){return new e(this.r*t,this.g*t,this.b*t,this.a*t)},e.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this},e.prototype.clampToRef=function(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=1),n.r=t.Scalar.Clamp(this.r,e,i),n.g=t.Scalar.Clamp(this.g,e,i),n.b=t.Scalar.Clamp(this.b,e,i),n.a=t.Scalar.Clamp(this.a,e,i),this},e.prototype.multiply=function(t){return new e(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)},e.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e},e.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},e.prototype.getClassName=function(){return"Color4"},e.prototype.getHashCode=function(){var t=this.r||0;return 397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)},e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.a)},e.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},e.prototype.copyFromFloats=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this},e.prototype.set=function(t,e,i,n){return this.copyFromFloats(t,e,i,n)},e.prototype.toHexString=function(){var e=255*this.r|0,i=255*this.g|0,n=255*this.b|0,r=255*this.a|0;return"#"+t.Scalar.ToHex(e)+t.Scalar.ToHex(i)+t.Scalar.ToHex(n)+t.Scalar.ToHex(r)},e.prototype.toLinearSpace=function(){var t=new e;return this.toLinearSpaceToRef(t),t},e.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,t.ToLinearSpace),e.g=Math.pow(this.g,t.ToLinearSpace),e.b=Math.pow(this.b,t.ToLinearSpace),e.a=this.a,this},e.prototype.toGammaSpace=function(){var t=new e;return this.toGammaSpaceToRef(t),t},e.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,t.ToGammaSpace),e.g=Math.pow(this.g,t.ToGammaSpace),e.b=Math.pow(this.b,t.ToGammaSpace),e.a=this.a,this},e.FromHexString=function(t){if("#"!==t.substring(0,1)||9!==t.length)return new e(0,0,0,0);var i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16),o=parseInt(t.substring(7,9),16);return e.FromInts(i,n,r,o)},e.Lerp=function(t,i,n){var r=new e(0,0,0,0);return e.LerpToRef(t,i,n,r),r},e.LerpToRef=function(t,e,i,n){n.r=t.r+(e.r-t.r)*i,n.g=t.g+(e.g-t.g)*i,n.b=t.b+(e.b-t.b)*i,n.a=t.a+(e.a-t.a)*i},e.FromArray=function(t,i){return void 0===i&&(i=0),new e(t[i],t[i+1],t[i+2],t[i+3])},e.FromInts=function(t,i,n,r){return new e(t/255,i/255,n/255,r/255)},e.CheckColors4=function(t,e){if(t.length===3*e){for(var i=[],n=0;n<t.length;n+=3){var r=n/3*4;i[r]=t[n],i[r+1]=t[n+1],i[r+2]=t[n+2],i[r+3]=1}return i}return t},e}();t.Color4=i;var n=function(){function e(t,e){this.x=t,this.y=e}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},e.prototype.getClassName=function(){return"Vector2"},e.prototype.getHashCode=function(){var t=this.x||0;return 397*t^(this.y||0)},e.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,this},e.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.copyFromFloats=function(t,e){return this.x=t,this.y=e,this},e.prototype.set=function(t,e){return this.copyFromFloats(t,e)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this},e.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.addVector3=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this},e.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this},e.prototype.multiplyByFloats=function(t,i){return new e(this.x*t,this.y*i)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this},e.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},e.prototype.negate=function(){return new e(-this.x,-this.y)},e.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},e.prototype.scale=function(t){return new e(this.x*t,this.y*t)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.equalsWithEpsilon=function(e,i){return void 0===i&&(i=t.Epsilon),e&&t.Scalar.WithinEpsilon(this.x,e.x,i)&&t.Scalar.WithinEpsilon(this.y,e.y,i)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.Zero=function(){return new e(0,0)},e.One=function(){return new e(1,1)},e.FromArray=function(t,i){return void 0===i&&(i=0),new e(t[i],t[i+1])},e.FromArrayToRef=function(t,e,i){i.x=t[e],i.y=t[e+1]},e.CatmullRom=function(t,i,n,r,o){var s=o*o,a=o*s;return new e(.5*(2*i.x+(-t.x+n.x)*o+(2*t.x-5*i.x+4*n.x-r.x)*s+(-t.x+3*i.x-3*n.x+r.x)*a),.5*(2*i.y+(-t.y+n.y)*o+(2*t.y-5*i.y+4*n.y-r.y)*s+(-t.y+3*i.y-3*n.y+r.y)*a))},e.Clamp=function(t,i,n){var r=t.x;r=(r=r>n.x?n.x:r)<i.x?i.x:r;var o=t.y;return new e(r,o=(o=o>n.y?n.y:o)<i.y?i.y:o)},e.Hermite=function(t,i,n,r,o){var s=o*o,a=o*s,l=2*a-3*s+1,c=-2*a+3*s,u=a-2*s+o,h=a-s;return new e(t.x*l+n.x*c+i.x*u+r.x*h,t.y*l+n.y*c+i.y*u+r.y*h)},e.Lerp=function(t,i,n){return new e(t.x+(i.x-t.x)*n,t.y+(i.y-t.y)*n)},e.Dot=function(t,e){return t.x*e.x+t.y*e.y},e.Normalize=function(t){var e=t.clone();return e.normalize(),e},e.Minimize=function(t,i){return new e(t.x<i.x?t.x:i.x,t.y<i.y?t.y:i.y)},e.Maximize=function(t,i){return new e(t.x>i.x?t.x:i.x,t.y>i.y?t.y:i.y)},e.Transform=function(t,i){var n=e.Zero();return e.TransformToRef(t,i,n),n},e.TransformToRef=function(t,e,i){var n=t.x*e.m[0]+t.y*e.m[4]+e.m[12],r=t.x*e.m[1]+t.y*e.m[5]+e.m[13];i.x=n,i.y=r},e.PointInTriangle=function(t,e,i,n){var r=.5*(-i.y*n.x+e.y*(-i.x+n.x)+e.x*(i.y-n.y)+i.x*n.y),o=r<0?-1:1,s=(e.y*n.x-e.x*n.y+(n.y-e.y)*t.x+(e.x-n.x)*t.y)*o,a=(e.x*i.y-e.y*i.x+(e.y-i.y)*t.x+(i.x-e.x)*t.y)*o;return s>0&&a>0&&s+a<2*r*o},e.Distance=function(t,i){return Math.sqrt(e.DistanceSquared(t,i))},e.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},e.Center=function(t,e){var i=t.add(e);return i.scaleInPlace(.5),i},e.DistanceOfPointFromSegment=function(t,i,n){var r=e.DistanceSquared(i,n);if(0===r)return e.Distance(t,i);var o=n.subtract(i),s=Math.max(0,Math.min(1,e.Dot(t.subtract(i),o)/r)),a=i.add(o.multiplyByFloats(s,s));return e.Distance(t,a)},e}();t.Vector2=n;var r=function(){function e(t,e,i){this.x=t,this.y=e,this.z=i}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+"}"},e.prototype.getClassName=function(){return"Vector3"},e.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*t^(this.y||0))^(this.z||0)},e.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},e.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this},e.prototype.toQuaternion=function(){var t=new a(0,0,0,1),e=Math.cos(.5*(this.x+this.z)),i=Math.sin(.5*(this.x+this.z)),n=Math.cos(.5*(this.z-this.x)),r=Math.sin(.5*(this.z-this.x)),o=Math.cos(.5*this.y),s=Math.sin(.5*this.y);return t.x=n*s,t.y=-r*s,t.z=i*o,t.w=e*o,t},e.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,this},e.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,this},e.prototype.subtractFromFloats=function(t,i,n){return new e(this.x-t,this.y-i,this.z-n)},e.prototype.subtractFromFloatsToRef=function(t,e,i,n){return n.x=this.x-t,n.y=this.y-e,n.z=this.z-i,this},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z)},e.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t)},e.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,this},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z},e.prototype.equalsWithEpsilon=function(e,i){return void 0===i&&(i=t.Epsilon),e&&t.Scalar.WithinEpsilon(this.x,e.x,i)&&t.Scalar.WithinEpsilon(this.y,e.y,i)&&t.Scalar.WithinEpsilon(this.z,e.z,i)},e.prototype.equalsToFloats=function(t,e,i){return this.x===t&&this.y===e&&this.z===i},e.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y,this.z*t.z)},e.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,this},e.prototype.multiplyByFloats=function(t,i,n){return new e(this.x*t,this.y*i,this.z*n)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y,this.z/t.z)},e.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,this},e.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},e.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),this},e.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),this},Object.defineProperty(e.prototype,"isNonUniform",{get:function(){var t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;var i=Math.abs(this.z);return t!==i||e!==i},enumerable:!0,configurable:!0}),e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.prototype.normalize=function(){var t=this.length();if(0===t||1===t)return this;var e=1/t;return this.x*=e,this.y*=e,this.z*=e,this},e.prototype.normalizeToNew=function(){var t=new e(0,0,0);return this.normalizeToRef(t),t},e.prototype.normalizeToRef=function(t){var e=this.length();if(0===e||1===e)return t.set(this.x,this.y,this.z),t;var i=1/e;return this.scaleToRef(i,t),t},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.prototype.copyFromFloats=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},e.prototype.set=function(t,e,i){return this.copyFromFloats(t,e,i)},e.GetClipFactor=function(t,i,n,r){var o=e.Dot(t,n)-r;return o/(o-(e.Dot(i,n)-r))},e.GetAngleBetweenVectors=function(t,i,n){var r=t.clone().normalize(),o=i.clone().normalize(),s=e.Dot(r,o),a=e.Cross(r,o);return e.Dot(a,n)>0?Math.acos(s):-Math.acos(s)},e.FromArray=function(t,i){return i||(i=0),new e(t[i],t[i+1],t[i+2])},e.FromFloatArray=function(t,i){return e.FromArray(t,i)},e.FromArrayToRef=function(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2]},e.FromFloatArrayToRef=function(t,i,n){return e.FromArrayToRef(t,i,n)},e.FromFloatsToRef=function(t,e,i,n){n.x=t,n.y=e,n.z=i},e.Zero=function(){return new e(0,0,0)},e.One=function(){return new e(1,1,1)},e.Up=function(){return new e(0,1,0)},e.Forward=function(){return new e(0,0,1)},e.Right=function(){return new e(1,0,0)},e.Left=function(){return new e(-1,0,0)},e.TransformCoordinates=function(t,i){var n=e.Zero();return e.TransformCoordinatesToRef(t,i,n),n},e.TransformCoordinatesToRef=function(t,e,i){var n=t.x*e.m[0]+t.y*e.m[4]+t.z*e.m[8]+e.m[12],r=t.x*e.m[1]+t.y*e.m[5]+t.z*e.m[9]+e.m[13],o=t.x*e.m[2]+t.y*e.m[6]+t.z*e.m[10]+e.m[14],s=t.x*e.m[3]+t.y*e.m[7]+t.z*e.m[11]+e.m[15];i.x=n/s,i.y=r/s,i.z=o/s},e.TransformCoordinatesFromFloatsToRef=function(t,e,i,n,r){var o=t*n.m[0]+e*n.m[4]+i*n.m[8]+n.m[12],s=t*n.m[1]+e*n.m[5]+i*n.m[9]+n.m[13],a=t*n.m[2]+e*n.m[6]+i*n.m[10]+n.m[14],l=t*n.m[3]+e*n.m[7]+i*n.m[11]+n.m[15];r.x=o/l,r.y=s/l,r.z=a/l},e.TransformNormal=function(t,i){var n=e.Zero();return e.TransformNormalToRef(t,i,n),n},e.TransformNormalToRef=function(t,e,i){var n=t.x*e.m[0]+t.y*e.m[4]+t.z*e.m[8],r=t.x*e.m[1]+t.y*e.m[5]+t.z*e.m[9],o=t.x*e.m[2]+t.y*e.m[6]+t.z*e.m[10];i.x=n,i.y=r,i.z=o},e.TransformNormalFromFloatsToRef=function(t,e,i,n,r){r.x=t*n.m[0]+e*n.m[4]+i*n.m[8],r.y=t*n.m[1]+e*n.m[5]+i*n.m[9],r.z=t*n.m[2]+e*n.m[6]+i*n.m[10]},e.CatmullRom=function(t,i,n,r,o){var s=o*o,a=o*s;return new e(.5*(2*i.x+(-t.x+n.x)*o+(2*t.x-5*i.x+4*n.x-r.x)*s+(-t.x+3*i.x-3*n.x+r.x)*a),.5*(2*i.y+(-t.y+n.y)*o+(2*t.y-5*i.y+4*n.y-r.y)*s+(-t.y+3*i.y-3*n.y+r.y)*a),.5*(2*i.z+(-t.z+n.z)*o+(2*t.z-5*i.z+4*n.z-r.z)*s+(-t.z+3*i.z-3*n.z+r.z)*a))},e.Clamp=function(t,i,n){var r=t.x;r=(r=r>n.x?n.x:r)<i.x?i.x:r;var o=t.y;o=(o=o>n.y?n.y:o)<i.y?i.y:o;var s=t.z;return new e(r,o,s=(s=s>n.z?n.z:s)<i.z?i.z:s)},e.Hermite=function(t,i,n,r,o){var s=o*o,a=o*s,l=2*a-3*s+1,c=-2*a+3*s,u=a-2*s+o,h=a-s;return new e(t.x*l+n.x*c+i.x*u+r.x*h,t.y*l+n.y*c+i.y*u+r.y*h,t.z*l+n.z*c+i.z*u+r.z*h)},e.Lerp=function(t,i,n){var r=new e(0,0,0);return e.LerpToRef(t,i,n,r),r},e.LerpToRef=function(t,e,i,n){n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n.z=t.z+(e.z-t.z)*i},e.Dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},e.Cross=function(t,i){var n=e.Zero();return e.CrossToRef(t,i,n),n},e.CrossToRef=function(t,e,i){w.Vector3[0].x=t.y*e.z-t.z*e.y,w.Vector3[0].y=t.z*e.x-t.x*e.z,w.Vector3[0].z=t.x*e.y-t.y*e.x,i.copyFrom(w.Vector3[0])},e.Normalize=function(t){var i=e.Zero();return e.NormalizeToRef(t,i),i},e.NormalizeToRef=function(t,e){e.copyFrom(t),e.normalize()},e.Project=function(t,i,n,r){var o=r.width,s=r.height,a=r.x,c=r.y,u=e._viewportMatrixCache?e._viewportMatrixCache:e._viewportMatrixCache=new l;l.FromValuesToRef(o/2,0,0,0,0,-s/2,0,0,0,0,.5,0,a+o/2,s/2+c,.5,1,u);var h=w.Matrix[0];return i.multiplyToRef(n,h),h.multiplyToRef(u,h),e.TransformCoordinates(t,h)},e.UnprojectFromTransform=function(i,n,r,o,s){var a=w.Matrix[0];o.multiplyToRef(s,a),a.invert(),i.x=i.x/n*2-1,i.y=-(i.y/r*2-1);var l=e.TransformCoordinates(i,a),c=i.x*a.m[3]+i.y*a.m[7]+i.z*a.m[11]+a.m[15];return t.Scalar.WithinEpsilon(c,1)&&(l=l.scale(1/c)),l},e.Unproject=function(t,i,n,r,o,s){var a=e.Zero();return e.UnprojectToRef(t,i,n,r,o,s,a),a},e.UnprojectToRef=function(t,i,n,r,o,s,a){e.UnprojectFloatsToRef(t.x,t.y,t.z,i,n,r,o,s,a)},e.UnprojectFloatsToRef=function(i,n,r,o,s,a,l,c,u){var h=w.Matrix[0];a.multiplyToRef(l,h),h.multiplyToRef(c,h),h.invert();var p=w.Vector3[0];p.x=i/o*2-1,p.y=-(n/s*2-1),p.z=2*r-1,e.TransformCoordinatesToRef(p,h,u);var d=p.x*h.m[3]+p.y*h.m[7]+p.z*h.m[11]+h.m[15];t.Scalar.WithinEpsilon(d,1)&&u.scaleInPlace(1/d)},e.Minimize=function(t,e){var i=t.clone();return i.minimizeInPlace(e),i},e.Maximize=function(t,e){var i=t.clone();return i.maximizeInPlace(e),i},e.Distance=function(t,i){return Math.sqrt(e.DistanceSquared(t,i))},e.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z;return i*i+n*n+r*r},e.Center=function(t,e){var i=t.add(e);return i.scaleInPlace(.5),i},e.RotationFromAxis=function(t,i,n){var r=e.Zero();return e.RotationFromAxisToRef(t,i,n,r),r},e.RotationFromAxisToRef=function(t,e,i,n){var r=w.Quaternion[0];a.RotationQuaternionFromAxisToRef(t,e,i,r),r.toEulerAnglesToRef(n)},e}();t.Vector3=r;var o=function(){function e(t,e,i,n){this.x=t,this.y=e,this.z=i,this.w=n}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},e.prototype.getClassName=function(){return"Vector4"},e.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},e.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},e.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this},e.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},e.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this},e.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},e.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this},e.prototype.subtractFromFloats=function(t,i,n,r){return new e(this.x-t,this.y-i,this.z-n,this.w-r)},e.prototype.subtractFromFloatsToRef=function(t,e,i,n,r){return r.x=this.x-t,r.y=this.y-e,r.z=this.z-i,r.w=this.w-n,this},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z,-this.w)},e.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t,this.w*t)},e.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},e.prototype.equalsWithEpsilon=function(e,i){return void 0===i&&(i=t.Epsilon),e&&t.Scalar.WithinEpsilon(this.x,e.x,i)&&t.Scalar.WithinEpsilon(this.y,e.y,i)&&t.Scalar.WithinEpsilon(this.z,e.z,i)&&t.Scalar.WithinEpsilon(this.w,e.w,i)},e.prototype.equalsToFloats=function(t,e,i,n){return this.x===t&&this.y===e&&this.z===i&&this.w===n},e.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},e.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this},e.prototype.multiplyByFloats=function(t,i,n,r){return new e(this.x*t,this.y*i,this.z*n,this.w*r)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)},e.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this},e.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},e.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},e.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e.prototype.normalize=function(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},e.prototype.toVector3=function(){return new r(this.x,this.y,this.z)},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},e.prototype.copyFromFloats=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},e.prototype.set=function(t,e,i,n){return this.copyFromFloats(t,e,i,n)},e.FromArray=function(t,i){return i||(i=0),new e(t[i],t[i+1],t[i+2],t[i+3])},e.FromArrayToRef=function(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2],i.w=t[e+3]},e.FromFloatArrayToRef=function(t,i,n){e.FromArrayToRef(t,i,n)},e.FromFloatsToRef=function(t,e,i,n,r){r.x=t,r.y=e,r.z=i,r.w=n},e.Zero=function(){return new e(0,0,0,0)},e.One=function(){return new e(1,1,1,1)},e.Normalize=function(t){var i=e.Zero();return e.NormalizeToRef(t,i),i},e.NormalizeToRef=function(t,e){e.copyFrom(t),e.normalize()},e.Minimize=function(t,e){var i=t.clone();return i.minimizeInPlace(e),i},e.Maximize=function(t,e){var i=t.clone();return i.maximizeInPlace(e),i},e.Distance=function(t,i){return Math.sqrt(e.DistanceSquared(t,i))},e.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z,o=t.w-e.w;return i*i+n*n+r*r+o*o},e.Center=function(t,e){var i=t.add(e);return i.scaleInPlace(.5),i},e.TransformNormal=function(t,i){var n=e.Zero();return e.TransformNormalToRef(t,i,n),n},e.TransformNormalToRef=function(t,e,i){var n=t.x*e.m[0]+t.y*e.m[4]+t.z*e.m[8],r=t.x*e.m[1]+t.y*e.m[5]+t.z*e.m[9],o=t.x*e.m[2]+t.y*e.m[6]+t.z*e.m[10];i.x=n,i.y=r,i.z=o,i.w=t.w},e.TransformNormalFromFloatsToRef=function(t,e,i,n,r,o){o.x=t*r.m[0]+e*r.m[4]+i*r.m[8],o.y=t*r.m[1]+e*r.m[5]+i*r.m[9],o.z=t*r.m[2]+e*r.m[6]+i*r.m[10],o.w=n},e}();t.Vector4=o;var s=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){var t=this.width||0;return 397*t^(this.height||0)},t.prototype.copyFrom=function(t){this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e){return this.width=t,this.height=e,this},t.prototype.set=function(t,e){return this.copyFromFloats(t,e)},t.prototype.multiplyByFloats=function(e,i){return new t(this.width*e,this.height*i)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return!!t&&this.width===t.width&&this.height===t.height},Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),t.Zero=function(){return new t(0,0)},t.prototype.add=function(e){return new t(this.width+e.width,this.height+e.height)},t.prototype.subtract=function(e){return new t(this.width-e.width,this.height-e.height)},t.Lerp=function(e,i,n){return new t(e.width+(i.width-e.width)*n,e.height+(i.height-e.height)*n)},t}();t.Size=s;var a=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.x=t,this.y=e,this.z=i,this.w=n}return t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},t.prototype.copyFromFloats=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},t.prototype.set=function(t,e,i,n){return this.copyFromFloats(t,e,i,n)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e,this.w*e)},t.prototype.multiply=function(e){var i=new t(0,0,0,1);return this.multiplyToRef(e,i),i},t.prototype.multiplyToRef=function(t,e){var i=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,n=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,r=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,o=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(i,n,r,o),this},t.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},t.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.normalize=function(){var t=1/this.length();return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.toEulerAngles=function(t){void 0===t&&(t="YZX");var e=r.Zero();return this.toEulerAnglesToRef(e,t),e},t.prototype.toEulerAnglesToRef=function(t,e){void 0===e&&(e="YZX");var i=this.z,n=this.x,r=this.y,o=this.w,s=o*o,a=i*i,l=n*n,c=r*r,u=r*i-n*o;return u<-.4999999?(t.y=2*Math.atan2(r,o),t.x=Math.PI/2,t.z=0):u>.4999999?(t.y=2*Math.atan2(r,o),t.x=-Math.PI/2,t.z=0):(t.z=Math.atan2(2*(n*r+i*o),-a-l+c+s),t.x=Math.asin(-2*(i*r-n*o)),t.y=Math.atan2(2*(i*n+r*o),a-l-c+s)),this},t.prototype.toRotationMatrix=function(t){var e=this.x*this.x,i=this.y*this.y,n=this.z*this.z,r=this.x*this.y,o=this.z*this.w,s=this.z*this.x,a=this.y*this.w,l=this.y*this.z,c=this.x*this.w;return t.m[0]=1-2*(i+n),t.m[1]=2*(r+o),t.m[2]=2*(s-a),t.m[3]=0,t.m[4]=2*(r-o),t.m[5]=1-2*(n+e),t.m[6]=2*(l+c),t.m[7]=0,t.m[8]=2*(s+a),t.m[9]=2*(l-c),t.m[10]=1-2*(i+e),t.m[11]=0,t.m[12]=0,t.m[13]=0,t.m[14]=0,t.m[15]=1,t._markAsUpdated(),this},t.prototype.fromRotationMatrix=function(e){return t.FromRotationMatrixToRef(e,this),this},t.FromRotationMatrix=function(e){var i=new t;return t.FromRotationMatrixToRef(e,i),i},t.FromRotationMatrixToRef=function(t,e){var i,n=t.m,r=n[0],o=n[4],s=n[8],a=n[1],l=n[5],c=n[9],u=n[2],h=n[6],p=n[10],d=r+l+p;d>0?(i=.5/Math.sqrt(d+1),e.w=.25/i,e.x=(h-c)*i,e.y=(s-u)*i,e.z=(a-o)*i):r>l&&r>p?(i=2*Math.sqrt(1+r-l-p),e.w=(h-c)/i,e.x=.25*i,e.y=(o+a)/i,e.z=(s+u)/i):l>p?(i=2*Math.sqrt(1+l-r-p),e.w=(s-u)/i,e.x=(o+a)/i,e.y=.25*i,e.z=(c+h)/i):(i=2*Math.sqrt(1+p-r-l),e.w=(a-o)/i,e.x=(s+u)/i,e.y=(c+h)/i,e.z=.25*i)},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(e){return new t(-e.x,-e.y,-e.z,e.w)},t.Identity=function(){return new t(0,0,0,1)},t.IsIdentity=function(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w},t.RotationAxis=function(e,i){return t.RotationAxisToRef(e,i,new t)},t.RotationAxisToRef=function(t,e,i){var n=Math.sin(e/2);return t.normalize(),i.w=Math.cos(e/2),i.x=t.x*n,i.y=t.y*n,i.z=t.z*n,i},t.FromArray=function(e,i){return i||(i=0),new t(e[i],e[i+1],e[i+2],e[i+3])},t.RotationYawPitchRoll=function(e,i,n){var r=new t;return t.RotationYawPitchRollToRef(e,i,n,r),r},t.RotationYawPitchRollToRef=function(t,e,i,n){var r=.5*i,o=.5*e,s=.5*t,a=Math.sin(r),l=Math.cos(r),c=Math.sin(o),u=Math.cos(o),h=Math.sin(s),p=Math.cos(s);n.x=p*c*l+h*u*a,n.y=h*u*l-p*c*a,n.z=p*u*a-h*c*l,n.w=p*u*l+h*c*a},t.RotationAlphaBetaGamma=function(e,i,n){var r=new t;return t.RotationAlphaBetaGammaToRef(e,i,n,r),r},t.RotationAlphaBetaGammaToRef=function(t,e,i,n){var r=.5*(i+t),o=.5*(i-t),s=.5*e;n.x=Math.cos(o)*Math.sin(s),n.y=Math.sin(o)*Math.sin(s),n.z=Math.sin(r)*Math.cos(s),n.w=Math.cos(r)*Math.cos(s)},t.RotationQuaternionFromAxis=function(e,i,n,r){var o=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,i,n,o),o},t.RotationQuaternionFromAxisToRef=function(e,i,n,r){var o=w.Matrix[0];l.FromXYZAxesToRef(e.normalize(),i.normalize(),n.normalize(),o),t.FromRotationMatrixToRef(o,r)},t.Slerp=function(e,i,n){var r=t.Identity();return t.SlerpToRef(e,i,n,r),r},t.SlerpToRef=function(t,e,i,n){var r,o,s=i,a=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,l=!1;if(a<0&&(l=!0,a=-a),a>.999999)o=1-s,r=l?-s:s;else{var c=Math.acos(a),u=1/Math.sin(c);o=Math.sin((1-s)*c)*u,r=l?-Math.sin(s*c)*u:Math.sin(s*c)*u}n.x=o*t.x+r*e.x,n.y=o*t.y+r*e.y,n.z=o*t.z+r*e.z,n.w=o*t.w+r*e.w},t.Hermite=function(e,i,n,r,o){var s=o*o,a=o*s,l=2*a-3*s+1,c=-2*a+3*s,u=a-2*s+o,h=a-s;return new t(e.x*l+n.x*c+i.x*u+r.x*h,e.y*l+n.y*c+i.y*u+r.y*h,e.z*l+n.z*c+i.z*u+r.z*h,e.w*l+n.w*c+i.w*u+r.w*h)},t}();t.Quaternion=a;var l=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this.m=new Float32Array(16),this._markAsUpdated()}return t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentityDirty=!0},t.prototype.isIdentity=function(t){return void 0===t&&(t=!1),this._isIdentityDirty&&(this._isIdentityDirty=!1,1!==this.m[0]||1!==this.m[5]||1!==this.m[15]?this._isIdentity=!1:0!==this.m[1]||0!==this.m[2]||0!==this.m[3]||0!==this.m[4]||0!==this.m[6]||0!==this.m[7]||0!==this.m[8]||0!==this.m[9]||0!==this.m[11]||0!==this.m[12]||0!==this.m[13]||0!==this.m[14]?this._isIdentity=!1:this._isIdentity=!0,t||1===this.m[10]||(this._isIdentity=!1)),this._isIdentity},t.prototype.determinant=function(){var t=this.m[10]*this.m[15]-this.m[11]*this.m[14],e=this.m[9]*this.m[15]-this.m[11]*this.m[13],i=this.m[9]*this.m[14]-this.m[10]*this.m[13],n=this.m[8]*this.m[15]-this.m[11]*this.m[12],r=this.m[8]*this.m[14]-this.m[10]*this.m[12],o=this.m[8]*this.m[13]-this.m[9]*this.m[12];return this.m[0]*(this.m[5]*t-this.m[6]*e+this.m[7]*i)-this.m[1]*(this.m[4]*t-this.m[6]*n+this.m[7]*r)+this.m[2]*(this.m[4]*e-this.m[5]*n+this.m[7]*o)-this.m[3]*(this.m[4]*i-this.m[5]*r+this.m[6]*o)},t.prototype.toArray=function(){return this.m},t.prototype.asArray=function(){return this.toArray()},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){for(var t=0;t<16;t++)this.m[t]=0;return this._markAsUpdated(),this},t.prototype.add=function(e){var i=new t;return this.addToRef(e,i),i},t.prototype.addToRef=function(t,e){for(var i=0;i<16;i++)e.m[i]=this.m[i]+t.m[i];return e._markAsUpdated(),this},t.prototype.addToSelf=function(t){for(var e=0;e<16;e++)this.m[e]+=t.m[e];return this._markAsUpdated(),this},t.prototype.invertToRef=function(t){var e=this.m[0],i=this.m[1],n=this.m[2],r=this.m[3],o=this.m[4],s=this.m[5],a=this.m[6],l=this.m[7],c=this.m[8],u=this.m[9],h=this.m[10],p=this.m[11],d=this.m[12],f=this.m[13],m=this.m[14],g=this.m[15],y=h*g-p*m,_=u*g-p*f,v=u*m-h*f,b=c*g-p*d,x=c*m-h*d,A=c*f-u*d,w=s*y-a*_+l*v,P=-(o*y-a*b+l*x),E=o*_-s*b+l*A,T=-(o*v-s*x+a*A),S=1/(e*w+i*P+n*E+r*T),C=a*g-l*m,O=s*g-l*f,M=s*m-a*f,R=o*g-l*d,I=o*m-a*d,D=o*f-s*d,L=a*p-l*h,k=s*p-l*u,F=s*h-a*u,N=o*p-l*c,B=o*h-a*c,V=o*u-s*c;return t.m[0]=w*S,t.m[4]=P*S,t.m[8]=E*S,t.m[12]=T*S,t.m[1]=-(i*y-n*_+r*v)*S,t.m[5]=(e*y-n*b+r*x)*S,t.m[9]=-(e*_-i*b+r*A)*S,t.m[13]=(e*v-i*x+n*A)*S,t.m[2]=(i*C-n*O+r*M)*S,t.m[6]=-(e*C-n*R+r*I)*S,t.m[10]=(e*O-i*R+r*D)*S,t.m[14]=-(e*M-i*I+n*D)*S,t.m[3]=-(i*L-n*k+r*F)*S,t.m[7]=(e*L-n*N+r*B)*S,t.m[11]=-(e*k-i*N+r*V)*S,t.m[15]=(e*F-i*B+n*V)*S,t._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(t,e,i){return this.m[12]=t,this.m[13]=e,this.m[14]=i,this._markAsUpdated(),this},t.prototype.setTranslation=function(t){return this.m[12]=t.x,this.m[13]=t.y,this.m[14]=t.z,this._markAsUpdated(),this},t.prototype.getTranslation=function(){return new r(this.m[12],this.m[13],this.m[14])},t.prototype.getTranslationToRef=function(t){return t.x=this.m[12],t.y=this.m[13],t.z=this.m[14],this},t.prototype.removeRotationAndScaling=function(){return this.setRowFromFloats(0,1,0,0,0),this.setRowFromFloats(1,0,1,0,0),this.setRowFromFloats(2,0,0,1,0),this},t.prototype.multiply=function(e){var i=new t;return this.multiplyToRef(e,i),i},t.prototype.copyFrom=function(t){for(var e=0;e<16;e++)this.m[e]=t.m[e];return this._markAsUpdated(),this},t.prototype.copyToArray=function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)t[e+i]=this.m[i];return this},t.prototype.multiplyToRef=function(t,e){return this.multiplyToArray(t,e.m,0),e._markAsUpdated(),this},t.prototype.multiplyToArray=function(t,e,i){var n=this.m[0],r=this.m[1],o=this.m[2],s=this.m[3],a=this.m[4],l=this.m[5],c=this.m[6],u=this.m[7],h=this.m[8],p=this.m[9],d=this.m[10],f=this.m[11],m=this.m[12],g=this.m[13],y=this.m[14],_=this.m[15],v=t.m[0],b=t.m[1],x=t.m[2],A=t.m[3],w=t.m[4],P=t.m[5],E=t.m[6],T=t.m[7],S=t.m[8],C=t.m[9],O=t.m[10],M=t.m[11],R=t.m[12],I=t.m[13],D=t.m[14],L=t.m[15];return e[i]=n*v+r*w+o*S+s*R,e[i+1]=n*b+r*P+o*C+s*I,e[i+2]=n*x+r*E+o*O+s*D,e[i+3]=n*A+r*T+o*M+s*L,e[i+4]=a*v+l*w+c*S+u*R,e[i+5]=a*b+l*P+c*C+u*I,e[i+6]=a*x+l*E+c*O+u*D,e[i+7]=a*A+l*T+c*M+u*L,e[i+8]=h*v+p*w+d*S+f*R,e[i+9]=h*b+p*P+d*C+f*I,e[i+10]=h*x+p*E+d*O+f*D,e[i+11]=h*A+p*T+d*M+f*L,e[i+12]=m*v+g*w+y*S+_*R,e[i+13]=m*b+g*P+y*C+_*I,e[i+14]=m*x+g*E+y*O+_*D,e[i+15]=m*A+g*T+y*M+_*L,this},t.prototype.equals=function(t){return t&&this.m[0]===t.m[0]&&this.m[1]===t.m[1]&&this.m[2]===t.m[2]&&this.m[3]===t.m[3]&&this.m[4]===t.m[4]&&this.m[5]===t.m[5]&&this.m[6]===t.m[6]&&this.m[7]===t.m[7]&&this.m[8]===t.m[8]&&this.m[9]===t.m[9]&&this.m[10]===t.m[10]&&this.m[11]===t.m[11]&&this.m[12]===t.m[12]&&this.m[13]===t.m[13]&&this.m[14]===t.m[14]&&this.m[15]===t.m[15]},t.prototype.clone=function(){return t.FromValues(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5],this.m[6],this.m[7],this.m[8],this.m[9],this.m[10],this.m[11],this.m[12],this.m[13],this.m[14],this.m[15])},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var t=this.m[0]||0,e=1;e<16;e++)t=397*t^(this.m[e]||0);return t},t.prototype.decompose=function(e,i,n){return n.x=this.m[12],n.y=this.m[13],n.z=this.m[14],e.x=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]+this.m[2]*this.m[2]),e.y=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]+this.m[6]*this.m[6]),e.z=Math.sqrt(this.m[8]*this.m[8]+this.m[9]*this.m[9]+this.m[10]*this.m[10]),this.determinant()<=0&&(e.y*=-1),0===e.x||0===e.y||0===e.z?(i.x=0,i.y=0,i.z=0,i.w=1,!1):(t.FromValuesToRef(this.m[0]/e.x,this.m[1]/e.x,this.m[2]/e.x,0,this.m[4]/e.y,this.m[5]/e.y,this.m[6]/e.y,0,this.m[8]/e.z,this.m[9]/e.z,this.m[10]/e.z,0,0,0,0,1,w.Matrix[0]),a.FromRotationMatrixToRef(w.Matrix[0],i),!0)},t.prototype.getRotationMatrix=function(){var e=t.Identity();return this.getRotationMatrixToRef(e),e},t.prototype.getRotationMatrixToRef=function(e){var i=this.m,n=i[0]*i[1]*i[2]*i[3]<0?-1:1,r=i[4]*i[5]*i[6]*i[7]<0?-1:1,o=i[8]*i[9]*i[10]*i[11]<0?-1:1,s=n*Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),a=r*Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),l=o*Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]);return t.FromValuesToRef(i[0]/s,i[1]/s,i[2]/s,0,i[4]/a,i[5]/a,i[6]/a,0,i[8]/l,i[9]/l,i[10]/l,0,0,0,0,1,e),this},t.FromArray=function(e,i){var n=new t;return i||(i=0),t.FromArrayToRef(e,i,n),n},t.FromArrayToRef=function(t,e,i){for(var n=0;n<16;n++)i.m[n]=t[n+e];i._markAsUpdated()},t.FromFloat32ArrayToRefScaled=function(t,e,i,n){for(var r=0;r<16;r++)n.m[r]=t[r+e]*i;n._markAsUpdated()},t.FromValuesToRef=function(t,e,i,n,r,o,s,a,l,c,u,h,p,d,f,m,g){g.m[0]=t,g.m[1]=e,g.m[2]=i,g.m[3]=n,g.m[4]=r,g.m[5]=o,g.m[6]=s,g.m[7]=a,g.m[8]=l,g.m[9]=c,g.m[10]=u,g.m[11]=h,g.m[12]=p,g.m[13]=d,g.m[14]=f,g.m[15]=m,g._markAsUpdated()},t.prototype.getRow=function(t){if(t<0||t>3)return null;var e=4*t;return new o(this.m[e+0],this.m[e+1],this.m[e+2],this.m[e+3])},t.prototype.setRow=function(t,e){if(t<0||t>3)return this;var i=4*t;return this.m[i+0]=e.x,this.m[i+1]=e.y,this.m[i+2]=e.z,this.m[i+3]=e.w,this._markAsUpdated(),this},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(e){return t.TransposeToRef(this,e),this},t.prototype.setRowFromFloats=function(t,e,i,n,r){if(t<0||t>3)return this;var o=4*t;return this.m[o+0]=e,this.m[o+1]=i,this.m[o+2]=n,this.m[o+3]=r,this._markAsUpdated(),this},Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!0,configurable:!0}),t.FromValues=function(e,i,n,r,o,s,a,l,c,u,h,p,d,f,m,g){var y=new t;return y.m[0]=e,y.m[1]=i,y.m[2]=n,y.m[3]=r,y.m[4]=o,y.m[5]=s,y.m[6]=a,y.m[7]=l,y.m[8]=c,y.m[9]=u,y.m[10]=h,y.m[11]=p,y.m[12]=d,y.m[13]=f,y.m[14]=m,y.m[15]=g,y},t.Compose=function(e,i,n){var r=t.Identity();return t.ComposeToRef(e,i,n,r),r},t.ComposeToRef=function(e,i,n,r){t.FromValuesToRef(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1,w.Matrix[1]),i.toRotationMatrix(w.Matrix[0]),w.Matrix[1].multiplyToRef(w.Matrix[0],r),r.setTranslation(n)},t.Identity=function(){return t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},t.IdentityToRef=function(e){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e)},t.Zero=function(){return t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},t.RotationX=function(e){var i=new t;return t.RotationXToRef(e,i),i},t.Invert=function(e){var i=new t;return e.invertToRef(i),i},t.RotationXToRef=function(t,e){var i=Math.sin(t),n=Math.cos(t);e.m[0]=1,e.m[15]=1,e.m[5]=n,e.m[10]=n,e.m[9]=-i,e.m[6]=i,e.m[1]=0,e.m[2]=0,e.m[3]=0,e.m[4]=0,e.m[7]=0,e.m[8]=0,e.m[11]=0,e.m[12]=0,e.m[13]=0,e.m[14]=0,e._markAsUpdated()},t.RotationY=function(e){var i=new t;return t.RotationYToRef(e,i),i},t.RotationYToRef=function(t,e){var i=Math.sin(t),n=Math.cos(t);e.m[5]=1,e.m[15]=1,e.m[0]=n,e.m[2]=-i,e.m[8]=i,e.m[10]=n,e.m[1]=0,e.m[3]=0,e.m[4]=0,e.m[6]=0,e.m[7]=0,e.m[9]=0,e.m[11]=0,e.m[12]=0,e.m[13]=0,e.m[14]=0,e._markAsUpdated()},t.RotationZ=function(e){var i=new t;return t.RotationZToRef(e,i),i},t.RotationZToRef=function(t,e){var i=Math.sin(t),n=Math.cos(t);e.m[10]=1,e.m[15]=1,e.m[0]=n,e.m[1]=i,e.m[4]=-i,e.m[5]=n,e.m[2]=0,e.m[3]=0,e.m[6]=0,e.m[7]=0,e.m[8]=0,e.m[9]=0,e.m[11]=0,e.m[12]=0,e.m[13]=0,e.m[14]=0,e._markAsUpdated()},t.RotationAxis=function(e,i){var n=t.Zero();return t.RotationAxisToRef(e,i,n),n},t.RotationAxisToRef=function(t,e,i){var n=Math.sin(-e),r=Math.cos(-e),o=1-r;t.normalize(),i.m[0]=t.x*t.x*o+r,i.m[1]=t.x*t.y*o-t.z*n,i.m[2]=t.x*t.z*o+t.y*n,i.m[3]=0,i.m[4]=t.y*t.x*o+t.z*n,i.m[5]=t.y*t.y*o+r,i.m[6]=t.y*t.z*o-t.x*n,i.m[7]=0,i.m[8]=t.z*t.x*o-t.y*n,i.m[9]=t.z*t.y*o+t.x*n,i.m[10]=t.z*t.z*o+r,i.m[11]=0,i.m[15]=1,i._markAsUpdated()},t.RotationYawPitchRoll=function(e,i,n){var r=new t;return t.RotationYawPitchRollToRef(e,i,n,r),r},t.RotationYawPitchRollToRef=function(t,e,i,n){a.RotationYawPitchRollToRef(t,e,i,this._tempQuaternion),this._tempQuaternion.toRotationMatrix(n)},t.Scaling=function(e,i,n){var r=t.Zero();return t.ScalingToRef(e,i,n,r),r},t.ScalingToRef=function(t,e,i,n){n.m[0]=t,n.m[1]=0,n.m[2]=0,n.m[3]=0,n.m[4]=0,n.m[5]=e,n.m[6]=0,n.m[7]=0,n.m[8]=0,n.m[9]=0,n.m[10]=i,n.m[11]=0,n.m[12]=0,n.m[13]=0,n.m[14]=0,n.m[15]=1,n._markAsUpdated()},t.Translation=function(e,i,n){var r=t.Identity();return t.TranslationToRef(e,i,n,r),r},t.TranslationToRef=function(e,i,n,r){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,i,n,1,r)},t.Lerp=function(e,i,n){for(var r=t.Zero(),o=0;o<16;o++)r.m[o]=e.m[o]*(1-n)+i.m[o]*n;return r._markAsUpdated(),r},t.DecomposeLerp=function(e,i,n){var o=new r(0,0,0),s=new a,l=new r(0,0,0);e.decompose(o,s,l);var c=new r(0,0,0),u=new a,h=new r(0,0,0);i.decompose(c,u,h);var p=r.Lerp(o,c,n),d=a.Slerp(s,u,n),f=r.Lerp(l,h,n);return t.Compose(p,d,f)},t.LookAtLH=function(e,i,n){var r=t.Zero();return t.LookAtLHToRef(e,i,n,r),r},t.LookAtLHToRef=function(e,i,n,o){i.subtractToRef(e,this._zAxis),this._zAxis.normalize(),r.CrossToRef(n,this._zAxis,this._xAxis),0===this._xAxis.lengthSquared()?this._xAxis.x=1:this._xAxis.normalize(),r.CrossToRef(this._zAxis,this._xAxis,this._yAxis),this._yAxis.normalize();var s=-r.Dot(this._xAxis,e),a=-r.Dot(this._yAxis,e),l=-r.Dot(this._zAxis,e);return t.FromValuesToRef(this._xAxis.x,this._yAxis.x,this._zAxis.x,0,this._xAxis.y,this._yAxis.y,this._zAxis.y,0,this._xAxis.z,this._yAxis.z,this._zAxis.z,0,s,a,l,1,o)},t.LookAtRH=function(e,i,n){var r=t.Zero();return t.LookAtRHToRef(e,i,n,r),r},t.LookAtRHToRef=function(e,i,n,o){e.subtractToRef(i,this._zAxis),this._zAxis.normalize(),r.CrossToRef(n,this._zAxis,this._xAxis),0===this._xAxis.lengthSquared()?this._xAxis.x=1:this._xAxis.normalize(),r.CrossToRef(this._zAxis,this._xAxis,this._yAxis),this._yAxis.normalize();var s=-r.Dot(this._xAxis,e),a=-r.Dot(this._yAxis,e),l=-r.Dot(this._zAxis,e);return t.FromValuesToRef(this._xAxis.x,this._yAxis.x,this._zAxis.x,0,this._xAxis.y,this._yAxis.y,this._zAxis.y,0,this._xAxis.z,this._yAxis.z,this._zAxis.z,0,s,a,l,1,o)},t.OrthoLH=function(e,i,n,r){var o=t.Zero();return t.OrthoLHToRef(e,i,n,r,o),o},t.OrthoLHToRef=function(e,i,n,r,o){var s=2/e,a=2/i,l=2/(r-n),c=-(r+n)/(r-n);t.FromValuesToRef(s,0,0,0,0,a,0,0,0,0,l,0,0,0,c,1,o)},t.OrthoOffCenterLH=function(e,i,n,r,o,s){var a=t.Zero();return t.OrthoOffCenterLHToRef(e,i,n,r,o,s,a),a},t.OrthoOffCenterLHToRef=function(e,i,n,r,o,s,a){var l=2/(i-e),c=2/(r-n),u=2/(s-o),h=-(s+o)/(s-o),p=(e+i)/(e-i),d=(r+n)/(n-r);t.FromValuesToRef(l,0,0,0,0,c,0,0,0,0,u,0,p,d,h,1,a)},t.OrthoOffCenterRH=function(e,i,n,r,o,s){var a=t.Zero();return t.OrthoOffCenterRHToRef(e,i,n,r,o,s,a),a},t.OrthoOffCenterRHToRef=function(e,i,n,r,o,s,a){t.OrthoOffCenterLHToRef(e,i,n,r,o,s,a),a.m[10]*=-1},t.PerspectiveLH=function(e,i,n,r){var o=t.Zero(),s=2*n/e,a=2*n/i,l=(r+n)/(r-n),c=-2*r*n/(r-n);return t.FromValuesToRef(s,0,0,0,0,a,0,0,0,0,l,1,0,0,c,0,o),o},t.PerspectiveFovLH=function(e,i,n,r){var o=t.Zero();return t.PerspectiveFovLHToRef(e,i,n,r,o),o},t.PerspectiveFovLHToRef=function(e,i,n,r,o,s){void 0===s&&(s=!0);var a=n,l=r,c=1/Math.tan(.5*e),u=s?c/i:c,h=s?c:c*i,p=(l+a)/(l-a),d=-2*l*a/(l-a);t.FromValuesToRef(u,0,0,0,0,h,0,0,0,0,p,1,0,0,d,0,o)},t.PerspectiveFovRH=function(e,i,n,r){var o=t.Zero();return t.PerspectiveFovRHToRef(e,i,n,r,o),o},t.PerspectiveFovRHToRef=function(e,i,n,r,o,s){void 0===s&&(s=!0);var a=n,l=r,c=1/Math.tan(.5*e),u=s?c/i:c,h=s?c:c*i,p=-(l+a)/(l-a),d=-2*l*a/(l-a);t.FromValuesToRef(u,0,0,0,0,h,0,0,0,0,p,-1,0,0,d,0,o)},t.PerspectiveFovWebVRToRef=function(t,e,i,n,r){void 0===r&&(r=!1);var o=r?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),c=Math.tan(t.rightDegrees*Math.PI/180),u=2/(l+c),h=2/(s+a);n.m[0]=u,n.m[1]=n.m[2]=n.m[3]=n.m[4]=0,n.m[5]=h,n.m[6]=n.m[7]=0,n.m[8]=(l-c)*u*.5,n.m[9]=-(s-a)*h*.5,n.m[10]=-i/(e-i),n.m[11]=1*o,n.m[12]=n.m[13]=n.m[15]=0,n.m[14]=-2*i*e/(i-e),n._markAsUpdated()},t.GetFinalMatrix=function(e,i,n,r,o,s){var a=e.width,l=e.height,c=e.x,u=e.y,h=t.FromValues(a/2,0,0,0,0,-l/2,0,0,0,0,s-o,0,c+a/2,l/2+u,o,1);return i.multiply(n).multiply(r).multiply(h)},t.GetAsMatrix2x2=function(t){return new Float32Array([t.m[0],t.m[1],t.m[4],t.m[5]])},t.GetAsMatrix3x3=function(t){return new Float32Array([t.m[0],t.m[1],t.m[2],t.m[4],t.m[5],t.m[6],t.m[8],t.m[9],t.m[10]])},t.Transpose=function(e){var i=new t;return t.TransposeToRef(e,i),i},t.TransposeToRef=function(t,e){e.m[0]=t.m[0],e.m[1]=t.m[4],e.m[2]=t.m[8],e.m[3]=t.m[12],e.m[4]=t.m[1],e.m[5]=t.m[5],e.m[6]=t.m[9],e.m[7]=t.m[13],e.m[8]=t.m[2],e.m[9]=t.m[6],e.m[10]=t.m[10],e.m[11]=t.m[14],e.m[12]=t.m[3],e.m[13]=t.m[7],e.m[14]=t.m[11],e.m[15]=t.m[15]},t.Reflection=function(e){var i=new t;return t.ReflectionToRef(e,i),i},t.ReflectionToRef=function(t,e){t.normalize();var i=t.normal.x,n=t.normal.y,r=t.normal.z,o=-2*i,s=-2*n,a=-2*r;e.m[0]=o*i+1,e.m[1]=s*i,e.m[2]=a*i,e.m[3]=0,e.m[4]=o*n,e.m[5]=s*n+1,e.m[6]=a*n,e.m[7]=0,e.m[8]=o*r,e.m[9]=s*r,e.m[10]=a*r+1,e.m[11]=0,e.m[12]=o*t.d,e.m[13]=s*t.d,e.m[14]=a*t.d,e.m[15]=1,e._markAsUpdated()},t.FromXYZAxesToRef=function(t,e,i,n){n.m[0]=t.x,n.m[1]=t.y,n.m[2]=t.z,n.m[3]=0,n.m[4]=e.x,n.m[5]=e.y,n.m[6]=e.z,n.m[7]=0,n.m[8]=i.x,n.m[9]=i.y,n.m[10]=i.z,n.m[11]=0,n.m[12]=0,n.m[13]=0,n.m[14]=0,n.m[15]=1,n._markAsUpdated()},t.FromQuaternionToRef=function(t,e){var i=t.x*t.x,n=t.y*t.y,r=t.z*t.z,o=t.x*t.y,s=t.z*t.w,a=t.z*t.x,l=t.y*t.w,c=t.y*t.z,u=t.x*t.w;e.m[0]=1-2*(n+r),e.m[1]=2*(o+s),e.m[2]=2*(a-l),e.m[3]=0,e.m[4]=2*(o-s),e.m[5]=1-2*(r+i),e.m[6]=2*(c+u),e.m[7]=0,e.m[8]=2*(a+l),e.m[9]=2*(c-u),e.m[10]=1-2*(n+i),e.m[11]=0,e.m[12]=0,e.m[13]=0,e.m[14]=0,e.m[15]=1,e._markAsUpdated()},t._tempQuaternion=new a,t._xAxis=r.Zero(),t._yAxis=r.Zero(),t._zAxis=r.Zero(),t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}();t.Matrix=l;var c=function(){function t(t,e,i,n){this.normal=new r(t,e,i),this.d=n}return t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){var t=this.normal.getHashCode();return 397*t^(this.d||0)},t.prototype.normalize=function(){var t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),e=0;return 0!==t&&(e=1/t),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this},t.prototype.transform=function(e){var i=l.Transpose(e),n=this.normal.x,r=this.normal.y,o=this.normal.z,s=this.d;return new t(n*i.m[0]+r*i.m[1]+o*i.m[2]+s*i.m[3],n*i.m[4]+r*i.m[5]+o*i.m[6]+s*i.m[7],n*i.m[8]+r*i.m[9]+o*i.m[10]+s*i.m[11],n*i.m[12]+r*i.m[13]+o*i.m[14]+s*i.m[15])},t.prototype.dotCoordinate=function(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d},t.prototype.copyFromPoints=function(t,e,i){var n,r=e.x-t.x,o=e.y-t.y,s=e.z-t.z,a=i.x-t.x,l=i.y-t.y,c=i.z-t.z,u=o*c-s*l,h=s*a-r*c,p=r*l-o*a,d=Math.sqrt(u*u+h*h+p*p);return n=0!==d?1/d:0,this.normal.x=u*n,this.normal.y=h*n,this.normal.z=p*n,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this},t.prototype.isFrontFacingTo=function(t,e){return r.Dot(this.normal,t)<=e},t.prototype.signedDistanceTo=function(t){return r.Dot(t,this.normal)+this.d},t.FromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.FromPoints=function(e,i,n){var r=new t(0,0,0,0);return r.copyFromPoints(e,i,n),r},t.FromPositionAndNormal=function(e,i){var n=new t(0,0,0,0);return i.normalize(),n.normal=i,n.d=-(i.x*e.x+i.y*e.y+i.z*e.z),n},t.SignedDistanceToPlaneFromPositionAndNormal=function(t,e,i){var n=-(e.x*t.x+e.y*t.y+e.z*t.z);return r.Dot(i,e)+n},t}();t.Plane=c;var u=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.toGlobal=function(e,i){if(e.getRenderWidth){var n=e;return this.toGlobal(n.getRenderWidth(),n.getRenderHeight())}var r=e;return new t(this.x*r,this.y*i,this.width*r,this.height*i)},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();t.Viewport=u;var h=function(){function t(){}return t.GetPlanes=function(e){for(var i=[],n=0;n<6;n++)i.push(new c(0,0,0,0));return t.GetPlanesToRef(e,i),i},t.GetNearPlaneToRef=function(t,e){e.normal.x=t.m[3]+t.m[2],e.normal.y=t.m[7]+t.m[6],e.normal.z=t.m[11]+t.m[10],e.d=t.m[15]+t.m[14],e.normalize()},t.GetFarPlaneToRef=function(t,e){e.normal.x=t.m[3]-t.m[2],e.normal.y=t.m[7]-t.m[6],e.normal.z=t.m[11]-t.m[10],e.d=t.m[15]-t.m[14],e.normalize()},t.GetLeftPlaneToRef=function(t,e){e.normal.x=t.m[3]+t.m[0],e.normal.y=t.m[7]+t.m[4],e.normal.z=t.m[11]+t.m[8],e.d=t.m[15]+t.m[12],e.normalize()},t.GetRightPlaneToRef=function(t,e){e.normal.x=t.m[3]-t.m[0],e.normal.y=t.m[7]-t.m[4],e.normal.z=t.m[11]-t.m[8],e.d=t.m[15]-t.m[12],e.normalize()},t.GetTopPlaneToRef=function(t,e){e.normal.x=t.m[3]-t.m[1],e.normal.y=t.m[7]-t.m[5],e.normal.z=t.m[11]-t.m[9],e.d=t.m[15]-t.m[13],e.normalize()},t.GetBottomPlaneToRef=function(t,e){e.normal.x=t.m[3]+t.m[1],e.normal.y=t.m[7]+t.m[5],e.normal.z=t.m[11]+t.m[9],e.d=t.m[15]+t.m[13],e.normalize()},t.GetPlanesToRef=function(e,i){t.GetNearPlaneToRef(e,i[0]),t.GetFarPlaneToRef(e,i[1]),t.GetLeftPlaneToRef(e,i[2]),t.GetRightPlaneToRef(e,i[3]),t.GetTopPlaneToRef(e,i[4]),t.GetBottomPlaneToRef(e,i[5])},t}();t.Frustum=h,function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(t.Space||(t.Space={}));var p=function(){function t(){}return t.X=new r(1,0,0),t.Y=new r(0,1,0),t.Z=new r(0,0,1),t}();t.Axis=p;var d,f=function(){function t(){}return t.interpolate=function(t,e,i,n,r){for(var o=1-3*n+3*e,s=3*n-6*e,a=3*e,l=t,c=0;c<5;c++){var u=l*l;l-=1/(3*o*u+2*s*l+a)*(o*(u*l)+s*u+a*l-t),l=Math.min(1,Math.max(0,l))}return 3*Math.pow(1-l,2)*l*i+3*(1-l)*Math.pow(l,2)*r+Math.pow(l,3)},t}();t.BezierCurve=f,function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(d=t.Orientation||(t.Orientation={}));var m=function(){function t(t){var e=this;this.degrees=function(){return 180*e._radians/Math.PI},this.radians=function(){return e._radians},this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(e,i){var n=i.subtract(e);return new t(Math.atan2(n.y,n.x))},t.FromRadians=function(e){return new t(e)},t.FromDegrees=function(e){return new t(e*Math.PI/180)},t}();t.Angle=m;var g=function(){return function(t,e,i){this.startPoint=t,this.midPoint=e,this.endPoint=i;var r=Math.pow(e.x,2)+Math.pow(e.y,2),o=(Math.pow(t.x,2)+Math.pow(t.y,2)-r)/2,s=(r-Math.pow(i.x,2)-Math.pow(i.y,2))/2,a=(t.x-e.x)*(e.y-i.y)-(e.x-i.x)*(t.y-e.y);this.centerPoint=new n((o*(e.y-i.y)-s*(t.y-e.y))/a,((t.x-e.x)*s-(e.x-i.x)*o)/a),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=m.BetweenTwoPoints(this.centerPoint,this.startPoint);var l=this.startAngle.degrees(),c=m.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),u=m.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();c-l>180&&(c-=360),c-l<-180&&(c+=360),u-c>180&&(u-=360),u-c<-180&&(u+=360),this.orientation=c-l<0?d.CW:d.CCW,this.angle=m.FromDegrees(this.orientation===d.CW?l-u:u-l)}}();t.Arc2=g;var y=function(){function t(t,e){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new n(t,e))}return t.prototype.addLineTo=function(t,e){if(this.closed)return this;var i=new n(t,e),r=this._points[this._points.length-1];return this._points.push(i),this._length+=i.subtract(r).length(),this},t.prototype.addArcTo=function(t,e,i,r,o){if(void 0===o&&(o=36),this.closed)return this;var s=this._points[this._points.length-1],a=new n(t,e),l=new n(i,r),c=new g(s,a,l),u=c.angle.radians()/o;c.orientation===d.CW&&(u*=-1);for(var h=c.startAngle.radians()+u,p=0;p<o;p++){var f=Math.cos(h)*c.radius+c.centerPoint.x,m=Math.sin(h)*c.radius+c.centerPoint.y;this.addLineTo(f,m),h+=u}return this},t.prototype.close=function(){return this.closed=!0,this},t.prototype.length=function(){var t=this._length;if(!this.closed){var e=this._points[this._points.length-1];t+=this._points[0].subtract(e).length()}return t},t.prototype.getPoints=function(){return this._points},t.prototype.getPointAtLengthPosition=function(t){if(t<0||t>1)return n.Zero();for(var e=t*this.length(),i=0,r=0;r<this._points.length;r++){var o=(r+1)%this._points.length,s=this._points[r],a=this._points[o].subtract(s),l=a.length()+i;if(e>=i&&e<=l){var c=a.normalize(),u=e-i;return new n(s.x+c.x*u,s.y+c.y*u)}i=l}return n.Zero()},t.StartingAt=function(e,i){return new t(e,i)},t}();t.Path2=y;var _=function(){function e(t,e,i){void 0===e&&(e=null),this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var n=0;n<t.length;n++)this._curve[n]=t[n].clone();this._raw=i||!1,this._compute(e)}return e.prototype.getCurve=function(){return this._curve},e.prototype.getTangents=function(){return this._tangents},e.prototype.getNormals=function(){return this._normals},e.prototype.getBinormals=function(){return this._binormals},e.prototype.getDistances=function(){return this._distances},e.prototype.update=function(t,e){void 0===e&&(e=null);for(var i=0;i<t.length;i++)this._curve[i].x=t[i].x,this._curve[i].y=t[i].y,this._curve[i].z=t[i].z;return this._compute(e),this},e.prototype._compute=function(t){var e=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[e-1]=this._curve[e-1].subtract(this._curve[e-2]),this._raw||this._tangents[e-1].normalize();var i=this._tangents[0],n=this._normalVector(this._curve[0],i,t);this._normals[0]=n,this._raw||this._normals[0].normalize(),this._binormals[0]=r.Cross(i,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var o,s,a,l,c=1;c<e;c++)o=this._getLastNonNullVector(c),c<e-1&&(s=this._getFirstNonNullVector(c),this._tangents[c]=o.add(s),this._tangents[c].normalize()),this._distances[c]=this._distances[c-1]+o.length(),a=this._tangents[c],l=this._binormals[c-1],this._normals[c]=r.Cross(l,a),this._raw||this._normals[c].normalize(),this._binormals[c]=r.Cross(a,this._normals[c]),this._raw||this._binormals[c].normalize()},e.prototype._getFirstNonNullVector=function(t){for(var e=1,i=this._curve[t+e].subtract(this._curve[t]);0===i.length()&&t+e+1<this._curve.length;)e++,i=this._curve[t+e].subtract(this._curve[t]);return i},e.prototype._getLastNonNullVector=function(t){for(var e=1,i=this._curve[t].subtract(this._curve[t-e]);0===i.length()&&t>e+1;)e++,i=this._curve[t].subtract(this._curve[t-e]);return i},e.prototype._normalVector=function(e,i,n){var o,s,a=i.length();(0===a&&(a=1),null==n)?(s=t.Scalar.WithinEpsilon(Math.abs(i.y)/a,1,t.Epsilon)?t.Scalar.WithinEpsilon(Math.abs(i.x)/a,1,t.Epsilon)?t.Scalar.WithinEpsilon(Math.abs(i.z)/a,1,t.Epsilon)?r.Zero():new r(0,0,1):new r(1,0,0):new r(0,-1,0),o=r.Cross(i,s)):(o=r.Cross(i,n),r.CrossToRef(o,i,o));return o.normalize(),o},e}();t.Path3D=_;var v=function(){function t(t){this._length=0,this._points=t,this._length=this._computeLength(t)}return t.CreateQuadraticBezier=function(e,i,n,o){o=o>2?o:3;for(var s=new Array,a=function(t,e,i,n){return(1-t)*(1-t)*e+2*t*(1-t)*i+t*t*n},l=0;l<=o;l++)s.push(new r(a(l/o,e.x,i.x,n.x),a(l/o,e.y,i.y,n.y),a(l/o,e.z,i.z,n.z)));return new t(s)},t.CreateCubicBezier=function(e,i,n,o,s){s=s>3?s:4;for(var a=new Array,l=function(t,e,i,n,r){return(1-t)*(1-t)*(1-t)*e+3*t*(1-t)*(1-t)*i+3*t*t*(1-t)*n+t*t*t*r},c=0;c<=s;c++)a.push(new r(l(c/s,e.x,i.x,n.x,o.x),l(c/s,e.y,i.y,n.y,o.y),l(c/s,e.z,i.z,n.z,o.z)));return new t(a)},t.CreateHermiteSpline=function(e,i,n,o,s){for(var a=new Array,l=1/s,c=0;c<=s;c++)a.push(r.Hermite(e,i,n,o,c*l));return new t(a)},t.CreateCatmullRomSpline=function(e,i){var n=new Array;n.push(e[0].clone()),Array.prototype.push.apply(n,e),n.push(e[e.length-1].clone());for(var o=new Array,s=1/i,a=0,l=0;l<n.length-3;l++){a=0;for(var c=0;c<i;c++)o.push(r.CatmullRom(n[l],n[l+1],n[l+2],n[l+3],a)),a+=s}return l--,o.push(r.CatmullRom(n[l],n[l+1],n[l+2],n[l+3],a)),new t(o)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(e){for(var i=this._points[this._points.length-1],n=this._points.slice(),r=e.getPoints(),o=1;o<r.length;o++)n.push(r[o].subtract(r[0]).add(i));return new t(n)},t.prototype._computeLength=function(t){for(var e=0,i=1;i<t.length;i++)e+=t[i].subtract(t[i-1]).length();return e},t}();t.Curve3=v;var b=function(){function t(t,e){void 0===t&&(t=r.Zero()),void 0===e&&(e=r.Up()),this.position=t,this.normal=e}return t.prototype.clone=function(){return new t(this.position.clone(),this.normal.clone())},t}();t.PositionNormalVertex=b;var x=function(){function t(t,e,i){void 0===t&&(t=r.Zero()),void 0===e&&(e=r.Up()),void 0===i&&(i=n.Zero()),this.position=t,this.normal=e,this.uv=i}return t.prototype.clone=function(){return new t(this.position.clone(),this.normal.clone(),this.uv.clone())},t}();t.PositionNormalTextureVertex=x;var A=function(){function t(){}return t.Color3=[e.Black(),e.Black(),e.Black()],t.Vector2=[n.Zero(),n.Zero(),n.Zero()],t.Vector3=[r.Zero(),r.Zero(),r.Zero(),r.Zero(),r.Zero(),r.Zero(),r.Zero(),r.Zero(),r.Zero()],t.Vector4=[o.Zero(),o.Zero(),o.Zero()],t.Quaternion=[a.Zero(),a.Zero()],t.Matrix=[l.Zero(),l.Zero(),l.Zero(),l.Zero(),l.Zero(),l.Zero(),l.Zero(),l.Zero()],t}();t.Tmp=A;var w=function(){function t(){}return t.Vector3=[r.Zero()],t.Matrix=[l.Zero(),l.Zero()],t.Quaternion=[a.Zero()],t}()}(l||(l={})),function(t){var e=function(){function t(){}return t.WithinEpsilon=function(t,e,i){void 0===i&&(i=1.401298e-45);var n=t-e;return-i<=n&&n<=i},t.ToHex=function(t){var e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()},t.Sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},t.Clamp=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.min(i,Math.max(e,t))},t.Log2=function(t){return Math.log(t)*Math.LOG2E},t.Repeat=function(t,e){return t-Math.floor(t/e)*e},t.Normalize=function(t,e,i){return(t-e)/(i-e)},t.Denormalize=function(t,e,i){return t*(i-e)+e},t.DeltaAngle=function(e,i){var n=t.Repeat(i-e,360);return n>180&&(n-=360),n},t.PingPong=function(e,i){var n=t.Repeat(e,2*i);return i-Math.abs(n-i)},t.SmoothStep=function(e,i,n){var r=t.Clamp(n);return i*(r=-2*r*r*r+3*r*r)+e*(1-r)},t.MoveTowards=function(e,i,n){return Math.abs(i-e)<=n?i:e+t.Sign(i-e)*n},t.MoveTowardsAngle=function(e,i,n){var r=t.DeltaAngle(e,i),o=0;return-n<r&&r<n?o=i:(i=e+r,o=t.MoveTowards(e,i,n)),o},t.Lerp=function(t,e,i){return t+(e-t)*i},t.LerpAngle=function(e,i,n){var r=t.Repeat(i-e,360);return r>180&&(r-=360),e+r*t.Clamp(n)},t.InverseLerp=function(e,i,n){return e!=i?t.Clamp((n-e)/(i-e)):0},t.Hermite=function(t,e,i,n,r){var o=r*r,s=r*o;return t*(2*s-3*o+1)+i*(-2*s+3*o)+e*(s-2*o+r)+n*(s-o)},t.RandomRange=function(t,e){return t===e?t:Math.random()*(e-t)+t},t.RangeToPercent=function(t,e,i){return(t-e)/(i-e)},t.PercentToRange=function(t,e,i){return(i-e)*t+e},t.NormalizeRadians=function(e){return e-t.TwoPi*Math.floor((e+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}();t.Scalar=e}(l||(l={})),function(t){function e(t){var e=t.getClassName();if(r[e])return r[e];r[e]={};for(var i=r[e],o=t,s=e;s;){var a=n[s];for(var l in a)i[l]=a[l];var c=void 0,u=!1;do{if(!(c=Object.getPrototypeOf(o)).getClassName){u=!0;break}if(c.getClassName()!==s)break;o=c}while(c);if(u)break;s=c.getClassName(),o=c}return i}function i(t,e){return function(i,r){var o=function(t){var e=t.getClassName();return n[e]||(n[e]={}),n[e]}(i);o[r]||(o[r]={type:t,sourceName:e})}}var n={},r={},o=function(i,n,r){var o=i();t.Tags&&t.Tags.AddTagsTo(o,n.tags);var s=e(o);for(var a in s){var l=s[a],c=n[a],u=l.type;if(null!=c)switch(u){case 0:case 6:o[a]=c;break;case 1:o[a]=r||c.isRenderTarget?c:c.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:o[a]=r?c:c.clone()}}return o};t.expandToProperty=function(t,e){return void 0===e&&(e=null),function(t,e){return void 0===e&&(e=null),function(i,n){var r=e||"_"+n;Object.defineProperty(i,n,{get:function(){return this[r]},set:function(e){this[r]!==e&&(this[r]=e,i[t].apply(this))},enumerable:!0,configurable:!0})}}(t,e)},t.serialize=function(t){return i(0,t)},t.serializeAsTexture=function(t){return i(1,t)},t.serializeAsColor3=function(t){return i(2,t)},t.serializeAsFresnelParameters=function(t){return i(3,t)},t.serializeAsVector2=function(t){return i(4,t)},t.serializeAsVector3=function(t){return i(5,t)},t.serializeAsMeshReference=function(t){return i(6,t)},t.serializeAsColorCurves=function(t){return i(7,t)},t.serializeAsColor4=function(t){return i(8,t)},t.serializeAsImageProcessingConfiguration=function(t){return i(9,t)},t.serializeAsQuaternion=function(t){return i(10,t)};var s=function(){function i(){}return i.Serialize=function(i,n){n||(n={}),t.Tags&&(n.tags=t.Tags.GetTags(i));var r=e(i);for(var o in r){var s=r[o],a=s.sourceName||o,l=s.type,c=i[o];if(null!=c)switch(l){case 0:n[a]=c;break;case 1:n[a]=c.serialize();break;case 2:n[a]=c.asArray();break;case 3:n[a]=c.serialize();break;case 4:case 5:n[a]=c.asArray();break;case 6:n[a]=c.id;break;case 7:n[a]=c.serialize();break;case 8:n[a]=c.asArray();break;case 9:n[a]=c.serialize()}}return n},i.Parse=function(i,n,r,o){void 0===o&&(o=null);var s=i();o||(o=""),t.Tags&&t.Tags.AddTagsTo(s,n.tags);var a=e(s);for(var l in a){var c=a[l],u=n[c.sourceName||l],h=c.type;if(null!=u){var p=s;switch(h){case 0:p[l]=u;break;case 1:r&&(p[l]=t.Texture.Parse(u,r,o));break;case 2:p[l]=t.Color3.FromArray(u);break;case 3:p[l]=t.FresnelParameters.Parse(u);break;case 4:p[l]=t.Vector2.FromArray(u);break;case 5:p[l]=t.Vector3.FromArray(u);break;case 6:r&&(p[l]=r.getLastMeshByID(u));break;case 7:p[l]=t.ColorCurves.Parse(u);break;case 8:p[l]=t.Color4.FromArray(u);break;case 9:p[l]=t.ImageProcessingConfiguration.Parse(u)}}}return s},i.Clone=function(t,e){return o(t,e,!1)},i.Instanciate=function(t,e){return o(t,e,!0)},i}();t.SerializationHelper=s}(l||(l={})),function(t){var e=function(){function t(t,e,i,n){void 0===e&&(e=!1),this.initalize(t,e,i,n)}return t.prototype.initalize=function(t,e,i,n){return void 0===e&&(e=!1),this.mask=t,this.skipNextObservers=e,this.target=i,this.currentTarget=n,this},t}();t.EventState=e;var i=function(){return function(t,e,i){void 0===i&&(i=null),this.callback=t,this.mask=e,this.scope=i,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}}();t.Observer=i;var n=function(){function t(){}return t.prototype.dispose=function(){if(this._observers&&this._observables)for(var t=0;t<this._observers.length;t++)this._observables[t].remove(this._observers[t]);this._observers=null,this._observables=null},t.Watch=function(e,i,n,r){void 0===n&&(n=-1),void 0===r&&(r=null);var o=new t;o._observers=new Array,o._observables=e;for(var s=0,a=e;s<a.length;s++){var l=a[s].add(i,n,!1,r);l&&o._observers.push(l)}return o},t}();t.MultiObserver=n;var r=function(){function n(t){this._observers=new Array,this._eventState=new e(0),t&&(this._onObserverAdded=t)}return n.prototype.add=function(t,e,n,r,o){if(void 0===e&&(e=-1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=!1),!t)return null;var s=new i(t,e,r);return s.unregisterOnNextCall=o,n?this._observers.unshift(s):this._observers.push(s),this._onObserverAdded&&this._onObserverAdded(s),s},n.prototype.remove=function(t){if(!t)return!1;var e=this._observers.indexOf(t);return-1!==e&&(this._observers.splice(e,1),!0)},n.prototype.removeCallback=function(t,e){for(var i=0;i<this._observers.length;i++)if(this._observers[i].callback===t&&(!e||e===this._observers[i].scope))return this._observers.splice(i,1),!0;return!1},n.prototype._deferUnregister=function(e){var i=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,t.Tools.SetImmediate(function(){i.remove(e)})},n.prototype.notifyObservers=function(t,e,i,n){if(void 0===e&&(e=-1),!this._observers.length)return!0;var r=this._eventState;r.mask=e,r.target=i,r.currentTarget=n,r.skipNextObservers=!1,r.lastReturnValue=t;for(var o=0,s=this._observers;o<s.length;o++){var a=s[o];if(!a._willBeUnregistered&&(a.mask&e&&(a.scope?r.lastReturnValue=a.callback.apply(a.scope,[t,r]):r.lastReturnValue=a.callback(t,r),a.unregisterOnNextCall&&this._deferUnregister(a)),r.skipNextObservers))return!1}return!0},n.prototype.notifyObserversWithPromise=function(t,e,i,n){var r=this;void 0===e&&(e=-1);var o=Promise.resolve(t);if(!this._observers.length)return o;var s=this._eventState;return s.mask=e,s.target=i,s.currentTarget=n,s.skipNextObservers=!1,this._observers.forEach(function(i){s.skipNextObservers||i._willBeUnregistered||i.mask&e&&(o=i.scope?o.then(function(e){return s.lastReturnValue=e,i.callback.apply(i.scope,[t,s])}):o.then(function(e){return s.lastReturnValue=e,i.callback(t,s)}),i.unregisterOnNextCall&&r._deferUnregister(i))}),o.then(function(){return t})},n.prototype.notifyObserver=function(t,e,i){void 0===i&&(i=-1);var n=this._eventState;n.mask=i,n.skipNextObservers=!1,t.callback(e,n)},n.prototype.hasObservers=function(){return this._observers.length>0},n.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},n.prototype.clone=function(){var t=new n;return t._observers=this._observers.slice(0),t},n.prototype.hasSpecificMask=function(t){void 0===t&&(t=-1);for(var e=0,i=this._observers;e<i.length;e++){var n=i[e];if(n.mask&t||n.mask===t)return!0}return!1},n}();t.Observable=r}(l||(l={})),function(t){var e=function(){function t(e){this.length=0,this.data=new Array(e),this._id=t._GlobalId++}return t.prototype.push=function(t){this.data[this.length++]=t,this.length>this.data.length&&(this.data.length*=2)},t.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t(this.data[e])},t.prototype.sort=function(t){this.data.sort(t)},t.prototype.reset=function(){this.length=0},t.prototype.dispose=function(){this.reset(),this.data&&(this.data.length=0,this.data=[])},t.prototype.concat=function(t){if(0!==t.length){this.length+t.length>this.data.length&&(this.data.length=2*(this.length+t.length));for(var e=0;e<t.length;e++)this.data[this.length++]=(t.data||t)[e]}},t.prototype.indexOf=function(t){var e=this.data.indexOf(t);return e>=this.length?-1:e},t.prototype.contains=function(t){return-1!==this.data.indexOf(t)},t._GlobalId=0,t}();t.SmartArray=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._duplicateId=0,e}return o(e,t),e.prototype.push=function(e){t.prototype.push.call(this,e),e.__smartArrayFlags||(e.__smartArrayFlags={}),e.__smartArrayFlags[this._id]=this._duplicateId},e.prototype.pushNoDuplicate=function(t){return!(t.__smartArrayFlags&&t.__smartArrayFlags[this._id]===this._duplicateId||(this.push(t),0))},e.prototype.reset=function(){t.prototype.reset.call(this),this._duplicateId++},e.prototype.concatWithNoDuplicate=function(t){if(0!==t.length){this.length+t.length>this.data.length&&(this.data.length=2*(this.length+t.length));for(var e=0;e<t.length;e++){var i=(t.data||t)[e];this.pushNoDuplicate(i)}}},e}(e);t.SmartArrayNoDuplicate=i}(l||(l={})),function(t){var e=function(t){function e(i,n){var r=t.call(this,i)||this;return r.request=n,r.name="LoadFileError",e._setPrototypeOf(r,e.prototype),r}return o(e,t),e._setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e}(Error);t.LoadFileError=e;var i=function(){function t(){}return t.ExponentialBackoff=function(t,e){return void 0===t&&(t=3),void 0===e&&(e=500),function(i,n,r){return 0!==n.status||r>=t||-1!==i.indexOf("file:")?-1:Math.pow(2,r)*e}},t}();t.RetryStrategy=i;var n,r=function(e,i){return e?e instanceof t.Mesh?null:e instanceof t.SubMesh?e.clone(i):e.clone?e.clone():null:null},s=function(){function o(){}return o.Mix=function(t,e,i){return t*(1-i)+e*i},o.Instantiate=function(t){if(o.RegisteredExternalClasses&&o.RegisteredExternalClasses[t])return o.RegisteredExternalClasses[t];for(var e=t.split("."),i=window||this,n=0,r=e.length;n<r;n++)i=i[e[n]];return"function"!=typeof i?null:i},o.Slice=function(t){return t.slice?t.slice():Array.prototype.slice.call(t)},o.SetImmediate=function(t){window.setImmediate?window.setImmediate(t):setTimeout(t,1)},o.IsExponentOfTwo=function(t){var e=1;do{e*=2}while(e<t);return e===t},o.CeilingPOT=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},o.FloorPOT=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)-(t>>1)},o.NearestPOT=function(t){var e=o.CeilingPOT(t),i=o.FloorPOT(t);return e-t>t-i?i:e},o.GetExponentOfTwo=function(e,i,n){var r;switch(void 0===n&&(n=t.Engine.SCALEMODE_NEAREST),n){case t.Engine.SCALEMODE_FLOOR:r=o.FloorPOT(e);break;case t.Engine.SCALEMODE_NEAREST:r=o.NearestPOT(e);break;case t.Engine.SCALEMODE_CEILING:default:r=o.CeilingPOT(e)}return Math.min(r,i)},o.GetFilename=function(t){var e=t.lastIndexOf("/");return e<0?t:t.substring(e+1)},o.GetFolderPath=function(t,e){void 0===e&&(e=!1);var i=t.lastIndexOf("/");return i<0?e?t:"":t.substring(0,i+1)},o.GetDOMTextContent=function(t){for(var e="",i=t.firstChild;i;)3===i.nodeType&&(e+=i.textContent),i=i.nextSibling;return e},o.ToDegrees=function(t){return 180*t/Math.PI},o.ToRadians=function(t){return t*Math.PI/180},o.EncodeArrayBufferTobase64=function(t){for(var e,i,n,r,o,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0,h=new Uint8Array(t);u<h.length;)r=(e=h[u++])>>2,o=(3&e)<<4|(i=u<h.length?h[u++]:Number.NaN)>>4,s=(15&i)<<2|(n=u<h.length?h[u++]:Number.NaN)>>6,a=63&n,isNaN(i)?s=a=64:isNaN(n)&&(a=64),c+=l.charAt(r)+l.charAt(o)+l.charAt(s)+l.charAt(a);return"data:image/png;base64,"+c},o.ExtractMinAndMaxIndexed=function(e,i,n,r,o){void 0===o&&(o=null);for(var s=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new t.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),l=n;l<n+r;l++){var c=new t.Vector3(e[3*i[l]],e[3*i[l]+1],e[3*i[l]+2]);s=t.Vector3.Minimize(c,s),a=t.Vector3.Maximize(c,a)}return o&&(s.x-=s.x*o.x+o.y,s.y-=s.y*o.x+o.y,s.z-=s.z*o.x+o.y,a.x+=a.x*o.x+o.y,a.y+=a.y*o.x+o.y,a.z+=a.z*o.x+o.y),{minimum:s,maximum:a}},o.ExtractMinAndMax=function(e,i,n,r,o){void 0===r&&(r=null);var s=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new t.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);o||(o=3);for(var l=i;l<i+n;l++){var c=new t.Vector3(e[l*o],e[l*o+1],e[l*o+2]);s=t.Vector3.Minimize(c,s),a=t.Vector3.Maximize(c,a)}return r&&(s.x-=s.x*r.x+r.y,s.y-=s.y*r.x+r.y,s.z-=s.z*r.x+r.y,a.x+=a.x*r.x+r.y,a.y+=a.y*r.x+r.y,a.z+=a.z*r.x+r.y),{minimum:s,maximum:a}},o.Vector2ArrayFeeder=function(e){return function(i){var n=void 0!==e.BYTES_PER_ELEMENT;if(i>=(n?e.length/2:e.length))return null;if(n){var r=e;return new t.Vector2(r[2*i+0],r[2*i+1])}return e[i]}},o.ExtractMinAndMaxVector2=function(e,i){void 0===i&&(i=null);for(var n=new t.Vector2(Number.MAX_VALUE,Number.MAX_VALUE),r=new t.Vector2(-Number.MAX_VALUE,-Number.MAX_VALUE),o=0,s=e(o++);s;)n=t.Vector2.Minimize(s,n),r=t.Vector2.Maximize(s,r),s=e(o++);return i&&(n.x-=n.x*i.x+i.y,n.y-=n.y*i.x+i.y,r.x+=r.x*i.x+i.y,r.y+=r.y*i.x+i.y),{minimum:n,maximum:r}},o.MakeArray=function(t,e){return!0===e||void 0!==t&&null!=t?Array.isArray(t)?t:[t]:null},o.GetPointerPrefix=function(){var t="pointer";return!o.IsWindowObjectExist()||window.PointerEvent||navigator.pointerEnabled||(t="mouse"),t},o.QueueNewFrame=function(t,e){return o.IsWindowObjectExist()?(e||(e=window),e.requestAnimationFrame?e.requestAnimationFrame(t):e.msRequestAnimationFrame?e.msRequestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.mozRequestAnimationFrame?e.mozRequestAnimationFrame(t):e.oRequestAnimationFrame?e.oRequestAnimationFrame(t):window.setTimeout(t,16)):setTimeout(t,16)},o.RequestFullscreen=function(t){var e=t.requestFullscreen||t.msRequestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen;e&&e.call(t)},o.ExitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msCancelFullScreen&&document.msCancelFullScreen()},o.SetCorsBehavior=function(t,e){if((!t||0!==t.indexOf("data:"))&&o.CorsBehavior)if("string"==typeof o.CorsBehavior||o.CorsBehavior instanceof String)e.crossOrigin=o.CorsBehavior;else{var i=o.CorsBehavior(t);i&&(e.crossOrigin=i)}},o.CleanUrl=function(t){return t.replace(/#/gm,"%23")},o.LoadImage=function(e,i,n,r){e instanceof ArrayBuffer&&(e=o.EncodeArrayBufferTobase64(e)),e=o.CleanUrl(e),e=o.PreprocessUrl(e);var s=new Image;o.SetCorsBehavior(e,s),s.onload=function(){i(s)},s.onerror=function(t){o.Error("Error while trying to load image: "+e),n&&n("Error while trying to load image: "+e,t)};var a=function(){s.src=e};if("data:"!==e.substr(0,5)&&r&&r.enableTexturesOffline&&t.Database.IsUASupportingBlobStorage)r.openAsync(function(){r&&r.loadImageFromDB(e,s)},a);else{if(-1!==e.indexOf("file:")){var l=decodeURIComponent(e.substring(5).toLowerCase());if(t.FilesInput.FilesToLoad[l]){try{var c;try{c=URL.createObjectURL(t.FilesInput.FilesToLoad[l],{oneTimeOnly:!0})}catch(e){c=URL.createObjectURL(t.FilesInput.FilesToLoad[l])}s.src=c}catch(t){s.src=""}return s}}a()}return s},o.LoadFile=function(i,n,r,s,a,l){if(i=o.CleanUrl(i),-1!==(i=o.PreprocessUrl(i)).indexOf("file:")){var c=decodeURIComponent(i.substring(5).toLowerCase());if(t.FilesInput.FilesToLoad[c])return o.ReadFile(t.FilesInput.FilesToLoad[c],n,r,a)}var u=o.BaseUrl+i,h=!1,p={onCompleteObservable:new t.Observable,abort:function(){return h=!0}},d=function(){var t=new XMLHttpRequest,i=null;p.abort=function(){h=!0,t.readyState!==(XMLHttpRequest.DONE||4)&&t.abort(),null!==i&&(clearTimeout(i),i=null)};var s=function(c){t.open("GET",u,!0),a&&(t.responseType="arraybuffer"),r&&t.addEventListener("progress",r);var d=function(){p.onCompleteObservable.notifyObservers(p)};t.addEventListener("loadend",d);var f=function(){if(!h&&t.readyState===(XMLHttpRequest.DONE||4)){if(t.removeEventListener("readystatechange",f),t.status>=200&&t.status<300||!o.IsWindowObjectExist()&&0===t.status)return void n(a?t.response:t.responseText,t.responseURL);var r=o.DefaultRetryStrategy;if(r){var p=r(u,t,c);if(-1!==p)return t.removeEventListener("loadend",d),t=new XMLHttpRequest,void(i=setTimeout(function(){return s(c+1)},p))}var m=new e("Error status: "+t.status+" "+t.statusText+" - Unable to load "+u,t);if(!l)throw m;l(t,m)}};t.addEventListener("readystatechange",f),t.send()};s(0)};if(s&&s.enableSceneOffline){var f=function(){h||d()};s.openAsync(function(){h||s&&s.loadFileFromDB(i,function(t){h||n(t),p.onCompleteObservable.notifyObservers(p)},r?function(t){h||r(t)}:void 0,f,a)},f)}else d();return p},o.LoadScript=function(t,e,i){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(){e&&e()},r.onerror=function(t){i&&i("Unable to load script",t)},n.appendChild(r)},o.ReadFileAsDataURL=function(e,i,n){var r=new FileReader,o={onCompleteObservable:new t.Observable,abort:function(){return r.abort()}};return r.onloadend=function(t){o.onCompleteObservable.notifyObservers(o)},r.onload=function(t){i(t.target.result)},r.onprogress=n,r.readAsDataURL(e),o},o.ReadFile=function(e,i,n,r){var s=new FileReader,a={onCompleteObservable:new t.Observable,abort:function(){return s.abort()}};return s.onloadend=function(t){return a.onCompleteObservable.notifyObservers(a)},s.onerror=function(t){o.Log("Error while reading file: "+e.name),i(JSON.stringify({autoClear:!0,clearColor:[1,0,0],ambientColor:[0,0,0],gravity:[0,-9.807,0],meshes:[],cameras:[],lights:[]}))},s.onload=function(t){i(t.target.result)},n&&(s.onprogress=n),r?s.readAsArrayBuffer(e):s.readAsText(e),a},o.FileAsURL=function(t){var e=new Blob([t]);return(window.URL||window.webkitURL).createObjectURL(e)},o.Format=function(t,e){return void 0===e&&(e=2),t.toFixed(e)},o.CheckExtends=function(t,e,i){t.x<e.x&&(e.x=t.x),t.y<e.y&&(e.y=t.y),t.z<e.z&&(e.z=t.z),t.x>i.x&&(i.x=t.x),t.y>i.y&&(i.y=t.y),t.z>i.z&&(i.z=t.z)},o.DeepCopy=function(t,e,i,n){for(var o in t)if(("_"!==o[0]||n&&-1!==n.indexOf(o))&&(!i||-1===i.indexOf(o))){var s=t[o],a=typeof s;if("function"!==a)if("object"===a)if(s instanceof Array){if(e[o]=[],s.length>0)if("object"==typeof s[0])for(var l=0;l<s.length;l++){var c=r(s[l],e);-1===e[o].indexOf(c)&&e[o].push(c)}else e[o]=s.slice(0)}else e[o]=r(s,e);else e[o]=s}},o.IsEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},o.RegisterTopRootEvents=function(t){for(var e=0;e<t.length;e++){var i=t[e];window.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch(t){}}},o.UnregisterTopRootEvents=function(t){for(var e=0;e<t.length;e++){var i=t[e];window.removeEventListener(i.name,i.handler);try{window.parent&&window.parent.removeEventListener(i.name,i.handler)}catch(t){}}},o.DumpFramebuffer=function(t,e,i,r,s,a){void 0===s&&(s="image/png");for(var l=4*t,c=e/2,u=i.readPixels(0,0,t,e),h=0;h<c;h++)for(var p=0;p<l;p++){var d=p+h*l,f=p+(e-h-1)*l,m=u[d];u[d]=u[f],u[f]=m}n||(n=document.createElement("canvas")),n.width=t,n.height=e;var g=n.getContext("2d");if(g){var y=g.createImageData(t,e);y.data.set(u),g.putImageData(y,0,0),o.EncodeScreenshotCanvasData(r,s,a)}},o.EncodeScreenshotCanvasData=function(t,e,i){void 0===e&&(e="image/png");var r=n.toDataURL(e);t?t(r):(n.toBlob||(n.toBlob=function(t,e,i){var n=this;setTimeout(function(){for(var r=atob(n.toDataURL(e,i).split(",")[1]),o=r.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=r.charCodeAt(a);t(new Blob([s],{type:e||"image/png"}))})}),n.toBlob(function(t){var e=URL.createObjectURL(t);if("download"in document.createElement("a")){var n=window.document.createElement("a");if(n.href=e,i)n.setAttribute("download",i);else{var r=new Date,o=(r.getFullYear()+"-"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate()+"_"+r.getHours()+"-"+("0"+r.getMinutes()).slice(-2);n.setAttribute("download","screenshot_"+o+".png")}window.document.body.appendChild(n),n.addEventListener("click",function(){n.parentElement&&n.parentElement.removeChild(n)}),n.click()}else{var s=window.open("");if(!s)return;var a=s.document.createElement("img");a.onload=function(){URL.revokeObjectURL(e)},a.src=e,s.document.body.appendChild(a)}}))},o.CreateScreenshot=function(t,e,i,r,s){var a,l;if(void 0===s&&(s="image/png"),i.precision)a=Math.round(t.getRenderWidth()*i.precision),l=Math.round(a/t.getAspectRatio(e));else if(i.width&&i.height)a=i.width,l=i.height;else if(i.width&&!i.height)a=i.width,l=Math.round(a/t.getAspectRatio(e));else if(i.height&&!i.width)l=i.height,a=Math.round(l*t.getAspectRatio(e));else{if(isNaN(i))return void o.Error("Invalid 'size' parameter !");l=i,a=i}n||(n=document.createElement("canvas")),n.width=a,n.height=l;var c=n.getContext("2d"),u=t.getRenderWidth()/t.getRenderHeight(),h=a,p=h/u;p>l&&(h=(p=l)*u);var d=Math.max(0,a-h)/2,f=Math.max(0,l-p)/2,m=t.getRenderingCanvas();c&&m&&c.drawImage(m,d,f,h,p),o.EncodeScreenshotCanvasData(r,s)},o.CreateScreenshotUsingRenderTarget=function(e,i,n,r,s,a,l,c){var u,h;if(void 0===s&&(s="image/png"),void 0===a&&(a=1),void 0===l&&(l=!1),n.precision)u=Math.round(e.getRenderWidth()*n.precision),h=Math.round(u/e.getAspectRatio(i)),n={width:u,height:h};else if(n.width&&n.height)u=n.width,h=n.height;else if(n.width&&!n.height)u=n.width,h=Math.round(u/e.getAspectRatio(i)),n={width:u,height:h};else if(n.height&&!n.width)h=n.height,n={width:u=Math.round(h*e.getAspectRatio(i)),height:h};else{if(isNaN(n))return void o.Error("Invalid 'size' parameter !");h=n,u=n}var p=i.getScene(),d=null;p.activeCamera!==i&&(d=p.activeCamera,p.activeCamera=i);var f=new t.RenderTargetTexture("screenShot",n,p,!1,!1,t.Engine.TEXTURETYPE_UNSIGNED_INT,!1,t.Texture.NEAREST_SAMPLINGMODE);f.renderList=null,f.samples=a,l&&f.addPostProcess(new t.FxaaPostProcess("antialiasing",1,p.activeCamera)),f.onAfterRenderObservable.add(function(){o.DumpFramebuffer(u,h,e,r,s,c)}),p.incrementRenderId(),p.resetCachedMaterial(),f.render(!0),f.dispose(),d&&(p.activeCamera=d),i.getProjectionMatrix(!0)},o.ValidateXHRData=function(e,i){void 0===i&&(i=7);try{if(1&i){if(e.responseText&&e.responseText.length>0)return!0;if(1===i)return!1}if(2&i){var n=t.TGATools.GetTGAHeader(e.response);if(n.width&&n.height&&n.width>0&&n.height>0)return!0;if(2===i)return!1}if(4&i){var r=new Uint8Array(e.response,0,3);return 68===r[0]&&68===r[1]&&83===r[2]}}catch(t){}return!1},o.RandomId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},o.IsBase64=function(t){return!(t.length<5)&&"data:"===t.substr(0,5)},o.DecodeBase64=function(t){for(var e=atob(t.split(",")[1]),i=e.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n.buffer},Object.defineProperty(o,"NoneLogLevel",{get:function(){return o._NoneLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"MessageLogLevel",{get:function(){return o._MessageLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"WarningLogLevel",{get:function(){return o._WarningLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"ErrorLogLevel",{get:function(){return o._ErrorLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"AllLogLevel",{get:function(){return o._MessageLogLevel|o._WarningLogLevel|o._ErrorLogLevel},enumerable:!0,configurable:!0}),o._AddLogEntry=function(t){o._LogCache=t+o._LogCache,o.OnNewCacheEntry&&o.OnNewCacheEntry(t)},o._FormatMessage=function(t){var e=function(t){return t<10?"0"+t:""+t},i=new Date;return"["+e(i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())+"]: "+t},o._LogDisabled=function(t){},o._LogEnabled=function(t){var e=o._FormatMessage(t);console.log("BJS - "+e);var i="<div style='color:white'>"+e+"</div><br>";o._AddLogEntry(i)},o._WarnDisabled=function(t){},o._WarnEnabled=function(t){var e=o._FormatMessage(t);console.warn("BJS - "+e);var i="<div style='color:orange'>"+e+"</div><br>";o._AddLogEntry(i)},o._ErrorDisabled=function(t){},o._ErrorEnabled=function(t){o.errorsCount++;var e=o._FormatMessage(t);console.error("BJS - "+e);var i="<div style='color:red'>"+e+"</div><br>";o._AddLogEntry(i)},Object.defineProperty(o,"LogCache",{get:function(){return o._LogCache},enumerable:!0,configurable:!0}),o.ClearLogCache=function(){o._LogCache="",o.errorsCount=0},Object.defineProperty(o,"LogLevels",{set:function(t){(t&o.MessageLogLevel)===o.MessageLogLevel?o.Log=o._LogEnabled:o.Log=o._LogDisabled,(t&o.WarningLogLevel)===o.WarningLogLevel?o.Warn=o._WarnEnabled:o.Warn=o._WarnDisabled,(t&o.ErrorLogLevel)===o.ErrorLogLevel?o.Error=o._ErrorEnabled:o.Error=o._ErrorDisabled},enumerable:!0,configurable:!0}),o.IsWindowObjectExist=function(){return"undefined"!=typeof window},Object.defineProperty(o,"PerformanceNoneLogLevel",{get:function(){return o._PerformanceNoneLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"PerformanceUserMarkLogLevel",{get:function(){return o._PerformanceUserMarkLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"PerformanceConsoleLogLevel",{get:function(){return o._PerformanceConsoleLogLevel},enumerable:!0,configurable:!0}),Object.defineProperty(o,"PerformanceLogLevel",{set:function(t){return(t&o.PerformanceUserMarkLogLevel)===o.PerformanceUserMarkLogLevel?(o.StartPerformanceCounter=o._StartUserMark,void(o.EndPerformanceCounter=o._EndUserMark)):(t&o.PerformanceConsoleLogLevel)===o.PerformanceConsoleLogLevel?(o.StartPerformanceCounter=o._StartPerformanceConsole,void(o.EndPerformanceCounter=o._EndPerformanceConsole)):(o.StartPerformanceCounter=o._StartPerformanceCounterDisabled,void(o.EndPerformanceCounter=o._EndPerformanceCounterDisabled))},enumerable:!0,configurable:!0}),o._StartPerformanceCounterDisabled=function(t,e){},o._EndPerformanceCounterDisabled=function(t,e){},o._StartUserMark=function(t,e){if(void 0===e&&(e=!0),!o._performance){if(!o.IsWindowObjectExist())return;o._performance=window.performance}e&&o._performance.mark&&o._performance.mark(t+"-Begin")},o._EndUserMark=function(t,e){void 0===e&&(e=!0),e&&o._performance.mark&&(o._performance.mark(t+"-End"),o._performance.measure(t,t+"-Begin",t+"-End"))},o._StartPerformanceConsole=function(t,e){void 0===e&&(e=!0),e&&(o._StartUserMark(t,e),console.time&&console.time(t))},o._EndPerformanceConsole=function(t,e){void 0===e&&(e=!0),e&&(o._EndUserMark(t,e),console.time&&console.timeEnd(t))},Object.defineProperty(o,"Now",{get:function(){return o.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},enumerable:!0,configurable:!0}),o.GetClassName=function(t,e){void 0===e&&(e=!1);var i=null;return!e&&t.getClassName?i=t.getClassName():(t instanceof Object&&(i=(e?t:Object.getPrototypeOf(t)).constructor.__bjsclassName__),i||(i=typeof t)),i},o.First=function(t,e){for(var i=0,n=t;i<n.length;i++){var r=n[i];if(e(r))return r}return null},o.getFullClassName=function(t,e){void 0===e&&(e=!1);var i=null,n=null;if(!e&&t.getClassName)i=t.getClassName();else{if(t instanceof Object){var r=e?t:Object.getPrototypeOf(t);i=r.constructor.__bjsclassName__,n=r.constructor.__bjsmoduleName__}i||(i=typeof t)}return i?(null!=n?n+".":"")+i:null},o.arrayOrStringFeeder=function(t){return function(e){if(e>=t.length)return null;var i=t.charCodeAt?t.charCodeAt(e):t[e];return i&&i.getHashCode&&(i=i.getHashCode()),"string"==typeof i?o.hashCodeFromStream(o.arrayOrStringFeeder(i)):i}},o.hashCodeFromStream=function(t){for(var e=0,i=0,n=t(i++);null!=n;)e=(e<<5)-e+n,e|=0,n=t(i++);return e},o.BaseUrl="",o.DefaultRetryStrategy=i.ExponentialBackoff(),o.CorsBehavior="anonymous",o.UseFallbackTexture=!0,o.RegisteredExternalClasses={},o.fallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z",o.PreprocessUrl=function(t){return t},o._NoneLogLevel=0,o._MessageLogLevel=1,o._WarningLogLevel=2,o._ErrorLogLevel=4,o._LogCache="",o.errorsCount=0,o.Log=o._LogEnabled,o.Warn=o._WarnEnabled,o.Error=o._ErrorEnabled,o._PerformanceNoneLogLevel=0,o._PerformanceUserMarkLogLevel=1,o._PerformanceConsoleLogLevel=2,o.StartPerformanceCounter=o._StartPerformanceCounterDisabled,o.EndPerformanceCounter=o._EndPerformanceCounterDisabled,o}();t.Tools=s;var a=function(){function t(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"average",{get:function(){return this._average},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!0,configurable:!0}),t.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},t.prototype.addCount=function(e,i){t.Enabled&&(this._current+=e,i&&this._fetchResult())},t.prototype.beginMonitoring=function(){t.Enabled&&(this._startMonitoringTime=s.Now)},t.prototype.endMonitoring=function(e){if(void 0===e&&(e=!0),t.Enabled){e&&this.fetchNewFrame();var i=s.Now;this._current=i-this._startMonitoringTime,e&&this._fetchResult()}},t.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var t=s.Now;t-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=t,this._lastSecAccumulated=0,this._lastSecValueCount=0)},t.Enabled=!0,t}();t.PerfCounter=a,t.className=function(t,e){return function(i){i.__bjsclassName__=t,i.__bjsmoduleName__=null!=e?e:null}};var l=function(){function t(t,e,i,n){void 0===n&&(n=0),this.iterations=t,this._fn=e,this._successCallback=i,this.index=n-1,this._done=!1}return t.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},t.prototype.breakLoop=function(){this._done=!0,this._successCallback()},t.Run=function(e,i,n,r){void 0===r&&(r=0);var o=new t(e,i,n,r);return o.executeNext(),o},t.SyncAsyncForLoop=function(e,i,n,r,o,s){void 0===s&&(s=0),t.Run(Math.ceil(e/i),function(t){o&&o()?t.breakLoop():setTimeout(function(){for(var r=0;r<i;++r){var s=t.index*i+r;if(s>=e)break;if(n(s),o&&o()){t.breakLoop();break}}t.executeNext()},s)},r)},t}();t.AsyncLoop=l}(l||(l={})),function(t){var e;!function(t){t[t.Pending=0]="Pending",t[t.Fulfilled=1]="Fulfilled",t[t.Rejected=2]="Rejected"}(e||(e={}));var i=function(){return function(){this.count=0,this.target=0,this.results=[]}}(),n=function(){function t(t){var i=this;if(this._state=e.Pending,this._children=new Array,this._rejectWasConsumed=!1,t)try{t(function(t){i._resolve(t)},function(t){i._reject(t)})}catch(t){this._reject(t.message)}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFulfilled",{get:function(){return this._state===e.Fulfilled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRejected",{get:function(){return this._state===e.Rejected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return this._state===e.Pending},enumerable:!0,configurable:!0}),t.prototype.value=function(){if(!this.isFulfilled)throw new Error("Promise is not fulfilled");return this._result},t.prototype.reason=function(){if(!this.isRejected)throw new Error("Promise is not rejected");return this._reason},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.then=function(i,n){var r=new t;if(r._onFulfilled=i,r._onRejected=n,this._children.push(r),this._state!==e.Pending)if(this._state===e.Fulfilled||this._rejectWasConsumed){var o=r._resolve(this._result);if(null!=o)if(void 0!==o._state){var s=o;r._children.push(s),r=s}else r._result=o}else r._reject(this._reason);return r},t.prototype._moveChildren=function(t){if((o=this._children).push.apply(o,t.splice(0,t.length)),this.isFulfilled)for(var e=0,i=this._children;e<i.length;e++){i[e]._resolve(this._result)}else if(this.isRejected)for(var n=0,r=this._children;n<r.length;n++){r[n]._reject(this._reason)}var o},t.prototype._resolve=function(t){try{this._state=e.Fulfilled,this._result=t;var i=null;if(this._onFulfilled&&(i=this._onFulfilled(t)),null!=i)if(void 0!==i._state){i._moveChildren(this._children)}else t=i;for(var n=0,r=this._children;n<r.length;n++)r[n]._resolve(t);return i}catch(t){this._reject(t.message)}return null},t.prototype._reject=function(t){this._state=e.Rejected,this._reason=t,this._onRejected&&(this._onRejected(t),this._rejectWasConsumed=!0);for(var i=0,n=this._children;i<n.length;i++){var r=n[i];this._rejectWasConsumed?r._resolve(null):r._reject(t)}},t.resolve=function(e){var i=new t;return i._resolve(e),i},t._RegisterForFulfillment=function(t,e,i){t.then(function(t){return e.results[i]=t,e.count++,e.count===e.target&&e.rootPromise._resolve(e.results),null},function(t){e.rootPromise.isRejected||e.rootPromise._reject(t)})},t.all=function(e){var n=new t,r=new i;if(r.target=e.length,r.rootPromise=n,e.length)for(var o=0;o<e.length;o++)t._RegisterForFulfillment(e[o],r,o);else n._resolve([]);return n},t}(),r=function(){function t(){}return t.Apply=function(t){void 0===t&&(t=!1),(t||"undefined"==typeof Promise)&&(window.Promise=n)},t}();t.PromisePolyfill=r}(l||(l={})),function(t){var e=function(){function t(){this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this.reset()}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alphaBlend",{get:function(){return this._alphaBlend},set:function(t){this._alphaBlend!==t&&(this._alphaBlend=t,this._isAlphaBlendDirty=!0)},enumerable:!0,configurable:!0}),t.prototype.setAlphaBlendConstants=function(t,e,i,n){this._blendConstants[0]===t&&this._blendConstants[1]===e&&this._blendConstants[2]===i&&this._blendConstants[3]===n||(this._blendConstants[0]=t,this._blendConstants[1]=e,this._blendConstants[2]=i,this._blendConstants[3]=n,this._isBlendConstantsDirty=!0)},t.prototype.setAlphaBlendFunctionParameters=function(t,e,i,n){this._blendFunctionParameters[0]===t&&this._blendFunctionParameters[1]===e&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===n||(this._blendFunctionParameters[0]=t,this._blendFunctionParameters[1]=e,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=n,this._isBlendFunctionParametersDirty=!0)},t.prototype.setAlphaEquationParameters=function(t,e){this._blendEquationParameters[0]===t&&this._blendEquationParameters[1]===e||(this._blendEquationParameters[0]=t,this._blendEquationParameters[1]=e,this._isBlendEquationParametersDirty=!0)},t.prototype.reset=function(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1},t.prototype.apply=function(t){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?t.enable(t.BLEND):t.disable(t.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(t.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(t.blendEquationSeparate(this._isBlendEquationParametersDirty[0],this._isBlendEquationParametersDirty[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(t.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))},t}();t._AlphaState=e}(l||(l={})),function(t){var e=function(){function t(){this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,this.reset()}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zOffset",{get:function(){return this._zOffset},set:function(t){this._zOffset!==t&&(this._zOffset=t,this._isZOffsetDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cullFace",{get:function(){return this._cullFace},set:function(t){this._cullFace!==t&&(this._cullFace=t,this._isCullFaceDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cull",{get:function(){return this._cull},set:function(t){this._cull!==t&&(this._cull=t,this._isCullDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthFunc",{get:function(){return this._depthFunc},set:function(t){this._depthFunc!==t&&(this._depthFunc=t,this._isDepthFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return this._depthMask},set:function(t){this._depthMask!==t&&(this._depthMask=t,this._isDepthMaskDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return this._depthTest},set:function(t){this._depthTest!==t&&(this._depthTest=t,this._isDepthTestDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frontFace",{get:function(){return this._frontFace},set:function(t){this._frontFace!==t&&(this._frontFace=t,this._isFrontFaceDirty=!0)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1},t.prototype.apply=function(t){this.isDirty&&(this._isCullDirty&&(this.cull?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(t.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(t.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(t.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(this.zOffset,0)):t.disable(t.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(t.frontFace(this.frontFace),this._isFrontFaceDirty=!1))},t}();t._DepthCullingState=e}(l||(l={})),function(t){var e=function(){function e(){this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFunc",{get:function(){return this._stencilFunc},set:function(t){this._stencilFunc!==t&&(this._stencilFunc=t,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncRef",{get:function(){return this._stencilFuncRef},set:function(t){this._stencilFuncRef!==t&&(this._stencilFuncRef=t,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncMask",{get:function(){return this._stencilFuncMask},set:function(t){this._stencilFuncMask!==t&&(this._stencilFuncMask=t,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilFail",{get:function(){return this._stencilOpStencilFail},set:function(t){this._stencilOpStencilFail!==t&&(this._stencilOpStencilFail=t,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpDepthFail",{get:function(){return this._stencilOpDepthFail},set:function(t){this._stencilOpDepthFail!==t&&(this._stencilOpDepthFail=t,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilDepthPass",{get:function(){return this._stencilOpStencilDepthPass},set:function(t){this._stencilOpStencilDepthPass!==t&&(this._stencilOpStencilDepthPass=t,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilMask",{get:function(){return this._stencilMask},set:function(t){this._stencilMask!==t&&(this._stencilMask=t,this._isStencilMaskDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilTest",{get:function(){return this._stencilTest},set:function(t){this._stencilTest!==t&&(this._stencilTest=t,this._isStencilTestDirty=!0)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._stencilTest=!1,this._stencilMask=255,this._stencilFunc=t.Engine.ALWAYS,this._stencilFuncRef=1,this._stencilFuncMask=255,this._stencilOpStencilFail=t.Engine.KEEP,this._stencilOpDepthFail=t.Engine.KEEP,this._stencilOpStencilDepthPass=t.Engine.REPLACE,this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0},e.prototype.apply=function(t){this.isDirty&&(this._isStencilTestDirty&&(this.stencilTest?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(t.stencilMask(this.stencilMask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(t.stencilFunc(this.stencilFunc,this.stencilFuncRef,this.stencilFuncMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(t.stencilOp(this.stencilOpStencilFail,this.stencilOpDepthFail,this.stencilOpStencilDepthPass),this._isStencilOpDirty=!1))},e}();t._StencilState=e}(l||(l={})),function(t){var e=function(t,e,n,r,o){return i(t,o+(r?r+"\n":"")+e,n)},i=function(t,e,i){var n=t.createShader("vertex"===i?t.VERTEX_SHADER:t.FRAGMENT_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(n);if(r)throw new Error(r)}if(!n)throw new Error("Something went wrong while compile the shader.");return n},n=function(e,i,n){var r=n.NEAREST,o=n.NEAREST;switch(e){case t.Texture.BILINEAR_SAMPLINGMODE:r=n.LINEAR,o=i?n.LINEAR_MIPMAP_NEAREST:n.LINEAR;break;case t.Texture.TRILINEAR_SAMPLINGMODE:r=n.LINEAR,o=i?n.LINEAR_MIPMAP_LINEAR:n.LINEAR;break;case t.Texture.NEAREST_SAMPLINGMODE:r=n.NEAREST,o=i?n.NEAREST_MIPMAP_LINEAR:n.NEAREST;break;case t.Texture.NEAREST_NEAREST_MIPNEAREST:r=n.NEAREST,o=i?n.NEAREST_MIPMAP_NEAREST:n.NEAREST;break;case t.Texture.NEAREST_LINEAR_MIPNEAREST:r=n.NEAREST,o=i?n.LINEAR_MIPMAP_NEAREST:n.LINEAR;break;case t.Texture.NEAREST_LINEAR_MIPLINEAR:r=n.NEAREST,o=i?n.LINEAR_MIPMAP_LINEAR:n.LINEAR;break;case t.Texture.NEAREST_LINEAR:r=n.NEAREST,o=n.LINEAR;break;case t.Texture.NEAREST_NEAREST:r=n.NEAREST,o=n.NEAREST;break;case t.Texture.LINEAR_NEAREST_MIPNEAREST:r=n.LINEAR,o=i?n.NEAREST_MIPMAP_NEAREST:n.NEAREST;break;case t.Texture.LINEAR_NEAREST_MIPLINEAR:r=n.LINEAR,o=i?n.NEAREST_MIPMAP_LINEAR:n.NEAREST;break;case t.Texture.LINEAR_LINEAR:r=n.LINEAR,o=n.LINEAR;break;case t.Texture.LINEAR_NEAREST:r=n.LINEAR,o=n.NEAREST}return{min:o,mag:r}},r=function(e,i,n,r,o,s){void 0===s&&(s=null);var a;a=t.Tools.LoadImage(e,function(){n[i]=a,n._internalCount++,r&&r._removePendingData(a),6===n._internalCount&&o(n)},function(t,e){r&&r._removePendingData(a),s&&s(t,e)},r?r.database:null),r&&r._addPendingData(a)},o=function(t,e,i,n,o){void 0===o&&(o=null);var s=[];s._internalCount=0;for(var a=0;a<6;a++)r(n[a],a,s,e,i,o)},s=function(){return function(){}}(),a=function(){return function(){}}();t.InstancingAttributeInfo=a;var l=function(){return function(){}}();t.RenderTargetCreationOptions=l;var c=function(){return function(){}}();t.EngineCapabilities=c;var u=function(){function r(e,i,n,o){void 0===o&&(o=!1);var a=this;this.forcePOTTextures=!1,this.isFullscreen=!1,this.isPointerLock=!1,this.cullBackFaces=!0,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this.enableOfflineSupport=!1,this.scenes=new Array,this.postProcesses=new Array,this.onResizeObservable=new t.Observable,this.onCanvasBlurObservable=new t.Observable,this.onCanvasFocusObservable=new t.Observable,this.onCanvasPointerOutObservable=new t.Observable,this.onBeforeTextureInitObservable=new t.Observable,this._vrDisplay=void 0,this._vrSupported=!1,this._vrExclusivePointerMode=!1,this.disableUniformBuffers=!1,this._uniformBuffers=new Array,this.onBeginFrameObservable=new t.Observable,this.onEndFrameObservable=new t.Observable,this.onBeforeShaderCompilationObservable=new t.Observable,this.onAfterShaderCompilationObservable=new t.Observable,this._windowIsBackground=!1,this._webGLVersion=1,this._badOS=!1,this._badDesktopOS=!1,this.disableTextureBindingOptimization=!1,this.onVRDisplayChangedObservable=new t.Observable,this.onVRRequestPresentComplete=new t.Observable,this.onVRRequestPresentStart=new t.Observable,this._colorWrite=!0,this._drawCalls=new t.PerfCounter,this._textureCollisions=new t.PerfCounter,this._renderingQueueLaunched=!1,this._activeRenderLoops=new Array,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this.onContextLostObservable=new t.Observable,this.onContextRestoredObservable=new t.Observable,this._contextWasLost=!1,this._doNotHandleContextLost=!1,this._performanceMonitor=new t.PerformanceMonitor,this._fps=60,this._deltaTime=0,this.disablePerformanceMonitorInBackground=!1,this._depthCullingState=new t._DepthCullingState,this._stencilState=new t._StencilState,this._alphaState=new t._AlphaState,this._alphaMode=r.ALPHA_DISABLE,this._internalTexturesCache=new Array,this._activeChannel=0,this._currentTextureChannel=-1,this._boundTexturesCache={},this._compiledEffects={},this._vertexAttribArraysEnabled=[],this._uintIndicesCurrentlySet=!1,this._currentBoundBuffer=new Array,this._currentBufferPointers=new Array,this._currentInstanceLocations=new Array,this._currentInstanceBuffers=new Array,this._firstBoundInternalTextureTracker=new t.DummyInternalTextureTracker,this._lastBoundInternalTextureTracker=new t.DummyInternalTextureTracker,this._vaoRecordInProgress=!1,this._mustWipeVertexAttributes=!1,this._nextFreeTextureSlots=new Array,this._maxSimultaneousTextures=0,this._activeRequests=new Array,this._texturesSupported=new Array,this._onVRFullScreenTriggered=function(){if(a._vrDisplay&&a._vrDisplay.isPresenting){a._oldSize=new t.Size(a.getRenderWidth(),a.getRenderHeight()),a._oldHardwareScaleFactor=a.getHardwareScalingLevel();var e=a._vrDisplay.getEyeParameters("left");a.setHardwareScalingLevel(1),a.setSize(2*e.renderWidth,e.renderHeight)}else a.setHardwareScalingLevel(a._oldHardwareScaleFactor),a.setSize(a._oldSize.width,a._oldSize.height)},this._boundUniforms={},t.PromisePolyfill.Apply();var l=null;if(r.Instances.push(this),e){if(n=n||{},e.getContext){if(l=e,this._renderingCanvas=l,null!=i&&(n.antialias=i),void 0===n.deterministicLockstep&&(n.deterministicLockstep=!1),void 0===n.lockstepMaxSteps&&(n.lockstepMaxSteps=4),void 0===n.preserveDrawingBuffer&&(n.preserveDrawingBuffer=!1),void 0===n.audioEngine&&(n.audioEngine=!0),void 0===n.stencil&&(n.stencil=!0),this._deterministicLockstep=n.deterministicLockstep,this._lockstepMaxSteps=n.lockstepMaxSteps,this._doNotHandleContextLost=!!n.doNotHandleContextLost,navigator&&navigator.userAgent)for(var c=navigator.userAgent,u=0,h=r.ExceptionList;u<h.length;u++){var p=h[u],d=p.key,f=p.targets;if(c.indexOf(d)>-1){if(p.capture&&p.captureConstraint){var m=p.capture,g=p.captureConstraint,y=new RegExp(m).exec(c);if(y&&y.length>0)if(parseInt(y[y.length-1])>=g)continue}for(var _=0,v=f;_<v.length;_++){switch(v[_]){case"uniformBuffer":this.disableUniformBuffers=!0;break;case"textureBindingOptimization":this.disableTextureBindingOptimization=!0}}break}}if(!n.disableWebGL2Support)try{this._gl=l.getContext("webgl2",n)||l.getContext("experimental-webgl2",n),this._gl&&(this._webGLVersion=2)}catch(t){}if(!this._gl){if(!l)throw new Error("The provided canvas is null or undefined.");try{this._gl=l.getContext("webgl",n)||l.getContext("experimental-webgl",n)}catch(t){throw new Error("WebGL not supported")}}if(!this._gl)throw new Error("WebGL not supported");this._onCanvasFocus=function(){a.onCanvasFocusObservable.notifyObservers(a)},this._onCanvasBlur=function(){a.onCanvasBlurObservable.notifyObservers(a)},l.addEventListener("focus",this._onCanvasFocus),l.addEventListener("blur",this._onCanvasBlur),this._onBlur=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.disable(),a._windowIsBackground=!0},this._onFocus=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.enable(),a._windowIsBackground=!1},this._onCanvasPointerOut=function(){a.onCanvasPointerOutObservable.notifyObservers(a)},window.addEventListener("blur",this._onBlur),window.addEventListener("focus",this._onFocus),l.addEventListener("pointerout",this._onCanvasPointerOut),this._doNotHandleContextLost||(this._onContextLost=function(e){e.preventDefault(),a._contextWasLost=!0,t.Tools.Warn("WebGL context lost."),a.onContextLostObservable.notifyObservers(a)},this._onContextRestored=function(e){setTimeout(function(){a._initGLContext(),a._rebuildEffects(),a._rebuildInternalTextures(),a._rebuildBuffers(),a.wipeCaches(!0),t.Tools.Warn("WebGL context successfully restored."),a.onContextRestoredObservable.notifyObservers(a),a._contextWasLost=!1},0)},l.addEventListener("webglcontextlost",this._onContextLost,!1),l.addEventListener("webglcontextrestored",this._onContextRestored,!1))}else this._gl=e,this._renderingCanvas=this._gl.canvas,this._gl.renderbufferStorageMultisample&&(this._webGLVersion=2),n.stencil=this._gl.getContextAttributes().stencil;var b=n.limitDeviceRatio||window.devicePixelRatio||1;this._hardwareScalingLevel=o?1/Math.min(b,window.devicePixelRatio||1):1,this.resize(),this._isStencilEnable=!!n.stencil,this._initGLContext(),l&&(this._onFullscreenChange=function(){void 0!==document.fullscreen?a.isFullscreen=document.fullscreen:void 0!==document.mozFullScreen?a.isFullscreen=document.mozFullScreen:void 0!==document.webkitIsFullScreen?a.isFullscreen=document.webkitIsFullScreen:void 0!==document.msIsFullScreen&&(a.isFullscreen=document.msIsFullScreen),a.isFullscreen&&a._pointerLockRequested&&l&&(l.requestPointerLock=l.requestPointerLock||l.msRequestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock&&l.requestPointerLock())},document.addEventListener("fullscreenchange",this._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",this._onFullscreenChange,!1),this._onPointerLockChange=function(){a.isPointerLock=document.mozPointerLockElement===l||document.webkitPointerLockElement===l||document.msPointerLockElement===l||document.pointerLockElement===l},document.addEventListener("pointerlockchange",this._onPointerLockChange,!1),document.addEventListener("mspointerlockchange",this._onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this._onPointerLockChange,!1),document.addEventListener("webkitpointerlockchange",this._onPointerLockChange,!1),this._onVRDisplayPointerRestricted=function(){l&&l.requestPointerLock()},this._onVRDisplayPointerUnrestricted=function(){document.exitPointerLock()},window.addEventListener("vrdisplaypointerrestricted",this._onVRDisplayPointerRestricted,!1),window.addEventListener("vrdisplaypointerunrestricted",this._onVRDisplayPointerUnrestricted,!1)),n.audioEngine&&t.AudioEngine&&!r.audioEngine&&(r.audioEngine=new t.AudioEngine);for(var x=0;x<this._caps.maxVertexAttribs;x++)this._currentBufferPointers[x]=new s;this._linkTrackers(this._firstBoundInternalTextureTracker,this._lastBoundInternalTextureTracker),n.autoEnableWebVR&&this.initWebVR(),this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t.Tools.Log("Babylon.js engine (v"+r.Version+") launched"),this.enableOfflineSupport=void 0!==t.Database}}return Object.defineProperty(r,"LastCreatedEngine",{get:function(){return 0===r.Instances.length?null:r.Instances[r.Instances.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LastCreatedScene",{get:function(){var t=r.LastCreatedEngine;return t?0===t.scenes.length?null:t.scenes[t.scenes.length-1]:null},enumerable:!0,configurable:!0}),r.MarkAllMaterialsAsDirty=function(t,e){for(var i=0;i<r.Instances.length;i++)for(var n=r.Instances[i],o=0;o<n.scenes.length;o++)n.scenes[o].markAllMaterialsAsDirty(t,e)},Object.defineProperty(r,"NEVER",{get:function(){return r._NEVER},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALWAYS",{get:function(){return r._ALWAYS},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LESS",{get:function(){return r._LESS},enumerable:!0,configurable:!0}),Object.defineProperty(r,"EQUAL",{get:function(){return r._EQUAL},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LEQUAL",{get:function(){return r._LEQUAL},enumerable:!0,configurable:!0}),Object.defineProperty(r,"GREATER",{get:function(){return r._GREATER},enumerable:!0,configurable:!0}),Object.defineProperty(r,"GEQUAL",{get:function(){return r._GEQUAL},enumerable:!0,configurable:!0}),Object.defineProperty(r,"NOTEQUAL",{get:function(){return r._NOTEQUAL},enumerable:!0,configurable:!0}),Object.defineProperty(r,"KEEP",{get:function(){return r._KEEP},enumerable:!0,configurable:!0}),Object.defineProperty(r,"REPLACE",{get:function(){return r._REPLACE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"INCR",{get:function(){return r._INCR},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DECR",{get:function(){return r._DECR},enumerable:!0,configurable:!0}),Object.defineProperty(r,"INVERT",{get:function(){return r._INVERT},enumerable:!0,configurable:!0}),Object.defineProperty(r,"INCR_WRAP",{get:function(){return r._INCR_WRAP},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DECR_WRAP",{get:function(){return r._DECR_WRAP},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_DISABLE",{get:function(){return r._ALPHA_DISABLE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_ONEONE",{get:function(){return r._ALPHA_ONEONE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_ADD",{get:function(){return r._ALPHA_ADD},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_COMBINE",{get:function(){return r._ALPHA_COMBINE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_SUBTRACT",{get:function(){return r._ALPHA_SUBTRACT},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_MULTIPLY",{get:function(){return r._ALPHA_MULTIPLY},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_MAXIMIZED",{get:function(){return r._ALPHA_MAXIMIZED},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_PREMULTIPLIED",{get:function(){return r._ALPHA_PREMULTIPLIED},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_PREMULTIPLIED_PORTERDUFF",{get:function(){return r._ALPHA_PREMULTIPLIED_PORTERDUFF},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_INTERPOLATE",{get:function(){return r._ALPHA_INTERPOLATE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ALPHA_SCREENMODE",{get:function(){return r._ALPHA_SCREENMODE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DELAYLOADSTATE_NONE",{get:function(){return r._DELAYLOADSTATE_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DELAYLOADSTATE_LOADED",{get:function(){return r._DELAYLOADSTATE_LOADED},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DELAYLOADSTATE_LOADING",{get:function(){return r._DELAYLOADSTATE_LOADING},enumerable:!0,configurable:!0}),Object.defineProperty(r,"DELAYLOADSTATE_NOTLOADED",{get:function(){return r._DELAYLOADSTATE_NOTLOADED},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTUREFORMAT_ALPHA",{get:function(){return r._TEXTUREFORMAT_ALPHA},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTUREFORMAT_LUMINANCE",{get:function(){return r._TEXTUREFORMAT_LUMINANCE},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTUREFORMAT_LUMINANCE_ALPHA",{get:function(){return r._TEXTUREFORMAT_LUMINANCE_ALPHA},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTUREFORMAT_RGB",{get:function(){return r._TEXTUREFORMAT_RGB},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTUREFORMAT_RGBA",{get:function(){return r._TEXTUREFORMAT_RGBA},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTURETYPE_UNSIGNED_INT",{get:function(){return r._TEXTURETYPE_UNSIGNED_INT},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTURETYPE_FLOAT",{get:function(){return r._TEXTURETYPE_FLOAT},enumerable:!0,configurable:!0}),Object.defineProperty(r,"TEXTURETYPE_HALF_FLOAT",{get:function(){return r._TEXTURETYPE_HALF_FLOAT},enumerable:!0,configurable:!0}),Object.defineProperty(r,"SCALEMODE_FLOOR",{get:function(){return r._SCALEMODE_FLOOR},enumerable:!0,configurable:!0}),Object.defineProperty(r,"SCALEMODE_NEAREST",{get:function(){return r._SCALEMODE_NEAREST},enumerable:!0,configurable:!0}),Object.defineProperty(r,"SCALEMODE_CEILING",{get:function(){return r._SCALEMODE_CEILING},enumerable:!0,configurable:!0}),Object.defineProperty(r,"Version",{get:function(){return"3.2.0-alpha7"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isInVRExclusivePointerMode",{get:function(){return this._vrExclusivePointerMode},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"supportsUniformBuffers",{get:function(){return this.webGLVersion>1&&!this.disableUniformBuffers},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"needPOTTextures",{get:function(){return this._webGLVersion<2||this.forcePOTTextures},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"badOS",{get:function(){return this._badOS},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"badDesktopOS",{get:function(){return this._badDesktopOS},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"performanceMonitor",{get:function(){return this._performanceMonitor},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"texturesSupported",{get:function(){return this._texturesSupported},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textureFormatInUse",{get:function(){return this._textureFormatInUse},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentViewport",{get:function(){return this._cachedViewport},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emptyTexture",{get:function(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,r.TEXTUREFORMAT_RGBA,!1,!1,t.Texture.NEAREST_SAMPLINGMODE)),this._emptyTexture},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emptyTexture3D",{get:function(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,r.TEXTUREFORMAT_RGBA,!1,!1,t.Texture.NEAREST_SAMPLINGMODE)),this._emptyTexture3D},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emptyCubeTexture",{get:function(){if(!this._emptyCubeTexture){var e=new Uint8Array(4),i=[e,e,e,e,e,e];this._emptyCubeTexture=this.createRawCubeTexture(i,1,r.TEXTUREFORMAT_RGBA,r.TEXTURETYPE_UNSIGNED_INT,!1,!1,t.Texture.NEAREST_SAMPLINGMODE)}return this._emptyCubeTexture},enumerable:!0,configurable:!0}),r.prototype._rebuildInternalTextures=function(){for(var t=0,e=this._internalTexturesCache.slice();t<e.length;t++)e[t]._rebuild()},r.prototype._rebuildEffects=function(){for(var e in this._compiledEffects)this._compiledEffects[e]._prepareEffect();t.Effect.ResetCache()},r.prototype._rebuildBuffers=function(){for(var t=0,e=this.scenes;t<e.length;t++){var i=e[t];i.resetCachedMaterial(),i._rebuildGeometries(),i._rebuildTextures()}for(var n=0,r=this._uniformBuffers;n<r.length;n++)r[n]._rebuild()},r.prototype._initGLContext=function(){this._caps=new c,this._caps.maxTexturesImageUnits=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),this._caps.maxCombinedTexturesImageUnits=this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._caps.maxVertexTextureImageUnits=this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._caps.maxTextureSize=this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),this._caps.maxCubemapTextureSize=this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),this._caps.maxRenderTextureSize=this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),this._caps.maxVertexAttribs=this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),this._caps.maxVaryingVectors=this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),this._caps.maxFragmentUniformVectors=this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),this._caps.maxVertexUniformVectors=this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),this._glVersion=this._gl.getParameter(this._gl.VERSION);var t=this._gl.getExtension("WEBGL_debug_renderer_info");if(null!=t&&(this._glRenderer=this._gl.getParameter(t.UNMASKED_RENDERER_WEBGL),this._glVendor=this._gl.getParameter(t.UNMASKED_VENDOR_WEBGL)),this._glVendor||(this._glVendor="Unknown vendor"),this._glRenderer||(this._glRenderer="Unknown renderer"),this._gl.HALF_FLOAT_OES=36193,34842!==this._gl.RGBA16F&&(this._gl.RGBA16F=34842),34836!==this._gl.RGBA32F&&(this._gl.RGBA32F=34836),35056!==this._gl.DEPTH24_STENCIL8&&(this._gl.DEPTH24_STENCIL8=35056),this._caps.standardDerivatives=this._webGLVersion>1||null!==this._gl.getExtension("OES_standard_derivatives"),this._caps.astc=this._gl.getExtension("WEBGL_compressed_texture_astc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"),this._caps.s3tc=this._gl.getExtension("WEBGL_compressed_texture_s3tc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),this._caps.pvrtc=this._gl.getExtension("WEBGL_compressed_texture_pvrtc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this._caps.etc1=this._gl.getExtension("WEBGL_compressed_texture_etc1")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),this._caps.etc2=this._gl.getExtension("WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBGL_compressed_texture_es3_0"),this._caps.textureAnisotropicFilterExtension=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"),this._caps.maxAnisotropy=this._caps.textureAnisotropicFilterExtension?this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this._caps.uintIndices=this._webGLVersion>1||null!==this._gl.getExtension("OES_element_index_uint"),this._caps.fragmentDepthSupported=this._webGLVersion>1||null!==this._gl.getExtension("EXT_frag_depth"),this._caps.highPrecisionShaderSupported=!0,this._caps.timerQuery=this._gl.getExtension("EXT_disjoint_timer_query_webgl2")||this._gl.getExtension("EXT_disjoint_timer_query"),this._caps.timerQuery&&(1===this._webGLVersion&&(this._gl.getQuery=this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)),this._caps.canUseTimestampForTimerQuery=this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT,this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)>0),this._caps.colorBufferFloat=this._webGLVersion>1&&this._gl.getExtension("EXT_color_buffer_float"),this._caps.textureFloat=this._webGLVersion>1||this._gl.getExtension("OES_texture_float"),this._caps.textureFloatLinearFiltering=this._caps.textureFloat&&this._gl.getExtension("OES_texture_float_linear"),this._caps.textureFloatRender=this._caps.textureFloat&&this._canRenderToFloatFramebuffer(),this._caps.textureHalfFloat=this._webGLVersion>1||this._gl.getExtension("OES_texture_half_float"),this._caps.textureHalfFloatLinearFiltering=this._webGLVersion>1||this._caps.textureHalfFloat&&this._gl.getExtension("OES_texture_half_float_linear"),this._webGLVersion>1&&(this._gl.HALF_FLOAT_OES=5131),this._caps.textureHalfFloatRender=this._caps.textureHalfFloat&&this._canRenderToHalfFloatFramebuffer(),this._caps.textureLOD=this._webGLVersion>1||this._gl.getExtension("EXT_shader_texture_lod"),this._webGLVersion>1)this._caps.drawBuffersExtension=!0;else{var e=this._gl.getExtension("WEBGL_draw_buffers");if(null!==e){this._caps.drawBuffersExtension=!0,this._gl.drawBuffers=e.drawBuffersWEBGL.bind(e),this._gl.DRAW_FRAMEBUFFER=this._gl.FRAMEBUFFER;for(var i=0;i<16;i++)this._gl["COLOR_ATTACHMENT"+i+"_WEBGL"]=e["COLOR_ATTACHMENT"+i+"_WEBGL"]}else this._caps.drawBuffersExtension=!1}if(this._webGLVersion>1?this._caps.depthTextureExtension=!0:null!=this._gl.getExtension("WEBGL_depth_texture")&&(this._caps.depthTextureExtension=!0),this._webGLVersion>1)this._caps.vertexArrayObject=!0;else{var n=this._gl.getExtension("OES_vertex_array_object");null!=n?(this._caps.vertexArrayObject=!0,this._gl.createVertexArray=n.createVertexArrayOES.bind(n),this._gl.bindVertexArray=n.bindVertexArrayOES.bind(n),this._gl.deleteVertexArray=n.deleteVertexArrayOES.bind(n)):this._caps.vertexArrayObject=!1}if(this._webGLVersion>1)this._caps.instancedArrays=!0;else{var r=this._gl.getExtension("ANGLE_instanced_arrays");null!=r?(this._caps.instancedArrays=!0,this._gl.drawArraysInstanced=r.drawArraysInstancedANGLE.bind(r),this._gl.drawElementsInstanced=r.drawElementsInstancedANGLE.bind(r),this._gl.vertexAttribDivisor=r.vertexAttribDivisorANGLE.bind(r)):this._caps.instancedArrays=!1}if(this._caps.astc&&this.texturesSupported.push("-astc.ktx"),this._caps.s3tc&&this.texturesSupported.push("-dxt.ktx"),this._caps.pvrtc&&this.texturesSupported.push("-pvrtc.ktx"),this._caps.etc2&&this.texturesSupported.push("-etc2.ktx"),this._caps.etc1&&this.texturesSupported.push("-etc1.ktx"),this._gl.getShaderPrecisionFormat){var o=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);o&&(this._caps.highPrecisionShaderSupported=0!==o.precision)}this.setDepthBuffer(!0),this.setDepthFunctionToLessOrEqual(),this.setDepthWrite(!0),this._maxSimultaneousTextures=this._caps.maxCombinedTexturesImageUnits;for(var s=0;s<this._maxSimultaneousTextures;s++)this._nextFreeTextureSlots.push(s)},Object.defineProperty(r.prototype,"webGLVersion",{get:function(){return this._webGLVersion},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isStencilEnable",{get:function(){return this._isStencilEnable},enumerable:!0,configurable:!0}),r.prototype._prepareWorkingCanvas=function(){if(!this._workingCanvas){this._workingCanvas=document.createElement("canvas");var t=this._workingCanvas.getContext("2d");t&&(this._workingContext=t)}},r.prototype.resetTextureCache=function(){for(var t in this._boundTexturesCache){var e=this._boundTexturesCache[t];e&&this._removeDesignatedSlot(e),this._boundTexturesCache[t]=null}if(!this.disableTextureBindingOptimization){this._nextFreeTextureSlots=[];for(var i=0;i<this._maxSimultaneousTextures;i++)this._nextFreeTextureSlots.push(i)}this._currentTextureChannel=-1},r.prototype.isDeterministicLockStep=function(){return this._deterministicLockstep},r.prototype.getLockstepMaxSteps=function(){return this._lockstepMaxSteps},r.prototype.getGlInfo=function(){return{vendor:this._glVendor,renderer:this._glRenderer,version:this._glVersion}},r.prototype.getAspectRatio=function(t,e){void 0===e&&(e=!1);var i=t.viewport;return this.getRenderWidth(e)*i.width/(this.getRenderHeight(e)*i.height)},r.prototype.getRenderWidth=function(t){return void 0===t&&(t=!1),!t&&this._currentRenderTarget?this._currentRenderTarget.width:this._gl.drawingBufferWidth},r.prototype.getRenderHeight=function(t){return void 0===t&&(t=!1),!t&&this._currentRenderTarget?this._currentRenderTarget.height:this._gl.drawingBufferHeight},r.prototype.getRenderingCanvas=function(){return this._renderingCanvas},r.prototype.getRenderingCanvasClientRect=function(){return this._renderingCanvas?this._renderingCanvas.getBoundingClientRect():null},r.prototype.setHardwareScalingLevel=function(t){this._hardwareScalingLevel=t,this.resize()},r.prototype.getHardwareScalingLevel=function(){return this._hardwareScalingLevel},r.prototype.getLoadedTexturesCache=function(){return this._internalTexturesCache},r.prototype.getCaps=function(){return this._caps},Object.defineProperty(r.prototype,"drawCalls",{get:function(){return t.Tools.Warn("drawCalls is deprecated. Please use SceneInstrumentation class"),0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"drawCallsPerfCounter",{get:function(){return t.Tools.Warn("drawCallsPerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),r.prototype.getDepthFunction=function(){return this._depthCullingState.depthFunc},r.prototype.setDepthFunction=function(t){this._depthCullingState.depthFunc=t},r.prototype.setDepthFunctionToGreater=function(){this._depthCullingState.depthFunc=this._gl.GREATER},r.prototype.setDepthFunctionToGreaterOrEqual=function(){this._depthCullingState.depthFunc=this._gl.GEQUAL},r.prototype.setDepthFunctionToLess=function(){this._depthCullingState.depthFunc=this._gl.LESS},r.prototype.setDepthFunctionToLessOrEqual=function(){this._depthCullingState.depthFunc=this._gl.LEQUAL},r.prototype.getStencilBuffer=function(){return this._stencilState.stencilTest},r.prototype.setStencilBuffer=function(t){this._stencilState.stencilTest=t},r.prototype.getStencilMask=function(){return this._stencilState.stencilMask},r.prototype.setStencilMask=function(t){this._stencilState.stencilMask=t},r.prototype.getStencilFunction=function(){return this._stencilState.stencilFunc},r.prototype.getStencilFunctionReference=function(){return this._stencilState.stencilFuncRef},r.prototype.getStencilFunctionMask=function(){return this._stencilState.stencilFuncMask},r.prototype.setStencilFunction=function(t){this._stencilState.stencilFunc=t},r.prototype.setStencilFunctionReference=function(t){this._stencilState.stencilFuncRef=t},r.prototype.setStencilFunctionMask=function(t){this._stencilState.stencilFuncMask=t},r.prototype.getStencilOperationFail=function(){return this._stencilState.stencilOpStencilFail},r.prototype.getStencilOperationDepthFail=function(){return this._stencilState.stencilOpDepthFail},r.prototype.getStencilOperationPass=function(){return this._stencilState.stencilOpStencilDepthPass},r.prototype.setStencilOperationFail=function(t){this._stencilState.stencilOpStencilFail=t},r.prototype.setStencilOperationDepthFail=function(t){this._stencilState.stencilOpDepthFail=t},r.prototype.setStencilOperationPass=function(t){this._stencilState.stencilOpStencilDepthPass=t},r.prototype.setDitheringState=function(t){t?this._gl.enable(this._gl.DITHER):this._gl.disable(this._gl.DITHER)},r.prototype.setRasterizerState=function(t){t?this._gl.disable(this._gl.RASTERIZER_DISCARD):this._gl.enable(this._gl.RASTERIZER_DISCARD)},r.prototype.stopRenderLoop=function(t){if(t){var e=this._activeRenderLoops.indexOf(t);e>=0&&this._activeRenderLoops.splice(e,1)}else this._activeRenderLoops=[]},r.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;if(!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e){this.beginFrame();for(var i=0;i<this._activeRenderLoops.length;i++)(0,this._activeRenderLoops[i])();this.endFrame()}}if(this._activeRenderLoops.length>0){var n=null;this._vrDisplay&&this._vrDisplay.isPresenting&&(n=this._vrDisplay),this._frameHandler=t.Tools.QueueNewFrame(this._bindedRenderFunction,n)}else this._renderingQueueLaunched=!1},r.prototype.runRenderLoop=function(e){-1===this._activeRenderLoops.indexOf(e)&&(this._activeRenderLoops.push(e),this._renderingQueueLaunched||(this._renderingQueueLaunched=!0,this._bindedRenderFunction=this._renderLoop.bind(this),this._frameHandler=t.Tools.QueueNewFrame(this._bindedRenderFunction)))},r.prototype.switchFullscreen=function(e){this.isFullscreen?t.Tools.ExitFullscreen():(this._pointerLockRequested=e,this._renderingCanvas&&t.Tools.RequestFullscreen(this._renderingCanvas))},r.prototype.clear=function(t,e,i,n){void 0===n&&(n=!1),this.applyStates();var r=0;e&&t&&(this._gl.clearColor(t.r,t.g,t.b,void 0!==t.a?t.a:1),r|=this._gl.COLOR_BUFFER_BIT),i&&(this._gl.clearDepth(1),r|=this._gl.DEPTH_BUFFER_BIT),n&&(this._gl.clearStencil(0),r|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(r)},r.prototype.scissorClear=function(t,e,i,n,r){var o=this._gl,s=o.getParameter(o.SCISSOR_TEST),a=o.getParameter(o.SCISSOR_BOX);o.enable(o.SCISSOR_TEST),o.scissor(t,e,i,n),this.clear(r,!0,!0,!0),o.scissor(a[0],a[1],a[2],a[3]),!0===s?o.enable(o.SCISSOR_TEST):o.disable(o.SCISSOR_TEST)},r.prototype.setViewport=function(t,e,i){var n=e||this.getRenderWidth(),r=i||this.getRenderHeight(),o=t.x||0,s=t.y||0;this._cachedViewport=t,this._gl.viewport(o*n,s*r,n*t.width,r*t.height)},r.prototype.setDirectViewport=function(t,e,i,n){var r=this._cachedViewport;return this._cachedViewport=null,this._gl.viewport(t,e,i,n),r},r.prototype.beginFrame=function(){this.onBeginFrameObservable.notifyObservers(this),this._measureFps()},r.prototype.endFrame=function(){this._badOS&&this.flushFramebuffer(),this._vrDisplay&&this._vrDisplay.isPresenting&&this._vrDisplay.submitFrame(),this.onEndFrameObservable.notifyObservers(this)},r.prototype.resize=function(){if(!this._vrDisplay||!this._vrDisplay.isPresenting){var t=this._renderingCanvas?this._renderingCanvas.clientWidth:window.innerWidth,e=this._renderingCanvas?this._renderingCanvas.clientHeight:window.innerHeight;this.setSize(t/this._hardwareScalingLevel,e/this._hardwareScalingLevel)}},r.prototype.setSize=function(t,e){if(this._renderingCanvas&&(this._renderingCanvas.width!==t||this._renderingCanvas.height!==e)){this._renderingCanvas.width=t,this._renderingCanvas.height=e;for(var i=0;i<this.scenes.length;i++)for(var n=this.scenes[i],r=0;r<n.cameras.length;r++){n.cameras[r]._currentRenderId=0}this.onResizeObservable.hasObservers&&this.onResizeObservable.notifyObservers(this)}},r.prototype.isVRDevicePresent=function(){return!!this._vrDisplay},r.prototype.getVRDevice=function(){return this._vrDisplay},r.prototype.initWebVR=function(){var e=this,i=function(){var t={vrDisplay:e._vrDisplay,vrSupported:e._vrSupported};e.onVRDisplayChangedObservable.notifyObservers(t)};return this._onVrDisplayConnect||(this._onVrDisplayConnect=function(t){e._vrDisplay=t.display,i()},this._onVrDisplayDisconnect=function(){e._vrDisplay.cancelAnimationFrame(e._frameHandler),e._vrDisplay=void 0,e._frameHandler=t.Tools.QueueNewFrame(e._bindedRenderFunction),i()},this._onVrDisplayPresentChange=function(){e._vrExclusivePointerMode=e._vrDisplay&&e._vrDisplay.isPresenting},window.addEventListener("vrdisplayconnect",this._onVrDisplayConnect),window.addEventListener("vrdisplaydisconnect",this._onVrDisplayDisconnect),window.addEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange)),this._getVRDisplays(i),this.onVRDisplayChangedObservable},r.prototype.enableVR=function(){var t=this;if(this._vrDisplay&&!this._vrDisplay.isPresenting){this.onVRRequestPresentStart.notifyObservers(this),this._vrDisplay.requestPresent([{source:this.getRenderingCanvas()}]).then(function(){t.onVRRequestPresentComplete.notifyObservers(!0),t._onVRFullScreenTriggered()}).catch(function(){t.onVRRequestPresentComplete.notifyObservers(!1)})}},r.prototype.disableVR=function(){this._vrDisplay&&this._vrDisplay.isPresenting&&this._vrDisplay.exitPresent().then(this._onVRFullScreenTriggered).catch(this._onVRFullScreenTriggered)},r.prototype._getVRDisplays=function(t){var e=this;navigator.getVRDisplays?navigator.getVRDisplays().then(function(t){return e._vrSupported=!0,e._vrDisplay=t[0]}).then(t).catch(function(i){e._vrSupported=!1,t()}):(this._vrDisplay=void 0,this._vrSupported=!1,t())},r.prototype.bindFramebuffer=function(t,e,i,n,r){this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=t,this.bindUnboundFramebuffer(t._MSAAFramebuffer?t._MSAAFramebuffer:t._framebuffer);var o=this._gl;t.isCube&&(void 0===e&&(e=0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+e,t._webGLTexture,0)),this._cachedViewport&&!r?this.setViewport(this._cachedViewport,i,n):o.viewport(0,0,i||t.width,n||t.height),this.wipeCaches()},r.prototype.bindUnboundFramebuffer=function(t){this._currentFramebuffer!==t&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,t),this._currentFramebuffer=t)},r.prototype.unBindFramebuffer=function(t,e,i){void 0===e&&(e=!1),this._currentRenderTarget=null;var n=this._gl;t._MSAAFramebuffer&&(n.bindFramebuffer(n.READ_FRAMEBUFFER,t._MSAAFramebuffer),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,t._framebuffer),n.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,n.COLOR_BUFFER_BIT,n.NEAREST)),!t.generateMipMaps||e||t.isCube||(this._bindTextureDirectly(n.TEXTURE_2D,t,!0),n.generateMipmap(n.TEXTURE_2D),this._bindTextureDirectly(n.TEXTURE_2D,null)),i&&(t._MSAAFramebuffer&&this.bindUnboundFramebuffer(t._framebuffer),i()),this.bindUnboundFramebuffer(null)},r.prototype.unBindMultiColorAttachmentFramebuffer=function(t,e,i){void 0===e&&(e=!1),this._currentRenderTarget=null;var n=this._gl;if(t[0]._MSAAFramebuffer){n.bindFramebuffer(n.READ_FRAMEBUFFER,t[0]._MSAAFramebuffer),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,t[0]._framebuffer);var r=t[0]._attachments;r||(r=new Array(t.length),t[0]._attachments=r);for(var o=0;o<t.length;o++){for(var s=t[o],a=0;a<r.length;a++)r[a]=n.NONE;r[o]=n[this.webGLVersion>1?"COLOR_ATTACHMENT"+o:"COLOR_ATTACHMENT"+o+"_WEBGL"],n.readBuffer(r[o]),n.drawBuffers(r),n.blitFramebuffer(0,0,s.width,s.height,0,0,s.width,s.height,n.COLOR_BUFFER_BIT,n.NEAREST)}for(o=0;o<r.length;o++)r[o]=n[this.webGLVersion>1?"COLOR_ATTACHMENT"+o:"COLOR_ATTACHMENT"+o+"_WEBGL"];n.drawBuffers(r)}for(o=0;o<t.length;o++){!(s=t[o]).generateMipMaps||e||s.isCube||(this._bindTextureDirectly(n.TEXTURE_2D,s),n.generateMipmap(n.TEXTURE_2D),this._bindTextureDirectly(n.TEXTURE_2D,null))}i&&(t[0]._MSAAFramebuffer&&this.bindUnboundFramebuffer(t[0]._framebuffer),i()),this.bindUnboundFramebuffer(null)},r.prototype.generateMipMapsForCubemap=function(t){if(t.generateMipMaps){var e=this._gl;this._bindTextureDirectly(e.TEXTURE_CUBE_MAP,t,!0),e.generateMipmap(e.TEXTURE_CUBE_MAP),this._bindTextureDirectly(e.TEXTURE_CUBE_MAP,null)}},r.prototype.flushFramebuffer=function(){this._gl.flush()},r.prototype.restoreDefaultFramebuffer=function(){this._currentRenderTarget?this.unBindFramebuffer(this._currentRenderTarget):this.bindUnboundFramebuffer(null),this._cachedViewport&&this.setViewport(this._cachedViewport),this.wipeCaches()},r.prototype.createUniformBuffer=function(t){var e=this._gl.createBuffer();if(!e)throw new Error("Unable to create uniform buffer");return this.bindUniformBuffer(e),t instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,t,this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(t),this._gl.STATIC_DRAW),this.bindUniformBuffer(null),e.references=1,e},r.prototype.createDynamicUniformBuffer=function(t){var e=this._gl.createBuffer();if(!e)throw new Error("Unable to create dynamic uniform buffer");return this.bindUniformBuffer(e),t instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,t,this._gl.DYNAMIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(t),this._gl.DYNAMIC_DRAW),this.bindUniformBuffer(null),e.references=1,e},r.prototype.updateUniformBuffer=function(t,e,i,n){this.bindUniformBuffer(t),void 0===i&&(i=0),void 0===n?e instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,i,e):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,i,new Float32Array(e)):e instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,e.subarray(i,i+n)):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,new Float32Array(e).subarray(i,i+n)),this.bindUniformBuffer(null)},r.prototype._resetVertexBufferBinding=function(){this.bindArrayBuffer(null),this._cachedVertexBuffers=null},r.prototype.createVertexBuffer=function(t){var e=this._gl.createBuffer();if(!e)throw new Error("Unable to create vertex buffer");return this.bindArrayBuffer(e),t instanceof Float32Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(t),this._gl.STATIC_DRAW),this._resetVertexBufferBinding(),e.references=1,e},r.prototype.createDynamicVertexBuffer=function(t){var e=this._gl.createBuffer();if(!e)throw new Error("Unable to create dynamic vertex buffer");return this.bindArrayBuffer(e),t instanceof Float32Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.DYNAMIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(t),this._gl.DYNAMIC_DRAW),this._resetVertexBufferBinding(),e.references=1,e},r.prototype.updateDynamicIndexBuffer=function(t,e,i){var n;void 0===i&&(i=0),this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER]=null,this.bindIndexBuffer(t),n=e instanceof Uint16Array||e instanceof Uint32Array?e:t.is32Bits?new Uint32Array(e):new Uint16Array(e),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,n,this._gl.DYNAMIC_DRAW),this._resetIndexBufferBinding()},r.prototype.updateDynamicVertexBuffer=function(t,e,i,n){this.bindArrayBuffer(t),void 0===i&&(i=0),void 0===n?e instanceof Float32Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,i,e):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,i,new Float32Array(e)):e instanceof Float32Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e.subarray(i,i+n)):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,new Float32Array(e).subarray(i,i+n)),this._resetVertexBufferBinding()},r.prototype._resetIndexBufferBinding=function(){this.bindIndexBuffer(null),this._cachedIndexBuffer=null},r.prototype.createIndexBuffer=function(t,e){var i=this._gl.createBuffer();if(!i)throw new Error("Unable to create index buffer");this.bindIndexBuffer(i);var n,r=!1;if(t instanceof Uint16Array)n=t;else if(this._caps.uintIndices)if(t instanceof Uint32Array)n=t,r=!0;else{for(var o=0;o<t.length;o++)if(t[o]>65535){r=!0;break}n=r?new Uint32Array(t):new Uint16Array(t)}else n=new Uint16Array(t);return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,n,e?this._gl.DYNAMIC_DRAW:this._gl.STATIC_DRAW),this._resetIndexBufferBinding(),i.references=1,i.is32Bits=r,i},r.prototype.bindArrayBuffer=function(t){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(t,this._gl.ARRAY_BUFFER)},r.prototype.bindUniformBuffer=function(t){this._gl.bindBuffer(this._gl.UNIFORM_BUFFER,t)},r.prototype.bindUniformBufferBase=function(t,e){this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER,e,t)},r.prototype.bindUniformBlock=function(t,e,i){var n=this._gl.getUniformBlockIndex(t,e);this._gl.uniformBlockBinding(t,n,i)},r.prototype.bindIndexBuffer=function(t){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(t,this._gl.ELEMENT_ARRAY_BUFFER)},r.prototype.bindBuffer=function(t,e){(this._vaoRecordInProgress||this._currentBoundBuffer[e]!==t)&&(this._gl.bindBuffer(e,t),this._currentBoundBuffer[e]=t)},r.prototype.updateArrayBuffer=function(t){this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t)},r.prototype.vertexAttribPointer=function(t,e,i,n,r,o,s){var a=this._currentBufferPointers[e],l=!1;a.active?(a.buffer!==t&&(a.buffer=t,l=!0),a.size!==i&&(a.size=i,l=!0),a.type!==n&&(a.type=n,l=!0),a.normalized!==r&&(a.normalized=r,l=!0),a.stride!==o&&(a.stride=o,l=!0),a.offset!==s&&(a.offset=s,l=!0)):(l=!0,a.active=!0,a.index=e,a.size=i,a.type=n,a.normalized=r,a.stride=o,a.offset=s,a.buffer=t),(l||this._vaoRecordInProgress)&&(this.bindArrayBuffer(t),this._gl.vertexAttribPointer(e,i,n,r,o,s))},r.prototype._bindIndexBufferWithCache=function(t){null!=t&&this._cachedIndexBuffer!==t&&(this._cachedIndexBuffer=t,this.bindIndexBuffer(t),this._uintIndicesCurrentlySet=t.is32Bits)},r.prototype._bindVertexBuffersAttributes=function(t,e){var i=e.getAttributesNames();this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var n=0;n<i.length;n++){var r=e.getAttributeLocation(n);if(r>=0){var o=t[i[n]];if(!o)continue;this._gl.enableVertexAttribArray(r),this._vaoRecordInProgress||(this._vertexAttribArraysEnabled[r]=!0);var s=o.getBuffer();s&&(this.vertexAttribPointer(s,r,o.getSize(),this._gl.FLOAT,!1,4*o.getStrideSize(),4*o.getOffset()),o.getIsInstanced()&&(this._gl.vertexAttribDivisor(r,o.getInstanceDivisor()),this._vaoRecordInProgress||(this._currentInstanceLocations.push(r),this._currentInstanceBuffers.push(s))))}}},r.prototype.recordVertexArrayObject=function(t,e,i){var n=this._gl.createVertexArray();return this._vaoRecordInProgress=!0,this._gl.bindVertexArray(n),this._mustWipeVertexAttributes=!0,this._bindVertexBuffersAttributes(t,i),this.bindIndexBuffer(e),this._vaoRecordInProgress=!1,this._gl.bindVertexArray(null),n},r.prototype.bindVertexArrayObject=function(t,e){this._cachedVertexArrayObject!==t&&(this._cachedVertexArrayObject=t,this._gl.bindVertexArray(t),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._uintIndicesCurrentlySet=null!=e&&e.is32Bits,this._mustWipeVertexAttributes=!0)},r.prototype.bindBuffersDirectly=function(t,e,i,n,r){if(this._cachedVertexBuffers!==t||this._cachedEffectForVertexBuffers!==r){this._cachedVertexBuffers=t,this._cachedEffectForVertexBuffers=r;var o=r.getAttributesCount();this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var s=0,a=0;a<o;a++)if(a<i.length){var l=r.getAttributeLocation(a);l>=0&&(this._gl.enableVertexAttribArray(l),this._vertexAttribArraysEnabled[l]=!0,this.vertexAttribPointer(t,l,i[a],this._gl.FLOAT,!1,n,s)),s+=4*i[a]}}this._bindIndexBufferWithCache(e)},r.prototype._unbindVertexArrayObject=function(){this._cachedVertexArrayObject&&(this._cachedVertexArrayObject=null,this._gl.bindVertexArray(null))},r.prototype.bindBuffers=function(t,e,i){this._cachedVertexBuffers===t&&this._cachedEffectForVertexBuffers===i||(this._cachedVertexBuffers=t,this._cachedEffectForVertexBuffers=i,this._bindVertexBuffersAttributes(t,i)),this._bindIndexBufferWithCache(e)},r.prototype.unbindInstanceAttributes=function(){for(var t,e=0,i=this._currentInstanceLocations.length;e<i;e++){var n=this._currentInstanceBuffers[e];t!=n&&n.references&&(t=n,this.bindArrayBuffer(n));var r=this._currentInstanceLocations[e];this._gl.vertexAttribDivisor(r,0)}this._currentInstanceBuffers.length=0,this._currentInstanceLocations.length=0},r.prototype.releaseVertexArrayObject=function(t){this._gl.deleteVertexArray(t)},r.prototype._releaseBuffer=function(t){return 0==--t.references&&(this._gl.deleteBuffer(t),!0)},r.prototype.createInstancesBuffer=function(t){var e=this._gl.createBuffer();if(!e)throw new Error("Unable to create instance buffer");return e.capacity=t,this.bindArrayBuffer(e),this._gl.bufferData(this._gl.ARRAY_BUFFER,t,this._gl.DYNAMIC_DRAW),e},r.prototype.deleteInstancesBuffer=function(t){this._gl.deleteBuffer(t)},r.prototype.updateAndBindInstancesBuffer=function(t,e,i){if(this.bindArrayBuffer(t),e&&this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e),void 0!==i[0].index){for(var n=0,r=0;r<i.length;r++){n+=4*(o=i[r]).attributeSize}for(r=0;r<i.length;r++){var o=i[r];this._vertexAttribArraysEnabled[o.index]||(this._gl.enableVertexAttribArray(o.index),this._vertexAttribArraysEnabled[o.index]=!0),this.vertexAttribPointer(t,o.index,o.attributeSize,o.attribyteType||this._gl.FLOAT,o.normalized||!1,n,o.offset),this._gl.vertexAttribDivisor(o.index,1),this._currentInstanceLocations.push(o.index),this._currentInstanceBuffers.push(t)}}else for(var s=0;s<4;s++){var a=i[s];this._vertexAttribArraysEnabled[a]||(this._gl.enableVertexAttribArray(a),this._vertexAttribArraysEnabled[a]=!0),this.vertexAttribPointer(t,a,4,this._gl.FLOAT,!1,64,16*s),this._gl.vertexAttribDivisor(a,1),this._currentInstanceLocations.push(a),this._currentInstanceBuffers.push(t)}},r.prototype.applyStates=function(){this._depthCullingState.apply(this._gl),this._stencilState.apply(this._gl),this._alphaState.apply(this._gl)},r.prototype.draw=function(e,i,n,r){this.drawElementsType(e?t.Material.TriangleFillMode:t.Material.WireFrameFillMode,i,n,r)},r.prototype.drawPointClouds=function(e,i,n){this.drawArraysType(t.Material.PointFillMode,e,i,n)},r.prototype.drawUnIndexed=function(e,i,n,r){this.drawArraysType(e?t.Material.TriangleFillMode:t.Material.WireFrameFillMode,i,n,r)},r.prototype.drawElementsType=function(t,e,i,n){this.applyStates(),this._drawCalls.addCount(1,!1);var r=this.DrawMode(t),o=this._uintIndicesCurrentlySet?this._gl.UNSIGNED_INT:this._gl.UNSIGNED_SHORT,s=this._uintIndicesCurrentlySet?4:2;n?this._gl.drawElementsInstanced(r,i,o,e*s,n):this._gl.drawElements(r,i,o,e*s)},r.prototype.drawArraysType=function(t,e,i,n){this.applyStates(),this._drawCalls.addCount(1,!1);var r=this.DrawMode(t);n?this._gl.drawArraysInstanced(r,e,i,n):this._gl.drawArrays(r,e,i)},r.prototype.DrawMode=function(e){switch(e){case t.Material.TriangleFillMode:return this._gl.TRIANGLES;case t.Material.PointFillMode:return this._gl.POINTS;case t.Material.WireFrameFillMode:return this._gl.LINES;case t.Material.PointListDrawMode:return this._gl.POINTS;case t.Material.LineListDrawMode:return this._gl.LINES;case t.Material.LineLoopDrawMode:return this._gl.LINE_LOOP;case t.Material.LineStripDrawMode:return this._gl.LINE_STRIP;case t.Material.TriangleStripDrawMode:return this._gl.TRIANGLE_STRIP;case t.Material.TriangleFanDrawMode:return this._gl.TRIANGLE_FAN;default:return this._gl.TRIANGLES}},r.prototype._releaseEffect=function(t){this._compiledEffects[t._key]&&(delete this._compiledEffects[t._key],this._deleteProgram(t.getProgram()))},r.prototype._deleteProgram=function(t){t&&(t.__SPECTOR_rebuildProgram=null,t.transformFeedback&&(this.deleteTransformFeedback(t.transformFeedback),t.transformFeedback=null),this._gl.deleteProgram(t))},r.prototype.createEffect=function(e,i,n,r,o,s,a,l,c){var u=(e.vertexElement||e.vertex||e)+"+"+(e.fragmentElement||e.fragment||e)+"@"+(o||i.defines);if(this._compiledEffects[u]){var h=this._compiledEffects[u];return a&&h.isReady()&&a(h),h}var p=new t.Effect(e,i,n,r,this,o,s,a,l,c);return p._key=u,this._compiledEffects[u]=p,p},r.prototype.createEffectForParticles=function(t,e,i,n,r,o,s){return void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===n&&(n=""),this.createEffect({vertex:"particles",fragmentElement:t},["position","color","options"],["view","projection"].concat(e),["diffuseSampler"].concat(i),n,r,o,s)},r.prototype.createRawShaderProgram=function(t,e,n,r){void 0===r&&(r=null),n=n||this._gl;var o=i(n,t,"vertex"),s=i(n,e,"fragment");return this._createShaderProgram(o,s,n,r)},r.prototype.createShaderProgram=function(t,i,n,r,o){void 0===o&&(o=null),r=r||this._gl,this.onBeforeShaderCompilationObservable.notifyObservers(this);var s=this._webGLVersion>1?"#version 300 es\n":"",a=e(r,t,"vertex",n,s),l=e(r,i,"fragment",n,s),c=this._createShaderProgram(a,l,r,o);return this.onAfterShaderCompilationObservable.notifyObservers(this),c},r.prototype._createShaderProgram=function(t,e,i,n){void 0===n&&(n=null);var r=i.createProgram();if(!r)throw new Error("Unable to create program");if(i.attachShader(r,t),i.attachShader(r,e),this.webGLVersion>1&&n){var o=this.createTransformFeedback();this.bindTransformFeedback(o),this.setTranformFeedbackVaryings(r,n),r.transformFeedback=o}if(i.linkProgram(r),this.webGLVersion>1&&n&&this.bindTransformFeedback(null),!i.getProgramParameter(r,i.LINK_STATUS)){i.validateProgram(r);var s=i.getProgramInfoLog(r);if(s)throw new Error(s)}return i.deleteShader(t),i.deleteShader(e),r},r.prototype.getUniforms=function(t,e){for(var i=new Array,n=0;n<e.length;n++)i.push(this._gl.getUniformLocation(t,e[n]));return i},r.prototype.getAttributes=function(t,e){for(var i=[],n=0;n<e.length;n++)try{i.push(this._gl.getAttribLocation(t,e[n]))}catch(t){i.push(-1)}return i},r.prototype.enableEffect=function(t){t&&(this.bindSamplers(t),this._currentEffect=t,t.onBind&&t.onBind(t),t.onBindObservable.notifyObservers(t))},r.prototype.setIntArray=function(t,e){t&&this._gl.uniform1iv(t,e)},r.prototype.setIntArray2=function(t,e){t&&e.length%2==0&&this._gl.uniform2iv(t,e)},r.prototype.setIntArray3=function(t,e){t&&e.length%3==0&&this._gl.uniform3iv(t,e)},r.prototype.setIntArray4=function(t,e){t&&e.length%4==0&&this._gl.uniform4iv(t,e)},r.prototype.setFloatArray=function(t,e){t&&this._gl.uniform1fv(t,e)},r.prototype.setFloatArray2=function(t,e){t&&e.length%2==0&&this._gl.uniform2fv(t,e)},r.prototype.setFloatArray3=function(t,e){t&&e.length%3==0&&this._gl.uniform3fv(t,e)},r.prototype.setFloatArray4=function(t,e){t&&e.length%4==0&&this._gl.uniform4fv(t,e)},r.prototype.setArray=function(t,e){t&&this._gl.uniform1fv(t,e)},r.prototype.setArray2=function(t,e){t&&e.length%2==0&&this._gl.uniform2fv(t,e)},r.prototype.setArray3=function(t,e){t&&e.length%3==0&&this._gl.uniform3fv(t,e)},r.prototype.setArray4=function(t,e){t&&e.length%4==0&&this._gl.uniform4fv(t,e)},r.prototype.setMatrices=function(t,e){t&&this._gl.uniformMatrix4fv(t,!1,e)},r.prototype.setMatrix=function(t,e){t&&this._gl.uniformMatrix4fv(t,!1,e.toArray())},r.prototype.setMatrix3x3=function(t,e){t&&this._gl.uniformMatrix3fv(t,!1,e)},r.prototype.setMatrix2x2=function(t,e){t&&this._gl.uniformMatrix2fv(t,!1,e)},r.prototype.setInt=function(t,e){t&&this._gl.uniform1i(t,e)},r.prototype.setFloat=function(t,e){t&&this._gl.uniform1f(t,e)},r.prototype.setFloat2=function(t,e,i){t&&this._gl.uniform2f(t,e,i)},r.prototype.setFloat3=function(t,e,i,n){t&&this._gl.uniform3f(t,e,i,n)},r.prototype.setBool=function(t,e){t&&this._gl.uniform1i(t,e)},r.prototype.setFloat4=function(t,e,i,n,r){t&&this._gl.uniform4f(t,e,i,n,r)},r.prototype.setColor3=function(t,e){t&&this._gl.uniform3f(t,e.r,e.g,e.b)},r.prototype.setColor4=function(t,e,i){t&&this._gl.uniform4f(t,e.r,e.g,e.b,i)},r.prototype.setState=function(t,e,i,n){void 0===e&&(e=0),void 0===n&&(n=!1),(this._depthCullingState.cull!==t||i)&&(this._depthCullingState.cull=t);var r=this.cullBackFaces?this._gl.BACK:this._gl.FRONT;(this._depthCullingState.cullFace!==r||i)&&(this._depthCullingState.cullFace=r),this.setZOffset(e);var o=n?this._gl.CW:this._gl.CCW;(this._depthCullingState.frontFace!==o||i)&&(this._depthCullingState.frontFace=o)},r.prototype.setZOffset=function(t){this._depthCullingState.zOffset=t},r.prototype.getZOffset=function(){return this._depthCullingState.zOffset},r.prototype.setDepthBuffer=function(t){this._depthCullingState.depthTest=t},r.prototype.getDepthWrite=function(){return this._depthCullingState.depthMask},r.prototype.setDepthWrite=function(t){this._depthCullingState.depthMask=t},r.prototype.setColorWrite=function(t){this._gl.colorMask(t,t,t,t),this._colorWrite=t},r.prototype.getColorWrite=function(){return this._colorWrite},r.prototype.setAlphaConstants=function(t,e,i,n){this._alphaState.setAlphaBlendConstants(t,e,i,n)},r.prototype.setAlphaMode=function(t,e){if(void 0===e&&(e=!1),this._alphaMode!==t){switch(t){case r.ALPHA_DISABLE:this._alphaState.alphaBlend=!1;break;case r.ALPHA_PREMULTIPLIED:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_PREMULTIPLIED_PORTERDUFF:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case r.ALPHA_COMBINE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_ONEONE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_ADD:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_SUBTRACT:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_MULTIPLY:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR,this._gl.ZERO,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_MAXIMIZED:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case r.ALPHA_INTERPOLATE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR,this._gl.CONSTANT_ALPHA,this._gl.ONE_MINUS_CONSTANT_ALPHA),this._alphaState.alphaBlend=!0;break;case r.ALPHA_SCREENMODE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0}e||this.setDepthWrite(t===r.ALPHA_DISABLE),this._alphaMode=t}},r.prototype.getAlphaMode=function(){return this._alphaMode},r.prototype.wipeCaches=function(t){this.preventCacheWipeBetweenFrames&&!t||(this._currentEffect=null,t&&(this.resetTextureCache(),this._currentProgram=null,this._stencilState.reset(),this._depthCullingState.reset(),this.setDepthFunctionToLessOrEqual(),this._alphaState.reset()),this._resetVertexBufferBinding(),this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null,this._unbindVertexArrayObject(),this.bindIndexBuffer(null))},r.prototype.setTextureFormatToUse=function(t){for(var e=0,i=this.texturesSupported.length;e<i;e++)for(var n=0,r=t.length;n<r;n++)if(this._texturesSupported[e]===t[n].toLowerCase())return this._textureFormatInUse=this._texturesSupported[e];return this._textureFormatInUse=null,null},r.prototype._createTexture=function(){var t=this._gl.createTexture();if(!t)throw new Error("Unable to create texture");return t},r.prototype.createTexture=function(e,i,n,r,o,s,a,l,c,u){var h=this;void 0===o&&(o=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===c&&(c=null),void 0===u&&(u=null);var p=String(e),d="data:"===p.substr(0,5),f="blob:"===p.substr(0,5),m=d&&-1!==p.indexOf("base64"),g=c||new t.InternalTexture(this,t.InternalTexture.DATASOURCE_URL),y=p.lastIndexOf("."),_=y>0?p.substring(y).toLowerCase():"",v=this.getCaps().s3tc&&0===_.indexOf(".dds"),b=0===_.indexOf(".tga"),x=!1;!this._textureFormatInUse||m||c||(p=p.substring(0,y)+this._textureFormatInUse,x=!0),r&&r._addPendingData(g),g.url=p,g.generateMipMaps=!i,g.samplingMode=o,g.invertY=n,this._doNotHandleContextLost||(g._buffer=l);var A=null;s&&!c&&(A=g.onLoadedObservable.add(s)),c||this._internalTexturesCache.push(g);var w=function(s,c){r&&r._removePendingData(g),A&&g.onLoadedObservable.remove(A),x?h.createTexture(e,i,n,r,o,null,a,l,g):t.Tools.UseFallbackTexture&&h.createTexture(t.Tools.fallbackTexture,i,n,r,o,null,a,l,g),a&&a(s||"Unknown error",c)},P=null;if(x||b||v)x?P=function(e){var s=new t.KhronosTextureContainer(e,1);h._prepareWebGLTexture(g,r,s.pixelWidth,s.pixelHeight,n,!1,!0,function(){return s.uploadLevels(h._gl,!i),!1},o)}:b?P=function(e){var s=new Uint8Array(e),a=t.TGATools.GetTGAHeader(s);h._prepareWebGLTexture(g,r,a.width,a.height,n,i,!1,function(){return t.TGATools.UploadContent(h._gl,s),!1},o)}:v&&(P=function(e){var s=t.DDSTools.GetDDSInfo(e),a=(s.isRGB||s.isLuminance||s.mipmapCount>1)&&!i&&s.width>>s.mipmapCount-1==1;h._prepareWebGLTexture(g,r,s.width,s.height,n,!a,s.isFourCC,function(){return t.DDSTools.UploadDDSLevels(h,h._gl,e,s,a,1),!1},o)}),l?P&&P(l):this._loadFile(p,function(t){P&&P(t)},void 0,r?r.database:void 0,!0,function(t,e){w("Unable to load "+(t&&t.responseURL,e))});else{var E=function(e){f&&!h._doNotHandleContextLost&&(g._buffer=e),h._prepareWebGLTexture(g,r,e.width,e.height,n,i,!1,function(i,n,o){var s=h._gl,a=e.width===i&&e.height===n,l=u?h._getInternalFormat(u):".jpg"===_?s.RGB:s.RGBA;if(a)return s.texImage2D(s.TEXTURE_2D,0,l,l,s.UNSIGNED_BYTE,e),!1;var c=new t.InternalTexture(h,t.InternalTexture.DATASOURCE_TEMP);return h._bindTextureDirectly(s.TEXTURE_2D,c,!0),s.texImage2D(s.TEXTURE_2D,0,l,l,s.UNSIGNED_BYTE,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),h._rescaleTexture(c,g,r,l,function(){h._releaseTexture(c),h._bindTextureDirectly(s.TEXTURE_2D,g,!0),o()}),!0},o)};!d||m?l instanceof HTMLImageElement?E(l):t.Tools.LoadImage(p,E,w,r?r.database:null):l instanceof Array||"string"==typeof l||l instanceof ArrayBuffer?t.Tools.LoadImage(l,E,w,r?r.database:null):E(l)}return g},r.prototype._rescaleTexture=function(e,i,n,o,s){var a=this,l=this.createRenderTargetTexture({width:i.width,height:i.height},{generateMipMaps:!1,type:r.TEXTURETYPE_UNSIGNED_INT,samplingMode:t.Texture.BILINEAR_SAMPLINGMODE,generateDepthBuffer:!1,generateStencilBuffer:!1});this._rescalePostProcess||(this._rescalePostProcess=new t.PassPostProcess("rescale",1,null,t.Texture.BILINEAR_SAMPLINGMODE,this,!1,r.TEXTURETYPE_UNSIGNED_INT)),this._rescalePostProcess.getEffect().executeWhenCompiled(function(){a._rescalePostProcess.onApply=function(t){t._bindTexture("textureSampler",e)};var t=n;t||(t=a.scenes[a.scenes.length-1]),t.postProcessManager.directRender([a._rescalePostProcess],l,!0),a._bindTextureDirectly(a._gl.TEXTURE_2D,i,!0),a._gl.copyTexImage2D(a._gl.TEXTURE_2D,0,o,0,0,i.width,i.height,0),a.unBindFramebuffer(l),a._releaseTexture(l),s&&s()})},r.prototype._getInternalFormat=function(t){var e=this._gl.RGBA;switch(t){case r.TEXTUREFORMAT_ALPHA:e=this._gl.ALPHA;break;case r.TEXTUREFORMAT_LUMINANCE:e=this._gl.LUMINANCE;break;case r.TEXTUREFORMAT_LUMINANCE_ALPHA:e=this._gl.LUMINANCE_ALPHA;break;case r.TEXTUREFORMAT_RGB:e=this._gl.RGB;break;case r.TEXTUREFORMAT_RGBA:e=this._gl.RGBA}return e},r.prototype.updateRawTexture=function(t,e,i,n,o,s){if(void 0===o&&(o=null),void 0===s&&(s=r.TEXTURETYPE_UNSIGNED_INT),t){var a=this._getInternalFormat(i),l=this._getRGBABufferInternalSizedFormat(s),c=this._getWebGLTextureType(s);this._bindTextureDirectly(this._gl.TEXTURE_2D,t,!0),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,void 0===n?1:n?1:0),this._doNotHandleContextLost||(t._bufferView=e,t.format=i,t.type=s,t.invertY=n,t._compression=o),t.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),o&&e?this._gl.compressedTexImage2D(this._gl.TEXTURE_2D,0,this.getCaps().s3tc[o],t.width,t.height,0,e):this._gl.texImage2D(this._gl.TEXTURE_2D,0,l,t.width,t.height,0,a,c,e),t.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),t.isReady=!0}},r.prototype.createRawTexture=function(e,i,o,s,a,l,c,u,h){void 0===u&&(u=null),void 0===h&&(h=r.TEXTURETYPE_UNSIGNED_INT);var p=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_RAW);p.baseWidth=i,p.baseHeight=o,p.width=i,p.height=o,p.format=s,p.generateMipMaps=a,p.samplingMode=c,p.invertY=l,p._compression=u,p.type=h,this._doNotHandleContextLost||(p._bufferView=e),this.updateRawTexture(p,e,s,l,u,h),this._bindTextureDirectly(this._gl.TEXTURE_2D,p,!0);var d=n(c,a,this._gl);return this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,d.mag),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,d.min),a&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._internalTexturesCache.push(p),p},r.prototype.createDynamicTexture=function(e,i,n,r){var o=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_DYNAMIC);return o.baseWidth=e,o.baseHeight=i,n&&(e=this.needPOTTextures?t.Tools.GetExponentOfTwo(e,this._caps.maxTextureSize):e,i=this.needPOTTextures?t.Tools.GetExponentOfTwo(i,this._caps.maxTextureSize):i),o.width=e,o.height=i,o.isReady=!1,o.generateMipMaps=n,o.samplingMode=r,this.updateTextureSamplingMode(r,o),this._internalTexturesCache.push(o),o},r.prototype.updateTextureSamplingMode=function(t,e){var i=n(t,e.generateMipMaps,this._gl);e.isCube?(this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,e,!0),this._gl.texParameteri(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_MAG_FILTER,i.mag),this._gl.texParameteri(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_MIN_FILTER,i.min),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null)):e.is3D?(this._bindTextureDirectly(this._gl.TEXTURE_3D,e,!0),this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MAG_FILTER,i.mag),this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MIN_FILTER,i.min),this._bindTextureDirectly(this._gl.TEXTURE_3D,null)):(this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,i.mag),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,i.min),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)),e.samplingMode=t},r.prototype.updateDynamicTexture=function(t,e,i,n,r){if(void 0===n&&(n=!1),t){this._bindTextureDirectly(this._gl.TEXTURE_2D,t,!0),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,i?1:0),n&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);var o=r?this._getInternalFormat(r):this._gl.RGBA;this._gl.texImage2D(this._gl.TEXTURE_2D,0,o,o,this._gl.UNSIGNED_BYTE,e),t.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),n&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),t.isReady=!0}},r.prototype.updateVideoTexture=function(t,e,i){if(t&&!t._isDisabled){this._bindTextureDirectly(this._gl.TEXTURE_2D,t,!0),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,i?0:1);try{if(void 0===this._videoTextureSupported&&(this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e),0!==this._gl.getError()?this._videoTextureSupported=!1:this._videoTextureSupported=!0),this._videoTextureSupported)this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);else{if(!t._workingCanvas){t._workingCanvas=document.createElement("canvas");var n=t._workingCanvas.getContext("2d");if(!n)throw new Error("Unable to get 2d context");t._workingContext=n,t._workingCanvas.width=t.width,t._workingCanvas.height=t.height}t._workingContext.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,t.width,t.height),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t._workingCanvas)}t.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),t.isReady=!0}catch(e){t._isDisabled=!0}}},r.prototype.createRenderTargetTexture=function(e,i){var o=new l;void 0!==i&&"object"==typeof i?(o.generateMipMaps=i.generateMipMaps,o.generateDepthBuffer=void 0===i.generateDepthBuffer||i.generateDepthBuffer,o.generateStencilBuffer=o.generateDepthBuffer&&i.generateStencilBuffer,o.type=void 0===i.type?r.TEXTURETYPE_UNSIGNED_INT:i.type,o.samplingMode=void 0===i.samplingMode?t.Texture.TRILINEAR_SAMPLINGMODE:i.samplingMode):(o.generateMipMaps=i,o.generateDepthBuffer=!0,o.generateStencilBuffer=!1,o.type=r.TEXTURETYPE_UNSIGNED_INT,o.samplingMode=t.Texture.TRILINEAR_SAMPLINGMODE),(o.type!==r.TEXTURETYPE_FLOAT||this._caps.textureFloatLinearFiltering)&&(o.type!==r.TEXTURETYPE_HALF_FLOAT||this._caps.textureHalfFloatLinearFiltering)||(o.samplingMode=t.Texture.NEAREST_SAMPLINGMODE);var s=this._gl,a=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_RENDERTARGET);this._bindTextureDirectly(s.TEXTURE_2D,a,!0);var c=e.width||e,u=e.height||e,h=n(o.samplingMode,!!o.generateMipMaps,s);o.type!==r.TEXTURETYPE_FLOAT||this._caps.textureFloat||(o.type=r.TEXTURETYPE_UNSIGNED_INT,t.Tools.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,h.mag),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,h.min),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texImage2D(s.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(o.type),c,u,0,s.RGBA,this._getWebGLTextureType(o.type),null);var p=s.createFramebuffer();return this.bindUnboundFramebuffer(p),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a._webGLTexture,0),a._depthStencilBuffer=this._setupFramebufferDepthAttachments(!!o.generateStencilBuffer,o.generateDepthBuffer,c,u),o.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(s.TEXTURE_2D,null),s.bindRenderbuffer(s.RENDERBUFFER,null),this.bindUnboundFramebuffer(null),a._framebuffer=p,a.baseWidth=c,a.baseHeight=u,a.width=c,a.height=u,a.isReady=!0,a.samples=1,a.generateMipMaps=!!o.generateMipMaps,a.samplingMode=o.samplingMode,a.type=o.type,a._generateDepthBuffer=o.generateDepthBuffer,a._generateStencilBuffer=!!o.generateStencilBuffer,this._internalTexturesCache.push(a),a},r.prototype.createMultipleRenderTarget=function(e,i){var o=!1,s=!0,a=!1,l=!1,c=1,u=r.TEXTURETYPE_UNSIGNED_INT,h=t.Texture.TRILINEAR_SAMPLINGMODE,p=[],d=[];void 0!==i&&(o=i.generateMipMaps,s=void 0===i.generateDepthBuffer||i.generateDepthBuffer,a=i.generateStencilBuffer,l=i.generateDepthTexture,c=i.textureCount||1,i.types&&(p=i.types),i.samplingModes&&(d=i.samplingModes));var f=this._gl,m=f.createFramebuffer();this.bindUnboundFramebuffer(m);for(var g=e.width||e,y=e.height||e,_=[],v=[],b=this._setupFramebufferDepthAttachments(a,s,g,y),x=0;x<c;x++){var A=d[x]||h,w=p[x]||u;(w!==r.TEXTURETYPE_FLOAT||this._caps.textureFloatLinearFiltering)&&(w!==r.TEXTURETYPE_HALF_FLOAT||this._caps.textureHalfFloatLinearFiltering)||(A=t.Texture.NEAREST_SAMPLINGMODE);var P=n(A,o,f);w!==r.TEXTURETYPE_FLOAT||this._caps.textureFloat||(w=r.TEXTURETYPE_UNSIGNED_INT,t.Tools.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type"));var E=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_MULTIRENDERTARGET),T=f[this.webGLVersion>1?"COLOR_ATTACHMENT"+x:"COLOR_ATTACHMENT"+x+"_WEBGL"];_.push(E),v.push(T),f.activeTexture(f["TEXTURE"+x]),f.bindTexture(f.TEXTURE_2D,E._webGLTexture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,P.mag),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,P.min),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(w),g,y,0,f.RGBA,this._getWebGLTextureType(w),null),f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,T,f.TEXTURE_2D,E._webGLTexture,0),o&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(f.TEXTURE_2D,null),E._framebuffer=m,E._depthStencilBuffer=b,E.baseWidth=g,E.baseHeight=y,E.width=g,E.height=y,E.isReady=!0,E.samples=1,E.generateMipMaps=o,E.samplingMode=A,E.type=w,E._generateDepthBuffer=s,E._generateStencilBuffer=a,E._attachments=v,this._internalTexturesCache.push(E)}if(l&&this._caps.depthTextureExtension){var S=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_MULTIRENDERTARGET);f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,S._webGLTexture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,this.webGLVersion<2?f.DEPTH_COMPONENT:f.DEPTH_COMPONENT16,g,y,0,f.DEPTH_COMPONENT,f.UNSIGNED_SHORT,null),f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,S._webGLTexture,0),S._framebuffer=m,S.baseWidth=g,S.baseHeight=y,S.width=g,S.height=y,S.isReady=!0,S.samples=1,S.generateMipMaps=o,S.samplingMode=f.NEAREST,S._generateDepthBuffer=s,S._generateStencilBuffer=a,_.push(S),this._internalTexturesCache.push(S)}return f.drawBuffers(v),f.bindRenderbuffer(f.RENDERBUFFER,null),this.bindUnboundFramebuffer(null),this.resetTextureCache(),_},r.prototype._setupFramebufferDepthAttachments=function(t,e,i,n,r){void 0===r&&(r=1);var o=null,s=this._gl;return t?(o=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,o),r>1?s.renderbufferStorageMultisample(s.RENDERBUFFER,r,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)):e&&(o=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,o),r>1?s.renderbufferStorageMultisample(s.RENDERBUFFER,r,s.DEPTH_COMPONENT16,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,o)),o},r.prototype.updateRenderTargetTextureSampleCount=function(t,e){if(this.webGLVersion<2||!t)return 1;if(t.samples===e)return e;var i=this._gl;if(e=Math.min(e,i.getParameter(i.MAX_SAMPLES)),t._depthStencilBuffer&&(i.deleteRenderbuffer(t._depthStencilBuffer),t._depthStencilBuffer=null),t._MSAAFramebuffer&&(i.deleteFramebuffer(t._MSAAFramebuffer),t._MSAAFramebuffer=null),t._MSAARenderBuffer&&(i.deleteRenderbuffer(t._MSAARenderBuffer),t._MSAARenderBuffer=null),e>1){var n=i.createFramebuffer();if(!n)throw new Error("Unable to create multi sampled framebuffer");t._MSAAFramebuffer=n,this.bindUnboundFramebuffer(t._MSAAFramebuffer);var r=i.createRenderbuffer();if(!r)throw new Error("Unable to create multi sampled framebuffer");i.bindRenderbuffer(i.RENDERBUFFER,r),i.renderbufferStorageMultisample(i.RENDERBUFFER,e,this._getRGBAMultiSampleBufferFormat(t.type),t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r),t._MSAARenderBuffer=r}else this.bindUnboundFramebuffer(t._framebuffer);return t.samples=e,t._depthStencilBuffer=this._setupFramebufferDepthAttachments(t._generateStencilBuffer,t._generateDepthBuffer,t.width,t.height,e),i.bindRenderbuffer(i.RENDERBUFFER,null),this.bindUnboundFramebuffer(null),e},r.prototype.updateMultipleRenderTargetTextureSampleCount=function(t,e){if(this.webGLVersion<2||!t||0==t.length)return 1;if(t[0].samples===e)return e;var i=this._gl;e=Math.min(e,i.getParameter(i.MAX_SAMPLES)),t[0]._depthStencilBuffer&&(i.deleteRenderbuffer(t[0]._depthStencilBuffer),t[0]._depthStencilBuffer=null),t[0]._MSAAFramebuffer&&(i.deleteFramebuffer(t[0]._MSAAFramebuffer),t[0]._MSAAFramebuffer=null);for(var n=0;n<t.length;n++)t[n]._MSAARenderBuffer&&(i.deleteRenderbuffer(t[n]._MSAARenderBuffer),t[n]._MSAARenderBuffer=null);if(e>1){var r=i.createFramebuffer();if(!r)throw new Error("Unable to create multi sampled framebuffer");this.bindUnboundFramebuffer(r);var o=this._setupFramebufferDepthAttachments(t[0]._generateStencilBuffer,t[0]._generateDepthBuffer,t[0].width,t[0].height,e),s=[];for(n=0;n<t.length;n++){var a=t[n],l=i[this.webGLVersion>1?"COLOR_ATTACHMENT"+n:"COLOR_ATTACHMENT"+n+"_WEBGL"],c=i.createRenderbuffer();if(!c)throw new Error("Unable to create multi sampled framebuffer");i.bindRenderbuffer(i.RENDERBUFFER,c),i.renderbufferStorageMultisample(i.RENDERBUFFER,e,this._getRGBAMultiSampleBufferFormat(a.type),a.width,a.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,c),a._MSAAFramebuffer=r,a._MSAARenderBuffer=c,a.samples=e,a._depthStencilBuffer=o,i.bindRenderbuffer(i.RENDERBUFFER,null),s.push(l)}i.drawBuffers(s)}else this.bindUnboundFramebuffer(t[0]._framebuffer);return this.bindUnboundFramebuffer(null),e},r.prototype._uploadDataToTexture=function(t,e,i,n,r,o,s,a){this._gl.texImage2D(t,e,i,n,r,0,o,s,a)},r.prototype._uploadCompressedDataToTexture=function(t,e,i,n,r,o){this._gl.compressedTexImage2D(t,e,i,n,r,0,o)},r.prototype.createRenderTargetCubeTexture=function(e,i){var r=this._gl,o=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_RENDERTARGET),s=!0,a=!0,l=!1,c=t.Texture.TRILINEAR_SAMPLINGMODE;void 0!==i&&(s=void 0===i.generateMipMaps||i.generateMipMaps,l=!(!(a=void 0===i.generateDepthBuffer||i.generateDepthBuffer)||!i.generateStencilBuffer),void 0!==i.samplingMode&&(c=i.samplingMode)),o.isCube=!0,o.generateMipMaps=s,o.samples=1,o.samplingMode=c;var u=n(c,s,r);this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,o,!0);for(var h=0;h<6;h++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,r.RGBA,e,e,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,u.mag),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,u.min),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);var p=r.createFramebuffer();return this.bindUnboundFramebuffer(p),o._depthStencilBuffer=this._setupFramebufferDepthAttachments(l,a,e,e),o.generateMipMaps&&r.generateMipmap(r.TEXTURE_CUBE_MAP),this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,null),r.bindRenderbuffer(r.RENDERBUFFER,null),this.bindUnboundFramebuffer(null),o._framebuffer=p,o.width=e,o.height=e,o.isReady=!0,this._internalTexturesCache.push(o),o},r.prototype.createPrefilteredCubeTexture=function(e,i,n,r,o,s,a,l){var c=this;void 0===o&&(o=null),void 0===s&&(s=null),void 0===l&&(l=null);return this.createCubeTexture(e,i,null,!1,function(e){if(e){var s=e.texture;if(s._dataSource=t.InternalTexture.DATASOURCE_CUBEPREFILTERED,s._lodGenerationScale=n,s._lodGenerationOffset=r,c._caps.textureLOD)o&&o(s);else{var a=c._gl,l=e.width;if(l){for(var u=[],h=0;h<3;h++){var p=1-h/2,d=r,f=t.Scalar.Log2(l)*n+r,m=d+(f-d)*p,g=Math.round(Math.min(Math.max(m,0),f)),y=new t.InternalTexture(c,t.InternalTexture.DATASOURCE_TEMP);if(y.isCube=!0,c._bindTextureDirectly(a.TEXTURE_CUBE_MAP,y,!0),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),e.isDDS){var _=e.info,v=e.data;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,_.isCompressed?1:0),t.DDSTools.UploadDDSLevels(c,c._gl,v,_,!0,6,g)}else t.Tools.Warn("DDS is the only prefiltered cube map supported so far.");c._bindTextureDirectly(a.TEXTURE_CUBE_MAP,null);var b=new t.BaseTexture(i);b.isCube=!0,b._texture=y,y.isReady=!0,u.push(b)}s._lodTextureHigh=u[2],s._lodTextureMid=u[1],s._lodTextureLow=u[0],o&&o(s)}}}else o&&o(null)},s,a,l)},r.prototype.createCubeTexture=function(e,i,n,r,s,a,l,c){var u=this;void 0===s&&(s=null),void 0===a&&(a=null),void 0===c&&(c=null);var h=this._gl,p=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_CUBE);p.isCube=!0,p.url=e,p.generateMipMaps=!r,this._doNotHandleContextLost||(p._extension=c,p._files=n);var d=!1,f=!1,m=e.lastIndexOf("."),g=c||(m>-1?e.substring(m).toLowerCase():"");this._textureFormatInUse?(g=this._textureFormatInUse,e=(m>-1?e.substring(0,m):e)+this._textureFormatInUse,d=!0):f=".dds"===g;var y=function(t,e){a&&t&&a(t.status+" "+t.statusText,e)};if(d)this._loadFile(e,function(e){var i=new t.KhronosTextureContainer(e,6),n=i.numberOfMipmapLevels>1&&!r;u._bindTextureDirectly(h.TEXTURE_CUBE_MAP,p,!0),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,1),i.uploadLevels(u._gl,!r),u.setCubeMapTextureParams(h,n),p.width=i.pixelWidth,p.height=i.pixelHeight,p.isReady=!0},void 0,void 0,!0,y);else if(f)n&&6===n.length?this._cascadeLoadFiles(e,i,function(e){for(var i,n=!1,o=0,a=0;a<e.length;a++){var l=e[a];n=((i=t.DDSTools.GetDDSInfo(l)).isRGB||i.isLuminance||i.mipmapCount>1)&&!r,u._bindTextureDirectly(h.TEXTURE_CUBE_MAP,p,!0),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i.isCompressed?1:0),t.DDSTools.UploadDDSLevels(u,u._gl,l,i,n,6,-1,a),r||i.isFourCC||1!==i.mipmapCount||h.generateMipmap(h.TEXTURE_CUBE_MAP),p.width=i.width,p.height=i.height,p.type=i.textureType,o=i.width}u.setCubeMapTextureParams(h,n),p.isReady=!0,s&&s({isDDS:!0,width:o,info:i,imgs:e,texture:p})},n,a):this._loadFile(e,function(e){var i=t.DDSTools.GetDDSInfo(e),n=(i.isRGB||i.isLuminance||i.mipmapCount>1)&&!r;u._bindTextureDirectly(h.TEXTURE_CUBE_MAP,p,!0),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i.isCompressed?1:0),t.DDSTools.UploadDDSLevels(u,u._gl,e,i,n,6),r||i.isFourCC||1!==i.mipmapCount||h.generateMipmap(h.TEXTURE_CUBE_MAP),u.setCubeMapTextureParams(h,n),p.width=i.width,p.height=i.height,p.isReady=!0,p.type=i.textureType,s&&s({isDDS:!0,width:i.width,info:i,data:e,texture:p})},void 0,void 0,!0,y);else{if(!n)throw new Error("Cannot load cubemap because files were not defined");o(0,i,function(e){var i=u.needPOTTextures?t.Tools.GetExponentOfTwo(e[0].width,u._caps.maxCubemapTextureSize):e[0].width,n=i;if(u._prepareWorkingCanvas(),u._workingCanvas&&u._workingContext){u._workingCanvas.width=i,u._workingCanvas.height=n;var o=[h.TEXTURE_CUBE_MAP_POSITIVE_X,h.TEXTURE_CUBE_MAP_POSITIVE_Y,h.TEXTURE_CUBE_MAP_POSITIVE_Z,h.TEXTURE_CUBE_MAP_NEGATIVE_X,h.TEXTURE_CUBE_MAP_NEGATIVE_Y,h.TEXTURE_CUBE_MAP_NEGATIVE_Z];u._bindTextureDirectly(h.TEXTURE_CUBE_MAP,p,!0),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,0);for(var a=l?u._getInternalFormat(l):u._gl.RGBA,c=0;c<o.length;c++)u._workingContext.drawImage(e[c],0,0,e[c].width,e[c].height,0,0,i,n),h.texImage2D(o[c],0,a,a,h.UNSIGNED_BYTE,u._workingCanvas);r||h.generateMipmap(h.TEXTURE_CUBE_MAP),u.setCubeMapTextureParams(h,!r),p.width=i,p.height=n,p.isReady=!0,l&&(p.format=l),p.onLoadedObservable.notifyObservers(p),p.onLoadedObservable.clear(),s&&s()}},n,a)}return this._internalTexturesCache.push(p),p},r.prototype.setCubeMapTextureParams=function(t,e){t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._bindTextureDirectly(t.TEXTURE_CUBE_MAP,null)},r.prototype.updateRawCubeTexture=function(e,i,n,r,o,s,a){void 0===s&&(s=null),void 0===a&&(a=0),e._bufferViewArray=i,e.format=n,e.type=r,e.invertY=o,e._compression=s;var l=this._gl,c=this._getWebGLTextureType(r),u=this._getInternalFormat(n),h=this._getRGBABufferInternalSizedFormat(r),p=!1;u===l.RGB&&(u=l.RGBA,p=!0),this._bindTextureDirectly(l.TEXTURE_CUBE_MAP,e,!0),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,void 0===o?1:o?1:0),e.width%4!=0&&l.pixelStorei(l.UNPACK_ALIGNMENT,1);for(var d=0;d<6;d++){var f=i[d];s?l.compressedTexImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+d,a,this.getCaps().s3tc[s],e.width,e.height,0,f):(p&&(f=this._convertRGBtoRGBATextureData(f,e.width,e.height,r)),l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+d,a,h,e.width,e.height,0,u,c,f))}(!this.needPOTTextures||t.Tools.IsExponentOfTwo(e.width)&&t.Tools.IsExponentOfTwo(e.height))&&e.generateMipMaps&&0===a&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),e.isReady=!0},r.prototype.createRawCubeTexture=function(e,i,r,o,s,a,l,c){void 0===c&&(c=null);var u=this._gl,h=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_CUBERAW);h.isCube=!0,h.generateMipMaps=s,h.format=r,h.type=o,this._doNotHandleContextLost||(h._bufferViewArray=e);var p=this._getWebGLTextureType(o),d=this._getInternalFormat(r);d===u.RGB&&(d=u.RGBA);var f=i,m=f;if(h.width=f,h.height=m,!this.needPOTTextures||t.Tools.IsExponentOfTwo(h.width)&&t.Tools.IsExponentOfTwo(h.height)||(s=!1),e&&this.updateRawCubeTexture(h,e,r,o,a,c),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,h,!0),e&&s&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP),p!==u.FLOAT||this._caps.textureFloatLinearFiltering)if(p!==this._gl.HALF_FLOAT_OES||this._caps.textureHalfFloatLinearFiltering){var g=n(l,s,u);u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MAG_FILTER,g.mag),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MIN_FILTER,g.min)}else u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MIN_FILTER,u.NEAREST);else u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MIN_FILTER,u.NEAREST);return u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),this._bindTextureDirectly(u.TEXTURE_CUBE_MAP,null),h},r.prototype.createRawCubeTextureFromUrl=function(e,i,n,r,o,s,a,l,c,u,h,p){var d=this;void 0===c&&(c=null),void 0===u&&(u=null),void 0===h&&(h=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===p&&(p=!1);var f=this._gl,m=this.createRawCubeTexture(null,n,r,o,!s,p,h);i._addPendingData(m),m.url=e,this._internalTexturesCache.push(m);return this._loadFile(e,function(t){!function(t){var e=m.width,n=a(t);if(n){if(l){var u=d._getWebGLTextureType(o),h=d._getInternalFormat(r),g=d._getRGBABufferInternalSizedFormat(o),y=!1;h===f.RGB&&(h=f.RGBA,y=!0),d._bindTextureDirectly(f.TEXTURE_CUBE_MAP,m,!0),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,0);for(var _=l(n),v=0;v<_.length;v++)for(var b=e>>v,x=0;x<6;x++){var A=_[v][x];y&&(A=d._convertRGBtoRGBATextureData(A,b,b,o)),f.texImage2D(x,v,g,b,b,0,h,u,A)}d._bindTextureDirectly(f.TEXTURE_CUBE_MAP,null)}else m.generateMipMaps=!s,d.updateRawCubeTexture(m,n,r,o,p);m.isReady=!0,i._removePendingData(m),c&&c()}}(t)},void 0,i.database,!0,function(t,e){i._removePendingData(m),u&&t&&u(t.status+" "+t.statusText,e)}),m},r.prototype.updateRawTexture3D=function(t,e,i,n,r){void 0===r&&(r=null);var o=this._getInternalFormat(i);this._bindTextureDirectly(this._gl.TEXTURE_3D,t,!0),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,void 0===n?1:n?1:0),this._doNotHandleContextLost||(t._bufferView=e,t.format=i,t.invertY=n,t._compression=r),t.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),r&&e?this._gl.compressedTexImage3D(this._gl.TEXTURE_3D,0,this.getCaps().s3tc[r],t.width,t.height,t.depth,0,e):this._gl.texImage3D(this._gl.TEXTURE_3D,0,o,t.width,t.height,t.depth,0,o,this._gl.UNSIGNED_BYTE,e),t.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_3D),this._bindTextureDirectly(this._gl.TEXTURE_3D,null),t.isReady=!0},r.prototype.createRawTexture3D=function(e,i,r,o,s,a,l,c,u){void 0===u&&(u=null);var h=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_RAW3D);h.baseWidth=i,h.baseHeight=r,h.baseDepth=o,h.width=i,h.height=r,h.depth=o,h.format=s,h.generateMipMaps=a,h.samplingMode=c,h.is3D=!0,this._doNotHandleContextLost||(h._bufferView=e),this.updateRawTexture3D(h,e,s,l,u),this._bindTextureDirectly(this._gl.TEXTURE_3D,h,!0);var p=n(c,a,this._gl);return this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MAG_FILTER,p.mag),this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MIN_FILTER,p.min),a&&this._gl.generateMipmap(this._gl.TEXTURE_3D),this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._internalTexturesCache.push(h),h},r.prototype._prepareWebGLTextureContinuation=function(t,e,i,r,o){var s=this._gl;if(s){var a=n(o,!i,s);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,a.mag),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,a.min),i||r||s.generateMipmap(s.TEXTURE_2D),this._bindTextureDirectly(s.TEXTURE_2D,null),e&&e._removePendingData(t),t.onLoadedObservable.notifyObservers(t),t.onLoadedObservable.clear()}},r.prototype._prepareWebGLTexture=function(e,i,n,r,o,s,a,l,c){var u=this;void 0===c&&(c=t.Texture.TRILINEAR_SAMPLINGMODE);var h=this.needPOTTextures?t.Tools.GetExponentOfTwo(n,this.getCaps().maxTextureSize):n,p=this.needPOTTextures?t.Tools.GetExponentOfTwo(r,this.getCaps().maxTextureSize):r,d=this._gl;if(d){if(!e._webGLTexture)return void(i&&i._removePendingData(e));this._bindTextureDirectly(d.TEXTURE_2D,e,!0),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,void 0===o?1:o?1:0),e.baseWidth=n,e.baseHeight=r,e.width=h,e.height=p,e.isReady=!0,l(h,p,function(){u._prepareWebGLTextureContinuation(e,i,s,a,c)})||this._prepareWebGLTextureContinuation(e,i,s,a,c)}},r.prototype._convertRGBtoRGBATextureData=function(t,e,i,n){var o;o=n===r.TEXTURETYPE_FLOAT?new Float32Array(e*i*4):new Uint32Array(e*i*4);for(var s=0;s<e;s++)for(var a=0;a<i;a++){var l=3*(a*e+s),c=4*(a*e+s);o[c+0]=t[l+0],o[c+1]=t[l+1],o[c+2]=t[l+2],o[c+3]=1}return o},r.prototype._releaseFramebufferObjects=function(t){var e=this._gl;t._framebuffer&&(e.deleteFramebuffer(t._framebuffer),t._framebuffer=null),t._depthStencilBuffer&&(e.deleteRenderbuffer(t._depthStencilBuffer),t._depthStencilBuffer=null),t._MSAAFramebuffer&&(e.deleteFramebuffer(t._MSAAFramebuffer),t._MSAAFramebuffer=null),t._MSAARenderBuffer&&(e.deleteRenderbuffer(t._MSAARenderBuffer),t._MSAARenderBuffer=null)},r.prototype._releaseTexture=function(t){var e=this._gl;this._releaseFramebufferObjects(t),e.deleteTexture(t._webGLTexture),this.unbindAllTextures();var i=this._internalTexturesCache.indexOf(t);-1!==i&&this._internalTexturesCache.splice(i,1),t._lodTextureHigh&&t._lodTextureHigh.dispose(),t._lodTextureMid&&t._lodTextureMid.dispose(),t._lodTextureLow&&t._lodTextureLow.dispose()},r.prototype.setProgram=function(t){this._currentProgram!==t&&(this._gl.useProgram(t),this._currentProgram=t)},r.prototype.bindSamplers=function(t){this.setProgram(t.getProgram());for(var e=t.getSamplers(),i=0;i<e.length;i++){var n=t.getUniform(e[i]);n&&(this._boundUniforms[i]=n)}this._currentEffect=null},r.prototype._moveBoundTextureOnTop=function(t){this.disableTextureBindingOptimization||this._lastBoundInternalTextureTracker.previous===t||(this._linkTrackers(t.previous,t.next),this._linkTrackers(this._lastBoundInternalTextureTracker.previous,t),this._linkTrackers(t,this._lastBoundInternalTextureTracker))},r.prototype._getCorrectTextureChannel=function(t,e){if(!e)return-1;if(e._initialSlot=t,this.disableTextureBindingOptimization)t!==e._designatedSlot&&this._textureCollisions.addCount(1,!1);else if(t!==e._designatedSlot)return e._designatedSlot>-1?e._designatedSlot:this._nextFreeTextureSlots.length?this._nextFreeTextureSlots[0]:(this._textureCollisions.addCount(1,!1),this._removeDesignatedSlot(this._firstBoundInternalTextureTracker.next));return t},r.prototype._linkTrackers=function(t,e){t.next=e,e.previous=t},r.prototype._removeDesignatedSlot=function(t){var e=t._designatedSlot;return-1===e?-1:(t._designatedSlot=-1,this.disableTextureBindingOptimization?-1:(this._linkTrackers(t.previous,t.next),this._boundTexturesCache[e]=null,this._nextFreeTextureSlots.push(e),e))},r.prototype._activateCurrentTexture=function(){this._currentTextureChannel!==this._activeChannel&&(this._gl.activeTexture(this._gl.TEXTURE0+this._activeChannel),this._currentTextureChannel=this._activeChannel)},r.prototype._bindTextureDirectly=function(t,e,i){void 0===i&&(i=!1),i&&e&&e._designatedSlot>-1&&(this._activeChannel=e._designatedSlot);var n=this._boundTexturesCache[this._activeChannel],r=e&&e._initialSlot>-1;if(n!==e){if(n&&this._removeDesignatedSlot(n),this._activateCurrentTexture(),this._gl.bindTexture(t,e?e._webGLTexture:null),this._boundTexturesCache[this._activeChannel]=e,e){if(!this.disableTextureBindingOptimization){var o=this._nextFreeTextureSlots.indexOf(this._activeChannel);o>-1&&this._nextFreeTextureSlots.splice(o,1),this._linkTrackers(this._lastBoundInternalTextureTracker.previous,e),this._linkTrackers(e,this._lastBoundInternalTextureTracker)}e._designatedSlot=this._activeChannel}}else i&&this._activateCurrentTexture();r&&!i&&this._bindSamplerUniformToChannel(e._initialSlot,this._activeChannel)},r.prototype._bindTexture=function(t,e){t<0||(e&&(t=this._getCorrectTextureChannel(t,e)),this._activeChannel=t,this._bindTextureDirectly(this._gl.TEXTURE_2D,e))},r.prototype.setTextureFromPostProcess=function(t,e){this._bindTexture(t,e?e._textures.data[e._currentRenderTextureInd]:null)},r.prototype.unbindAllTextures=function(){for(var t=0;t<this._maxSimultaneousTextures;t++)this._activeChannel=t,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&this._bindTextureDirectly(this._gl.TEXTURE_3D,null)},r.prototype.setTexture=function(t,e,i){t<0||(e&&(this._boundUniforms[t]=e),this._setTexture(t,i))},r.prototype._bindSamplerUniformToChannel=function(t,e){var i=this._boundUniforms[t];i._currentState!==e&&(this._gl.uniform1i(i,e),i._currentState=e)},r.prototype._setTexture=function(e,i,n){if(void 0===n&&(n=!1),!i)return null!=this._boundTexturesCache[e]&&(this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&this._bindTextureDirectly(this._gl.TEXTURE_3D,null)),!1;if(i.video)this._activeChannel=e,i.update();else if(i.delayLoadState===r.DELAYLOADSTATE_NOTLOADED)return i.delayLoad(),!1;var o;if(o=i.isReady()?i.getInternalTexture():i.isCube?this.emptyCubeTexture:i.is3D?this.emptyTexture3D:this.emptyTexture,n||(e=this._getCorrectTextureChannel(e,o)),this._boundTexturesCache[e]===o)return this._moveBoundTextureOnTop(o),n||this._bindSamplerUniformToChannel(o._initialSlot,e),!1;if(this._activeChannel=e,o&&o.is3D){if(this._bindTextureDirectly(this._gl.TEXTURE_3D,o,n),o&&o._cachedWrapU!==i.wrapU)switch(o._cachedWrapU=i.wrapU,i.wrapU){case t.Texture.WRAP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_S,this._gl.REPEAT);break;case t.Texture.CLAMP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);break;case t.Texture.MIRROR_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_S,this._gl.MIRRORED_REPEAT)}if(o&&o._cachedWrapV!==i.wrapV)switch(o._cachedWrapV=i.wrapV,i.wrapV){case t.Texture.WRAP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_T,this._gl.REPEAT);break;case t.Texture.CLAMP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);break;case t.Texture.MIRROR_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_T,this._gl.MIRRORED_REPEAT)}if(o&&o._cachedWrapR!==i.wrapR)switch(o._cachedWrapR=i.wrapR,i.wrapV){case t.Texture.WRAP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_R,this._gl.REPEAT);break;case t.Texture.CLAMP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE);break;case t.Texture.MIRROR_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_R,this._gl.MIRRORED_REPEAT)}this._setAnisotropicLevel(this._gl.TEXTURE_3D,i)}else if(o&&o.isCube){if(this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,o,n),o._cachedCoordinatesMode!==i.coordinatesMode){o._cachedCoordinatesMode=i.coordinatesMode;var s=i.coordinatesMode!==t.Texture.CUBIC_MODE&&i.coordinatesMode!==t.Texture.SKYBOX_MODE?this._gl.REPEAT:this._gl.CLAMP_TO_EDGE;this._gl.texParameteri(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_WRAP_S,s),this._gl.texParameteri(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_WRAP_T,s)}this._setAnisotropicLevel(this._gl.TEXTURE_CUBE_MAP,i)}else{if(this._bindTextureDirectly(this._gl.TEXTURE_2D,o,n),o&&o._cachedWrapU!==i.wrapU)switch(o._cachedWrapU=i.wrapU,i.wrapU){case t.Texture.WRAP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.REPEAT);break;case t.Texture.CLAMP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);break;case t.Texture.MIRROR_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.MIRRORED_REPEAT)}if(o&&o._cachedWrapV!==i.wrapV)switch(o._cachedWrapV=i.wrapV,i.wrapV){case t.Texture.WRAP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.REPEAT);break;case t.Texture.CLAMP_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);break;case t.Texture.MIRROR_ADDRESSMODE:this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.MIRRORED_REPEAT)}this._setAnisotropicLevel(this._gl.TEXTURE_2D,i)}return!0},r.prototype.setTextureArray=function(t,e,i){if(!(t<0)&&e){this._textureUnits&&this._textureUnits.length===i.length||(this._textureUnits=new Int32Array(i.length));for(var n=0;n<i.length;n++)this._textureUnits[n]=this._getCorrectTextureChannel(t+n,i[n].getInternalTexture());this._gl.uniform1iv(e,this._textureUnits);for(var r=0;r<i.length;r++)this._setTexture(this._textureUnits[r],i[r],!0)}},r.prototype._setAnisotropicLevel=function(e,i){var n=i.getInternalTexture();if(n){var r=this._caps.textureAnisotropicFilterExtension,o=i.anisotropicFilteringLevel;n.samplingMode!==t.Texture.LINEAR_LINEAR_MIPNEAREST&&n.samplingMode!==t.Texture.LINEAR_LINEAR_MIPLINEAR&&n.samplingMode!==t.Texture.LINEAR_LINEAR&&(o=1),r&&n._cachedAnisotropicFilteringLevel!==o&&(this._gl.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o,this._caps.maxAnisotropy)),n._cachedAnisotropicFilteringLevel=o)}},r.prototype.readPixels=function(t,e,i,n){var r=new Uint8Array(n*i*4);return this._gl.readPixels(t,e,i,n,this._gl.RGBA,this._gl.UNSIGNED_BYTE,r),r},r.prototype.addExternalData=function(e,i){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.add(e,i)},r.prototype.getExternalData=function(e){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.get(e)},r.prototype.getOrAddExternalDataWithFactory=function(e,i){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.getOrAddWithFactory(e,i)},r.prototype.removeExternalData=function(e){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.remove(e)},r.prototype.unbindAllAttributes=function(){if(this._mustWipeVertexAttributes){this._mustWipeVertexAttributes=!1;for(var t=0;t<this._caps.maxVertexAttribs;t++)this._gl.disableVertexAttribArray(t),this._vertexAttribArraysEnabled[t]=!1,this._currentBufferPointers[t].active=!1}else{t=0;for(var e=this._vertexAttribArraysEnabled.length;t<e;t++)t>=this._caps.maxVertexAttribs||!this._vertexAttribArraysEnabled[t]||(this._gl.disableVertexAttribArray(t),this._vertexAttribArraysEnabled[t]=!1,this._currentBufferPointers[t].active=!1)}},r.prototype.releaseEffects=function(){for(var t in this._compiledEffects)this._deleteProgram(this._compiledEffects[t]._program);this._compiledEffects={}},r.prototype.dispose=function(){for(this.hideLoadingUI(),this.stopRenderLoop();this.postProcesses.length;)this.postProcesses[0].dispose();for(this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._rescalePostProcess&&this._rescalePostProcess.dispose();this.scenes.length;)this.scenes[0].dispose();r.audioEngine&&r.audioEngine.dispose(),this.releaseEffects(),this.unbindAllAttributes(),this._dummyFramebuffer&&this._gl.deleteFramebuffer(this._dummyFramebuffer),this.disableVR(),t.Tools.IsWindowObjectExist()&&(window.removeEventListener("blur",this._onBlur),window.removeEventListener("focus",this._onFocus),window.removeEventListener("vrdisplaypointerrestricted",this._onVRDisplayPointerRestricted),window.removeEventListener("vrdisplaypointerunrestricted",this._onVRDisplayPointerUnrestricted),this._renderingCanvas&&(this._renderingCanvas.removeEventListener("focus",this._onCanvasFocus),this._renderingCanvas.removeEventListener("blur",this._onCanvasBlur),this._renderingCanvas.removeEventListener("pointerout",this._onCanvasBlur),this._doNotHandleContextLost||(this._renderingCanvas.removeEventListener("webglcontextlost",this._onContextLost),this._renderingCanvas.removeEventListener("webglcontextrestored",this._onContextRestored))),document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),document.removeEventListener("pointerlockchange",this._onPointerLockChange),document.removeEventListener("mspointerlockchange",this._onPointerLockChange),document.removeEventListener("mozpointerlockchange",this._onPointerLockChange),document.removeEventListener("webkitpointerlockchange",this._onPointerLockChange),this._onVrDisplayConnect&&(window.removeEventListener("vrdisplayconnect",this._onVrDisplayConnect),this._onVrDisplayDisconnect&&window.removeEventListener("vrdisplaydisconnect",this._onVrDisplayDisconnect),this._onVrDisplayPresentChange&&window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),this._onVrDisplayConnect=null,this._onVrDisplayDisconnect=null));var e=r.Instances.indexOf(this);e>=0&&r.Instances.splice(e,1),this._workingCanvas=null,this._workingContext=null,this._currentBufferPointers=[],this._renderingCanvas=null,this._currentProgram=null,this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear(),t.Effect.ResetCache();for(var i=0,n=this._activeRequests;i<n.length;i++)n[i].abort()},r.prototype.displayLoadingUI=function(){if(t.Tools.IsWindowObjectExist()){var e=this.loadingScreen;e&&e.displayLoadingUI()}},r.prototype.hideLoadingUI=function(){if(t.Tools.IsWindowObjectExist()){var e=this.loadingScreen;e&&e.hideLoadingUI()}},Object.defineProperty(r.prototype,"loadingScreen",{get:function(){return!this._loadingScreen&&t.DefaultLoadingScreen&&this._renderingCanvas&&(this._loadingScreen=new t.DefaultLoadingScreen(this._renderingCanvas)),this._loadingScreen},set:function(t){this._loadingScreen=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadingUIText",{set:function(t){this.loadingScreen.loadingUIText=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadingUIBackgroundColor",{set:function(t){this.loadingScreen.loadingUIBackgroundColor=t},enumerable:!0,configurable:!0}),r.prototype.attachContextLostEvent=function(t){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextlost",t,!1)},r.prototype.attachContextRestoredEvent=function(t){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextrestored",t,!1)},r.prototype.getVertexShaderSource=function(t){var e=this._gl.getAttachedShaders(t);return e?this._gl.getShaderSource(e[0]):null},r.prototype.getFragmentShaderSource=function(t){var e=this._gl.getAttachedShaders(t);return e?this._gl.getShaderSource(e[1]):null},r.prototype.getError=function(){return this._gl.getError()},r.prototype.getFps=function(){return this._fps},r.prototype.getDeltaTime=function(){return this._deltaTime},r.prototype._measureFps=function(){this._performanceMonitor.sampleFrame(),this._fps=this._performanceMonitor.averageFPS,this._deltaTime=this._performanceMonitor.instantaneousFrameTime||0},r.prototype._readTexturePixels=function(t,e,i,n){void 0===n&&(n=-1);var r=this._gl;if(!this._dummyFramebuffer){var o=r.createFramebuffer();if(!o)throw new Error("Unable to create dummy framebuffer");this._dummyFramebuffer=o}r.bindFramebuffer(r.FRAMEBUFFER,this._dummyFramebuffer),n>-1?r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+n,t._webGLTexture,0):r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t._webGLTexture,0);var s,a=void 0!==t.type?this._getWebGLTextureType(t.type):r.UNSIGNED_BYTE;switch(a){case r.UNSIGNED_BYTE:s=new Uint8Array(4*e*i),a=r.UNSIGNED_BYTE;break;default:s=new Float32Array(4*e*i),a=r.FLOAT}return r.readPixels(0,0,e,i,r.RGBA,a,s),r.bindFramebuffer(r.FRAMEBUFFER,this._currentFramebuffer),s},r.prototype._canRenderToFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(r.TEXTURETYPE_FLOAT)},r.prototype._canRenderToHalfFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(r.TEXTURETYPE_HALF_FLOAT)},r.prototype._canRenderToFramebuffer=function(t){for(var e=this._gl;e.getError()!==e.NO_ERROR;);var i=!0,n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(t),1,1,0,e.RGBA,this._getWebGLTextureType(t),null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);if((i=(i=i&&o===e.FRAMEBUFFER_COMPLETE)&&e.getError()===e.NO_ERROR)&&(e.clear(e.COLOR_BUFFER_BIT),i=i&&e.getError()===e.NO_ERROR),i){e.bindFramebuffer(e.FRAMEBUFFER,null);var s=e.RGBA,a=e.UNSIGNED_BYTE,l=new Uint8Array(4);e.readPixels(0,0,1,1,s,a,l),i=i&&e.getError()===e.NO_ERROR}for(e.deleteTexture(n),e.deleteFramebuffer(r),e.bindFramebuffer(e.FRAMEBUFFER,null);!i&&e.getError()!==e.NO_ERROR;);return i},r.prototype._getWebGLTextureType=function(t){return t===r.TEXTURETYPE_FLOAT?this._gl.FLOAT:t===r.TEXTURETYPE_HALF_FLOAT?this._gl.HALF_FLOAT_OES:this._gl.UNSIGNED_BYTE},r.prototype._getRGBABufferInternalSizedFormat=function(t){return 1===this._webGLVersion?this._gl.RGBA:t===r.TEXTURETYPE_FLOAT?this._gl.RGBA32F:t===r.TEXTURETYPE_HALF_FLOAT?this._gl.RGBA16F:this._gl.RGBA},r.prototype._getRGBAMultiSampleBufferFormat=function(t){return t===r.TEXTURETYPE_FLOAT?this._gl.RGBA32F:t===r.TEXTURETYPE_HALF_FLOAT?this._gl.RGBA16F:this._gl.RGBA8},r.prototype.createQuery=function(){return this._gl.createQuery()},r.prototype.deleteQuery=function(t){return this._gl.deleteQuery(t),this},r.prototype.isQueryResultAvailable=function(t){return this._gl.getQueryParameter(t,this._gl.QUERY_RESULT_AVAILABLE)},r.prototype.getQueryResult=function(t){return this._gl.getQueryParameter(t,this._gl.QUERY_RESULT)},r.prototype.beginOcclusionQuery=function(t,e){var i=this.getGlAlgorithmType(t);return this._gl.beginQuery(i,e),this},r.prototype.endOcclusionQuery=function(t){var e=this.getGlAlgorithmType(t);return this._gl.endQuery(e),this},r.prototype._createTimeQuery=function(){var t=this._caps.timerQuery;return t.createQueryEXT?t.createQueryEXT():this.createQuery()},r.prototype._deleteTimeQuery=function(t){var e=this._caps.timerQuery;e.deleteQueryEXT?e.deleteQueryEXT(t):this.deleteQuery(t)},r.prototype._getTimeQueryResult=function(t){var e=this._caps.timerQuery;return e.getQueryObjectEXT?e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT):this.getQueryResult(t)},r.prototype._getTimeQueryAvailability=function(t){var e=this._caps.timerQuery;return e.getQueryObjectEXT?e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT):this.isQueryResultAvailable(t)},r.prototype.startTimeQuery=function(){var e=this._caps.timerQuery;if(!e)return null;var i=new t._TimeToken;if(this._gl.getParameter(e.GPU_DISJOINT_EXT),this._caps.canUseTimestampForTimerQuery)i._startTimeQuery=this._createTimeQuery(),e.queryCounterEXT(i._startTimeQuery,e.TIMESTAMP_EXT);else{if(this._currentNonTimestampToken)return this._currentNonTimestampToken;i._timeElapsedQuery=this._createTimeQuery(),e.beginQueryEXT?e.beginQueryEXT(e.TIME_ELAPSED_EXT,i._timeElapsedQuery):this._gl.beginQuery(e.TIME_ELAPSED_EXT,i._timeElapsedQuery),this._currentNonTimestampToken=i}return i},r.prototype.endTimeQuery=function(t){var e=this._caps.timerQuery;if(!e||!t)return-1;if(this._caps.canUseTimestampForTimerQuery){if(!t._startTimeQuery)return-1;t._endTimeQuery||(t._endTimeQuery=this._createTimeQuery(),e.queryCounterEXT(t._endTimeQuery,e.TIMESTAMP_EXT))}else if(!t._timeElapsedQueryEnded){if(!t._timeElapsedQuery)return-1;e.endQueryEXT?e.endQueryEXT(e.TIME_ELAPSED_EXT):this._gl.endQuery(e.TIME_ELAPSED_EXT),t._timeElapsedQueryEnded=!0}var i=this._gl.getParameter(e.GPU_DISJOINT_EXT),n=!1;if(t._endTimeQuery?n=this._getTimeQueryAvailability(t._endTimeQuery):t._timeElapsedQuery&&(n=this._getTimeQueryAvailability(t._timeElapsedQuery)),n&&!i){var r=0;if(this._caps.canUseTimestampForTimerQuery){if(!t._startTimeQuery||!t._endTimeQuery)return-1;var o=this._getTimeQueryResult(t._startTimeQuery);r=this._getTimeQueryResult(t._endTimeQuery)-o,this._deleteTimeQuery(t._startTimeQuery),this._deleteTimeQuery(t._endTimeQuery),t._startTimeQuery=null,t._endTimeQuery=null}else{if(!t._timeElapsedQuery)return-1;r=this._getTimeQueryResult(t._timeElapsedQuery),this._deleteTimeQuery(t._timeElapsedQuery),t._timeElapsedQuery=null,t._timeElapsedQueryEnded=!1,this._currentNonTimestampToken=null}return r}return-1},r.prototype.getGlAlgorithmType=function(e){return e===t.AbstractMesh.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE?this._gl.ANY_SAMPLES_PASSED_CONSERVATIVE:this._gl.ANY_SAMPLES_PASSED},r.prototype.createTransformFeedback=function(){return this._gl.createTransformFeedback()},r.prototype.deleteTransformFeedback=function(t){this._gl.deleteTransformFeedback(t)},r.prototype.bindTransformFeedback=function(t){this._gl.bindTransformFeedback(this._gl.TRANSFORM_FEEDBACK,t)},r.prototype.beginTransformFeedback=function(t){void 0===t&&(t=!0),this._gl.beginTransformFeedback(t?this._gl.POINTS:this._gl.TRIANGLES)},r.prototype.endTransformFeedback=function(){this._gl.endTransformFeedback()},r.prototype.setTranformFeedbackVaryings=function(t,e){this._gl.transformFeedbackVaryings(t,e,this._gl.INTERLEAVED_ATTRIBS)},r.prototype.bindTransformFeedbackBuffer=function(t){this._gl.bindBufferBase(this._gl.TRANSFORM_FEEDBACK_BUFFER,0,t)},r.prototype._loadFile=function(e,i,n,r,o,s){var a=this,l=t.Tools.LoadFile(e,i,n,r,o,s);return this._activeRequests.push(l),l.onCompleteObservable.add(function(t){a._activeRequests.splice(a._activeRequests.indexOf(t),1)}),l},r.prototype._loadFileAsync=function(t,e,i){var n=this;return new Promise(function(r,o){n._loadFile(t,function(t){r(t)},void 0,e,i,function(t,e){o(e)})})},r.prototype._partialLoadFile=function(t,e,i,n,r,o){void 0===o&&(o=null);this._loadFile(t,function(t){i[e]=t,6==++i._internalCount&&r(i)},void 0,void 0,!0,function(t,e){o&&t&&o(t.status+" "+t.statusText,e)})},r.prototype._cascadeLoadFiles=function(t,e,i,n,r){void 0===r&&(r=null);var o=[];o._internalCount=0;for(var s=0;s<6;s++)this._partialLoadFile(n[s],s,o,e,i,r)},r.isSupported=function(){try{var t=document.createElement("canvas");return null!=(t.getContext("webgl")||t.getContext("experimental-webgl"))&&!!window.WebGLRenderingContext}catch(t){return!1}},r.ExceptionList=[{key:"Chrome/63.0",capture:"63\\.0\\.3239\\.(\\d+)",captureConstraint:108,targets:["uniformBuffer"]},{key:"Firefox/58",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Macintosh",capture:null,captureConstraint:null,targets:["textureBindingOptimization"]},{key:"iPhone",capture:null,captureConstraint:null,targets:["textureBindingOptimization"]}],r.Instances=new Array,r._ALPHA_DISABLE=0,r._ALPHA_ADD=1,r._ALPHA_COMBINE=2,r._ALPHA_SUBTRACT=3,r._ALPHA_MULTIPLY=4,r._ALPHA_MAXIMIZED=5,r._ALPHA_ONEONE=6,r._ALPHA_PREMULTIPLIED=7,r._ALPHA_PREMULTIPLIED_PORTERDUFF=8,r._ALPHA_INTERPOLATE=9,r._ALPHA_SCREENMODE=10,r._DELAYLOADSTATE_NONE=0,r._DELAYLOADSTATE_LOADED=1,r._DELAYLOADSTATE_LOADING=2,r._DELAYLOADSTATE_NOTLOADED=4,r._TEXTUREFORMAT_ALPHA=0,r._TEXTUREFORMAT_LUMINANCE=1,r._TEXTUREFORMAT_LUMINANCE_ALPHA=2,r._TEXTUREFORMAT_RGB=4,r._TEXTUREFORMAT_RGBA=5,r._TEXTURETYPE_UNSIGNED_INT=0,r._TEXTURETYPE_FLOAT=1,r._TEXTURETYPE_HALF_FLOAT=2,r._NEVER=512,r._ALWAYS=519,r._LESS=513,r._EQUAL=514,r._LEQUAL=515,r._GREATER=516,r._GEQUAL=518,r._NOTEQUAL=517,r._KEEP=7680,r._REPLACE=7681,r._INCR=7682,r._DECR=7683,r._INVERT=5386,r._INCR_WRAP=34055,r._DECR_WRAP=34056,r._SCALEMODE_FLOOR=1,r._SCALEMODE_NEAREST=2,r._SCALEMODE_CEILING=3,r.CollisionsEpsilon=.001,r.CodeRepository="src/",r.ShadersRepository="src/Shaders/",r}();t.Engine=u}(l||(l={})),function(t){var e=function(){function e(e,i){void 0===i&&(i=null),this.state="",this.metadata=null,this.doNotSerialize=!1,this.animations=new Array,this._ranges={},this._isEnabled=!0,this._isReady=!0,this._currentRenderId=-1,this._parentRenderId=-1,this.onDisposeObservable=new t.Observable,this._behaviors=new Array,this.name=e,this.id=e,this._scene=i||t.Engine.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._initCache()}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parentNode},set:function(t){if(this._parentNode!==t){if(this._parentNode&&void 0!==this._parentNode._children&&null!==this._parentNode._children){var e=this._parentNode._children.indexOf(this);-1!==e&&this._parentNode._children.splice(e,1)}this._parentNode=t,this._parentNode&&(void 0!==this._parentNode._children&&null!==this._parentNode._children||(this._parentNode._children=new Array),this._parentNode._children.push(this))}},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"Node"},Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEngine=function(){return this._scene.getEngine()},e.prototype.addBehavior=function(t){var e=this;if(-1!==this._behaviors.indexOf(t))return this;if(t.init(),this._scene.isLoading)var i=this._scene.onDataLoadedObservable.add(function(){t.attach(e),setTimeout(function(){e._scene.onDataLoadedObservable.remove(i)},0)});else t.attach(this);return this._behaviors.push(t),this},e.prototype.removeBehavior=function(t){var e=this._behaviors.indexOf(t);return-1===e?this:(this._behaviors[e].detach(),this._behaviors.splice(e,1),this)},Object.defineProperty(e.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),e.prototype.getBehaviorByName=function(t){for(var e=0,i=this._behaviors;e<i.length;e++){var n=i[e];if(n.name===t)return n}return null},e.prototype.getWorldMatrix=function(){return t.Matrix.Identity()},e.prototype._initCache=function(){this._cache={},this._cache.parent=void 0},e.prototype.updateCache=function(t){!t&&this.isSynchronized()||(this._cache.parent=this.parent,this._updateCache())},e.prototype._updateCache=function(t){},e.prototype._isSynchronized=function(){return!0},e.prototype._markSyncedWithParent=function(){this.parent&&(this._parentRenderId=this.parent._currentRenderId)},e.prototype.isSynchronizedWithParent=function(){return!this.parent||this._parentRenderId===this.parent._currentRenderId&&this.parent.isSynchronized()},e.prototype.isSynchronized=function(t){var e=this.hasNewParent();return e=(e=e||!this.isSynchronizedWithParent())||!this._isSynchronized(),t&&this.updateCache(!0),!e},e.prototype.hasNewParent=function(t){return this._cache.parent!==this.parent&&(t&&(this._cache.parent=this.parent),!0)},e.prototype.isReady=function(){return this._isReady},e.prototype.isEnabled=function(t){return void 0===t&&(t=!0),!1===t?this._isEnabled:!1!==this._isEnabled&&(void 0===this.parent||null===this.parent||this.parent.isEnabled(t))},e.prototype.setEnabled=function(t){this._isEnabled=t},e.prototype.isDescendantOf=function(t){return!!this.parent&&(this.parent===t||this.parent.isDescendantOf(t))},e.prototype._getDescendants=function(t,e,i){if(void 0===e&&(e=!1),this._children)for(var n=0;n<this._children.length;n++){var r=this._children[n];i&&!i(r)||t.push(r),e||r._getDescendants(t,!1,i)}},e.prototype.getDescendants=function(t,e){var i=new Array;return this._getDescendants(i,t,e),i},e.prototype.getChildMeshes=function(e,i){var n=[];return this._getDescendants(n,e,function(e){return(!i||i(e))&&e instanceof t.AbstractMesh}),n},e.prototype.getChildTransformNodes=function(e,i){var n=[];return this._getDescendants(n,e,function(e){return(!i||i(e))&&e instanceof t.TransformNode}),n},e.prototype.getChildren=function(t){return this.getDescendants(!0,t)},e.prototype._setReady=function(t){if(t!==this._isReady){if(!t)return void(this._isReady=!1);this._isReady=!0,this.onReady&&this.onReady(this)}},e.prototype.getAnimationByName=function(t){for(var e=0;e<this.animations.length;e++){var i=this.animations[e];if(i.name===t)return i}return null},e.prototype.createAnimationRange=function(e,i,n){if(!this._ranges[e]){this._ranges[e]=new t.AnimationRange(e,i,n);for(var r=0,o=this.animations.length;r<o;r++)this.animations[r]&&this.animations[r].createRange(e,i,n)}},e.prototype.deleteAnimationRange=function(t,e){void 0===e&&(e=!0);for(var i=0,n=this.animations.length;i<n;i++)this.animations[i]&&this.animations[i].deleteRange(t,e);this._ranges[t]=null},e.prototype.getAnimationRange=function(t){return this._ranges[t]},e.prototype.beginAnimation=function(t,e,i,n){var r=this.getAnimationRange(t);return r?this._scene.beginAnimation(this,r.from,r.to,e,i,n):null},e.prototype.serializeAnimationRanges=function(){var t=[];for(var e in this._ranges){var i=this._ranges[e];if(i){var n={};n.name=e,n.from=i.from,n.to=i.to,t.push(n)}}return t},e.prototype.computeWorldMatrix=function(e){return t.Matrix.Identity()},e.prototype.dispose=function(){this.parent=null,this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear();for(var t=0,e=this._behaviors;t<e.length;t++)e[t].detach();this._behaviors=[]},e.ParseAnimationRanges=function(t,e,i){if(e.ranges)for(var n=0;n<e.ranges.length;n++){var r=e.ranges[n];t.createAnimationRange(r.name,r.from,r.to)}},r([t.serialize()],e.prototype,"name",void 0),r([t.serialize()],e.prototype,"id",void 0),r([t.serialize()],e.prototype,"uniqueId",void 0),r([t.serialize()],e.prototype,"state",void 0),r([t.serialize()],e.prototype,"metadata",void 0),e}();t.Node=e}(l||(l={})),function(t){var e=function(){function e(e,i){this.minimum=e,this.maximum=i,this._tempRadiusVector=t.Vector3.Zero();var n=t.Vector3.Distance(e,i);this.center=t.Vector3.Lerp(e,i,.5),this.radius=.5*n,this.centerWorld=t.Vector3.Zero(),this._update(t.Matrix.Identity())}return e.prototype._update=function(e){t.Vector3.TransformCoordinatesToRef(this.center,e,this.centerWorld),t.Vector3.TransformNormalFromFloatsToRef(1,1,1,e,this._tempRadiusVector),this.radiusWorld=Math.max(Math.abs(this._tempRadiusVector.x),Math.abs(this._tempRadiusVector.y),Math.abs(this._tempRadiusVector.z))*this.radius},e.prototype.isInFrustum=function(t){for(var e=0;e<6;e++)if(t[e].dotCoordinate(this.centerWorld)<=-this.radiusWorld)return!1;return!0},e.prototype.intersectsPoint=function(e){var i=this.centerWorld.x-e.x,n=this.centerWorld.y-e.y,r=this.centerWorld.z-e.z,o=Math.sqrt(i*i+n*n+r*r);return!(Math.abs(this.radiusWorld-o)<t.Epsilon)},e.Intersects=function(t,e){var i=t.centerWorld.x-e.centerWorld.x,n=t.centerWorld.y-e.centerWorld.y,r=t.centerWorld.z-e.centerWorld.z,o=Math.sqrt(i*i+n*n+r*r);return!(t.radiusWorld+e.radiusWorld<o)},e}();t.BoundingSphere=e}(l||(l={})),function(t){var e=function(){function e(e,i){this.minimum=e,this.maximum=i,this.vectors=new Array,this.vectorsWorld=new Array,this.vectors.push(this.minimum.clone()),this.vectors.push(this.maximum.clone()),this.vectors.push(this.minimum.clone()),this.vectors[2].x=this.maximum.x,this.vectors.push(this.minimum.clone()),this.vectors[3].y=this.maximum.y,this.vectors.push(this.minimum.clone()),this.vectors[4].z=this.maximum.z,this.vectors.push(this.maximum.clone()),this.vectors[5].z=this.minimum.z,this.vectors.push(this.maximum.clone()),this.vectors[6].x=this.minimum.x,this.vectors.push(this.maximum.clone()),this.vectors[7].y=this.minimum.y,this.center=this.maximum.add(this.minimum).scale(.5),this.extendSize=this.maximum.subtract(this.minimum).scale(.5),this.directions=[t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero()];for(var n=0;n<this.vectors.length;n++)this.vectorsWorld[n]=t.Vector3.Zero();this.minimumWorld=t.Vector3.Zero(),this.maximumWorld=t.Vector3.Zero(),this.centerWorld=t.Vector3.Zero(),this.extendSizeWorld=t.Vector3.Zero(),this._update(t.Matrix.Identity())}return e.prototype.getWorldMatrix=function(){return this._worldMatrix},e.prototype.setWorldMatrix=function(t){return this._worldMatrix.copyFrom(t),this},e.prototype._update=function(e){t.Vector3.FromFloatsToRef(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,this.minimumWorld),t.Vector3.FromFloatsToRef(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,this.maximumWorld);for(var i=0;i<this.vectors.length;i++){var n=this.vectorsWorld[i];t.Vector3.TransformCoordinatesToRef(this.vectors[i],e,n),n.x<this.minimumWorld.x&&(this.minimumWorld.x=n.x),n.y<this.minimumWorld.y&&(this.minimumWorld.y=n.y),n.z<this.minimumWorld.z&&(this.minimumWorld.z=n.z),n.x>this.maximumWorld.x&&(this.maximumWorld.x=n.x),n.y>this.maximumWorld.y&&(this.maximumWorld.y=n.y),n.z>this.maximumWorld.z&&(this.maximumWorld.z=n.z)}this.maximumWorld.subtractToRef(this.minimumWorld,this.extendSizeWorld),this.extendSizeWorld.scaleInPlace(.5),this.maximumWorld.addToRef(this.minimumWorld,this.centerWorld),this.centerWorld.scaleInPlace(.5),t.Vector3.FromFloatArrayToRef(e.m,0,this.directions[0]),t.Vector3.FromFloatArrayToRef(e.m,4,this.directions[1]),t.Vector3.FromFloatArrayToRef(e.m,8,this.directions[2]),this._worldMatrix=e},e.prototype.isInFrustum=function(t){return e.IsInFrustum(this.vectorsWorld,t)},e.prototype.isCompletelyInFrustum=function(t){return e.IsCompletelyInFrustum(this.vectorsWorld,t)},e.prototype.intersectsPoint=function(e){var i=-t.Epsilon;return!(this.maximumWorld.x-e.x<i||i>e.x-this.minimumWorld.x||this.maximumWorld.y-e.y<i||i>e.y-this.minimumWorld.y||this.maximumWorld.z-e.z<i||i>e.z-this.minimumWorld.z)},e.prototype.intersectsSphere=function(t){return e.IntersectsSphere(this.minimumWorld,this.maximumWorld,t.centerWorld,t.radiusWorld)},e.prototype.intersectsMinMax=function(t,e){return!(this.maximumWorld.x<t.x||this.minimumWorld.x>e.x||this.maximumWorld.y<t.y||this.minimumWorld.y>e.y||this.maximumWorld.z<t.z||this.minimumWorld.z>e.z)},e.Intersects=function(t,e){return!(t.maximumWorld.x<e.minimumWorld.x||t.minimumWorld.x>e.maximumWorld.x||t.maximumWorld.y<e.minimumWorld.y||t.minimumWorld.y>e.maximumWorld.y||t.maximumWorld.z<e.minimumWorld.z||t.minimumWorld.z>e.maximumWorld.z)},e.IntersectsSphere=function(e,i,n,r){var o=t.Vector3.Clamp(n,e,i);return t.Vector3.DistanceSquared(n,o)<=r*r},e.IsCompletelyInFrustum=function(t,e){for(var i=0;i<6;i++)for(var n=0;n<8;n++)if(e[i].dotCoordinate(t[n])<0)return!1;return!0},e.IsInFrustum=function(t,e){for(var i=0;i<6;i++){for(var n=8,r=0;r<8&&e[i].dotCoordinate(t[r])<0;r++)--n;if(0===n)return!1}return!0},e}();t.BoundingBox=e}(l||(l={})),function(t){var e=function(e,i){var n=t.Vector3.Dot(i.centerWorld,e),r=Math.abs(t.Vector3.Dot(i.directions[0],e))*i.extendSize.x+Math.abs(t.Vector3.Dot(i.directions[1],e))*i.extendSize.y+Math.abs(t.Vector3.Dot(i.directions[2],e))*i.extendSize.z;return{min:n-r,max:n+r}},i=function(t,i,n){var r=e(t,i),o=e(t,n);return function(t,e,i,n){return!(t>n||i>e)}(r.min,r.max,o.min,o.max)},n=function(){function e(e,i){this.minimum=e,this.maximum=i,this._isLocked=!1,this.boundingBox=new t.BoundingBox(e,i),this.boundingSphere=new t.BoundingSphere(e,i)}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this._isLocked},set:function(t){this._isLocked=t},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this._isLocked||(this.boundingBox._update(t),this.boundingSphere._update(t))},e.prototype.centerOn=function(e,i){return this.minimum=e.subtract(i),this.maximum=e.add(i),this.boundingBox=new t.BoundingBox(this.minimum,this.maximum),this.boundingSphere=new t.BoundingSphere(this.minimum,this.maximum),this},e.prototype.isInFrustum=function(t){return!!this.boundingSphere.isInFrustum(t)&&this.boundingBox.isInFrustum(t)},Object.defineProperty(e.prototype,"diagonalLength",{get:function(){var t=this.boundingBox;return t.maximumWorld.subtract(t.minimumWorld).length()},enumerable:!0,configurable:!0}),e.prototype.isCompletelyInFrustum=function(t){return this.boundingBox.isCompletelyInFrustum(t)},e.prototype._checkCollision=function(t){return t._canDoCollision(this.boundingSphere.centerWorld,this.boundingSphere.radiusWorld,this.boundingBox.minimumWorld,this.boundingBox.maximumWorld)},e.prototype.intersectsPoint=function(t){return!!this.boundingSphere.centerWorld&&!!this.boundingSphere.intersectsPoint(t)&&!!this.boundingBox.intersectsPoint(t)},e.prototype.intersects=function(e,n){if(!this.boundingSphere.centerWorld||!e.boundingSphere.centerWorld)return!1;if(!t.BoundingSphere.Intersects(this.boundingSphere,e.boundingSphere))return!1;if(!t.BoundingBox.Intersects(this.boundingBox,e.boundingBox))return!1;if(!n)return!0;var r=this.boundingBox,o=e.boundingBox;return!!(i(r.directions[0],r,o)&&i(r.directions[1],r,o)&&i(r.directions[2],r,o)&&i(o.directions[0],r,o)&&i(o.directions[1],r,o)&&i(o.directions[2],r,o)&&i(t.Vector3.Cross(r.directions[0],o.directions[0]),r,o)&&i(t.Vector3.Cross(r.directions[0],o.directions[1]),r,o)&&i(t.Vector3.Cross(r.directions[0],o.directions[2]),r,o)&&i(t.Vector3.Cross(r.directions[1],o.directions[0]),r,o)&&i(t.Vector3.Cross(r.directions[1],o.directions[1]),r,o)&&i(t.Vector3.Cross(r.directions[1],o.directions[2]),r,o)&&i(t.Vector3.Cross(r.directions[2],o.directions[0]),r,o)&&i(t.Vector3.Cross(r.directions[2],o.directions[1]),r,o)&&i(t.Vector3.Cross(r.directions[2],o.directions[2]),r,o))},e}();t.BoundingInfo=n}(l||(l={})),function(t){var e=function(e){function i(i,n,r){void 0===n&&(n=null),void 0===r&&(r=!0);var o=e.call(this,i,n)||this;return o._rotation=t.Vector3.Zero(),o._scaling=t.Vector3.One(),o._isDirty=!1,o.billboardMode=t.AbstractMesh.BILLBOARDMODE_NONE,o.scalingDeterminant=1,o.infiniteDistance=!1,o.position=t.Vector3.Zero(),o._localWorld=t.Matrix.Zero(),o._worldMatrix=t.Matrix.Zero(),o._worldMatrixDeterminant=0,o._absolutePosition=t.Vector3.Zero(),o._pivotMatrix=t.Matrix.Identity(),o._postMultiplyPivotMatrix=!1,o._isWorldMatrixFrozen=!1,o.onAfterWorldMatrixUpdateObservable=new t.Observable,o._nonUniformScaling=!1,r&&o.getScene().addTransformNode(o),o}return o(i,e),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaling",{get:function(){return this._scaling},set:function(t){this._scaling=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationQuaternion",{get:function(){return this._rotationQuaternion},set:function(t){this._rotationQuaternion=t,t&&this.rotation.length()&&this.rotation.copyFromFloats(0,0,0)},enumerable:!0,configurable:!0}),i.prototype.getWorldMatrix=function(){return this._currentRenderId!==this.getScene().getRenderId()&&this.computeWorldMatrix(),this._worldMatrix},i.prototype._getWorldMatrixDeterminant=function(){return this._worldMatrixDeterminant},Object.defineProperty(i.prototype,"worldMatrixFromCache",{get:function(){return this._worldMatrix},enumerable:!0,configurable:!0}),i.prototype.updatePoseMatrix=function(t){return this._poseMatrix.copyFrom(t),this},i.prototype.getPoseMatrix=function(){return this._poseMatrix},i.prototype._isSynchronized=function(){return!(this._isDirty||this.billboardMode!==this._cache.billboardMode||this.billboardMode!==t.AbstractMesh.BILLBOARDMODE_NONE||this._cache.pivotMatrixUpdated||this.infiniteDistance||!this._cache.position.equals(this.position)||this.rotationQuaternion&&!this._cache.rotationQuaternion.equals(this.rotationQuaternion)||!this._cache.rotation.equals(this.rotation)||!this._cache.scaling.equals(this.scaling))},i.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.localMatrixUpdated=!1,this._cache.position=t.Vector3.Zero(),this._cache.scaling=t.Vector3.Zero(),this._cache.rotation=t.Vector3.Zero(),this._cache.rotationQuaternion=new t.Quaternion(0,0,0,0),this._cache.billboardMode=-1},i.prototype.markAsDirty=function(t){return"rotation"===t&&(this.rotationQuaternion=null),this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this},Object.defineProperty(i.prototype,"absolutePosition",{get:function(){return this._absolutePosition},enumerable:!0,configurable:!0}),i.prototype.setPreTransformMatrix=function(t){return this.setPivotMatrix(t,!1)},i.prototype.setPivotMatrix=function(e,i){return void 0===i&&(i=!0),this._pivotMatrix=e.clone(),this._cache.pivotMatrixUpdated=!0,this._postMultiplyPivotMatrix=i,this._postMultiplyPivotMatrix&&(this._pivotMatrixInverse?this._pivotMatrix.invertToRef(this._pivotMatrixInverse):this._pivotMatrixInverse=t.Matrix.Invert(this._pivotMatrix)),this},i.prototype.getPivotMatrix=function(){return this._pivotMatrix},i.prototype.freezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this._isWorldMatrixFrozen=!0,this},i.prototype.unfreezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this},Object.defineProperty(i.prototype,"isWorldMatrixFrozen",{get:function(){return this._isWorldMatrixFrozen},enumerable:!0,configurable:!0}),i.prototype.getAbsolutePosition=function(){return this.computeWorldMatrix(),this._absolutePosition},i.prototype.setAbsolutePosition=function(e){if(!e)return this;var i,n,r;if(void 0===e.x){if(arguments.length<3)return this;i=arguments[0],n=arguments[1],r=arguments[2]}else i=e.x,n=e.y,r=e.z;if(this.parent){var o=this.parent.getWorldMatrix().clone();o.invert();var s=new t.Vector3(i,n,r);this.position=t.Vector3.TransformCoordinates(s,o)}else this.position.x=i,this.position.y=n,this.position.z=r;return this},i.prototype.setPositionWithLocalVector=function(e){return this.computeWorldMatrix(),this.position=t.Vector3.TransformNormal(e,this._localWorld),this},i.prototype.getPositionExpressedInLocalSpace=function(){this.computeWorldMatrix();var e=this._localWorld.clone();return e.invert(),t.Vector3.TransformNormal(this.position,e)},i.prototype.locallyTranslate=function(e){return this.computeWorldMatrix(!0),this.position=t.Vector3.TransformCoordinates(e,this._localWorld),this},i.prototype.lookAt=function(e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=t.Space.LOCAL);var s=t.AbstractMesh._lookAtVectorCache,a=o===t.Space.LOCAL?this.position:this.getAbsolutePosition();e.subtractToRef(a,s);var l=-Math.atan2(s.z,s.x)-Math.PI/2,c=Math.sqrt(s.x*s.x+s.z*s.z),u=Math.atan2(s.y,c);return this.rotationQuaternion?t.Quaternion.RotationYawPitchRollToRef(l+i,u+n,r,this.rotationQuaternion):(this.rotation.x=u+n,this.rotation.y=l+i,this.rotation.z=r),this},i.prototype.getDirection=function(e){var i=t.Vector3.Zero();return this.getDirectionToRef(e,i),i},i.prototype.getDirectionToRef=function(e,i){return t.Vector3.TransformNormalToRef(e,this.getWorldMatrix(),i),this},i.prototype.setPivotPoint=function(e,i){void 0===i&&(i=t.Space.LOCAL),0==this.getScene().getRenderId()&&this.computeWorldMatrix(!0);var n=this.getWorldMatrix();if(i==t.Space.WORLD){var r=t.Tmp.Matrix[0];n.invertToRef(r),e=t.Vector3.TransformCoordinates(e,r)}return this.setPivotMatrix(t.Matrix.Translation(-e.x,-e.y,-e.z),!0)},i.prototype.getPivotPoint=function(){var e=t.Vector3.Zero();return this.getPivotPointToRef(e),e},i.prototype.getPivotPointToRef=function(t){return t.x=-this._pivotMatrix.m[12],t.y=-this._pivotMatrix.m[13],t.z=-this._pivotMatrix.m[14],this},i.prototype.getAbsolutePivotPoint=function(){var e=t.Vector3.Zero();return this.getAbsolutePivotPointToRef(e),e},i.prototype.getAbsolutePivotPointToRef=function(e){return e.x=this._pivotMatrix.m[12],e.y=this._pivotMatrix.m[13],e.z=this._pivotMatrix.m[14],this.getPivotPointToRef(e),t.Vector3.TransformCoordinatesToRef(e,this.getWorldMatrix(),e),this},i.prototype.setParent=function(e){if(null===e){var i=t.Tmp.Quaternion[0],n=t.Tmp.Vector3[0],r=t.Tmp.Vector3[1];this.parent&&this.parent.computeWorldMatrix&&this.parent.computeWorldMatrix(!0),this.computeWorldMatrix(!0),this.getWorldMatrix().decompose(r,i,n),this.rotationQuaternion?this.rotationQuaternion.copyFrom(i):i.toEulerAnglesToRef(this.rotation),this.scaling.x=r.x,this.scaling.y=r.y,this.scaling.z=r.z,this.position.x=n.x,this.position.y=n.y,this.position.z=n.z}else{i=t.Tmp.Quaternion[0],n=t.Tmp.Vector3[0],r=t.Tmp.Vector3[1];var o=t.Tmp.Matrix[0],s=t.Tmp.Matrix[1];this.computeWorldMatrix(!0),e.computeWorldMatrix(!0),e.getWorldMatrix().invertToRef(s),this.getWorldMatrix().multiplyToRef(s,o),o.decompose(r,i,n),this.rotationQuaternion?this.rotationQuaternion.copyFrom(i):i.toEulerAnglesToRef(this.rotation),this.position.x=n.x,this.position.y=n.y,this.position.z=n.z,this.scaling.x=r.x,this.scaling.y=r.y,this.scaling.z=r.z}return this.parent=e,this},Object.defineProperty(i.prototype,"nonUniformScaling",{get:function(){return this._nonUniformScaling},enumerable:!0,configurable:!0}),i.prototype._updateNonUniformScalingState=function(t){return this._nonUniformScaling!==t&&(this._nonUniformScaling=!0,!0)},i.prototype.attachToBone=function(t,e){return this._transformToBoneReferal=e,this.parent=t,t.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this},i.prototype.detachFromBone=function(){return this.parent?(this.parent.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this._transformToBoneReferal=null,this.parent=null,this):this},i.prototype.rotate=function(e,i,n){var r;if(e.normalize(),this.rotationQuaternion||(this.rotationQuaternion=t.Quaternion.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z),this.rotation=t.Vector3.Zero()),n&&n!==t.Space.LOCAL){if(this.parent){var o=this.parent.getWorldMatrix().clone();o.invert(),e=t.Vector3.TransformNormal(e,o)}(r=t.Quaternion.RotationAxisToRef(e,i,t.AbstractMesh._rotationAxisCache)).multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)}else r=t.Quaternion.RotationAxisToRef(e,i,t.AbstractMesh._rotationAxisCache),this.rotationQuaternion.multiplyToRef(r,this.rotationQuaternion);return this},i.prototype.rotateAround=function(e,i,n){return i.normalize(),this.rotationQuaternion||(this.rotationQuaternion=t.Quaternion.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z),this.rotation.copyFromFloats(0,0,0)),e.subtractToRef(this.position,t.Tmp.Vector3[0]),t.Matrix.TranslationToRef(t.Tmp.Vector3[0].x,t.Tmp.Vector3[0].y,t.Tmp.Vector3[0].z,t.Tmp.Matrix[0]),t.Tmp.Matrix[0].invertToRef(t.Tmp.Matrix[2]),t.Matrix.RotationAxisToRef(i,n,t.Tmp.Matrix[1]),t.Tmp.Matrix[2].multiplyToRef(t.Tmp.Matrix[1],t.Tmp.Matrix[2]),t.Tmp.Matrix[2].multiplyToRef(t.Tmp.Matrix[0],t.Tmp.Matrix[2]),t.Tmp.Matrix[2].decompose(t.Tmp.Vector3[0],t.Tmp.Quaternion[0],t.Tmp.Vector3[1]),this.position.addInPlace(t.Tmp.Vector3[1]),t.Tmp.Quaternion[0].multiplyToRef(this.rotationQuaternion,this.rotationQuaternion),this},i.prototype.translate=function(e,i,n){var r=e.scale(i);if(n&&n!==t.Space.LOCAL)this.setAbsolutePosition(this.getAbsolutePosition().add(r));else{var o=this.getPositionExpressedInLocalSpace().add(r);this.setPositionWithLocalVector(o)}return this},i.prototype.addRotation=function(e,i,n){var r;this.rotationQuaternion?r=this.rotationQuaternion:(r=t.Tmp.Quaternion[1],t.Quaternion.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,r));var o=t.Tmp.Quaternion[0];return t.Quaternion.RotationYawPitchRollToRef(i,e,n,o),r.multiplyInPlace(o),this.rotationQuaternion||r.toEulerAnglesToRef(this.rotation),this},i.prototype.computeWorldMatrix=function(e){if(this._isWorldMatrixFrozen)return this._worldMatrix;if(!e&&this.isSynchronized(!0))return this._worldMatrix;this._cache.position.copyFrom(this.position),this._cache.scaling.copyFrom(this.scaling),this._cache.pivotMatrixUpdated=!1,this._cache.billboardMode=this.billboardMode,this._currentRenderId=this.getScene().getRenderId(),this._isDirty=!1,t.Matrix.ScalingToRef(this.scaling.x*this.scalingDeterminant,this.scaling.y*this.scalingDeterminant,this.scaling.z*this.scalingDeterminant,t.Tmp.Matrix[1]),this.rotationQuaternion&&this.rotation.length()&&(this.rotationQuaternion.multiplyInPlace(t.Quaternion.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z)),this.rotation.copyFromFloats(0,0,0)),this.rotationQuaternion?(this.rotationQuaternion.toRotationMatrix(t.Tmp.Matrix[0]),this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)):(t.Matrix.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,t.Tmp.Matrix[0]),this._cache.rotation.copyFrom(this.rotation));var i=this.getScene().activeCamera;if(this.infiniteDistance&&!this.parent&&i){var n=i.getWorldMatrix(),r=new t.Vector3(n.m[12],n.m[13],n.m[14]);t.Matrix.TranslationToRef(this.position.x+r.x,this.position.y+r.y,this.position.z+r.z,t.Tmp.Matrix[2])}else t.Matrix.TranslationToRef(this.position.x,this.position.y,this.position.z,t.Tmp.Matrix[2]);if(this._pivotMatrix.multiplyToRef(t.Tmp.Matrix[1],t.Tmp.Matrix[4]),t.Tmp.Matrix[4].multiplyToRef(t.Tmp.Matrix[0],t.Tmp.Matrix[5]),this.billboardMode!==t.AbstractMesh.BILLBOARDMODE_NONE&&i){if((this.billboardMode&t.AbstractMesh.BILLBOARDMODE_ALL)!==t.AbstractMesh.BILLBOARDMODE_ALL){var o=t.Tmp.Vector3[3];this.parent&&this.parent.getWorldMatrix?this._transformToBoneReferal?(this.parent.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),t.Tmp.Matrix[6]),t.Vector3.TransformCoordinatesToRef(this.position,t.Tmp.Matrix[6],o)):t.Vector3.TransformCoordinatesToRef(this.position,this.parent.getWorldMatrix(),o):o.copyFrom(this.position),o.subtractInPlace(i.globalPosition);var s=t.Tmp.Vector3[4].copyFromFloats(0,0,0);(this.billboardMode&t.AbstractMesh.BILLBOARDMODE_X)===t.AbstractMesh.BILLBOARDMODE_X&&(s.x=Math.atan2(-o.y,o.z)),(this.billboardMode&t.AbstractMesh.BILLBOARDMODE_Y)===t.AbstractMesh.BILLBOARDMODE_Y&&(s.y=Math.atan2(o.x,o.z)),(this.billboardMode&t.AbstractMesh.BILLBOARDMODE_Z)===t.AbstractMesh.BILLBOARDMODE_Z&&(s.z=Math.atan2(o.y,o.x)),t.Matrix.RotationYawPitchRollToRef(s.y,s.x,s.z,t.Tmp.Matrix[0])}else t.Tmp.Matrix[1].copyFrom(i.getViewMatrix()),t.Tmp.Matrix[1].setTranslationFromFloats(0,0,0),t.Tmp.Matrix[1].invertToRef(t.Tmp.Matrix[0]);t.Tmp.Matrix[1].copyFrom(t.Tmp.Matrix[5]),t.Tmp.Matrix[1].multiplyToRef(t.Tmp.Matrix[0],t.Tmp.Matrix[5])}return t.Tmp.Matrix[5].multiplyToRef(t.Tmp.Matrix[2],this._localWorld),this.parent&&this.parent.getWorldMatrix?(this.billboardMode!==t.AbstractMesh.BILLBOARDMODE_NONE?(this._transformToBoneReferal?(this.parent.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),t.Tmp.Matrix[6]),t.Tmp.Matrix[5].copyFrom(t.Tmp.Matrix[6])):t.Tmp.Matrix[5].copyFrom(this.parent.getWorldMatrix()),this._localWorld.getTranslationToRef(t.Tmp.Vector3[5]),t.Vector3.TransformCoordinatesToRef(t.Tmp.Vector3[5],t.Tmp.Matrix[5],t.Tmp.Vector3[5]),this._worldMatrix.copyFrom(this._localWorld),this._worldMatrix.setTranslation(t.Tmp.Vector3[5])):this._transformToBoneReferal?(this._localWorld.multiplyToRef(this.parent.getWorldMatrix(),t.Tmp.Matrix[6]),t.Tmp.Matrix[6].multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),this._worldMatrix)):this._localWorld.multiplyToRef(this.parent.getWorldMatrix(),this._worldMatrix),this._markSyncedWithParent()):this._worldMatrix.copyFrom(this._localWorld),this._postMultiplyPivotMatrix&&this._worldMatrix.multiplyToRef(this._pivotMatrixInverse,this._worldMatrix),this.scaling.isNonUniform?this._updateNonUniformScalingState(!0):this.parent&&this.parent._nonUniformScaling?this._updateNonUniformScalingState(this.parent._nonUniformScaling):this._updateNonUniformScalingState(!1),this._afterComputeWorldMatrix(),this._absolutePosition.copyFromFloats(this._worldMatrix.m[12],this._worldMatrix.m[13],this._worldMatrix.m[14]),this.onAfterWorldMatrixUpdateObservable.notifyObservers(this),this._poseMatrix||(this._poseMatrix=t.Matrix.Invert(this._worldMatrix)),this._worldMatrixDeterminant=this._worldMatrix.determinant(),this._worldMatrix},i.prototype._afterComputeWorldMatrix=function(){},i.prototype.registerAfterWorldMatrixUpdate=function(t){return this.onAfterWorldMatrixUpdateObservable.add(t),this},i.prototype.unregisterAfterWorldMatrixUpdate=function(t){return this.onAfterWorldMatrixUpdateObservable.removeCallback(t),this},i.prototype.clone=function(e,n,r){var o=this,s=t.SerializationHelper.Clone(function(){return new i(e,o.getScene())},this);if(s.name=e,s.id=e,n&&(s.parent=n),!r)for(var a=this.getDescendants(!0),l=0;l<a.length;l++){var c=a[l];c.clone&&c.clone(e+"."+c.name,s)}return s},i.prototype.serialize=function(e){var i=t.SerializationHelper.Serialize(this,e);return i.type=this.getClassName(),this.parent&&(i.parentId=this.parent.id),t.Tags&&t.Tags.HasTags(this)&&(i.tags=t.Tags.GetTags(this)),i.localMatrix=this.getPivotMatrix().asArray(),i.isEnabled=this.isEnabled(),this.parent&&(i.parentId=this.parent.id),i},i.Parse=function(e,n,r){var o=t.SerializationHelper.Parse(function(){return new i(e.name,n)},e,n,r);return t.Tags&&t.Tags.AddTagsTo(o,e.tags),e.localMatrix?o.setPreTransformMatrix(t.Matrix.FromArray(e.localMatrix)):e.pivotMatrix&&o.setPivotMatrix(t.Matrix.FromArray(e.pivotMatrix)),o.setEnabled(e.isEnabled),e.parentId&&(o._waitingParentId=e.parentId),o},i.prototype.dispose=function(t){if(this.getScene().stopAnimation(this),this.getScene().removeTransformNode(this),t){var i=this.getChildMeshes(!0);for(o=0;o<i.length;o++){var n=i[o];n.parent=null,n.computeWorldMatrix(!0)}}else for(var r=this.getDescendants(!0),o=0;o<r.length;o++)r[o].dispose();this.onAfterWorldMatrixUpdateObservable.clear(),e.prototype.dispose.call(this)},i.BILLBOARDMODE_NONE=0,i.BILLBOARDMODE_X=1,i.BILLBOARDMODE_Y=2,i.BILLBOARDMODE_Z=4,i.BILLBOARDMODE_ALL=7,i._lookAtVectorCache=new t.Vector3(0,0,0),i._rotationAxisCache=new t.Quaternion,r([t.serializeAsVector3()],i.prototype,"_rotation",void 0),r([t.serializeAsQuaternion()],i.prototype,"_rotationQuaternion",void 0),r([t.serializeAsVector3()],i.prototype,"_scaling",void 0),r([t.serialize()],i.prototype,"billboardMode",void 0),r([t.serialize()],i.prototype,"scalingDeterminant",void 0),r([t.serialize()],i.prototype,"infiniteDistance",void 0),r([t.serializeAsVector3()],i.prototype,"position",void 0),i}(t.Node);t.TransformNode=e}(l||(l={})),function(t){var e=function(e){function i(n,r){void 0===r&&(r=null);var o=e.call(this,n,r,!1)||this;return o._facetNb=0,o._partitioningSubdivisions=10,o._partitioningBBoxRatio=1.01,o._facetDataEnabled=!1,o._facetParameters={},o._bbSize=t.Vector3.Zero(),o._subDiv={max:1,X:1,Y:1,Z:1},o._facetDepthSort=!1,o._facetDepthSortEnabled=!1,o.onCollideObservable=new t.Observable,o.onCollisionPositionChangeObservable=new t.Observable,o.onMaterialChangedObservable=new t.Observable,o.definedFacingForward=!0,o.occlusionQueryAlgorithmType=i.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE,o.occlusionType=i.OCCLUSION_TYPE_NONE,o.occlusionRetryCount=-1,o._occlusionInternalRetryCounter=0,o._isOccluded=!1,o._isOcclusionQueryInProgress=!1,o._visibility=1,o.alphaIndex=Number.MAX_VALUE,o.isVisible=!0,o.isPickable=!0,o.showBoundingBox=!1,o.showSubMeshesBoundingBox=!1,o.isBlocker=!1,o.enablePointerMoveEvents=!1,o.renderingGroupId=0,o._receiveShadows=!1,o.renderOutline=!1,o.outlineColor=t.Color3.Red(),o.outlineWidth=.02,o.renderOverlay=!1,o.overlayColor=t.Color3.Red(),o.overlayAlpha=.5,o._hasVertexAlpha=!1,o._useVertexColors=!0,o._computeBonesUsingShaders=!0,o._numBoneInfluencers=4,o._applyFog=!0,o.useOctreeForRenderingSelection=!0,o.useOctreeForPicking=!0,o.useOctreeForCollisions=!0,o._layerMask=268435455,o.alwaysSelectAsActiveMesh=!1,o.actionManager=null,o.physicsImpostor=null,o._checkCollisions=!1,o._collisionMask=-1,o._collisionGroup=-1,o.ellipsoid=new t.Vector3(.5,1,.5),o.ellipsoidOffset=new t.Vector3(0,0,0),o._oldPositionForCollisions=new t.Vector3(0,0,0),o._diffPositionForCollisions=new t.Vector3(0,0,0),o.edgesWidth=1,o.edgesColor=new t.Color4(1,0,0,1),o._collisionsTransformMatrix=t.Matrix.Zero(),o._collisionsScalingMatrix=t.Matrix.Zero(),o._isDisposed=!1,o._renderId=0,o._intersectionsInProgress=new Array,o._unIndexed=!1,o._lightSources=new Array,o._onCollisionPositionChange=function(e,i,n){void 0===n&&(n=null),o.getScene().workerCollisions&&i.multiplyInPlace(o._collider._radius),i.subtractToRef(o._oldPositionForCollisions,o._diffPositionForCollisions),o._diffPositionForCollisions.length()>t.Engine.CollisionsEpsilon&&o.position.addInPlace(o._diffPositionForCollisions),n&&o.onCollideObservable.notifyObservers(n),o.onCollisionPositionChangeObservable.notifyObservers(o.position)},o.getScene().addMesh(o),o._resyncLightSources(),o}return o(i,e),Object.defineProperty(i,"BILLBOARDMODE_NONE",{get:function(){return t.TransformNode.BILLBOARDMODE_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"BILLBOARDMODE_X",{get:function(){return t.TransformNode.BILLBOARDMODE_X},enumerable:!0,configurable:!0}),Object.defineProperty(i,"BILLBOARDMODE_Y",{get:function(){return t.TransformNode.BILLBOARDMODE_Y},enumerable:!0,configurable:!0}),Object.defineProperty(i,"BILLBOARDMODE_Z",{get:function(){return t.TransformNode.BILLBOARDMODE_Z},enumerable:!0,configurable:!0}),Object.defineProperty(i,"BILLBOARDMODE_ALL",{get:function(){return t.TransformNode.BILLBOARDMODE_ALL},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"facetNb",{get:function(){return this._facetNb},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"partitioningSubdivisions",{get:function(){return this._partitioningSubdivisions},set:function(t){this._partitioningSubdivisions=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"partitioningBBoxRatio",{get:function(){return this._partitioningBBoxRatio},set:function(t){this._partitioningBBoxRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mustDepthSortFacets",{get:function(){return this._facetDepthSort},set:function(t){this._facetDepthSort=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"facetDepthSortFrom",{get:function(){return this._facetDepthSortFrom},set:function(t){this._facetDepthSortFrom=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFacetDataEnabled",{get:function(){return this._facetDataEnabled},enumerable:!0,configurable:!0}),i.prototype._updateNonUniformScalingState=function(t){return!!e.prototype._updateNonUniformScalingState.call(this,t)&&(this._markSubMeshesAsMiscDirty(),!0)},Object.defineProperty(i.prototype,"onCollide",{set:function(t){this._onCollideObserver&&this.onCollideObservable.remove(this._onCollideObserver),this._onCollideObserver=this.onCollideObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onCollisionPositionChange",{set:function(t){this._onCollisionPositionChangeObserver&&this.onCollisionPositionChangeObservable.remove(this._onCollisionPositionChangeObserver),this._onCollisionPositionChangeObserver=this.onCollisionPositionChangeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isOccluded",{get:function(){return this._isOccluded},set:function(t){this._isOccluded=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isOcclusionQueryInProgress",{get:function(){return this._isOcclusionQueryInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibility",{get:function(){return this._visibility},set:function(t){this._visibility!==t&&(this._visibility=t,this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this._material},set:function(t){if(this._material!==t&&(this._material=t,this.onMaterialChangedObservable.hasObservers&&this.onMaterialChangedObservable.notifyObservers(this),this.subMeshes))for(var e=0,i=this.subMeshes;e<i.length;e++){i[e].setEffect(null)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveShadows",{get:function(){return this._receiveShadows},set:function(t){this._receiveShadows!==t&&(this._receiveShadows=t,this._markSubMeshesAsLightDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasVertexAlpha",{get:function(){return this._hasVertexAlpha},set:function(t){this._hasVertexAlpha!==t&&(this._hasVertexAlpha=t,this._markSubMeshesAsAttributesDirty(),this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useVertexColors",{get:function(){return this._useVertexColors},set:function(t){this._useVertexColors!==t&&(this._useVertexColors=t,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"computeBonesUsingShaders",{get:function(){return this._computeBonesUsingShaders},set:function(t){this._computeBonesUsingShaders!==t&&(this._computeBonesUsingShaders=t,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numBoneInfluencers",{get:function(){return this._numBoneInfluencers},set:function(t){this._numBoneInfluencers!==t&&(this._numBoneInfluencers=t,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"applyFog",{get:function(){return this._applyFog},set:function(t){this._applyFog!==t&&(this._applyFog=t,this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layerMask",{get:function(){return this._layerMask},set:function(t){t!==this._layerMask&&(this._layerMask=t,this._resyncLightSources())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(t){this._collisionMask=isNaN(t)?-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collisionGroup",{get:function(){return this._collisionGroup},set:function(t){this._collisionGroup=isNaN(t)?-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_positions",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skeleton",{get:function(){return this._skeleton},set:function(t){this._skeleton&&this._skeleton.needInitialSkinMatrix&&this._skeleton._unregisterMeshWithPoseMatrix(this),t&&t.needInitialSkinMatrix&&t._registerMeshWithPoseMatrix(this),this._skeleton=t,this._skeleton||(this._bonesTransformMatrices=null),this._markSubMeshesAsAttributesDirty()},enumerable:!0,configurable:!0}),i.prototype.isDisposed=function(){return this._isDisposed},i.prototype.getClassName=function(){return"AbstractMesh"},i.prototype.toString=function(e){var i="Name: "+this.name+", isInstance: "+(this instanceof t.InstancedMesh?"YES":"NO");return i+=", # of submeshes: "+(this.subMeshes?this.subMeshes.length:0),this._skeleton&&(i+=", skeleton: "+this._skeleton.name),e&&(i+=", billboard mode: "+["NONE","X","Y",null,"Z",null,null,"ALL"][this.billboardMode],i+=", freeze wrld mat: "+(this._isWorldMatrixFrozen||this._waitingFreezeWorldMatrix?"YES":"NO")),i},i.prototype._rebuild=function(){if(this._occlusionQuery&&(this._occlusionQuery=null),this._edgesRenderer&&this._edgesRenderer._rebuild(),this.subMeshes)for(var t=0,e=this.subMeshes;t<e.length;t++){e[t]._rebuild()}},i.prototype._resyncLightSources=function(){this._lightSources.length=0;for(var t=0,e=this.getScene().lights;t<e.length;t++){var i=e[t];i.isEnabled()&&i.canAffectMesh(this)&&this._lightSources.push(i)}this._markSubMeshesAsLightDirty()},i.prototype._resyncLighSource=function(t){var e=t.isEnabled()&&t.canAffectMesh(this),i=this._lightSources.indexOf(t);if(-1===i){if(!e)return;this._lightSources.push(t)}else{if(e)return;this._lightSources.splice(i,1)}this._markSubMeshesAsLightDirty()},i.prototype._removeLightSource=function(t){var e=this._lightSources.indexOf(t);-1!==e&&(this._lightSources.splice(e,1),this._markSubMeshesAsLightDirty())},i.prototype._markSubMeshesAsDirty=function(t){if(this.subMeshes)for(var e=0,i=this.subMeshes;e<i.length;e++){var n=i[e];n._materialDefines&&t(n._materialDefines)}},i.prototype._markSubMeshesAsLightDirty=function(){this._markSubMeshesAsDirty(function(t){return t.markAsLightDirty()})},i.prototype._markSubMeshesAsAttributesDirty=function(){this._markSubMeshesAsDirty(function(t){return t.markAsAttributesDirty()})},i.prototype._markSubMeshesAsMiscDirty=function(){if(this.subMeshes)for(var e=0,i=this.subMeshes;e<i.length;e++){var n=i[e].getMaterial();n&&n.markAsDirty(t.Material.MiscDirtyFlag)}},Object.defineProperty(i.prototype,"scaling",{get:function(){return this._scaling},set:function(t){this._scaling=t,this.physicsImpostor&&this.physicsImpostor.forceUpdate()},enumerable:!0,configurable:!0}),i.prototype.disableEdgesRendering=function(){return this._edgesRenderer&&(this._edgesRenderer.dispose(),this._edgesRenderer=null),this},i.prototype.enableEdgesRendering=function(e,i){return void 0===e&&(e=.95),void 0===i&&(i=!1),this.disableEdgesRendering(),this._edgesRenderer=new t.EdgesRenderer(this,e,i),this},Object.defineProperty(i.prototype,"isBlocked",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.getLOD=function(t){return this},i.prototype.getTotalVertices=function(){return 0},i.prototype.getIndices=function(){return null},i.prototype.getVerticesData=function(t){return null},i.prototype.setVerticesData=function(t,e,i,n){return this},i.prototype.updateVerticesData=function(t,e,i,n){return this},i.prototype.setIndices=function(t,e){return this},i.prototype.isVerticesDataPresent=function(t){return!1},i.prototype.getBoundingInfo=function(){return this._masterMesh?this._masterMesh.getBoundingInfo():(this._boundingInfo||this._updateBoundingInfo(),this._boundingInfo)},i.prototype.normalizeToUnitCube=function(t){void 0===t&&(t=!0);var e=this.getHierarchyBoundingVectors(t),i=e.max.subtract(e.min),n=Math.max(i.x,i.y,i.z);if(0===n)return this;var r=1/n;return this.scaling.scaleInPlace(r),this},i.prototype.setBoundingInfo=function(t){return this._boundingInfo=t,this},Object.defineProperty(i.prototype,"useBones",{get:function(){return this.skeleton&&this.getScene().skeletonsEnabled&&this.isVerticesDataPresent(t.VertexBuffer.MatricesIndicesKind)&&this.isVerticesDataPresent(t.VertexBuffer.MatricesWeightsKind)},enumerable:!0,configurable:!0}),i.prototype._preActivate=function(){},i.prototype._preActivateForIntermediateRendering=function(t){},i.prototype._activate=function(t){this._renderId=t},i.prototype.getWorldMatrix=function(){return this._masterMesh?this._masterMesh.getWorldMatrix():e.prototype.getWorldMatrix.call(this)},i.prototype._getWorldMatrixDeterminant=function(){return this._masterMesh?this._masterMesh._getWorldMatrixDeterminant():e.prototype._getWorldMatrixDeterminant.call(this)},i.prototype.movePOV=function(t,e,i){return this.position.addInPlace(this.calcMovePOV(t,e,i)),this},i.prototype.calcMovePOV=function(e,i,n){var r=new t.Matrix;(this.rotationQuaternion?this.rotationQuaternion:t.Quaternion.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z)).toRotationMatrix(r);var o=t.Vector3.Zero(),s=this.definedFacingForward?-1:1;return t.Vector3.TransformCoordinatesFromFloatsToRef(e*s,i,n*s,r,o),o},i.prototype.rotatePOV=function(t,e,i){return this.rotation.addInPlace(this.calcRotatePOV(t,e,i)),this},i.prototype.calcRotatePOV=function(e,i,n){var r=this.definedFacingForward?1:-1;return new t.Vector3(e*r,i,n*r)},i.prototype.getHierarchyBoundingVectors=function(e){void 0===e&&(e=!0),this.computeWorldMatrix(!0);var i,n,r=this.getBoundingInfo();if(this.subMeshes?(i=r.boundingBox.minimumWorld,n=r.boundingBox.maximumWorld):(i=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n=new t.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)),e)for(var o=0,s=this.getDescendants(!1);o<s.length;o++){var a=s[o];if(a.computeWorldMatrix(!0),a.getBoundingInfo&&0!==a.getTotalVertices()){var l=a.getBoundingInfo().boundingBox,c=l.minimumWorld,u=l.maximumWorld;t.Tools.CheckExtends(c,i,n),t.Tools.CheckExtends(u,i,n)}}return{min:i,max:n}},i.prototype._updateBoundingInfo=function(){return this._boundingInfo=this._boundingInfo||new t.BoundingInfo(this.absolutePosition,this.absolutePosition),this._boundingInfo.update(this.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(this.worldMatrixFromCache),this},i.prototype._updateSubMeshesBoundingInfo=function(t){if(!this.subMeshes)return this;for(var e=0;e<this.subMeshes.length;e++){var i=this.subMeshes[e];i.IsGlobal||i.updateBoundingInfo(t)}return this},i.prototype._afterComputeWorldMatrix=function(){this._updateBoundingInfo()},i.prototype.isInFrustum=function(t){return null!==this._boundingInfo&&this._boundingInfo.isInFrustum(t)},i.prototype.isCompletelyInFrustum=function(t){return null!==this._boundingInfo&&this._boundingInfo.isCompletelyInFrustum(t)},i.prototype.intersectsMesh=function(t,e,i){if(void 0===e&&(e=!1),!this._boundingInfo||!t._boundingInfo)return!1;if(this._boundingInfo.intersects(t._boundingInfo,e))return!0;if(i)for(var n=0,r=this.getChildMeshes();n<r.length;n++){if(r[n].intersectsMesh(t,e,!0))return!0}return!1},i.prototype.intersectsPoint=function(t){return!!this._boundingInfo&&this._boundingInfo.intersectsPoint(t)},i.prototype.getPhysicsImpostor=function(){return this.physicsImpostor},i.prototype.getPositionInCameraSpace=function(e){return void 0===e&&(e=null),e||(e=this.getScene().activeCamera),t.Vector3.TransformCoordinates(this.absolutePosition,e.getViewMatrix())},i.prototype.getDistanceToCamera=function(t){return void 0===t&&(t=null),t||(t=this.getScene().activeCamera),this.absolutePosition.subtract(t.position).length()},i.prototype.applyImpulse=function(t,e){return this.physicsImpostor?(this.physicsImpostor.applyImpulse(t,e),this):this},i.prototype.setPhysicsLinkWith=function(e,i,n,r){return this.physicsImpostor&&e.physicsImpostor?(this.physicsImpostor.createJoint(e.physicsImpostor,t.PhysicsJoint.HingeJoint,{mainPivot:i,connectedPivot:n,nativeParams:r}),this):this},Object.defineProperty(i.prototype,"checkCollisions",{get:function(){return this._checkCollisions},set:function(t){this._checkCollisions=t,this.getScene().workerCollisions&&this.getScene().collisionCoordinator.onMeshUpdated(this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collider",{get:function(){return this._collider},enumerable:!0,configurable:!0}),i.prototype.moveWithCollisions=function(e){return this.getAbsolutePosition().addToRef(this.ellipsoidOffset,this._oldPositionForCollisions),this._collider||(this._collider=new t.Collider),this._collider._radius=this.ellipsoid,this.getScene().collisionCoordinator.getNewPosition(this._oldPositionForCollisions,e,this._collider,3,this,this._onCollisionPositionChange,this.uniqueId),this},i.prototype.createOrUpdateSubmeshesOctree=function(e,i){void 0===e&&(e=64),void 0===i&&(i=2),this._submeshesOctree||(this._submeshesOctree=new t.Octree(t.Octree.CreationFuncForSubMeshes,e,i)),this.computeWorldMatrix(!0);var n=this.getBoundingInfo().boundingBox;return this._submeshesOctree.update(n.minimumWorld,n.maximumWorld,this.subMeshes),this._submeshesOctree},i.prototype._collideForSubMesh=function(e,i,n){if(this._generatePointsArray(),!this._positions)return this;if(!e._lastColliderWorldVertices||!e._lastColliderTransformMatrix.equals(i)){e._lastColliderTransformMatrix=i.clone(),e._lastColliderWorldVertices=[],e._trianglePlanes=[];for(var r=e.verticesStart,o=e.verticesStart+e.verticesCount,s=r;s<o;s++)e._lastColliderWorldVertices.push(t.Vector3.TransformCoordinates(this._positions[s],i))}return n._collide(e._trianglePlanes,e._lastColliderWorldVertices,this.getIndices(),e.indexStart,e.indexStart+e.indexCount,e.verticesStart,!!e.getMaterial()),n.collisionFound&&(n.collidedMesh=this),this},i.prototype._processCollisionsForSubMeshes=function(t,e){var i,n;if(this._submeshesOctree&&this.useOctreeForCollisions){var r=t._velocityWorldLength+Math.max(t._radius.x,t._radius.y,t._radius.z),o=this._submeshesOctree.intersects(t._basePointWorld,r);n=o.length,i=o.data}else n=(i=this.subMeshes).length;for(var s=0;s<n;s++){var a=i[s];n>1&&!a._checkCollision(t)||this._collideForSubMesh(a,e,t)}return this},i.prototype._checkCollision=function(e){return this._boundingInfo&&this._boundingInfo._checkCollision(e)?(t.Matrix.ScalingToRef(1/e._radius.x,1/e._radius.y,1/e._radius.z,this._collisionsScalingMatrix),this.worldMatrixFromCache.multiplyToRef(this._collisionsScalingMatrix,this._collisionsTransformMatrix),this._processCollisionsForSubMeshes(e,this._collisionsTransformMatrix),this):this},i.prototype._generatePointsArray=function(){return!1},i.prototype.intersects=function(e,i){var n=new t.PickingInfo;if(!(this.subMeshes&&this._boundingInfo&&e.intersectsSphere(this._boundingInfo.boundingSphere)&&e.intersectsBox(this._boundingInfo.boundingBox)))return n;if(!this._generatePointsArray())return n;var r,o,s=null;if(this._submeshesOctree&&this.useOctreeForPicking){var a=t.Ray.Transform(e,this.getWorldMatrix()),l=this._submeshesOctree.intersectsRay(a);o=l.length,r=l.data}else o=(r=this.subMeshes).length;for(var c=0;c<o;c++){var u=r[c];if(!(o>1)||u.canIntersects(e)){var h=u.intersects(e,this._positions,this.getIndices(),i);if(h&&(i||!s||h.distance<s.distance)&&((s=h).subMeshId=c,i))break}}if(s){var p=this.getWorldMatrix(),d=t.Vector3.TransformCoordinates(e.origin,p),f=e.direction.clone();f=f.scale(s.distance);var m=t.Vector3.TransformNormal(f,p),g=d.add(m);return n.hit=!0,n.distance=t.Vector3.Distance(d,g),n.pickedPoint=g,n.pickedMesh=this,n.bu=s.bu||0,n.bv=s.bv||0,n.faceId=s.faceId,n.subMeshId=s.subMeshId,n}return n},i.prototype.clone=function(t,e,i){return null},i.prototype.releaseSubMeshes=function(){if(this.subMeshes)for(;this.subMeshes.length;)this.subMeshes[0].dispose();else this.subMeshes=new Array;return this},i.prototype.dispose=function(t,i){var n=this;for(void 0===i&&(i=!1),void 0!==this.actionManager&&null!==this.actionManager&&(this.actionManager.dispose(),this.actionManager=null),this.skeleton=null,this.physicsImpostor&&this.physicsImpostor.dispose(),s=0;s<this._intersectionsInProgress.length;s++){var r=this._intersectionsInProgress[s],o=r._intersectionsInProgress.indexOf(this);r._intersectionsInProgress.splice(o,1)}this._intersectionsInProgress=[],this.getScene().lights.forEach(function(t){var e=t.includedOnlyMeshes.indexOf(n);-1!==e&&t.includedOnlyMeshes.splice(e,1),-1!==(e=t.excludedMeshes.indexOf(n))&&t.excludedMeshes.splice(e,1);var i=t.getShadowGenerator();if(i){var r=i.getShadowMap();r&&r.renderList&&-1!==(e=r.renderList.indexOf(n))&&r.renderList.splice(e,1)}}),this._edgesRenderer&&(this._edgesRenderer.dispose(),this._edgesRenderer=null),"InstancedMesh"!==this.getClassName()&&this.releaseSubMeshes();var s,a=this.getScene().selectionOctree;null!=a&&(-1!==(s=a.dynamicContent.indexOf(this))&&a.dynamicContent.splice(s,1));var l=this.getScene().getEngine();if(this._occlusionQuery&&(this._isOcclusionQueryInProgress=!1,l.deleteQuery(this._occlusionQuery),this._occlusionQuery=null),l.wipeCaches(),this.getScene().removeMesh(this),i&&this.material&&this.material.dispose(!1,!0),!t)for(s=0;s<this.getScene().particleSystems.length;s++)this.getScene().particleSystems[s].emitter===this&&(this.getScene().particleSystems[s].dispose(),s--);this._facetDataEnabled&&this.disableFacetData(),this.onAfterWorldMatrixUpdateObservable.clear(),this.onCollideObservable.clear(),this.onCollisionPositionChangeObservable.clear(),this._isDisposed=!0,e.prototype.dispose.call(this,t)},i.prototype.addChild=function(t){return t.setParent(this),this},i.prototype.removeChild=function(t){return t.setParent(null),this},i.prototype._initFacetData=function(){this._facetNormals||(this._facetNormals=new Array),this._facetPositions||(this._facetPositions=new Array),this._facetPartitioning||(this._facetPartitioning=new Array),this._facetNb=this.getIndices().length/3|0,this._partitioningSubdivisions=this._partitioningSubdivisions?this._partitioningSubdivisions:10,this._partitioningBBoxRatio=this._partitioningBBoxRatio?this._partitioningBBoxRatio:1.01;for(var e=0;e<this._facetNb;e++)this._facetNormals[e]=t.Vector3.Zero(),this._facetPositions[e]=t.Vector3.Zero();return this._facetDataEnabled=!0,this},i.prototype.updateFacetData=function(){this._facetDataEnabled||this._initFacetData();var e=this.getVerticesData(t.VertexBuffer.PositionKind),i=this.getIndices(),n=this.getVerticesData(t.VertexBuffer.NormalKind),r=this.getBoundingInfo();if(this._facetDepthSort&&!this._facetDepthSortEnabled){if(this._facetDepthSortEnabled=!0,i instanceof Uint16Array)this._depthSortedIndices=new Uint16Array(i);else if(i instanceof Uint32Array)this._depthSortedIndices=new Uint32Array(i);else{for(var o=!1,s=0;s<i.length;s++)if(i[s]>65535){o=!0;break}this._depthSortedIndices=o?new Uint32Array(i):new Uint16Array(i)}if(this._facetDepthSortFunction=function(t,e){return e.sqDistance-t.sqDistance},!this._facetDepthSortFrom){var a=this.getScene().activeCamera;this._facetDepthSortFrom=a?a.position:t.Vector3.Zero()}this._depthSortedFacets=[];for(var l=0;l<this._facetNb;l++){var c={ind:3*l,sqDistance:0};this._depthSortedFacets.push(c)}this._invertedMatrix=t.Matrix.Identity(),this._facetDepthSortOrigin=t.Vector3.Zero()}this._bbSize.x=r.maximum.x-r.minimum.x>t.Epsilon?r.maximum.x-r.minimum.x:t.Epsilon,this._bbSize.y=r.maximum.y-r.minimum.y>t.Epsilon?r.maximum.y-r.minimum.y:t.Epsilon,this._bbSize.z=r.maximum.z-r.minimum.z>t.Epsilon?r.maximum.z-r.minimum.z:t.Epsilon;var u=this._bbSize.x>this._bbSize.y?this._bbSize.x:this._bbSize.y;if(u=u>this._bbSize.z?u:this._bbSize.z,this._subDiv.max=this._partitioningSubdivisions,this._subDiv.X=Math.floor(this._subDiv.max*this._bbSize.x/u),this._subDiv.Y=Math.floor(this._subDiv.max*this._bbSize.y/u),this._subDiv.Z=Math.floor(this._subDiv.max*this._bbSize.z/u),this._subDiv.X=this._subDiv.X<1?1:this._subDiv.X,this._subDiv.Y=this._subDiv.Y<1?1:this._subDiv.Y,this._subDiv.Z=this._subDiv.Z<1?1:this._subDiv.Z,this._facetParameters.facetNormals=this.getFacetLocalNormals(),this._facetParameters.facetPositions=this.getFacetLocalPositions(),this._facetParameters.facetPartitioning=this.getFacetLocalPartitioning(),this._facetParameters.bInfo=r,this._facetParameters.bbSize=this._bbSize,this._facetParameters.subDiv=this._subDiv,this._facetParameters.ratio=this.partitioningBBoxRatio,this._facetParameters.depthSort=this._facetDepthSort,this._facetDepthSort&&this._facetDepthSortEnabled&&(this.computeWorldMatrix(!0),this._worldMatrix.invertToRef(this._invertedMatrix),t.Vector3.TransformCoordinatesToRef(this._facetDepthSortFrom,this._invertedMatrix,this._facetDepthSortOrigin),this._facetParameters.distanceTo=this._facetDepthSortOrigin),this._facetParameters.depthSortedFacets=this._depthSortedFacets,t.VertexData.ComputeNormals(e,i,n,this._facetParameters),this._facetDepthSort&&this._facetDepthSortEnabled){this._depthSortedFacets.sort(this._facetDepthSortFunction);var h=this._depthSortedIndices.length/3|0;for(l=0;l<h;l++){var p=this._depthSortedFacets[l].ind;this._depthSortedIndices[3*l]=i[p],this._depthSortedIndices[3*l+1]=i[p+1],this._depthSortedIndices[3*l+2]=i[p+2]}this.updateIndices(this._depthSortedIndices)}return this},i.prototype.getFacetLocalNormals=function(){return this._facetNormals||this.updateFacetData(),this._facetNormals},i.prototype.getFacetLocalPositions=function(){return this._facetPositions||this.updateFacetData(),this._facetPositions},i.prototype.getFacetLocalPartitioning=function(){return this._facetPartitioning||this.updateFacetData(),this._facetPartitioning},i.prototype.getFacetPosition=function(e){var i=t.Vector3.Zero();return this.getFacetPositionToRef(e,i),i},i.prototype.getFacetPositionToRef=function(e,i){var n=this.getFacetLocalPositions()[e],r=this.getWorldMatrix();return t.Vector3.TransformCoordinatesToRef(n,r,i),this},i.prototype.getFacetNormal=function(e){var i=t.Vector3.Zero();return this.getFacetNormalToRef(e,i),i},i.prototype.getFacetNormalToRef=function(e,i){var n=this.getFacetLocalNormals()[e];return t.Vector3.TransformNormalToRef(n,this.getWorldMatrix(),i),this},i.prototype.getFacetsAtLocalCoordinates=function(t,e,i){var n=this.getBoundingInfo(),r=Math.floor((t-n.minimum.x*this._partitioningBBoxRatio)*this._subDiv.X*this._partitioningBBoxRatio/this._bbSize.x),o=Math.floor((e-n.minimum.y*this._partitioningBBoxRatio)*this._subDiv.Y*this._partitioningBBoxRatio/this._bbSize.y),s=Math.floor((i-n.minimum.z*this._partitioningBBoxRatio)*this._subDiv.Z*this._partitioningBBoxRatio/this._bbSize.z);return r<0||r>this._subDiv.max||o<0||o>this._subDiv.max||s<0||s>this._subDiv.max?null:this._facetPartitioning[r+this._subDiv.max*o+this._subDiv.max*this._subDiv.max*s]},i.prototype.getClosestFacetAtCoordinates=function(e,i,n,r,o,s){void 0===o&&(o=!1),void 0===s&&(s=!0);var a=this.getWorldMatrix(),l=t.Tmp.Matrix[5];a.invertToRef(l);var c=t.Tmp.Vector3[8];t.Vector3.TransformCoordinatesFromFloatsToRef(e,i,n,l,c);var u=this.getClosestFacetAtLocalCoordinates(c.x,c.y,c.z,r,o,s);return r&&t.Vector3.TransformCoordinatesFromFloatsToRef(r.x,r.y,r.z,a,r),u},i.prototype.getClosestFacetAtLocalCoordinates=function(t,e,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!0);var s=null,a=0,l=0,c=0,u=0,h=0,p=0,d=0,f=0,m=this.getFacetLocalPositions(),g=this.getFacetLocalNormals(),y=this.getFacetsAtLocalCoordinates(t,e,i);if(!y)return null;for(var _,v,b,x=Number.MAX_VALUE,A=x,w=0;w<y.length;w++)v=g[_=y[w]],u=(t-(b=m[_]).x)*v.x+(e-b.y)*v.y+(i-b.z)*v.z,(!r||r&&o&&u>=0||r&&!o&&u<=0)&&(u=v.x*b.x+v.y*b.y+v.z*b.z,h=-(v.x*t+v.y*e+v.z*i-u)/(v.x*v.x+v.y*v.y+v.z*v.z),(A=(a=(p=t+v.x*h)-t)*a+(l=(d=e+v.y*h)-e)*l+(c=(f=i+v.z*h)-i)*c)<x&&(x=A,s=_,n&&(n.x=p,n.y=d,n.z=f)));return s},i.prototype.getFacetDataParameters=function(){return this._facetParameters},i.prototype.disableFacetData=function(){return this._facetDataEnabled&&(this._facetDataEnabled=!1,this._facetPositions=new Array,this._facetNormals=new Array,this._facetPartitioning=new Array,this._facetParameters=null,this._depthSortedIndices=new Uint32Array(0)),this},i.prototype.updateIndices=function(t){return this},i.prototype.createNormals=function(e){var i,n=this.getVerticesData(t.VertexBuffer.PositionKind),r=this.getIndices();i=this.isVerticesDataPresent(t.VertexBuffer.NormalKind)?this.getVerticesData(t.VertexBuffer.NormalKind):[],t.VertexData.ComputeNormals(n,r,i,{useRightHandedSystem:this.getScene().useRightHandedSystem}),this.setVerticesData(t.VertexBuffer.NormalKind,i,e)},i.prototype.alignWithNormal=function(e,i){i||(i=t.Axis.Y);var n=t.Tmp.Vector3[0],r=t.Tmp.Vector3[1];return t.Vector3.CrossToRef(i,e,r),t.Vector3.CrossToRef(e,r,n),this.rotationQuaternion?t.Quaternion.RotationQuaternionFromAxisToRef(n,e,r,this.rotationQuaternion):t.Vector3.RotationFromAxisToRef(n,e,r,this.rotation),this},i.prototype.checkOcclusionQuery=function(){var t=this.getEngine();if(t.webGLVersion<2||this.occlusionType===i.OCCLUSION_TYPE_NONE)this._isOccluded=!1;else{if(this.isOcclusionQueryInProgress&&this._occlusionQuery)if(t.isQueryResultAvailable(this._occlusionQuery)){var e=t.getQueryResult(this._occlusionQuery);this._isOcclusionQueryInProgress=!1,this._occlusionInternalRetryCounter=0,this._isOccluded=1!==e}else{if(this._occlusionInternalRetryCounter++,!(-1!==this.occlusionRetryCount&&this._occlusionInternalRetryCounter>this.occlusionRetryCount))return;this._isOcclusionQueryInProgress=!1,this._occlusionInternalRetryCounter=0,this._isOccluded=this.occlusionType!==i.OCCLUSION_TYPE_OPTIMISTIC&&this._isOccluded}var n=this.getScene().getBoundingBoxRenderer();this._occlusionQuery||(this._occlusionQuery=t.createQuery()),t.beginOcclusionQuery(this.occlusionQueryAlgorithmType,this._occlusionQuery),n.renderOcclusionBoundingBox(this),t.endOcclusionQuery(this.occlusionQueryAlgorithmType),this._isOcclusionQueryInProgress=!0}},i.OCCLUSION_TYPE_NONE=0,i.OCCLUSION_TYPE_OPTIMISTIC=1,i.OCCLUSION_TYPE_STRICT=2,i.OCCLUSION_ALGORITHM_TYPE_ACCURATE=0,i.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE=1,i}(t.TransformNode);t.AbstractMesh=e}(l||(l={})),function(t){var e=function(e){function i(n,r){var o=e.call(this,n,r)||this;return o.diffuse=new t.Color3(1,1,1),o.specular=new t.Color3(1,1,1),o.intensity=1,o.range=Number.MAX_VALUE,o._photometricScale=1,o._intensityMode=i.INTENSITYMODE_AUTOMATIC,o._radius=1e-5,o.renderPriority=0,o.shadowEnabled=!0,o._excludeWithLayerMask=0,o._includeOnlyWithLayerMask=0,o._lightmapMode=0,o._excludedMeshesIds=new Array,o._includedOnlyMeshesIds=new Array,o.getScene().addLight(o),o._uniformBuffer=new t.UniformBuffer(o.getScene().getEngine()),o._buildUniformLayout(),o.includedOnlyMeshes=new Array,o.excludedMeshes=new Array,o._resyncMeshes(),o}return o(i,e),Object.defineProperty(i,"LIGHTMAP_DEFAULT",{get:function(){return i._LIGHTMAP_DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTMAP_SPECULAR",{get:function(){return i._LIGHTMAP_SPECULAR},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTMAP_SHADOWSONLY",{get:function(){return i._LIGHTMAP_SHADOWSONLY},enumerable:!0,configurable:!0}),Object.defineProperty(i,"INTENSITYMODE_AUTOMATIC",{get:function(){return i._INTENSITYMODE_AUTOMATIC},enumerable:!0,configurable:!0}),Object.defineProperty(i,"INTENSITYMODE_LUMINOUSPOWER",{get:function(){return i._INTENSITYMODE_LUMINOUSPOWER},enumerable:!0,configurable:!0}),Object.defineProperty(i,"INTENSITYMODE_LUMINOUSINTENSITY",{get:function(){return i._INTENSITYMODE_LUMINOUSINTENSITY},enumerable:!0,configurable:!0}),Object.defineProperty(i,"INTENSITYMODE_ILLUMINANCE",{get:function(){return i._INTENSITYMODE_ILLUMINANCE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"INTENSITYMODE_LUMINANCE",{get:function(){return i._INTENSITYMODE_LUMINANCE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTTYPEID_POINTLIGHT",{get:function(){return i._LIGHTTYPEID_POINTLIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTTYPEID_DIRECTIONALLIGHT",{get:function(){return i._LIGHTTYPEID_DIRECTIONALLIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTTYPEID_SPOTLIGHT",{get:function(){return i._LIGHTTYPEID_SPOTLIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LIGHTTYPEID_HEMISPHERICLIGHT",{get:function(){return i._LIGHTTYPEID_HEMISPHERICLIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"intensityMode",{get:function(){return this._intensityMode},set:function(t){this._intensityMode=t,this._computePhotometricScale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._computePhotometricScale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"includedOnlyMeshes",{get:function(){return this._includedOnlyMeshes},set:function(t){this._includedOnlyMeshes=t,this._hookArrayForIncludedOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excludedMeshes",{get:function(){return this._excludedMeshes},set:function(t){this._excludedMeshes=t,this._hookArrayForExcluded(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excludeWithLayerMask",{get:function(){return this._excludeWithLayerMask},set:function(t){this._excludeWithLayerMask=t,this._resyncMeshes()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"includeOnlyWithLayerMask",{get:function(){return this._includeOnlyWithLayerMask},set:function(t){this._includeOnlyWithLayerMask=t,this._resyncMeshes()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lightmapMode",{get:function(){return this._lightmapMode},set:function(t){this._lightmapMode!==t&&(this._lightmapMode=t,this._markMeshesAsLightDirty())},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"Light"},i.prototype.toString=function(t){var e="Name: "+this.name;if(e+=", type: "+["Point","Directional","Spot","Hemispheric"][this.getTypeID()],this.animations)for(var i=0;i<this.animations.length;i++)e+=", animation[0]: "+this.animations[i].toString(t);return e},i.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._resyncMeshes()},i.prototype.getShadowGenerator=function(){return this._shadowGenerator},i.prototype.getAbsolutePosition=function(){return t.Vector3.Zero()},i.prototype.canAffectMesh=function(t){return!(t&&(this.includedOnlyMeshes&&this.includedOnlyMeshes.length>0&&-1===this.includedOnlyMeshes.indexOf(t)||this.excludedMeshes&&this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(t)||0!==this.includeOnlyWithLayerMask&&0==(this.includeOnlyWithLayerMask&t.layerMask)||0!==this.excludeWithLayerMask&&this.excludeWithLayerMask&t.layerMask))},i.prototype.getWorldMatrix=function(){this._currentRenderId=this.getScene().getRenderId();var e=this._getWorldMatrix();return this.parent&&this.parent.getWorldMatrix?(this._parentedWorldMatrix||(this._parentedWorldMatrix=t.Matrix.Identity()),e.multiplyToRef(this.parent.getWorldMatrix(),this._parentedWorldMatrix),this._markSyncedWithParent(),this._parentedWorldMatrix):e},i.CompareLightsPriority=function(t,e){return t.shadowEnabled!==e.shadowEnabled?(e.shadowEnabled?1:0)-(t.shadowEnabled?1:0):e.renderPriority-t.renderPriority},i.prototype.dispose=function(){this._shadowGenerator&&(this._shadowGenerator.dispose(),this._shadowGenerator=null),this.getScene().stopAnimation(this);for(var t=0,i=this.getScene().meshes;t<i.length;t++)i[t]._removeLightSource(this);this._uniformBuffer.dispose(),this.getScene().removeLight(this),e.prototype.dispose.call(this)},i.prototype.getTypeID=function(){return 0},i.prototype.getScaledIntensity=function(){return this._photometricScale*this.intensity},i.prototype.clone=function(e){var n=i.GetConstructorFromName(this.getTypeID(),e,this.getScene());return n?t.SerializationHelper.Clone(n,this):null},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.type=this.getTypeID(),this.parent&&(e.parentId=this.parent.id),this.excludedMeshes.length>0&&(e.excludedMeshesIds=[],this.excludedMeshes.forEach(function(t){e.excludedMeshesIds.push(t.id)})),this.includedOnlyMeshes.length>0&&(e.includedOnlyMeshesIds=[],this.includedOnlyMeshes.forEach(function(t){e.includedOnlyMeshesIds.push(t.id)})),t.Animation.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},i.GetConstructorFromName=function(e,i,n){switch(e){case 0:return function(){return new t.PointLight(i,t.Vector3.Zero(),n)};case 1:return function(){return new t.DirectionalLight(i,t.Vector3.Zero(),n)};case 2:return function(){return new t.SpotLight(i,t.Vector3.Zero(),t.Vector3.Zero(),0,0,n)};case 3:return function(){return new t.HemisphericLight(i,t.Vector3.Zero(),n)}}return null},i.Parse=function(e,n){var r=i.GetConstructorFromName(e.type,e.name,n);if(!r)return null;var o=t.SerializationHelper.Parse(r,e,n);if(e.excludedMeshesIds&&(o._excludedMeshesIds=e.excludedMeshesIds),e.includedOnlyMeshesIds&&(o._includedOnlyMeshesIds=e.includedOnlyMeshesIds),e.parentId&&(o._waitingParentId=e.parentId),e.animations){for(var s=0;s<e.animations.length;s++){var a=e.animations[s];o.animations.push(t.Animation.Parse(a))}t.Node.ParseAnimationRanges(o,e,n)}return e.autoAnimate&&n.beginAnimation(o,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),o},i.prototype._hookArrayForExcluded=function(t){var e=this,i=t.push;t.push=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=i.apply(t,n),s=0,a=n;s<a.length;s++)a[s]._resyncLighSource(e);return o};var n=t.splice;t.splice=function(i,r){for(var o=n.apply(t,[i,r]),s=0,a=o;s<a.length;s++)a[s]._resyncLighSource(e);return o};for(var r=0,o=t;r<o.length;r++)o[r]._resyncLighSource(this)},i.prototype._hookArrayForIncludedOnly=function(t){var e=this,i=t.push;t.push=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=i.apply(t,n);return e._resyncMeshes(),o};var n=t.splice;t.splice=function(i,r){var o=n.apply(t,[i,r]);return e._resyncMeshes(),o},this._resyncMeshes()},i.prototype._resyncMeshes=function(){for(var t=0,e=this.getScene().meshes;t<e.length;t++)e[t]._resyncLighSource(this)},i.prototype._markMeshesAsLightDirty=function(){for(var t=0,e=this.getScene().meshes;t<e.length;t++){var i=e[t];-1!==i._lightSources.indexOf(this)&&i._markSubMeshesAsLightDirty()}},i.prototype._computePhotometricScale=function(){this._photometricScale=this._getPhotometricScale(),this.getScene().resetCachedMaterial()},i.prototype._getPhotometricScale=function(){var t=0,e=this.getTypeID(),n=this.intensityMode;switch(n===i.INTENSITYMODE_AUTOMATIC&&(n=e===i.LIGHTTYPEID_DIRECTIONALLIGHT?i.INTENSITYMODE_ILLUMINANCE:i.INTENSITYMODE_LUMINOUSINTENSITY),e){case i.LIGHTTYPEID_POINTLIGHT:case i.LIGHTTYPEID_SPOTLIGHT:switch(n){case i.INTENSITYMODE_LUMINOUSPOWER:t=1/(4*Math.PI);break;case i.INTENSITYMODE_LUMINOUSINTENSITY:t=1;break;case i.INTENSITYMODE_LUMINANCE:t=this.radius*this.radius}break;case i.LIGHTTYPEID_DIRECTIONALLIGHT:switch(n){case i.INTENSITYMODE_ILLUMINANCE:t=1;break;case i.INTENSITYMODE_LUMINANCE:var r=this.radius;r=Math.max(r,.001),t=2*Math.PI*(1-Math.cos(r))}break;case i.LIGHTTYPEID_HEMISPHERICLIGHT:t=1}return t},i.prototype._reorderLightsInScene=function(){var t=this.getScene();0!=this._renderPriority&&(t.requireLightSorting=!0),this.getScene().sortLightsByPriority()},i._LIGHTMAP_DEFAULT=0,i._LIGHTMAP_SPECULAR=1,i._LIGHTMAP_SHADOWSONLY=2,i._INTENSITYMODE_AUTOMATIC=0,i._INTENSITYMODE_LUMINOUSPOWER=1,i._INTENSITYMODE_LUMINOUSINTENSITY=2,i._INTENSITYMODE_ILLUMINANCE=3,i._INTENSITYMODE_LUMINANCE=4,i._LIGHTTYPEID_POINTLIGHT=0,i._LIGHTTYPEID_DIRECTIONALLIGHT=1,i._LIGHTTYPEID_SPOTLIGHT=2,i._LIGHTTYPEID_HEMISPHERICLIGHT=3,r([t.serializeAsColor3()],i.prototype,"diffuse",void 0),r([t.serializeAsColor3()],i.prototype,"specular",void 0),r([t.serialize()],i.prototype,"intensity",void 0),r([t.serialize()],i.prototype,"range",void 0),r([t.serialize()],i.prototype,"intensityMode",null),r([t.serialize()],i.prototype,"radius",null),r([t.serialize()],i.prototype,"_renderPriority",void 0),r([t.expandToProperty("_reorderLightsInScene")],i.prototype,"renderPriority",void 0),r([t.serialize()],i.prototype,"shadowEnabled",void 0),r([t.serialize("excludeWithLayerMask")],i.prototype,"_excludeWithLayerMask",void 0),r([t.serialize("includeOnlyWithLayerMask")],i.prototype,"_includeOnlyWithLayerMask",void 0),r([t.serialize("lightmapMode")],i.prototype,"_lightmapMode",void 0),i}(t.Node);t.Light=e}(l||(l={})),function(t){var e=function(e){function i(n,r,o){var s=e.call(this,n,o)||this;return s.upVector=t.Vector3.Up(),s.orthoLeft=null,s.orthoRight=null,s.orthoBottom=null,s.orthoTop=null,s.fov=.8,s.minZ=1,s.maxZ=1e4,s.inertia=.9,s.mode=i.PERSPECTIVE_CAMERA,s.isIntermediate=!1,s.viewport=new t.Viewport(0,0,1,1),s.layerMask=268435455,s.fovMode=i.FOVMODE_VERTICAL_FIXED,s.cameraRigMode=i.RIG_MODE_NONE,s._rigCameras=new Array,s._webvrViewMatrix=t.Matrix.Identity(),s._skipRendering=!1,s.customRenderTargets=new Array,s.onViewMatrixChangedObservable=new t.Observable,s.onProjectionMatrixChangedObservable=new t.Observable,s.onAfterCheckInputsObservable=new t.Observable,s.onRestoreStateObservable=new t.Observable,s._computedViewMatrix=t.Matrix.Identity(),s._projectionMatrix=new t.Matrix,s._doNotComputeProjectionMatrix=!1,s._postProcesses=new Array,s._transformMatrix=t.Matrix.Zero(),s._activeMeshes=new t.SmartArray(256),s._globalPosition=t.Vector3.Zero(),s._refreshFrustumPlanes=!0,s.getScene().addCamera(s),s.getScene().activeCamera||(s.getScene().activeCamera=s),s.position=r,s}return o(i,e),Object.defineProperty(i,"PERSPECTIVE_CAMERA",{get:function(){return i._PERSPECTIVE_CAMERA},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ORTHOGRAPHIC_CAMERA",{get:function(){return i._ORTHOGRAPHIC_CAMERA},enumerable:!0,configurable:!0}),Object.defineProperty(i,"FOVMODE_VERTICAL_FIXED",{get:function(){return i._FOVMODE_VERTICAL_FIXED},enumerable:!0,configurable:!0}),Object.defineProperty(i,"FOVMODE_HORIZONTAL_FIXED",{get:function(){return i._FOVMODE_HORIZONTAL_FIXED},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_NONE",{get:function(){return i._RIG_MODE_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_STEREOSCOPIC_ANAGLYPH",{get:function(){return i._RIG_MODE_STEREOSCOPIC_ANAGLYPH},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL",{get:function(){return i._RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED",{get:function(){return i._RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_STEREOSCOPIC_OVERUNDER",{get:function(){return i._RIG_MODE_STEREOSCOPIC_OVERUNDER},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_VR",{get:function(){return i._RIG_MODE_VR},enumerable:!0,configurable:!0}),Object.defineProperty(i,"RIG_MODE_WEBVR",{get:function(){return i._RIG_MODE_WEBVR},enumerable:!0,configurable:!0}),i.prototype.storeState=function(){return this._stateStored=!0,this._storedFov=this.fov,this},i.prototype._restoreStateValues=function(){return!!this._stateStored&&(this.fov=this._storedFov,!0)},i.prototype.restoreState=function(){return!!this._restoreStateValues()&&(this.onRestoreStateObservable.notifyObservers(this),!0)},i.prototype.getClassName=function(){return"Camera"},i.prototype.toString=function(t){var e="Name: "+this.name;if(e+=", type: "+this.getClassName(),this.animations)for(var i=0;i<this.animations.length;i++)e+=", animation[0]: "+this.animations[i].toString(t);return e},Object.defineProperty(i.prototype,"globalPosition",{get:function(){return this._globalPosition},enumerable:!0,configurable:!0}),i.prototype.getActiveMeshes=function(){return this._activeMeshes},i.prototype.isActiveMesh=function(t){return-1!==this._activeMeshes.indexOf(t)},i.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.position=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.upVector=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.mode=void 0,this._cache.minZ=void 0,this._cache.maxZ=void 0,this._cache.fov=void 0,this._cache.fovMode=void 0,this._cache.aspectRatio=void 0,this._cache.orthoLeft=void 0,this._cache.orthoRight=void 0,this._cache.orthoBottom=void 0,this._cache.orthoTop=void 0,this._cache.renderWidth=void 0,this._cache.renderHeight=void 0},i.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache.position.copyFrom(this.position),this._cache.upVector.copyFrom(this.upVector)},i.prototype._isSynchronized=function(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()},i.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronized.call(this)&&this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent()},i.prototype._isSynchronizedProjectionMatrix=function(){var t=this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ;if(!t)return!1;var e=this.getEngine();return this.mode===i.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&this._cache.aspectRatio===e.getAspectRatio(this):this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===e.getRenderWidth()&&this._cache.renderHeight===e.getRenderHeight()},i.prototype.attachControl=function(t,e){},i.prototype.detachControl=function(t){},i.prototype.update=function(){this._checkInputs(),this.cameraRigMode!==i.RIG_MODE_NONE&&this._updateRigCameras()},i.prototype._checkInputs=function(){this.onAfterCheckInputsObservable.notifyObservers(this)},Object.defineProperty(i.prototype,"rigCameras",{get:function(){return this._rigCameras},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rigPostProcess",{get:function(){return this._rigPostProcess},enumerable:!0,configurable:!0}),i.prototype._cascadePostProcessesToRigCams=function(){this._postProcesses.length>0&&this._postProcesses[0].markTextureDirty();for(var e=0,i=this._rigCameras.length;e<i;e++){var n=this._rigCameras[e],r=n._rigPostProcess;r?(r instanceof t.PassPostProcess&&(n.isIntermediate=0===this._postProcesses.length),n._postProcesses=this._postProcesses.slice(0).concat(r),r.markTextureDirty()):n._postProcesses=this._postProcesses.slice(0)}},i.prototype.attachPostProcess=function(e,i){return void 0===i&&(i=null),!e.isReusable()&&this._postProcesses.indexOf(e)>-1?(t.Tools.Error("You're trying to reuse a post process not defined as reusable."),0):(null==i||i<0?this._postProcesses.push(e):this._postProcesses.splice(i,0,e),this._cascadePostProcessesToRigCams(),this._postProcesses.indexOf(e))},i.prototype.detachPostProcess=function(t){var e=this._postProcesses.indexOf(t);-1!==e&&this._postProcesses.splice(e,1),this._cascadePostProcessesToRigCams()},i.prototype.getWorldMatrix=function(){return this._worldMatrix||(this._worldMatrix=t.Matrix.Identity()),this.getViewMatrix().invertToRef(this._worldMatrix),this._worldMatrix},i.prototype._getViewMatrix=function(){return t.Matrix.Identity()},i.prototype.getViewMatrix=function(e){return!e&&this._isSynchronizedViewMatrix()?this._computedViewMatrix:(this.updateCache(),this._computedViewMatrix=this._getViewMatrix(),this._currentRenderId=this.getScene().getRenderId(),this._refreshFrustumPlanes=!0,this.parent&&this.parent.getWorldMatrix?(this._worldMatrix||(this._worldMatrix=t.Matrix.Identity()),this._computedViewMatrix.invertToRef(this._worldMatrix),this._worldMatrix.multiplyToRef(this.parent.getWorldMatrix(),this._computedViewMatrix),this._globalPosition.copyFromFloats(this._computedViewMatrix.m[12],this._computedViewMatrix.m[13],this._computedViewMatrix.m[14]),this._computedViewMatrix.invert(),this._markSyncedWithParent()):this._globalPosition.copyFrom(this.position),this._cameraRigParams&&this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix),this.onViewMatrixChangedObservable.notifyObservers(this),this._computedViewMatrix)},i.prototype.freezeProjectionMatrix=function(t){this._doNotComputeProjectionMatrix=!0,void 0!==t&&(this._projectionMatrix=t)},i.prototype.unfreezeProjectionMatrix=function(){this._doNotComputeProjectionMatrix=!1},i.prototype.getProjectionMatrix=function(e){if(this._doNotComputeProjectionMatrix||!e&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode,this._cache.minZ=this.minZ,this._cache.maxZ=this.maxZ,this._refreshFrustumPlanes=!0;var n=this.getEngine(),r=this.getScene();if(this.mode===i.PERSPECTIVE_CAMERA)this._cache.fov=this.fov,this._cache.fovMode=this.fovMode,this._cache.aspectRatio=n.getAspectRatio(this),this.minZ<=0&&(this.minZ=.1),r.useRightHandedSystem?t.Matrix.PerspectiveFovRHToRef(this.fov,n.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===i.FOVMODE_VERTICAL_FIXED):t.Matrix.PerspectiveFovLHToRef(this.fov,n.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===i.FOVMODE_VERTICAL_FIXED);else{var o=n.getRenderWidth()/2,s=n.getRenderHeight()/2;r.useRightHandedSystem?t.Matrix.OrthoOffCenterRHToRef(this.orthoLeft||-o,this.orthoRight||o,this.orthoBottom||-s,this.orthoTop||s,this.minZ,this.maxZ,this._projectionMatrix):t.Matrix.OrthoOffCenterLHToRef(this.orthoLeft||-o,this.orthoRight||o,this.orthoBottom||-s,this.orthoTop||s,this.minZ,this.maxZ,this._projectionMatrix),this._cache.orthoLeft=this.orthoLeft,this._cache.orthoRight=this.orthoRight,this._cache.orthoBottom=this.orthoBottom,this._cache.orthoTop=this.orthoTop,this._cache.renderWidth=n.getRenderWidth(),this._cache.renderHeight=n.getRenderHeight()}return this.onProjectionMatrixChangedObservable.notifyObservers(this),this._projectionMatrix},i.prototype.getTranformationMatrix=function(){return this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._transformMatrix},i.prototype.updateFrustumPlanes=function(){this._refreshFrustumPlanes&&(this.getTranformationMatrix(),this._frustumPlanes?t.Frustum.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=t.Frustum.GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)},i.prototype.isInFrustum=function(t){return this.updateFrustumPlanes(),t.isInFrustum(this._frustumPlanes)},i.prototype.isCompletelyInFrustum=function(t){return this.updateFrustumPlanes(),t.isCompletelyInFrustum(this._frustumPlanes)},i.prototype.getForwardRay=function(e,i,n){void 0===e&&(e=100),i||(i=this.getWorldMatrix()),n||(n=this.position);var r=new t.Vector3(0,0,1),o=t.Vector3.TransformNormal(r,i),s=t.Vector3.Normalize(o);return new t.Ray(n,s,e)},i.prototype.dispose=function(){for(this.onViewMatrixChangedObservable.clear(),this.onProjectionMatrixChangedObservable.clear(),this.onAfterCheckInputsObservable.clear(),this.onRestoreStateObservable.clear(),this.inputs&&this.inputs.clear(),this.getScene().stopAnimation(this),this.getScene().removeCamera(this);this._rigCameras.length>0;){var t=this._rigCameras.pop();t&&t.dispose()}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses=[];else if(this.cameraRigMode!==i.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses=[];else for(var n=this._postProcesses.length;--n>=0;)this._postProcesses[n].dispose(this);for(n=this.customRenderTargets.length;--n>=0;)this.customRenderTargets[n].dispose();this.customRenderTargets=[],this._activeMeshes.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"leftCamera",{get:function(){return this._rigCameras.length<1?null:this._rigCameras[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightCamera",{get:function(){return this._rigCameras.length<2?null:this._rigCameras[1]},enumerable:!0,configurable:!0}),i.prototype.getLeftTarget=function(){return this._rigCameras.length<1?null:this._rigCameras[0].getTarget()},i.prototype.getRightTarget=function(){return this._rigCameras.length<2?null:this._rigCameras[1].getTarget()},i.prototype.setCameraRigMode=function(e,n){if(this.cameraRigMode!==e){for(;this._rigCameras.length>0;){var r=this._rigCameras.pop();r&&r.dispose()}if(this.cameraRigMode=e,this._cameraRigParams={},this._cameraRigParams.interaxialDistance=n.interaxialDistance||.0637,this._cameraRigParams.stereoHalfAngle=t.Tools.ToRadians(this._cameraRigParams.interaxialDistance/.0637),this.cameraRigMode!==i.RIG_MODE_NONE){var o=this.createRigCamera(this.name+"_L",0),s=this.createRigCamera(this.name+"_R",1);o&&s&&(this._rigCameras.push(o),this._rigCameras.push(s))}switch(this.cameraRigMode){case i.RIG_MODE_STEREOSCOPIC_ANAGLYPH:this._rigCameras[0]._rigPostProcess=new t.PassPostProcess(this.name+"_passthru",1,this._rigCameras[0]),this._rigCameras[1]._rigPostProcess=new t.AnaglyphPostProcess(this.name+"_anaglyph",1,this._rigCameras);break;case i.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case i.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case i.RIG_MODE_STEREOSCOPIC_OVERUNDER:var a=this.cameraRigMode===i.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL||this.cameraRigMode===i.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED;this._rigCameras[0]._rigPostProcess=new t.PassPostProcess(this.name+"_passthru",1,this._rigCameras[0]),this._rigCameras[1]._rigPostProcess=new t.StereoscopicInterlacePostProcess(this.name+"_stereoInterlace",this._rigCameras,a);break;case i.RIG_MODE_VR:var l=n.vrCameraMetrics||t.VRCameraMetrics.GetDefault();this._rigCameras[0]._cameraRigParams.vrMetrics=l,this._rigCameras[0].viewport=new t.Viewport(0,0,.5,1),this._rigCameras[0]._cameraRigParams.vrWorkMatrix=new t.Matrix,this._rigCameras[0]._cameraRigParams.vrHMatrix=l.leftHMatrix,this._rigCameras[0]._cameraRigParams.vrPreViewMatrix=l.leftPreViewMatrix,this._rigCameras[0].getProjectionMatrix=this._rigCameras[0]._getVRProjectionMatrix,this._rigCameras[1]._cameraRigParams.vrMetrics=l,this._rigCameras[1].viewport=new t.Viewport(.5,0,.5,1),this._rigCameras[1]._cameraRigParams.vrWorkMatrix=new t.Matrix,this._rigCameras[1]._cameraRigParams.vrHMatrix=l.rightHMatrix,this._rigCameras[1]._cameraRigParams.vrPreViewMatrix=l.rightPreViewMatrix,this._rigCameras[1].getProjectionMatrix=this._rigCameras[1]._getVRProjectionMatrix,l.compensateDistortion&&(this._rigCameras[0]._rigPostProcess=new t.VRDistortionCorrectionPostProcess("VR_Distort_Compensation_Left",this._rigCameras[0],!1,l),this._rigCameras[1]._rigPostProcess=new t.VRDistortionCorrectionPostProcess("VR_Distort_Compensation_Right",this._rigCameras[1],!0,l));break;case i.RIG_MODE_WEBVR:if(n.vrDisplay){var c=n.vrDisplay.getEyeParameters("left"),u=n.vrDisplay.getEyeParameters("right");this._rigCameras[0].viewport=new t.Viewport(0,0,.5,1),this._rigCameras[0].setCameraRigParameter("left",!0),this._rigCameras[0].setCameraRigParameter("specs",n.specs),this._rigCameras[0].setCameraRigParameter("eyeParameters",c),this._rigCameras[0].setCameraRigParameter("frameData",n.frameData),this._rigCameras[0].setCameraRigParameter("parentCamera",n.parentCamera),this._rigCameras[0]._cameraRigParams.vrWorkMatrix=new t.Matrix,this._rigCameras[0].getProjectionMatrix=this._getWebVRProjectionMatrix,this._rigCameras[0].parent=this,this._rigCameras[0]._getViewMatrix=this._getWebVRViewMatrix,this._rigCameras[1].viewport=new t.Viewport(.5,0,.5,1),this._rigCameras[1].setCameraRigParameter("eyeParameters",u),this._rigCameras[1].setCameraRigParameter("specs",n.specs),this._rigCameras[1].setCameraRigParameter("frameData",n.frameData),this._rigCameras[1].setCameraRigParameter("parentCamera",n.parentCamera),this._rigCameras[1]._cameraRigParams.vrWorkMatrix=new t.Matrix,this._rigCameras[1].getProjectionMatrix=this._getWebVRProjectionMatrix,this._rigCameras[1].parent=this,this._rigCameras[1]._getViewMatrix=this._getWebVRViewMatrix,i.UseAlternateWebVRRendering&&(this._rigCameras[1]._skipRendering=!0,this._rigCameras[0]._alternateCamera=this._rigCameras[1])}}this._cascadePostProcessesToRigCams(),this.update()}},i.prototype._getVRProjectionMatrix=function(){return t.Matrix.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,this._cameraRigParams.vrWorkMatrix),this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix),this._projectionMatrix},i.prototype._updateCameraRotationMatrix=function(){},i.prototype._updateWebVRCameraRotationMatrix=function(){},i.prototype._getWebVRProjectionMatrix=function(){return t.Matrix.Identity()},i.prototype._getWebVRViewMatrix=function(){return t.Matrix.Identity()},i.prototype.setCameraRigParameter=function(e,i){this._cameraRigParams||(this._cameraRigParams={}),this._cameraRigParams[e]=i,"interaxialDistance"===e&&(this._cameraRigParams.stereoHalfAngle=t.Tools.ToRadians(i/.0637))},i.prototype.createRigCamera=function(t,e){return null},i.prototype._updateRigCameras=function(){for(var t=0;t<this._rigCameras.length;t++)this._rigCameras[t].minZ=this.minZ,this._rigCameras[t].maxZ=this.maxZ,this._rigCameras[t].fov=this.fov;this.cameraRigMode===i.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=this.viewport)},i.prototype._setupInputs=function(){},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.type=this.getClassName(),this.parent&&(e.parentId=this.parent.id),this.inputs&&this.inputs.serialize(e),t.Animation.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},i.prototype.clone=function(e){return t.SerializationHelper.Clone(i.GetConstructorFromName(this.getClassName(),e,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this)},i.prototype.getDirection=function(e){var i=t.Vector3.Zero();return this.getDirectionToRef(e,i),i},i.prototype.getDirectionToRef=function(e,i){t.Vector3.TransformNormalToRef(e,this.getWorldMatrix(),i)},i.GetConstructorFromName=function(e,i,n,r,o){switch(void 0===r&&(r=0),void 0===o&&(o=!0),e){case"ArcRotateCamera":return function(){return new t.ArcRotateCamera(i,0,0,1,t.Vector3.Zero(),n)};case"DeviceOrientationCamera":return function(){return new t.DeviceOrientationCamera(i,t.Vector3.Zero(),n)};case"FollowCamera":return function(){return new t.FollowCamera(i,t.Vector3.Zero(),n)};case"ArcFollowCamera":return function(){return new t.ArcFollowCamera(i,0,0,1,null,n)};case"GamepadCamera":return function(){return new t.GamepadCamera(i,t.Vector3.Zero(),n)};case"TouchCamera":return function(){return new t.TouchCamera(i,t.Vector3.Zero(),n)};case"VirtualJoysticksCamera":return function(){return new t.VirtualJoysticksCamera(i,t.Vector3.Zero(),n)};case"WebVRFreeCamera":case"WebVRGamepadCamera":return function(){return new t.WebVRFreeCamera(i,t.Vector3.Zero(),n)};case"VRDeviceOrientationFreeCamera":return function(){return new t.VRDeviceOrientationFreeCamera(i,t.Vector3.Zero(),n)};case"VRDeviceOrientationGamepadCamera":return function(){return new t.VRDeviceOrientationGamepadCamera(i,t.Vector3.Zero(),n)};case"AnaglyphArcRotateCamera":return function(){return new t.AnaglyphArcRotateCamera(i,0,0,1,t.Vector3.Zero(),r,n)};case"AnaglyphFreeCamera":return function(){return new t.AnaglyphFreeCamera(i,t.Vector3.Zero(),r,n)};case"AnaglyphGamepadCamera":return function(){return new t.AnaglyphGamepadCamera(i,t.Vector3.Zero(),r,n)};case"AnaglyphUniversalCamera":return function(){return new t.AnaglyphUniversalCamera(i,t.Vector3.Zero(),r,n)};case"StereoscopicArcRotateCamera":return function(){return new t.StereoscopicArcRotateCamera(i,0,0,1,t.Vector3.Zero(),r,o,n)};case"StereoscopicFreeCamera":return function(){return new t.StereoscopicFreeCamera(i,t.Vector3.Zero(),r,o,n)};case"StereoscopicGamepadCamera":return function(){return new t.StereoscopicGamepadCamera(i,t.Vector3.Zero(),r,o,n)};case"StereoscopicUniversalCamera":return function(){return new t.StereoscopicUniversalCamera(i,t.Vector3.Zero(),r,o,n)};case"FreeCamera":default:return function(){return new t.UniversalCamera(i,t.Vector3.Zero(),n)}}},i.prototype.computeWorldMatrix=function(){return this.getWorldMatrix()},i.Parse=function(e,n){var r=e.type,o=i.GetConstructorFromName(r,e.name,n,e.interaxial_distance,e.isStereoscopicSideBySide),s=t.SerializationHelper.Parse(o,e,n);if(e.parentId&&(s._waitingParentId=e.parentId),s.inputs&&(s.inputs.parse(e),s._setupInputs()),s.setPosition&&(s.position.copyFromFloats(0,0,0),s.setPosition(t.Vector3.FromArray(e.position))),e.target&&s.setTarget&&s.setTarget(t.Vector3.FromArray(e.target)),e.cameraRigMode){var a=e.interaxial_distance?{interaxialDistance:e.interaxial_distance}:{};s.setCameraRigMode(e.cameraRigMode,a)}if(e.animations){for(var l=0;l<e.animations.length;l++){var c=e.animations[l];s.animations.push(t.Animation.Parse(c))}t.Node.ParseAnimationRanges(s,e,n)}return e.autoAnimate&&n.beginAnimation(s,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),s},i._PERSPECTIVE_CAMERA=0,i._ORTHOGRAPHIC_CAMERA=1,i._FOVMODE_VERTICAL_FIXED=0,i._FOVMODE_HORIZONTAL_FIXED=1,i._RIG_MODE_NONE=0,i._RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,i._RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,i._RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,i._RIG_MODE_STEREOSCOPIC_OVERUNDER=13,i._RIG_MODE_VR=20,i._RIG_MODE_WEBVR=21,i.ForceAttachControlToAlwaysPreventDefault=!1,i.UseAlternateWebVRRendering=!1,r([t.serializeAsVector3()],i.prototype,"position",void 0),r([t.serializeAsVector3()],i.prototype,"upVector",void 0),r([t.serialize()],i.prototype,"orthoLeft",void 0),r([t.serialize()],i.prototype,"orthoRight",void 0),r([t.serialize()],i.prototype,"orthoBottom",void 0),r([t.serialize()],i.prototype,"orthoTop",void 0),r([t.serialize()],i.prototype,"fov",void 0),r([t.serialize()],i.prototype,"minZ",void 0),r([t.serialize()],i.prototype,"maxZ",void 0),r([t.serialize()],i.prototype,"inertia",void 0),r([t.serialize()],i.prototype,"mode",void 0),r([t.serialize()],i.prototype,"layerMask",void 0),r([t.serialize()],i.prototype,"fovMode",void 0),r([t.serialize()],i.prototype,"cameraRigMode",void 0),r([t.serialize()],i.prototype,"interaxialDistance",void 0),r([t.serialize()],i.prototype,"isStereoscopicSideBySide",void 0),i}(t.Node);t.Camera=e}(l||(l={})),function(t){var e=function(){function e(t){this._renderingGroups=new Array,this._autoClearDepthStencil={},this._customOpaqueSortCompareFn={},this._customAlphaTestSortCompareFn={},this._customTransparentSortCompareFn={},this._renderinGroupInfo=null,this._scene=t;for(var i=e.MIN_RENDERINGGROUPS;i<e.MAX_RENDERINGGROUPS;i++)this._autoClearDepthStencil[i]={autoClear:!0,depth:!0,stencil:!0}}return e.prototype._clearDepthStencilBuffer=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._depthStencilBufferAlreadyCleaned||(this._scene.getEngine().clear(null,!1,t,e),this._depthStencilBufferAlreadyCleaned=!0)},e.prototype.render=function(i,n,r,o){var s=this._scene.onRenderingGroupObservable.hasObservers()?this._scene.onRenderingGroupObservable:null,a=null;if(s&&(this._renderinGroupInfo||(this._renderinGroupInfo=new t.RenderingGroupInfo),(a=this._renderinGroupInfo).scene=this._scene,a.camera=this._scene.activeCamera),o)for(var l=0;l<this._scene.spriteManagers.length;l++){var c=this._scene.spriteManagers[l];this.dispatchSprites(c)}for(l=e.MIN_RENDERINGGROUPS;l<e.MAX_RENDERINGGROUPS;l++){this._depthStencilBufferAlreadyCleaned=l===e.MIN_RENDERINGGROUPS;var u=this._renderingGroups[l];if(u||s){var h=0;if(s&&a&&(h=Math.pow(2,l),a.renderStage=t.RenderingGroupInfo.STAGE_PRECLEAR,a.renderingGroupId=l,s.notifyObservers(a,h)),e.AUTOCLEAR){var p=this._autoClearDepthStencil[l];p&&p.autoClear&&this._clearDepthStencilBuffer(p.depth,p.stencil)}s&&a&&(a.renderStage=t.RenderingGroupInfo.STAGE_PREOPAQUE,s.notifyObservers(a,h),a.renderStage=t.RenderingGroupInfo.STAGE_PRETRANSPARENT,s.notifyObservers(a,h)),u&&u.render(i,o,r,n),s&&a&&(a.renderStage=t.RenderingGroupInfo.STAGE_POSTTRANSPARENT,s.notifyObservers(a,h))}}},e.prototype.reset=function(){for(var t=e.MIN_RENDERINGGROUPS;t<e.MAX_RENDERINGGROUPS;t++){var i=this._renderingGroups[t];i&&i.prepare()}},e.prototype.dispose=function(){for(var t=e.MIN_RENDERINGGROUPS;t<e.MAX_RENDERINGGROUPS;t++){var i=this._renderingGroups[t];i&&i.dispose()}this._renderingGroups.length=0},e.prototype._prepareRenderingGroup=function(e){void 0===this._renderingGroups[e]&&(this._renderingGroups[e]=new t.RenderingGroup(e,this._scene,this._customOpaqueSortCompareFn[e],this._customAlphaTestSortCompareFn[e],this._customTransparentSortCompareFn[e]))},e.prototype.dispatchSprites=function(t){var e=t.renderingGroupId||0;this._prepareRenderingGroup(e),this._renderingGroups[e].dispatchSprites(t)},e.prototype.dispatchParticles=function(t){var e=t.renderingGroupId||0;this._prepareRenderingGroup(e),this._renderingGroups[e].dispatchParticles(t)},e.prototype.dispatch=function(t,e,i){void 0===e&&(e=t.getMesh());var n=e.renderingGroupId||0;this._prepareRenderingGroup(n),this._renderingGroups[n].dispatch(t,e,i)},e.prototype.setRenderingOrder=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this._customOpaqueSortCompareFn[t]=e,this._customAlphaTestSortCompareFn[t]=i,this._customTransparentSortCompareFn[t]=n,this._renderingGroups[t]){var r=this._renderingGroups[t];r.opaqueSortCompareFn=this._customOpaqueSortCompareFn[t],r.alphaTestSortCompareFn=this._customAlphaTestSortCompareFn[t],r.transparentSortCompareFn=this._customTransparentSortCompareFn[t]}},e.prototype.setRenderingAutoClearDepthStencil=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this._autoClearDepthStencil[t]={autoClear:e,depth:i,stencil:n}},e.MAX_RENDERINGGROUPS=4,e.MIN_RENDERINGGROUPS=0,e.AUTOCLEAR=!0,e}();t.RenderingManager=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),this.index=e,this._opaqueSubMeshes=new t.SmartArray(256),this._transparentSubMeshes=new t.SmartArray(256),this._alphaTestSubMeshes=new t.SmartArray(256),this._depthOnlySubMeshes=new t.SmartArray(256),this._particleSystems=new t.SmartArray(256),this._spriteManagers=new t.SmartArray(256),this._edgesRenderers=new t.SmartArray(16),this._scene=i,this.opaqueSortCompareFn=n,this.alphaTestSortCompareFn=r,this.transparentSortCompareFn=o}return Object.defineProperty(e.prototype,"opaqueSortCompareFn",{set:function(t){this._opaqueSortCompareFn=t,this._renderOpaque=t?this.renderOpaqueSorted:e.renderUnsorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaTestSortCompareFn",{set:function(t){this._alphaTestSortCompareFn=t,this._renderAlphaTest=t?this.renderAlphaTestSorted:e.renderUnsorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transparentSortCompareFn",{set:function(t){this._transparentSortCompareFn=t||e.defaultTransparentSortCompare,this._renderTransparent=this.renderTransparentSorted},enumerable:!0,configurable:!0}),e.prototype.render=function(e,i,n,r){if(e)e(this._opaqueSubMeshes,this._alphaTestSubMeshes,this._transparentSubMeshes,this._depthOnlySubMeshes);else{var o=this._scene.getEngine();0!==this._depthOnlySubMeshes.length&&(o.setColorWrite(!1),this._renderAlphaTest(this._depthOnlySubMeshes),o.setColorWrite(!0)),0!==this._opaqueSubMeshes.length&&this._renderOpaque(this._opaqueSubMeshes),0!==this._alphaTestSubMeshes.length&&this._renderAlphaTest(this._alphaTestSubMeshes);var s=o.getStencilBuffer();o.setStencilBuffer(!1),i&&this._renderSprites(),n&&this._renderParticles(r),this.onBeforeTransparentRendering&&this.onBeforeTransparentRendering(),0!==this._transparentSubMeshes.length&&(this._renderTransparent(this._transparentSubMeshes),o.setAlphaMode(t.Engine.ALPHA_DISABLE)),o.setStencilBuffer(!1);for(var a=0;a<this._edgesRenderers.length;a++)this._edgesRenderers.data[a].render();o.setStencilBuffer(s)}},e.prototype.renderOpaqueSorted=function(t){return e.renderSorted(t,this._opaqueSortCompareFn,this._scene.activeCamera,!1)},e.prototype.renderAlphaTestSorted=function(t){return e.renderSorted(t,this._alphaTestSortCompareFn,this._scene.activeCamera,!1)},e.prototype.renderTransparentSorted=function(t){return e.renderSorted(t,this._transparentSortCompareFn,this._scene.activeCamera,!0)},e.renderSorted=function(e,i,n,r){for(var o,s=0,a=n?n.globalPosition:t.Vector3.Zero();s<e.length;s++)(o=e.data[s])._alphaIndex=o.getMesh().alphaIndex,o._distanceToCamera=o.getBoundingInfo().boundingSphere.centerWorld.subtract(a).length();var l=e.data.slice(0,e.length);for(i&&l.sort(i),s=0;s<l.length;s++){if(o=l[s],r){var c=o.getMaterial();if(c&&c.needDepthPrePass){var u=c.getScene().getEngine();u.setColorWrite(!1),u.setAlphaMode(t.Engine.ALPHA_DISABLE),o.render(!1),u.setColorWrite(!0)}}o.render(r)}},e.renderUnsorted=function(t){for(var e=0;e<t.length;e++)t.data[e].render(!1)},e.defaultTransparentSortCompare=function(t,i){return t._alphaIndex>i._alphaIndex?1:t._alphaIndex<i._alphaIndex?-1:e.backToFrontSortCompare(t,i)},e.backToFrontSortCompare=function(t,e){return t._distanceToCamera<e._distanceToCamera?1:t._distanceToCamera>e._distanceToCamera?-1:0},e.frontToBackSortCompare=function(t,e){return t._distanceToCamera<e._distanceToCamera?-1:t._distanceToCamera>e._distanceToCamera?1:0},e.prototype.prepare=function(){this._opaqueSubMeshes.reset(),this._transparentSubMeshes.reset(),this._alphaTestSubMeshes.reset(),this._depthOnlySubMeshes.reset(),this._particleSystems.reset(),this._spriteManagers.reset(),this._edgesRenderers.reset()},e.prototype.dispose=function(){this._opaqueSubMeshes.dispose(),this._transparentSubMeshes.dispose(),this._alphaTestSubMeshes.dispose(),this._depthOnlySubMeshes.dispose(),this._particleSystems.dispose(),this._spriteManagers.dispose(),this._edgesRenderers.dispose()},e.prototype.dispatch=function(t,e,i){void 0===e&&(e=t.getMesh()),void 0===i&&(i=t.getMaterial()),null!=i&&(i.needAlphaBlendingForMesh(e)?this._transparentSubMeshes.push(t):i.needAlphaTesting()?(i.needDepthPrePass&&this._depthOnlySubMeshes.push(t),this._alphaTestSubMeshes.push(t)):(i.needDepthPrePass&&this._depthOnlySubMeshes.push(t),this._opaqueSubMeshes.push(t)),null!==e._edgesRenderer&&void 0!==e._edgesRenderer&&this._edgesRenderers.push(e._edgesRenderer))},e.prototype.dispatchSprites=function(t){this._spriteManagers.push(t)},e.prototype.dispatchParticles=function(t){this._particleSystems.push(t)},e.prototype._renderParticles=function(t){if(0!==this._particleSystems.length){var e=this._scene.activeCamera;this._scene.onBeforeParticlesRenderingObservable.notifyObservers(this._scene);for(var i=0;i<this._scene._activeParticleSystems.length;i++){var n=this._scene._activeParticleSystems.data[i];if(0!==(e&&e.layerMask&n.layerMask)){var r=n.emitter;r.position&&t&&-1===t.indexOf(r)||this._scene._activeParticles.addCount(n.render(),!1)}}this._scene.onAfterParticlesRenderingObservable.notifyObservers(this._scene)}},e.prototype._renderSprites=function(){if(this._scene.spritesEnabled&&0!==this._spriteManagers.length){var t=this._scene.activeCamera;this._scene.onBeforeSpritesRenderingObservable.notifyObservers(this._scene);for(var e=0;e<this._spriteManagers.length;e++){var i=this._spriteManagers.data[e];0!==(t&&t.layerMask&i.layerMask)&&i.render()}this._scene.onAfterSpritesRenderingObservable.notifyObservers(this._scene)}},e}();t.RenderingGroup=e}(l||(l={})),function(t){var e=function(){function t(){this._singleClick=!1,this._doubleClick=!1,this._hasSwiped=!1,this._ignore=!1}return Object.defineProperty(t.prototype,"singleClick",{get:function(){return this._singleClick},set:function(t){this._singleClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(t){this._doubleClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(t){this._hasSwiped=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignore",{get:function(){return this._ignore},set:function(t){this._ignore=t},enumerable:!0,configurable:!0}),t}(),i=function(){function t(){}return t.STAGE_PRECLEAR=1,t.STAGE_PREOPAQUE=2,t.STAGE_PRETRANSPARENT=3,t.STAGE_POSTTRANSPARENT=4,t}();t.RenderingGroupInfo=i;var n=function(){function i(e){this.autoClear=!0,this.autoClearDepthAndStencil=!0,this.clearColor=new t.Color4(.2,.2,.3,1),this.ambientColor=new t.Color3(0,0,0),this.forceWireframe=!1,this._forcePointsCloud=!1,this.forceShowBoundingBoxes=!1,this.animationsEnabled=!0,this.useConstantAnimationDeltaTime=!1,this.constantlyUpdateMeshUnderPointer=!1,this.hoverCursor="pointer",this.defaultCursor="",this.preventDefaultOnPointerDown=!0,this.metadata=null,this.onDisposeObservable=new t.Observable,this.onBeforeRenderObservable=new t.Observable,this.onAfterRenderObservable=new t.Observable,this.onBeforeAnimationsObservable=new t.Observable,this.onAfterAnimationsObservable=new t.Observable,this.onBeforeDrawPhaseObservable=new t.Observable,this.onAfterDrawPhaseObservable=new t.Observable,this.onBeforePhysicsObservable=new t.Observable,this.onAfterPhysicsObservable=new t.Observable,this.onReadyObservable=new t.Observable,this.onBeforeCameraRenderObservable=new t.Observable,this.onAfterCameraRenderObservable=new t.Observable,this.onBeforeActiveMeshesEvaluationObservable=new t.Observable,this.onAfterActiveMeshesEvaluationObservable=new t.Observable,this.onBeforeParticlesRenderingObservable=new t.Observable,this.onAfterParticlesRenderingObservable=new t.Observable,this.onBeforeSpritesRenderingObservable=new t.Observable,this.onAfterSpritesRenderingObservable=new t.Observable,this.onDataLoadedObservable=new t.Observable,this.onNewCameraAddedObservable=new t.Observable,this.onCameraRemovedObservable=new t.Observable,this.onNewLightAddedObservable=new t.Observable,this.onLightRemovedObservable=new t.Observable,this.onNewGeometryAddedObservable=new t.Observable,this.onGeometryRemovedObservable=new t.Observable,this.onNewTransformNodeAddedObservable=new t.Observable,this.onTransformNodeRemovedObservable=new t.Observable,this.onNewMeshAddedObservable=new t.Observable,this.onMeshRemovedObservable=new t.Observable,this.OnBeforeRenderTargetsRenderObservable=new t.Observable,this.OnAfterRenderTargetsRenderObservable=new t.Observable,this.onBeforeStepObservable=new t.Observable,this.onAfterStepObservable=new t.Observable,this.onRenderingGroupObservable=new t.Observable,this.animations=[],this.onPrePointerObservable=new t.Observable,this.onPointerObservable=new t.Observable,this._meshPickProceed=!1,this._currentPickResult=null,this._previousPickResult=null,this._totalPointersPressed=0,this._doubleClickOccured=!1,this.cameraToUseForPointers=null,this._startingPointerPosition=new t.Vector2(0,0),this._previousStartingPointerPosition=new t.Vector2(0,0),this._startingPointerTime=0,this._previousStartingPointerTime=0,this._timeAccumulator=0,this._currentStepId=0,this._currentInternalStep=0,this.onPreKeyboardObservable=new t.Observable,this.onKeyboardObservable=new t.Observable,this._useRightHandedSystem=!1,this._fogEnabled=!0,this._fogMode=i.FOGMODE_NONE,this.fogColor=new t.Color3(.2,.2,.3),this.fogDensity=.1,this.fogStart=0,this.fogEnd=1e3,this._shadowsEnabled=!0,this._lightsEnabled=!0,this.lights=new Array,this.cameras=new Array,this.activeCameras=new Array,this.transformNodes=new Array,this.meshes=new Array,this.animationGroups=new Array,this._geometries=new Array,this.materials=new Array,this.multiMaterials=new Array,this._texturesEnabled=!0,this.textures=new Array,this.particlesEnabled=!0,this.particleSystems=new Array,this.spritesEnabled=!0,this.spriteManagers=new Array,this.layers=new Array,this.highlightLayers=new Array,this._skeletonsEnabled=!0,this.skeletons=new Array,this.morphTargetManagers=new Array,this.lensFlaresEnabled=!0,this.lensFlareSystems=new Array,this.collisionsEnabled=!0,this.gravity=new t.Vector3(0,-9.807,0),this.postProcesses=new Array,this.postProcessesEnabled=!0,this.renderTargetsEnabled=!0,this.dumpNextRenderTargets=!1,this.customRenderTargets=new Array,this.importedMeshesFiles=new Array,this.probesEnabled=!0,this.reflectionProbes=new Array,this._actionManagers=new Array,this._meshesForIntersections=new t.SmartArrayNoDuplicate(256),this.proceduralTexturesEnabled=!0,this._proceduralTextures=new Array,this.soundTracks=new Array,this._audioEnabled=!0,this._headphone=!1,this._totalVertices=new t.PerfCounter,this._activeIndices=new t.PerfCounter,this._activeParticles=new t.PerfCounter,this._activeBones=new t.PerfCounter,this._animationTime=0,this.animationTimeScale=1,this._renderId=0,this._executeWhenReadyTimeoutId=-1,this._intermediateRendering=!1,this._viewUpdateFlag=-1,this._projectionUpdateFlag=-1,this._alternateViewUpdateFlag=-1,this._alternateProjectionUpdateFlag=-1,this._toBeDisposed=new t.SmartArray(256),this._activeRequests=new Array,this._pendingData=new Array,this._isDisposed=!1,this.dispatchAllSubMeshesOfActiveMeshes=!1,this._activeMeshes=new t.SmartArray(256),this._processedMaterials=new t.SmartArray(256),this._renderTargets=new t.SmartArrayNoDuplicate(256),this._activeParticleSystems=new t.SmartArray(256),this._activeSkeletons=new t.SmartArrayNoDuplicate(32),this._softwareSkinnedMeshes=new t.SmartArrayNoDuplicate(32),this._activeAnimatables=new Array,this._transformMatrix=t.Matrix.Zero(),this._useAlternateCameraConfiguration=!1,this._alternateRendering=!1,this.requireLightSorting=!1,this._activeMeshesFrozen=!1,this._tempPickingRay=t.Ray?t.Ray.Zero():null,this._engine=e||t.Engine.LastCreatedEngine,this._engine.scenes.push(this),this._uid=null,this._renderingManager=new t.RenderingManager(this),this.postProcessManager=new t.PostProcessManager(this),t.OutlineRenderer&&(this._outlineRenderer=new t.OutlineRenderer(this)),t.Tools.IsWindowObjectExist()&&this.attachControl(),t.SimplificationQueue&&(this.simplificationQueue=new t.SimplificationQueue),this.workerCollisions=!1,this._createUbo(),this._imageProcessingConfiguration=new t.ImageProcessingConfiguration}return Object.defineProperty(i,"FOGMODE_NONE",{get:function(){return i._FOGMODE_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"FOGMODE_EXP",{get:function(){return i._FOGMODE_EXP},enumerable:!0,configurable:!0}),Object.defineProperty(i,"FOGMODE_EXP2",{get:function(){return i._FOGMODE_EXP2},enumerable:!0,configurable:!0}),Object.defineProperty(i,"FOGMODE_LINEAR",{get:function(){return i._FOGMODE_LINEAR},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(e){this._environmentTexture!==e&&(this._environmentTexture=e,this.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"forcePointsCloud",{get:function(){return this._forcePointsCloud},set:function(e){this._forcePointsCloud!==e&&(this._forcePointsCloud=e,this.markAllMaterialsAsDirty(t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"beforeRender",{set:function(t){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),t&&(this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"afterRender",{set:function(t){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),t&&(this._onAfterRenderObserver=this.onAfterRenderObservable.add(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"beforeCameraRender",{set:function(t){this._onBeforeCameraRenderObserver&&this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=this.onBeforeCameraRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"afterCameraRender",{set:function(t){this._onAfterCameraRenderObserver&&this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=this.onAfterCameraRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gamepadManager",{get:function(){return this._gamepadManager||(this._gamepadManager=new t.GamepadManager(this)),this._gamepadManager},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unTranslatedPointer",{get:function(){return new t.Vector2(this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useRightHandedSystem",{get:function(){return this._useRightHandedSystem},set:function(e){this._useRightHandedSystem!==e&&(this._useRightHandedSystem=e,this.markAllMaterialsAsDirty(t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),i.prototype.setStepId=function(t){this._currentStepId=t},i.prototype.getStepId=function(){return this._currentStepId},i.prototype.getInternalStep=function(){return this._currentInternalStep},Object.defineProperty(i.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(e){this._fogEnabled!==e&&(this._fogEnabled=e,this.markAllMaterialsAsDirty(t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fogMode",{get:function(){return this._fogMode},set:function(e){this._fogMode!==e&&(this._fogMode=e,this.markAllMaterialsAsDirty(t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowsEnabled",{get:function(){return this._shadowsEnabled},set:function(e){this._shadowsEnabled!==e&&(this._shadowsEnabled=e,this.markAllMaterialsAsDirty(t.Material.LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lightsEnabled",{get:function(){return this._lightsEnabled},set:function(e){this._lightsEnabled!==e&&(this._lightsEnabled=e,this.markAllMaterialsAsDirty(t.Material.LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultMaterial",{get:function(){return this._defaultMaterial||(this._defaultMaterial=new t.StandardMaterial("default material",this)),this._defaultMaterial},set:function(t){this._defaultMaterial=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texturesEnabled",{get:function(){return this._texturesEnabled},set:function(e){this._texturesEnabled!==e&&(this._texturesEnabled=e,this.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skeletonsEnabled",{get:function(){return this._skeletonsEnabled},set:function(e){this._skeletonsEnabled!==e&&(this._skeletonsEnabled=e,this.markAllMaterialsAsDirty(t.Material.AttributesDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"postProcessRenderPipelineManager",{get:function(){return this._postProcessRenderPipelineManager||(this._postProcessRenderPipelineManager=new t.PostProcessRenderPipelineManager),this._postProcessRenderPipelineManager},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainSoundTrack",{get:function(){return this._mainSoundTrack||(this._mainSoundTrack=new t.SoundTrack(this,{mainTrack:!0})),this._mainSoundTrack},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_isAlternateRenderingEnabled",{get:function(){return this._alternateRendering},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frustumPlanes",{get:function(){return this._frustumPlanes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"geometryBufferRenderer",{get:function(){return this._geometryBufferRenderer},set:function(t){t&&t.isSupported&&(this._geometryBufferRenderer=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"debugLayer",{get:function(){return this._debugLayer||(this._debugLayer=new t.DebugLayer(this)),this._debugLayer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"workerCollisions",{get:function(){return this._workerCollisions},set:function(e){t.CollisionCoordinatorLegacy&&(e=e&&!!Worker,this._workerCollisions=e,this.collisionCoordinator&&this.collisionCoordinator.destroy(),this.collisionCoordinator=e?new t.CollisionCoordinatorWorker:new t.CollisionCoordinatorLegacy,this.collisionCoordinator.init(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionOctree",{get:function(){return this._selectionOctree},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointerX",{get:function(){return this._pointerX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointerY",{get:function(){return this._pointerY},enumerable:!0,configurable:!0}),i.prototype.getCachedMaterial=function(){return this._cachedMaterial},i.prototype.getCachedEffect=function(){return this._cachedEffect},i.prototype.getCachedVisibility=function(){return this._cachedVisibility},i.prototype.isCachedMaterialInvalid=function(t,e,i){return void 0===i&&(i=1),this._cachedEffect!==e||this._cachedMaterial!==t||this._cachedVisibility!==i},i.prototype.getBoundingBoxRenderer=function(){return this._boundingBoxRenderer||(this._boundingBoxRenderer=new t.BoundingBoxRenderer(this)),this._boundingBoxRenderer},i.prototype.getOutlineRenderer=function(){return this._outlineRenderer},i.prototype.getEngine=function(){return this._engine},i.prototype.getTotalVertices=function(){return this._totalVertices.current},Object.defineProperty(i.prototype,"totalVerticesPerfCounter",{get:function(){return this._totalVertices},enumerable:!0,configurable:!0}),i.prototype.getActiveIndices=function(){return this._activeIndices.current},Object.defineProperty(i.prototype,"totalActiveIndicesPerfCounter",{get:function(){return this._activeIndices},enumerable:!0,configurable:!0}),i.prototype.getActiveParticles=function(){return this._activeParticles.current},Object.defineProperty(i.prototype,"activeParticlesPerfCounter",{get:function(){return this._activeParticles},enumerable:!0,configurable:!0}),i.prototype.getActiveBones=function(){return this._activeBones.current},Object.defineProperty(i.prototype,"activeBonesPerfCounter",{get:function(){return this._activeBones},enumerable:!0,configurable:!0}),i.prototype.getInterFramePerfCounter=function(){return t.Tools.Warn("getInterFramePerfCounter is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"interFramePerfCounter",{get:function(){return t.Tools.Warn("interFramePerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getLastFrameDuration=function(){return t.Tools.Warn("getLastFrameDuration is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"lastFramePerfCounter",{get:function(){return t.Tools.Warn("lastFramePerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getEvaluateActiveMeshesDuration=function(){return t.Tools.Warn("getEvaluateActiveMeshesDuration is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"evaluateActiveMeshesDurationPerfCounter",{get:function(){return t.Tools.Warn("evaluateActiveMeshesDurationPerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getActiveMeshes=function(){return this._activeMeshes},i.prototype.getRenderTargetsDuration=function(){return t.Tools.Warn("getRenderTargetsDuration is deprecated. Please use SceneInstrumentation class"),0},i.prototype.getRenderDuration=function(){return t.Tools.Warn("getRenderDuration is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"renderDurationPerfCounter",{get:function(){return t.Tools.Warn("renderDurationPerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getParticlesDuration=function(){return t.Tools.Warn("getParticlesDuration is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"particlesDurationPerfCounter",{get:function(){return t.Tools.Warn("particlesDurationPerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getSpritesDuration=function(){return t.Tools.Warn("getSpritesDuration is deprecated. Please use SceneInstrumentation class"),0},Object.defineProperty(i.prototype,"spriteDuractionPerfCounter",{get:function(){return t.Tools.Warn("spriteDuractionPerfCounter is deprecated. Please use SceneInstrumentation class"),null},enumerable:!0,configurable:!0}),i.prototype.getAnimationRatio=function(){return this._animationRatio},i.prototype.getRenderId=function(){return this._renderId},i.prototype.incrementRenderId=function(){this._renderId++},i.prototype._updatePointerPosition=function(t){var e=this._engine.getRenderingCanvasClientRect();e&&(this._pointerX=t.clientX-e.left,this._pointerY=t.clientY-e.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)},i.prototype._createUbo=function(){this._sceneUbo=new t.UniformBuffer(this._engine,void 0,!0),this._sceneUbo.addUniform("viewProjection",16),this._sceneUbo.addUniform("view",16)},i.prototype._createAlternateUbo=function(){this._alternateSceneUbo=new t.UniformBuffer(this._engine,void 0,!0),this._alternateSceneUbo.addUniform("viewProjection",16),this._alternateSceneUbo.addUniform("view",16)},i.prototype.simulatePointerMove=function(t){var e=new PointerEvent("pointermove");return this._processPointerMove(t,e)},i.prototype._processPointerMove=function(e,i){var n=this._engine.getRenderingCanvas();if(!n)return this;if(e&&e.hit&&e.pickedMesh?(this.setPointerOverSprite(null),this.setPointerOverMesh(e.pickedMesh),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers?this._pointerOverMesh.actionManager.hoverCursor?n.style.cursor=this._pointerOverMesh.actionManager.hoverCursor:n.style.cursor=this.hoverCursor:n.style.cursor=this.defaultCursor):(this.setPointerOverMesh(null),(e=this.pickSprite(this._unTranslatedPointerX,this._unTranslatedPointerY,this._spritePredicate,!1,this.cameraToUseForPointers||void 0))&&e.hit&&e.pickedSprite?(this.setPointerOverSprite(e.pickedSprite),this._pointerOverSprite&&this._pointerOverSprite.actionManager&&this._pointerOverSprite.actionManager.hoverCursor?n.style.cursor=this._pointerOverSprite.actionManager.hoverCursor:n.style.cursor=this.hoverCursor):(this.setPointerOverSprite(null),n.style.cursor=this.defaultCursor)),e&&(this.onPointerMove&&this.onPointerMove(i,e),this.onPointerObservable.hasObservers())){var r="mousewheel"===i.type||"DOMMouseScroll"===i.type?t.PointerEventTypes.POINTERWHEEL:t.PointerEventTypes.POINTERMOVE,o=new t.PointerInfo(r,i,e);this.onPointerObservable.notifyObservers(o,r)}return this},i.prototype.simulatePointerDown=function(t){var e=new PointerEvent("pointerdown");return this._processPointerDown(t,e)},i.prototype._processPointerDown=function(e,n){var r=this;if(e&&e.hit&&e.pickedMesh){this._pickedDownMesh=e.pickedMesh;var o=e.pickedMesh.actionManager;if(o){if(o.hasPickTriggers)switch(o.processTrigger(t.ActionManager.OnPickDownTrigger,t.ActionEvent.CreateNew(e.pickedMesh,n)),n.button){case 0:o.processTrigger(t.ActionManager.OnLeftPickTrigger,t.ActionEvent.CreateNew(e.pickedMesh,n));break;case 1:o.processTrigger(t.ActionManager.OnCenterPickTrigger,t.ActionEvent.CreateNew(e.pickedMesh,n));break;case 2:o.processTrigger(t.ActionManager.OnRightPickTrigger,t.ActionEvent.CreateNew(e.pickedMesh,n))}o.hasSpecificTrigger(t.ActionManager.OnLongPressTrigger)&&window.setTimeout(function(){var e=r.pick(r._unTranslatedPointerX,r._unTranslatedPointerY,function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.actionManager&&e.actionManager.hasSpecificTrigger(t.ActionManager.OnLongPressTrigger)&&e==r._pickedDownMesh},!1,r.cameraToUseForPointers);e&&e.hit&&e.pickedMesh&&o&&0!==r._totalPointersPressed&&(new Date).getTime()-r._startingPointerTime>i.LongPressDelay&&Math.abs(r._startingPointerPosition.x-r._pointerX)<i.DragMovementThreshold&&Math.abs(r._startingPointerPosition.y-r._pointerY)<i.DragMovementThreshold&&(r._startingPointerTime=0,o.processTrigger(t.ActionManager.OnLongPressTrigger,t.ActionEvent.CreateNew(e.pickedMesh,n)))},i.LongPressDelay)}}if(e&&(this.onPointerDown&&this.onPointerDown(n,e),this.onPointerObservable.hasObservers())){var s=t.PointerEventTypes.POINTERDOWN,a=new t.PointerInfo(s,n,e);this.onPointerObservable.notifyObservers(a,s)}return this},i.prototype.simulatePointerUp=function(t){var i=new PointerEvent("pointerup"),n=new e;return n.singleClick=!0,n.ignore=!0,this._processPointerUp(t,i,n)},i.prototype._processPointerUp=function(e,i,n){if(e&&e&&e.pickedMesh){if(this._pickedUpMesh=e.pickedMesh,this._pickedDownMesh===this._pickedUpMesh&&(this.onPointerPick&&this.onPointerPick(i,e),n.singleClick&&!n.ignore&&this.onPointerObservable.hasObservers())){var r=t.PointerEventTypes.POINTERPICK,o=new t.PointerInfo(r,i,e);this.onPointerObservable.notifyObservers(o,r)}e.pickedMesh.actionManager&&(n.ignore&&e.pickedMesh.actionManager.processTrigger(t.ActionManager.OnPickUpTrigger,t.ActionEvent.CreateNew(e.pickedMesh,i)),n.hasSwiped||n.ignore||!n.singleClick||e.pickedMesh.actionManager.processTrigger(t.ActionManager.OnPickTrigger,t.ActionEvent.CreateNew(e.pickedMesh,i)),n.doubleClick&&!n.ignore&&e.pickedMesh.actionManager.hasSpecificTrigger(t.ActionManager.OnDoublePickTrigger)&&e.pickedMesh.actionManager.processTrigger(t.ActionManager.OnDoublePickTrigger,t.ActionEvent.CreateNew(e.pickedMesh,i)))}if(this._pickedDownMesh&&this._pickedDownMesh.actionManager&&this._pickedDownMesh.actionManager.hasSpecificTrigger(t.ActionManager.OnPickOutTrigger)&&this._pickedDownMesh!==this._pickedUpMesh&&this._pickedDownMesh.actionManager.processTrigger(t.ActionManager.OnPickOutTrigger,t.ActionEvent.CreateNew(this._pickedDownMesh,i)),this.onPointerUp&&this.onPointerUp(i,e),this.onPointerObservable.hasObservers())if(n.ignore){r=t.PointerEventTypes.POINTERUP,o=new t.PointerInfo(r,i,e);this.onPointerObservable.notifyObservers(o,r)}else if(!n.hasSwiped){if(n.singleClick&&this.onPointerObservable.hasSpecificMask(t.PointerEventTypes.POINTERTAP)){r=t.PointerEventTypes.POINTERTAP,o=new t.PointerInfo(r,i,e);this.onPointerObservable.notifyObservers(o,r)}if(n.doubleClick&&this.onPointerObservable.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP)){r=t.PointerEventTypes.POINTERDOUBLETAP,o=new t.PointerInfo(r,i,e);this.onPointerObservable.notifyObservers(o,r)}}return this},i.prototype.attachControl=function(n,r,o){var s=this;void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this._initActionManager=function(t,e){if(!s._meshPickProceed){var i=s.pick(s._unTranslatedPointerX,s._unTranslatedPointerY,s.pointerDownPredicate,!1,s.cameraToUseForPointers);s._currentPickResult=i,i&&(t=i.hit&&i.pickedMesh?i.pickedMesh.actionManager:null),s._meshPickProceed=!0}return t},this._delayedSimpleClick=function(t,e,n){((new Date).getTime()-s._previousStartingPointerTime>i.DoubleClickDelay&&!s._doubleClickOccured||t!==s._previousButtonPressed)&&(s._doubleClickOccured=!1,e.singleClick=!0,e.ignore=!1,n(e,s._currentPickResult))},this._initClickEvent=function(n,r,o,a){var l=new e;s._currentPickResult=null;var c=null,u=n.hasSpecificMask(t.PointerEventTypes.POINTERPICK)||r.hasSpecificMask(t.PointerEventTypes.POINTERPICK)||n.hasSpecificMask(t.PointerEventTypes.POINTERTAP)||r.hasSpecificMask(t.PointerEventTypes.POINTERTAP)||n.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP)||r.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP);if(!u&&t.ActionManager&&t.ActionManager.HasPickTriggers&&(c=s._initActionManager(c,l))&&(u=c.hasPickTriggers),u){var h=o.button;if(l.hasSwiped=Math.abs(s._startingPointerPosition.x-s._pointerX)>i.DragMovementThreshold||Math.abs(s._startingPointerPosition.y-s._pointerY)>i.DragMovementThreshold,!l.hasSwiped){var p=!i.ExclusiveDoubleClickMode;p||(p=!n.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP)&&!r.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP))&&!t.ActionManager.HasSpecificTrigger(t.ActionManager.OnDoublePickTrigger)&&(c=s._initActionManager(c,l))&&(p=!c.hasSpecificTrigger(t.ActionManager.OnDoublePickTrigger)),p?((new Date).getTime()-s._previousStartingPointerTime>i.DoubleClickDelay||h!==s._previousButtonPressed)&&(l.singleClick=!0,a(l,s._currentPickResult)):(s._previousDelayedSimpleClickTimeout=s._delayedSimpleClickTimeout,s._delayedSimpleClickTimeout=window.setTimeout(s._delayedSimpleClick.bind(s,h,l,a),i.DoubleClickDelay));var d=n.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP)||r.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP);!d&&t.ActionManager.HasSpecificTrigger(t.ActionManager.OnDoublePickTrigger)&&(c=s._initActionManager(c,l))&&(d=c.hasSpecificTrigger(t.ActionManager.OnDoublePickTrigger)),d&&(h===s._previousButtonPressed&&(new Date).getTime()-s._previousStartingPointerTime<i.DoubleClickDelay&&!s._doubleClickOccured?!l.hasSwiped&&Math.abs(s._previousStartingPointerPosition.x-s._startingPointerPosition.x)<i.DragMovementThreshold&&Math.abs(s._previousStartingPointerPosition.y-s._startingPointerPosition.y)<i.DragMovementThreshold?(s._previousStartingPointerTime=0,s._doubleClickOccured=!0,l.doubleClick=!0,l.ignore=!1,i.ExclusiveDoubleClickMode&&s._previousDelayedSimpleClickTimeout&&clearTimeout(s._previousDelayedSimpleClickTimeout),s._previousDelayedSimpleClickTimeout=s._delayedSimpleClickTimeout,a(l,s._currentPickResult)):(s._doubleClickOccured=!1,s._previousStartingPointerTime=s._startingPointerTime,s._previousStartingPointerPosition.x=s._startingPointerPosition.x,s._previousStartingPointerPosition.y=s._startingPointerPosition.y,s._previousButtonPressed=h,i.ExclusiveDoubleClickMode?(s._previousDelayedSimpleClickTimeout&&clearTimeout(s._previousDelayedSimpleClickTimeout),s._previousDelayedSimpleClickTimeout=s._delayedSimpleClickTimeout,a(l,s._previousPickResult)):a(l,s._currentPickResult)):(s._doubleClickOccured=!1,s._previousStartingPointerTime=s._startingPointerTime,s._previousStartingPointerPosition.x=s._startingPointerPosition.x,s._previousStartingPointerPosition.y=s._startingPointerPosition.y,s._previousButtonPressed=h))}}l.ignore=!0,a(l,s._currentPickResult)},this._spritePredicate=function(t){return t.isPickable&&t.actionManager&&t.actionManager.hasPointerTriggers},this._onPointerMove=function(e){if(s._updatePointerPosition(e),s.onPrePointerObservable.hasObservers()){var i="mousewheel"===e.type||"DOMMouseScroll"===e.type?t.PointerEventTypes.POINTERWHEEL:t.PointerEventTypes.POINTERMOVE,n=new t.PointerInfoPre(i,e,s._unTranslatedPointerX,s._unTranslatedPointerY);if(s.onPrePointerObservable.notifyObservers(n,i),n.skipOnPointerObservable)return}if(s.cameraToUseForPointers||s.activeCamera){s.pointerMovePredicate||(s.pointerMovePredicate=function(t){return t.isPickable&&t.isVisible&&t.isReady()&&t.isEnabled()&&(t.enablePointerMoveEvents||s.constantlyUpdateMeshUnderPointer||null!==t.actionManager&&void 0!==t.actionManager)});var r=s.pick(s._unTranslatedPointerX,s._unTranslatedPointerY,s.pointerMovePredicate,!1,s.cameraToUseForPointers);s._processPointerMove(r,e)}},this._onPointerDown=function(e){if(s._totalPointersPressed++,s._pickedDownMesh=null,s._meshPickProceed=!1,s._updatePointerPosition(e),s.preventDefaultOnPointerDown&&c&&(e.preventDefault(),c.focus()),s.onPrePointerObservable.hasObservers()){var i=t.PointerEventTypes.POINTERDOWN,n=new t.PointerInfoPre(i,e,s._unTranslatedPointerX,s._unTranslatedPointerY);if(s.onPrePointerObservable.notifyObservers(n,i),n.skipOnPointerObservable)return}if(s.cameraToUseForPointers||s.activeCamera){s._startingPointerPosition.x=s._pointerX,s._startingPointerPosition.y=s._pointerY,s._startingPointerTime=(new Date).getTime(),s.pointerDownPredicate||(s.pointerDownPredicate=function(t){return t.isPickable&&t.isVisible&&t.isReady()&&t.isEnabled()}),s._pickedDownMesh=null;var r=s.pick(s._unTranslatedPointerX,s._unTranslatedPointerY,s.pointerDownPredicate,!1,s.cameraToUseForPointers);if(s._processPointerDown(r,e),s._pickedDownSprite=null,s.spriteManagers.length>0&&(r=s.pickSprite(s._unTranslatedPointerX,s._unTranslatedPointerY,s._spritePredicate,!1,s.cameraToUseForPointers||void 0))&&r.hit&&r.pickedSprite&&r.pickedSprite.actionManager){switch(s._pickedDownSprite=r.pickedSprite,e.button){case 0:r.pickedSprite.actionManager.processTrigger(t.ActionManager.OnLeftPickTrigger,t.ActionEvent.CreateNewFromSprite(r.pickedSprite,s,e));break;case 1:r.pickedSprite.actionManager.processTrigger(t.ActionManager.OnCenterPickTrigger,t.ActionEvent.CreateNewFromSprite(r.pickedSprite,s,e));break;case 2:r.pickedSprite.actionManager.processTrigger(t.ActionManager.OnRightPickTrigger,t.ActionEvent.CreateNewFromSprite(r.pickedSprite,s,e))}r.pickedSprite.actionManager&&r.pickedSprite.actionManager.processTrigger(t.ActionManager.OnPickDownTrigger,t.ActionEvent.CreateNewFromSprite(r.pickedSprite,s,e))}}},this._onPointerUp=function(e){0!==s._totalPointersPressed&&(s._totalPointersPressed--,s._pickedUpMesh=null,s._meshPickProceed=!1,s._updatePointerPosition(e),s._initClickEvent(s.onPrePointerObservable,s.onPointerObservable,e,function(n,r){if(s.onPrePointerObservable.hasObservers())if(n.ignore){var o=t.PointerEventTypes.POINTERUP,a=new t.PointerInfoPre(o,e,s._unTranslatedPointerX,s._unTranslatedPointerY);if(s.onPrePointerObservable.notifyObservers(a,o),a.skipOnPointerObservable)return}else if(!n.hasSwiped){if(n.singleClick&&s.onPrePointerObservable.hasSpecificMask(t.PointerEventTypes.POINTERTAP)){o=t.PointerEventTypes.POINTERTAP,a=new t.PointerInfoPre(o,e,s._unTranslatedPointerX,s._unTranslatedPointerY);if(s.onPrePointerObservable.notifyObservers(a,o),a.skipOnPointerObservable)return}if(n.doubleClick&&s.onPrePointerObservable.hasSpecificMask(t.PointerEventTypes.POINTERDOUBLETAP)){o=t.PointerEventTypes.POINTERDOUBLETAP,a=new t.PointerInfoPre(o,e,s._unTranslatedPointerX,s._unTranslatedPointerY);if(s.onPrePointerObservable.notifyObservers(a,o),a.skipOnPointerObservable)return}}if(s.cameraToUseForPointers||s.activeCamera){if(s.pointerUpPredicate||(s.pointerUpPredicate=function(t){return t.isPickable&&t.isVisible&&t.isReady()&&t.isEnabled()}),!s._meshPickProceed&&(t.ActionManager&&t.ActionManager.HasTriggers||s.onPointerObservable.hasObservers())&&s._initActionManager(null,n),r||(r=s._currentPickResult),s._processPointerUp(r,e,n),s.spriteManagers.length>0){var l=s.pickSprite(s._unTranslatedPointerX,s._unTranslatedPointerY,s._spritePredicate,!1,s.cameraToUseForPointers||void 0);l&&(l.hit&&l.pickedSprite&&l.pickedSprite.actionManager&&(l.pickedSprite.actionManager.processTrigger(t.ActionManager.OnPickUpTrigger,t.ActionEvent.CreateNewFromSprite(l.pickedSprite,s,e)),l.pickedSprite.actionManager&&Math.abs(s._startingPointerPosition.x-s._pointerX)<i.DragMovementThreshold&&Math.abs(s._startingPointerPosition.y-s._pointerY)<i.DragMovementThreshold&&l.pickedSprite.actionManager.processTrigger(t.ActionManager.OnPickTrigger,t.ActionEvent.CreateNewFromSprite(l.pickedSprite,s,e))),s._pickedDownSprite&&s._pickedDownSprite.actionManager&&s._pickedDownSprite!==l.pickedSprite&&s._pickedDownSprite.actionManager.processTrigger(t.ActionManager.OnPickOutTrigger,t.ActionEvent.CreateNewFromSprite(s._pickedDownSprite,s,e)))}s._previousPickResult=s._currentPickResult}}))},this._onKeyDown=function(e){var i=t.KeyboardEventTypes.KEYDOWN;if(s.onPreKeyboardObservable.hasObservers()){var n=new t.KeyboardInfoPre(i,e);if(s.onPreKeyboardObservable.notifyObservers(n,i),n.skipOnPointerObservable)return}if(s.onKeyboardObservable.hasObservers()){n=new t.KeyboardInfo(i,e);s.onKeyboardObservable.notifyObservers(n,i)}s.actionManager&&s.actionManager.processTrigger(t.ActionManager.OnKeyDownTrigger,t.ActionEvent.CreateNewFromScene(s,e))},this._onKeyUp=function(e){var i=t.KeyboardEventTypes.KEYUP;if(s.onPreKeyboardObservable.hasObservers()){var n=new t.KeyboardInfoPre(i,e);if(s.onPreKeyboardObservable.notifyObservers(n,i),n.skipOnPointerObservable)return}if(s.onKeyboardObservable.hasObservers()){n=new t.KeyboardInfo(i,e);s.onKeyboardObservable.notifyObservers(n,i)}s.actionManager&&s.actionManager.processTrigger(t.ActionManager.OnKeyUpTrigger,t.ActionEvent.CreateNewFromScene(s,e))};var a=this.getEngine();this._onCanvasFocusObserver=a.onCanvasFocusObservable.add(function(){c&&(c.addEventListener("keydown",s._onKeyDown,!1),c.addEventListener("keyup",s._onKeyUp,!1))}),this._onCanvasBlurObserver=a.onCanvasBlurObservable.add(function(){c&&(c.removeEventListener("keydown",s._onKeyDown),c.removeEventListener("keyup",s._onKeyUp))});var l=t.Tools.GetPointerPrefix(),c=this._engine.getRenderingCanvas();c&&(o&&(c.addEventListener(l+"move",this._onPointerMove,!1),c.addEventListener("mousewheel",this._onPointerMove,!1),c.addEventListener("DOMMouseScroll",this._onPointerMove,!1)),r&&c.addEventListener(l+"down",this._onPointerDown,!1),n&&window.addEventListener(l+"up",this._onPointerUp,!1),c.tabIndex=1)},i.prototype.detachControl=function(){var e=this.getEngine(),i=t.Tools.GetPointerPrefix(),n=e.getRenderingCanvas();n&&(n.removeEventListener(i+"move",this._onPointerMove),n.removeEventListener(i+"down",this._onPointerDown),window.removeEventListener(i+"up",this._onPointerUp),this._onCanvasBlurObserver&&e.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&e.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),n.removeEventListener("mousewheel",this._onPointerMove),n.removeEventListener("DOMMouseScroll",this._onPointerMove),n.removeEventListener("keydown",this._onKeyDown),n.removeEventListener("keyup",this._onKeyUp),this.onKeyboardObservable.clear(),this.onPreKeyboardObservable.clear(),this.onPointerObservable.clear(),this.onPrePointerObservable.clear())},i.prototype.isReady=function(){if(this._isDisposed)return!1;if(this._pendingData.length>0)return!1;var e,i=this.getEngine();for(e=0;e<this._geometries.length;e++)if(this._geometries[e].delayLoadState===t.Engine.DELAYLOADSTATE_LOADING)return!1;for(e=0;e<this.meshes.length;e++){var n=this.meshes[e];if(n.isEnabled()&&n.subMeshes&&0!==n.subMeshes.length){if(!n.isReady())return!1;for(var r="InstancedMesh"===n.getClassName()||i.getCaps().instancedArrays&&n.instances.length>0,o=0,s=this.highlightLayers;o<s.length;o++){var a=s[o];if(a.hasMesh(n))for(var l=0,c=n.subMeshes;l<c.length;l++){var u=c[l];if(!a.isReady(u,r))return!1}}}}return!0},i.prototype.resetCachedMaterial=function(){this._cachedMaterial=null,this._cachedEffect=null,this._cachedVisibility=null},i.prototype.registerBeforeRender=function(t){this.onBeforeRenderObservable.add(t)},i.prototype.unregisterBeforeRender=function(t){this.onBeforeRenderObservable.removeCallback(t)},i.prototype.registerAfterRender=function(t){this.onAfterRenderObservable.add(t)},i.prototype.unregisterAfterRender=function(t){this.onAfterRenderObservable.removeCallback(t)},i.prototype._executeOnceBeforeRender=function(t){var e=this,i=function(){t(),setTimeout(function(){e.unregisterBeforeRender(i)})};this.registerBeforeRender(i)},i.prototype.executeOnceBeforeRender=function(t,e){var i=this;void 0!==e?setTimeout(function(){i._executeOnceBeforeRender(t)},e):this._executeOnceBeforeRender(t)},i.prototype._addPendingData=function(t){this._pendingData.push(t)},i.prototype._removePendingData=function(t){var e=this.isLoading,i=this._pendingData.indexOf(t);-1!==i&&this._pendingData.splice(i,1),e&&!this.isLoading&&this.onDataLoadedObservable.notifyObservers(this)},i.prototype.getWaitingItemsCount=function(){return this._pendingData.length},Object.defineProperty(i.prototype,"isLoading",{get:function(){return this._pendingData.length>0},enumerable:!0,configurable:!0}),i.prototype.executeWhenReady=function(t){var e=this;this.onReadyObservable.add(t),-1===this._executeWhenReadyTimeoutId&&(this._executeWhenReadyTimeoutId=setTimeout(function(){e._checkIsReady()},150))},i.prototype._checkIsReady=function(){var t=this;if(this.isReady())return this.onReadyObservable.notifyObservers(this),this.onReadyObservable.clear(),void(this._executeWhenReadyTimeoutId=-1);this._executeWhenReadyTimeoutId=setTimeout(function(){t._checkIsReady()},150)},i.prototype.beginAnimation=function(e,i,n,r,o,s,a){if(void 0===o&&(o=1),i>n&&o>0&&(o*=-1),this.stopAnimation(e),a||(a=new t.Animatable(this,e,i,n,r,o,s)),e.animations&&a.appendAnimations(e,e.animations),e.getAnimatables)for(var l=e.getAnimatables(),c=0;c<l.length;c++)this.beginAnimation(l[c],i,n,r,o,s,a);return a.reset(),a},i.prototype.beginDirectAnimation=function(e,i,n,r,o,s,a){return void 0===s&&(s=1),new t.Animatable(this,e,n,r,o,s,a,i)},i.prototype.beginDirectHierarchyAnimation=function(t,e,i,n,r,o,s,a){for(var l=[],c=0,u=t.getDescendants(e);c<u.length;c++){var h=u[c];l.push(this.beginDirectAnimation(h,i,n,r,o,s,a))}return l},i.prototype.getAnimatableByTarget=function(t){for(var e=0;e<this._activeAnimatables.length;e++)if(this._activeAnimatables[e].target===t)return this._activeAnimatables[e];return null},Object.defineProperty(i.prototype,"animatables",{get:function(){return this._activeAnimatables},enumerable:!0,configurable:!0}),i.prototype.stopAnimation=function(t,e){var i=this.getAnimatableByTarget(t);i&&i.stop(e)},i.prototype.stopAllAnimations=function(){if(this._activeAnimatables){for(var t=0;t<this._activeAnimatables.length;t++)this._activeAnimatables[t].stop();this._activeAnimatables=[]}},i.prototype._animate=function(){if(this.animationsEnabled&&0!==this._activeAnimatables.length){var e=t.Tools.Now;if(!this._animationTimeLast){if(this._pendingData.length>0)return;this._animationTimeLast=e}var i=this.useConstantAnimationDeltaTime?16:(e-this._animationTimeLast)*this.animationTimeScale;this._animationTime+=i,this._animationTimeLast=e;for(var n=0;n<this._activeAnimatables.length;n++)this._activeAnimatables[n]._animate(this._animationTime)}},i.prototype._switchToAlternateCameraConfiguration=function(t){this._useAlternateCameraConfiguration=t},i.prototype.getViewMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateViewMatrix:this._viewMatrix},i.prototype.getProjectionMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateProjectionMatrix:this._projectionMatrix},i.prototype.getTransformMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateTransformMatrix:this._transformMatrix},i.prototype.setTransformMatrix=function(e,i){if(this._viewUpdateFlag!==e.updateFlag||this._projectionUpdateFlag!==i.updateFlag){if(this._viewUpdateFlag=e.updateFlag,this._projectionUpdateFlag=i.updateFlag,this._viewMatrix=e,this._projectionMatrix=i,this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._frustumPlanes?t.Frustum.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=t.Frustum.GetPlanes(this._transformMatrix),this.activeCamera&&this.activeCamera._alternateCamera){var n=this.activeCamera._alternateCamera;n.getViewMatrix().multiplyToRef(n.getProjectionMatrix(),t.Tmp.Matrix[0]),t.Frustum.GetRightPlaneToRef(t.Tmp.Matrix[0],this._frustumPlanes[3])}this._sceneUbo.useUbo&&(this._sceneUbo.updateMatrix("viewProjection",this._transformMatrix),this._sceneUbo.updateMatrix("view",this._viewMatrix),this._sceneUbo.update())}},i.prototype._setAlternateTransformMatrix=function(e,i){this._alternateViewUpdateFlag===e.updateFlag&&this._alternateProjectionUpdateFlag===i.updateFlag||(this._alternateViewUpdateFlag=e.updateFlag,this._alternateProjectionUpdateFlag=i.updateFlag,this._alternateViewMatrix=e,this._alternateProjectionMatrix=i,this._alternateTransformMatrix||(this._alternateTransformMatrix=t.Matrix.Zero()),this._alternateViewMatrix.multiplyToRef(this._alternateProjectionMatrix,this._alternateTransformMatrix),this._alternateSceneUbo||this._createAlternateUbo(),this._alternateSceneUbo.useUbo&&(this._alternateSceneUbo.updateMatrix("viewProjection",this._alternateTransformMatrix),this._alternateSceneUbo.updateMatrix("view",this._alternateViewMatrix),this._alternateSceneUbo.update()))},i.prototype.getSceneUniformBuffer=function(){return this._useAlternateCameraConfiguration?this._alternateSceneUbo:this._sceneUbo},i.prototype.getUniqueId=function(){var t=i._uniqueIdCounter;return i._uniqueIdCounter++,t},i.prototype.addMesh=function(t){this.meshes.push(t),this.collisionCoordinator&&this.collisionCoordinator.onMeshAdded(t),t._resyncLightSources(),this.onNewMeshAddedObservable.notifyObservers(t)},i.prototype.removeMesh=function(t){var e=this.meshes.indexOf(t);return-1!==e&&this.meshes.splice(e,1),this.onMeshRemovedObservable.notifyObservers(t),e},i.prototype.addTransformNode=function(t){this.transformNodes.push(t),this.onNewTransformNodeAddedObservable.notifyObservers(t)},i.prototype.removeTransformNode=function(t){var e=this.transformNodes.indexOf(t);return-1!==e&&this.transformNodes.splice(e,1),this.onTransformNodeRemovedObservable.notifyObservers(t),e},i.prototype.removeSkeleton=function(t){var e=this.skeletons.indexOf(t);return-1!==e&&this.skeletons.splice(e,1),e},i.prototype.removeMorphTargetManager=function(t){var e=this.morphTargetManagers.indexOf(t);return-1!==e&&this.morphTargetManagers.splice(e,1),e},i.prototype.removeLight=function(t){var e=this.lights.indexOf(t);if(-1!==e){for(var i=0,n=this.meshes;i<n.length;i++)n[i]._removeLightSource(t);this.lights.splice(e,1),this.sortLightsByPriority()}return this.onLightRemovedObservable.notifyObservers(t),e},i.prototype.removeCamera=function(t){var e=this.cameras.indexOf(t);-1!==e&&this.cameras.splice(e,1);var i=this.activeCameras.indexOf(t);return-1!==i&&this.activeCameras.splice(i,1),this.activeCamera===t&&(this.cameras.length>0?this.activeCamera=this.cameras[0]:this.activeCamera=null),this.onCameraRemovedObservable.notifyObservers(t),e},i.prototype.removeParticleSystem=function(t){var e=this.particleSystems.indexOf(t);return-1!==e&&this.particleSystems.splice(e,1),e},i.prototype.removeAnimation=function(t){var e=this.animations.indexOf(t);return-1!==e&&this.animations.splice(e,1),e},i.prototype.removeMultiMaterial=function(t){var e=this.multiMaterials.indexOf(t);return-1!==e&&this.multiMaterials.splice(e,1),e},i.prototype.removeMaterial=function(t){var e=this.materials.indexOf(t);return-1!==e&&this.materials.splice(e,1),e},i.prototype.removeLensFlareSystem=function(t){var e=this.lensFlareSystems.indexOf(t);return-1!==e&&this.lensFlareSystems.splice(e,1),e},i.prototype.removeActionManager=function(t){var e=this._actionManagers.indexOf(t);return-1!==e&&this._actionManagers.splice(e,1),e},i.prototype.addLight=function(t){this.lights.push(t),this.sortLightsByPriority();for(var e=0,i=this.meshes;e<i.length;e++){var n=i[e];-1===n._lightSources.indexOf(t)&&(n._lightSources.push(t),n._resyncLightSources())}this.onNewLightAddedObservable.notifyObservers(t)},i.prototype.sortLightsByPriority=function(){this.requireLightSorting&&this.lights.sort(t.Light.CompareLightsPriority)},i.prototype.addCamera=function(t){this.cameras.push(t),this.onNewCameraAddedObservable.notifyObservers(t)},i.prototype.addSkeleton=function(t){this.skeletons.push(t)},i.prototype.addParticleSystem=function(t){this.particleSystems.push(t)},i.prototype.addAnimation=function(t){this.animations.push(t)},i.prototype.addMultiMaterial=function(t){this.multiMaterials.push(t)},i.prototype.addMaterial=function(t){this.materials.push(t)},i.prototype.addMorphTargetManager=function(t){this.morphTargetManagers.push(t)},i.prototype.addGeometry=function(t){this._geometries.push(t)},i.prototype.addLensFlareSystem=function(t){this.lensFlareSystems.push(t)},i.prototype.addActionManager=function(t){this._actionManagers.push(t)},i.prototype.switchActiveCamera=function(t,e){void 0===e&&(e=!0);var i=this._engine.getRenderingCanvas();i&&(this.activeCamera&&this.activeCamera.detachControl(i),this.activeCamera=t,e&&t.attachControl(i))},i.prototype.setActiveCameraByID=function(t){var e=this.getCameraByID(t);return e?(this.activeCamera=e,e):null},i.prototype.setActiveCameraByName=function(t){var e=this.getCameraByName(t);return e?(this.activeCamera=e,e):null},i.prototype.getAnimationGroupByName=function(t){for(var e=0;e<this.animationGroups.length;e++)if(this.animationGroups[e].name===t)return this.animationGroups[e];return null},i.prototype.getMaterialByID=function(t){for(var e=0;e<this.materials.length;e++)if(this.materials[e].id===t)return this.materials[e];return null},i.prototype.getMaterialByName=function(t){for(var e=0;e<this.materials.length;e++)if(this.materials[e].name===t)return this.materials[e];return null},i.prototype.getLensFlareSystemByName=function(t){for(var e=0;e<this.lensFlareSystems.length;e++)if(this.lensFlareSystems[e].name===t)return this.lensFlareSystems[e];return null},i.prototype.getLensFlareSystemByID=function(t){for(var e=0;e<this.lensFlareSystems.length;e++)if(this.lensFlareSystems[e].id===t)return this.lensFlareSystems[e];return null},i.prototype.getCameraByID=function(t){for(var e=0;e<this.cameras.length;e++)if(this.cameras[e].id===t)return this.cameras[e];return null},i.prototype.getCameraByUniqueID=function(t){for(var e=0;e<this.cameras.length;e++)if(this.cameras[e].uniqueId===t)return this.cameras[e];return null},i.prototype.getCameraByName=function(t){for(var e=0;e<this.cameras.length;e++)if(this.cameras[e].name===t)return this.cameras[e];return null},i.prototype.getBoneByID=function(t){for(var e=0;e<this.skeletons.length;e++)for(var i=this.skeletons[e],n=0;n<i.bones.length;n++)if(i.bones[n].id===t)return i.bones[n];return null},i.prototype.getBoneByName=function(t){for(var e=0;e<this.skeletons.length;e++)for(var i=this.skeletons[e],n=0;n<i.bones.length;n++)if(i.bones[n].name===t)return i.bones[n];return null},i.prototype.getLightByName=function(t){for(var e=0;e<this.lights.length;e++)if(this.lights[e].name===t)return this.lights[e];return null},i.prototype.getLightByID=function(t){for(var e=0;e<this.lights.length;e++)if(this.lights[e].id===t)return this.lights[e];return null},i.prototype.getLightByUniqueID=function(t){for(var e=0;e<this.lights.length;e++)if(this.lights[e].uniqueId===t)return this.lights[e];return null},i.prototype.getParticleSystemByID=function(t){for(var e=0;e<this.particleSystems.length;e++)if(this.particleSystems[e].id===t)return this.particleSystems[e];return null},i.prototype.getGeometryByID=function(t){for(var e=0;e<this._geometries.length;e++)if(this._geometries[e].id===t)return this._geometries[e];return null},i.prototype.pushGeometry=function(t,e){return!(!e&&this.getGeometryByID(t.id)||(this._geometries.push(t),this.collisionCoordinator&&this.collisionCoordinator.onGeometryAdded(t),this.onNewGeometryAddedObservable.notifyObservers(t),0))},i.prototype.removeGeometry=function(t){var e=this._geometries.indexOf(t);return e>-1&&(this._geometries.splice(e,1),this.collisionCoordinator&&this.collisionCoordinator.onGeometryDeleted(t),this.onGeometryRemovedObservable.notifyObservers(t),!0)},i.prototype.getGeometries=function(){return this._geometries},i.prototype.getMeshByID=function(t){for(var e=0;e<this.meshes.length;e++)if(this.meshes[e].id===t)return this.meshes[e];return null},i.prototype.getMeshesByID=function(t){return this.meshes.filter(function(e){return e.id===t})},i.prototype.getTransformNodeByID=function(t){for(var e=0;e<this.transformNodes.length;e++)if(this.transformNodes[e].id===t)return this.transformNodes[e];return null},i.prototype.getTransformNodesByID=function(t){return this.transformNodes.filter(function(e){return e.id===t})},i.prototype.getMeshByUniqueID=function(t){for(var e=0;e<this.meshes.length;e++)if(this.meshes[e].uniqueId===t)return this.meshes[e];return null},i.prototype.getLastMeshByID=function(t){for(var e=this.meshes.length-1;e>=0;e--)if(this.meshes[e].id===t)return this.meshes[e];return null},i.prototype.getLastEntryByID=function(t){var e;for(e=this.meshes.length-1;e>=0;e--)if(this.meshes[e].id===t)return this.meshes[e];for(e=this.transformNodes.length-1;e>=0;e--)if(this.transformNodes[e].id===t)return this.transformNodes[e];for(e=this.cameras.length-1;e>=0;e--)if(this.cameras[e].id===t)return this.cameras[e];for(e=this.lights.length-1;e>=0;e--)if(this.lights[e].id===t)return this.lights[e];return null},i.prototype.getNodeByID=function(t){var e=this.getMeshByID(t);if(e)return e;var i=this.getLightByID(t);return i||(this.getCameraByID(t)||this.getBoneByID(t))},i.prototype.getNodeByName=function(t){var e=this.getMeshByName(t);if(e)return e;var i=this.getLightByName(t);return i||(this.getCameraByName(t)||this.getBoneByName(t))},i.prototype.getMeshByName=function(t){for(var e=0;e<this.meshes.length;e++)if(this.meshes[e].name===t)return this.meshes[e];return null},i.prototype.getTransformNodeByName=function(t){for(var e=0;e<this.transformNodes.length;e++)if(this.transformNodes[e].name===t)return this.transformNodes[e];return null},i.prototype.getSoundByName=function(e){var i;if(t.AudioEngine){for(i=0;i<this.mainSoundTrack.soundCollection.length;i++)if(this.mainSoundTrack.soundCollection[i].name===e)return this.mainSoundTrack.soundCollection[i];for(var n=0;n<this.soundTracks.length;n++)for(i=0;i<this.soundTracks[n].soundCollection.length;i++)if(this.soundTracks[n].soundCollection[i].name===e)return this.soundTracks[n].soundCollection[i]}return null},i.prototype.getLastSkeletonByID=function(t){for(var e=this.skeletons.length-1;e>=0;e--)if(this.skeletons[e].id===t)return this.skeletons[e];return null},i.prototype.getSkeletonById=function(t){for(var e=0;e<this.skeletons.length;e++)if(this.skeletons[e].id===t)return this.skeletons[e];return null},i.prototype.getSkeletonByName=function(t){for(var e=0;e<this.skeletons.length;e++)if(this.skeletons[e].name===t)return this.skeletons[e];return null},i.prototype.getMorphTargetManagerById=function(t){for(var e=0;e<this.morphTargetManagers.length;e++)if(this.morphTargetManagers[e].uniqueId===t)return this.morphTargetManagers[e];return null},i.prototype.isActiveMesh=function(t){return-1!==this._activeMeshes.indexOf(t)},i.prototype.getHighlightLayerByName=function(t){for(var e=0;e<this.highlightLayers.length;e++)if(this.highlightLayers[e].name===t)return this.highlightLayers[e];return null},Object.defineProperty(i.prototype,"uid",{get:function(){return this._uid||(this._uid=t.Tools.RandomId()),this._uid},enumerable:!0,configurable:!0}),i.prototype.addExternalData=function(e,i){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.add(e,i)},i.prototype.getExternalData=function(t){return this._externalData?this._externalData.get(t):null},i.prototype.getOrAddExternalDataWithFactory=function(e,i){return this._externalData||(this._externalData=new t.StringDictionary),this._externalData.getOrAddWithFactory(e,i)},i.prototype.removeExternalData=function(t){return this._externalData.remove(t)},i.prototype._evaluateSubMesh=function(t,e){if(this.dispatchAllSubMeshesOfActiveMeshes||e.alwaysSelectAsActiveMesh||1===e.subMeshes.length||t.isInFrustum(this._frustumPlanes)){if(e.showSubMeshesBoundingBox){var i=t.getBoundingInfo();null!=i&&this.getBoundingBoxRenderer().renderList.push(i.boundingBox)}var n=t.getMaterial();null!=n&&(void 0!==n.getRenderTargetTextures&&-1===this._processedMaterials.indexOf(n)&&(this._processedMaterials.push(n),this._renderTargets.concatWithNoDuplicate(n.getRenderTargetTextures())),this._activeIndices.addCount(t.indexCount,!1),this._renderingManager.dispatch(t,e,n))}},i.prototype._isInIntermediateRendering=function(){return this._intermediateRendering},i.prototype.setActiveMeshCandidateProvider=function(t){this._activeMeshCandidateProvider=t},i.prototype.getActiveMeshCandidateProvider=function(){return this._activeMeshCandidateProvider},i.prototype.freezeActiveMeshes=function(){return this._evaluateActiveMeshes(),this._activeMeshesFrozen=!0,this},i.prototype.unfreezeActiveMeshes=function(){return this._activeMeshesFrozen=!1,this},i.prototype._evaluateActiveMeshes=function(){if((!this._activeMeshesFrozen||!this._activeMeshes.length)&&this.activeCamera){this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this),this.activeCamera._activeMeshes.reset(),this._activeMeshes.reset(),this._renderingManager.reset(),this._processedMaterials.reset(),this._activeParticleSystems.reset(),this._activeSkeletons.reset(),this._softwareSkinnedMeshes.reset(),this._boundingBoxRenderer&&this._boundingBoxRenderer.reset();var e,i,n=!0;if(void 0!==this._activeMeshCandidateProvider)e=this._activeMeshCandidateProvider.getMeshes(this),n=!1===this._activeMeshCandidateProvider.checksIsEnabled,i=void 0!==e?e.length:0;else if(void 0!==this._selectionOctree){var r=this._selectionOctree.select(this._frustumPlanes);e=r.data,i=r.length}else i=this.meshes.length,e=this.meshes;for(var o,s,a=0;a<i;a++)(o=e[a]).isBlocked||(this._totalVertices.addCount(o.getTotalVertices(),!1),!o.isReady()||n&&!o.isEnabled()||(o.computeWorldMatrix(),o.actionManager&&o.actionManager.hasSpecificTriggers([t.ActionManager.OnIntersectionEnterTrigger,t.ActionManager.OnIntersectionExitTrigger])&&this._meshesForIntersections.pushNoDuplicate(o),void 0!==(s=o.getLOD(this.activeCamera))&&null!==s&&(o._preActivate(),(o.alwaysSelectAsActiveMesh||o.isVisible&&o.visibility>0&&0!=(o.layerMask&this.activeCamera.layerMask)&&o.isInFrustum(this._frustumPlanes))&&(this._activeMeshes.push(o),this.activeCamera._activeMeshes.push(o),o._activate(this._renderId),s!==o&&s._activate(this._renderId),this._activeMesh(o,s)))));if(this.onAfterActiveMeshesEvaluationObservable.notifyObservers(this),this.particlesEnabled){this.onBeforeParticlesRenderingObservable.notifyObservers(this);for(var l=0;l<this.particleSystems.length;l++){var c=this.particleSystems[l];if(c.isStarted()&&c.emitter){var u=c.emitter;u.position&&!u.isEnabled()||(this._activeParticleSystems.push(c),c.animate(),this._renderingManager.dispatchParticles(c))}}this.onAfterParticlesRenderingObservable.notifyObservers(this)}}},i.prototype._activeMesh=function(t,e){if(this.skeletonsEnabled&&null!==e.skeleton&&void 0!==e.skeleton&&(this._activeSkeletons.pushNoDuplicate(e.skeleton)&&e.skeleton.prepare(),e.computeBonesUsingShaders||this._softwareSkinnedMeshes.pushNoDuplicate(e)),t.showBoundingBox||this.forceShowBoundingBoxes){var i=t.getBoundingInfo();this.getBoundingBoxRenderer().renderList.push(i.boundingBox)}if(null!=e&&void 0!==e.subMeshes&&null!==e.subMeshes&&e.subMeshes.length>0){var n,r;if(e.useOctreeForRenderingSelection&&void 0!==e._submeshesOctree&&null!==e._submeshesOctree){var o=e._submeshesOctree.select(this._frustumPlanes);n=o.length,r=o.data}else n=(r=e.subMeshes).length;for(var s,a=0;a<n;a++)s=r[a],this._evaluateSubMesh(s,e)}},i.prototype.updateTransformMatrix=function(t){this.activeCamera&&this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(t))},i.prototype.updateAlternateTransformMatrix=function(t){this._setAlternateTransformMatrix(t.getViewMatrix(),t.getProjectionMatrix())},i.prototype._renderForCamera=function(e){if(!e||!e._skipRendering){var i=this._engine;if(this.activeCamera=e,!this.activeCamera)throw new Error("Active camera not set");t.Tools.StartPerformanceCounter("Rendering camera "+this.activeCamera.name),i.setViewport(this.activeCamera.viewport),this.resetCachedMaterial(),this._renderId++,this.activeCamera.update(),this.updateTransformMatrix(),e._alternateCamera&&(this.updateAlternateTransformMatrix(e._alternateCamera),this._alternateRendering=!0),this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera),this._evaluateActiveMeshes();for(var n=0;n<this._softwareSkinnedMeshes.length;n++){var r=this._softwareSkinnedMeshes.data[n];r.applySkeleton(r.skeleton)}this.OnBeforeRenderTargetsRenderObservable.notifyObservers(this);var o=!1;if(e.customRenderTargets&&e.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(e.customRenderTargets),this.renderTargetsEnabled&&this._renderTargets.length>0){this._intermediateRendering=!0,t.Tools.StartPerformanceCounter("Render targets",this._renderTargets.length>0);for(var s=0;s<this._renderTargets.length;s++){if((d=this._renderTargets.data[s])._shouldRender()){this._renderId++;var a=d.activeCamera&&d.activeCamera!==this.activeCamera;d.render(a,this.dumpNextRenderTargets)}}t.Tools.EndPerformanceCounter("Render targets",this._renderTargets.length>0),this._intermediateRendering=!1,this._renderId++,o=!0}var l,c,u=this._engine.getStencilBuffer(),h=!1;if(this.renderTargetsEnabled&&this.highlightLayers&&this.highlightLayers.length>0){this._intermediateRendering=!0;for(var p=0;p<this.highlightLayers.length;p++){var d,f=this.highlightLayers[p];if(f.shouldRender()&&(!f.camera||f.camera.cameraRigMode===t.Camera.RIG_MODE_NONE&&e===f.camera||f.camera.cameraRigMode!==t.Camera.RIG_MODE_NONE&&f.camera._rigCameras.indexOf(e)>-1))h=!0,(d=f._mainTexture)._shouldRender()&&(this._renderId++,d.render(!1,!1),o=!0)}this._intermediateRendering=!1,this._renderId++}if(o&&i.restoreDefaultFramebuffer(),this.OnAfterRenderTargetsRenderObservable.notifyObservers(this),this.postProcessManager._prepareFrame(),this.layers.length){for(i.setDepthBuffer(!1),l=0;l<this.layers.length;l++)(c=this.layers[l]).isBackground&&0!=(c.layerMask&this.activeCamera.layerMask)&&c.render();i.setDepthBuffer(!0)}if(h&&this._engine.setStencilBuffer(!0),this.onBeforeDrawPhaseObservable.notifyObservers(this),this._renderingManager.render(null,null,!0,!0),this.onAfterDrawPhaseObservable.notifyObservers(this),h&&this._engine.setStencilBuffer(u),this._boundingBoxRenderer&&this._boundingBoxRenderer.render(),this.lensFlaresEnabled){t.Tools.StartPerformanceCounter("Lens flares",this.lensFlareSystems.length>0);for(var m=0;m<this.lensFlareSystems.length;m++){var g=this.lensFlareSystems[m];0!=(e.layerMask&g.layerMask)&&g.render()}t.Tools.EndPerformanceCounter("Lens flares",this.lensFlareSystems.length>0)}if(this.layers.length){for(i.setDepthBuffer(!1),l=0;l<this.layers.length;l++)(c=this.layers[l]).isBackground||0==(c.layerMask&this.activeCamera.layerMask)||c.render();i.setDepthBuffer(!0)}if(h){i.setDepthBuffer(!1);for(p=0;p<this.highlightLayers.length;p++)this.highlightLayers[p].shouldRender()&&this.highlightLayers[p].render();i.setDepthBuffer(!0)}this.postProcessManager._finalizeFrame(e.isIntermediate),this._renderTargets.reset(),this._alternateRendering=!1,this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera),t.Tools.EndPerformanceCounter("Rendering camera "+this.activeCamera.name)}},i.prototype._processSubCameras=function(e){if(e.cameraRigMode!==t.Camera.RIG_MODE_NONE){this.activeCamera&&this.activeCamera.update();for(var i=0;i<e._rigCameras.length;i++)this._renderForCamera(e._rigCameras[i]);this.activeCamera=e,this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix())}else this._renderForCamera(e)},i.prototype._checkIntersections=function(){for(var e=0;e<this._meshesForIntersections.length;e++){var i=this._meshesForIntersections.data[e];if(i.actionManager)for(var n=0;n<i.actionManager.actions.length;n++){var r=i.actionManager.actions[n];if(r.trigger===t.ActionManager.OnIntersectionEnterTrigger||r.trigger===t.ActionManager.OnIntersectionExitTrigger){var o=r.getTriggerParameter(),s=o instanceof t.AbstractMesh?o:o.mesh,a=s.intersectsMesh(i,o.usePreciseIntersection),l=i._intersectionsInProgress.indexOf(s);a&&-1===l?r.trigger===t.ActionManager.OnIntersectionEnterTrigger?(r._executeCurrent(t.ActionEvent.CreateNew(i,void 0,s)),i._intersectionsInProgress.push(s)):r.trigger===t.ActionManager.OnIntersectionExitTrigger&&i._intersectionsInProgress.push(s):!a&&l>-1&&(r.trigger===t.ActionManager.OnIntersectionExitTrigger&&r._executeCurrent(t.ActionEvent.CreateNew(i,void 0,s)),i.actionManager.hasSpecificTrigger(t.ActionManager.OnIntersectionExitTrigger)&&r.trigger!==t.ActionManager.OnIntersectionExitTrigger||i._intersectionsInProgress.splice(l,1))}}}},i.prototype.render=function(){if(!this.isDisposed){if(this._activeParticles.fetchNewFrame(),this._totalVertices.fetchNewFrame(),this._activeIndices.fetchNewFrame(),this._activeBones.fetchNewFrame(),this._meshesForIntersections.reset(),this.resetCachedMaterial(),this.onBeforeAnimationsObservable.notifyObservers(this),this.actionManager&&this.actionManager.processTrigger(t.ActionManager.OnEveryFrameTrigger),this.simplificationQueue&&!this.simplificationQueue.running&&this.simplificationQueue.executeNext(),this._engine.isDeterministicLockStep()){var e=Math.max(i.MinDeltaTime,Math.min(this._engine.getDeltaTime(),i.MaxDeltaTime))+this._timeAccumulator,n=1e3/60;this._physicsEngine&&(n=1e3*this._physicsEngine.getTimeStep());var r=0,o=this._engine.getLockstepMaxSteps(),s=Math.floor(e/60);s=Math.min(s,o);do{this.onBeforeStepObservable.notifyObservers(this),this._animationRatio=.06*n,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._physicsEngine&&(this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(n/1e3),this.onAfterPhysicsObservable.notifyObservers(this)),this.onAfterStepObservable.notifyObservers(this),this._currentStepId++,r++,e-=n}while(e>0&&r<s);this._timeAccumulator=e<0?0:e}else{e=this.useConstantAnimationDeltaTime?16:Math.max(i.MinDeltaTime,Math.min(this._engine.getDeltaTime(),i.MaxDeltaTime));this._animationRatio=.06*e,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._physicsEngine&&(this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(e/1e3),this.onAfterPhysicsObservable.notifyObservers(this))}this._gamepadManager&&this._gamepadManager._isMonitoring&&this._gamepadManager._checkGamepadsStatus(),this.onBeforeRenderObservable.notifyObservers(this),this.OnBeforeRenderTargetsRenderObservable.notifyObservers(this);var a=this.getEngine(),l=this.activeCamera;if(this.renderTargetsEnabled){t.Tools.StartPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!0;for(var c=0;c<this.customRenderTargets.length;c++){var u=this.customRenderTargets[c];if(u._shouldRender()){if(this._renderId++,this.activeCamera=u.activeCamera||this.activeCamera,!this.activeCamera)throw new Error("Active camera not set");a.setViewport(this.activeCamera.viewport),this.updateTransformMatrix(),u.render(l!==this.activeCamera,this.dumpNextRenderTargets)}}t.Tools.EndPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!1,this._renderId++}if(this.customRenderTargets.length>0&&a.restoreDefaultFramebuffer(),this.OnAfterRenderTargetsRenderObservable.notifyObservers(this),this.activeCamera=l,this.proceduralTexturesEnabled){t.Tools.StartPerformanceCounter("Procedural textures",this._proceduralTextures.length>0);for(var h=0;h<this._proceduralTextures.length;h++){var p=this._proceduralTextures[h];p._shouldRender()&&p.render()}t.Tools.EndPerformanceCounter("Procedural textures",this._proceduralTextures.length>0)}if((this.autoClearDepthAndStencil||this.autoClear)&&this._engine.clear(this.clearColor,this.autoClear||this.forceWireframe||this.forcePointsCloud,this.autoClearDepthAndStencil,this.autoClearDepthAndStencil),this.shadowsEnabled)for(var d=0;d<this.lights.length;d++){var f=this.lights[d],m=f.getShadowGenerator();if(f.isEnabled()&&f.shadowEnabled&&m){var g=m.getShadowMap();-1!==this.textures.indexOf(g)&&this._renderTargets.push(g)}}if(this._depthRenderer&&this._renderTargets.push(this._depthRenderer.getDepthMap()),this._geometryBufferRenderer&&this._renderTargets.push(this._geometryBufferRenderer.getGBuffer()),this._postProcessRenderPipelineManager&&this._postProcessRenderPipelineManager.update(),this.activeCameras.length>0)for(var y=0;y<this.activeCameras.length;y++)y>0&&this._engine.clear(null,!1,!0,!0),this._processSubCameras(this.activeCameras[y]);else{if(!this.activeCamera)throw new Error("No camera defined");this._processSubCameras(this.activeCamera)}this._checkIntersections(),t.AudioEngine&&this._updateAudioParameters(),this.afterRender&&this.afterRender(),this.onAfterRenderObservable.notifyObservers(this);for(var _=0;_<this._toBeDisposed.length;_++){var v=this._toBeDisposed.data[_];v&&v.dispose(),this._toBeDisposed[_]=null}this._toBeDisposed.reset(),this.dumpNextRenderTargets&&(this.dumpNextRenderTargets=!1),this._activeBones.addCount(0,!0),this._activeIndices.addCount(0,!0),this._activeParticles.addCount(0,!0)}},i.prototype._updateAudioParameters=function(){if(this.audioEnabled&&this._mainSoundTrack&&(0!==this._mainSoundTrack.soundCollection.length||1!==this.soundTracks.length)){var e,i=t.Engine.audioEngine;if((e=this.activeCameras.length>0?this.activeCameras[0]:this.activeCamera)&&i.canUseWebAudio&&i.audioContext){i.audioContext.listener.setPosition(e.position.x,e.position.y,e.position.z),e.rigCameras&&e.rigCameras.length>0&&(e=e.rigCameras[0]);var n,r=t.Matrix.Invert(e.getViewMatrix()),o=t.Vector3.TransformNormal(new t.Vector3(0,0,-1),r);for(o.normalize(),isNaN(o.x)||isNaN(o.y)||isNaN(o.z)||i.audioContext.listener.setOrientation(o.x,o.y,o.z,0,1,0),n=0;n<this.mainSoundTrack.soundCollection.length;n++){var s=this.mainSoundTrack.soundCollection[n];s.useCustomAttenuation&&s.updateDistanceFromListener()}for(n=0;n<this.soundTracks.length;n++)for(var a=0;a<this.soundTracks[n].soundCollection.length;a++)(s=this.soundTracks[n].soundCollection[a]).useCustomAttenuation&&s.updateDistanceFromListener()}}},Object.defineProperty(i.prototype,"audioEnabled",{get:function(){return this._audioEnabled},set:function(e){this._audioEnabled=e,t.AudioEngine&&(this._audioEnabled?this._enableAudio():this._disableAudio())},enumerable:!0,configurable:!0}),i.prototype._disableAudio=function(){var t;for(t=0;t<this.mainSoundTrack.soundCollection.length;t++)this.mainSoundTrack.soundCollection[t].pause();for(t=0;t<this.soundTracks.length;t++)for(var e=0;e<this.soundTracks[t].soundCollection.length;e++)this.soundTracks[t].soundCollection[e].pause()},i.prototype._enableAudio=function(){var t;for(t=0;t<this.mainSoundTrack.soundCollection.length;t++)this.mainSoundTrack.soundCollection[t].isPaused&&this.mainSoundTrack.soundCollection[t].play();for(t=0;t<this.soundTracks.length;t++)for(var e=0;e<this.soundTracks[t].soundCollection.length;e++)this.soundTracks[t].soundCollection[e].isPaused&&this.soundTracks[t].soundCollection[e].play()},Object.defineProperty(i.prototype,"headphone",{get:function(){return this._headphone},set:function(e){this._headphone=e,t.AudioEngine&&(this._headphone?this._switchAudioModeForHeadphones():this._switchAudioModeForNormalSpeakers())},enumerable:!0,configurable:!0}),i.prototype._switchAudioModeForHeadphones=function(){this.mainSoundTrack.switchPanningModelToHRTF();for(var t=0;t<this.soundTracks.length;t++)this.soundTracks[t].switchPanningModelToHRTF()},i.prototype._switchAudioModeForNormalSpeakers=function(){this.mainSoundTrack.switchPanningModelToEqualPower();for(var t=0;t<this.soundTracks.length;t++)this.soundTracks[t].switchPanningModelToEqualPower()},i.prototype.enableDepthRenderer=function(){return this._depthRenderer?this._depthRenderer:(this._depthRenderer=new t.DepthRenderer(this),this._depthRenderer)},i.prototype.disableDepthRenderer=function(){this._depthRenderer&&(this._depthRenderer.dispose(),this._depthRenderer=null)},i.prototype.enableGeometryBufferRenderer=function(e){return void 0===e&&(e=1),this._geometryBufferRenderer?this._geometryBufferRenderer:(this._geometryBufferRenderer=new t.GeometryBufferRenderer(this,e),this._geometryBufferRenderer.isSupported||(this._geometryBufferRenderer=null),this._geometryBufferRenderer)},i.prototype.disableGeometryBufferRenderer=function(){this._geometryBufferRenderer&&(this._geometryBufferRenderer.dispose(),this._geometryBufferRenderer=null)},i.prototype.freezeMaterials=function(){for(var t=0;t<this.materials.length;t++)this.materials[t].freeze()},i.prototype.unfreezeMaterials=function(){for(var t=0;t<this.materials.length;t++)this.materials[t].unfreeze()},i.prototype.dispose=function(){this.beforeRender=null,this.afterRender=null,this.skeletons=[],this.morphTargetManagers=[],this.importedMeshesFiles=new Array,this.stopAllAnimations(),this.resetCachedMaterial(),this._depthRenderer&&this._depthRenderer.dispose(),this._gamepadManager&&(this._gamepadManager.dispose(),this._gamepadManager=null),this.activeCamera&&(this.activeCamera._activeMeshes.dispose(),this.activeCamera=null),this._activeMeshes.dispose(),this._renderingManager.dispose(),this._processedMaterials.dispose(),this._activeParticleSystems.dispose(),this._activeSkeletons.dispose(),this._softwareSkinnedMeshes.dispose(),this._renderTargets.dispose(),this._boundingBoxRenderer&&this._boundingBoxRenderer.dispose(),this._meshesForIntersections.dispose(),this._toBeDisposed.dispose();for(var e=0,i=this._activeRequests;e<i.length;e++)i[e].abort();this._debugLayer&&this._debugLayer.hide(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderObservable.clear(),this.onAfterRenderObservable.clear(),this.OnBeforeRenderTargetsRenderObservable.clear(),this.OnAfterRenderTargetsRenderObservable.clear(),this.onAfterStepObservable.clear(),this.onBeforeStepObservable.clear(),this.onBeforeActiveMeshesEvaluationObservable.clear(),this.onAfterActiveMeshesEvaluationObservable.clear(),this.onBeforeParticlesRenderingObservable.clear(),this.onAfterParticlesRenderingObservable.clear(),this.onBeforeSpritesRenderingObservable.clear(),this.onAfterSpritesRenderingObservable.clear(),this.onBeforeDrawPhaseObservable.clear(),this.onAfterDrawPhaseObservable.clear(),this.onBeforePhysicsObservable.clear(),this.onAfterPhysicsObservable.clear(),this.onBeforeAnimationsObservable.clear(),this.onAfterAnimationsObservable.clear(),this.onDataLoadedObservable.clear(),this.detachControl(),t.AudioEngine&&this.disposeSounds(),this.VRHelper&&this.VRHelper.dispose();var n,r=this._engine.getRenderingCanvas();if(r)for(n=0;n<this.cameras.length;n++)this.cameras[n].detachControl(r);for(;this.animationGroups.length;)this.animationGroups[0].dispose();for(;this.lights.length;)this.lights[0].dispose();for(;this.meshes.length;)this.meshes[0].dispose(!0);for(;this.transformNodes.length;)this.removeTransformNode(this.transformNodes[0]);for(;this.cameras.length;)this.cameras[0].dispose();for(this.defaultMaterial&&this.defaultMaterial.dispose();this.multiMaterials.length;)this.multiMaterials[0].dispose();for(;this.materials.length;)this.materials[0].dispose();for(;this.particleSystems.length;)this.particleSystems[0].dispose();for(;this.spriteManagers.length;)this.spriteManagers[0].dispose();for(;this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.layers.length;)this.layers[0].dispose();for(;this.highlightLayers.length;)this.highlightLayers[0].dispose();for(;this.textures.length;)this.textures[0].dispose();this._sceneUbo.dispose(),this._alternateSceneUbo&&this._alternateSceneUbo.dispose(),this.postProcessManager.dispose(),this._postProcessRenderPipelineManager&&this._postProcessRenderPipelineManager.dispose(),this._physicsEngine&&this.disablePhysicsEngine(),(n=this._engine.scenes.indexOf(this))>-1&&this._engine.scenes.splice(n,1),this._engine.wipeCaches(!0),this._isDisposed=!0},Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),i.prototype.disposeSounds=function(){if(this._mainSoundTrack){this.mainSoundTrack.dispose();for(var t=0;t<this.soundTracks.length;t++)this.soundTracks[t].dispose()}},i.prototype.getWorldExtends=function(){for(var e=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new t.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),n=0;n<this.meshes.length;n++){var r=this.meshes[n];if(r.subMeshes&&0!==r.subMeshes.length&&!r.infiniteDistance){r.computeWorldMatrix(!0);var o=r.getBoundingInfo(),s=o.boundingBox.minimumWorld,a=o.boundingBox.maximumWorld;t.Tools.CheckExtends(s,e,i),t.Tools.CheckExtends(a,e,i)}}return{min:e,max:i}},i.prototype.createOrUpdateSelectionOctree=function(e,i){void 0===e&&(e=64),void 0===i&&(i=2),this._selectionOctree||(this._selectionOctree=new t.Octree(t.Octree.CreationFuncForMeshes,e,i));var n=this.getWorldExtends();return this._selectionOctree.update(n.min,n.max,this.meshes),this._selectionOctree},i.prototype.createPickingRay=function(e,i,n,r,o){void 0===o&&(o=!1);var s=t.Ray.Zero();return this.createPickingRayToRef(e,i,n,s,r,o),s},i.prototype.createPickingRayToRef=function(e,i,n,r,o,s){void 0===s&&(s=!1);var a=this._engine;if(!o){if(!this.activeCamera)throw new Error("Active camera not set");o=this.activeCamera}var l=o.viewport.toGlobal(a.getRenderWidth(),a.getRenderHeight());return e=e/this._engine.getHardwareScalingLevel()-l.x,i=i/this._engine.getHardwareScalingLevel()-(this._engine.getRenderHeight()-l.y-l.height),r.update(e,i,l.width,l.height,n||t.Matrix.Identity(),s?t.Matrix.Identity():o.getViewMatrix(),o.getProjectionMatrix()),this},i.prototype.createPickingRayInCameraSpace=function(e,i,n){var r=t.Ray.Zero();return this.createPickingRayInCameraSpaceToRef(e,i,r,n),r},i.prototype.createPickingRayInCameraSpaceToRef=function(e,i,n,r){if(!t.PickingInfo)return this;var o=this._engine;if(!r){if(!this.activeCamera)throw new Error("Active camera not set");r=this.activeCamera}var s=r.viewport.toGlobal(o.getRenderWidth(),o.getRenderHeight()),a=t.Matrix.Identity();return e=e/this._engine.getHardwareScalingLevel()-s.x,i=i/this._engine.getHardwareScalingLevel()-(this._engine.getRenderHeight()-s.y-s.height),n.update(e,i,s.width,s.height,a,a,r.getProjectionMatrix()),this},i.prototype._internalPick=function(e,i,n){if(!t.PickingInfo)return null;for(var r=null,o=0;o<this.meshes.length;o++){var s=this.meshes[o];if(i){if(!i(s))continue}else if(!s.isEnabled()||!s.isVisible||!s.isPickable)continue;var a=e(s.getWorldMatrix()),l=s.intersects(a,n);if(l&&l.hit&&(n||null==r||!(l.distance>=r.distance))&&(r=l,n))break}return r||new t.PickingInfo},i.prototype._internalMultiPick=function(e,i){if(!t.PickingInfo)return null;for(var n=new Array,r=0;r<this.meshes.length;r++){var o=this.meshes[r];if(i){if(!i(o))continue}else if(!o.isEnabled()||!o.isVisible||!o.isPickable)continue;var s=e(o.getWorldMatrix()),a=o.intersects(s,!1);a&&a.hit&&n.push(a)}return n},i.prototype._internalPickSprites=function(e,i,n,r){if(!t.PickingInfo)return null;var o=null;if(!r){if(!this.activeCamera)return null;r=this.activeCamera}if(this.spriteManagers.length>0)for(var s=0;s<this.spriteManagers.length;s++){var a=this.spriteManagers[s];if(a.isPickable){var l=a.intersects(e,r,i,n);if(l&&l.hit&&(n||null==o||!(l.distance>=o.distance))&&(o=l,n))break}}return o||new t.PickingInfo},i.prototype.pick=function(e,i,n,r,o){var s=this;return t.PickingInfo?this._internalPick(function(t){return s.createPickingRayToRef(e,i,t,s._tempPickingRay,o||null),s._tempPickingRay},n,r):null},i.prototype.pickSprite=function(t,e,i,n,r){return this.createPickingRayInCameraSpaceToRef(t,e,this._tempPickingRay,r),this._internalPickSprites(this._tempPickingRay,i,n,r)},i.prototype.pickWithRay=function(e,i,n){var r=this;return this._internalPick(function(i){return r._pickWithRayInverseMatrix||(r._pickWithRayInverseMatrix=t.Matrix.Identity()),i.invertToRef(r._pickWithRayInverseMatrix),r._cachedRayForTransform||(r._cachedRayForTransform=t.Ray.Zero()),t.Ray.TransformToRef(e,r._pickWithRayInverseMatrix,r._cachedRayForTransform),r._cachedRayForTransform},i,n)},i.prototype.multiPick=function(t,e,i,n){var r=this;return this._internalMultiPick(function(i){return r.createPickingRay(t,e,i,n||null)},i)},i.prototype.multiPickWithRay=function(e,i){var n=this;return this._internalMultiPick(function(i){return n._pickWithRayInverseMatrix||(n._pickWithRayInverseMatrix=t.Matrix.Identity()),i.invertToRef(n._pickWithRayInverseMatrix),n._cachedRayForTransform||(n._cachedRayForTransform=t.Ray.Zero()),t.Ray.TransformToRef(e,n._pickWithRayInverseMatrix,n._cachedRayForTransform),n._cachedRayForTransform},i)},i.prototype.setPointerOverMesh=function(e){this._pointerOverMesh!==e&&(this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.processTrigger(t.ActionManager.OnPointerOutTrigger,t.ActionEvent.CreateNew(this._pointerOverMesh)),this._pointerOverMesh=e,this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.processTrigger(t.ActionManager.OnPointerOverTrigger,t.ActionEvent.CreateNew(this._pointerOverMesh)))},i.prototype.getPointerOverMesh=function(){return this._pointerOverMesh},i.prototype.setPointerOverSprite=function(e){this._pointerOverSprite!==e&&(this._pointerOverSprite&&this._pointerOverSprite.actionManager&&this._pointerOverSprite.actionManager.processTrigger(t.ActionManager.OnPointerOutTrigger,t.ActionEvent.CreateNewFromSprite(this._pointerOverSprite,this)),this._pointerOverSprite=e,this._pointerOverSprite&&this._pointerOverSprite.actionManager&&this._pointerOverSprite.actionManager.processTrigger(t.ActionManager.OnPointerOverTrigger,t.ActionEvent.CreateNewFromSprite(this._pointerOverSprite,this)))},i.prototype.getPointerOverSprite=function(){return this._pointerOverSprite},i.prototype.getPhysicsEngine=function(){return this._physicsEngine},i.prototype.enablePhysics=function(e,i){if(void 0===e&&(e=null),this._physicsEngine)return!0;try{return this._physicsEngine=new t.PhysicsEngine(e,i),!0}catch(e){return t.Tools.Error(e.message),!1}},i.prototype.disablePhysicsEngine=function(){this._physicsEngine&&(this._physicsEngine.dispose(),this._physicsEngine=null)},i.prototype.isPhysicsEnabled=function(){return void 0!==this._physicsEngine},i.prototype.deleteCompoundImpostor=function(t){var e=t.parts[0].mesh;e.physicsImpostor&&(e.physicsImpostor.dispose(),e.physicsImpostor=null)},i.prototype._rebuildGeometries=function(){for(var t=0,e=this._geometries;t<e.length;t++)e[t]._rebuild();for(var i=0,n=this.meshes;i<n.length;i++)n[i]._rebuild();this.postProcessManager&&this.postProcessManager._rebuild();for(var r=0,o=this.layers;r<o.length;r++)o[r]._rebuild();for(var s=0,a=this.highlightLayers;s<a.length;s++)a[s]._rebuild();this._boundingBoxRenderer&&this._boundingBoxRenderer._rebuild();for(var l=0,c=this.particleSystems;l<c.length;l++)c[l].rebuild();this._postProcessRenderPipelineManager&&this._postProcessRenderPipelineManager._rebuild()},i.prototype._rebuildTextures=function(){for(var e=0,i=this.textures;e<i.length;e++)i[e]._rebuild();this.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag)},i.prototype.createDefaultLight=function(e){if(void 0===e&&(e=!1),e&&this.lights)for(var i=0;i<this.lights.length;i++)this.lights[i].dispose();0===this.lights.length&&new t.HemisphericLight("default light",t.Vector3.Up(),this)},i.prototype.createDefaultCamera=function(e,i,n){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),i&&this.activeCamera&&(this.activeCamera.dispose(),this.activeCamera=null),!this.activeCamera){var r,o=this.getWorldExtends(),s=o.max.subtract(o.min),a=o.min.add(s.scale(.5)),l=1.5*s.length();if(isFinite(l)||(l=1,a.copyFromFloats(0,0,0)),e){var c=new t.ArcRotateCamera("default camera",-Math.PI/2,Math.PI/2,l,a,this);c.lowerRadiusLimit=.01*l,c.wheelPrecision=100/l,r=c}else{var u=new t.FreeCamera("default camera",new t.Vector3(a.x,a.y,-l),this);u.setTarget(a),r=u}r.minZ=.01*l,r.maxZ=1e3*l,r.speed=.2*l,this.activeCamera=r;var h=this.getEngine().getRenderingCanvas();n&&h&&r.attachControl(h)}},i.prototype.createDefaultCameraOrLight=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),this.createDefaultLight(e),this.createDefaultCamera(t,e,i)},i.prototype.createDefaultSkybox=function(e,i,n,r){if(void 0===i&&(i=!1),void 0===n&&(n=1e3),void 0===r&&(r=0),e&&(this.environmentTexture=e),!this.environmentTexture)return t.Tools.Warn("Can not create default skybox without environment texture."),null;var o=t.Mesh.CreateBox("hdrSkyBox",n,this);if(i){var s=new t.PBRMaterial("skyBox",this);s.backFaceCulling=!1,s.reflectionTexture=this.environmentTexture.clone(),s.reflectionTexture&&(s.reflectionTexture.coordinatesMode=t.Texture.SKYBOX_MODE),s.microSurface=1-r,s.disableLighting=!0,s.twoSidedLighting=!0,o.infiniteDistance=!0,o.material=s}else{var a=new t.StandardMaterial("skyBox",this);a.backFaceCulling=!1,a.reflectionTexture=this.environmentTexture.clone(),a.reflectionTexture&&(a.reflectionTexture.coordinatesMode=t.Texture.SKYBOX_MODE),a.disableLighting=!0,o.infiniteDistance=!0,o.material=a}return o},i.prototype.createDefaultEnvironment=function(e){return t.EnvironmentHelper?new t.EnvironmentHelper(e,this):null},i.prototype.createDefaultVRExperience=function(e){return void 0===e&&(e={}),new t.VRExperienceHelper(this,e)},i.prototype._getByTags=function(e,i,n){if(void 0===i)return e;var r=[];for(var o in n=n||function(t){},e){var s=e[o];t.Tags&&t.Tags.MatchesQuery(s,i)&&(r.push(s),n(s))}return r},i.prototype.getMeshesByTags=function(t,e){return this._getByTags(this.meshes,t,e)},i.prototype.getCamerasByTags=function(t,e){return this._getByTags(this.cameras,t,e)},i.prototype.getLightsByTags=function(t,e){return this._getByTags(this.lights,t,e)},i.prototype.getMaterialByTags=function(t,e){return this._getByTags(this.materials,t,e).concat(this._getByTags(this.multiMaterials,t,e))},i.prototype.setRenderingOrder=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this._renderingManager.setRenderingOrder(t,e,i,n)},i.prototype.setRenderingAutoClearDepthStencil=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this._renderingManager.setRenderingAutoClearDepthStencil(t,e,i,n)},i.prototype.markAllMaterialsAsDirty=function(t,e){for(var i=0,n=this.materials;i<n.length;i++){var r=n[i];e&&!e(r)||r.markAsDirty(t)}},i.prototype._loadFile=function(e,i,n,r,o,s){var a=this,l=t.Tools.LoadFile(e,i,n,r?this.database:void 0,o,s);return this._activeRequests.push(l),l.onCompleteObservable.add(function(t){a._activeRequests.splice(a._activeRequests.indexOf(t),1)}),l},i.prototype._loadFileAsync=function(t,e,i){var n=this;return new Promise(function(r,o){n._loadFile(t,function(t){r(t)},void 0,e,i,function(t,e){o(e)})})},i._FOGMODE_NONE=0,i._FOGMODE_EXP=1,i._FOGMODE_EXP2=2,i._FOGMODE_LINEAR=3,i._uniqueIdCounter=0,i.MinDeltaTime=1,i.MaxDeltaTime=1e3,i.DragMovementThreshold=10,i.LongPressDelay=500,i.DoubleClickDelay=300,i.ExclusiveDoubleClickMode=!1,i}();t.Scene=n}(l||(l={})),function(t){var e=function(){return function(){this.cameras=new Array,this.lights=new Array,this.meshes=new Array,this.skeletons=new Array,this.particleSystems=new Array,this.animations=new Array,this.multiMaterials=new Array,this.materials=new Array,this.morphTargetManagers=new Array,this.geometries=new Array,this.transformNodes=new Array,this.lensFlareSystems=new Array,this.shadowGenerators=new Array,this.actionManagers=new Array,this.sounds=new Array}}();t.KeepAssets=e;var i=function(){function t(t){this.cameras=new Array,this.lights=new Array,this.meshes=new Array,this.skeletons=new Array,this.particleSystems=new Array,this.animations=new Array,this.multiMaterials=new Array,this.materials=new Array,this.morphTargetManagers=new Array,this.geometries=new Array,this.transformNodes=new Array,this.lensFlareSystems=new Array,this.shadowGenerators=new Array,this.actionManagers=new Array,this.sounds=new Array,this.scene=t}return t.prototype.addAllToScene=function(){var t=this;this.cameras.forEach(function(e){t.scene.addCamera(e)}),this.lights.forEach(function(e){t.scene.addLight(e)}),this.meshes.forEach(function(e){t.scene.addMesh(e)}),this.skeletons.forEach(function(e){t.scene.addSkeleton(e)}),this.particleSystems.forEach(function(e){t.scene.addParticleSystem(e)}),this.animations.forEach(function(e){t.scene.addAnimation(e)}),this.multiMaterials.forEach(function(e){t.scene.addMultiMaterial(e)}),this.materials.forEach(function(e){t.scene.addMaterial(e)}),this.morphTargetManagers.forEach(function(e){t.scene.addMorphTargetManager(e)}),this.geometries.forEach(function(e){t.scene.addGeometry(e)}),this.transformNodes.forEach(function(e){t.scene.addTransformNode(e)}),this.lensFlareSystems.forEach(function(e){t.scene.addLensFlareSystem(e)}),this.actionManagers.forEach(function(e){t.scene.addActionManager(e)}),this.sounds.forEach(function(e){e.play(),e.autoplay=!0,t.scene.mainSoundTrack.AddSound(e)})},t.prototype.removeAllFromScene=function(){var t=this;this.cameras.forEach(function(e){t.scene.removeCamera(e)}),this.lights.forEach(function(e){t.scene.removeLight(e)}),this.meshes.forEach(function(e){t.scene.removeMesh(e)}),this.skeletons.forEach(function(e){t.scene.removeSkeleton(e)}),this.particleSystems.forEach(function(e){t.scene.removeParticleSystem(e)}),this.animations.forEach(function(e){t.scene.removeAnimation(e)}),this.multiMaterials.forEach(function(e){t.scene.removeMultiMaterial(e)}),this.materials.forEach(function(e){t.scene.removeMaterial(e)}),this.morphTargetManagers.forEach(function(e){t.scene.removeMorphTargetManager(e)}),this.geometries.forEach(function(e){t.scene.removeGeometry(e)}),this.transformNodes.forEach(function(e){t.scene.removeTransformNode(e)}),this.lensFlareSystems.forEach(function(e){t.scene.removeLensFlareSystem(e)}),this.actionManagers.forEach(function(e){t.scene.removeActionManager(e)}),this.sounds.forEach(function(e){e.stop(),e.autoplay=!1,t.scene.mainSoundTrack.RemoveSound(e)})},t.prototype._moveAssets=function(t,e,i){for(var n=0,r=t;n<r.length;n++){for(var o=r[n],s=!0,a=0,l=i;a<l.length;a++)if(o===l[a]){s=!1;break}s&&e.push(o)}},t.prototype.moveAllFromScene=function(t){void 0===t&&(t=new e),this._moveAssets(this.scene.cameras,this.cameras,t.cameras),this._moveAssets(this.scene.meshes,this.meshes,t.meshes),this._moveAssets(this.scene.getGeometries(),this.geometries,t.geometries),this._moveAssets(this.scene.materials,this.materials,t.materials),this._moveAssets(this.scene._actionManagers,this.actionManagers,t.actionManagers),this._moveAssets(this.scene.animations,this.animations,t.animations),this._moveAssets(this.scene.lensFlareSystems,this.lensFlareSystems,t.lensFlareSystems),this._moveAssets(this.scene.lights,this.lights,t.lights),this._moveAssets(this.scene.morphTargetManagers,this.morphTargetManagers,t.morphTargetManagers),this._moveAssets(this.scene.multiMaterials,this.multiMaterials,t.multiMaterials),this._moveAssets(this.scene.skeletons,this.skeletons,t.skeletons),this._moveAssets(this.scene.particleSystems,this.particleSystems,t.particleSystems),this._moveAssets(this.scene.mainSoundTrack.soundCollection,this.sounds,t.sounds),this._moveAssets(this.scene.transformNodes,this.transformNodes,t.transformNodes),this.removeAllFromScene()},t}();t.AssetContainer=i}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o,s){void 0===s&&(s=!1),e instanceof t.Mesh?this._engine=e.getScene().getEngine():this._engine=e,this._updatable=n,this._data=i,this._strideSize=r,o||this.create(),this._instanced=s,this._instanceDivisor=s?1:0}return e.prototype.createVertexBuffer=function(e,i,n,r){return new t.VertexBuffer(this._engine,this,e,this._updatable,!0,r||this._strideSize,this._instanced,i,n)},e.prototype.isUpdatable=function(){return this._updatable},e.prototype.getData=function(){return this._data},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStrideSize=function(){return this._strideSize},e.prototype.getIsInstanced=function(){return this._instanced},Object.defineProperty(e.prototype,"instanceDivisor",{get:function(){return this._instanceDivisor},set:function(t){this._instanceDivisor=t,this._instanced=0!=t},enumerable:!0,configurable:!0}),e.prototype.create=function(t){void 0===t&&(t=null),!t&&this._buffer||(t=t||this._data)&&(this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,t),this._data=t):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(t),this._data=t):this._buffer=this._engine.createVertexBuffer(t))},e.prototype._rebuild=function(){this._buffer=null,this.create(this._data)},e.prototype.update=function(t){this.create(t)},e.prototype.updateDirectly=function(t,e,i){this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,t,e,i?i*this.getStrideSize():void 0),this._data=null)},e.prototype.dispose=function(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)},e}();t.Buffer=e}(l||(l={})),function(t){var e=function(){function e(i,n,r,o,s,a,l,c,u){if(!a)switch(r){case e.PositionKind:case e.NormalKind:a=3;break;case e.UVKind:case e.UV2Kind:case e.UV3Kind:case e.UV4Kind:case e.UV5Kind:case e.UV6Kind:a=2;break;case e.TangentKind:case e.ColorKind:a=4;break;case e.MatricesIndicesKind:case e.MatricesIndicesExtraKind:a=4;break;case e.MatricesWeightsKind:case e.MatricesWeightsExtraKind:default:a=4}n instanceof t.Buffer?(a||(a=n.getStrideSize()),this._buffer=n,this._ownsBuffer=!1):(this._buffer=new t.Buffer(i,n,o,a,s,l),this._ownsBuffer=!0),this._stride=a,this._offset=c||0,this._size=u||a,this._kind=r}return e.prototype._rebuild=function(){this._buffer&&this._buffer._rebuild()},e.prototype.getKind=function(){return this._kind},e.prototype.isUpdatable=function(){return this._buffer.isUpdatable()},e.prototype.getData=function(){return this._buffer.getData()},e.prototype.getBuffer=function(){return this._buffer.getBuffer()},e.prototype.getStrideSize=function(){return this._stride},e.prototype.getOffset=function(){return this._offset},e.prototype.getSize=function(){return this._size},e.prototype.getIsInstanced=function(){return this._buffer.getIsInstanced()},e.prototype.getInstanceDivisor=function(){return this._buffer.instanceDivisor},e.prototype.create=function(t){return this._buffer.create(t)},e.prototype.update=function(t){return this._buffer.update(t)},e.prototype.updateDirectly=function(t,e){return this._buffer.updateDirectly(t,e)},e.prototype.dispose=function(){this._ownsBuffer&&this._buffer.dispose()},Object.defineProperty(e,"PositionKind",{get:function(){return e._PositionKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NormalKind",{get:function(){return e._NormalKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TangentKind",{get:function(){return e._TangentKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UVKind",{get:function(){return e._UVKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UV2Kind",{get:function(){return e._UV2Kind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UV3Kind",{get:function(){return e._UV3Kind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UV4Kind",{get:function(){return e._UV4Kind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UV5Kind",{get:function(){return e._UV5Kind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UV6Kind",{get:function(){return e._UV6Kind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ColorKind",{get:function(){return e._ColorKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MatricesIndicesKind",{get:function(){return e._MatricesIndicesKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MatricesWeightsKind",{get:function(){return e._MatricesWeightsKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MatricesIndicesExtraKind",{get:function(){return e._MatricesIndicesExtraKind},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MatricesWeightsExtraKind",{get:function(){return e._MatricesWeightsExtraKind},enumerable:!0,configurable:!0}),e._PositionKind="position",e._NormalKind="normal",e._TangentKind="tangent",e._UVKind="uv",e._UV2Kind="uv2",e._UV3Kind="uv3",e._UV4Kind="uv4",e._UV5Kind="uv5",e._UV6Kind="uv6",e._ColorKind="color",e._MatricesIndicesKind="matricesIndices",e._MatricesWeightsKind="matricesWeights",e._MatricesIndicesExtraKind="matricesIndicesExtra",e._MatricesWeightsExtraKind="matricesWeightsExtra",e}();t.VertexBuffer=e}(l||(l={})),function(t){var e=function(){return function(){this.previous=null,this.next=null}}();t.DummyInternalTextureTracker=e}(l||(l={})),function(t){var e=function(){function e(i,n){this.onLoadedObservable=new t.Observable,this.previous=null,this.next=null,this._initialSlot=-1,this._designatedSlot=-1,this._dataSource=e.DATASOURCE_UNKNOWN,this._references=1,this._engine=i,this._dataSource=n,this._webGLTexture=i._createTexture()}return Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),e.prototype.incrementReferences=function(){this._references++},e.prototype.updateSize=function(t,e,i){void 0===i&&(i=1),this.width=t,this.height=e,this.depth=i,this.baseWidth=t,this.baseHeight=e,this.baseDepth=i,this._size=t*e*i},e.prototype._rebuild=function(){var i,n=this;switch(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedAnisotropicFilteringLevel=null,this._dataSource){case e.DATASOURCE_TEMP:return;case e.DATASOURCE_URL:return void(i=this._engine.createTexture(this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,function(){n.isReady=!0},null,this._buffer,void 0,this.format))._swapAndDie(this);case e.DATASOURCE_RAW:return(i=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_RAW3D:return(i=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_DYNAMIC:return void(i=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode))._swapAndDie(this);case e.DATASOURCE_RENDERTARGET:var r=new t.RenderTargetCreationOptions;if(r.generateDepthBuffer=this._generateDepthBuffer,r.generateMipMaps=this.generateMipMaps,r.generateStencilBuffer=this._generateStencilBuffer,r.samplingMode=this.samplingMode,r.type=this.type,this.isCube)i=this._engine.createRenderTargetCubeTexture(this.width,r);else{var o={width:this.width,height:this.height};i=this._engine.createRenderTargetTexture(o,r)}return i._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_CUBE:return void(i=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,function(){n.isReady=!0},null,this.format,this._extension))._swapAndDie(this);case e.DATASOURCE_CUBERAW:return(i=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_CUBEPREFILTERED:return void(i=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,function(t){t&&t._swapAndDie(n),n.isReady=!0},null,this.format,this._extension))}},e.prototype._swapAndDie=function(t){t._webGLTexture=this._webGLTexture,this._framebuffer&&(t._framebuffer=this._framebuffer),this._depthStencilBuffer&&(t._depthStencilBuffer=this._depthStencilBuffer),this._lodTextureHigh&&(t._lodTextureHigh&&t._lodTextureHigh.dispose(),t._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(t._lodTextureMid&&t._lodTextureMid.dispose(),t._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(t._lodTextureLow&&t._lodTextureLow.dispose(),t._lodTextureLow=this._lodTextureLow);var e=this._engine.getLoadedTexturesCache(),i=e.indexOf(this);-1!==i&&e.splice(i,1)},e.prototype.dispose=function(){this._webGLTexture&&0==--this._references&&(this._engine._releaseTexture(this),this._webGLTexture=null,this.previous=null,this.next=null)},e.DATASOURCE_UNKNOWN=0,e.DATASOURCE_URL=1,e.DATASOURCE_TEMP=2,e.DATASOURCE_RAW=3,e.DATASOURCE_DYNAMIC=4,e.DATASOURCE_RENDERTARGET=5,e.DATASOURCE_MULTIRENDERTARGET=6,e.DATASOURCE_CUBE=7,e.DATASOURCE_CUBERAW=8,e.DATASOURCE_CUBEPREFILTERED=9,e.DATASOURCE_RAW3D=10,e}();t.InternalTexture=e}(l||(l={})),function(t){var e=function(){function e(i){this._hasAlpha=!1,this.getAlphaFromRGB=!1,this.level=1,this.coordinatesIndex=0,this._coordinatesMode=t.Texture.EXPLICIT_MODE,this.wrapU=t.Texture.WRAP_ADDRESSMODE,this.wrapV=t.Texture.WRAP_ADDRESSMODE,this.wrapR=t.Texture.WRAP_ADDRESSMODE,this.anisotropicFilteringLevel=e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this.isCube=!1,this.is3D=!1,this.gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this.lodGenerationOffset=0,this.lodGenerationScale=.8,this.isRenderTarget=!1,this.animations=new Array,this.onDisposeObservable=new t.Observable,this.delayLoadState=t.Engine.DELAYLOADSTATE_NONE,this._scene=i||t.Engine.LastCreatedScene,this._scene&&this._scene.textures.push(this),this._uid=null}return Object.defineProperty(e.prototype,"hasAlpha",{get:function(){return this._hasAlpha},set:function(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag|t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinatesMode",{get:function(){return this._coordinatesMode},set:function(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=t.Tools.RandomId()),this._uid},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e.prototype.getClassName=function(){return"BaseTexture"},Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBlocking",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getTextureMatrix=function(){return t.Matrix.IdentityReadOnly},e.prototype.getReflectionTextureMatrix=function(){return t.Matrix.IdentityReadOnly},e.prototype.getInternalTexture=function(){return this._texture},e.prototype.isReadyOrNotBlocking=function(){return!this.isBlocking||this.isReady()},e.prototype.isReady=function(){return this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady},e.prototype.getSize=function(){return this._texture&&this._texture.width?new t.Size(this._texture.width,this._texture.height):this._texture&&this._texture._size?new t.Size(this._texture._size,this._texture._size):t.Size.Zero()},e.prototype.getBaseSize=function(){return this.isReady()&&this._texture?this._texture._size?new t.Size(this._texture._size,this._texture._size):new t.Size(this._texture.baseWidth,this._texture.baseHeight):t.Size.Zero()},e.prototype.scale=function(t){},Object.defineProperty(e.prototype,"canRescale",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._getFromCache=function(t,e,i){if(!this._scene)return null;for(var n=this._scene.getEngine().getLoadedTexturesCache(),r=0;r<n.length;r++){var o=n[r];if(o.url===t&&o.generateMipMaps===!e&&(!i||i===o.samplingMode))return o.incrementReferences(),o}return null},e.prototype._rebuild=function(){},e.prototype.delayLoad=function(){},e.prototype.clone=function(){return null},Object.defineProperty(e.prototype,"textureType",{get:function(){return this._texture&&void 0!==this._texture.type?this._texture.type:t.Engine.TEXTURETYPE_UNSIGNED_INT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureFormat",{get:function(){return this._texture&&void 0!==this._texture.format?this._texture.format:t.Engine.TEXTUREFORMAT_RGBA},enumerable:!0,configurable:!0}),e.prototype.readPixels=function(t){if(void 0===t&&(t=0),!this._texture)return null;var e=this.getSize(),i=this.getScene();if(!i)return null;var n=i.getEngine();return this._texture.isCube?n._readTexturePixels(this._texture,e.width,e.height,t):n._readTexturePixels(this._texture,e.width,e.height,-1)},e.prototype.releaseInternalTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null)},Object.defineProperty(e.prototype,"sphericalPolynomial",{get:function(){return this._texture&&t.CubeMapToSphericalPolynomialTools&&this.isReady()?(this._texture._sphericalPolynomial||(this._texture._sphericalPolynomial=t.CubeMapToSphericalPolynomialTools.ConvertCubeMapTextureToSphericalPolynomial(this)),this._texture._sphericalPolynomial):null},set:function(t){this._texture&&(this._texture._sphericalPolynomial=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureHigh",{get:function(){return this._texture?this._texture._lodTextureHigh:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureMid",{get:function(){return this._texture?this._texture._lodTextureMid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureLow",{get:function(){return this._texture?this._texture._lodTextureLow:null},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._scene){this._scene.stopAnimation(this),this._scene._removePendingData(this);var t=this._scene.textures.indexOf(this);t>=0&&this._scene.textures.splice(t,1),void 0!==this._texture&&(this.releaseInternalTexture(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear())}},e.prototype.serialize=function(){if(!this.name)return null;var e=t.SerializationHelper.Serialize(this);return t.Animation.AppendSerializedAnimations(this,e),e},e.WhenAllReady=function(t,e){var i=t.length;if(0!==i)for(var n,r,o=0;o<t.length;o++)!function(){if((n=t[o]).isReady())0==--i&&e();else{r=n.onLoadObservable;var s=function(){r.removeCallback(s),0==--i&&e()};r.add(s)}}();else e()},e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,r([t.serialize()],e.prototype,"name",void 0),r([t.serialize("hasAlpha")],e.prototype,"_hasAlpha",void 0),r([t.serialize()],e.prototype,"getAlphaFromRGB",void 0),r([t.serialize()],e.prototype,"level",void 0),r([t.serialize()],e.prototype,"coordinatesIndex",void 0),r([t.serialize("coordinatesMode")],e.prototype,"_coordinatesMode",void 0),r([t.serialize()],e.prototype,"wrapU",void 0),r([t.serialize()],e.prototype,"wrapV",void 0),r([t.serialize()],e.prototype,"wrapR",void 0),r([t.serialize()],e.prototype,"anisotropicFilteringLevel",void 0),r([t.serialize()],e.prototype,"isCube",void 0),r([t.serialize()],e.prototype,"is3D",void 0),r([t.serialize()],e.prototype,"gammaSpace",void 0),r([t.serialize()],e.prototype,"invertZ",void 0),r([t.serialize()],e.prototype,"lodLevelInAlpha",void 0),r([t.serialize()],e.prototype,"lodGenerationOffset",void 0),r([t.serialize()],e.prototype,"lodGenerationScale",void 0),r([t.serialize()],e.prototype,"isRenderTarget",void 0),e}();t.BaseTexture=e}(l||(l={})),function(t){var e=function(e){function i(n,r,o,s,a,l,c,u,h,p){void 0===o&&(o=!1),void 0===s&&(s=!0),void 0===a&&(a=i.TRILINEAR_SAMPLINGMODE),void 0===l&&(l=null),void 0===c&&(c=null),void 0===u&&(u=null),void 0===h&&(h=!1);var d=e.call(this,r)||this;if(d.uOffset=0,d.vOffset=0,d.uScale=1,d.vScale=1,d.uAng=0,d.vAng=0,d.wAng=0,d._isBlocking=!0,d.name=n||"",d.url=n,d._noMipmap=o,d._invertY=s,d._samplingMode=a,d._buffer=u,d._deleteBuffer=h,p&&(d._format=p),!(r=d.getScene()))return d;r.getEngine().onBeforeTextureInitObservable.notifyObservers(d);var f=function(){d._onLoadObservable&&d._onLoadObservable.hasObservers()&&d.onLoadObservable.notifyObservers(d),l&&l(),!d.isBlocking&&r&&r.resetCachedMaterial()};return d.url?(d._texture=d._getFromCache(d.url,o,a),d._texture?d._texture.isReady?t.Tools.SetImmediate(function(){return f()}):d._texture.onLoadedObservable.add(f):r.useDelayedTextureLoading?(d.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED,d._delayedOnLoad=f,d._delayedOnError=c):(d._texture=r.getEngine().createTexture(d.url,o,s,r,d._samplingMode,f,c,d._buffer,void 0,d._format),h&&delete d._buffer),d):(d._delayedOnLoad=f,d._delayedOnError=c,d)}return o(i,e),Object.defineProperty(i.prototype,"noMipmap",{get:function(){return this._noMipmap},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBlocking",{get:function(){return this._isBlocking},set:function(t){this._isBlocking=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"samplingMode",{get:function(){return this._samplingMode},enumerable:!0,configurable:!0}),i.prototype.updateURL=function(e){this.url=e,this.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED,this.delayLoad()},i.prototype.delayLoad=function(){var e=this;if(this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED){var i=this.getScene();i&&(this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap,this._samplingMode),this._texture?this._texture.isReady?t.Tools.SetImmediate(function(){e._delayedOnLoad&&e._delayedOnLoad()}):this._delayedOnLoad&&this._texture.onLoadedObservable.add(this._delayedOnLoad):(this._texture=i.getEngine().createTexture(this.url,this._noMipmap,this._invertY,i,this._samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format),this._deleteBuffer&&delete this._buffer))}},i.prototype.updateSamplingMode=function(t){if(this._texture){var e=this.getScene();e&&(this._samplingMode=t,e.getEngine().updateTextureSamplingMode(t,this._texture))}},i.prototype._prepareRowForTextureGeneration=function(e,i,n,r){e*=this.uScale,i*=this.vScale,e-=.5*this.uScale,i-=.5*this.vScale,n-=.5,t.Vector3.TransformCoordinatesFromFloatsToRef(e,i,n,this._rowGenerationMatrix,r),r.x+=.5*this.uScale+this.uOffset,r.y+=.5*this.vScale+this.vOffset,r.z+=.5},i.prototype.getTextureMatrix=function(){var e=this;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedTextureMatrix||(this._cachedTextureMatrix=t.Matrix.Zero(),this._rowGenerationMatrix=new t.Matrix,this._t0=t.Vector3.Zero(),this._t1=t.Vector3.Zero(),this._t2=t.Vector3.Zero()),t.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.subtractInPlace(this._t0),this._t2.subtractInPlace(this._t0),t.Matrix.IdentityToRef(this._cachedTextureMatrix),this._cachedTextureMatrix.m[0]=this._t1.x,this._cachedTextureMatrix.m[1]=this._t1.y,this._cachedTextureMatrix.m[2]=this._t1.z,this._cachedTextureMatrix.m[4]=this._t2.x,this._cachedTextureMatrix.m[5]=this._t2.y,this._cachedTextureMatrix.m[6]=this._t2.z,this._cachedTextureMatrix.m[8]=this._t0.x,this._cachedTextureMatrix.m[9]=this._t0.y,this._cachedTextureMatrix.m[10]=this._t0.z;var i=this.getScene();return i?(i.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag,function(t){return t.hasTexture(e)}),this._cachedTextureMatrix):this._cachedTextureMatrix},i.prototype.getReflectionTextureMatrix=function(){var e=this,n=this.getScene();if(!n)return this._cachedTextureMatrix;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale===this._cachedUScale&&this.vScale===this._cachedVScale&&this.coordinatesMode===this._cachedCoordinatesMode){if(this.coordinatesMode!==i.PROJECTION_MODE)return this._cachedTextureMatrix;if(this._cachedProjectionMatrixId===n.getProjectionMatrix().updateFlag)return this._cachedTextureMatrix}switch(this._cachedTextureMatrix||(this._cachedTextureMatrix=t.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=t.Matrix.Zero()),this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale,this._cachedVScale=this.vScale,this._cachedCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case i.PLANAR_MODE:t.Matrix.IdentityToRef(this._cachedTextureMatrix),this._cachedTextureMatrix[0]=this.uScale,this._cachedTextureMatrix[5]=this.vScale,this._cachedTextureMatrix[12]=this.uOffset,this._cachedTextureMatrix[13]=this.vOffset;break;case i.PROJECTION_MODE:t.Matrix.IdentityToRef(this._projectionModeMatrix),this._projectionModeMatrix.m[0]=.5,this._projectionModeMatrix.m[5]=-.5,this._projectionModeMatrix.m[10]=0,this._projectionModeMatrix.m[12]=.5,this._projectionModeMatrix.m[13]=.5,this._projectionModeMatrix.m[14]=1,this._projectionModeMatrix.m[15]=1;var r=n.getProjectionMatrix();this._cachedProjectionMatrixId=r.updateFlag,r.multiplyToRef(this._projectionModeMatrix,this._cachedTextureMatrix);break;default:t.Matrix.IdentityToRef(this._cachedTextureMatrix)}return n.markAllMaterialsAsDirty(t.Material.TextureDirtyFlag,function(t){return-1!==t.getActiveTextures().indexOf(e)}),this._cachedTextureMatrix},i.prototype.clone=function(){var e=this;return t.SerializationHelper.Clone(function(){return new i(e._texture?e._texture.url:null,e.getScene(),e._noMipmap,e._invertY,e._samplingMode)},this)},Object.defineProperty(i.prototype,"onLoadObservable",{get:function(){return this._onLoadObservable||(this._onLoadObservable=new t.Observable),this._onLoadObservable},enumerable:!0,configurable:!0}),i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return"string"==typeof this._buffer&&"data:"===this._buffer.substr(0,5)&&(t.base64String=this._buffer,t.name=t.name.replace("data:","")),t},i.prototype.getClassName=function(){return"Texture"},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.onLoadObservable&&(this.onLoadObservable.clear(),this._onLoadObservable=null),this._delayedOnLoad=null,this._delayedOnError=null},i.CreateFromBase64String=function(e,n,r,o,s,a,l,c,u){return void 0===a&&(a=i.TRILINEAR_SAMPLINGMODE),void 0===l&&(l=null),void 0===c&&(c=null),void 0===u&&(u=t.Engine.TEXTUREFORMAT_RGBA),new i("data:"+n,r,o,s,a,l,c,e,!1,u)},i.Parse=function(e,n,r){if(e.customType){var o=t.Tools.Instantiate(e.customType).Parse(e,n,r);return e.samplingMode&&o.updateSamplingMode&&o._samplingMode&&o._samplingMode!==e.samplingMode&&o.updateSamplingMode(e.samplingMode),o}if(e.isCube)return t.CubeTexture.Parse(e,n,r);if(!e.name&&!e.isRenderTarget)return null;var s=t.SerializationHelper.Parse(function(){var o=!0;if(e.noMipmap&&(o=!1),e.mirrorPlane){var s=new t.MirrorTexture(e.name,e.renderTargetSize,n,o);return s._waitingRenderList=e.renderList,s.mirrorPlane=t.Plane.FromArray(e.mirrorPlane),s}if(e.isRenderTarget){var a=new t.RenderTargetTexture(e.name,e.renderTargetSize,n,o);return a._waitingRenderList=e.renderList,a}return e.base64String?i.CreateFromBase64String(e.base64String,e.name,n,!o):new i(r+e.name,n,!o)},e,n);if(e.samplingMode){var a=e.samplingMode;s._samplingMode!==a&&s.updateSamplingMode(a)}if(e.animations)for(var l=0;l<e.animations.length;l++){var c=e.animations[l];s.animations.push(t.Animation.Parse(c))}return s},i.LoadFromDataString=function(e,n,r,o,s,a,l,c,u,h){return void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=i.TRILINEAR_SAMPLINGMODE),void 0===c&&(c=null),void 0===u&&(u=null),void 0===h&&(h=t.Engine.TEXTUREFORMAT_RGBA),"data:"!==e.substr(0,5)&&(e="data:"+e),new i(e,r,s,a,l,c,u,n,o,h)},i.NEAREST_SAMPLINGMODE=1,i.NEAREST_NEAREST_MIPLINEAR=1,i.BILINEAR_SAMPLINGMODE=2,i.LINEAR_LINEAR_MIPNEAREST=2,i.TRILINEAR_SAMPLINGMODE=3,i.LINEAR_LINEAR_MIPLINEAR=3,i.NEAREST_NEAREST_MIPNEAREST=4,i.NEAREST_LINEAR_MIPNEAREST=5,i.NEAREST_LINEAR_MIPLINEAR=6,i.NEAREST_LINEAR=7,i.NEAREST_NEAREST=8,i.LINEAR_NEAREST_MIPNEAREST=9,i.LINEAR_NEAREST_MIPLINEAR=10,i.LINEAR_LINEAR=11,i.LINEAR_NEAREST=12,i.EXPLICIT_MODE=0,i.SPHERICAL_MODE=1,i.PLANAR_MODE=2,i.CUBIC_MODE=3,i.PROJECTION_MODE=4,i.SKYBOX_MODE=5,i.INVCUBIC_MODE=6,i.EQUIRECTANGULAR_MODE=7,i.FIXED_EQUIRECTANGULAR_MODE=8,i.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,i.CLAMP_ADDRESSMODE=0,i.WRAP_ADDRESSMODE=1,i.MIRROR_ADDRESSMODE=2,r([t.serialize()],i.prototype,"url",void 0),r([t.serialize()],i.prototype,"uOffset",void 0),r([t.serialize()],i.prototype,"vOffset",void 0),r([t.serialize()],i.prototype,"uScale",void 0),r([t.serialize()],i.prototype,"vScale",void 0),r([t.serialize()],i.prototype,"uAng",void 0),r([t.serialize()],i.prototype,"vAng",void 0),r([t.serialize()],i.prototype,"wAng",void 0),r([t.serialize()],i.prototype,"isBlocking",null),i}(t.BaseTexture);t.Texture=e}(l||(l={})),function(t){var e=function(){return function(){this.mustReturn=!1,this.visibleInstances=new Array,this.renderSelf=new Array}}();t._InstancesBatch=e;var i=function(i){function n(r,o,s,a,l,c){void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===c&&(c=!0);var u=i.call(this,r,o)||this;if(u.onBeforeRenderObservable=new t.Observable,u.onAfterRenderObservable=new t.Observable,u.onBeforeDrawObservable=new t.Observable,u.delayLoadState=t.Engine.DELAYLOADSTATE_NONE,u.instances=new Array,u._LODLevels=new Array,u._visibleInstances={},u._renderIdForInstances=new Array,u._batchCache=new e,u._instancesBufferSize=2048,u._originalBuilderSideOrientation=n._DEFAULTSIDE,u.overrideMaterialSideOrientation=null,u._areNormalsFrozen=!1,u._source=null,o=u.getScene(),a){var h;if(u._source=a,a._geometry&&a._geometry.applyToMesh(u),t.Tools.DeepCopy(a,u,["name","material","skeleton","instances","parent","uniqueId","source","metadata"],["_poseMatrix","_source"]),a.metadata&&a.metadata.clone?u.metadata=a.metadata.clone():u.metadata=a.metadata,t.Tags&&t.Tags.HasTags(a)&&t.Tags.AddTagsTo(u,t.Tags.GetTags(a,!0)),u.parent=a.parent,u.setPivotMatrix(a.getPivotMatrix()),u.id=r+"."+a.id,u.material=a.material,!l)for(var p=a.getDescendants(!0),d=0;d<p.length;d++){var f=p[d];f.clone&&f.clone(r+"."+f.name,u)}var m=u.getScene().getPhysicsEngine();if(c&&m){var g=m.getImpostorForPhysicsObject(a);g&&(u.physicsImpostor=g.clone(u))}for(h=0;h<o.particleSystems.length;h++){var y=o.particleSystems[h];y.emitter===a&&y.clone(y.name,u)}u.computeWorldMatrix(!0)}return null!==s&&(u.parent=s),u}return o(n,i),Object.defineProperty(n,"FRONTSIDE",{get:function(){return n._FRONTSIDE},enumerable:!0,configurable:!0}),Object.defineProperty(n,"BACKSIDE",{get:function(){return n._BACKSIDE},enumerable:!0,configurable:!0}),Object.defineProperty(n,"DOUBLESIDE",{get:function(){return n._DOUBLESIDE},enumerable:!0,configurable:!0}),Object.defineProperty(n,"DEFAULTSIDE",{get:function(){return n._DEFAULTSIDE},enumerable:!0,configurable:!0}),Object.defineProperty(n,"NO_CAP",{get:function(){return n._NO_CAP},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CAP_START",{get:function(){return n._CAP_START},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CAP_END",{get:function(){return n._CAP_END},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CAP_ALL",{get:function(){return n._CAP_ALL},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onBeforeDraw",{set:function(t){this._onBeforeDrawObserver&&this.onBeforeDrawObservable.remove(this._onBeforeDrawObserver),this._onBeforeDrawObserver=this.onBeforeDrawObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"morphTargetManager",{get:function(){return this._morphTargetManager},set:function(t){this._morphTargetManager!==t&&(this._morphTargetManager=t,this._syncGeometryWithMorphTargetManager())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isUnIndexed",{get:function(){return this._unIndexed},set:function(t){this._unIndexed!==t&&(this._unIndexed=t,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),n.prototype.getClassName=function(){return"Mesh"},n.prototype.toString=function(e){var n=i.prototype.toString.call(this,e);if(n+=", n vertices: "+this.getTotalVertices(),n+=", parent: "+(this._waitingParentId?this._waitingParentId:this.parent?this.parent.name:"NONE"),this.animations)for(var r=0;r<this.animations.length;r++)n+=", animation[0]: "+this.animations[r].toString(e);if(e)if(this._geometry){var o=this.getIndices(),s=this.getVerticesData(t.VertexBuffer.PositionKind);s&&o&&(n+=", flat shading: "+(s.length/3===o.length?"YES":"NO"))}else n+=", flat shading: UNKNOWN";return n},Object.defineProperty(n.prototype,"hasLODLevels",{get:function(){return this._LODLevels.length>0},enumerable:!0,configurable:!0}),n.prototype.getLODLevels=function(){return this._LODLevels},n.prototype._sortLODLevels=function(){this._LODLevels.sort(function(t,e){return t.distance<e.distance?1:t.distance>e.distance?-1:0})},n.prototype.addLODLevel=function(e,i){if(i&&i._masterMesh)return t.Tools.Warn("You cannot use a mesh as LOD level twice"),this;var n=new t.MeshLODLevel(e,i);return this._LODLevels.push(n),i&&(i._masterMesh=this),this._sortLODLevels(),this},n.prototype.getLODLevelAtDistance=function(t){for(var e=0;e<this._LODLevels.length;e++){var i=this._LODLevels[e];if(i.distance===t)return i.mesh}return null},n.prototype.removeLODLevel=function(t){for(var e=0;e<this._LODLevels.length;e++)this._LODLevels[e].mesh===t&&(this._LODLevels.splice(e,1),t&&(t._masterMesh=null));return this._sortLODLevels(),this},n.prototype.getLOD=function(t,e){if(!this._LODLevels||0===this._LODLevels.length)return this;var i=(e||this.getBoundingInfo().boundingSphere).centerWorld.subtract(t.globalPosition).length();if(this._LODLevels[this._LODLevels.length-1].distance>i)return this.onLODLevelSelection&&this.onLODLevelSelection(i,this,this._LODLevels[this._LODLevels.length-1].mesh),this;for(var n=0;n<this._LODLevels.length;n++){var r=this._LODLevels[n];if(r.distance<i)return r.mesh&&(r.mesh._preActivate(),r.mesh._updateSubMeshesBoundingInfo(this.worldMatrixFromCache)),this.onLODLevelSelection&&this.onLODLevelSelection(i,this,r.mesh),r.mesh}return this.onLODLevelSelection&&this.onLODLevelSelection(i,this,this),this},Object.defineProperty(n.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0}),n.prototype.getTotalVertices=function(){return null===this._geometry||void 0===this._geometry?0:this._geometry.getTotalVertices()},n.prototype.getVerticesData=function(t,e,i){return this._geometry?this._geometry.getVerticesData(t,e,i):null},n.prototype.getVertexBuffer=function(t){return this._geometry?this._geometry.getVertexBuffer(t):null},n.prototype.isVerticesDataPresent=function(t){return this._geometry?this._geometry.isVerticesDataPresent(t):!!this._delayInfo&&-1!==this._delayInfo.indexOf(t)},n.prototype.isVertexBufferUpdatable=function(t){return this._geometry?this._geometry.isVertexBufferUpdatable(t):!!this._delayInfo&&-1!==this._delayInfo.indexOf(t)},n.prototype.getVerticesDataKinds=function(){if(!this._geometry){var t=new Array;return this._delayInfo&&this._delayInfo.forEach(function(e,i,n){t.push(e)}),t}return this._geometry.getVerticesDataKinds()},n.prototype.getTotalIndices=function(){return this._geometry?this._geometry.getTotalIndices():0},n.prototype.getIndices=function(t){return this._geometry?this._geometry.getIndices(t):[]},Object.defineProperty(n.prototype,"isBlocked",{get:function(){return null!==this._masterMesh&&void 0!==this._masterMesh},enumerable:!0,configurable:!0}),n.prototype.isReady=function(e){if(void 0===e&&(e=!1),this.delayLoadState===t.Engine.DELAYLOADSTATE_LOADING)return!1;if(!i.prototype.isReady.call(this))return!1;if(!this.subMeshes||0===this.subMeshes.length)return!0;var n=this.getEngine(),r=this.getScene(),o=e||n.getCaps().instancedArrays&&this.instances.length>0;this.computeWorldMatrix();var s=this.material||r.defaultMaterial;if(s)if(s.storeEffectOnSubMeshes)for(var a=0,l=this.subMeshes;a<l.length;a++){var c=(m=l[a]).getMaterial();if(c&&!c.isReadyForSubMesh(this,m,o))return!1}else if(!s.isReady(this,o))return!1;for(var u=0,h=this._lightSources;u<h.length;u++){var p=h[u].getShadowGenerator();if(p)for(var d=0,f=this.subMeshes;d<f.length;d++){var m=f[d];if(!p.isReady(m,o))return!1}}for(var g=0,y=this._LODLevels;g<y.length;g++){var _=y[g];if(_.mesh&&!_.mesh.isReady(o))return!1}return!0},Object.defineProperty(n.prototype,"areNormalsFrozen",{get:function(){return this._areNormalsFrozen},enumerable:!0,configurable:!0}),n.prototype.freezeNormals=function(){return this._areNormalsFrozen=!0,this},n.prototype.unfreezeNormals=function(){return this._areNormalsFrozen=!1,this},Object.defineProperty(n.prototype,"overridenInstanceCount",{set:function(t){this._overridenInstanceCount=t},enumerable:!0,configurable:!0}),n.prototype._preActivate=function(){var t=this.getScene().getRenderId();return this._preActivateId===t?this:(this._preActivateId=t,this._visibleInstances=null,this)},n.prototype._preActivateForIntermediateRendering=function(t){return this._visibleInstances&&(this._visibleInstances.intermediateDefaultRenderId=t),this},n.prototype._registerInstanceForRenderId=function(t,e){return this._visibleInstances||(this._visibleInstances={},this._visibleInstances.defaultRenderId=e,this._visibleInstances.selfDefaultRenderId=this._renderId),this._visibleInstances[e]||(this._visibleInstances[e]=new Array),this._visibleInstances[e].push(t),this},n.prototype.refreshBoundingInfo=function(){return this._refreshBoundingInfo(!1)},n.prototype._refreshBoundingInfo=function(e){if(this._boundingInfo&&this._boundingInfo.isLocked)return this;var i=this._getPositionData(e);if(i){var n=t.Tools.ExtractMinAndMax(i,0,this.getTotalVertices());this._boundingInfo=new t.BoundingInfo(n.minimum,n.maximum)}if(this.subMeshes)for(var r=0;r<this.subMeshes.length;r++)this.subMeshes[r].refreshBoundingInfo();return this._updateBoundingInfo(),this},n.prototype._getPositionData=function(e){var i=this.getVerticesData(t.VertexBuffer.PositionKind);if(i&&e&&this.skeleton){i=t.Tools.Slice(i);var n=this.getVerticesData(t.VertexBuffer.MatricesIndicesKind),r=this.getVerticesData(t.VertexBuffer.MatricesWeightsKind);if(r&&n)for(var o=this.numBoneInfluencers>4,s=o?this.getVerticesData(t.VertexBuffer.MatricesIndicesExtraKind):null,a=o?this.getVerticesData(t.VertexBuffer.MatricesWeightsExtraKind):null,l=this.skeleton.getTransformMatrices(this),c=t.Tmp.Vector3[0],u=t.Tmp.Matrix[0],h=t.Tmp.Matrix[1],p=0,d=0;d<i.length;d+=3,p+=4){var f,m;for(u.reset(),f=0;f<4&&!((m=r[p+f])<=0);f++)t.Matrix.FromFloat32ArrayToRefScaled(l,16*n[p+f],m,h),u.addToSelf(h);if(o)for(f=0;f<4&&!((m=a[p+f])<=0);f++)t.Matrix.FromFloat32ArrayToRefScaled(l,16*s[p+f],m,h),u.addToSelf(h);t.Vector3.TransformCoordinatesFromFloatsToRef(i[d],i[d+1],i[d+2],u,c),c.toArray(i,d)}}return i},n.prototype._createGlobalSubMesh=function(e){var i=this.getTotalVertices();if(!i||!this.getIndices())return null;if(this.subMeshes&&this.subMeshes.length>0){var n=this.getIndices();if(!n)return null;var r=n.length,o=!1;if(e)o=!0;else for(var s=0,a=this.subMeshes;s<a.length;s++){var l=a[s];if(l.indexStart+l.indexCount>=r){o=!0;break}if(l.verticesStart+l.verticesCount>=i){o=!0;break}}if(!o)return this.subMeshes[0]}return this.releaseSubMeshes(),new t.SubMesh(0,0,i,0,this.getTotalIndices(),this)},n.prototype.subdivide=function(e){if(!(e<1)){for(var i=this.getTotalIndices(),n=i/e|0,r=0;n%3!=0;)n++;this.releaseSubMeshes();for(var o=0;o<e&&!(r>=i);o++)t.SubMesh.CreateFromIndices(0,r,Math.min(n,i-r),this),r+=n;this.synchronizeInstances()}},n.prototype.setVerticesData=function(e,i,n,r){if(void 0===n&&(n=!1),this._geometry)this._geometry.setVerticesData(e,i,n,r);else{var o=new t.VertexData;o.set(i,e);var s=this.getScene();new t.Geometry(t.Geometry.RandomId(),s,o,n,this)}return this},n.prototype.markVerticesDataAsUpdatable=function(t,e){void 0===e&&(e=!0);var i=this.getVertexBuffer(t);i&&i.isUpdatable()!==e&&this.setVerticesData(t,this.getVerticesData(t),e)},n.prototype.setVerticesBuffer=function(e){return this._geometry||(this._geometry=t.Geometry.CreateGeometryForMesh(this)),this._geometry.setVerticesBuffer(e),this},n.prototype.updateVerticesData=function(t,e,i,n){return this._geometry?(n?(this.makeGeometryUnique(),this.updateVerticesData(t,e,i,!1)):this._geometry.updateVerticesData(t,e,i),this):this},n.prototype.updateMeshPositions=function(e,i){void 0===i&&(i=!0);var n=this.getVerticesData(t.VertexBuffer.PositionKind);if(!n)return this;if(e(n),this.updateVerticesData(t.VertexBuffer.PositionKind,n,!1,!1),i){var r=this.getIndices(),o=this.getVerticesData(t.VertexBuffer.NormalKind);if(!o)return this;t.VertexData.ComputeNormals(n,r,o),this.updateVerticesData(t.VertexBuffer.NormalKind,o,!1,!1)}return this},n.prototype.makeGeometryUnique=function(){if(!this._geometry)return this;var e=this._geometry,i=this._geometry.copy(t.Geometry.RandomId());return e.releaseForMesh(this,!0),i.applyToMesh(this),this},n.prototype.setIndices=function(e,i,n){if(void 0===i&&(i=null),void 0===n&&(n=!1),this._geometry)this._geometry.setIndices(e,i,n);else{var r=new t.VertexData;r.indices=e;var o=this.getScene();new t.Geometry(t.Geometry.RandomId(),o,r,n,this)}return this},n.prototype.updateIndices=function(t,e){return this._geometry?(this._geometry.updateIndices(t,e),this):this},n.prototype.toLeftHanded=function(){return this._geometry?(this._geometry.toLeftHanded(),this):this},n.prototype._bind=function(e,i,n){if(!this._geometry)return this;var r,o=this.getScene().getEngine();if(this._unIndexed)r=null;else switch(n){case t.Material.PointFillMode:r=null;break;case t.Material.WireFrameFillMode:r=e.getLinesIndexBuffer(this.getIndices(),o);break;default:case t.Material.TriangleFillMode:r=this._unIndexed?null:this._geometry.getIndexBuffer()}return this._geometry._bind(i,r),this},n.prototype._draw=function(e,i,n,r){if(void 0===r&&(r=!1),!this._geometry||!this._geometry.getVertexBuffers()||!this._geometry.getIndexBuffer())return this;this.onBeforeDrawObservable.notifyObservers(this);var o=this.getScene(),s=o.getEngine();if(this._unIndexed||i==t.Material.PointFillMode?s.drawArraysType(i,e.verticesStart,e.verticesCount,n):i==t.Material.WireFrameFillMode?s.drawElementsType(i,0,e.linesIndexCount,n):s.drawElementsType(i,e.indexStart,e.indexCount,n),o._isAlternateRenderingEnabled&&!r){var a=e.effect||this._effectiveMaterial.getEffect();if(!a||!o.activeCamera)return this;o._switchToAlternateCameraConfiguration(!0),this._effectiveMaterial.bindView(a),this._effectiveMaterial.bindViewProjection(a),s.setViewport(o.activeCamera._alternateCamera.viewport),this._draw(e,i,n,!0),s.setViewport(o.activeCamera.viewport),o._switchToAlternateCameraConfiguration(!1),this._effectiveMaterial.bindView(a),this._effectiveMaterial.bindViewProjection(a)}return this},n.prototype.registerBeforeRender=function(t){return this.onBeforeRenderObservable.add(t),this},n.prototype.unregisterBeforeRender=function(t){return this.onBeforeRenderObservable.removeCallback(t),this},n.prototype.registerAfterRender=function(t){return this.onAfterRenderObservable.add(t),this},n.prototype.unregisterAfterRender=function(t){return this.onAfterRenderObservable.removeCallback(t),this},n.prototype._getInstancesRenderList=function(t){var e=this.getScene();if(this._batchCache.mustReturn=!1,this._batchCache.renderSelf[t]=this.isEnabled()&&this.isVisible,this._batchCache.visibleInstances[t]=null,this._visibleInstances){var i=e.getRenderId(),n=e._isInIntermediateRendering()?this._visibleInstances.intermediateDefaultRenderId:this._visibleInstances.defaultRenderId;this._batchCache.visibleInstances[t]=this._visibleInstances[i];var r=this._renderId;!this._batchCache.visibleInstances[t]&&n&&(this._batchCache.visibleInstances[t]=this._visibleInstances[n],i=Math.max(n,i),r=Math.max(this._visibleInstances.selfDefaultRenderId,i));var o=this._batchCache.visibleInstances[t];if(o&&o.length){if(this._renderIdForInstances[t]===i)return this._batchCache.mustReturn=!0,this._batchCache;i!==r&&(this._batchCache.renderSelf[t]=!1)}this._renderIdForInstances[t]=i}return this._batchCache},n.prototype._renderWithInstances=function(e,i,n,r,o){var s=n.visibleInstances[e._id];if(!s)return this;for(var a=16*(s.length+1)*4,l=this._instancesBufferSize,c=this._instancesBuffer;this._instancesBufferSize<a;)this._instancesBufferSize*=2;this._instancesData&&l==this._instancesBufferSize||(this._instancesData=new Float32Array(this._instancesBufferSize/4));var u=0,h=0,p=this.getWorldMatrix();if(n.renderSelf[e._id]&&(p.copyToArray(this._instancesData,u),u+=16,h++),s)for(var d=0;d<s.length;d++){s[d].getWorldMatrix().copyToArray(this._instancesData,u),u+=16,h++}return c&&l==this._instancesBufferSize?c.updateDirectly(this._instancesData,0,h):(c&&c.dispose(),c=new t.Buffer(o,this._instancesData,!0,16,!1,!0),this._instancesBuffer=c,this.setVerticesBuffer(c.createVertexBuffer("world0",0,4)),this.setVerticesBuffer(c.createVertexBuffer("world1",4,4)),this.setVerticesBuffer(c.createVertexBuffer("world2",8,4)),this.setVerticesBuffer(c.createVertexBuffer("world3",12,4))),this._bind(e,r,i),this._draw(e,i,h),o.unbindInstanceAttributes(),this},n.prototype._processRendering=function(t,e,i,n,r,o,s){var a=this.getScene().getEngine();if(r)this._renderWithInstances(t,i,n,e,a);else{n.renderSelf[t._id]&&(o&&o(!1,this.getWorldMatrix(),s),this._draw(t,i,this._overridenInstanceCount));var l=n.visibleInstances[t._id];if(l)for(var c=0;c<l.length;c++){var u=l[c].getWorldMatrix();o&&o(!0,u,s),this._draw(t,i)}}return this},n.prototype.render=function(e,i){if(this.checkOcclusionQuery(),this._isOccluded)return this;var n=this.getScene(),r=this._getInstancesRenderList(e._id);if(r.mustReturn)return this;if(!this._geometry||!this._geometry.getVertexBuffers()||!this._geometry.getIndexBuffer())return this;this.onBeforeRenderObservable.notifyObservers(this);var o=n.getEngine(),s=o.getCaps().instancedArrays&&null!==r.visibleInstances[e._id]&&void 0!==r.visibleInstances[e._id],a=e.getMaterial();if(!a)return this;if(this._effectiveMaterial=a,this._effectiveMaterial.storeEffectOnSubMeshes){if(!this._effectiveMaterial.isReadyForSubMesh(this,e,s))return this}else if(!this._effectiveMaterial.isReady(this,s))return this;i&&o.setAlphaMode(this._effectiveMaterial.alphaMode);var l,c=o.getDepthWrite();if(this.renderOutline&&(o.setDepthWrite(!1),n.getOutlineRenderer().render(e,r),o.setDepthWrite(c)),!(l=this._effectiveMaterial.storeEffectOnSubMeshes?e.effect:this._effectiveMaterial.getEffect()))return this;var u=this.overrideMaterialSideOrientation;null==u&&(u=this._effectiveMaterial.sideOrientation,this._getWorldMatrixDeterminant()<0&&(u=u===t.Material.ClockWiseSideOrientation?t.Material.CounterClockWiseSideOrientation:t.Material.ClockWiseSideOrientation));var h=this._effectiveMaterial._preBind(l,u);this._effectiveMaterial.forceDepthWrite&&o.setDepthWrite(!0);var p=n.forcePointsCloud?t.Material.PointFillMode:n.forceWireframe?t.Material.WireFrameFillMode:this._effectiveMaterial.fillMode;s||this._bind(e,l,p);var d=this.getWorldMatrix();if(this._effectiveMaterial.storeEffectOnSubMeshes?this._effectiveMaterial.bindForSubMesh(d,this,e):this._effectiveMaterial.bind(d,this),!this._effectiveMaterial.backFaceCulling&&this._effectiveMaterial.separateCullingPass&&(o.setState(!0,this._effectiveMaterial.zOffset,!1,!h),this._processRendering(e,l,p,r,s,this._onBeforeDraw,this._effectiveMaterial),o.setState(!0,this._effectiveMaterial.zOffset,!1,h)),this._processRendering(e,l,p,r,s,this._onBeforeDraw,this._effectiveMaterial),this._effectiveMaterial.unbind(),this.renderOutline&&c&&(o.setDepthWrite(!0),o.setColorWrite(!1),n.getOutlineRenderer().render(e,r),o.setColorWrite(!0)),this.renderOverlay){var f=o.getAlphaMode();o.setAlphaMode(t.Engine.ALPHA_COMBINE),n.getOutlineRenderer().render(e,r,!0),o.setAlphaMode(f)}return this.onAfterRenderObservable.notifyObservers(this),this},n.prototype._onBeforeDraw=function(t,e,i){t&&i&&i.bindOnlyWorldMatrix(e)},n.prototype.getEmittedParticleSystems=function(){for(var t=new Array,e=0;e<this.getScene().particleSystems.length;e++){var i=this.getScene().particleSystems[e];i.emitter===this&&t.push(i)}return t},n.prototype.getHierarchyEmittedParticleSystems=function(){var t=new Array,e=this.getDescendants();e.push(this);for(var i=0;i<this.getScene().particleSystems.length;i++){var n=this.getScene().particleSystems[i],r=n.emitter;r.position&&-1!==e.indexOf(r)&&t.push(n)}return t},n.prototype._checkDelayState=function(){var e=this.getScene();return this._geometry?this._geometry.load(e):this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADING,this._queueLoad(e)),this},n.prototype._queueLoad=function(e){var i=this;e._addPendingData(this);var n=-1!==this.delayLoadingFile.indexOf(".babylonbinarymeshdata");return t.Tools.LoadFile(this.delayLoadingFile,function(n){n instanceof ArrayBuffer?i._delayLoadingFunction(n,i):i._delayLoadingFunction(JSON.parse(n),i),i.instances.forEach(function(t){t._syncSubMeshes()}),i.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,e._removePendingData(i)},function(){},e.database,n),this},n.prototype.isInFrustum=function(e){return this.delayLoadState!==t.Engine.DELAYLOADSTATE_LOADING&&!!i.prototype.isInFrustum.call(this,e)&&(this._checkDelayState(),!0)},n.prototype.setMaterialByID=function(t){var e,i=this.getScene().materials;for(e=i.length-1;e>-1;e--)if(i[e].id===t)return this.material=i[e],this;var n=this.getScene().multiMaterials;for(e=n.length-1;e>-1;e--)if(n[e].id===t)return this.material=n[e],this;return this},n.prototype.getAnimatables=function(){var t=new Array;return this.material&&t.push(this.material),this.skeleton&&t.push(this.skeleton),t},n.prototype.bakeTransformIntoVertices=function(e){if(!this.isVerticesDataPresent(t.VertexBuffer.PositionKind))return this;var i=this.subMeshes.splice(0);this._resetPointsArrayCache();var n,r=this.getVerticesData(t.VertexBuffer.PositionKind),o=new Array;for(n=0;n<r.length;n+=3)t.Vector3.TransformCoordinates(t.Vector3.FromArray(r,n),e).toArray(o,n);if(this.setVerticesData(t.VertexBuffer.PositionKind,o,this.getVertexBuffer(t.VertexBuffer.PositionKind).isUpdatable()),!this.isVerticesDataPresent(t.VertexBuffer.NormalKind))return this;for(r=this.getVerticesData(t.VertexBuffer.NormalKind),o=[],n=0;n<r.length;n+=3)t.Vector3.TransformNormal(t.Vector3.FromArray(r,n),e).normalize().toArray(o,n);return this.setVerticesData(t.VertexBuffer.NormalKind,o,this.getVertexBuffer(t.VertexBuffer.NormalKind).isUpdatable()),e.m[0]*e.m[5]*e.m[10]<0&&this.flipFaces(),this.releaseSubMeshes(),this.subMeshes=i,this},n.prototype.bakeCurrentTransformIntoVertices=function(){return this.bakeTransformIntoVertices(this.computeWorldMatrix(!0)),this.scaling.copyFromFloats(1,1,1),this.position.copyFromFloats(0,0,0),this.rotation.copyFromFloats(0,0,0),this.rotationQuaternion&&(this.rotationQuaternion=t.Quaternion.Identity()),this._worldMatrix=t.Matrix.Identity(),this},Object.defineProperty(n.prototype,"_positions",{get:function(){return this._geometry?this._geometry._positions:null},enumerable:!0,configurable:!0}),n.prototype._resetPointsArrayCache=function(){return this._geometry&&this._geometry._resetPointsArrayCache(),this},n.prototype._generatePointsArray=function(){return!!this._geometry&&this._geometry._generatePointsArray()},n.prototype.clone=function(t,e,i,r){return void 0===r&&(r=!0),new n(t,this.getScene(),e,this,i,r)},n.prototype.dispose=function(t,e){var n=this;for(void 0===e&&(e=!1),this.morphTargetManager=null,this._geometry&&this._geometry.releaseForMesh(this,!0),this.getScene().meshes.forEach(function(t){var e=t;e._source&&e._source===n&&(e._source=null)}),this._source=null,this._instancesBuffer&&(this._instancesBuffer.dispose(),this._instancesBuffer=null);this.instances.length;)this.instances[0].dispose();for(var r=this.getScene().highlightLayers,o=0;o<r.length;o++){var s=r[o];s&&(s.removeMesh(this),s.removeExcludedMesh(this))}i.prototype.dispose.call(this,t,e)},n.prototype.applyDisplacementMap=function(e,i,n,r,o,s){var a=this,l=this.getScene();return t.Tools.LoadImage(e,function(t){var e=document.createElement("canvas"),l=e.getContext("2d"),c=t.width,u=t.height;e.width=c,e.height=u,l.drawImage(t,0,0);var h=l.getImageData(0,0,c,u).data;a.applyDisplacementMapFromBuffer(h,c,u,i,n,o,s),r&&r(a)},function(){},l.database),this},n.prototype.applyDisplacementMapFromBuffer=function(e,i,n,r,o,s,a){if(!this.isVerticesDataPresent(t.VertexBuffer.PositionKind)||!this.isVerticesDataPresent(t.VertexBuffer.NormalKind)||!this.isVerticesDataPresent(t.VertexBuffer.UVKind))return t.Tools.Warn("Cannot call applyDisplacementMap: Given mesh is not complete. Position, Normal or UV are missing"),this;var l=this.getVerticesData(t.VertexBuffer.PositionKind),c=this.getVerticesData(t.VertexBuffer.NormalKind),u=this.getVerticesData(t.VertexBuffer.UVKind),h=t.Vector3.Zero(),p=t.Vector3.Zero(),d=t.Vector2.Zero();s=s||t.Vector2.Zero(),a=a||new t.Vector2(1,1);for(var f=0;f<l.length;f+=3){t.Vector3.FromArrayToRef(l,f,h),t.Vector3.FromArrayToRef(c,f,p),t.Vector2.FromArrayToRef(u,f/3*2,d);var m=4*((Math.abs(d.x*a.x+s.x)*i%i|0)+(Math.abs(d.y*a.y+s.y)*n%n|0)*i),g=.3*(e[m]/255)+.59*(e[m+1]/255)+.11*(e[m+2]/255);p.normalize(),p.scaleInPlace(r+(o-r)*g),(h=h.add(p)).toArray(l,f)}return t.VertexData.ComputeNormals(l,this.getIndices(),c),this.updateVerticesData(t.VertexBuffer.PositionKind,l),this.updateVerticesData(t.VertexBuffer.NormalKind,c),this},n.prototype.convertToFlatShadedMesh=function(){var e,i,n=this.getVerticesDataKinds(),r={},o={},s={},a=!1;for(e=0;e<n.length;e++){i=n[e];var l=this.getVertexBuffer(i);i!==t.VertexBuffer.NormalKind?(r[i]=l,o[i]=r[i].getData(),s[i]=[]):(a=l.isUpdatable(),n.splice(e,1),e--)}var c,u=this.subMeshes.slice(0),h=this.getIndices(),p=this.getTotalIndices();for(c=0;c<p;c++){var d=h[c];for(e=0;e<n.length;e++)for(var f=r[i=n[e]].getStrideSize(),m=0;m<f;m++)s[i].push(o[i][d*f+m])}var g=[],y=s[t.VertexBuffer.PositionKind];for(c=0;c<p;c+=3){h[c]=c,h[c+1]=c+1,h[c+2]=c+2;for(var _=t.Vector3.FromArray(y,3*c),v=t.Vector3.FromArray(y,3*(c+1)),b=t.Vector3.FromArray(y,3*(c+2)),x=_.subtract(v),A=b.subtract(v),w=t.Vector3.Normalize(t.Vector3.Cross(x,A)),P=0;P<3;P++)g.push(w.x),g.push(w.y),g.push(w.z)}for(this.setIndices(h),this.setVerticesData(t.VertexBuffer.NormalKind,g,a),e=0;e<n.length;e++)i=n[e],this.setVerticesData(i,s[i],r[i].isUpdatable());this.releaseSubMeshes();for(var E=0;E<u.length;E++){var T=u[E];t.SubMesh.AddToMesh(T.materialIndex,T.indexStart,T.indexCount,T.indexStart,T.indexCount,this)}return this.synchronizeInstances(),this},n.prototype.convertToUnIndexedMesh=function(){var e,i,n=this.getVerticesDataKinds(),r={},o={},s={};for(e=0;e<n.length;e++){i=n[e];var a=this.getVertexBuffer(i);r[i]=a,o[i]=r[i].getData(),s[i]=[]}var l,c=this.subMeshes.slice(0),u=this.getIndices(),h=this.getTotalIndices();for(l=0;l<h;l++){var p=u[l];for(e=0;e<n.length;e++)for(var d=r[i=n[e]].getStrideSize(),f=0;f<d;f++)s[i].push(o[i][p*d+f])}for(l=0;l<h;l+=3)u[l]=l,u[l+1]=l+1,u[l+2]=l+2;for(this.setIndices(u),e=0;e<n.length;e++)i=n[e],this.setVerticesData(i,s[i],r[i].isUpdatable());this.releaseSubMeshes();for(var m=0;m<c.length;m++){var g=c[m];t.SubMesh.AddToMesh(g.materialIndex,g.indexStart,g.indexCount,g.indexStart,g.indexCount,this)}return this._unIndexed=!0,this.synchronizeInstances(),this},n.prototype.flipFaces=function(e){void 0===e&&(e=!1);var i,n,r=t.VertexData.ExtractFromMesh(this);if(e&&this.isVerticesDataPresent(t.VertexBuffer.NormalKind)&&r.normals)for(i=0;i<r.normals.length;i++)r.normals[i]*=-1;if(r.indices)for(i=0;i<r.indices.length;i+=3)n=r.indices[i+1],r.indices[i+1]=r.indices[i+2],r.indices[i+2]=n;return r.applyToMesh(this),this},n.prototype.createInstance=function(e){return new t.InstancedMesh(e,this)},n.prototype.synchronizeInstances=function(){for(var t=0;t<this.instances.length;t++)this.instances[t]._syncSubMeshes();return this},n.prototype.simplify=function(e,i,n,r){return void 0===i&&(i=!0),void 0===n&&(n=t.SimplificationType.QUADRATIC),this.getScene().simplificationQueue.addTask({settings:e,parallelProcessing:i,mesh:this,simplificationType:n,successCallback:r}),this},n.prototype.optimizeIndices=function(e){var i=this,n=this.getIndices(),r=this.getVerticesData(t.VertexBuffer.PositionKind);if(!r||!n)return this;for(var o=new Array,s=0;s<r.length;s+=3)o.push(t.Vector3.FromArray(r,s));var a=new Array;return t.AsyncLoop.SyncAsyncForLoop(o.length,40,function(t){for(var e=o.length-1-t,i=o[e],n=0;n<e;++n){var r=o[n];if(i.equals(r)){a[e]=n;break}}},function(){for(var t=0;t<n.length;++t)n[t]=a[n[t]]||n[t];var r=i.subMeshes.slice(0);i.setIndices(n),i.subMeshes=r,e&&e(i)}),this},n.prototype.serialize=function(e){e.name=this.name,e.id=this.id,e.type=this.getClassName(),t.Tags&&t.Tags.HasTags(this)&&(e.tags=t.Tags.GetTags(this)),e.position=this.position.asArray(),this.rotationQuaternion?e.rotationQuaternion=this.rotationQuaternion.asArray():this.rotation&&(e.rotation=this.rotation.asArray()),e.scaling=this.scaling.asArray(),e.localMatrix=this.getPivotMatrix().asArray(),e.isEnabled=this.isEnabled(!1),e.isVisible=this.isVisible,e.infiniteDistance=this.infiniteDistance,e.pickable=this.isPickable,e.receiveShadows=this.receiveShadows,e.billboardMode=this.billboardMode,e.visibility=this.visibility,e.checkCollisions=this.checkCollisions,e.isBlocker=this.isBlocker,this.parent&&(e.parentId=this.parent.id),e.isUnIndexed=this.isUnIndexed;var i=this._geometry;if(i){var n=i.id;e.geometryId=n,e.subMeshes=[];for(var r=0;r<this.subMeshes.length;r++){var o=this.subMeshes[r];e.subMeshes.push({materialIndex:o.materialIndex,verticesStart:o.verticesStart,verticesCount:o.verticesCount,indexStart:o.indexStart,indexCount:o.indexCount})}}this.material?e.materialId=this.material.id:this.material=null,this.morphTargetManager&&(e.morphTargetManagerId=this.morphTargetManager.uniqueId),this.skeleton&&(e.skeletonId=this.skeleton.id);var s=this.getPhysicsImpostor();s&&(e.physicsMass=s.getParam("mass"),e.physicsFriction=s.getParam("friction"),e.physicsRestitution=s.getParam("mass"),e.physicsImpostor=s.type),this.metadata&&(e.metadata=this.metadata),e.instances=[];for(var a=0;a<this.instances.length;a++){var l=this.instances[a],c={name:l.name,id:l.id,position:l.position.asArray(),scaling:l.scaling.asArray()};l.rotationQuaternion?c.rotationQuaternion=l.rotationQuaternion.asArray():l.rotation&&(c.rotation=l.rotation.asArray()),e.instances.push(c),t.Animation.AppendSerializedAnimations(l,c),c.ranges=l.serializeAnimationRanges()}t.Animation.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e.layerMask=this.layerMask,e.alphaIndex=this.alphaIndex,e.hasVertexAlpha=this.hasVertexAlpha,e.overlayAlpha=this.overlayAlpha,e.overlayColor=this.overlayColor.asArray(),e.renderOverlay=this.renderOverlay,e.applyFog=this.applyFog,this.actionManager&&(e.actions=this.actionManager.serialize(this.name))},n.prototype._syncGeometryWithMorphTargetManager=function(){if(this.geometry){this._markSubMeshesAsAttributesDirty();var e=this._morphTargetManager;if(e&&e.vertexCount){if(e.vertexCount!==this.getTotalVertices())return t.Tools.Error("Mesh is incompatible with morph targets. Targets and mesh must all have the same vertices count."),void(this.morphTargetManager=null);for(var i=0;i<e.numInfluencers;i++){var n=e.getActiveTarget(i),r=n.getPositions();if(!r)return void t.Tools.Error("Invalid morph target. Target must have positions.");this.geometry.setVerticesData(t.VertexBuffer.PositionKind+i,r,!1,3);var o=n.getNormals();o&&this.geometry.setVerticesData(t.VertexBuffer.NormalKind+i,o,!1,3);var s=n.getTangents();s&&this.geometry.setVerticesData(t.VertexBuffer.TangentKind+i,s,!1,3)}}else for(i=0;this.geometry.isVerticesDataPresent(t.VertexBuffer.PositionKind+i);)this.geometry.removeVerticesData(t.VertexBuffer.PositionKind+i),this.geometry.isVerticesDataPresent(t.VertexBuffer.NormalKind+i)&&this.geometry.removeVerticesData(t.VertexBuffer.NormalKind+i),this.geometry.isVerticesDataPresent(t.VertexBuffer.TangentKind+i)&&this.geometry.removeVerticesData(t.VertexBuffer.TangentKind+i),i++}},n.Parse=function(e,i,r){var o;if((o=e.type&&"GroundMesh"===e.type?t.GroundMesh.Parse(e,i):new n(e.name,i)).id=e.id,t.Tags&&t.Tags.AddTagsTo(o,e.tags),o.position=t.Vector3.FromArray(e.position),void 0!==e.metadata&&(o.metadata=e.metadata),e.rotationQuaternion?o.rotationQuaternion=t.Quaternion.FromArray(e.rotationQuaternion):e.rotation&&(o.rotation=t.Vector3.FromArray(e.rotation)),o.scaling=t.Vector3.FromArray(e.scaling),e.localMatrix?o.setPreTransformMatrix(t.Matrix.FromArray(e.localMatrix)):e.pivotMatrix&&o.setPivotMatrix(t.Matrix.FromArray(e.pivotMatrix)),o.setEnabled(e.isEnabled),o.isVisible=e.isVisible,o.infiniteDistance=e.infiniteDistance,o.showBoundingBox=e.showBoundingBox,o.showSubMeshesBoundingBox=e.showSubMeshesBoundingBox,void 0!==e.applyFog&&(o.applyFog=e.applyFog),void 0!==e.pickable&&(o.isPickable=e.pickable),void 0!==e.alphaIndex&&(o.alphaIndex=e.alphaIndex),o.receiveShadows=e.receiveShadows,o.billboardMode=e.billboardMode,void 0!==e.visibility&&(o.visibility=e.visibility),o.checkCollisions=e.checkCollisions,void 0!==e.isBlocker&&(o.isBlocker=e.isBlocker),o._shouldGenerateFlatShading=e.useFlatShading,e.freezeWorldMatrix&&(o._waitingFreezeWorldMatrix=e.freezeWorldMatrix),e.parentId&&(o._waitingParentId=e.parentId),void 0!==e.actions&&(o._waitingActions=e.actions),void 0!==e.overlayAlpha&&(o.overlayAlpha=e.overlayAlpha),void 0!==e.overlayColor&&(o.overlayColor=t.Color3.FromArray(e.overlayColor)),void 0!==e.renderOverlay&&(o.renderOverlay=e.renderOverlay),o.isUnIndexed=!!e.isUnIndexed,o.hasVertexAlpha=e.hasVertexAlpha,e.delayLoadingFile?(o.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED,o.delayLoadingFile=r+e.delayLoadingFile,o._boundingInfo=new t.BoundingInfo(t.Vector3.FromArray(e.boundingBoxMinimum),t.Vector3.FromArray(e.boundingBoxMaximum)),e._binaryInfo&&(o._binaryInfo=e._binaryInfo),o._delayInfo=[],e.hasUVs&&o._delayInfo.push(t.VertexBuffer.UVKind),e.hasUVs2&&o._delayInfo.push(t.VertexBuffer.UV2Kind),e.hasUVs3&&o._delayInfo.push(t.VertexBuffer.UV3Kind),e.hasUVs4&&o._delayInfo.push(t.VertexBuffer.UV4Kind),e.hasUVs5&&o._delayInfo.push(t.VertexBuffer.UV5Kind),e.hasUVs6&&o._delayInfo.push(t.VertexBuffer.UV6Kind),e.hasColors&&o._delayInfo.push(t.VertexBuffer.ColorKind),e.hasMatricesIndices&&o._delayInfo.push(t.VertexBuffer.MatricesIndicesKind),e.hasMatricesWeights&&o._delayInfo.push(t.VertexBuffer.MatricesWeightsKind),o._delayLoadingFunction=t.Geometry._ImportGeometry,t.SceneLoader.ForceFullSceneLoadingForIncremental&&o._checkDelayState()):t.Geometry._ImportGeometry(e,o),e.materialId?o.setMaterialByID(e.materialId):o.material=null,e.morphTargetManagerId>-1&&(o.morphTargetManager=i.getMorphTargetManagerById(e.morphTargetManagerId)),e.skeletonId>-1&&(o.skeleton=i.getLastSkeletonByID(e.skeletonId),e.numBoneInfluencers&&(o.numBoneInfluencers=e.numBoneInfluencers)),e.animations){for(var s=0;s<e.animations.length;s++){var a=e.animations[s];o.animations.push(t.Animation.Parse(a))}t.Node.ParseAnimationRanges(o,e,i)}if(e.autoAnimate&&i.beginAnimation(o,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),e.layerMask&&!isNaN(e.layerMask)?o.layerMask=Math.abs(parseInt(e.layerMask)):o.layerMask=268435455,e.physicsImpostor&&(o.physicsImpostor=new t.PhysicsImpostor(o,e.physicsImpostor,{mass:e.physicsMass,friction:e.physicsFriction,restitution:e.physicsRestitution},i)),e.instances)for(var l=0;l<e.instances.length;l++){var c=e.instances[l],u=o.createInstance(c.name);if(c.id&&(u.id=c.id),t.Tags&&t.Tags.AddTagsTo(u,c.tags),u.position=t.Vector3.FromArray(c.position),c.parentId&&(u._waitingParentId=c.parentId),c.rotationQuaternion?u.rotationQuaternion=t.Quaternion.FromArray(c.rotationQuaternion):c.rotation&&(u.rotation=t.Vector3.FromArray(c.rotation)),u.scaling=t.Vector3.FromArray(c.scaling),u.checkCollisions=o.checkCollisions,e.animations){for(s=0;s<e.animations.length;s++)a=e.animations[s],u.animations.push(t.Animation.Parse(a));t.Node.ParseAnimationRanges(u,e,i)}}return o},n.CreateRibbon=function(e,i,n,r,o,s,a,l,c){return void 0===n&&(n=!1),void 0===a&&(a=!1),t.MeshBuilder.CreateRibbon(e,{pathArray:i,closeArray:n,closePath:r,offset:o,updatable:a,sideOrientation:l,instance:c},s)},n.CreateDisc=function(e,i,n,r,o,s){void 0===r&&(r=null);var a={radius:i,tessellation:n,sideOrientation:s,updatable:o};return t.MeshBuilder.CreateDisc(e,a,r)},n.CreateBox=function(e,i,n,r,o){void 0===n&&(n=null);var s={size:i,sideOrientation:o,updatable:r};return t.MeshBuilder.CreateBox(e,s,n)},n.CreateSphere=function(e,i,n,r,o,s){var a={segments:i,diameterX:n,diameterY:n,diameterZ:n,sideOrientation:s,updatable:o};return t.MeshBuilder.CreateSphere(e,a,r)},n.CreateCylinder=function(e,i,r,o,s,a,l,c,u){void 0!==l&&l instanceof t.Scene||(void 0!==l&&(u=c||n.DEFAULTSIDE,c=l),l=a,a=1);var h={height:i,diameterTop:r,diameterBottom:o,tessellation:s,subdivisions:a,sideOrientation:u,updatable:c};return t.MeshBuilder.CreateCylinder(e,h,l)},n.CreateTorus=function(e,i,n,r,o,s,a){var l={diameter:i,thickness:n,tessellation:r,sideOrientation:a,updatable:s};return t.MeshBuilder.CreateTorus(e,l,o)},n.CreateTorusKnot=function(e,i,n,r,o,s,a,l,c,u){var h={radius:i,tube:n,radialSegments:r,tubularSegments:o,p:s,q:a,sideOrientation:u,updatable:c};return t.MeshBuilder.CreateTorusKnot(e,h,l)},n.CreateLines=function(e,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===o&&(o=null);var s={points:i,updatable:r,instance:o};return t.MeshBuilder.CreateLines(e,s,n)},n.CreateDashedLines=function(e,i,n,r,o,s,a,l){void 0===s&&(s=null);var c={points:i,dashSize:n,gapSize:r,dashNb:o,updatable:a,instance:l};return t.MeshBuilder.CreateDashedLines(e,c,s)},n.CreatePolygon=function(e,i,n,r,o,s){var a={shape:i,holes:r,updatable:o,sideOrientation:s};return t.MeshBuilder.CreatePolygon(e,a,n)},n.ExtrudePolygon=function(e,i,n,r,o,s,a){var l={shape:i,holes:o,depth:n,updatable:s,sideOrientation:a};return t.MeshBuilder.ExtrudePolygon(e,l,r)},n.ExtrudeShape=function(e,i,r,o,s,a,l,c,u,h){void 0===l&&(l=null);var p={shape:i,path:r,scale:o,rotation:s,cap:0===a?0:a||n.NO_CAP,sideOrientation:u,instance:h,updatable:c};return t.MeshBuilder.ExtrudeShape(e,p,l)},n.ExtrudeShapeCustom=function(e,i,r,o,s,a,l,c,u,h,p,d){var f={shape:i,path:r,scaleFunction:o,rotationFunction:s,ribbonCloseArray:a,ribbonClosePath:l,cap:0===c?0:c||n.NO_CAP,sideOrientation:p,instance:d,updatable:h};return t.MeshBuilder.ExtrudeShapeCustom(e,f,u)},n.CreateLathe=function(e,i,n,r,o,s,a){var l={shape:i,radius:n,tessellation:r,sideOrientation:a,updatable:s};return t.MeshBuilder.CreateLathe(e,l,o)},n.CreatePlane=function(e,i,n,r,o){var s={size:i,width:i,height:i,sideOrientation:o,updatable:r};return t.MeshBuilder.CreatePlane(e,s,n)},n.CreateGround=function(e,i,n,r,o,s){var a={width:i,height:n,subdivisions:r,updatable:s};return t.MeshBuilder.CreateGround(e,a,o)},n.CreateTiledGround=function(e,i,n,r,o,s,a,l,c){var u={xmin:i,zmin:n,xmax:r,zmax:o,subdivisions:s,precision:a,updatable:c};return t.MeshBuilder.CreateTiledGround(e,u,l)},n.CreateGroundFromHeightMap=function(e,i,n,r,o,s,a,l,c,u){var h={width:n,height:r,subdivisions:o,minHeight:s,maxHeight:a,updatable:c,onReady:u};return t.MeshBuilder.CreateGroundFromHeightMap(e,i,h,l)},n.CreateTube=function(e,i,n,r,o,s,a,l,c,u){var h={path:i,radius:n,tessellation:r,radiusFunction:o,arc:1,cap:s,updatable:l,sideOrientation:c,instance:u};return t.MeshBuilder.CreateTube(e,h,a)},n.CreatePolyhedron=function(e,i,n){return t.MeshBuilder.CreatePolyhedron(e,i,n)},n.CreateIcoSphere=function(e,i,n){return t.MeshBuilder.CreateIcoSphere(e,i,n)},n.CreateDecal=function(e,i,n,r,o,s){var a={position:n,normal:r,size:o,angle:s};return t.MeshBuilder.CreateDecal(e,i,a)},n.prototype.setPositionsForCPUSkinning=function(){if(!this._sourcePositions){var e=this.getVerticesData(t.VertexBuffer.PositionKind);if(!e)return this._sourcePositions;this._sourcePositions=new Float32Array(e),this.isVertexBufferUpdatable(t.VertexBuffer.PositionKind)||this.setVerticesData(t.VertexBuffer.PositionKind,e,!0)}return this._sourcePositions},n.prototype.setNormalsForCPUSkinning=function(){if(!this._sourceNormals){var e=this.getVerticesData(t.VertexBuffer.NormalKind);if(!e)return this._sourceNormals;this._sourceNormals=new Float32Array(e),this.isVertexBufferUpdatable(t.VertexBuffer.NormalKind)||this.setVerticesData(t.VertexBuffer.NormalKind,e,!0)}return this._sourceNormals},n.prototype.applySkeleton=function(e){if(!this.geometry)return this;if(this.geometry._softwareSkinningRenderId==this.getScene().getRenderId())return this;if(this.geometry._softwareSkinningRenderId=this.getScene().getRenderId(),!this.isVerticesDataPresent(t.VertexBuffer.PositionKind))return this;if(!this.isVerticesDataPresent(t.VertexBuffer.NormalKind))return this;if(!this.isVerticesDataPresent(t.VertexBuffer.MatricesIndicesKind))return this;if(!this.isVerticesDataPresent(t.VertexBuffer.MatricesWeightsKind))return this;if(!this._sourcePositions){var i=this.subMeshes.slice();this.setPositionsForCPUSkinning(),this.subMeshes=i}this._sourceNormals||this.setNormalsForCPUSkinning();var n=this.getVerticesData(t.VertexBuffer.PositionKind);if(!n)return this;n instanceof Float32Array||(n=new Float32Array(n));var r=this.getVerticesData(t.VertexBuffer.NormalKind);if(!r)return this;r instanceof Float32Array||(r=new Float32Array(r));var o=this.getVerticesData(t.VertexBuffer.MatricesIndicesKind),s=this.getVerticesData(t.VertexBuffer.MatricesWeightsKind);if(!s||!o)return this;for(var a,l=this.numBoneInfluencers>4,c=l?this.getVerticesData(t.VertexBuffer.MatricesIndicesExtraKind):null,u=l?this.getVerticesData(t.VertexBuffer.MatricesWeightsExtraKind):null,h=e.getTransformMatrices(this),p=t.Vector3.Zero(),d=new t.Matrix,f=new t.Matrix,m=0,g=0;g<n.length;g+=3,m+=4){var y;for(a=0;a<4&&(y=s[m+a])>0;a++)t.Matrix.FromFloat32ArrayToRefScaled(h,16*o[m+a],y,f),d.addToSelf(f);if(l)for(a=0;a<4&&(y=u[m+a])>0;a++)t.Matrix.FromFloat32ArrayToRefScaled(h,16*c[m+a],y,f),d.addToSelf(f);t.Vector3.TransformCoordinatesFromFloatsToRef(this._sourcePositions[g],this._sourcePositions[g+1],this._sourcePositions[g+2],d,p),p.toArray(n,g),t.Vector3.TransformNormalFromFloatsToRef(this._sourceNormals[g],this._sourceNormals[g+1],this._sourceNormals[g+2],d,p),p.toArray(r,g),d.reset()}return this.updateVerticesData(t.VertexBuffer.PositionKind,n),this.updateVerticesData(t.VertexBuffer.NormalKind,r),this},n.MinMax=function(e){var i=null,n=null;return e.forEach(function(t,e,r){var o=t.getBoundingInfo().boundingBox;i&&n?(i.minimizeInPlace(o.minimumWorld),n.maximizeInPlace(o.maximumWorld)):(i=o.minimumWorld,n=o.maximumWorld)}),i&&n?{min:i,max:n}:{min:t.Vector3.Zero(),max:t.Vector3.Zero()}},n.Center=function(e){var i=e instanceof Array?n.MinMax(e):e;return t.Vector3.Center(i.min,i.max)},n.MergeMeshes=function(e,i,r,o,s){var a;if(void 0===i&&(i=!0),!r){var l=0;for(a=0;a<e.length;a++)if(e[a]&&(l+=e[a].getTotalVertices())>65536)return t.Tools.Warn("Cannot merge meshes because resulting mesh will have more than 65536 vertices. Please use allow32BitsIndices = true to use 32 bits indices"),null}var c,u=null,h=new Array,p=null;for(a=0;a<e.length;a++)e[a]&&(e[a].computeWorldMatrix(!0),(c=t.VertexData.ExtractFromMesh(e[a],!0)).transform(e[a].getWorldMatrix()),u?u.merge(c):(u=c,p=e[a]),s&&h.push(e[a].getTotalIndices()));if(p=p,o||(o=new n(p.name+"_merged",p.getScene())),u.applyToMesh(o),o.material=p.material,o.checkCollisions=p.checkCollisions,i)for(a=0;a<e.length;a++)e[a]&&e[a].dispose();if(s){o.releaseSubMeshes(),a=0;for(var d=0;a<h.length;)t.SubMesh.CreateFromIndices(0,d,h[a],o),d+=h[a],a++}return o},n._FRONTSIDE=0,n._BACKSIDE=1,n._DOUBLESIDE=2,n._DEFAULTSIDE=0,n._NO_CAP=0,n._CAP_START=1,n._CAP_END=2,n._CAP_ALL=3,n}(t.AbstractMesh);t.Mesh=i}(l||(l={})),function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"effect",{get:function(){return this._materialEffect},enumerable:!0,configurable:!0}),t.prototype.setEffect=function(t,e){void 0===e&&(e=null),this._materialEffect!==t?(this._materialDefines=e,this._materialEffect=t):t||(this._materialDefines=null)},t}();t.BaseSubMesh=e;var i=function(e){function i(t,i,n,r,o,s,a,l){void 0===l&&(l=!0);var c=e.call(this)||this;return c.materialIndex=t,c.verticesStart=i,c.verticesCount=n,c.indexStart=r,c.indexCount=o,c._renderId=0,c._mesh=s,c._renderingMesh=a||s,s.subMeshes.push(c),c._trianglePlanes=[],c._id=s.subMeshes.length-1,l&&(c.refreshBoundingInfo(),s.computeWorldMatrix(!0)),c}return o(i,e),i.AddToMesh=function(t,e,n,r,o,s,a,l){return void 0===l&&(l=!0),new i(t,e,n,r,o,s,a,l)},Object.defineProperty(i.prototype,"IsGlobal",{get:function(){return 0===this.verticesStart&&this.verticesCount==this._mesh.getTotalVertices()},enumerable:!0,configurable:!0}),i.prototype.getBoundingInfo=function(){return this.IsGlobal?this._mesh.getBoundingInfo():this._boundingInfo},i.prototype.setBoundingInfo=function(t){return this._boundingInfo=t,this},i.prototype.getMesh=function(){return this._mesh},i.prototype.getRenderingMesh=function(){return this._renderingMesh},i.prototype.getMaterial=function(){var t=this._renderingMesh.material;if(null==t)return this._mesh.getScene().defaultMaterial;if(t.getSubMaterial){var e=t.getSubMaterial(this.materialIndex);return this._currentMaterial!==e&&(this._currentMaterial=e,this._materialDefines=null),e}return t},i.prototype.refreshBoundingInfo=function(){if(this._lastColliderWorldVertices=null,this.IsGlobal||!this._renderingMesh||!this._renderingMesh.geometry)return this;var e=this._renderingMesh.getVerticesData(t.VertexBuffer.PositionKind);if(!e)return this._boundingInfo=this._mesh.getBoundingInfo(),this;var i,n=this._renderingMesh.getIndices();if(0===this.indexStart&&this.indexCount===n.length){var r=this._renderingMesh.getBoundingInfo();i={minimum:r.minimum.clone(),maximum:r.maximum.clone()}}else i=t.Tools.ExtractMinAndMaxIndexed(e,n,this.indexStart,this.indexCount,this._renderingMesh.geometry.boundingBias);return this._boundingInfo=new t.BoundingInfo(i.minimum,i.maximum),this},i.prototype._checkCollision=function(t){return this._renderingMesh.getBoundingInfo()._checkCollision(t)},i.prototype.updateBoundingInfo=function(t){var e=this.getBoundingInfo();return e||(this.refreshBoundingInfo(),e=this.getBoundingInfo()),e.update(t),this},i.prototype.isInFrustum=function(t){var e=this.getBoundingInfo();return!!e&&e.isInFrustum(t)},i.prototype.isCompletelyInFrustum=function(t){var e=this.getBoundingInfo();return!!e&&e.isCompletelyInFrustum(t)},i.prototype.render=function(t){return this._renderingMesh.render(this,t),this},i.prototype.getLinesIndexBuffer=function(t,e){if(!this._linesIndexBuffer){for(var i=[],n=this.indexStart;n<this.indexStart+this.indexCount;n+=3)i.push(t[n],t[n+1],t[n+1],t[n+2],t[n+2],t[n]);this._linesIndexBuffer=e.createIndexBuffer(i),this.linesIndexCount=i.length}return this._linesIndexBuffer},i.prototype.canIntersects=function(t){var e=this.getBoundingInfo();return!!e&&t.intersectsBox(e.boundingBox)},i.prototype.intersects=function(e,i,n,r){var o=null;if(t.LinesMesh&&this._mesh instanceof t.LinesMesh)for(var s=this._mesh,a=this.indexStart;a<this.indexStart+this.indexCount;a+=2){var l=i[n[a]],c=i[n[a+1]],u=e.intersectionSegment(l,c,s.intersectionThreshold);if(!(u<0)&&(r||!o||u<o.distance)&&(o=new t.IntersectionInfo(null,null,u),r))break}else for(a=this.indexStart;a<this.indexStart+this.indexCount;a+=3){l=i[n[a]],c=i[n[a+1]];var h=i[n[a+2]],p=e.intersectsTriangle(l,c,h);if(p){if(p.distance<0)continue;if((r||!o||p.distance<o.distance)&&((o=p).faceId=a/3,r))break}}return o},i.prototype._rebuild=function(){this._linesIndexBuffer&&(this._linesIndexBuffer=null)},i.prototype.clone=function(e,n){var r=new i(this.materialIndex,this.verticesStart,this.verticesCount,this.indexStart,this.indexCount,e,n,!1);if(!this.IsGlobal){var o=this.getBoundingInfo();if(!o)return r;r._boundingInfo=new t.BoundingInfo(o.minimum,o.maximum)}return r},i.prototype.dispose=function(){this._linesIndexBuffer&&(this._mesh.getScene().getEngine()._releaseBuffer(this._linesIndexBuffer),this._linesIndexBuffer=null);var t=this._mesh.subMeshes.indexOf(this);this._mesh.subMeshes.splice(t,1)},i.CreateFromIndices=function(t,e,n,r,o){for(var s=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=(o=o||r).getIndices(),c=e;c<e+n;c++){var u=l[c];u<s&&(s=u),u>a&&(a=u)}return new i(t,s,a-s+1,e,n,r,o)},i}(e);t.SubMesh=i}(l||(l={}));var s=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(t){var e=function(){function t(){this._isDirty=!0,this._areLightsDirty=!0,this._areAttributesDirty=!0,this._areTexturesDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._areImageProcessingDirty=!0,this._normals=!1,this._uvs=!1,this._needNormals=!1,this._needUVs=!1}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),t.prototype.markAsProcessed=function(){this._isDirty=!1,this._areAttributesDirty=!1,this._areTexturesDirty=!1,this._areFresnelDirty=!1,this._areLightsDirty=!1,this._areMiscDirty=!1,this._areImageProcessingDirty=!1},t.prototype.markAsUnprocessed=function(){this._isDirty=!0},t.prototype.markAllAsDirty=function(){this._areTexturesDirty=!0,this._areAttributesDirty=!0,this._areLightsDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._areImageProcessingDirty=!0,this._isDirty=!0},t.prototype.markAsImageProcessingDirty=function(){this._areImageProcessingDirty=!0,this._isDirty=!0},t.prototype.markAsLightDirty=function(){this._areLightsDirty=!0,this._isDirty=!0},t.prototype.markAsAttributesDirty=function(){this._areAttributesDirty=!0,this._isDirty=!0},t.prototype.markAsTexturesDirty=function(){this._areTexturesDirty=!0,this._isDirty=!0},t.prototype.markAsFresnelDirty=function(){this._areFresnelDirty=!0,this._isDirty=!0},t.prototype.markAsMiscDirty=function(){this._areMiscDirty=!0,this._isDirty=!0},t.prototype.rebuild=function(){this._keys&&delete this._keys,this._keys=[];for(var t=0,e=Object.keys(this);t<e.length;t++){var i=e[t];"_"!==i[0]&&this._keys.push(i)}},t.prototype.isEqual=function(t){if(this._keys.length!==t._keys.length)return!1;for(var e=0;e<this._keys.length;e++){var i=this._keys[e];if(this[i]!==t[i])return!1}return!0},t.prototype.cloneTo=function(t){this._keys.length!==t._keys.length&&(t._keys=this._keys.slice(0));for(var e=0;e<this._keys.length;e++){var i=this._keys[e];t[i]=this[i]}},t.prototype.reset=function(){for(var t=0;t<this._keys.length;t++){var e=this._keys[t];"number"==typeof this[e]?this[e]=0:this[e]=!1}},t.prototype.toString=function(){for(var t="",e=0;e<this._keys.length;e++){var i=this._keys[e],n=this[i];"number"==typeof n?t+="#define "+i+" "+this[i]+"\n":n&&(t+="#define "+i+"\n")}return t},t}();t.MaterialDefines=e;var i=function(){function e(i,n,r){this.checkReadyOnEveryCall=!1,this.checkReadyOnlyOnce=!1,this.state="",this._alpha=1,this._backFaceCulling=!0,this.doNotSerialize=!1,this.storeEffectOnSubMeshes=!1,this.onDisposeObservable=new t.Observable,this.onBindObservable=new t.Observable,this.onUnBindObservable=new t.Observable,this._alphaMode=t.Engine.ALPHA_COMBINE,this._needDepthPrePass=!1,this.disableDepthWrite=!1,this.forceDepthWrite=!1,this.separateCullingPass=!1,this._fogEnabled=!0,this.pointSize=1,this.zOffset=0,this._wasPreviouslyReady=!1,this._fillMode=e.TriangleFillMode,this.name=i,this.id=i||t.Tools.RandomId(),this._scene=n||t.Engine.LastCreatedScene,this._scene.useRightHandedSystem?this.sideOrientation=e.ClockWiseSideOrientation:this.sideOrientation=e.CounterClockWiseSideOrientation,this._uniformBuffer=new t.UniformBuffer(this._scene.getEngine()),this._useUBO=this.getScene().getEngine().supportsUniformBuffers,r||this._scene.materials.push(this)}return Object.defineProperty(e,"TriangleFillMode",{get:function(){return e._TriangleFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WireFrameFillMode",{get:function(){return e._WireFrameFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PointFillMode",{get:function(){return e._PointFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PointListDrawMode",{get:function(){return e._PointListDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LineListDrawMode",{get:function(){return e._LineListDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LineLoopDrawMode",{get:function(){return e._LineLoopDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LineStripDrawMode",{get:function(){return e._LineStripDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TriangleStripDrawMode",{get:function(){return e._TriangleStripDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TriangleFanDrawMode",{get:function(){return e._TriangleFanDrawMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClockWiseSideOrientation",{get:function(){return e._ClockWiseSideOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CounterClockWiseSideOrientation",{get:function(){return e._CounterClockWiseSideOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TextureDirtyFlag",{get:function(){return e._TextureDirtyFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LightDirtyFlag",{get:function(){return e._LightDirtyFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FresnelDirtyFlag",{get:function(){return e._FresnelDirtyFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AttributesDirtyFlag",{get:function(){return e._AttributesDirtyFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MiscDirtyFlag",{get:function(){return e._MiscDirtyFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backFaceCulling",{get:function(){return this._backFaceCulling},set:function(t){this._backFaceCulling!==t&&(this._backFaceCulling=t,this.markAsDirty(e.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBind",{set:function(t){this._onBindObserver&&this.onBindObservable.remove(this._onBindObserver),this._onBindObserver=this.onBindObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaMode",{get:function(){return this._alphaMode},set:function(t){this._alphaMode!==t&&(this._alphaMode=t,this.markAsDirty(e.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needDepthPrePass",{get:function(){return this._needDepthPrePass},set:function(t){this._needDepthPrePass!==t&&(this._needDepthPrePass=t,this._needDepthPrePass&&(this.checkReadyOnEveryCall=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(t){this._fogEnabled!==t&&(this._fogEnabled=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wireframe",{get:function(){return this._fillMode===e.WireFrameFillMode},set:function(t){this._fillMode=t?e.WireFrameFillMode:e.TriangleFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointsCloud",{get:function(){return this._fillMode===e.PointFillMode},set:function(t){this._fillMode=t?e.PointFillMode:e.TriangleFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){this._fillMode!==t&&(this._fillMode=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return"Name: "+this.name},e.prototype.getClassName=function(){return"Material"},Object.defineProperty(e.prototype,"isFrozen",{get:function(){return this.checkReadyOnlyOnce},enumerable:!0,configurable:!0}),e.prototype.freeze=function(){this.checkReadyOnlyOnce=!0},e.prototype.unfreeze=function(){this.checkReadyOnlyOnce=!1},e.prototype.isReady=function(t,e){return!0},e.prototype.isReadyForSubMesh=function(t,e,i){return!1},e.prototype.getEffect=function(){return this._effect},e.prototype.getScene=function(){return this._scene},e.prototype.needAlphaBlending=function(){return this.alpha<1},e.prototype.needAlphaBlendingForMesh=function(t){return this.needAlphaBlending()||t.visibility<1||t.hasVertexAlpha},e.prototype.needAlphaTesting=function(){return!1},e.prototype.getAlphaTestTexture=function(){return null},e.prototype.markDirty=function(){this._wasPreviouslyReady=!1},e.prototype._preBind=function(t,i){void 0===i&&(i=null);var n=this._scene.getEngine(),r=(null==i?this.sideOrientation:i)===e.ClockWiseSideOrientation;return n.enableEffect(t||this._effect),n.setState(this.backFaceCulling,this.zOffset,!1,r),r},e.prototype.bind=function(t,e){},e.prototype.bindForSubMesh=function(t,e,i){},e.prototype.bindOnlyWorldMatrix=function(t){},e.prototype.bindSceneUniformBuffer=function(t,e){e.bindToEffect(t,"Scene")},e.prototype.bindView=function(t){this._useUBO?this.bindSceneUniformBuffer(t,this.getScene().getSceneUniformBuffer()):t.setMatrix("view",this.getScene().getViewMatrix())},e.prototype.bindViewProjection=function(t){this._useUBO?this.bindSceneUniformBuffer(t,this.getScene().getSceneUniformBuffer()):t.setMatrix("viewProjection",this.getScene().getTransformMatrix())},e.prototype._shouldTurnAlphaTestOn=function(t){return!this.needAlphaBlendingForMesh(t)&&this.needAlphaTesting()},e.prototype._afterBind=function(t){if(this._scene._cachedMaterial=this,this._scene._cachedVisibility=t?t.visibility:1,t&&this.onBindObservable.notifyObservers(t),this.disableDepthWrite){var e=this._scene.getEngine();this._cachedDepthWriteState=e.getDepthWrite(),e.setDepthWrite(!1)}},e.prototype.unbind=function(){this.onUnBindObservable.notifyObservers(this),this.disableDepthWrite&&this._scene.getEngine().setDepthWrite(this._cachedDepthWriteState)},e.prototype.getActiveTextures=function(){return[]},e.prototype.hasTexture=function(t){return!1},e.prototype.clone=function(t){return null},e.prototype.getBindedMeshes=function(){for(var t=new Array,e=0;e<this._scene.meshes.length;e++){var i=this._scene.meshes[e];i.material===this&&t.push(i)}return t},e.prototype.forceCompilation=function(e,i,n){var r=this,o=s({clipPlane:!1},n),a=new t.BaseSubMesh,l=this.getScene(),c=function(){if(r._scene&&r._scene.getEngine()){a._materialDefines&&(a._materialDefines._renderId=-1);var s=l.clipPlane;o.clipPlane&&(l.clipPlane=new t.Plane(0,0,0,1)),r.storeEffectOnSubMeshes?r.isReadyForSubMesh(e,a)?i&&i(r):setTimeout(c,16):r.isReady(e)?i&&i(r):setTimeout(c,16),n&&n.clipPlane&&(l.clipPlane=s)}};c()},e.prototype.markAsDirty=function(t){t&e.TextureDirtyFlag&&this._markAllSubMeshesAsTexturesDirty(),t&e.LightDirtyFlag&&this._markAllSubMeshesAsLightsDirty(),t&e.FresnelDirtyFlag&&this._markAllSubMeshesAsFresnelDirty(),t&e.AttributesDirtyFlag&&this._markAllSubMeshesAsAttributesDirty(),t&e.MiscDirtyFlag&&this._markAllSubMeshesAsMiscDirty(),this.getScene().resetCachedMaterial()},e.prototype._markAllSubMeshesAsDirty=function(t){for(var e=0,i=this.getScene().meshes;e<i.length;e++){var n=i[e];if(n.subMeshes)for(var r=0,o=n.subMeshes;r<o.length;r++){var s=o[r];s.getMaterial()===this&&s._materialDefines&&t(s._materialDefines)}}},e.prototype._markAllSubMeshesAsImageProcessingDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsImageProcessingDirty()})},e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsTexturesDirty()})},e.prototype._markAllSubMeshesAsFresnelDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsFresnelDirty()})},e.prototype._markAllSubMeshesAsFresnelAndMiscDirty=function(){this._markAllSubMeshesAsDirty(function(t){t.markAsFresnelDirty(),t.markAsMiscDirty()})},e.prototype._markAllSubMeshesAsLightsDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsLightDirty()})},e.prototype._markAllSubMeshesAsAttributesDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsAttributesDirty()})},e.prototype._markAllSubMeshesAsMiscDirty=function(){this._markAllSubMeshesAsDirty(function(t){return t.markAsMiscDirty()})},e.prototype._markAllSubMeshesAsTexturesAndMiscDirty=function(){this._markAllSubMeshesAsDirty(function(t){t.markAsTexturesDirty(),t.markAsMiscDirty()})},e.prototype.dispose=function(t,e){this.getScene().stopAnimation(this);var i=this._scene.materials.indexOf(this);for(i>=0&&this._scene.materials.splice(i,1),i=0;i<this._scene.meshes.length;i++){var n=this._scene.meshes[i];if(n.material===this&&(n.material=null,n.geometry)){var r=n.geometry;if(this.storeEffectOnSubMeshes)for(var o=0,s=n.subMeshes;o<s.length;o++){var a=s[o];r._releaseVertexArrayObject(a._materialEffect),t&&a._materialEffect&&this._scene.getEngine()._releaseEffect(a._materialEffect)}else r._releaseVertexArrayObject(this._effect)}}this._uniformBuffer.dispose(),t&&this._effect&&(this.storeEffectOnSubMeshes||this._scene.getEngine()._releaseEffect(this._effect),this._effect=null),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBindObservable.clear(),this.onUnBindObservable.clear()},e.prototype.serialize=function(){return t.SerializationHelper.Serialize(this)},e.ParseMultiMaterial=function(e,i){var n=new t.MultiMaterial(e.name,i);n.id=e.id,t.Tags&&t.Tags.AddTagsTo(n,e.tags);for(var r=0;r<e.materials.length;r++){var o=e.materials[r];o?n.subMaterials.push(i.getMaterialByID(o)):n.subMaterials.push(null)}return n},e.Parse=function(e,i,n){return e.customType?"BABYLON.PBRMaterial"===e.customType&&e.overloadedAlbedo&&(e.customType="BABYLON.LegacyPBRMaterial",!t.LegacyPBRMaterial)?void t.Tools.Error("Your scene is trying to load a legacy version of the PBRMaterial, please, include it from the materials library."):t.Tools.Instantiate(e.customType).Parse(e,i,n):t.StandardMaterial.Parse(e,i,n)},e._TriangleFillMode=0,e._WireFrameFillMode=1,e._PointFillMode=2,e._PointListDrawMode=3,e._LineListDrawMode=4,e._LineLoopDrawMode=5,e._LineStripDrawMode=6,e._TriangleStripDrawMode=7,e._TriangleFanDrawMode=8,e._ClockWiseSideOrientation=0,e._CounterClockWiseSideOrientation=1,e._TextureDirtyFlag=1,e._LightDirtyFlag=2,e._FresnelDirtyFlag=4,e._AttributesDirtyFlag=8,e._MiscDirtyFlag=16,r([t.serialize()],e.prototype,"id",void 0),r([t.serialize()],e.prototype,"name",void 0),r([t.serialize()],e.prototype,"checkReadyOnEveryCall",void 0),r([t.serialize()],e.prototype,"checkReadyOnlyOnce",void 0),r([t.serialize()],e.prototype,"state",void 0),r([t.serialize("alpha")],e.prototype,"_alpha",void 0),r([t.serialize("backFaceCulling")],e.prototype,"_backFaceCulling",void 0),r([t.serialize()],e.prototype,"sideOrientation",void 0),r([t.serialize("alphaMode")],e.prototype,"_alphaMode",void 0),r([t.serialize()],e.prototype,"_needDepthPrePass",void 0),r([t.serialize()],e.prototype,"disableDepthWrite",void 0),r([t.serialize()],e.prototype,"forceDepthWrite",void 0),r([t.serialize()],e.prototype,"separateCullingPass",void 0),r([t.serialize("fogEnabled")],e.prototype,"_fogEnabled",void 0),r([t.serialize()],e.prototype,"pointSize",void 0),r([t.serialize()],e.prototype,"zOffset",void 0),r([t.serialize()],e.prototype,"wireframe",null),r([t.serialize()],e.prototype,"pointsCloud",null),r([t.serialize()],e.prototype,"fillMode",null),e}();t.Material=i}(l||(l={})),function(t){var e=function(){function e(t,e,i){this._engine=t,this._noUBO=!t.supportsUniformBuffers,this._dynamic=i,this._data=e||[],this._uniformLocations={},this._uniformSizes={},this._uniformLocationPointer=0,this._needSync=!1,this._noUBO?(this.updateMatrix3x3=this._updateMatrix3x3ForEffect,this.updateMatrix2x2=this._updateMatrix2x2ForEffect,this.updateFloat=this._updateFloatForEffect,this.updateFloat2=this._updateFloat2ForEffect,this.updateFloat3=this._updateFloat3ForEffect,this.updateFloat4=this._updateFloat4ForEffect,this.updateMatrix=this._updateMatrixForEffect,this.updateVector3=this._updateVector3ForEffect,this.updateVector4=this._updateVector4ForEffect,this.updateColor3=this._updateColor3ForEffect,this.updateColor4=this._updateColor4ForEffect):(this._engine._uniformBuffers.push(this),this.updateMatrix3x3=this._updateMatrix3x3ForUniform,this.updateMatrix2x2=this._updateMatrix2x2ForUniform,this.updateFloat=this._updateFloatForUniform,this.updateFloat2=this._updateFloat2ForUniform,this.updateFloat3=this._updateFloat3ForUniform,this.updateFloat4=this._updateFloat4ForUniform,this.updateMatrix=this._updateMatrixForUniform,this.updateVector3=this._updateVector3ForUniform,this.updateVector4=this._updateVector4ForUniform,this.updateColor3=this._updateColor3ForUniform,this.updateColor4=this._updateColor4ForUniform)}return Object.defineProperty(e.prototype,"useUbo",{get:function(){return!this._noUBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSync",{get:function(){return!this._needSync},enumerable:!0,configurable:!0}),e.prototype.isDynamic=function(){return void 0!==this._dynamic},e.prototype.getData=function(){return this._bufferData},e.prototype.getBuffer=function(){return this._buffer},e.prototype._fillAlignment=function(t){var e;if(e=t<=2?t:4,this._uniformLocationPointer%e!=0){var i=this._uniformLocationPointer;this._uniformLocationPointer+=e-this._uniformLocationPointer%e;for(var n=this._uniformLocationPointer-i,r=0;r<n;r++)this._data.push(0)}},e.prototype.addUniform=function(t,e){if(!this._noUBO&&void 0===this._uniformLocations[t]){var i;if(e instanceof Array)e=(i=e).length;else{e=e,i=[];for(var n=0;n<e;n++)i.push(0)}this._fillAlignment(e),this._uniformSizes[t]=e,this._uniformLocations[t]=this._uniformLocationPointer,this._uniformLocationPointer+=e;for(n=0;n<e;n++)this._data.push(i[n]);this._needSync=!0}},e.prototype.addMatrix=function(t,e){this.addUniform(t,Array.prototype.slice.call(e.toArray()))},e.prototype.addFloat2=function(t,e,i){var n=[e,i];this.addUniform(t,n)},e.prototype.addFloat3=function(t,e,i,n){var r=[e,i,n];this.addUniform(t,r)},e.prototype.addColor3=function(t,e){var i=new Array;e.toArray(i),this.addUniform(t,i)},e.prototype.addColor4=function(t,e,i){var n=new Array;e.toArray(n),n.push(i),this.addUniform(t,n)},e.prototype.addVector3=function(t,e){var i=new Array;e.toArray(i),this.addUniform(t,i)},e.prototype.addMatrix3x3=function(t){this.addUniform(t,12)},e.prototype.addMatrix2x2=function(t){this.addUniform(t,8)},e.prototype.create=function(){this._noUBO||this._buffer||(this._fillAlignment(4),this._bufferData=new Float32Array(this._data),this._rebuild(),this._needSync=!0)},e.prototype._rebuild=function(){this._noUBO||(this._dynamic?this._buffer=this._engine.createDynamicUniformBuffer(this._bufferData):this._buffer=this._engine.createUniformBuffer(this._bufferData))},e.prototype.update=function(){this._buffer?(this._dynamic||this._needSync)&&(this._engine.updateUniformBuffer(this._buffer,this._bufferData),this._needSync=!1):this.create()},e.prototype.updateUniform=function(e,i,n){var r=this._uniformLocations[e];if(void 0===r){if(this._buffer)return void t.Tools.Error("Cannot add an uniform after UBO has been created.");this.addUniform(e,n),r=this._uniformLocations[e]}if(this._buffer||this.create(),this._dynamic)for(var o=0;o<n;o++)this._bufferData[r+o]=i[o];else{var s=!1;for(o=0;o<n;o++)this._bufferData[r+o]!==i[o]&&(s=!0,this._bufferData[r+o]=i[o]);this._needSync=this._needSync||s}},e.prototype._updateMatrix3x3ForUniform=function(t,i){for(var n=0;n<3;n++)e._tempBuffer[4*n]=i[3*n],e._tempBuffer[4*n+1]=i[3*n+1],e._tempBuffer[4*n+2]=i[3*n+2],e._tempBuffer[4*n+3]=0;this.updateUniform(t,e._tempBuffer,12)},e.prototype._updateMatrix3x3ForEffect=function(t,e){this._currentEffect.setMatrix3x3(t,e)},e.prototype._updateMatrix2x2ForEffect=function(t,e){this._currentEffect.setMatrix2x2(t,e)},e.prototype._updateMatrix2x2ForUniform=function(t,i){for(var n=0;n<2;n++)e._tempBuffer[4*n]=i[2*n],e._tempBuffer[4*n+1]=i[2*n+1],e._tempBuffer[4*n+2]=0,e._tempBuffer[4*n+3]=0;this.updateUniform(t,e._tempBuffer,8)},e.prototype._updateFloatForEffect=function(t,e){this._currentEffect.setFloat(t,e)},e.prototype._updateFloatForUniform=function(t,i){e._tempBuffer[0]=i,this.updateUniform(t,e._tempBuffer,1)},e.prototype._updateFloat2ForEffect=function(t,e,i,n){void 0===n&&(n=""),this._currentEffect.setFloat2(t+n,e,i)},e.prototype._updateFloat2ForUniform=function(t,i,n,r){void 0===r&&(r=""),e._tempBuffer[0]=i,e._tempBuffer[1]=n,this.updateUniform(t,e._tempBuffer,2)},e.prototype._updateFloat3ForEffect=function(t,e,i,n,r){void 0===r&&(r=""),this._currentEffect.setFloat3(t+r,e,i,n)},e.prototype._updateFloat3ForUniform=function(t,i,n,r,o){void 0===o&&(o=""),e._tempBuffer[0]=i,e._tempBuffer[1]=n,e._tempBuffer[2]=r,this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateFloat4ForEffect=function(t,e,i,n,r,o){void 0===o&&(o=""),this._currentEffect.setFloat4(t+o,e,i,n,r)},e.prototype._updateFloat4ForUniform=function(t,i,n,r,o,s){void 0===s&&(s=""),e._tempBuffer[0]=i,e._tempBuffer[1]=n,e._tempBuffer[2]=r,e._tempBuffer[3]=o,this.updateUniform(t,e._tempBuffer,4)},e.prototype._updateMatrixForEffect=function(t,e){this._currentEffect.setMatrix(t,e)},e.prototype._updateMatrixForUniform=function(t,e){this.updateUniform(t,e.toArray(),16)},e.prototype._updateVector3ForEffect=function(t,e){this._currentEffect.setVector3(t,e)},e.prototype._updateVector3ForUniform=function(t,i){i.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateVector4ForEffect=function(t,e){this._currentEffect.setVector4(t,e)},e.prototype._updateVector4ForUniform=function(t,i){i.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,4)},e.prototype._updateColor3ForEffect=function(t,e,i){void 0===i&&(i=""),this._currentEffect.setColor3(t+i,e)},e.prototype._updateColor3ForUniform=function(t,i,n){void 0===n&&(n=""),i.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateColor4ForEffect=function(t,e,i,n){void 0===n&&(n=""),this._currentEffect.setColor4(t+n,e,i)},e.prototype._updateColor4ForUniform=function(t,i,n,r){void 0===r&&(r=""),i.toArray(e._tempBuffer),e._tempBuffer[3]=n,this.updateUniform(t,e._tempBuffer,4)},e.prototype.setTexture=function(t,e){this._currentEffect.setTexture(t,e)},e.prototype.updateUniformDirectly=function(t,e){this.updateUniform(t,e,e.length),this.update()},e.prototype.bindToEffect=function(t,e){this._currentEffect=t,!this._noUBO&&this._buffer&&t.bindUniformBuffer(this._buffer,e)},e.prototype.dispose=function(){if(!this._noUBO){var t=this._engine._uniformBuffers.indexOf(this);-1!==t&&this._engine._uniformBuffers.splice(t,1),this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)}},e._MAX_UNIFORM_SIZE=256,e._tempBuffer=new Float32Array(e._MAX_UNIFORM_SIZE),e}();t.UniformBuffer=e}(l||(l={})),function(t){var e=function(){function e(){}return e.prototype.set=function(e,i){switch(i){case t.VertexBuffer.PositionKind:this.positions=e;break;case t.VertexBuffer.NormalKind:this.normals=e;break;case t.VertexBuffer.TangentKind:this.tangents=e;break;case t.VertexBuffer.UVKind:this.uvs=e;break;case t.VertexBuffer.UV2Kind:this.uvs2=e;break;case t.VertexBuffer.UV3Kind:this.uvs3=e;break;case t.VertexBuffer.UV4Kind:this.uvs4=e;break;case t.VertexBuffer.UV5Kind:this.uvs5=e;break;case t.VertexBuffer.UV6Kind:this.uvs6=e;break;case t.VertexBuffer.ColorKind:this.colors=e;break;case t.VertexBuffer.MatricesIndicesKind:this.matricesIndices=e;break;case t.VertexBuffer.MatricesWeightsKind:this.matricesWeights=e;break;case t.VertexBuffer.MatricesIndicesExtraKind:this.matricesIndicesExtra=e;break;case t.VertexBuffer.MatricesWeightsExtraKind:this.matricesWeightsExtra=e}},e.prototype.applyToMesh=function(t,e){return this._applyTo(t,e),this},e.prototype.applyToGeometry=function(t,e){return this._applyTo(t,e),this},e.prototype.updateMesh=function(t,e,i){return this._update(t),this},e.prototype.updateGeometry=function(t,e,i){return this._update(t),this},e.prototype._applyTo=function(e,i){return void 0===i&&(i=!1),this.positions&&e.setVerticesData(t.VertexBuffer.PositionKind,this.positions,i),this.normals&&e.setVerticesData(t.VertexBuffer.NormalKind,this.normals,i),this.tangents&&e.setVerticesData(t.VertexBuffer.TangentKind,this.tangents,i),this.uvs&&e.setVerticesData(t.VertexBuffer.UVKind,this.uvs,i),this.uvs2&&e.setVerticesData(t.VertexBuffer.UV2Kind,this.uvs2,i),this.uvs3&&e.setVerticesData(t.VertexBuffer.UV3Kind,this.uvs3,i),this.uvs4&&e.setVerticesData(t.VertexBuffer.UV4Kind,this.uvs4,i),this.uvs5&&e.setVerticesData(t.VertexBuffer.UV5Kind,this.uvs5,i),this.uvs6&&e.setVerticesData(t.VertexBuffer.UV6Kind,this.uvs6,i),this.colors&&e.setVerticesData(t.VertexBuffer.ColorKind,this.colors,i),this.matricesIndices&&e.setVerticesData(t.VertexBuffer.MatricesIndicesKind,this.matricesIndices,i),this.matricesWeights&&e.setVerticesData(t.VertexBuffer.MatricesWeightsKind,this.matricesWeights,i),this.matricesIndicesExtra&&e.setVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,this.matricesIndicesExtra,i),this.matricesWeightsExtra&&e.setVerticesData(t.VertexBuffer.MatricesWeightsExtraKind,this.matricesWeightsExtra,i),this.indices&&e.setIndices(this.indices,null,i),this},e.prototype._update=function(e,i,n){return this.positions&&e.updateVerticesData(t.VertexBuffer.PositionKind,this.positions,i,n),this.normals&&e.updateVerticesData(t.VertexBuffer.NormalKind,this.normals,i,n),this.tangents&&e.updateVerticesData(t.VertexBuffer.TangentKind,this.tangents,i,n),this.uvs&&e.updateVerticesData(t.VertexBuffer.UVKind,this.uvs,i,n),this.uvs2&&e.updateVerticesData(t.VertexBuffer.UV2Kind,this.uvs2,i,n),this.uvs3&&e.updateVerticesData(t.VertexBuffer.UV3Kind,this.uvs3,i,n),this.uvs4&&e.updateVerticesData(t.VertexBuffer.UV4Kind,this.uvs4,i,n),this.uvs5&&e.updateVerticesData(t.VertexBuffer.UV5Kind,this.uvs5,i,n),this.uvs6&&e.updateVerticesData(t.VertexBuffer.UV6Kind,this.uvs6,i,n),this.colors&&e.updateVerticesData(t.VertexBuffer.ColorKind,this.colors,i,n),this.matricesIndices&&e.updateVerticesData(t.VertexBuffer.MatricesIndicesKind,this.matricesIndices,i,n),this.matricesWeights&&e.updateVerticesData(t.VertexBuffer.MatricesWeightsKind,this.matricesWeights,i,n),this.matricesIndicesExtra&&e.updateVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,this.matricesIndicesExtra,i,n),this.matricesWeightsExtra&&e.updateVerticesData(t.VertexBuffer.MatricesWeightsExtraKind,this.matricesWeightsExtra,i,n),this.indices&&e.setIndices(this.indices,null),this},e.prototype.transform=function(e){var i,n=t.Vector3.Zero();if(this.positions){var r=t.Vector3.Zero();for(i=0;i<this.positions.length;i+=3)t.Vector3.FromArrayToRef(this.positions,i,r),t.Vector3.TransformCoordinatesToRef(r,e,n),this.positions[i]=n.x,this.positions[i+1]=n.y,this.positions[i+2]=n.z}if(this.normals){var o=t.Vector3.Zero();for(i=0;i<this.normals.length;i+=3)t.Vector3.FromArrayToRef(this.normals,i,o),t.Vector3.TransformNormalToRef(o,e,n),this.normals[i]=n.x,this.normals[i+1]=n.y,this.normals[i+2]=n.z}if(this.tangents){var s=t.Vector4.Zero(),a=t.Vector4.Zero();for(i=0;i<this.tangents.length;i+=4)t.Vector4.FromArrayToRef(this.tangents,i,s),t.Vector4.TransformNormalToRef(s,e,a),this.tangents[i]=a.x,this.tangents[i+1]=a.y,this.tangents[i+2]=a.z,this.tangents[i+3]=a.w}return this},e.prototype.merge=function(t,e){if(e=e||{},t.indices){this.indices||(this.indices=[]);for(var i=this.positions?this.positions.length/3:0,n=0;n<t.indices.length;n++)this.indices.push(t.indices[n]+i)}if(this.positions=this._mergeElement(this.positions,t.positions),!this.positions)return this;var r=this.positions.length/3;return this.normals=this._mergeElement(this.normals,t.normals,3*r),this.tangents=this._mergeElement(this.tangents,t.tangents,r*(e.tangentLength||4)),this.uvs=this._mergeElement(this.uvs,t.uvs,2*r),this.uvs2=this._mergeElement(this.uvs2,t.uvs2,2*r),this.uvs3=this._mergeElement(this.uvs3,t.uvs3,2*r),this.uvs4=this._mergeElement(this.uvs4,t.uvs4,2*r),this.uvs5=this._mergeElement(this.uvs5,t.uvs5,2*r),this.uvs6=this._mergeElement(this.uvs6,t.uvs6,2*r),this.colors=this._mergeElement(this.colors,t.colors,4*r,1),this.matricesIndices=this._mergeElement(this.matricesIndices,t.matricesIndices,4*r),this.matricesWeights=this._mergeElement(this.matricesWeights,t.matricesWeights,4*r),this.matricesIndicesExtra=this._mergeElement(this.matricesIndicesExtra,t.matricesIndicesExtra,4*r),this.matricesWeightsExtra=this._mergeElement(this.matricesWeightsExtra,t.matricesWeightsExtra,4*r),this},e.prototype._mergeElement=function(t,e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e&&!t)return null;var r;if(!e)return(r=new Float32Array(t.length)).fill(n),this._mergeElement(t,r,i);if(!t)return 0===i||i===e.length?e:((r=new Float32Array(i-e.length)).fill(n),this._mergeElement(r,e,i));var o=e.length+t.length,s=t instanceof Float32Array,a=e instanceof Float32Array;if(s){var l=new Float32Array(o);return l.set(t),l.set(e,t.length),l}if(a){var c=t.slice(0),u=0;for(o=e.length;u<o;u++)c.push(e[u]);return c}return t.concat(e)},e.prototype.serialize=function(){var t=this.serialize();return this.positions&&(t.positions=this.positions),this.normals&&(t.normals=this.normals),this.tangents&&(t.tangents=this.tangents),this.uvs&&(t.uvs=this.uvs),this.uvs2&&(t.uvs2=this.uvs2),this.uvs3&&(t.uvs3=this.uvs3),this.uvs4&&(t.uvs4=this.uvs4),this.uvs5&&(t.uvs5=this.uvs5),this.uvs6&&(t.uvs6=this.uvs6),this.colors&&(t.colors=this.colors),this.matricesIndices&&(t.matricesIndices=this.matricesIndices,t.matricesIndices._isExpanded=!0),this.matricesWeights&&(t.matricesWeights=this.matricesWeights),this.matricesIndicesExtra&&(t.matricesIndicesExtra=this.matricesIndicesExtra,t.matricesIndicesExtra._isExpanded=!0),this.matricesWeightsExtra&&(t.matricesWeightsExtra=this.matricesWeightsExtra),t.indices=this.indices,t},e.ExtractFromMesh=function(t,i,n){return e._ExtractFrom(t,i,n)},e.ExtractFromGeometry=function(t,i,n){return e._ExtractFrom(t,i,n)},e._ExtractFrom=function(i,n,r){var o=new e;return i.isVerticesDataPresent(t.VertexBuffer.PositionKind)&&(o.positions=i.getVerticesData(t.VertexBuffer.PositionKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.NormalKind)&&(o.normals=i.getVerticesData(t.VertexBuffer.NormalKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.TangentKind)&&(o.tangents=i.getVerticesData(t.VertexBuffer.TangentKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.uvs=i.getVerticesData(t.VertexBuffer.UVKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(o.uvs2=i.getVerticesData(t.VertexBuffer.UV2Kind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UV3Kind)&&(o.uvs3=i.getVerticesData(t.VertexBuffer.UV3Kind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UV4Kind)&&(o.uvs4=i.getVerticesData(t.VertexBuffer.UV4Kind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UV5Kind)&&(o.uvs5=i.getVerticesData(t.VertexBuffer.UV5Kind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.UV6Kind)&&(o.uvs6=i.getVerticesData(t.VertexBuffer.UV6Kind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.ColorKind)&&(o.colors=i.getVerticesData(t.VertexBuffer.ColorKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.MatricesIndicesKind)&&(o.matricesIndices=i.getVerticesData(t.VertexBuffer.MatricesIndicesKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.MatricesWeightsKind)&&(o.matricesWeights=i.getVerticesData(t.VertexBuffer.MatricesWeightsKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.MatricesIndicesExtraKind)&&(o.matricesIndicesExtra=i.getVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,n,r)),i.isVerticesDataPresent(t.VertexBuffer.MatricesWeightsExtraKind)&&(o.matricesWeightsExtra=i.getVerticesData(t.VertexBuffer.MatricesWeightsExtraKind,n,r)),o.indices=i.getIndices(n),o},e.CreateRibbon=function(i){var n=i.pathArray,r=i.closeArray||!1,o=i.closePath||!1,s=i.invertUV||!1,a=Math.floor(n[0].length/2),l=i.offset||a;l=l>a?a:Math.floor(l);var c,u,h,p,d=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,f=i.uvs,m=i.colors,g=[],y=[],_=[],v=[],b=[],x=[],A=[],w=[],P=[],E=[];if(n.length<2){var T=[],S=[];for(h=0;h<n[0].length-l;h++)T.push(n[0][h]),S.push(n[0][h+l]);n=[T,S]}var C,O,M,R=0,I=o?1:0;for(c=n[0].length,u=0;u<n.length;u++){for(A[u]=0,b[u]=[0],c=c<(O=(C=n[u]).length)?c:O,p=0;p<O;)g.push(C[p].x,C[p].y,C[p].z),p>0&&(M=C[p].subtract(C[p-1]).length()+A[u],b[u].push(M),A[u]=M),p++;o&&(p--,g.push(C[0].x,C[0].y,C[0].z),M=C[p].subtract(C[0]).length()+A[u],b[u].push(M),A[u]=M),P[u]=O+I,E[u]=R,R+=O+I}var D,L,k,F,N=null,B=null;for(h=0;h<c+I;h++){for(w[h]=0,x[h]=[0],u=0;u<n.length-1;u++)D=n[u],L=n[u+1],h===c?(N=D[0],B=L[0]):(N=D[h],B=L[h]),M=B.subtract(N).length()+w[h],x[h].push(M),w[h]=M;r&&B&&N&&(D=n[u],L=n[0],h===c&&(B=L[0]),M=B.subtract(N).length()+w[h],w[h]=M)}if(f)for(u=0;u<f.length;u++)v.push(f[u].x,f[u].y);else for(u=0;u<n.length;u++)for(h=0;h<c+I;h++)k=0!=A[u]?b[u][h]/A[u]:0,F=0!=w[h]?x[h][u]/w[h]:0,s?v.push(F,k):v.push(k,F);for(var V=0,z=P[u=0]-1,U=P[u+1]-1,j=z<U?z:U,G=E[1]-E[0],W=r?P.length:P.length-1;V<=j&&u<W;)y.push(V,V+G,V+1),y.push(V+G+1,V+1,V+G),(V+=1)===j&&(++u===P.length-1?(G=E[0]-E[u],z=P[u]-1,U=P[0]-1):(G=E[u+1]-E[u],z=P[u]-1,U=P[u+1]-1),V=E[u],j=z<U?z+V:U+V);if(e.ComputeNormals(g,y,_),o){var H=0,X=0;for(u=0;u<n.length;u++)H=3*E[u],X=u+1<n.length?3*(E[u+1]-1):_.length-3,_[H]=.5*(_[H]+_[X]),_[H+1]=.5*(_[H+1]+_[X+1]),_[H+2]=.5*(_[H+2]+_[X+2]),_[X]=_[H],_[X+1]=_[H+1],_[X+2]=_[H+2]}e._ComputeSides(d,g,y,_,v,i.frontUVs,i.backUVs);var Y=null;if(m){Y=new Float32Array(4*m.length);for(var q=0;q<m.length;q++)Y[4*q]=m[q].r,Y[4*q+1]=m[q].g,Y[4*q+2]=m[q].b,Y[4*q+3]=m[q].a}var K=new e,Q=new Float32Array(g),Z=new Float32Array(_),J=new Float32Array(v);return K.indices=y,K.positions=Q,K.normals=Z,K.uvs=J,Y&&K.set(Y,t.VertexBuffer.ColorKind),o&&(K._idx=E),K},e.CreateBox=function(i){for(var n=[new t.Vector3(0,0,1),new t.Vector3(0,0,-1),new t.Vector3(1,0,0),new t.Vector3(-1,0,0),new t.Vector3(0,1,0),new t.Vector3(0,-1,0)],r=[],o=[],s=[],a=[],l=i.width||i.size||1,c=i.height||i.size||1,u=i.depth||i.size||1,h=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,p=i.faceUV||new Array(6),d=i.faceColors,f=[],m=0;m<6;m++)void 0===p[m]&&(p[m]=new t.Vector4(0,0,1,1)),d&&void 0===d[m]&&(d[m]=new t.Color4(1,1,1,1));for(var g=new t.Vector3(l/2,c/2,u/2),y=0;y<n.length;y++){var _=n[y],v=new t.Vector3(_.y,_.z,_.x),b=t.Vector3.Cross(_,v),x=o.length/3;r.push(x),r.push(x+1),r.push(x+2),r.push(x),r.push(x+2),r.push(x+3);var A=_.subtract(v).subtract(b).multiply(g);o.push(A.x,A.y,A.z),s.push(_.x,_.y,_.z),a.push(p[y].z,p[y].w),d&&f.push(d[y].r,d[y].g,d[y].b,d[y].a),A=_.subtract(v).add(b).multiply(g),o.push(A.x,A.y,A.z),s.push(_.x,_.y,_.z),a.push(p[y].x,p[y].w),d&&f.push(d[y].r,d[y].g,d[y].b,d[y].a),A=_.add(v).add(b).multiply(g),o.push(A.x,A.y,A.z),s.push(_.x,_.y,_.z),a.push(p[y].x,p[y].y),d&&f.push(d[y].r,d[y].g,d[y].b,d[y].a),A=_.add(v).subtract(b).multiply(g),o.push(A.x,A.y,A.z),s.push(_.x,_.y,_.z),a.push(p[y].z,p[y].y),d&&f.push(d[y].r,d[y].g,d[y].b,d[y].a)}e._ComputeSides(h,o,r,s,a,i.frontUVs,i.backUVs);var w=new e;if(w.indices=r,w.positions=o,w.normals=s,w.uvs=a,d){var P=h===t.Mesh.DOUBLESIDE?f.concat(f):f;w.colors=P}return w},e.CreateSphere=function(i){for(var n=i.segments||32,r=i.diameterX||i.diameter||1,o=i.diameterY||i.diameter||1,s=i.diameterZ||i.diameter||1,a=i.arc&&(i.arc<=0||i.arc>1)?1:i.arc||1,l=i.slice&&i.slice<=0?1:i.slice||1,c=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,u=new t.Vector3(r/2,o/2,s/2),h=2+n,p=2*h,d=[],f=[],m=[],g=[],y=0;y<=h;y++){for(var _=y/h,v=_*Math.PI*l,b=0;b<=p;b++){var x=b/p,A=x*Math.PI*2*a,w=t.Matrix.RotationZ(-v),P=t.Matrix.RotationY(A),E=t.Vector3.TransformCoordinates(t.Vector3.Up(),w),T=t.Vector3.TransformCoordinates(E,P),S=T.multiply(u),C=T.divide(u).normalize();f.push(S.x,S.y,S.z),m.push(C.x,C.y,C.z),g.push(x,_)}if(y>0)for(var O=f.length/3,M=O-2*(p+1);M+p+2<O;M++)d.push(M),d.push(M+1),d.push(M+p+1),d.push(M+p+1),d.push(M+1),d.push(M+p+2)}e._ComputeSides(c,f,d,m,g,i.frontUVs,i.backUVs);var R=new e;return R.indices=d,R.positions=f,R.normals=m,R.uvs=g,R},e.CreateCylinder=function(i){var n,r=i.height||2,o=0===i.diameterTop?0:i.diameterTop||i.diameter||1,s=0===i.diameterBottom?0:i.diameterBottom||i.diameter||1,a=i.tessellation||24,l=i.subdivisions||1,c=!!i.hasRings,u=!!i.enclose,h=i.arc&&(i.arc<=0||i.arc>1)?1:i.arc||1,p=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,d=i.faceUV||new Array(3),f=i.faceColors,m=2+(1+(1!==h&&u?2:0))*(c?l:1);for(n=0;n<m;n++)f&&void 0===f[n]&&(f[n]=new t.Color4(1,1,1,1));for(n=0;n<m;n++)d&&void 0===d[n]&&(d[n]=new t.Vector4(0,0,1,1));var g,y,_,v,b,x,A=new Array,w=new Array,P=new Array,E=new Array,T=new Array,S=2*Math.PI*h/a,C=(s-o)/2/r,O=t.Vector3.Zero(),M=t.Vector3.Zero(),R=t.Vector3.Zero(),I=t.Vector3.Zero(),D=t.Vector3.Zero(),L=t.Axis.Y,k=1,F=1,N=0,B=0;for(v=0;v<=l;v++)for(_=((y=v/l)*(o-s)+s)/2,k=c&&0!==v&&v!==l?2:1,x=0;x<k;x++){for(c&&(F+=x),u&&(F+=2*x),b=0;b<=a;b++)g=b*S,O.x=Math.cos(-g)*_,O.y=-r/2+y*r,O.z=Math.sin(-g)*_,0===o&&v===l?(M.x=P[P.length-3*(a+1)],M.y=P[P.length-3*(a+1)+1],M.z=P[P.length-3*(a+1)+2]):(M.x=O.x,M.z=O.z,M.y=Math.sqrt(M.x*M.x+M.z*M.z)*C,M.normalize()),0===b&&(R.copyFrom(O),I.copyFrom(M)),w.push(O.x,O.y,O.z),P.push(M.x,M.y,M.z),B=c?N!==F?d[F].y:d[F].w:d[F].y+(d[F].w-d[F].y)*y,E.push(d[F].x+(d[F].z-d[F].x)*b/a,B),f&&T.push(f[F].r,f[F].g,f[F].b,f[F].a);1!==h&&u&&(w.push(O.x,O.y,O.z),w.push(0,O.y,0),w.push(0,O.y,0),w.push(R.x,R.y,R.z),t.Vector3.CrossToRef(L,M,D),D.normalize(),P.push(D.x,D.y,D.z,D.x,D.y,D.z),t.Vector3.CrossToRef(I,L,D),D.normalize(),P.push(D.x,D.y,D.z,D.x,D.y,D.z),B=c?N!==F?d[F+1].y:d[F+1].w:d[F+1].y+(d[F+1].w-d[F+1].y)*y,E.push(d[F+1].x,B),E.push(d[F+1].z,B),B=c?N!==F?d[F+2].y:d[F+2].w:d[F+2].y+(d[F+2].w-d[F+2].y)*y,E.push(d[F+2].x,B),E.push(d[F+2].z,B),f&&(T.push(f[F+1].r,f[F+1].g,f[F+1].b,f[F+1].a),T.push(f[F+1].r,f[F+1].g,f[F+1].b,f[F+1].a),T.push(f[F+2].r,f[F+2].g,f[F+2].b,f[F+2].a),T.push(f[F+2].r,f[F+2].g,f[F+2].b,f[F+2].a))),N!==F&&(N=F)}var V=1!==h&&u?a+4:a;for(v=0,F=0;F<l;F++){var z=0,U=0,j=0,G=0;for(b=0;b<a;b++)z=v*(V+1)+b,U=(v+1)*(V+1)+b,j=v*(V+1)+(b+1),G=(v+1)*(V+1)+(b+1),A.push(z,U,j),A.push(G,j,U);1!==h&&u&&(A.push(z+2,U+2,j+2),A.push(G+2,j+2,U+2),A.push(z+4,U+4,j+4),A.push(G+4,j+4,U+4)),v=c?v+2:v+1}var W=function(e){var i=e?o/2:s/2;if(0!==i){var n,l,c,u=e?d[m-1]:d[0],p=null;f&&(p=e?f[m-1]:f[0]);var g=w.length/3,y=e?r/2:-r/2,_=new t.Vector3(0,y,0);w.push(_.x,_.y,_.z),P.push(0,e?1:-1,0),E.push(u.x+.5*(u.z-u.x),u.y+.5*(u.w-u.y)),p&&T.push(p.r,p.g,p.b,p.a);var v=new t.Vector2(.5,.5);for(c=0;c<=a;c++){n=2*Math.PI*c*h/a;var b=Math.cos(-n),x=Math.sin(-n);l=new t.Vector3(b*i,y,x*i);var S=new t.Vector2(b*v.x+.5,x*v.y+.5);w.push(l.x,l.y,l.z),P.push(0,e?1:-1,0),E.push(u.x+(u.z-u.x)*S.x,u.y+(u.w-u.y)*S.y),p&&T.push(p.r,p.g,p.b,p.a)}for(c=0;c<a;c++)e?(A.push(g),A.push(g+(c+2)),A.push(g+(c+1))):(A.push(g),A.push(g+(c+1)),A.push(g+(c+2)))}};W(!1),W(!0),e._ComputeSides(p,w,A,P,E,i.frontUVs,i.backUVs);var H=new e;return H.indices=A,H.positions=w,H.normals=P,H.uvs=E,f&&(H.colors=T),H},e.CreateTorus=function(i){for(var n=[],r=[],o=[],s=[],a=i.diameter||1,l=i.thickness||.5,c=i.tessellation||16,u=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,h=c+1,p=0;p<=c;p++)for(var d=p/c,f=p*Math.PI*2/c-Math.PI/2,m=t.Matrix.Translation(a/2,0,0).multiply(t.Matrix.RotationY(f)),g=0;g<=c;g++){var y=1-g/c,_=g*Math.PI*2/c+Math.PI,v=Math.cos(_),b=Math.sin(_),x=new t.Vector3(v,b,0),A=x.scale(l/2),w=new t.Vector2(d,y);A=t.Vector3.TransformCoordinates(A,m),x=t.Vector3.TransformNormal(x,m),r.push(A.x,A.y,A.z),o.push(x.x,x.y,x.z),s.push(w.x,w.y);var P=(p+1)%h,E=(g+1)%h;n.push(p*h+g),n.push(p*h+E),n.push(P*h+g),n.push(p*h+E),n.push(P*h+E),n.push(P*h+g)}e._ComputeSides(u,r,n,o,s,i.frontUVs,i.backUVs);var T=new e;return T.indices=n,T.positions=r,T.normals=o,T.uvs=s,T},e.CreateLineSystem=function(t){for(var i=[],n=[],r=t.lines,o=t.colors,s=[],a=0,l=0;l<r.length;l++)for(var c=r[l],u=0;u<c.length;u++){if(n.push(c[u].x,c[u].y,c[u].z),o){var h=o[l];s.push(h[u].r,h[u].g,h[u].b,h[u].a)}u>0&&(i.push(a-1),i.push(a)),a++}var p=new e;return p.indices=i,p.positions=n,o&&(p.colors=s),p},e.CreateDashedLines=function(i){var n,r,o=i.dashSize||3,s=i.gapSize||1,a=i.dashNb||200,l=i.points,c=new Array,u=new Array,h=t.Vector3.Zero(),p=0,d=0,f=0,m=0,g=0;for(g=0;g<l.length-1;g++)l[g+1].subtractToRef(l[g],h),p+=h.length();for(r=o*(n=p/a)/(o+s),g=0;g<l.length-1;g++){l[g+1].subtractToRef(l[g],h),d=Math.floor(h.length()/n),h.normalize();for(var y=0;y<d;y++)f=n*y,c.push(l[g].x+f*h.x,l[g].y+f*h.y,l[g].z+f*h.z),c.push(l[g].x+(f+r)*h.x,l[g].y+(f+r)*h.y,l[g].z+(f+r)*h.z),u.push(m,m+1),m+=2}var _=new e;return _.positions=c,_.indices=u,_},e.CreateGround=function(i){var n,r,o=[],s=[],a=[],l=[],c=i.width||1,u=i.height||1,h=i.subdivisionsX||i.subdivisions||1,p=i.subdivisionsY||i.subdivisions||1;for(n=0;n<=p;n++)for(r=0;r<=h;r++){var d=new t.Vector3(r*c/h-c/2,0,(p-n)*u/p-u/2),f=new t.Vector3(0,1,0);s.push(d.x,d.y,d.z),a.push(f.x,f.y,f.z),l.push(r/h,1-n/p)}for(n=0;n<p;n++)for(r=0;r<h;r++)o.push(r+1+(n+1)*(h+1)),o.push(r+1+n*(h+1)),o.push(r+n*(h+1)),o.push(r+(n+1)*(h+1)),o.push(r+1+(n+1)*(h+1)),o.push(r+n*(h+1));var m=new e;return m.indices=o,m.positions=s,m.normals=a,m.uvs=l,m},e.CreateTiledGround=function(i){var n,r,o,s,a=void 0!==i.xmin&&null!==i.xmin?i.xmin:-1,l=void 0!==i.zmin&&null!==i.zmin?i.zmin:-1,c=void 0!==i.xmax&&null!==i.xmax?i.xmax:1,u=void 0!==i.zmax&&null!==i.zmax?i.zmax:1,h=i.subdivisions||{w:1,h:1},p=i.precision||{w:1,h:1},d=new Array,f=new Array,m=new Array,g=new Array;h.h=h.h<1?1:h.h,h.w=h.w<1?1:h.w,p.w=p.w<1?1:p.w,p.h=p.h<1?1:p.h;var y=(c-a)/h.w,_=(u-l)/h.h;for(o=0;o<h.h;o++)for(s=0;s<h.w;s++)!function(e,i,o,s){var a=f.length/3,l=p.w+1;for(n=0;n<p.h;n++)for(r=0;r<p.w;r++){var c=[a+r+n*l,a+(r+1)+n*l,a+(r+1)+(n+1)*l,a+r+(n+1)*l];d.push(c[1]),d.push(c[2]),d.push(c[3]),d.push(c[0]),d.push(c[1]),d.push(c[3])}var u=t.Vector3.Zero(),h=new t.Vector3(0,1,0);for(n=0;n<=p.h;n++)for(u.z=n*(s-i)/p.h+i,r=0;r<=p.w;r++)u.x=r*(o-e)/p.w+e,u.y=0,f.push(u.x,u.y,u.z),m.push(h.x,h.y,h.z),g.push(r/p.w,n/p.h)}(a+s*y,l+o*_,a+(s+1)*y,l+(o+1)*_);var v=new e;return v.indices=d,v.positions=f,v.normals=m,v.uvs=g,v},e.CreateGroundFromHeightMap=function(i){var n,r,o=[],s=[],a=[],l=[],c=i.colorFilter||new t.Color3(.3,.59,.11);for(n=0;n<=i.subdivisions;n++)for(r=0;r<=i.subdivisions;r++){var u=new t.Vector3(r*i.width/i.subdivisions-i.width/2,0,(i.subdivisions-n)*i.height/i.subdivisions-i.height/2),h=4*(((u.x+i.width/2)/i.width*(i.bufferWidth-1)|0)+((1-(u.z+i.height/2)/i.height)*(i.bufferHeight-1)|0)*i.bufferWidth),p=i.buffer[h]/255,d=i.buffer[h+1]/255,f=i.buffer[h+2]/255,m=p*c.r+d*c.g+f*c.b;u.y=i.minHeight+(i.maxHeight-i.minHeight)*m,s.push(u.x,u.y,u.z),a.push(0,0,0),l.push(r/i.subdivisions,1-n/i.subdivisions)}for(n=0;n<i.subdivisions;n++)for(r=0;r<i.subdivisions;r++)o.push(r+1+(n+1)*(i.subdivisions+1)),o.push(r+1+n*(i.subdivisions+1)),o.push(r+n*(i.subdivisions+1)),o.push(r+(n+1)*(i.subdivisions+1)),o.push(r+1+(n+1)*(i.subdivisions+1)),o.push(r+n*(i.subdivisions+1));e.ComputeNormals(s,o,a);var g=new e;return g.indices=o,g.positions=s,g.normals=a,g.uvs=l,g},e.CreatePlane=function(i){var n=[],r=[],o=[],s=[],a=i.width||i.size||1,l=i.height||i.size||1,c=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,u=a/2,h=l/2;r.push(-u,-h,0),o.push(0,0,-1),s.push(0,0),r.push(u,-h,0),o.push(0,0,-1),s.push(1,0),r.push(u,h,0),o.push(0,0,-1),s.push(1,1),r.push(-u,h,0),o.push(0,0,-1),s.push(0,1),n.push(0),n.push(1),n.push(2),n.push(0),n.push(2),n.push(3),e._ComputeSides(c,r,n,o,s,i.frontUVs,i.backUVs);var p=new e;return p.indices=n,p.positions=r,p.normals=o,p.uvs=s,p},e.CreateDisc=function(i){var n=new Array,r=new Array,o=new Array,s=new Array,a=i.radius||.5,l=i.tessellation||64,c=i.arc&&(i.arc<=0||i.arc>1)?1:i.arc||1,u=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE;n.push(0,0,0),s.push(.5,.5);for(var h=2*Math.PI*c,p=h/l,d=0;d<h;d+=p){var f=Math.cos(d),m=Math.sin(d),g=(f+1)/2,y=(1-m)/2;n.push(a*f,a*m,0),s.push(g,y)}1===c&&(n.push(n[3],n[4],n[5]),s.push(s[2],s[3]));for(var _=n.length/3,v=1;v<_-1;v++)r.push(v+1,0,v);e.ComputeNormals(n,r,o),e._ComputeSides(u,n,r,o,s,i.frontUVs,i.backUVs);var b=new e;return b.indices=r,b.positions=n,b.normals=o,b.uvs=s,b},e.CreatePolygon=function(i,n,r,o,s,a){for(var l=r||new Array(3),c=o,u=[],h=0;h<3;h++)void 0===l[h]&&(l[h]=new t.Vector4(0,0,1,1)),c&&void 0===c[h]&&(c[h]=new t.Color4(1,1,1,1));for(var p=i.getVerticesData(t.VertexBuffer.PositionKind),d=i.getVerticesData(t.VertexBuffer.NormalKind),f=i.getVerticesData(t.VertexBuffer.UVKind),m=i.getIndices(),g=0,y=0,_=0;_<d.length;_+=3)Math.abs(d[_+1])<.001&&(y=1),Math.abs(d[_+1]-1)<.001&&(y=0),Math.abs(d[_+1]+1)<.001&&(y=2),f[2*(g=_/3)]=(1-f[2*g])*l[y].x+f[2*g]*l[y].z,f[2*g+1]=(1-f[2*g+1])*l[y].y+f[2*g+1]*l[y].w,c&&u.push(c[y].r,c[y].g,c[y].b,c[y].a);e._ComputeSides(n,p,m,d,f,s,a);var v=new e;if(v.indices=m,v.positions=p,v.normals=d,v.uvs=f,c){var b=n===t.Mesh.DOUBLESIDE?u.concat(u):u;v.colors=b}return v},e.CreateIcoSphere=function(i){var n,r=i.sideOrientation||t.Mesh.DEFAULTSIDE,o=i.radius||1,s=void 0===i.flat||i.flat,a=i.subdivisions||4,l=i.radiusX||o,c=i.radiusY||o,u=i.radiusZ||o,h=(1+Math.sqrt(5))/2,p=[-1,h,-0,1,h,0,-1,-h,0,1,-h,0,0,-1,-h,0,1,-h,0,-1,h,0,1,h,h,0,1,h,0,-1,-h,0,1,-h,0,-1],d=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],f=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],m=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],g=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],y=new Array,_=new Array,v=new Array,b=new Array,x=0,A=new Array(3),w=new Array(3);for(n=0;n<3;n++)A[n]=t.Vector3.Zero(),w[n]=t.Vector2.Zero();for(var P=0;P<20;P++){for(n=0;n<3;n++){var E=d[3*P+n];A[n].copyFromFloats(p[3*f[E]],p[3*f[E]+1],p[3*f[E]+2]),A[n].normalize().scaleInPlace(o),w[n].copyFromFloats(m[2*E]*(138/1024)+60/1024+g[P]*(-40/1024),m[2*E+1]*(239/1024)+26/1024+g[P]*(20/1024))}for(var T=function(e,i,n,r){var o,h=t.Vector3.Lerp(A[0],A[2],i/a),p=t.Vector3.Lerp(A[1],A[2],i/a),d=a===i?A[2]:t.Vector3.Lerp(h,p,e/(a-i));if(d.normalize(),s){var f=t.Vector3.Lerp(A[0],A[2],r/a),m=t.Vector3.Lerp(A[1],A[2],r/a);o=t.Vector3.Lerp(f,m,n/(a-r))}else o=new t.Vector3(d.x,d.y,d.z);o.x/=l,o.y/=c,o.z/=u,o.normalize();var g=t.Vector2.Lerp(w[0],w[2],i/a),P=t.Vector2.Lerp(w[1],w[2],i/a),E=a===i?w[2]:t.Vector2.Lerp(g,P,e/(a-i));_.push(d.x*l,d.y*c,d.z*u),v.push(o.x,o.y,o.z),b.push(E.x,E.y),y.push(x),x++},S=0;S<a;S++)for(var C=0;C+S<a;C++)T(C,S,C+1/3,S+1/3),T(C+1,S,C+1/3,S+1/3),T(C,S+1,C+1/3,S+1/3),C+S+1<a&&(T(C+1,S,C+2/3,S+2/3),T(C+1,S+1,C+2/3,S+2/3),T(C,S+1,C+2/3,S+2/3))}e._ComputeSides(r,_,y,v,b,i.frontUVs,i.backUVs);var O=new e;return O.indices=y,O.positions=_,O.normals=v,O.uvs=b,O},e.CreatePolyhedron=function(i){var n=[];n[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},n[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},n[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},n[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},n[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},n[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},n[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},n[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},n[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},n[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},n[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},n[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},n[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},n[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},n[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};var r,o,s,a,l,c,u=i.type&&(i.type<0||i.type>=n.length)?0:i.type||0,h=i.size,p=i.sizeX||h||1,d=i.sizeY||h||1,f=i.sizeZ||h||1,m=i.custom||n[u],g=m.face.length,y=i.faceUV||new Array(g),_=i.faceColors,v=void 0===i.flat||i.flat,b=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,x=new Array,A=new Array,w=new Array,P=new Array,E=new Array,T=0,S=0,C=new Array,O=0,M=0;if(v)for(M=0;M<g;M++)_&&void 0===_[M]&&(_[M]=new t.Color4(1,1,1,1)),y&&void 0===y[M]&&(y[M]=new t.Vector4(0,0,1,1));if(v)for(M=0;M<g;M++){var R=m.face[M].length;for(s=2*Math.PI/R,a=.5*Math.tan(s/2),l=.5,O=0;O<R;O++)x.push(m.vertex[m.face[M][O]][0]*p,m.vertex[m.face[M][O]][1]*d,m.vertex[m.face[M][O]][2]*f),C.push(T),T++,r=y[M].x+(y[M].z-y[M].x)*(.5+a),o=y[M].y+(y[M].w-y[M].y)*(l-.5),P.push(r,o),c=a*Math.cos(s)-l*Math.sin(s),l=a*Math.sin(s)+l*Math.cos(s),a=c,_&&E.push(_[M].r,_[M].g,_[M].b,_[M].a);for(O=0;O<R-2;O++)A.push(C[0+S],C[O+2+S],C[O+1+S]);S+=R}else{for(O=0;O<m.vertex.length;O++)x.push(m.vertex[O][0]*p,m.vertex[O][1]*d,m.vertex[O][2]*f),P.push(0,0);for(M=0;M<g;M++)for(O=0;O<m.face[M].length-2;O++)A.push(m.face[M][0],m.face[M][O+2],m.face[M][O+1])}e.ComputeNormals(x,A,w),e._ComputeSides(b,x,A,w,P,i.frontUVs,i.backUVs);var I=new e;return I.positions=x,I.indices=A,I.normals=w,I.uvs=P,_&&v&&(I.colors=E),I},e.CreateTorusKnot=function(i){var n,r,o=new Array,s=new Array,a=new Array,l=new Array,c=i.radius||2,u=i.tube||.5,h=i.radialSegments||32,p=i.tubularSegments||32,d=i.p||2,f=i.q||3,m=0===i.sideOrientation?0:i.sideOrientation||t.Mesh.DEFAULTSIDE,g=function(e){var i=Math.cos(e),n=Math.sin(e),r=f/d*e,o=Math.cos(r),s=c*(2+o)*.5*i,a=c*(2+o)*n*.5,l=c*Math.sin(r)*.5;return new t.Vector3(s,a,l)};for(n=0;n<=h;n++){var y=n%h/h*2*d*Math.PI,_=g(y),v=g(y+.01),b=v.subtract(_),x=v.add(_),A=t.Vector3.Cross(b,x);for(x=t.Vector3.Cross(A,b),A.normalize(),x.normalize(),r=0;r<p;r++){var w=r%p/p*2*Math.PI,P=-u*Math.cos(w),E=u*Math.sin(w);s.push(_.x+P*x.x+E*A.x),s.push(_.y+P*x.y+E*A.y),s.push(_.z+P*x.z+E*A.z),l.push(n/h),l.push(r/p)}}for(n=0;n<h;n++)for(r=0;r<p;r++){var T=(r+1)%p,S=n*p+r,C=(n+1)*p+r,O=(n+1)*p+T,M=n*p+T;o.push(M),o.push(C),o.push(S),o.push(M),o.push(O),o.push(C)}e.ComputeNormals(s,o,a),e._ComputeSides(m,s,o,a,l,i.frontUVs,i.backUVs);var R=new e;return R.indices=o,R.positions=s,R.normals=a,R.uvs=l,R},e.ComputeNormals=function(e,i,n,r){var o=0,s=0,a=0,l=0,c=0,u=0,h=0,p=0,d=0,f=0,m=0,g=0,y=0,_=0,v=0,b=0,x=0,A=0,w=0,P=0,E=!1,T=!1,S=!1,C=!1,O=1,M=0,R=null;if(r&&(E=!!r.facetNormals,T=!!r.facetPositions,S=!!r.facetPartitioning,O=!0===r.useRightHandedSystem?-1:1,M=r.ratio||0,C=!!r.depthSort,R=r.distanceTo,C)){void 0===R&&(R=t.Vector3.Zero());var I=r.depthSortedFacets}var D=0,L=0,k=0,F=0;if(S&&r&&r.bbSize){var N=0,B=0,V=0,z=0,U=0,j=0,G=0,W=0,H=0,X=0,Y=0,q=0,K=0,Q=0,Z=0,J=0,$=r.bbSize.x>r.bbSize.y?r.bbSize.x:r.bbSize.y;$=$>r.bbSize.z?$:r.bbSize.z,D=r.subDiv.X*M/r.bbSize.x,L=r.subDiv.Y*M/r.bbSize.y,k=r.subDiv.Z*M/r.bbSize.z,F=r.subDiv.max*r.subDiv.max,r.facetPartitioning.length=0}for(o=0;o<e.length;o++)n[o]=0;var tt=i.length/3|0;for(o=0;o<tt;o++){if(y=(g=3*i[3*o])+1,_=g+2,b=(v=3*i[3*o+1])+1,x=v+2,w=(A=3*i[3*o+2])+1,P=A+2,s=e[g]-e[v],a=e[y]-e[b],l=e[_]-e[x],c=e[A]-e[v],u=e[w]-e[b],p=O*(a*(h=e[P]-e[x])-l*u),d=O*(l*c-s*h),f=O*(s*u-a*c),p/=m=0===(m=Math.sqrt(p*p+d*d+f*f))?1:m,d/=m,f/=m,E&&r&&(r.facetNormals[o].x=p,r.facetNormals[o].y=d,r.facetNormals[o].z=f),T&&r&&(r.facetPositions[o].x=(e[g]+e[v]+e[A])/3,r.facetPositions[o].y=(e[y]+e[b]+e[w])/3,r.facetPositions[o].z=(e[_]+e[x]+e[P])/3),S&&r&&(N=Math.floor((r.facetPositions[o].x-r.bInfo.minimum.x*M)*D),B=Math.floor((r.facetPositions[o].y-r.bInfo.minimum.y*M)*L),V=Math.floor((r.facetPositions[o].z-r.bInfo.minimum.z*M)*k),z=Math.floor((e[g]-r.bInfo.minimum.x*M)*D),U=Math.floor((e[y]-r.bInfo.minimum.y*M)*L),j=Math.floor((e[_]-r.bInfo.minimum.z*M)*k),G=Math.floor((e[v]-r.bInfo.minimum.x*M)*D),W=Math.floor((e[b]-r.bInfo.minimum.y*M)*L),H=Math.floor((e[x]-r.bInfo.minimum.z*M)*k),X=Math.floor((e[A]-r.bInfo.minimum.x*M)*D),Y=Math.floor((e[w]-r.bInfo.minimum.y*M)*L),q=Math.floor((e[P]-r.bInfo.minimum.z*M)*k),Q=z+r.subDiv.max*U+F*j,Z=G+r.subDiv.max*W+F*H,J=X+r.subDiv.max*Y+F*q,K=N+r.subDiv.max*B+F*V,r.facetPartitioning[K]=r.facetPartitioning[K]?r.facetPartitioning[K]:new Array,r.facetPartitioning[Q]=r.facetPartitioning[Q]?r.facetPartitioning[Q]:new Array,r.facetPartitioning[Z]=r.facetPartitioning[Z]?r.facetPartitioning[Z]:new Array,r.facetPartitioning[J]=r.facetPartitioning[J]?r.facetPartitioning[J]:new Array,r.facetPartitioning[Q].push(o),Z!=Q&&r.facetPartitioning[Z].push(o),J!=Z&&J!=Q&&r.facetPartitioning[J].push(o),K!=Q&&K!=Z&&K!=J&&r.facetPartitioning[K].push(o)),C&&r&&r.facetPositions){var et=I[o];et.ind=3*o,et.sqDistance=t.Vector3.DistanceSquared(r.facetPositions[o],R)}n[g]+=p,n[y]+=d,n[_]+=f,n[v]+=p,n[b]+=d,n[x]+=f,n[A]+=p,n[w]+=d,n[P]+=f}for(o=0;o<n.length/3;o++)p=n[3*o],d=n[3*o+1],f=n[3*o+2],p/=m=0===(m=Math.sqrt(p*p+d*d+f*f))?1:m,d/=m,f/=m,n[3*o]=p,n[3*o+1]=d,n[3*o+2]=f},e._ComputeSides=function(e,i,n,r,o,s,a){var l,c,u=n.length,h=r.length;switch(e=e||t.Mesh.DEFAULTSIDE){case t.Mesh.FRONTSIDE:break;case t.Mesh.BACKSIDE:var p;for(l=0;l<u;l+=3)p=n[l],n[l]=n[l+2],n[l+2]=p;for(c=0;c<h;c++)r[c]=-r[c];break;case t.Mesh.DOUBLESIDE:for(var d=i.length,f=d/3,m=0;m<d;m++)i[d+m]=i[m];for(l=0;l<u;l+=3)n[l+u]=n[l+2]+f,n[l+1+u]=n[l+1]+f,n[l+2+u]=n[l]+f;for(c=0;c<h;c++)r[h+c]=-r[c];var g=o.length,y=0;for(y=0;y<g;y++)o[y+g]=o[y];for(s=s||new t.Vector4(0,0,1,1),a=a||new t.Vector4(0,0,1,1),y=0,l=0;l<g/2;l++)o[y]=s.x+(s.z-s.x)*o[y],o[y+1]=s.y+(s.w-s.y)*o[y+1],o[y+g]=a.x+(a.z-a.x)*o[y+g],o[y+g+1]=a.y+(a.w-a.y)*o[y+g+1],y+=2}},e.ImportVertexData=function(i,n){var r=new e,o=i.positions;o&&r.set(o,t.VertexBuffer.PositionKind);var s=i.normals;s&&r.set(s,t.VertexBuffer.NormalKind);var a=i.tangents;a&&r.set(a,t.VertexBuffer.TangentKind);var l=i.uvs;l&&r.set(l,t.VertexBuffer.UVKind);var c=i.uv2s;c&&r.set(c,t.VertexBuffer.UV2Kind);var u=i.uv3s;u&&r.set(u,t.VertexBuffer.UV3Kind);var h=i.uv4s;h&&r.set(h,t.VertexBuffer.UV4Kind);var p=i.uv5s;p&&r.set(p,t.VertexBuffer.UV5Kind);var d=i.uv6s;d&&r.set(d,t.VertexBuffer.UV6Kind);var f=i.colors;f&&r.set(t.Color4.CheckColors4(f,o.length/3),t.VertexBuffer.ColorKind);var m=i.matricesIndices;m&&r.set(m,t.VertexBuffer.MatricesIndicesKind);var g=i.matricesWeights;g&&r.set(g,t.VertexBuffer.MatricesWeightsKind);var y=i.indices;y&&(r.indices=y),n.setAllVerticesData(r,i.updatable)},e}();t.VertexData=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=null),this.delayLoadState=t.Engine.DELAYLOADSTATE_NONE,this._totalVertices=0,this._isDisposed=!1,this._indexBufferIsUpdatable=!1,this.id=e,this._engine=i.getEngine(),this._meshes=[],this._scene=i,this._vertexBuffers={},this._indices=[],this._updatable=r,n?this.setAllVerticesData(n,r):(this._totalVertices=0,this._indices=[]),this._engine.getCaps().vertexArrayObject&&(this._vertexArrayObjects={}),o&&("LinesMesh"===o.getClassName()&&(this.boundingBias=new t.Vector2(0,o.intersectionThreshold),this.updateExtend()),this.applyToMesh(o),o.computeWorldMatrix(!0))}return Object.defineProperty(e.prototype,"boundingBias",{get:function(){return this._boundingBias},set:function(t){this._boundingBias&&this._boundingBias.equals(t)||(this._boundingBias=t.clone(),this.updateBoundingInfo(!0,null))},enumerable:!0,configurable:!0}),e.CreateGeometryForMesh=function(t){var i=new e(e.RandomId(),t.getScene());return i.applyToMesh(t),i},Object.defineProperty(e.prototype,"extend",{get:function(){return this._extend},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEngine=function(){return this._engine},e.prototype.isReady=function(){return this.delayLoadState===t.Engine.DELAYLOADSTATE_LOADED||this.delayLoadState===t.Engine.DELAYLOADSTATE_NONE},Object.defineProperty(e.prototype,"doNotSerialize",{get:function(){for(var t=0;t<this._meshes.length;t++)if(!this._meshes[t].doNotSerialize)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t in this._vertexArrayObjects&&(this._vertexArrayObjects={}),0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._vertexBuffers)this._vertexBuffers[t]._rebuild()},e.prototype.setAllVerticesData=function(t,e){t.applyToGeometry(this,e),this.notifyUpdate()},e.prototype.setVerticesData=function(e,i,n,r){void 0===n&&(n=!1);var o=new t.VertexBuffer(this._engine,i,e,n,0===this._meshes.length,r);this.setVerticesBuffer(o)},e.prototype.removeVerticesData=function(t){this._vertexBuffers[t]&&(this._vertexBuffers[t].dispose(),delete this._vertexBuffers[t])},e.prototype.setVerticesBuffer=function(e){var i=e.getKind();if(this._vertexBuffers[i]&&this._vertexBuffers[i].dispose(),this._vertexBuffers[i]=e,i===t.VertexBuffer.PositionKind){var n=e.getData(),r=e.getStrideSize();this._totalVertices=n.length/r,this.updateExtend(n,r),this._resetPointsArrayCache();for(var o=this._meshes,s=o.length,a=0;a<s;a++){var l=o[a];l._boundingInfo=new t.BoundingInfo(this._extend.minimum,this._extend.maximum),l._createGlobalSubMesh(!1),l.computeWorldMatrix(!0)}}this.notifyUpdate(i),this._vertexArrayObjects&&(this._disposeVertexArrayObjects(),this._vertexArrayObjects={})},e.prototype.updateVerticesDataDirectly=function(t,e,i){var n=this.getVertexBuffer(t);n&&(n.updateDirectly(e,i),this.notifyUpdate(t))},e.prototype.updateVerticesData=function(e,i,n){void 0===n&&(n=!1);var r=this.getVertexBuffer(e);if(r){if(r.update(i),e===t.VertexBuffer.PositionKind){var o=r.getStrideSize();this._totalVertices=i.length/o,this.updateBoundingInfo(n,i)}this.notifyUpdate(e)}},e.prototype.updateBoundingInfo=function(e,i){e&&this.updateExtend(i);var n=this._meshes,r=n.length;this._resetPointsArrayCache();for(var o=0;o<r;o++){var s=n[o];if(e){s._boundingInfo=new t.BoundingInfo(this._extend.minimum,this._extend.maximum);for(var a=0;a<s.subMeshes.length;a++)s.subMeshes[a].refreshBoundingInfo()}}},e.prototype._bind=function(t,e){if(t){void 0===e&&(e=this._indexBuffer);var i=this.getVertexBuffers();if(i){if(e!=this._indexBuffer||!this._vertexArrayObjects)return void this._engine.bindBuffers(i,e,t);this._vertexArrayObjects[t.key]||(this._vertexArrayObjects[t.key]=this._engine.recordVertexArrayObject(i,e,t)),this._engine.bindVertexArrayObject(this._vertexArrayObjects[t.key],e)}}},e.prototype.getTotalVertices=function(){return this.isReady()?this._totalVertices:0},e.prototype.getVerticesData=function(t,e,i){var n=this.getVertexBuffer(t);if(!n)return null;var r=n.getData();if(i||e&&1!==this._meshes.length){for(var o=r.length,s=[],a=0;a<o;a++)s.push(r[a]);return s}return r},e.prototype.isVertexBufferUpdatable=function(t){var e=this._vertexBuffers[t];return!!e&&e.isUpdatable()},e.prototype.getVertexBuffer=function(t){return this.isReady()?this._vertexBuffers[t]:null},e.prototype.getVertexBuffers=function(){return this.isReady()?this._vertexBuffers:null},e.prototype.isVerticesDataPresent=function(t){return this._vertexBuffers?void 0!==this._vertexBuffers[t]:!!this._delayInfo&&-1!==this._delayInfo.indexOf(t)},e.prototype.getVerticesDataKinds=function(){var t,e=[];if(!this._vertexBuffers&&this._delayInfo)for(t in this._delayInfo)e.push(t);else for(t in this._vertexBuffers)e.push(t);return e},e.prototype.updateIndices=function(t,e){this._indexBuffer&&(this._indexBufferIsUpdatable?this._engine.updateDynamicIndexBuffer(this._indexBuffer,t,e):this.setIndices(t,null,!0))},e.prototype.setIndices=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._disposeVertexArrayObjects(),this._indices=t,this._indexBufferIsUpdatable=i,0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices,i)),null!=e&&(this._totalVertices=e);for(var n=this._meshes,r=n.length,o=0;o<r;o++)n[o]._createGlobalSubMesh(!0);this.notifyUpdate()},e.prototype.getTotalIndices=function(){return this.isReady()?this._indices.length:0},e.prototype.getIndices=function(t){if(!this.isReady())return null;var e=this._indices;if(t&&1!==this._meshes.length){for(var i=e.length,n=[],r=0;r<i;r++)n.push(e[r]);return n}return e},e.prototype.getIndexBuffer=function(){return this.isReady()?this._indexBuffer:null},e.prototype._releaseVertexArrayObject=function(t){void 0===t&&(t=null),t&&this._vertexArrayObjects&&this._vertexArrayObjects[t.key]&&(this._engine.releaseVertexArrayObject(this._vertexArrayObjects[t.key]),delete this._vertexArrayObjects[t.key])},e.prototype.releaseForMesh=function(t,e){var i=this._meshes,n=i.indexOf(t);-1!==n&&(i.splice(n,1),t._geometry=null,0===i.length&&e&&this.dispose())},e.prototype.applyToMesh=function(t){if(t._geometry!==this){var e=t._geometry;e&&e.releaseForMesh(t);var i=this._meshes;t._geometry=this,this._scene.pushGeometry(this),i.push(t),this.isReady()?this._applyToMesh(t):t._boundingInfo=this._boundingInfo}},e.prototype.updateExtend=function(e,i){void 0===e&&(e=null),e||(e=this._vertexBuffers[t.VertexBuffer.PositionKind].getData()),this._extend=t.Tools.ExtractMinAndMax(e,0,this._totalVertices,this.boundingBias,i)},e.prototype._applyToMesh=function(e){var i=this._meshes.length;for(var n in this._vertexBuffers){1===i&&this._vertexBuffers[n].create();var r=this._vertexBuffers[n].getBuffer();r&&(r.references=i),n===t.VertexBuffer.PositionKind&&(this._extend||this.updateExtend(this._vertexBuffers[n].getData()),e._boundingInfo=new t.BoundingInfo(this._extend.minimum,this._extend.maximum),e._createGlobalSubMesh(!1),e._updateBoundingInfo())}1===i&&this._indices&&this._indices.length>0&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._indexBuffer&&(this._indexBuffer.references=i)},e.prototype.notifyUpdate=function(t){this.onGeometryUpdated&&this.onGeometryUpdated(this,t);for(var e=0,i=this._meshes;e<i.length;e++)i[e]._markSubMeshesAsAttributesDirty()},e.prototype.load=function(e,i){if(this.delayLoadState!==t.Engine.DELAYLOADSTATE_LOADING){if(this.isReady())return void(i&&i());this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADING,this._queueLoad(e,i)}},e.prototype._queueLoad=function(e,i){var n=this;this.delayLoadingFile&&(e._addPendingData(this),e._loadFile(this.delayLoadingFile,function(r){if(n._delayLoadingFunction){n._delayLoadingFunction(JSON.parse(r),n),n.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,n._delayInfo=[],e._removePendingData(n);for(var o=n._meshes,s=o.length,a=0;a<s;a++)n._applyToMesh(o[a]);i&&i()}},void 0,!0))},e.prototype.toLeftHanded=function(){var e=this.getIndices(!1);if(null!=e&&e.length>0){for(var i=0;i<e.length;i+=3){var n=e[i+0];e[i+0]=e[i+2],e[i+2]=n}this.setIndices(e)}var r=this.getVerticesData(t.VertexBuffer.PositionKind,!1);if(null!=r&&r.length>0){for(i=0;i<r.length;i+=3)r[i+2]=-r[i+2];this.setVerticesData(t.VertexBuffer.PositionKind,r,!1)}var o=this.getVerticesData(t.VertexBuffer.NormalKind,!1);if(null!=o&&o.length>0){for(i=0;i<o.length;i+=3)o[i+2]=-o[i+2];this.setVerticesData(t.VertexBuffer.NormalKind,o,!1)}},e.prototype._resetPointsArrayCache=function(){this._positions=null},e.prototype._generatePointsArray=function(){if(this._positions)return!0;this._positions=[];var e=this.getVerticesData(t.VertexBuffer.PositionKind);if(!e)return!1;for(var i=0;i<e.length;i+=3)this._positions.push(t.Vector3.FromArray(e,i));return!0},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype._disposeVertexArrayObjects=function(){if(this._vertexArrayObjects){for(var t in this._vertexArrayObjects)this._engine.releaseVertexArrayObject(this._vertexArrayObjects[t]);this._vertexArrayObjects={}}},e.prototype.dispose=function(){var e,i=this._meshes,n=i.length;for(e=0;e<n;e++)this.releaseForMesh(i[e]);for(var r in this._meshes=[],this._disposeVertexArrayObjects(),this._vertexBuffers)this._vertexBuffers[r].dispose();this._vertexBuffers={},this._totalVertices=0,this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._indexBuffer=null,this._indices=[],this.delayLoadState=t.Engine.DELAYLOADSTATE_NONE,this.delayLoadingFile=null,this._delayLoadingFunction=null,this._delayInfo=[],this._boundingInfo=null,this._scene.removeGeometry(this),this._isDisposed=!0},e.prototype.copy=function(i){var n=new t.VertexData;n.indices=[];var r=this.getIndices();if(r)for(var o=0;o<r.length;o++)n.indices.push(r[o]);var s,a=!1,l=!1;for(s in this._vertexBuffers){var c=this.getVerticesData(s);if(c instanceof Float32Array?n.set(new Float32Array(c),s):n.set(c.slice(0),s),!l){var u=this.getVertexBuffer(s);u&&(l=!(a=u.isUpdatable()))}}var h=new e(i,this._scene,n,a);for(s in h.delayLoadState=this.delayLoadState,h.delayLoadingFile=this.delayLoadingFile,h._delayLoadingFunction=this._delayLoadingFunction,this._delayInfo)h._delayInfo=h._delayInfo||[],h._delayInfo.push(s);return h._boundingInfo=new t.BoundingInfo(this._extend.minimum,this._extend.maximum),h},e.prototype.serialize=function(){var e={};return e.id=this.id,e.updatable=this._updatable,t.Tags&&t.Tags.HasTags(this)&&(e.tags=t.Tags.GetTags(this)),e},e.prototype.toNumberArray=function(t){return Array.isArray(t)?t:Array.prototype.slice.call(t)},e.prototype.serializeVerticeData=function(){var e=this.serialize();return this.isVerticesDataPresent(t.VertexBuffer.PositionKind)&&(e.positions=this.toNumberArray(this.getVerticesData(t.VertexBuffer.PositionKind)),this.isVertexBufferUpdatable(t.VertexBuffer.PositionKind)&&(e.positions._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.NormalKind)&&(e.normals=this.toNumberArray(this.getVerticesData(t.VertexBuffer.NormalKind)),this.isVertexBufferUpdatable(t.VertexBuffer.NormalKind)&&(e.normals._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.TangentKind)&&(e.tangets=this.toNumberArray(this.getVerticesData(t.VertexBuffer.TangentKind)),this.isVertexBufferUpdatable(t.VertexBuffer.TangentKind)&&(e.tangets._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(e.uvs=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UVKind)),this.isVertexBufferUpdatable(t.VertexBuffer.UVKind)&&(e.uvs._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(e.uv2s=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UV2Kind)),this.isVertexBufferUpdatable(t.VertexBuffer.UV2Kind)&&(e.uv2s._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UV3Kind)&&(e.uv3s=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UV3Kind)),this.isVertexBufferUpdatable(t.VertexBuffer.UV3Kind)&&(e.uv3s._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UV4Kind)&&(e.uv4s=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UV4Kind)),this.isVertexBufferUpdatable(t.VertexBuffer.UV4Kind)&&(e.uv4s._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UV5Kind)&&(e.uv5s=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UV5Kind)),this.isVertexBufferUpdatable(t.VertexBuffer.UV5Kind)&&(e.uv5s._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.UV6Kind)&&(e.uv6s=this.toNumberArray(this.getVerticesData(t.VertexBuffer.UV6Kind)),this.isVertexBufferUpdatable(t.VertexBuffer.UV6Kind)&&(e.uv6s._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.ColorKind)&&(e.colors=this.toNumberArray(this.getVerticesData(t.VertexBuffer.ColorKind)),this.isVertexBufferUpdatable(t.VertexBuffer.ColorKind)&&(e.colors._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.MatricesIndicesKind)&&(e.matricesIndices=this.toNumberArray(this.getVerticesData(t.VertexBuffer.MatricesIndicesKind)),e.matricesIndices._isExpanded=!0,this.isVertexBufferUpdatable(t.VertexBuffer.MatricesIndicesKind)&&(e.matricesIndices._updatable=!0)),this.isVerticesDataPresent(t.VertexBuffer.MatricesWeightsKind)&&(e.matricesWeights=this.toNumberArray(this.getVerticesData(t.VertexBuffer.MatricesWeightsKind)),this.isVertexBufferUpdatable(t.VertexBuffer.MatricesWeightsKind)&&(e.matricesWeights._updatable=!0)),e.indices=this.toNumberArray(this.getIndices()),e},e.ExtractFromMesh=function(t,e){var i=t._geometry;return i?i.copy(e):null},e.RandomId=function(){return t.Tools.RandomId()},e._ImportGeometry=function(i,n){var r=n.getScene(),o=i.geometryId;if(o){var s=r.getGeometryByID(o);s&&s.applyToMesh(n)}else if(i instanceof ArrayBuffer){var a=n._binaryInfo;if(a.positionsAttrDesc&&a.positionsAttrDesc.count>0){var l=new Float32Array(i,a.positionsAttrDesc.offset,a.positionsAttrDesc.count);n.setVerticesData(t.VertexBuffer.PositionKind,l,!1)}if(a.normalsAttrDesc&&a.normalsAttrDesc.count>0){var c=new Float32Array(i,a.normalsAttrDesc.offset,a.normalsAttrDesc.count);n.setVerticesData(t.VertexBuffer.NormalKind,c,!1)}if(a.tangetsAttrDesc&&a.tangetsAttrDesc.count>0){var u=new Float32Array(i,a.tangetsAttrDesc.offset,a.tangetsAttrDesc.count);n.setVerticesData(t.VertexBuffer.TangentKind,u,!1)}if(a.uvsAttrDesc&&a.uvsAttrDesc.count>0){var h=new Float32Array(i,a.uvsAttrDesc.offset,a.uvsAttrDesc.count);n.setVerticesData(t.VertexBuffer.UVKind,h,!1)}if(a.uvs2AttrDesc&&a.uvs2AttrDesc.count>0){var p=new Float32Array(i,a.uvs2AttrDesc.offset,a.uvs2AttrDesc.count);n.setVerticesData(t.VertexBuffer.UV2Kind,p,!1)}if(a.uvs3AttrDesc&&a.uvs3AttrDesc.count>0){var d=new Float32Array(i,a.uvs3AttrDesc.offset,a.uvs3AttrDesc.count);n.setVerticesData(t.VertexBuffer.UV3Kind,d,!1)}if(a.uvs4AttrDesc&&a.uvs4AttrDesc.count>0){var f=new Float32Array(i,a.uvs4AttrDesc.offset,a.uvs4AttrDesc.count);n.setVerticesData(t.VertexBuffer.UV4Kind,f,!1)}if(a.uvs5AttrDesc&&a.uvs5AttrDesc.count>0){var m=new Float32Array(i,a.uvs5AttrDesc.offset,a.uvs5AttrDesc.count);n.setVerticesData(t.VertexBuffer.UV5Kind,m,!1)}if(a.uvs6AttrDesc&&a.uvs6AttrDesc.count>0){var g=new Float32Array(i,a.uvs6AttrDesc.offset,a.uvs6AttrDesc.count);n.setVerticesData(t.VertexBuffer.UV6Kind,g,!1)}if(a.colorsAttrDesc&&a.colorsAttrDesc.count>0){var y=new Float32Array(i,a.colorsAttrDesc.offset,a.colorsAttrDesc.count);n.setVerticesData(t.VertexBuffer.ColorKind,y,!1,a.colorsAttrDesc.stride)}if(a.matricesIndicesAttrDesc&&a.matricesIndicesAttrDesc.count>0){var _=new Int32Array(i,a.matricesIndicesAttrDesc.offset,a.matricesIndicesAttrDesc.count);n.setVerticesData(t.VertexBuffer.MatricesIndicesKind,_,!1)}if(a.matricesWeightsAttrDesc&&a.matricesWeightsAttrDesc.count>0){var v=new Float32Array(i,a.matricesWeightsAttrDesc.offset,a.matricesWeightsAttrDesc.count);n.setVerticesData(t.VertexBuffer.MatricesWeightsKind,v,!1)}if(a.indicesAttrDesc&&a.indicesAttrDesc.count>0){var b=new Int32Array(i,a.indicesAttrDesc.offset,a.indicesAttrDesc.count);n.setIndices(b,null)}if(a.subMeshesAttrDesc&&a.subMeshesAttrDesc.count>0){var x=new Int32Array(i,a.subMeshesAttrDesc.offset,5*a.subMeshesAttrDesc.count);n.subMeshes=[];for(var A=0;A<a.subMeshesAttrDesc.count;A++){var w=x[5*A+0],P=x[5*A+1],E=x[5*A+2],T=x[5*A+3],S=x[5*A+4];t.SubMesh.AddToMesh(w,P,E,T,S,n)}}}else if(i.positions&&i.normals&&i.indices){if(n.setVerticesData(t.VertexBuffer.PositionKind,i.positions,i.positions._updatable),n.setVerticesData(t.VertexBuffer.NormalKind,i.normals,i.normals._updatable),i.tangents&&n.setVerticesData(t.VertexBuffer.TangentKind,i.tangents,i.tangents._updatable),i.uvs&&n.setVerticesData(t.VertexBuffer.UVKind,i.uvs,i.uvs._updatable),i.uvs2&&n.setVerticesData(t.VertexBuffer.UV2Kind,i.uvs2,i.uvs2._updatable),i.uvs3&&n.setVerticesData(t.VertexBuffer.UV3Kind,i.uvs3,i.uvs3._updatable),i.uvs4&&n.setVerticesData(t.VertexBuffer.UV4Kind,i.uvs4,i.uvs4._updatable),i.uvs5&&n.setVerticesData(t.VertexBuffer.UV5Kind,i.uvs5,i.uvs5._updatable),i.uvs6&&n.setVerticesData(t.VertexBuffer.UV6Kind,i.uvs6,i.uvs6._updatable),i.colors&&n.setVerticesData(t.VertexBuffer.ColorKind,t.Color4.CheckColors4(i.colors,i.positions.length/3),i.colors._updatable),i.matricesIndices)if(i.matricesIndices._isExpanded)delete i.matricesIndices._isExpanded,n.setVerticesData(t.VertexBuffer.MatricesIndicesKind,i.matricesIndices,i.matricesIndices._updatable);else{var C=[];for(A=0;A<i.matricesIndices.length;A++){var O=i.matricesIndices[A];C.push(255&O),C.push((65280&O)>>8),C.push((16711680&O)>>16),C.push(O>>24)}n.setVerticesData(t.VertexBuffer.MatricesIndicesKind,C,i.matricesIndices._updatable)}if(i.matricesIndicesExtra)if(i.matricesIndicesExtra._isExpanded)delete i.matricesIndices._isExpanded,n.setVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,i.matricesIndicesExtra,i.matricesIndicesExtra._updatable);else{for(C=[],A=0;A<i.matricesIndicesExtra.length;A++){O=i.matricesIndicesExtra[A];C.push(255&O),C.push((65280&O)>>8),C.push((16711680&O)>>16),C.push(O>>24)}n.setVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,C,i.matricesIndicesExtra._updatable)}i.matricesWeights&&(e._CleanMatricesWeights(i,n),n.setVerticesData(t.VertexBuffer.MatricesWeightsKind,i.matricesWeights,i.matricesWeights._updatable)),i.matricesWeightsExtra&&n.setVerticesData(t.VertexBuffer.MatricesWeightsExtraKind,i.matricesWeightsExtra,i.matricesWeights._updatable),n.setIndices(i.indices,null)}if(i.subMeshes){n.subMeshes=[];for(var M=0;M<i.subMeshes.length;M++){var R=i.subMeshes[M];t.SubMesh.AddToMesh(R.materialIndex,R.verticesStart,R.verticesCount,R.indexStart,R.indexCount,n)}}n._shouldGenerateFlatShading&&(n.convertToFlatShadedMesh(),delete n._shouldGenerateFlatShading),n.computeWorldMatrix(!0);var I=r.selectionOctree;null!=I&&I.addMesh(n)},e._CleanMatricesWeights=function(e,i){if(t.SceneLoader.CleanBoneMatrixWeights){var n=0;if(e.skeletonId>-1){var r=i.getScene().getLastSkeletonByID(e.skeletonId);if(r){n=r.bones.length;for(var o=i.getVerticesData(t.VertexBuffer.MatricesIndicesKind),s=i.getVerticesData(t.VertexBuffer.MatricesIndicesExtraKind),a=e.matricesWeights,l=e.matricesWeightsExtra,c=e.numBoneInfluencer,u=a.length,h=0;h<u;h+=4){for(var p=0,d=-1,f=0;f<4;f++){p+=m=a[h+f],m<.001&&d<0&&(d=f)}if(l)for(f=0;f<4;f++){var m;p+=m=l[h+f],m<.001&&d<0&&(d=f+4)}if((d<0||d>c-1)&&(d=c-1),p>.001){var g=1/p;for(f=0;f<4;f++)a[h+f]*=g;if(l)for(f=0;f<4;f++)l[h+f]*=g}else d>=4?(l[h+d-4]=1-p,s[h+d-4]=n):(a[h+d]=1-p,o[h+d]=n)}i.setVerticesData(t.VertexBuffer.MatricesIndicesKind,o),e.matricesWeightsExtra&&i.setVerticesData(t.VertexBuffer.MatricesIndicesExtraKind,s)}}}},e.Parse=function(i,n,r){if(n.getGeometryByID(i.id))return null;var o=new e(i.id,n,void 0,i.updatable);return t.Tags&&t.Tags.AddTagsTo(o,i.tags),i.delayLoadingFile?(o.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED,o.delayLoadingFile=r+i.delayLoadingFile,o._boundingInfo=new t.BoundingInfo(t.Vector3.FromArray(i.boundingBoxMinimum),t.Vector3.FromArray(i.boundingBoxMaximum)),o._delayInfo=[],i.hasUVs&&o._delayInfo.push(t.VertexBuffer.UVKind),i.hasUVs2&&o._delayInfo.push(t.VertexBuffer.UV2Kind),i.hasUVs3&&o._delayInfo.push(t.VertexBuffer.UV3Kind),i.hasUVs4&&o._delayInfo.push(t.VertexBuffer.UV4Kind),i.hasUVs5&&o._delayInfo.push(t.VertexBuffer.UV5Kind),i.hasUVs6&&o._delayInfo.push(t.VertexBuffer.UV6Kind),i.hasColors&&o._delayInfo.push(t.VertexBuffer.ColorKind),i.hasMatricesIndices&&o._delayInfo.push(t.VertexBuffer.MatricesIndicesKind),i.hasMatricesWeights&&o._delayInfo.push(t.VertexBuffer.MatricesWeightsKind),o._delayLoadingFunction=t.VertexData.ImportVertexData):t.VertexData.ImportVertexData(i,o),n.pushGeometry(o,!0),o},e}();t.Geometry=e;var i=function(t){function e(e,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var o=t.call(this,e,i,void 0,!1,r)||this;return o._canBeRegenerated=n,o._beingRegenerated=!0,o.regenerate(),o._beingRegenerated=!1,o}return o(e,t),e.prototype.canBeRegenerated=function(){return this._canBeRegenerated},e.prototype.regenerate=function(){this._canBeRegenerated&&(this._beingRegenerated=!0,this.setAllVerticesData(this._regenerateVertexData(),!1),this._beingRegenerated=!1)},e.prototype.asNewGeometry=function(e){return t.prototype.copy.call(this,e)},e.prototype.setAllVerticesData=function(e,i){this._beingRegenerated&&t.prototype.setAllVerticesData.call(this,e,!1)},e.prototype.setVerticesData=function(e,i,n){this._beingRegenerated&&t.prototype.setVerticesData.call(this,e,i,!1)},e.prototype._regenerateVertexData=function(){throw new Error("Abstract method")},e.prototype.copy=function(t){throw new Error("Must be overriden in sub-classes.")},e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return e.canBeRegenerated=this.canBeRegenerated(),e},e}(e);t._PrimitiveGeometry=i;var n=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===u&&(u=t.Mesh.DEFAULTSIDE);var h=e.call(this,i,n,l,c)||this;return h.pathArray=r,h.closeArray=o,h.closePath=s,h.offset=a,h.side=u,h}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateRibbon({pathArray:this.pathArray,closeArray:this.closeArray,closePath:this.closePath,offset:this.offset,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.pathArray,this.closeArray,this.closePath,this.offset,this.canBeRegenerated(),void 0,this.side)},i}(i);t.RibbonGeometry=n;var r=function(e){function i(i,n,r,o,s,a){void 0===s&&(s=null),void 0===a&&(a=t.Mesh.DEFAULTSIDE);var l=e.call(this,i,n,o,s)||this;return l.size=r,l.side=a,l}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateBox({size:this.size,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.size,this.canBeRegenerated(),void 0,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.size=this.size,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.size,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.BoxGeometry=r;var s=function(e){function i(i,n,r,o,s,a,l){void 0===a&&(a=null),void 0===l&&(l=t.Mesh.DEFAULTSIDE);var c=e.call(this,i,n,s,a)||this;return c.segments=r,c.diameter=o,c.side=l,c}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateSphere({segments:this.segments,diameter:this.diameter,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.segments,this.diameter,this.canBeRegenerated(),null,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.segments=this.segments,t.diameter=this.diameter,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.segments,e.diameter,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.SphereGeometry=s;var a=function(e){function i(i,n,r,o,s,a,l){void 0===a&&(a=null),void 0===l&&(l=t.Mesh.DEFAULTSIDE);var c=e.call(this,i,n,s,a)||this;return c.radius=r,c.tessellation=o,c.side=l,c}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateDisc({radius:this.radius,tessellation:this.tessellation,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.radius,this.tessellation,this.canBeRegenerated(),null,this.side)},i}(i);t.DiscGeometry=a;var l=function(e){function i(i,n,r,o,s,a,l,c,u,h){void 0===l&&(l=1),void 0===u&&(u=null),void 0===h&&(h=t.Mesh.DEFAULTSIDE);var p=e.call(this,i,n,c,u)||this;return p.height=r,p.diameterTop=o,p.diameterBottom=s,p.tessellation=a,p.subdivisions=l,p.side=h,p}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateCylinder({height:this.height,diameterTop:this.diameterTop,diameterBottom:this.diameterBottom,tessellation:this.tessellation,subdivisions:this.subdivisions,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.height,this.diameterTop,this.diameterBottom,this.tessellation,this.subdivisions,this.canBeRegenerated(),null,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.height=this.height,t.diameterTop=this.diameterTop,t.diameterBottom=this.diameterBottom,t.tessellation=this.tessellation,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.height,e.diameterTop,e.diameterBottom,e.tessellation,e.subdivisions,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.CylinderGeometry=l;var c=function(e){function i(i,n,r,o,s,a,l,c){void 0===l&&(l=null),void 0===c&&(c=t.Mesh.DEFAULTSIDE);var u=e.call(this,i,n,a,l)||this;return u.diameter=r,u.thickness=o,u.tessellation=s,u.side=c,u}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateTorus({diameter:this.diameter,thickness:this.thickness,tessellation:this.tessellation,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.diameter,this.thickness,this.tessellation,this.canBeRegenerated(),null,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.diameter=this.diameter,t.thickness=this.thickness,t.tessellation=this.tessellation,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.diameter,e.thickness,e.tessellation,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.TorusGeometry=c;var u=function(e){function i(t,i,n,r,o,s,a){void 0===a&&(a=null);var l=e.call(this,t,i,s,a)||this;return l.width=n,l.height=r,l.subdivisions=o,l}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateGround({width:this.width,height:this.height,subdivisions:this.subdivisions})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.width,this.height,this.subdivisions,this.canBeRegenerated(),null)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.width=this.width,t.height=this.height,t.subdivisions=this.subdivisions,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.width,e.height,e.subdivisions,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.GroundGeometry=u;var h=function(e){function i(t,i,n,r,o,s,a,l,c,u){void 0===u&&(u=null);var h=e.call(this,t,i,c,u)||this;return h.xmin=n,h.zmin=r,h.xmax=o,h.zmax=s,h.subdivisions=a,h.precision=l,h}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateTiledGround({xmin:this.xmin,zmin:this.zmin,xmax:this.xmax,zmax:this.zmax,subdivisions:this.subdivisions,precision:this.precision})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.xmin,this.zmin,this.xmax,this.zmax,this.subdivisions,this.precision,this.canBeRegenerated(),null)},i}(i);t.TiledGroundGeometry=h;var p=function(e){function i(i,n,r,o,s,a){void 0===s&&(s=null),void 0===a&&(a=t.Mesh.DEFAULTSIDE);var l=e.call(this,i,n,o,s)||this;return l.size=r,l.side=a,l}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreatePlane({size:this.size,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.size,this.canBeRegenerated(),null,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.size=this.size,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.size,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.PlaneGeometry=p;var d=function(e){function i(i,n,r,o,s,a,l,c,u,h,p){void 0===h&&(h=null),void 0===p&&(p=t.Mesh.DEFAULTSIDE);var d=e.call(this,i,n,u,h)||this;return d.radius=r,d.tube=o,d.radialSegments=s,d.tubularSegments=a,d.p=l,d.q=c,d.side=p,d}return o(i,e),i.prototype._regenerateVertexData=function(){return t.VertexData.CreateTorusKnot({radius:this.radius,tube:this.tube,radialSegments:this.radialSegments,tubularSegments:this.tubularSegments,p:this.p,q:this.q,sideOrientation:this.side})},i.prototype.copy=function(t){return new i(t,this.getScene(),this.radius,this.tube,this.radialSegments,this.tubularSegments,this.p,this.q,this.canBeRegenerated(),null,this.side)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.radius=this.radius,t.tube=this.tube,t.radialSegments=this.radialSegments,t.tubularSegments=this.tubularSegments,t.p=this.p,t.q=this.q,t},i.Parse=function(e,n){if(n.getGeometryByID(e.id))return null;var r=new i(e.id,n,e.radius,e.tube,e.radialSegments,e.tubularSegments,e.p,e.q,e.canBeRegenerated,null);return t.Tags&&t.Tags.AddTagsTo(r,e.tags),n.pushGeometry(r,!0),r},i}(i);t.TorusKnotGeometry=d}(l||(l={})),function(t){var e=function(){function e(t){this._vertexBuffers={},this._scene=t}return e.prototype._prepareBuffers=function(){if(!this._vertexBuffers[t.VertexBuffer.PositionKind]){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1),this._vertexBuffers[t.VertexBuffer.PositionKind]=new t.VertexBuffer(this._scene.getEngine(),e,t.VertexBuffer.PositionKind,!1,!1,2),this._buildIndexBuffer()}},e.prototype._buildIndexBuffer=function(){var t=[];t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),this._indexBuffer=this._scene.getEngine().createIndexBuffer(t)},e.prototype._rebuild=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&(e._rebuild(),this._buildIndexBuffer())},e.prototype._prepareFrame=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this._scene.activeCamera;return!!i&&!(!(e=e||i._postProcesses)||0===e.length||!this._scene.postProcessesEnabled||(e[0].activate(i,t,null!=e),0))},e.prototype.directRender=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=!1);for(var r=this._scene.getEngine(),o=0;o<e.length;o++){o<e.length-1?e[o+1].activate(this._scene.activeCamera,i):i?r.bindFramebuffer(i,0,void 0,void 0,n):r.restoreDefaultFramebuffer();var s=e[o],a=s.apply();a&&(s.onBeforeRenderObservable.notifyObservers(a),this._prepareBuffers(),r.bindBuffers(this._vertexBuffers,this._indexBuffer,a),r.drawElementsType(t.Material.TriangleFillMode,0,6),s.onAfterRenderObservable.notifyObservers(a))}r.setDepthBuffer(!0),r.setDepthWrite(!0)},e.prototype._finalizeFrame=function(e,i,n,r,o){void 0===o&&(o=!1);var s=this._scene.activeCamera;if(s&&(0!==(r=r||s._postProcesses).length&&this._scene.postProcessesEnabled)){for(var a=this._scene.getEngine(),l=0,c=r.length;l<c&&(l<c-1?r[l+1].activate(s,i):i?a.bindFramebuffer(i,n,void 0,void 0,o):a.restoreDefaultFramebuffer(),!e);l++){var u=r[l],h=u.apply();h&&(u.onBeforeRenderObservable.notifyObservers(h),this._prepareBuffers(),a.bindBuffers(this._vertexBuffers,this._indexBuffer,h),a.drawElementsType(t.Material.TriangleFillMode,0,6),u.onAfterRenderObservable.notifyObservers(h))}a.setDepthBuffer(!0),a.setDepthWrite(!0),a.setAlphaMode(t.Engine.ALPHA_DISABLE)}},e.prototype.dispose=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&(e.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null)},e}();t.PostProcessManager=e}(l||(l={})),function(t){var e=function(){function e(t){void 0===t&&(t=30),this._enabled=!0,this._rollingFrameTime=new i(t)}return e.prototype.sampleFrame=function(e){if(void 0===e&&(e=t.Tools.Now),this._enabled){if(null!=this._lastFrameTimeMs){var i=e-this._lastFrameTimeMs;this._rollingFrameTime.add(i)}this._lastFrameTimeMs=e}},Object.defineProperty(e.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFPS",{get:function(){var t=this._rollingFrameTime.history(0);return 0===t?0:1e3/t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!0,configurable:!0}),e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},e}();t.PerformanceMonitor=e;var i=function(){function t(t){this._samples=new Array(t),this.reset()}return t.prototype.add=function(t){var e;if(this.isSaturated()){var i=this._samples[this._pos];e=i-this.average,this.average-=e/(this._sampleCount-1),this._m2-=e*(i-this.average)}else this._sampleCount++;e=t-this.average,this.average+=e/this._sampleCount,this._m2+=e*(t-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=t,this._pos++,this._pos%=this._samples.length},t.prototype.history=function(t){if(t>=this._sampleCount||t>=this._samples.length)return 0;var e=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(e-t)]},t.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},t.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},t.prototype._wrapPosition=function(t){var e=this._samples.length;return(t%e+e)%e},t}();t.RollingAverage=i}(l||(l={})),function(t){var e=function(){function e(){this.colorCurves=new t.ColorCurves,this._colorCurvesEnabled=!1,this._colorGradingEnabled=!1,this._colorGradingWithGreenDepth=!0,this._colorGradingBGR=!0,this._exposure=1,this._toneMappingEnabled=!1,this._contrast=1,this.vignetteStretch=0,this.vignetteCentreX=0,this.vignetteCentreY=0,this.vignetteWeight=1.5,this.vignetteColor=new t.Color4(0,0,0,0),this.vignetteCameraFov=.5,this._vignetteBlendMode=e.VIGNETTEMODE_MULTIPLY,this._vignetteEnabled=!1,this._applyByPostProcess=!1,this._isEnabled=!0,this.onUpdateParameters=new t.Observable}return Object.defineProperty(e.prototype,"colorCurvesEnabled",{get:function(){return this._colorCurvesEnabled},set:function(t){this._colorCurvesEnabled!==t&&(this._colorCurvesEnabled=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingEnabled",{get:function(){return this._colorGradingEnabled},set:function(t){this._colorGradingEnabled!==t&&(this._colorGradingEnabled=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingWithGreenDepth",{get:function(){return this._colorGradingWithGreenDepth},set:function(t){this._colorGradingWithGreenDepth!==t&&(this._colorGradingWithGreenDepth=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingBGR",{get:function(){return this._colorGradingBGR},set:function(t){this._colorGradingBGR!==t&&(this._colorGradingBGR=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exposure",{get:function(){return this._exposure},set:function(t){this._exposure!==t&&(this._exposure=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toneMappingEnabled",{get:function(){return this._toneMappingEnabled},set:function(t){this._toneMappingEnabled!==t&&(this._toneMappingEnabled=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contrast",{get:function(){return this._contrast},set:function(t){this._contrast!==t&&(this._contrast=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vignetteBlendMode",{get:function(){return this._vignetteBlendMode},set:function(t){this._vignetteBlendMode!==t&&(this._vignetteBlendMode=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vignetteEnabled",{get:function(){return this._vignetteEnabled},set:function(t){this._vignetteEnabled!==t&&(this._vignetteEnabled=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyByPostProcess",{get:function(){return this._applyByPostProcess},set:function(t){this._applyByPostProcess!==t&&(this._applyByPostProcess=t,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,this._updateParameters())},enumerable:!0,configurable:!0}),e.prototype._updateParameters=function(){this.onUpdateParameters.notifyObservers(this)},e.prototype.getClassName=function(){return"ImageProcessingConfiguration"},e.PrepareUniforms=function(e,i){i.EXPOSURE&&e.push("exposureLinear"),i.CONTRAST&&e.push("contrast"),i.COLORGRADING&&e.push("colorTransformSettings"),i.VIGNETTE&&(e.push("vInverseScreenSize"),e.push("vignetteSettings1"),e.push("vignetteSettings2")),i.COLORCURVES&&t.ColorCurves.PrepareUniforms(e)},e.PrepareSamplers=function(t,e){e.COLORGRADING&&t.push("txColorTransform")},e.prototype.prepareDefines=function(t,i){if(void 0===i&&(i=!1),i!==this.applyByPostProcess||!this._isEnabled)return t.VIGNETTE=!1,t.TONEMAPPING=!1,t.CONTRAST=!1,t.EXPOSURE=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.IMAGEPROCESSING=!1,void(t.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess&&this._isEnabled);t.VIGNETTE=this.vignetteEnabled,t.VIGNETTEBLENDMODEMULTIPLY=this.vignetteBlendMode===e._VIGNETTEMODE_MULTIPLY,t.VIGNETTEBLENDMODEOPAQUE=!t.VIGNETTEBLENDMODEMULTIPLY,t.TONEMAPPING=this.toneMappingEnabled,t.CONTRAST=1!==this.contrast,t.EXPOSURE=1!==this.exposure,t.COLORCURVES=this.colorCurvesEnabled&&!!this.colorCurves,t.COLORGRADING=this.colorGradingEnabled&&!!this.colorGradingTexture,t.COLORGRADING?t.COLORGRADING3D=this.colorGradingTexture.is3D:t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=this.colorGradingWithGreenDepth,t.SAMPLER3DBGRMAP=this.colorGradingBGR,t.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess,t.IMAGEPROCESSING=t.VIGNETTE||t.TONEMAPPING||t.CONTRAST||t.EXPOSURE||t.COLORCURVES||t.COLORGRADING},e.prototype.isReady=function(){return!this.colorGradingEnabled||!this.colorGradingTexture||this.colorGradingTexture.isReady()},e.prototype.bind=function(e,i){if(void 0===i&&(i=1),this._colorCurvesEnabled&&this.colorCurves&&t.ColorCurves.Bind(this.colorCurves,e),this._vignetteEnabled){var n=1/e.getEngine().getRenderWidth(),r=1/e.getEngine().getRenderHeight();e.setFloat2("vInverseScreenSize",n,r);var o=Math.tan(.5*this.vignetteCameraFov),s=o*i,a=Math.sqrt(s*o);s=t.Tools.Mix(s,a,this.vignetteStretch),o=t.Tools.Mix(o,a,this.vignetteStretch),e.setFloat4("vignetteSettings1",s,o,-s*this.vignetteCentreX,-o*this.vignetteCentreY);var l=-2*this.vignetteWeight;e.setFloat4("vignetteSettings2",this.vignetteColor.r,this.vignetteColor.g,this.vignetteColor.b,l)}if(e.setFloat("exposureLinear",this.exposure),e.setFloat("contrast",this.contrast),this.colorGradingTexture){e.setTexture("txColorTransform",this.colorGradingTexture);var c=this.colorGradingTexture.getSize().height;e.setFloat4("colorTransformSettings",(c-1)/c,.5/c,c,this.colorGradingTexture.level)}},e.prototype.clone=function(){return t.SerializationHelper.Clone(function(){return new e},this)},e.prototype.serialize=function(){return t.SerializationHelper.Serialize(this)},e.Parse=function(i){return t.SerializationHelper.Parse(function(){return new e},i,null,null)},Object.defineProperty(e,"VIGNETTEMODE_MULTIPLY",{get:function(){return this._VIGNETTEMODE_MULTIPLY},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VIGNETTEMODE_OPAQUE",{get:function(){return this._VIGNETTEMODE_OPAQUE},enumerable:!0,configurable:!0}),e._VIGNETTEMODE_MULTIPLY=0,e._VIGNETTEMODE_OPAQUE=1,r([t.serializeAsColorCurves()],e.prototype,"colorCurves",void 0),r([t.serialize()],e.prototype,"_colorCurvesEnabled",void 0),r([t.serializeAsTexture()],e.prototype,"colorGradingTexture",void 0),r([t.serialize()],e.prototype,"_colorGradingEnabled",void 0),r([t.serialize()],e.prototype,"_colorGradingWithGreenDepth",void 0),r([t.serialize()],e.prototype,"_colorGradingBGR",void 0),r([t.serialize()],e.prototype,"_exposure",void 0),r([t.serialize()],e.prototype,"_toneMappingEnabled",void 0),r([t.serialize()],e.prototype,"_contrast",void 0),r([t.serialize()],e.prototype,"vignetteStretch",void 0),r([t.serialize()],e.prototype,"vignetteCentreX",void 0),r([t.serialize()],e.prototype,"vignetteCentreY",void 0),r([t.serialize()],e.prototype,"vignetteWeight",void 0),r([t.serializeAsColor4()],e.prototype,"vignetteColor",void 0),r([t.serialize()],e.prototype,"vignetteCameraFov",void 0),r([t.serialize()],e.prototype,"_vignetteBlendMode",void 0),r([t.serialize()],e.prototype,"_vignetteEnabled",void 0),r([t.serialize()],e.prototype,"_applyByPostProcess",void 0),r([t.serialize()],e.prototype,"_isEnabled",void 0),e}();t.ImageProcessingConfiguration=e}(l||(l={})),function(t){var e=function(e){function i(i,n){var r=e.call(this,n)||this;return i?(r._engine=n.getEngine(),r._textureMatrix=t.Matrix.Identity(),r.name=i,r.url=i,r.hasAlpha=!1,r.isCube=!1,r.is3D=r._engine.webGLVersion>1,r.wrapU=t.Texture.CLAMP_ADDRESSMODE,r.wrapV=t.Texture.CLAMP_ADDRESSMODE,r.wrapR=t.Texture.CLAMP_ADDRESSMODE,r.anisotropicFilteringLevel=1,r._texture=r._getFromCache(i,!0),r._texture||(n.useDelayedTextureLoading?r.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED:r.loadTexture()),r):r}return o(i,e),i.prototype.getTextureMatrix=function(){return this._textureMatrix},i.prototype.load3dlTexture=function(){var e,n=this._engine;e=1===n.webGLVersion?n.createRawTexture(null,1,1,t.Engine.TEXTUREFORMAT_RGBA,!1,!1,t.Texture.BILINEAR_SAMPLINGMODE):n.createRawTexture3D(null,1,1,1,t.Engine.TEXTUREFORMAT_RGBA,!1,!1,t.Texture.BILINEAR_SAMPLINGMODE),this._texture=e;var r=function(r){if("string"==typeof r){for(var o,s=null,a=null,l=r.split("\n"),c=0,u=0,h=0,p=0,d=0,f=0;f<l.length;f++)if(o=l[f],i._noneEmptyLineRegex.test(o)&&0!==o.indexOf("#")){var m=o.split(" ");if(0!==c){if(0!=c){var g=Math.max(parseInt(m[0]),0),y=Math.max(parseInt(m[1]),0),_=Math.max(parseInt(m[2]),0);d=Math.max(g,d),d=Math.max(y,d),d=Math.max(_,d);var v=4*(u+p*c+h*c*c);a&&(a[v+0]=g,a[v+1]=y,a[v+2]=_),++p%c==0&&(p=0,++h%c==0&&(u++,h=0))}}else c=m.length,s=new Uint8Array(c*c*c*4),a=new Float32Array(c*c*c*4)}if(a&&s)for(f=0;f<a.length;f++)if(f>0&&(f+1)%4==0)s[f]=255;else{var b=a[f];s[f]=b/d*255}e.is3D?(e.updateSize(c,c,c),n.updateRawTexture3D(e,s,t.Engine.TEXTUREFORMAT_RGBA,!1)):(e.updateSize(c*c,c),n.updateRawTexture(e,s,t.Engine.TEXTUREFORMAT_RGBA,!1))}},o=this.getScene();return o?o._loadFile(this.url,r):this._engine._loadFile(this.url,r),this._texture},i.prototype.loadTexture=function(){this.url&&this.url.toLocaleLowerCase().indexOf(".3dl")==this.url.length-4&&this.load3dlTexture()},i.prototype.clone=function(){var t=new i(this.url,this.getScene());return t.level=this.level,t},i.prototype.delayLoad=function(){this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,!0),this._texture||this.loadTexture())},i.Parse=function(t,e,n){var r=null;return t.name&&!t.isRenderTarget&&((r=new i(t.name,e)).name=t.name,r.level=t.level),r},i.prototype.serialize=function(){if(!this.name)return null;var t={};return t.name=this.name,t.level=this.level,t.customType="BABYLON.ColorGradingTexture",t},i._noneEmptyLineRegex=/\S+/,i}(t.BaseTexture);t.ColorGradingTexture=e}(l||(l={})),function(t){var e=function(){function e(){this._dirty=!0,this._tempColor=new t.Color4(0,0,0,0),this._globalCurve=new t.Color4(0,0,0,0),this._highlightsCurve=new t.Color4(0,0,0,0),this._midtonesCurve=new t.Color4(0,0,0,0),this._shadowsCurve=new t.Color4(0,0,0,0),this._positiveCurve=new t.Color4(0,0,0,0),this._negativeCurve=new t.Color4(0,0,0,0),this._globalHue=30,this._globalDensity=0,this._globalSaturation=0,this._globalExposure=0,this._highlightsHue=30,this._highlightsDensity=0,this._highlightsSaturation=0,this._highlightsExposure=0,this._midtonesHue=30,this._midtonesDensity=0,this._midtonesSaturation=0,this._midtonesExposure=0,this._shadowsHue=30,this._shadowsDensity=0,this._shadowsSaturation=0,this._shadowsExposure=0}return Object.defineProperty(e.prototype,"globalHue",{get:function(){return this._globalHue},set:function(t){this._globalHue=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalDensity",{get:function(){return this._globalDensity},set:function(t){this._globalDensity=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalSaturation",{get:function(){return this._globalSaturation},set:function(t){this._globalSaturation=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsHue",{get:function(){return this._highlightsHue},set:function(t){this._highlightsHue=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsDensity",{get:function(){return this._highlightsDensity},set:function(t){this._highlightsDensity=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsSaturation",{get:function(){return this._highlightsSaturation},set:function(t){this._highlightsSaturation=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsExposure",{get:function(){return this._highlightsExposure},set:function(t){this._highlightsExposure=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesHue",{get:function(){return this._midtonesHue},set:function(t){this._midtonesHue=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesDensity",{get:function(){return this._midtonesDensity},set:function(t){this._midtonesDensity=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesSaturation",{get:function(){return this._midtonesSaturation},set:function(t){this._midtonesSaturation=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesExposure",{get:function(){return this._midtonesExposure},set:function(t){this._midtonesExposure=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsHue",{get:function(){return this._shadowsHue},set:function(t){this._shadowsHue=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsDensity",{get:function(){return this._shadowsDensity},set:function(t){this._shadowsDensity=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsSaturation",{get:function(){return this._shadowsSaturation},set:function(t){this._shadowsSaturation=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsExposure",{get:function(){return this._shadowsExposure},set:function(t){this._shadowsExposure=t,this._dirty=!0},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"ColorCurves"},e.Bind=function(t,e,i,n,r){void 0===i&&(i="vCameraColorCurvePositive"),void 0===n&&(n="vCameraColorCurveNeutral"),void 0===r&&(r="vCameraColorCurveNegative"),t._dirty&&(t._dirty=!1,t.getColorGradingDataToRef(t._globalHue,t._globalDensity,t._globalSaturation,t._globalExposure,t._globalCurve),t.getColorGradingDataToRef(t._highlightsHue,t._highlightsDensity,t._highlightsSaturation,t._highlightsExposure,t._tempColor),t._tempColor.multiplyToRef(t._globalCurve,t._highlightsCurve),t.getColorGradingDataToRef(t._midtonesHue,t._midtonesDensity,t._midtonesSaturation,t._midtonesExposure,t._tempColor),t._tempColor.multiplyToRef(t._globalCurve,t._midtonesCurve),t.getColorGradingDataToRef(t._shadowsHue,t._shadowsDensity,t._shadowsSaturation,t._shadowsExposure,t._tempColor),t._tempColor.multiplyToRef(t._globalCurve,t._shadowsCurve),t._highlightsCurve.subtractToRef(t._midtonesCurve,t._positiveCurve),t._midtonesCurve.subtractToRef(t._shadowsCurve,t._negativeCurve)),e&&(e.setFloat4(i,t._positiveCurve.r,t._positiveCurve.g,t._positiveCurve.b,t._positiveCurve.a),e.setFloat4(n,t._midtonesCurve.r,t._midtonesCurve.g,t._midtonesCurve.b,t._midtonesCurve.a),e.setFloat4(r,t._negativeCurve.r,t._negativeCurve.g,t._negativeCurve.b,t._negativeCurve.a))},e.PrepareUniforms=function(t){t.push("vCameraColorCurveNeutral","vCameraColorCurvePositive","vCameraColorCurveNegative")},e.prototype.getColorGradingDataToRef=function(t,i,n,r,o){null!=t&&(t=e.clamp(t,0,360),i=e.clamp(i,-100,100),n=e.clamp(n,-100,100),r=e.clamp(r,-100,100),i=e.applyColorGradingSliderNonlinear(i),i*=.5,r=e.applyColorGradingSliderNonlinear(r),i<0&&(i*=-1,t=(t+180)%360),e.fromHSBToRef(t,i,50+.25*r,o),o.scaleToRef(2,o),o.a=1+.01*n)},e.applyColorGradingSliderNonlinear=function(t){t/=100;var e=Math.abs(t);return e=Math.pow(e,2),t<0&&(e*=-1),100*e},e.fromHSBToRef=function(t,i,n,r){var o=e.clamp(t,0,360),s=e.clamp(i/100,0,1),a=e.clamp(n/100,0,1);if(0===s)r.r=a,r.g=a,r.b=a;else{o/=60;var l=Math.floor(o),c=o-l,u=a*(1-s),h=a*(1-s*c),p=a*(1-s*(1-c));switch(l){case 0:r.r=a,r.g=p,r.b=u;break;case 1:r.r=h,r.g=a,r.b=u;break;case 2:r.r=u,r.g=a,r.b=p;break;case 3:r.r=u,r.g=h,r.b=a;break;case 4:r.r=p,r.g=u,r.b=a;break;default:r.r=a,r.g=u,r.b=h}}r.a=1},e.clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},e.prototype.clone=function(){return t.SerializationHelper.Clone(function(){return new e},this)},e.prototype.serialize=function(){return t.SerializationHelper.Serialize(this)},e.Parse=function(i){return t.SerializationHelper.Parse(function(){return new e},i,null,null)},r([t.serialize()],e.prototype,"_globalHue",void 0),r([t.serialize()],e.prototype,"_globalDensity",void 0),r([t.serialize()],e.prototype,"_globalSaturation",void 0),r([t.serialize()],e.prototype,"_globalExposure",void 0),r([t.serialize()],e.prototype,"_highlightsHue",void 0),r([t.serialize()],e.prototype,"_highlightsDensity",void 0),r([t.serialize()],e.prototype,"_highlightsSaturation",void 0),r([t.serialize()],e.prototype,"_highlightsExposure",void 0),r([t.serialize()],e.prototype,"_midtonesHue",void 0),r([t.serialize()],e.prototype,"_midtonesDensity",void 0),r([t.serialize()],e.prototype,"_midtonesSaturation",void 0),r([t.serialize()],e.prototype,"_midtonesExposure",void 0),e}();t.ColorCurves=e}(l||(l={})),function(t){var e=function(){function e(){}return e.BindEyePosition=function(t,e){e._forcedViewPosition?t.setVector3("vEyePosition",e._forcedViewPosition):t.setVector3("vEyePosition",e._mirroredCameraPosition?e._mirroredCameraPosition:e.activeCamera.globalPosition)},e.PrepareDefinesForMergedUV=function(t,e,i){e._needUVs=!0,e[i]=!0,t.getTextureMatrix().isIdentity(!0)?(e[i+"DIRECTUV"]=t.coordinatesIndex+1,0===t.coordinatesIndex?e.MAINUV1=!0:e.MAINUV2=!0):e[i+"DIRECTUV"]=0},e.BindTextureMatrix=function(t,e,i){var n=t.getTextureMatrix();n.isIdentity(!0)||e.updateMatrix(i+"Matrix",n)},e.PrepareDefinesForMisc=function(e,i,n,r,o,s,a){a._areMiscDirty&&(a.LOGARITHMICDEPTH=n,a.POINTSIZE=r||i.forcePointsCloud,a.FOG=i.fogEnabled&&e.applyFog&&i.fogMode!==t.Scene.FOGMODE_NONE&&o,a.NONUNIFORMSCALING=e.nonUniformScaling,a.ALPHATEST=s)},e.PrepareDefinesForFrameBoundValues=function(t,e,i,n){var r=!1;i.CLIPPLANE!==(void 0!==t.clipPlane&&null!==t.clipPlane)&&(i.CLIPPLANE=!i.CLIPPLANE,r=!0),i.DEPTHPREPASS!==!e.getColorWrite()&&(i.DEPTHPREPASS=!i.DEPTHPREPASS,r=!0),i.INSTANCES!==n&&(i.INSTANCES=n,r=!0),r&&i.markAsUnprocessed()},e.PrepareDefinesForAttributes=function(e,i,n,r,o,s){if(void 0===o&&(o=!1),void 0===s&&(s=!0),!i._areAttributesDirty&&i._needNormals===i._normals&&i._needUVs===i._uvs)return!1;if(i._normals=i._needNormals,i._uvs=i._needUVs,i.NORMAL=i._needNormals&&e.isVerticesDataPresent(t.VertexBuffer.NormalKind),i._needNormals&&e.isVerticesDataPresent(t.VertexBuffer.TangentKind)&&(i.TANGENT=!0),i._needUVs?(i.UV1=e.isVerticesDataPresent(t.VertexBuffer.UVKind),i.UV2=e.isVerticesDataPresent(t.VertexBuffer.UV2Kind)):(i.UV1=!1,i.UV2=!1),n){var a=e.useVertexColors&&e.isVerticesDataPresent(t.VertexBuffer.ColorKind);i.VERTEXCOLOR=a,i.VERTEXALPHA=e.hasVertexAlpha&&a&&s}if(r&&(e.useBones&&e.computeBonesUsingShaders&&e.skeleton?(i.NUM_BONE_INFLUENCERS=e.numBoneInfluencers,i.BonesPerMesh=e.skeleton.bones.length+1):(i.NUM_BONE_INFLUENCERS=0,i.BonesPerMesh=0)),o){var l=e.morphTargetManager;l?(i.MORPHTARGETS_TANGENT=l.supportsTangents&&i.TANGENT,i.MORPHTARGETS_NORMAL=l.supportsNormals&&i.NORMAL,i.MORPHTARGETS=l.numInfluencers>0,i.NUM_MORPH_INFLUENCERS=l.numInfluencers):(i.MORPHTARGETS_TANGENT=!1,i.MORPHTARGETS_NORMAL=!1,i.MORPHTARGETS=!1,i.NUM_MORPH_INFLUENCERS=0)}return!0},e.PrepareDefinesForLights=function(e,i,n,r,o,s){if(void 0===o&&(o=4),void 0===s&&(s=!1),!n._areLightsDirty)return n._needNormals;var a=0,l=!1,c=!1,u=!1,h=!1,p=!1;if(e.lightsEnabled&&!s)for(var d=0,f=i._lightSources;d<f.length;d++){var m,g=f[d];if(l=!0,void 0===n["LIGHT"+a]&&(c=!0),n["LIGHT"+a]=!0,n["SPOTLIGHT"+a]=!1,n["HEMILIGHT"+a]=!1,n["POINTLIGHT"+a]=!1,n["DIRLIGHT"+a]=!1,g.getTypeID()===t.Light.LIGHTTYPEID_SPOTLIGHT){m="SPOTLIGHT"+a;var y=g;n["PROJECTEDLIGHTTEXTURE"+a]=!!y.projectionTexture&&y.projectionTexture.isReady()}else m=g.getTypeID()===t.Light.LIGHTTYPEID_HEMISPHERICLIGHT?"HEMILIGHT"+a:g.getTypeID()===t.Light.LIGHTTYPEID_POINTLIGHT?"POINTLIGHT"+a:"DIRLIGHT"+a;if(n[m]=!0,r&&!g.specular.equalsFloats(0,0,0)&&(p=!0),n["SHADOW"+a]=!1,n["SHADOWPCF"+a]=!1,n["SHADOWESM"+a]=!1,n["SHADOWCUBE"+a]=!1,i&&i.receiveShadows&&e.shadowsEnabled&&g.shadowEnabled){var _=g.getShadowGenerator();_&&(h=!0,_.prepareDefines(n,a))}if(g.lightmapMode!=t.Light.LIGHTMAP_DEFAULT?(u=!0,n["LIGHTMAPEXCLUDED"+a]=!0,n["LIGHTMAPNOSPECULAR"+a]=g.lightmapMode==t.Light.LIGHTMAP_SHADOWSONLY):(n["LIGHTMAPEXCLUDED"+a]=!1,n["LIGHTMAPNOSPECULAR"+a]=!1),++a===o)break}n.SPECULARTERM=p,n.SHADOWS=h;for(var v=a;v<o;v++)void 0!==n["LIGHT"+v]&&(n["LIGHT"+v]=!1,n["HEMILIGHT"+a]=!1,n["POINTLIGHT"+a]=!1,n["DIRLIGHT"+a]=!1,n["SPOTLIGHT"+a]=!1,n["SHADOW"+a]=!1);var b=e.getEngine().getCaps();return void 0===n.SHADOWFLOAT&&(c=!0),n.SHADOWFLOAT=h&&(b.textureFloatRender&&b.textureFloatLinearFiltering||b.textureHalfFloatRender&&b.textureHalfFloatLinearFiltering),n.LIGHTMAPEXCLUDED=u,c&&n.rebuild(),l},e.PrepareUniformsAndSamplersList=function(t,e,i,n){void 0===n&&(n=4);var r,o=null;if(t.uniformsNames){var s=t;r=s.uniformsNames,o=s.uniformBuffersNames,e=s.samplers,i=s.defines,n=s.maxSimultaneousLights}else r=t,e||(e=[]);for(var a=0;a<n&&i["LIGHT"+a];a++)r.push("vLightData"+a,"vLightDiffuse"+a,"vLightSpecular"+a,"vLightDirection"+a,"vLightGround"+a,"lightMatrix"+a,"shadowsInfo"+a,"depthValues"+a),o&&o.push("Light"+a),e.push("shadowSampler"+a),i["PROJECTEDLIGHTTEXTURE"+a]&&(e.push("projectionLightSampler"+a),r.push("textureProjectionMatrix"+a));i.NUM_MORPH_INFLUENCERS&&r.push("morphTargetInfluences")},e.HandleFallbacksForShadows=function(t,e,i,n){void 0===i&&(i=4),void 0===n&&(n=0);for(var r=0,o=0;o<i&&t["LIGHT"+o];o++)o>0&&(r=n+o,e.addFallback(r,"LIGHT"+o)),t.SHADOWS||(t["SHADOW"+o]&&e.addFallback(n,"SHADOW"+o),t["SHADOWPCF"+o]&&e.addFallback(n,"SHADOWPCF"+o),t["SHADOWESM"+o]&&e.addFallback(n,"SHADOWESM"+o));return r++},e.PrepareAttributesForMorphTargets=function(e,i,n){var r=n.NUM_MORPH_INFLUENCERS;if(r>0&&t.Engine.LastCreatedEngine)for(var o=t.Engine.LastCreatedEngine.getCaps().maxVertexAttribs,s=i.morphTargetManager,a=s&&s.supportsNormals&&n.NORMAL,l=s&&s.supportsTangents&&n.TANGENT,c=0;c<r;c++)e.push(t.VertexBuffer.PositionKind+c),a&&e.push(t.VertexBuffer.NormalKind+c),l&&e.push(t.VertexBuffer.TangentKind+c),e.length>o&&t.Tools.Error("Cannot add more vertex attributes for mesh "+i.name)},e.PrepareAttributesForBones=function(e,i,n,r){n.NUM_BONE_INFLUENCERS>0&&(r.addCPUSkinningFallback(0,i),e.push(t.VertexBuffer.MatricesIndicesKind),e.push(t.VertexBuffer.MatricesWeightsKind),n.NUM_BONE_INFLUENCERS>4&&(e.push(t.VertexBuffer.MatricesIndicesExtraKind),e.push(t.VertexBuffer.MatricesWeightsExtraKind)))},e.PrepareAttributesForInstances=function(t,e){e.INSTANCES&&(t.push("world0"),t.push("world1"),t.push("world2"),t.push("world3"))},e.BindLightShadow=function(t,e,i,n,r){if(t.shadowEnabled&&i.receiveShadows){var o=t.getShadowGenerator();o&&o.bindShadowLight(n,r)}},e.BindLightProperties=function(t,e,i){t.transferToEffect(e,i+"")},e.BindLights=function(i,n,r,o,s,a){void 0===s&&(s=4),void 0===a&&(a=!1);for(var l=Math.min(n._lightSources.length,s),c=0;c<l;c++){var u=n._lightSources[c],h=c.toString(),p=u.getScaledIntensity();u._uniformBuffer.bindToEffect(r,"Light"+c),e.BindLightProperties(u,r,c),u.diffuse.scaleToRef(p,t.Tmp.Color3[0]),u._uniformBuffer.updateColor4("vLightDiffuse",t.Tmp.Color3[0],a?u.radius:u.range,h),o.SPECULARTERM&&(u.specular.scaleToRef(p,t.Tmp.Color3[1]),u._uniformBuffer.updateColor3("vLightSpecular",t.Tmp.Color3[1],h)),i.shadowsEnabled&&this.BindLightShadow(u,i,n,h,r),u._uniformBuffer.update()}},e.BindFogParameters=function(e,i,n){e.fogEnabled&&i.applyFog&&e.fogMode!==t.Scene.FOGMODE_NONE&&(n.setFloat4("vFogInfos",e.fogMode,e.fogStart,e.fogEnd,e.fogDensity),n.setColor3("vFogColor",e.fogColor))},e.BindBonesParameters=function(t,e){if(t&&t.useBones&&t.computeBonesUsingShaders&&t.skeleton){var i=t.skeleton.getTransformMatrices(t);i&&e&&e.setMatrices("mBones",i)}},e.BindMorphTargetParameters=function(t,e){var i=t.morphTargetManager;t&&i&&e.setFloatArray("morphTargetInfluences",i.influences)},e.BindLogDepth=function(t,e,i){t.LOGARITHMICDEPTH&&e.setFloat("logarithmicDepthConstant",2/(Math.log(i.activeCamera.maxZ+1)/Math.LN2))},e.BindClipPlane=function(t,e){if(e.clipPlane){var i=e.clipPlane;t.setFloat4("vClipPlane",i.normal.x,i.normal.y,i.normal.z,i.d)}},e}();t.MaterialHelper=e}(l||(l={})),function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.storeEffectOnSubMeshes=!0,n}return o(e,t),e.prototype.getEffect=function(){return this._activeEffect},e.prototype.isReady=function(t,e){return!!t&&(!t.subMeshes||0===t.subMeshes.length||this.isReadyForSubMesh(t,t.subMeshes[0],e))},e.prototype.bindOnlyWorldMatrix=function(t){this._activeEffect.setMatrix("world",t)},e.prototype.bind=function(t,e){e&&this.bindForSubMesh(t,e,e.subMeshes[0])},e.prototype._afterBind=function(e,i){void 0===i&&(i=null),t.prototype._afterBind.call(this,e),this.getScene()._cachedEffect=i},e.prototype._mustRebind=function(t,e,i){return void 0===i&&(i=1),t.isCachedMaterialInvalid(this,e,i)},e}(t.Material);t.PushMaterial=e}(l||(l={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.MAINUV1=!1,e.MAINUV2=!1,e.DIFFUSE=!1,e.DIFFUSEDIRECTUV=0,e.AMBIENT=!1,e.AMBIENTDIRECTUV=0,e.OPACITY=!1,e.OPACITYDIRECTUV=0,e.OPACITYRGB=!1,e.REFLECTION=!1,e.EMISSIVE=!1,e.EMISSIVEDIRECTUV=0,e.SPECULAR=!1,e.SPECULARDIRECTUV=0,e.BUMP=!1,e.BUMPDIRECTUV=0,e.PARALLAX=!1,e.PARALLAXOCCLUSION=!1,e.SPECULAROVERALPHA=!1,e.CLIPPLANE=!1,e.ALPHATEST=!1,e.DEPTHPREPASS=!1,e.ALPHAFROMDIFFUSE=!1,e.POINTSIZE=!1,e.FOG=!1,e.SPECULARTERM=!1,e.DIFFUSEFRESNEL=!1,e.OPACITYFRESNEL=!1,e.REFLECTIONFRESNEL=!1,e.REFRACTIONFRESNEL=!1,e.EMISSIVEFRESNEL=!1,e.FRESNEL=!1,e.NORMAL=!1,e.UV1=!1,e.UV2=!1,e.VERTEXCOLOR=!1,e.VERTEXALPHA=!1,e.NUM_BONE_INFLUENCERS=0,e.BonesPerMesh=0,e.INSTANCES=!1,e.GLOSSINESS=!1,e.ROUGHNESS=!1,e.EMISSIVEASILLUMINATION=!1,e.LINKEMISSIVEWITHDIFFUSE=!1,e.REFLECTIONFRESNELFROMSPECULAR=!1,e.LIGHTMAP=!1,e.LIGHTMAPDIRECTUV=0,e.USELIGHTMAPASSHADOWMAP=!1,e.REFLECTIONMAP_3D=!1,e.REFLECTIONMAP_SPHERICAL=!1,e.REFLECTIONMAP_PLANAR=!1,e.REFLECTIONMAP_CUBIC=!1,e.REFLECTIONMAP_PROJECTION=!1,e.REFLECTIONMAP_SKYBOX=!1,e.REFLECTIONMAP_EXPLICIT=!1,e.REFLECTIONMAP_EQUIRECTANGULAR=!1,e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,e.INVERTCUBICMAP=!1,e.LOGARITHMICDEPTH=!1,e.REFRACTION=!1,e.REFRACTIONMAP_3D=!1,e.REFLECTIONOVERALPHA=!1,e.TWOSIDEDLIGHTING=!1,e.SHADOWFLOAT=!1,e.MORPHTARGETS=!1,e.MORPHTARGETS_NORMAL=!1,e.MORPHTARGETS_TANGENT=!1,e.NUM_MORPH_INFLUENCERS=0,e.NONUNIFORMSCALING=!1,e.PREMULTIPLYALPHA=!1,e.IMAGEPROCESSING=!1,e.VIGNETTE=!1,e.VIGNETTEBLENDMODEMULTIPLY=!1,e.VIGNETTEBLENDMODEOPAQUE=!1,e.TONEMAPPING=!1,e.CONTRAST=!1,e.COLORCURVES=!1,e.COLORGRADING=!1,e.COLORGRADING3D=!1,e.SAMPLER3DGREENDEPTH=!1,e.SAMPLER3DBGRMAP=!1,e.IMAGEPROCESSINGPOSTPROCESS=!1,e.EXPOSURE=!1,e.rebuild(),e}return o(e,t),e.prototype.setReflectionMode=function(t){for(var e=0,i=["REFLECTIONMAP_CUBIC","REFLECTIONMAP_EXPLICIT","REFLECTIONMAP_PLANAR","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_SKYBOX","REFLECTIONMAP_SPHERICAL","REFLECTIONMAP_EQUIRECTANGULAR","REFLECTIONMAP_EQUIRECTANGULAR_FIXED","REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED"];e<i.length;e++){var n=i[e];this[n]=n===t}},e}(t.MaterialDefines);t.StandardMaterialDefines=e;var i=function(i){function n(e,r){var o=i.call(this,e,r)||this;return o.ambientColor=new t.Color3(0,0,0),o.diffuseColor=new t.Color3(1,1,1),o.specularColor=new t.Color3(1,1,1),o.emissiveColor=new t.Color3(0,0,0),o.specularPower=64,o._useAlphaFromDiffuseTexture=!1,o._useEmissiveAsIllumination=!1,o._linkEmissiveWithDiffuse=!1,o._useSpecularOverAlpha=!1,o._useReflectionOverAlpha=!1,o._disableLighting=!1,o._useParallax=!1,o._useParallaxOcclusion=!1,o.parallaxScaleBias=.05,o._roughness=0,o.indexOfRefraction=.98,o.invertRefractionY=!0,o._useLightmapAsShadowmap=!1,o._useReflectionFresnelFromSpecular=!1,o._useGlossinessFromSpecularMapAlpha=!1,o._maxSimultaneousLights=4,o._invertNormalMapX=!1,o._invertNormalMapY=!1,o._twoSidedLighting=!1,o._renderTargets=new t.SmartArray(16),o._worldViewProjectionMatrix=t.Matrix.Zero(),o._globalAmbientColor=new t.Color3(0,0,0),o._attachImageProcessingConfiguration(null),o.getRenderTargetTextures=function(){return o._renderTargets.reset(),n.ReflectionTextureEnabled&&o._reflectionTexture&&o._reflectionTexture.isRenderTarget&&o._renderTargets.push(o._reflectionTexture),n.RefractionTextureEnabled&&o._refractionTexture&&o._refractionTexture.isRenderTarget&&o._renderTargets.push(o._refractionTexture),o._renderTargets},o}return o(n,i),Object.defineProperty(n.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(t){this._attachImageProcessingConfiguration(t),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),n.prototype._attachImageProcessingConfiguration=function(t){var e=this;t!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=t||this.getScene().imageProcessingConfiguration,this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(t){e._markAllSubMeshesAsImageProcessingDirty()}))},Object.defineProperty(n.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(t){this.imageProcessingConfiguration.colorCurvesEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(t){this.imageProcessingConfiguration.colorGradingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(t){this._imageProcessingConfiguration.toneMappingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(t){this._imageProcessingConfiguration.exposure=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(t){this._imageProcessingConfiguration.contrast=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(t){this._imageProcessingConfiguration.colorGradingTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(t){this._imageProcessingConfiguration.colorCurves=t},enumerable:!0,configurable:!0}),n.prototype.getClassName=function(){return"StandardMaterial"},Object.defineProperty(n.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(t){this._useLogarithmicDepth=t&&this.getScene().getEngine().getCaps().fragmentDepthSupported,this._markAllSubMeshesAsMiscDirty()},enumerable:!0,configurable:!0}),n.prototype.needAlphaBlending=function(){return this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromDiffuseTexture()||this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled},n.prototype.needAlphaTesting=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha},n.prototype._shouldUseAlphaFromDiffuseTexture=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture},n.prototype.getAlphaTestTexture=function(){return this._diffuseTexture},n.prototype.isReadyForSubMesh=function(i,r,o){if(void 0===o&&(o=!1),r.effect&&this.isFrozen&&this._wasPreviouslyReady&&r.effect)return!0;r._materialDefines||(r._materialDefines=new e);var s=this.getScene(),a=r._materialDefines;if(!this.checkReadyOnEveryCall&&r.effect&&a._renderId===s.getRenderId())return!0;var l=s.getEngine();if(a._needNormals=t.MaterialHelper.PrepareDefinesForLights(s,i,a,!0,this._maxSimultaneousLights,this._disableLighting),a._areTexturesDirty){if(a._needUVs=!1,a.MAINUV1=!1,a.MAINUV2=!1,s.texturesEnabled){if(this._diffuseTexture&&n.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._diffuseTexture,a,"DIFFUSE")}else a.DIFFUSE=!1;if(this._ambientTexture&&n.AmbientTextureEnabled){if(!this._ambientTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._ambientTexture,a,"AMBIENT")}else a.AMBIENT=!1;if(this._opacityTexture&&n.OpacityTextureEnabled){if(!this._opacityTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._opacityTexture,a,"OPACITY"),a.OPACITYRGB=this._opacityTexture.getAlphaFromRGB}else a.OPACITY=!1;if(this._reflectionTexture&&n.ReflectionTextureEnabled){if(!this._reflectionTexture.isReadyOrNotBlocking())return!1;switch(a._needNormals=!0,a.REFLECTION=!0,a.ROUGHNESS=this._roughness>0,a.REFLECTIONOVERALPHA=this._useReflectionOverAlpha,a.INVERTCUBICMAP=this._reflectionTexture.coordinatesMode===t.Texture.INVCUBIC_MODE,a.REFLECTIONMAP_3D=this._reflectionTexture.isCube,this._reflectionTexture.coordinatesMode){case t.Texture.CUBIC_MODE:case t.Texture.INVCUBIC_MODE:a.setReflectionMode("REFLECTIONMAP_CUBIC");break;case t.Texture.EXPLICIT_MODE:a.setReflectionMode("REFLECTIONMAP_EXPLICIT");break;case t.Texture.PLANAR_MODE:a.setReflectionMode("REFLECTIONMAP_PLANAR");break;case t.Texture.PROJECTION_MODE:a.setReflectionMode("REFLECTIONMAP_PROJECTION");break;case t.Texture.SKYBOX_MODE:a.setReflectionMode("REFLECTIONMAP_SKYBOX");break;case t.Texture.SPHERICAL_MODE:a.setReflectionMode("REFLECTIONMAP_SPHERICAL");break;case t.Texture.EQUIRECTANGULAR_MODE:a.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");break;case t.Texture.FIXED_EQUIRECTANGULAR_MODE:a.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");break;case t.Texture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:a.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED")}}else a.REFLECTION=!1;if(this._emissiveTexture&&n.EmissiveTextureEnabled){if(!this._emissiveTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._emissiveTexture,a,"EMISSIVE")}else a.EMISSIVE=!1;if(this._lightmapTexture&&n.LightmapTextureEnabled){if(!this._lightmapTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._lightmapTexture,a,"LIGHTMAP"),a.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap}else a.LIGHTMAP=!1;if(this._specularTexture&&n.SpecularTextureEnabled){if(!this._specularTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._specularTexture,a,"SPECULAR"),a.GLOSSINESS=this._useGlossinessFromSpecularMapAlpha}else a.SPECULAR=!1;if(s.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&n.BumpTextureEnabled){if(!this._bumpTexture.isReady())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._bumpTexture,a,"BUMP"),a.PARALLAX=this._useParallax,a.PARALLAXOCCLUSION=this._useParallaxOcclusion}else a.BUMP=!1;if(this._refractionTexture&&n.RefractionTextureEnabled){if(!this._refractionTexture.isReadyOrNotBlocking())return!1;a._needUVs=!0,a.REFRACTION=!0,a.REFRACTIONMAP_3D=this._refractionTexture.isCube}else a.REFRACTION=!1;a.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else a.DIFFUSE=!1,a.AMBIENT=!1,a.OPACITY=!1,a.REFLECTION=!1,a.EMISSIVE=!1,a.LIGHTMAP=!1,a.BUMP=!1,a.REFRACTION=!1;a.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),a.EMISSIVEASILLUMINATION=this._useEmissiveAsIllumination,a.LINKEMISSIVEWITHDIFFUSE=this._linkEmissiveWithDiffuse,a.SPECULAROVERALPHA=this._useSpecularOverAlpha,a.PREMULTIPLYALPHA=this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED||this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED_PORTERDUFF}if(a._areImageProcessingDirty){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(a)}if(a._areFresnelDirty&&(n.FresnelEnabled?(this._diffuseFresnelParameters||this._opacityFresnelParameters||this._emissiveFresnelParameters||this._refractionFresnelParameters||this._reflectionFresnelParameters)&&(a.DIFFUSEFRESNEL=this._diffuseFresnelParameters&&this._diffuseFresnelParameters.isEnabled,a.OPACITYFRESNEL=this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled,a.REFLECTIONFRESNEL=this._reflectionFresnelParameters&&this._reflectionFresnelParameters.isEnabled,a.REFLECTIONFRESNELFROMSPECULAR=this._useReflectionFresnelFromSpecular,a.REFRACTIONFRESNEL=this._refractionFresnelParameters&&this._refractionFresnelParameters.isEnabled,a.EMISSIVEFRESNEL=this._emissiveFresnelParameters&&this._emissiveFresnelParameters.isEnabled,a._needNormals=!0,a.FRESNEL=!0):a.FRESNEL=!1),t.MaterialHelper.PrepareDefinesForMisc(i,s,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(i),a),t.MaterialHelper.PrepareDefinesForAttributes(i,a,!0,!0,!0),t.MaterialHelper.PrepareDefinesForFrameBoundValues(s,l,a,o),a.isDirty){a.markAsProcessed(),s.resetCachedMaterial();var c=new t.EffectFallbacks;a.REFLECTION&&c.addFallback(0,"REFLECTION"),a.SPECULAR&&c.addFallback(0,"SPECULAR"),a.BUMP&&c.addFallback(0,"BUMP"),a.PARALLAX&&c.addFallback(1,"PARALLAX"),a.PARALLAXOCCLUSION&&c.addFallback(0,"PARALLAXOCCLUSION"),a.SPECULAROVERALPHA&&c.addFallback(0,"SPECULAROVERALPHA"),a.FOG&&c.addFallback(1,"FOG"),a.POINTSIZE&&c.addFallback(0,"POINTSIZE"),a.LOGARITHMICDEPTH&&c.addFallback(0,"LOGARITHMICDEPTH"),t.MaterialHelper.HandleFallbacksForShadows(a,c,this._maxSimultaneousLights),a.SPECULARTERM&&c.addFallback(0,"SPECULARTERM"),a.DIFFUSEFRESNEL&&c.addFallback(1,"DIFFUSEFRESNEL"),a.OPACITYFRESNEL&&c.addFallback(2,"OPACITYFRESNEL"),a.REFLECTIONFRESNEL&&c.addFallback(3,"REFLECTIONFRESNEL"),a.EMISSIVEFRESNEL&&c.addFallback(4,"EMISSIVEFRESNEL"),a.FRESNEL&&c.addFallback(4,"FRESNEL");var u=[t.VertexBuffer.PositionKind];a.NORMAL&&u.push(t.VertexBuffer.NormalKind),a.UV1&&u.push(t.VertexBuffer.UVKind),a.UV2&&u.push(t.VertexBuffer.UV2Kind),a.VERTEXCOLOR&&u.push(t.VertexBuffer.ColorKind),t.MaterialHelper.PrepareAttributesForBones(u,i,a,c),t.MaterialHelper.PrepareAttributesForInstances(u,a),t.MaterialHelper.PrepareAttributesForMorphTargets(u,i,a);var h="default",p=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vDiffuseColor","vSpecularColor","vEmissiveColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vEmissiveInfos","vSpecularInfos","vBumpInfos","vLightmapInfos","vRefractionInfos","mBones","vClipPlane","diffuseMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","specularMatrix","bumpMatrix","lightmapMatrix","refractionMatrix","diffuseLeftColor","diffuseRightColor","opacityParts","reflectionLeftColor","reflectionRightColor","emissiveLeftColor","emissiveRightColor","refractionLeftColor","refractionRightColor","logarithmicDepthConstant","vTangentSpaceParams"],d=["diffuseSampler","ambientSampler","opacitySampler","reflectionCubeSampler","reflection2DSampler","emissiveSampler","specularSampler","bumpSampler","lightmapSampler","refractionCubeSampler","refraction2DSampler"],f=["Material","Scene"];t.ImageProcessingConfiguration.PrepareUniforms(p,a),t.ImageProcessingConfiguration.PrepareSamplers(d,a),t.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:p,uniformBuffersNames:f,samplers:d,defines:a,maxSimultaneousLights:this._maxSimultaneousLights}),this.customShaderNameResolve&&(h=this.customShaderNameResolve(h,p,f,d,a));var m=a.toString();r.setEffect(s.getEngine().createEffect(h,{attributes:u,uniformsNames:p,uniformBuffersNames:f,samplers:d,defines:m,fallbacks:c,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:a.NUM_MORPH_INFLUENCERS}},l),a),this.buildUniformLayout()}return!(!r.effect||!r.effect.isReady()||(a._renderId=s.getRenderId(),this._wasPreviouslyReady=!0,0))},n.prototype.buildUniformLayout=function(){this._uniformBuffer.addUniform("diffuseLeftColor",4),this._uniformBuffer.addUniform("diffuseRightColor",4),this._uniformBuffer.addUniform("opacityParts",4),this._uniformBuffer.addUniform("reflectionLeftColor",4),this._uniformBuffer.addUniform("reflectionRightColor",4),this._uniformBuffer.addUniform("refractionLeftColor",4),this._uniformBuffer.addUniform("refractionRightColor",4),this._uniformBuffer.addUniform("emissiveLeftColor",4),this._uniformBuffer.addUniform("emissiveRightColor",4),this._uniformBuffer.addUniform("vDiffuseInfos",2),this._uniformBuffer.addUniform("vAmbientInfos",2),this._uniformBuffer.addUniform("vOpacityInfos",2),this._uniformBuffer.addUniform("vReflectionInfos",2),this._uniformBuffer.addUniform("vEmissiveInfos",2),this._uniformBuffer.addUniform("vLightmapInfos",2),this._uniformBuffer.addUniform("vSpecularInfos",2),this._uniformBuffer.addUniform("vBumpInfos",3),this._uniformBuffer.addUniform("diffuseMatrix",16),this._uniformBuffer.addUniform("ambientMatrix",16),this._uniformBuffer.addUniform("opacityMatrix",16),this._uniformBuffer.addUniform("reflectionMatrix",16),this._uniformBuffer.addUniform("emissiveMatrix",16),this._uniformBuffer.addUniform("lightmapMatrix",16),this._uniformBuffer.addUniform("specularMatrix",16),this._uniformBuffer.addUniform("bumpMatrix",16),this._uniformBuffer.addUniform("vTangentSpaceParams",2),this._uniformBuffer.addUniform("refractionMatrix",16),this._uniformBuffer.addUniform("vRefractionInfos",4),this._uniformBuffer.addUniform("vSpecularColor",4),this._uniformBuffer.addUniform("vEmissiveColor",3),this._uniformBuffer.addUniform("vDiffuseColor",4),this._uniformBuffer.addUniform("pointSize",1),this._uniformBuffer.create()},n.prototype.unbind=function(){this._activeEffect&&(this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._activeEffect.setTexture("reflection2DSampler",null),this._refractionTexture&&this._refractionTexture.isRenderTarget&&this._activeEffect.setTexture("refraction2DSampler",null)),i.prototype.unbind.call(this)},n.prototype.bindForSubMesh=function(e,i,r){var o=this.getScene(),s=r._materialDefines;if(s){var a=r.effect;if(a){this._activeEffect=a,this.bindOnlyWorldMatrix(e);var l=this._mustRebind(o,a,i.visibility);if(t.MaterialHelper.BindBonesParameters(i,a),l){if(this._uniformBuffer.bindToEffect(a,"Material"),this.bindViewProjection(a),!this._uniformBuffer.useUbo||!this.isFrozen||!this._uniformBuffer.isSync){if(n.FresnelEnabled&&s.FRESNEL&&(this.diffuseFresnelParameters&&this.diffuseFresnelParameters.isEnabled&&(this._uniformBuffer.updateColor4("diffuseLeftColor",this.diffuseFresnelParameters.leftColor,this.diffuseFresnelParameters.power),this._uniformBuffer.updateColor4("diffuseRightColor",this.diffuseFresnelParameters.rightColor,this.diffuseFresnelParameters.bias)),this.opacityFresnelParameters&&this.opacityFresnelParameters.isEnabled&&this._uniformBuffer.updateColor4("opacityParts",new t.Color3(this.opacityFresnelParameters.leftColor.toLuminance(),this.opacityFresnelParameters.rightColor.toLuminance(),this.opacityFresnelParameters.bias),this.opacityFresnelParameters.power),this.reflectionFresnelParameters&&this.reflectionFresnelParameters.isEnabled&&(this._uniformBuffer.updateColor4("reflectionLeftColor",this.reflectionFresnelParameters.leftColor,this.reflectionFresnelParameters.power),this._uniformBuffer.updateColor4("reflectionRightColor",this.reflectionFresnelParameters.rightColor,this.reflectionFresnelParameters.bias)),this.refractionFresnelParameters&&this.refractionFresnelParameters.isEnabled&&(this._uniformBuffer.updateColor4("refractionLeftColor",this.refractionFresnelParameters.leftColor,this.refractionFresnelParameters.power),this._uniformBuffer.updateColor4("refractionRightColor",this.refractionFresnelParameters.rightColor,this.refractionFresnelParameters.bias)),this.emissiveFresnelParameters&&this.emissiveFresnelParameters.isEnabled&&(this._uniformBuffer.updateColor4("emissiveLeftColor",this.emissiveFresnelParameters.leftColor,this.emissiveFresnelParameters.power),this._uniformBuffer.updateColor4("emissiveRightColor",this.emissiveFresnelParameters.rightColor,this.emissiveFresnelParameters.bias))),o.texturesEnabled&&(this._diffuseTexture&&n.DiffuseTextureEnabled&&(this._uniformBuffer.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),t.MaterialHelper.BindTextureMatrix(this._diffuseTexture,this._uniformBuffer,"diffuse")),this._ambientTexture&&n.AmbientTextureEnabled&&(this._uniformBuffer.updateFloat2("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level),t.MaterialHelper.BindTextureMatrix(this._ambientTexture,this._uniformBuffer,"ambient")),this._opacityTexture&&n.OpacityTextureEnabled&&(this._uniformBuffer.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),t.MaterialHelper.BindTextureMatrix(this._opacityTexture,this._uniformBuffer,"opacity")),this._reflectionTexture&&n.ReflectionTextureEnabled&&(this._uniformBuffer.updateFloat2("vReflectionInfos",this._reflectionTexture.level,this.roughness),this._uniformBuffer.updateMatrix("reflectionMatrix",this._reflectionTexture.getReflectionTextureMatrix())),this._emissiveTexture&&n.EmissiveTextureEnabled&&(this._uniformBuffer.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),t.MaterialHelper.BindTextureMatrix(this._emissiveTexture,this._uniformBuffer,"emissive")),this._lightmapTexture&&n.LightmapTextureEnabled&&(this._uniformBuffer.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),t.MaterialHelper.BindTextureMatrix(this._lightmapTexture,this._uniformBuffer,"lightmap")),this._specularTexture&&n.SpecularTextureEnabled&&(this._uniformBuffer.updateFloat2("vSpecularInfos",this._specularTexture.coordinatesIndex,this._specularTexture.level),t.MaterialHelper.BindTextureMatrix(this._specularTexture,this._uniformBuffer,"specular")),this._bumpTexture&&o.getEngine().getCaps().standardDerivatives&&n.BumpTextureEnabled&&(this._uniformBuffer.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this.parallaxScaleBias),t.MaterialHelper.BindTextureMatrix(this._bumpTexture,this._uniformBuffer,"bump"),o._mirroredCameraPosition?this._uniformBuffer.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):this._uniformBuffer.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this._refractionTexture&&n.RefractionTextureEnabled)){var c=1;this._refractionTexture.isCube||(this._uniformBuffer.updateMatrix("refractionMatrix",this._refractionTexture.getReflectionTextureMatrix()),this._refractionTexture.depth&&(c=this._refractionTexture.depth)),this._uniformBuffer.updateFloat4("vRefractionInfos",this._refractionTexture.level,this.indexOfRefraction,c,this.invertRefractionY?-1:1)}this.pointsCloud&&this._uniformBuffer.updateFloat("pointSize",this.pointSize),s.SPECULARTERM&&this._uniformBuffer.updateColor4("vSpecularColor",this.specularColor,this.specularPower),this._uniformBuffer.updateColor3("vEmissiveColor",this.emissiveColor),this._uniformBuffer.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha*i.visibility)}if(o.texturesEnabled&&(this._diffuseTexture&&n.DiffuseTextureEnabled&&a.setTexture("diffuseSampler",this._diffuseTexture),this._ambientTexture&&n.AmbientTextureEnabled&&a.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&n.OpacityTextureEnabled&&a.setTexture("opacitySampler",this._opacityTexture),this._reflectionTexture&&n.ReflectionTextureEnabled&&(this._reflectionTexture.isCube?a.setTexture("reflectionCubeSampler",this._reflectionTexture):a.setTexture("reflection2DSampler",this._reflectionTexture)),this._emissiveTexture&&n.EmissiveTextureEnabled&&a.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&n.LightmapTextureEnabled&&a.setTexture("lightmapSampler",this._lightmapTexture),this._specularTexture&&n.SpecularTextureEnabled&&a.setTexture("specularSampler",this._specularTexture),this._bumpTexture&&o.getEngine().getCaps().standardDerivatives&&n.BumpTextureEnabled&&a.setTexture("bumpSampler",this._bumpTexture),this._refractionTexture&&n.RefractionTextureEnabled)){c=1;this._refractionTexture.isCube?a.setTexture("refractionCubeSampler",this._refractionTexture):a.setTexture("refraction2DSampler",this._refractionTexture)}t.MaterialHelper.BindClipPlane(a,o),o.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),t.MaterialHelper.BindEyePosition(a,o),a.setColor3("vAmbientColor",this._globalAmbientColor)}!l&&this.isFrozen||(o.lightsEnabled&&!this._disableLighting&&t.MaterialHelper.BindLights(o,i,a,s,this._maxSimultaneousLights),(o.fogEnabled&&i.applyFog&&o.fogMode!==t.Scene.FOGMODE_NONE||this._reflectionTexture||this._refractionTexture)&&this.bindView(a),t.MaterialHelper.BindFogParameters(o,i,a),s.NUM_MORPH_INFLUENCERS&&t.MaterialHelper.BindMorphTargetParameters(i,a),t.MaterialHelper.BindLogDepth(s,a,o),this._imageProcessingConfiguration.applyByPostProcess||this._imageProcessingConfiguration.bind(this._activeEffect)),this._uniformBuffer.update(),this._afterBind(i,this._activeEffect)}}},n.prototype.getAnimatables=function(){var t=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&t.push(this._diffuseTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&t.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&t.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&t.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&t.push(this._emissiveTexture),this._specularTexture&&this._specularTexture.animations&&this._specularTexture.animations.length>0&&t.push(this._specularTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&t.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&t.push(this._lightmapTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&t.push(this._refractionTexture),t},n.prototype.getActiveTextures=function(){var t=i.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),this._ambientTexture&&t.push(this._ambientTexture),this._opacityTexture&&t.push(this._opacityTexture),this._reflectionTexture&&t.push(this._reflectionTexture),this._emissiveTexture&&t.push(this._emissiveTexture),this._specularTexture&&t.push(this._specularTexture),this._bumpTexture&&t.push(this._bumpTexture),this._lightmapTexture&&t.push(this._lightmapTexture),this._refractionTexture&&t.push(this._refractionTexture),t},n.prototype.hasTexture=function(t){return!!i.prototype.hasTexture.call(this,t)||this._diffuseTexture===t||this._ambientTexture===t||this._opacityTexture===t||this._reflectionTexture===t||this._emissiveTexture===t||this._specularTexture===t||this._bumpTexture===t||this._lightmapTexture===t||this._refractionTexture===t},n.prototype.dispose=function(t,e){e&&(this._diffuseTexture&&this._diffuseTexture.dispose(),this._ambientTexture&&this._ambientTexture.dispose(),this._opacityTexture&&this._opacityTexture.dispose(),this._reflectionTexture&&this._reflectionTexture.dispose(),this._emissiveTexture&&this._emissiveTexture.dispose(),this._specularTexture&&this._specularTexture.dispose(),this._bumpTexture&&this._bumpTexture.dispose(),this._lightmapTexture&&this._lightmapTexture.dispose(),this._refractionTexture&&this._refractionTexture.dispose()),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),i.prototype.dispose.call(this,t,e)},n.prototype.clone=function(e){var i=this,r=t.SerializationHelper.Clone(function(){return new n(e,i.getScene())},this);return r.name=e,r.id=e,r},n.prototype.serialize=function(){return t.SerializationHelper.Serialize(this)},n.Parse=function(e,i,r){return t.SerializationHelper.Parse(function(){return new n(e.name,i)},e,i,r)},Object.defineProperty(n,"DiffuseTextureEnabled",{get:function(){return n._DiffuseTextureEnabled},set:function(e){n._DiffuseTextureEnabled!==e&&(n._DiffuseTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"AmbientTextureEnabled",{get:function(){return n._AmbientTextureEnabled},set:function(e){n._AmbientTextureEnabled!==e&&(n._AmbientTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OpacityTextureEnabled",{get:function(){return n._OpacityTextureEnabled},set:function(e){n._OpacityTextureEnabled!==e&&(n._OpacityTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ReflectionTextureEnabled",{get:function(){return n._ReflectionTextureEnabled},set:function(e){n._ReflectionTextureEnabled!==e&&(n._ReflectionTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"EmissiveTextureEnabled",{get:function(){return n._EmissiveTextureEnabled},set:function(e){n._EmissiveTextureEnabled!==e&&(n._EmissiveTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"SpecularTextureEnabled",{get:function(){return n._SpecularTextureEnabled},set:function(e){n._SpecularTextureEnabled!==e&&(n._SpecularTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"BumpTextureEnabled",{get:function(){return n._BumpTextureEnabled},set:function(e){n._BumpTextureEnabled!==e&&(n._BumpTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"LightmapTextureEnabled",{get:function(){return n._LightmapTextureEnabled},set:function(e){n._LightmapTextureEnabled!==e&&(n._LightmapTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"RefractionTextureEnabled",{get:function(){return n._RefractionTextureEnabled},set:function(e){n._RefractionTextureEnabled!==e&&(n._RefractionTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ColorGradingTextureEnabled",{get:function(){return n._ColorGradingTextureEnabled},set:function(e){n._ColorGradingTextureEnabled!==e&&(n._ColorGradingTextureEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(n,"FresnelEnabled",{get:function(){return n._FresnelEnabled},set:function(e){n._FresnelEnabled!==e&&(n._FresnelEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.FresnelDirtyFlag))},enumerable:!0,configurable:!0}),n._DiffuseTextureEnabled=!0,n._AmbientTextureEnabled=!0,n._OpacityTextureEnabled=!0,n._ReflectionTextureEnabled=!0,n._EmissiveTextureEnabled=!0,n._SpecularTextureEnabled=!0,n._BumpTextureEnabled=!0,n._LightmapTextureEnabled=!0,n._RefractionTextureEnabled=!0,n._ColorGradingTextureEnabled=!0,n._FresnelEnabled=!0,r([t.serializeAsTexture("diffuseTexture")],n.prototype,"_diffuseTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"diffuseTexture",void 0),r([t.serializeAsTexture("ambientTexture")],n.prototype,"_ambientTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"ambientTexture",void 0),r([t.serializeAsTexture("opacityTexture")],n.prototype,"_opacityTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"opacityTexture",void 0),r([t.serializeAsTexture("reflectionTexture")],n.prototype,"_reflectionTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionTexture",void 0),r([t.serializeAsTexture("emissiveTexture")],n.prototype,"_emissiveTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"emissiveTexture",void 0),r([t.serializeAsTexture("specularTexture")],n.prototype,"_specularTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"specularTexture",void 0),r([t.serializeAsTexture("bumpTexture")],n.prototype,"_bumpTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"bumpTexture",void 0),r([t.serializeAsTexture("lightmapTexture")],n.prototype,"_lightmapTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"lightmapTexture",void 0),r([t.serializeAsTexture("refractionTexture")],n.prototype,"_refractionTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"refractionTexture",void 0),r([t.serializeAsColor3("ambient")],n.prototype,"ambientColor",void 0),r([t.serializeAsColor3("diffuse")],n.prototype,"diffuseColor",void 0),r([t.serializeAsColor3("specular")],n.prototype,"specularColor",void 0),r([t.serializeAsColor3("emissive")],n.prototype,"emissiveColor",void 0),r([t.serialize()],n.prototype,"specularPower",void 0),r([t.serialize("useAlphaFromDiffuseTexture")],n.prototype,"_useAlphaFromDiffuseTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useAlphaFromDiffuseTexture",void 0),r([t.serialize("useEmissiveAsIllumination")],n.prototype,"_useEmissiveAsIllumination",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useEmissiveAsIllumination",void 0),r([t.serialize("linkEmissiveWithDiffuse")],n.prototype,"_linkEmissiveWithDiffuse",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"linkEmissiveWithDiffuse",void 0),r([t.serialize("useSpecularOverAlpha")],n.prototype,"_useSpecularOverAlpha",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useSpecularOverAlpha",void 0),r([t.serialize("useReflectionOverAlpha")],n.prototype,"_useReflectionOverAlpha",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useReflectionOverAlpha",void 0),r([t.serialize("disableLighting")],n.prototype,"_disableLighting",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"disableLighting",void 0),r([t.serialize("useParallax")],n.prototype,"_useParallax",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useParallax",void 0),r([t.serialize("useParallaxOcclusion")],n.prototype,"_useParallaxOcclusion",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useParallaxOcclusion",void 0),r([t.serialize()],n.prototype,"parallaxScaleBias",void 0),r([t.serialize("roughness")],n.prototype,"_roughness",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"roughness",void 0),r([t.serialize()],n.prototype,"indexOfRefraction",void 0),r([t.serialize()],n.prototype,"invertRefractionY",void 0),r([t.serialize("useLightmapAsShadowmap")],n.prototype,"_useLightmapAsShadowmap",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useLightmapAsShadowmap",void 0),r([t.serializeAsFresnelParameters("diffuseFresnelParameters")],n.prototype,"_diffuseFresnelParameters",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelDirty")],n.prototype,"diffuseFresnelParameters",void 0),r([t.serializeAsFresnelParameters("opacityFresnelParameters")],n.prototype,"_opacityFresnelParameters",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelAndMiscDirty")],n.prototype,"opacityFresnelParameters",void 0),r([t.serializeAsFresnelParameters("reflectionFresnelParameters")],n.prototype,"_reflectionFresnelParameters",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelDirty")],n.prototype,"reflectionFresnelParameters",void 0),r([t.serializeAsFresnelParameters("refractionFresnelParameters")],n.prototype,"_refractionFresnelParameters",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelDirty")],n.prototype,"refractionFresnelParameters",void 0),r([t.serializeAsFresnelParameters("emissiveFresnelParameters")],n.prototype,"_emissiveFresnelParameters",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelDirty")],n.prototype,"emissiveFresnelParameters",void 0),r([t.serialize("useReflectionFresnelFromSpecular")],n.prototype,"_useReflectionFresnelFromSpecular",void 0),r([t.expandToProperty("_markAllSubMeshesAsFresnelDirty")],n.prototype,"useReflectionFresnelFromSpecular",void 0),r([t.serialize("useGlossinessFromSpecularMapAlpha")],n.prototype,"_useGlossinessFromSpecularMapAlpha",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useGlossinessFromSpecularMapAlpha",void 0),r([t.serialize("maxSimultaneousLights")],n.prototype,"_maxSimultaneousLights",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"maxSimultaneousLights",void 0),r([t.serialize("invertNormalMapX")],n.prototype,"_invertNormalMapX",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"invertNormalMapX",void 0),r([t.serialize("invertNormalMapY")],n.prototype,"_invertNormalMapY",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"invertNormalMapY",void 0),r([t.serialize("twoSidedLighting")],n.prototype,"_twoSidedLighting",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"twoSidedLighting",void 0),r([t.serialize()],n.prototype,"useLogarithmicDepth",null),n}(t.PushMaterial);t.StandardMaterial=i}(l||(l={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.PBR=!0,e.MAINUV1=!1,e.MAINUV2=!1,e.UV1=!1,e.UV2=!1,e.ALBEDO=!1,e.ALBEDODIRECTUV=0,e.VERTEXCOLOR=!1,e.AMBIENT=!1,e.AMBIENTDIRECTUV=0,e.AMBIENTINGRAYSCALE=!1,e.OPACITY=!1,e.VERTEXALPHA=!1,e.OPACITYDIRECTUV=0,e.OPACITYRGB=!1,e.ALPHATEST=!1,e.DEPTHPREPASS=!1,e.ALPHABLEND=!1,e.ALPHAFROMALBEDO=!1,e.ALPHATESTVALUE=.5,e.SPECULAROVERALPHA=!1,e.RADIANCEOVERALPHA=!1,e.ALPHAFRESNEL=!1,e.LINEARALPHAFRESNEL=!1,e.PREMULTIPLYALPHA=!1,e.EMISSIVE=!1,e.EMISSIVEDIRECTUV=0,e.REFLECTIVITY=!1,e.REFLECTIVITYDIRECTUV=0,e.SPECULARTERM=!1,e.MICROSURFACEFROMREFLECTIVITYMAP=!1,e.MICROSURFACEAUTOMATIC=!1,e.LODBASEDMICROSFURACE=!1,e.MICROSURFACEMAP=!1,e.MICROSURFACEMAPDIRECTUV=0,e.METALLICWORKFLOW=!1,e.ROUGHNESSSTOREINMETALMAPALPHA=!1,e.ROUGHNESSSTOREINMETALMAPGREEN=!1,e.METALLNESSSTOREINMETALMAPBLUE=!1,e.AOSTOREINMETALMAPRED=!1,e.ENVIRONMENTBRDF=!1,e.NORMAL=!1,e.TANGENT=!1,e.BUMP=!1,e.BUMPDIRECTUV=0,e.PARALLAX=!1,e.PARALLAXOCCLUSION=!1,e.NORMALXYSCALE=!0,e.LIGHTMAP=!1,e.LIGHTMAPDIRECTUV=0,e.USELIGHTMAPASSHADOWMAP=!1,e.REFLECTION=!1,e.REFLECTIONMAP_3D=!1,e.REFLECTIONMAP_SPHERICAL=!1,e.REFLECTIONMAP_PLANAR=!1,e.REFLECTIONMAP_CUBIC=!1,e.REFLECTIONMAP_PROJECTION=!1,e.REFLECTIONMAP_SKYBOX=!1,e.REFLECTIONMAP_EXPLICIT=!1,e.REFLECTIONMAP_EQUIRECTANGULAR=!1,e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,e.INVERTCUBICMAP=!1,e.USESPHERICALFROMREFLECTIONMAP=!1,e.USESPHERICALINVERTEX=!1,e.REFLECTIONMAP_OPPOSITEZ=!1,e.LODINREFLECTIONALPHA=!1,e.GAMMAREFLECTION=!1,e.RADIANCEOCCLUSION=!1,e.HORIZONOCCLUSION=!1,e.REFRACTION=!1,e.REFRACTIONMAP_3D=!1,e.REFRACTIONMAP_OPPOSITEZ=!1,e.LODINREFRACTIONALPHA=!1,e.GAMMAREFRACTION=!1,e.LINKREFRACTIONTOTRANSPARENCY=!1,e.INSTANCES=!1,e.NUM_BONE_INFLUENCERS=0,e.BonesPerMesh=0,e.NONUNIFORMSCALING=!1,e.MORPHTARGETS=!1,e.MORPHTARGETS_NORMAL=!1,e.MORPHTARGETS_TANGENT=!1,e.NUM_MORPH_INFLUENCERS=0,e.IMAGEPROCESSING=!1,e.VIGNETTE=!1,e.VIGNETTEBLENDMODEMULTIPLY=!1,e.VIGNETTEBLENDMODEOPAQUE=!1,e.TONEMAPPING=!1,e.CONTRAST=!1,e.COLORCURVES=!1,e.COLORGRADING=!1,e.COLORGRADING3D=!1,e.SAMPLER3DGREENDEPTH=!1,e.SAMPLER3DBGRMAP=!1,e.IMAGEPROCESSINGPOSTPROCESS=!1,e.EXPOSURE=!1,e.USEPHYSICALLIGHTFALLOFF=!1,e.TWOSIDEDLIGHTING=!1,e.SHADOWFLOAT=!1,e.CLIPPLANE=!1,e.POINTSIZE=!1,e.FOG=!1,e.LOGARITHMICDEPTH=!1,e.FORCENORMALFORWARD=!1,e.rebuild(),e}return o(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this.ALPHATESTVALUE=.5,this.PBR=!0},e}(t.MaterialDefines),i=function(i){function n(e,n){var r=i.call(this,e,n)||this;return r._directIntensity=1,r._emissiveIntensity=1,r._environmentIntensity=1,r._specularIntensity=1,r._lightingInfos=new t.Vector4(r._directIntensity,r._emissiveIntensity,r._environmentIntensity,r._specularIntensity),r._disableBumpMap=!1,r._ambientTextureStrength=1,r._ambientColor=new t.Color3(0,0,0),r._albedoColor=new t.Color3(1,1,1),r._reflectivityColor=new t.Color3(1,1,1),r._reflectionColor=new t.Color3(1,1,1),r._emissiveColor=new t.Color3(0,0,0),r._microSurface=.9,r._indexOfRefraction=.66,r._invertRefractionY=!1,r._linkRefractionWithTransparency=!1,r._useLightmapAsShadowmap=!1,r._useHorizonOcclusion=!0,r._useRadianceOcclusion=!0,r._useAlphaFromAlbedoTexture=!1,r._useSpecularOverAlpha=!0,r._useMicroSurfaceFromReflectivityMapAlpha=!1,r._useRoughnessFromMetallicTextureAlpha=!0,r._useRoughnessFromMetallicTextureGreen=!1,r._useMetallnessFromMetallicTextureBlue=!1,r._useAmbientOcclusionFromMetallicTextureRed=!1,r._useAmbientInGrayScale=!1,r._useAutoMicroSurfaceFromReflectivityMap=!1,r._usePhysicalLightFalloff=!0,r._useRadianceOverAlpha=!0,r._useParallax=!1,r._useParallaxOcclusion=!1,r._parallaxScaleBias=.05,r._disableLighting=!1,r._maxSimultaneousLights=4,r._invertNormalMapX=!1,r._invertNormalMapY=!1,r._twoSidedLighting=!1,r._alphaCutOff=.4,r._forceAlphaTest=!1,r._useAlphaFresnel=!1,r._useLinearAlphaFresnel=!1,r._transparencyMode=null,r._environmentBRDFTexture=null,r._forceIrradianceInFragment=!1,r._forceNormalForward=!1,r._forceMetallicWorkflow=!1,r._renderTargets=new t.SmartArray(16),r._globalAmbientColor=new t.Color3(0,0,0),r._attachImageProcessingConfiguration(null),r.getRenderTargetTextures=function(){return r._renderTargets.reset(),t.StandardMaterial.ReflectionTextureEnabled&&r._reflectionTexture&&r._reflectionTexture.isRenderTarget&&r._renderTargets.push(r._reflectionTexture),t.StandardMaterial.RefractionTextureEnabled&&r._refractionTexture&&r._refractionTexture.isRenderTarget&&r._renderTargets.push(r._refractionTexture),r._renderTargets},r._environmentBRDFTexture=t.TextureTools.GetEnvironmentBRDFTexture(n),r}return o(n,i),n.prototype._attachImageProcessingConfiguration=function(t){var e=this;t!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=t||this.getScene().imageProcessingConfiguration,this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(t){e._markAllSubMeshesAsImageProcessingDirty()}))},n.prototype.getClassName=function(){return"PBRBaseMaterial"},Object.defineProperty(n.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(t){this._useLogarithmicDepth=t&&this.getScene().getEngine().getCaps().fragmentDepthSupported},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"transparencyMode",{get:function(){return this._transparencyMode},set:function(e){this._transparencyMode!==e&&(this._transparencyMode=e,this._forceAlphaTest=e===t.PBRMaterial.PBRMATERIAL_ALPHATESTANDBLEND,this._markAllSubMeshesAsTexturesAndMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_disableAlphaBlending",{get:function(){return this._linkRefractionWithTransparency||this._transparencyMode===t.PBRMaterial.PBRMATERIAL_OPAQUE||this._transparencyMode===t.PBRMaterial.PBRMATERIAL_ALPHATEST},enumerable:!0,configurable:!0}),n.prototype.needAlphaBlending=function(){return!this._disableAlphaBlending&&(this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromAlbedoTexture())},n.prototype.needAlphaBlendingForMesh=function(t){return!this._disableAlphaBlending&&i.prototype.needAlphaBlendingForMesh.call(this,t)},n.prototype.needAlphaTesting=function(){return!!this._forceAlphaTest||!this._linkRefractionWithTransparency&&null!=this._albedoTexture&&this._albedoTexture.hasAlpha&&(null==this._transparencyMode||this._transparencyMode===t.PBRMaterial.PBRMATERIAL_ALPHATEST)},n.prototype._shouldUseAlphaFromAlbedoTexture=function(){return null!=this._albedoTexture&&this._albedoTexture.hasAlpha&&this._useAlphaFromAlbedoTexture&&this._transparencyMode!==t.PBRMaterial.PBRMATERIAL_OPAQUE},n.prototype.getAlphaTestTexture=function(){return this._albedoTexture},n.prototype.isReadyForSubMesh=function(i,n,r){var o=this;if(n.effect&&this.isFrozen&&this._wasPreviouslyReady)return!0;n._materialDefines||(n._materialDefines=new e);var s=this.getScene(),a=n._materialDefines;if(!this.checkReadyOnEveryCall&&n.effect&&a._renderId===s.getRenderId())return!0;var l=s.getEngine();if(t.MaterialHelper.PrepareDefinesForLights(s,i,a,!0,this._maxSimultaneousLights,this._disableLighting),a._needNormals=!0,a._areTexturesDirty){if(a._needUVs=!1,s.texturesEnabled){if(s.getEngine().getCaps().textureLOD&&(a.LODBASEDMICROSFURACE=!0),this._albedoTexture&&t.StandardMaterial.DiffuseTextureEnabled){if(!this._albedoTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._albedoTexture,a,"ALBEDO")}else a.ALBEDO=!1;if(this._ambientTexture&&t.StandardMaterial.AmbientTextureEnabled){if(!this._ambientTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._ambientTexture,a,"AMBIENT"),a.AMBIENTINGRAYSCALE=this._useAmbientInGrayScale}else a.AMBIENT=!1;if(this._opacityTexture&&t.StandardMaterial.OpacityTextureEnabled){if(!this._opacityTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._opacityTexture,a,"OPACITY"),a.OPACITYRGB=this._opacityTexture.getAlphaFromRGB}else a.OPACITY=!1;var c=this._getReflectionTexture();if(c&&t.StandardMaterial.ReflectionTextureEnabled){if(!c.isReadyOrNotBlocking())return!1;switch(a.REFLECTION=!0,a.GAMMAREFLECTION=c.gammaSpace,a.REFLECTIONMAP_OPPOSITEZ=this.getScene().useRightHandedSystem?!c.invertZ:c.invertZ,a.LODINREFLECTIONALPHA=c.lodLevelInAlpha,c.coordinatesMode===t.Texture.INVCUBIC_MODE&&(a.INVERTCUBICMAP=!0),a.REFLECTIONMAP_3D=c.isCube,c.coordinatesMode){case t.Texture.CUBIC_MODE:case t.Texture.INVCUBIC_MODE:a.REFLECTIONMAP_CUBIC=!0;break;case t.Texture.EXPLICIT_MODE:a.REFLECTIONMAP_EXPLICIT=!0;break;case t.Texture.PLANAR_MODE:a.REFLECTIONMAP_PLANAR=!0;break;case t.Texture.PROJECTION_MODE:a.REFLECTIONMAP_PROJECTION=!0;break;case t.Texture.SKYBOX_MODE:a.REFLECTIONMAP_SKYBOX=!0;break;case t.Texture.SPHERICAL_MODE:a.REFLECTIONMAP_SPHERICAL=!0;break;case t.Texture.EQUIRECTANGULAR_MODE:a.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case t.Texture.FIXED_EQUIRECTANGULAR_MODE:a.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case t.Texture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:a.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0}c.coordinatesMode!==t.Texture.SKYBOX_MODE&&c.sphericalPolynomial&&(a.USESPHERICALFROMREFLECTIONMAP=!0,this._forceIrradianceInFragment||s.getEngine().getCaps().maxVaryingVectors<=8?a.USESPHERICALINVERTEX=!1:a.USESPHERICALINVERTEX=!0)}else a.REFLECTION=!1,a.REFLECTIONMAP_3D=!1,a.REFLECTIONMAP_SPHERICAL=!1,a.REFLECTIONMAP_PLANAR=!1,a.REFLECTIONMAP_CUBIC=!1,a.REFLECTIONMAP_PROJECTION=!1,a.REFLECTIONMAP_SKYBOX=!1,a.REFLECTIONMAP_EXPLICIT=!1,a.REFLECTIONMAP_EQUIRECTANGULAR=!1,a.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,a.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,a.INVERTCUBICMAP=!1,a.USESPHERICALFROMREFLECTIONMAP=!1,a.USESPHERICALINVERTEX=!1,a.REFLECTIONMAP_OPPOSITEZ=!1,a.LODINREFLECTIONALPHA=!1,a.GAMMAREFLECTION=!1;if(this._lightmapTexture&&t.StandardMaterial.LightmapTextureEnabled){if(!this._lightmapTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._lightmapTexture,a,"LIGHTMAP"),a.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap}else a.LIGHTMAP=!1;if(this._emissiveTexture&&t.StandardMaterial.EmissiveTextureEnabled){if(!this._emissiveTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._emissiveTexture,a,"EMISSIVE")}else a.EMISSIVE=!1;if(t.StandardMaterial.SpecularTextureEnabled){if(this._metallicTexture){if(!this._metallicTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._metallicTexture,a,"REFLECTIVITY"),a.METALLICWORKFLOW=!0,a.ROUGHNESSSTOREINMETALMAPALPHA=this._useRoughnessFromMetallicTextureAlpha,a.ROUGHNESSSTOREINMETALMAPGREEN=!this._useRoughnessFromMetallicTextureAlpha&&this._useRoughnessFromMetallicTextureGreen,a.METALLNESSSTOREINMETALMAPBLUE=this._useMetallnessFromMetallicTextureBlue,a.AOSTOREINMETALMAPRED=this._useAmbientOcclusionFromMetallicTextureRed}else if(this._reflectivityTexture){if(!this._reflectivityTexture.isReadyOrNotBlocking())return!1;a.METALLICWORKFLOW=!1,t.MaterialHelper.PrepareDefinesForMergedUV(this._reflectivityTexture,a,"REFLECTIVITY"),a.MICROSURFACEFROMREFLECTIVITYMAP=this._useMicroSurfaceFromReflectivityMapAlpha,a.MICROSURFACEAUTOMATIC=this._useAutoMicroSurfaceFromReflectivityMap}else a.METALLICWORKFLOW=!1,a.REFLECTIVITY=!1;if(this._microSurfaceTexture){if(!this._microSurfaceTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._microSurfaceTexture,a,"MICROSURFACEMAP")}else a.MICROSURFACEMAP=!1}else a.REFLECTIVITY=!1,a.MICROSURFACEMAP=!1;if(s.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&t.StandardMaterial.BumpTextureEnabled&&!this._disableBumpMap){if(!this._bumpTexture.isReady())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._bumpTexture,a,"BUMP"),this._useParallax&&this._albedoTexture&&t.StandardMaterial.DiffuseTextureEnabled?(a.PARALLAX=!0,a.PARALLAXOCCLUSION=!!this._useParallaxOcclusion):a.PARALLAX=!1}else a.BUMP=!1;var u=this._getRefractionTexture();if(u&&t.StandardMaterial.RefractionTextureEnabled){if(!u.isReadyOrNotBlocking())return!1;a.REFRACTION=!0,a.REFRACTIONMAP_3D=u.isCube,a.GAMMAREFRACTION=u.gammaSpace,a.REFRACTIONMAP_OPPOSITEZ=u.invertZ,a.LODINREFRACTIONALPHA=u.lodLevelInAlpha,this._linkRefractionWithTransparency&&(a.LINKREFRACTIONTOTRANSPARENCY=!0)}else a.REFRACTION=!1;if(this._environmentBRDFTexture&&t.StandardMaterial.ReflectionTextureEnabled){if(!this._environmentBRDFTexture.isReady())return!1;a.ENVIRONMENTBRDF=!0}else a.ENVIRONMENTBRDF=!1;this._shouldUseAlphaFromAlbedoTexture()?a.ALPHAFROMALBEDO=!0:a.ALPHAFROMALBEDO=!1}a.SPECULAROVERALPHA=this._useSpecularOverAlpha,a.USEPHYSICALLIGHTFALLOFF=this._usePhysicalLightFalloff,a.RADIANCEOVERALPHA=this._useRadianceOverAlpha,this._forceMetallicWorkflow||void 0!==this._metallic&&null!==this._metallic||void 0!==this._roughness&&null!==this._roughness?a.METALLICWORKFLOW=!0:a.METALLICWORKFLOW=!1,!this.backFaceCulling&&this._twoSidedLighting?a.TWOSIDEDLIGHTING=!0:a.TWOSIDEDLIGHTING=!1,a.ALPHATESTVALUE=this._alphaCutOff,a.PREMULTIPLYALPHA=this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED||this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED_PORTERDUFF,a.ALPHABLEND=this.needAlphaBlendingForMesh(i),a.ALPHAFRESNEL=this._useAlphaFresnel||this._useLinearAlphaFresnel,a.LINEARALPHAFRESNEL=this._useLinearAlphaFresnel}if(a._areImageProcessingDirty){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(a)}if(a.FORCENORMALFORWARD=this._forceNormalForward,a.RADIANCEOCCLUSION=this._useRadianceOcclusion,a.HORIZONOCCLUSION=this._useHorizonOcclusion,t.MaterialHelper.PrepareDefinesForMisc(i,s,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(i)||this._forceAlphaTest,a),t.MaterialHelper.PrepareDefinesForFrameBoundValues(s,l,a,!!r),t.MaterialHelper.PrepareDefinesForAttributes(i,a,!0,!0,!0,this._transparencyMode!==t.PBRMaterial.PBRMATERIAL_OPAQUE)&&i){var h=null;if(i instanceof t.InstancedMesh?h=i.sourceMesh:i instanceof t.Mesh&&(h=i),h)if(h.isVerticesDataPresent(t.VertexBuffer.NormalKind)){var p=h.getVertexBuffer(t.VertexBuffer.NormalKind),d=p.getData(),f=p.getOffset(),m=p.getStrideSize(),g=f+n.indexStart*m;if(0===d[g]&&0===d[g+1]&&0===d[g+2]&&(a.NORMAL=!1),h.isVerticesDataPresent(t.VertexBuffer.TangentKind)){var y=h.getVertexBuffer(t.VertexBuffer.TangentKind),_=y.getData(),v=y.getOffset(),b=y.getStrideSize(),x=v+n.indexStart*b;0===_[x]&&0===_[x+1]&&0===_[x+2]&&(a.TANGENT=!1)}}else s.getEngine().getCaps().standardDerivatives||(h.createNormals(!0),t.Tools.Warn("PBRMaterial: Normals have been created for the mesh: "+h.name))}if(a.isDirty){a.markAsProcessed(),s.resetCachedMaterial();var A=new t.EffectFallbacks,w=0;a.USESPHERICALINVERTEX&&A.addFallback(w++,"USESPHERICALINVERTEX"),a.FOG&&A.addFallback(w,"FOG"),a.POINTSIZE&&A.addFallback(w,"POINTSIZE"),a.LOGARITHMICDEPTH&&A.addFallback(w,"LOGARITHMICDEPTH"),a.PARALLAX&&A.addFallback(w,"PARALLAX"),a.PARALLAXOCCLUSION&&A.addFallback(w++,"PARALLAXOCCLUSION"),a.ENVIRONMENTBRDF&&A.addFallback(w++,"ENVIRONMENTBRDF"),a.TANGENT&&A.addFallback(w++,"TANGENT"),a.BUMP&&A.addFallback(w++,"BUMP"),w=t.MaterialHelper.HandleFallbacksForShadows(a,A,this._maxSimultaneousLights,w++),a.SPECULARTERM&&A.addFallback(w++,"SPECULARTERM"),a.USESPHERICALFROMREFLECTIONMAP&&A.addFallback(w++,"USESPHERICALFROMREFLECTIONMAP"),a.LIGHTMAP&&A.addFallback(w++,"LIGHTMAP"),a.NORMAL&&A.addFallback(w++,"NORMAL"),a.AMBIENT&&A.addFallback(w++,"AMBIENT"),a.EMISSIVE&&A.addFallback(w++,"EMISSIVE"),a.VERTEXCOLOR&&A.addFallback(w++,"VERTEXCOLOR"),a.NUM_BONE_INFLUENCERS>0&&A.addCPUSkinningFallback(w++,i),a.MORPHTARGETS&&A.addFallback(w++,"MORPHTARGETS");var P=[t.VertexBuffer.PositionKind];a.NORMAL&&P.push(t.VertexBuffer.NormalKind),a.TANGENT&&P.push(t.VertexBuffer.TangentKind),a.UV1&&P.push(t.VertexBuffer.UVKind),a.UV2&&P.push(t.VertexBuffer.UV2Kind),a.VERTEXCOLOR&&P.push(t.VertexBuffer.ColorKind),t.MaterialHelper.PrepareAttributesForBones(P,i,a,A),t.MaterialHelper.PrepareAttributesForInstances(P,a),t.MaterialHelper.PrepareAttributesForMorphTargets(P,i,a);var E=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vAlbedoColor","vReflectivityColor","vEmissiveColor","vReflectionColor","vFogInfos","vFogColor","pointSize","vAlbedoInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vEmissiveInfos","vReflectivityInfos","vMicroSurfaceSamplerInfos","vBumpInfos","vLightmapInfos","vRefractionInfos","mBones","vClipPlane","albedoMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","reflectivityMatrix","microSurfaceSamplerMatrix","bumpMatrix","lightmapMatrix","refractionMatrix","vLightingIntensity","logarithmicDepthConstant","vSphericalX","vSphericalY","vSphericalZ","vSphericalXX","vSphericalYY","vSphericalZZ","vSphericalXY","vSphericalYZ","vSphericalZX","vReflectionMicrosurfaceInfos","vRefractionMicrosurfaceInfos","vTangentSpaceParams"],T=["albedoSampler","reflectivitySampler","ambientSampler","emissiveSampler","bumpSampler","lightmapSampler","opacitySampler","refractionSampler","refractionSamplerLow","refractionSamplerHigh","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh","microSurfaceSampler","environmentBrdfSampler"],S=["Material","Scene"];t.ImageProcessingConfiguration.PrepareUniforms(E,a),t.ImageProcessingConfiguration.PrepareSamplers(T,a),t.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:E,uniformBuffersNames:S,samplers:T,defines:a,maxSimultaneousLights:this._maxSimultaneousLights});var C=a.toString();n.setEffect(s.getEngine().createEffect("pbr",{attributes:P,uniformsNames:E,uniformBuffersNames:S,samplers:T,defines:C,fallbacks:A,onCompiled:function(t){o.onCompiled&&o.onCompiled(t),o.bindSceneUniformBuffer(t,s.getSceneUniformBuffer())},onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:a.NUM_MORPH_INFLUENCERS}},l),a),this.buildUniformLayout()}return!(!n.effect||!n.effect.isReady()||(a._renderId=s.getRenderId(),this._wasPreviouslyReady=!0,0))},n.prototype.buildUniformLayout=function(){this._uniformBuffer.addUniform("vAlbedoInfos",2),this._uniformBuffer.addUniform("vAmbientInfos",3),this._uniformBuffer.addUniform("vOpacityInfos",2),this._uniformBuffer.addUniform("vEmissiveInfos",2),this._uniformBuffer.addUniform("vLightmapInfos",2),this._uniformBuffer.addUniform("vReflectivityInfos",3),this._uniformBuffer.addUniform("vMicroSurfaceSamplerInfos",2),this._uniformBuffer.addUniform("vRefractionInfos",4),this._uniformBuffer.addUniform("vReflectionInfos",2),this._uniformBuffer.addUniform("vBumpInfos",3),this._uniformBuffer.addUniform("albedoMatrix",16),this._uniformBuffer.addUniform("ambientMatrix",16),this._uniformBuffer.addUniform("opacityMatrix",16),this._uniformBuffer.addUniform("emissiveMatrix",16),this._uniformBuffer.addUniform("lightmapMatrix",16),this._uniformBuffer.addUniform("reflectivityMatrix",16),this._uniformBuffer.addUniform("microSurfaceSamplerMatrix",16),this._uniformBuffer.addUniform("bumpMatrix",16),this._uniformBuffer.addUniform("vTangentSpaceParams",2),this._uniformBuffer.addUniform("refractionMatrix",16),this._uniformBuffer.addUniform("reflectionMatrix",16),this._uniformBuffer.addUniform("vReflectionColor",3),this._uniformBuffer.addUniform("vAlbedoColor",4),this._uniformBuffer.addUniform("vLightingIntensity",4),this._uniformBuffer.addUniform("vRefractionMicrosurfaceInfos",3),this._uniformBuffer.addUniform("vReflectionMicrosurfaceInfos",3),this._uniformBuffer.addUniform("vReflectivityColor",4),this._uniformBuffer.addUniform("vEmissiveColor",3),this._uniformBuffer.addUniform("pointSize",1),this._uniformBuffer.create()},n.prototype.unbind=function(){this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._uniformBuffer.setTexture("reflectionSampler",null),this._refractionTexture&&this._refractionTexture.isRenderTarget&&this._uniformBuffer.setTexture("refractionSampler",null),i.prototype.unbind.call(this)},n.prototype.bindOnlyWorldMatrix=function(t){this._activeEffect.setMatrix("world",t)},n.prototype.bindForSubMesh=function(e,i,n){var r=this.getScene(),o=n._materialDefines;if(o){var s=n.effect;if(s){this._activeEffect=s,this.bindOnlyWorldMatrix(e);var a=this._mustRebind(r,s,i.visibility);t.MaterialHelper.BindBonesParameters(i,this._activeEffect);var l=null;if(a){this._uniformBuffer.bindToEffect(s,"Material"),this.bindViewProjection(s),l=this._getReflectionTexture();var c=this._getRefractionTexture();if(!this._uniformBuffer.useUbo||!this.isFrozen||!this._uniformBuffer.isSync){if(r.texturesEnabled){if(this._albedoTexture&&t.StandardMaterial.DiffuseTextureEnabled&&(this._uniformBuffer.updateFloat2("vAlbedoInfos",this._albedoTexture.coordinatesIndex,this._albedoTexture.level),t.MaterialHelper.BindTextureMatrix(this._albedoTexture,this._uniformBuffer,"albedo")),this._ambientTexture&&t.StandardMaterial.AmbientTextureEnabled&&(this._uniformBuffer.updateFloat3("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level,this._ambientTextureStrength),t.MaterialHelper.BindTextureMatrix(this._ambientTexture,this._uniformBuffer,"ambient")),this._opacityTexture&&t.StandardMaterial.OpacityTextureEnabled&&(this._uniformBuffer.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),t.MaterialHelper.BindTextureMatrix(this._opacityTexture,this._uniformBuffer,"opacity")),l&&t.StandardMaterial.ReflectionTextureEnabled){this._uniformBuffer.updateMatrix("reflectionMatrix",l.getReflectionTextureMatrix()),this._uniformBuffer.updateFloat2("vReflectionInfos",l.level,0);var u=l.sphericalPolynomial;o.USESPHERICALFROMREFLECTIONMAP&&u&&(this._activeEffect.setFloat3("vSphericalX",u.x.x,u.x.y,u.x.z),this._activeEffect.setFloat3("vSphericalY",u.y.x,u.y.y,u.y.z),this._activeEffect.setFloat3("vSphericalZ",u.z.x,u.z.y,u.z.z),this._activeEffect.setFloat3("vSphericalXX_ZZ",u.xx.x-u.zz.x,u.xx.y-u.zz.y,u.xx.z-u.zz.z),this._activeEffect.setFloat3("vSphericalYY_ZZ",u.yy.x-u.zz.x,u.yy.y-u.zz.y,u.yy.z-u.zz.z),this._activeEffect.setFloat3("vSphericalZZ",u.zz.x,u.zz.y,u.zz.z),this._activeEffect.setFloat3("vSphericalXY",u.xy.x,u.xy.y,u.xy.z),this._activeEffect.setFloat3("vSphericalYZ",u.yz.x,u.yz.y,u.yz.z),this._activeEffect.setFloat3("vSphericalZX",u.zx.x,u.zx.y,u.zx.z)),this._uniformBuffer.updateFloat3("vReflectionMicrosurfaceInfos",l.getSize().width,l.lodGenerationScale,l.lodGenerationOffset)}if(this._emissiveTexture&&t.StandardMaterial.EmissiveTextureEnabled&&(this._uniformBuffer.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),t.MaterialHelper.BindTextureMatrix(this._emissiveTexture,this._uniformBuffer,"emissive")),this._lightmapTexture&&t.StandardMaterial.LightmapTextureEnabled&&(this._uniformBuffer.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),t.MaterialHelper.BindTextureMatrix(this._lightmapTexture,this._uniformBuffer,"lightmap")),t.StandardMaterial.SpecularTextureEnabled&&(this._metallicTexture?(this._uniformBuffer.updateFloat3("vReflectivityInfos",this._metallicTexture.coordinatesIndex,this._metallicTexture.level,this._ambientTextureStrength),t.MaterialHelper.BindTextureMatrix(this._metallicTexture,this._uniformBuffer,"reflectivity")):this._reflectivityTexture&&(this._uniformBuffer.updateFloat3("vReflectivityInfos",this._reflectivityTexture.coordinatesIndex,this._reflectivityTexture.level,1),t.MaterialHelper.BindTextureMatrix(this._reflectivityTexture,this._uniformBuffer,"reflectivity")),this._microSurfaceTexture&&(this._uniformBuffer.updateFloat2("vMicroSurfaceSamplerInfos",this._microSurfaceTexture.coordinatesIndex,this._microSurfaceTexture.level),t.MaterialHelper.BindTextureMatrix(this._microSurfaceTexture,this._uniformBuffer,"microSurfaceSampler"))),this._bumpTexture&&r.getEngine().getCaps().standardDerivatives&&t.StandardMaterial.BumpTextureEnabled&&!this._disableBumpMap&&(this._uniformBuffer.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,this._bumpTexture.level,this._parallaxScaleBias),t.MaterialHelper.BindTextureMatrix(this._bumpTexture,this._uniformBuffer,"bump"),r._mirroredCameraPosition?this._uniformBuffer.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):this._uniformBuffer.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),c&&t.StandardMaterial.RefractionTextureEnabled){this._uniformBuffer.updateMatrix("refractionMatrix",c.getReflectionTextureMatrix());var h=1;c.isCube||c.depth&&(h=c.depth),this._uniformBuffer.updateFloat4("vRefractionInfos",c.level,this._indexOfRefraction,h,this._invertRefractionY?-1:1),this._uniformBuffer.updateFloat3("vRefractionMicrosurfaceInfos",c.getSize().width,c.lodGenerationScale,c.lodGenerationOffset)}}this.pointsCloud&&this._uniformBuffer.updateFloat("pointSize",this.pointSize),o.METALLICWORKFLOW?(t.PBRMaterial._scaledReflectivity.r=void 0===this._metallic||null===this._metallic?1:this._metallic,t.PBRMaterial._scaledReflectivity.g=void 0===this._roughness||null===this._roughness?1:this._roughness,this._uniformBuffer.updateColor4("vReflectivityColor",t.PBRMaterial._scaledReflectivity,0)):this._uniformBuffer.updateColor4("vReflectivityColor",this._reflectivityColor,this._microSurface),this._uniformBuffer.updateColor3("vEmissiveColor",this._emissiveColor),this._uniformBuffer.updateColor3("vReflectionColor",this._reflectionColor),this._uniformBuffer.updateColor4("vAlbedoColor",this._albedoColor,this.alpha*i.visibility),this._lightingInfos.x=this._directIntensity,this._lightingInfos.y=this._emissiveIntensity,this._lightingInfos.z=this._environmentIntensity,this._lightingInfos.w=this._specularIntensity,this._uniformBuffer.updateVector4("vLightingIntensity",this._lightingInfos)}r.texturesEnabled&&(this._albedoTexture&&t.StandardMaterial.DiffuseTextureEnabled&&this._uniformBuffer.setTexture("albedoSampler",this._albedoTexture),this._ambientTexture&&t.StandardMaterial.AmbientTextureEnabled&&this._uniformBuffer.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&t.StandardMaterial.OpacityTextureEnabled&&this._uniformBuffer.setTexture("opacitySampler",this._opacityTexture),l&&t.StandardMaterial.ReflectionTextureEnabled&&(o.LODBASEDMICROSFURACE?this._uniformBuffer.setTexture("reflectionSampler",l):(this._uniformBuffer.setTexture("reflectionSampler",l._lodTextureMid||l),this._uniformBuffer.setTexture("reflectionSamplerLow",l._lodTextureLow||l),this._uniformBuffer.setTexture("reflectionSamplerHigh",l._lodTextureHigh||l))),o.ENVIRONMENTBRDF&&this._uniformBuffer.setTexture("environmentBrdfSampler",this._environmentBRDFTexture),c&&t.StandardMaterial.RefractionTextureEnabled&&(o.LODBASEDMICROSFURACE?this._uniformBuffer.setTexture("refractionSampler",c):(this._uniformBuffer.setTexture("refractionSampler",c._lodTextureMid||c),this._uniformBuffer.setTexture("refractionSamplerLow",c._lodTextureLow||c),this._uniformBuffer.setTexture("refractionSamplerHigh",c._lodTextureHigh||c))),this._emissiveTexture&&t.StandardMaterial.EmissiveTextureEnabled&&this._uniformBuffer.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&t.StandardMaterial.LightmapTextureEnabled&&this._uniformBuffer.setTexture("lightmapSampler",this._lightmapTexture),t.StandardMaterial.SpecularTextureEnabled&&(this._metallicTexture?this._uniformBuffer.setTexture("reflectivitySampler",this._metallicTexture):this._reflectivityTexture&&this._uniformBuffer.setTexture("reflectivitySampler",this._reflectivityTexture),this._microSurfaceTexture&&this._uniformBuffer.setTexture("microSurfaceSampler",this._microSurfaceTexture)),this._bumpTexture&&r.getEngine().getCaps().standardDerivatives&&t.StandardMaterial.BumpTextureEnabled&&!this._disableBumpMap&&this._uniformBuffer.setTexture("bumpSampler",this._bumpTexture)),t.MaterialHelper.BindClipPlane(this._activeEffect,r),r.ambientColor.multiplyToRef(this._ambientColor,this._globalAmbientColor);var p=r._forcedViewPosition?r._forcedViewPosition:r._mirroredCameraPosition?r._mirroredCameraPosition:r.activeCamera.globalPosition,d=r.useRightHandedSystem===(null!=r._mirroredCameraPosition);s.setFloat4("vEyePosition",p.x,p.y,p.z,d?-1:1),s.setColor3("vAmbientColor",this._globalAmbientColor)}!a&&this.isFrozen||(r.lightsEnabled&&!this._disableLighting&&t.MaterialHelper.BindLights(r,i,this._activeEffect,o,this._maxSimultaneousLights,this._usePhysicalLightFalloff),(r.fogEnabled&&i.applyFog&&r.fogMode!==t.Scene.FOGMODE_NONE||l)&&this.bindView(s),t.MaterialHelper.BindFogParameters(r,i,this._activeEffect),o.NUM_MORPH_INFLUENCERS&&t.MaterialHelper.BindMorphTargetParameters(i,this._activeEffect),this._imageProcessingConfiguration.bind(this._activeEffect),t.MaterialHelper.BindLogDepth(o,this._activeEffect,r)),this._uniformBuffer.update(),this._afterBind(i)}}},n.prototype.getAnimatables=function(){var t=[];return this._albedoTexture&&this._albedoTexture.animations&&this._albedoTexture.animations.length>0&&t.push(this._albedoTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&t.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&t.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&t.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&t.push(this._emissiveTexture),this._metallicTexture&&this._metallicTexture.animations&&this._metallicTexture.animations.length>0?t.push(this._metallicTexture):this._reflectivityTexture&&this._reflectivityTexture.animations&&this._reflectivityTexture.animations.length>0&&t.push(this._reflectivityTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&t.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&t.push(this._lightmapTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&t.push(this._refractionTexture),t},n.prototype._getReflectionTexture=function(){return this._reflectionTexture?this._reflectionTexture:this.getScene().environmentTexture},n.prototype._getRefractionTexture=function(){return this._refractionTexture?this._refractionTexture:this._linkRefractionWithTransparency?this.getScene().environmentTexture:null},n.prototype.dispose=function(t,e){e&&(this._albedoTexture&&this._albedoTexture.dispose(),this._ambientTexture&&this._ambientTexture.dispose(),this._opacityTexture&&this._opacityTexture.dispose(),this._reflectionTexture&&this._reflectionTexture.dispose(),this._environmentBRDFTexture&&this.getScene()._environmentBRDFTexture!==this._environmentBRDFTexture&&this._environmentBRDFTexture.dispose(),this._emissiveTexture&&this._emissiveTexture.dispose(),this._metallicTexture&&this._metallicTexture.dispose(),this._reflectivityTexture&&this._reflectivityTexture.dispose(),this._bumpTexture&&this._bumpTexture.dispose(),this._lightmapTexture&&this._lightmapTexture.dispose(),this._refractionTexture&&this._refractionTexture.dispose()),this._renderTargets.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),i.prototype.dispose.call(this,t,e)},n._scaledReflectivity=new t.Color3,r([t.serializeAsImageProcessingConfiguration()],n.prototype,"_imageProcessingConfiguration",void 0),r([t.serialize()],n.prototype,"useLogarithmicDepth",null),r([t.serialize()],n.prototype,"transparencyMode",null),n}(t.PushMaterial);t.PBRBaseMaterial=i}(l||(l={})),function(t){var e=function(e){function i(i,n){var r=e.call(this,i,n)||this;return r.maxSimultaneousLights=4,r.disableLighting=!1,r.invertNormalMapX=!1,r.invertNormalMapY=!1,r.emissiveColor=new t.Color3(0,0,0),r.occlusionStrength=1,r.useLightmapAsShadowmap=!1,r._useAlphaFromAlbedoTexture=!0,r._useAmbientInGrayScale=!0,r}return o(i,e),Object.defineProperty(i.prototype,"doubleSided",{get:function(){return this._twoSidedLighting},set:function(t){this._twoSidedLighting!==t&&(this._twoSidedLighting=t,this.backFaceCulling=!t,this._markAllSubMeshesAsTexturesDirty())},enumerable:!0,configurable:!0}),i.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this.environmentTexture&&t.push(this.environmentTexture),this.normalTexture&&t.push(this.normalTexture),this.emissiveTexture&&t.push(this.emissiveTexture),this.occlusionTexture&&t.push(this.occlusionTexture),this.lightmapTexture&&t.push(this.lightmapTexture),t},i.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.lightmapTexture===t},i.prototype.getClassName=function(){return"PBRBaseSimpleMaterial"},r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsLightsDirty")],i.prototype,"maxSimultaneousLights",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsLightsDirty")],i.prototype,"disableLighting",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_reflectionTexture")],i.prototype,"environmentTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"invertNormalMapX",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"invertNormalMapY",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_bumpTexture")],i.prototype,"normalTexture",void 0),r([t.serializeAsColor3("emissive"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"emissiveColor",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"emissiveTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_ambientTextureStrength")],i.prototype,"occlusionStrength",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_ambientTexture")],i.prototype,"occlusionTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_alphaCutOff")],i.prototype,"alphaCutOff",void 0),r([t.serialize()],i.prototype,"doubleSided",null),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty",null)],i.prototype,"lightmapTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useLightmapAsShadowmap",void 0),i}(t.PBRBaseMaterial);t.PBRBaseSimpleMaterial=e}(l||(l={})),function(t){var e=function(e){function i(i,n){var r=e.call(this,i,n)||this;return r.directIntensity=1,r.emissiveIntensity=1,r.environmentIntensity=1,r.specularIntensity=1,r.disableBumpMap=!1,r.ambientTextureStrength=1,r.ambientColor=new t.Color3(0,0,0),r.albedoColor=new t.Color3(1,1,1),r.reflectivityColor=new t.Color3(1,1,1),r.reflectionColor=new t.Color3(1,1,1),r.emissiveColor=new t.Color3(0,0,0),r.microSurface=1,r.indexOfRefraction=.66,r.invertRefractionY=!1,r.linkRefractionWithTransparency=!1,r.useLightmapAsShadowmap=!1,r.useAlphaFromAlbedoTexture=!1,r.forceAlphaTest=!1,r.alphaCutOff=.4,r.useSpecularOverAlpha=!0,r.useMicroSurfaceFromReflectivityMapAlpha=!1,r.useRoughnessFromMetallicTextureAlpha=!0,r.useRoughnessFromMetallicTextureGreen=!1,r.useMetallnessFromMetallicTextureBlue=!1,r.useAmbientOcclusionFromMetallicTextureRed=!1,r.useAmbientInGrayScale=!1,r.useAutoMicroSurfaceFromReflectivityMap=!1,r.usePhysicalLightFalloff=!0,r.useRadianceOverAlpha=!0,r.useParallax=!1,r.useParallaxOcclusion=!1,r.parallaxScaleBias=.05,r.disableLighting=!1,r.forceIrradianceInFragment=!1,r.maxSimultaneousLights=4,r.invertNormalMapX=!1,r.invertNormalMapY=!1,r.twoSidedLighting=!1,r.useAlphaFresnel=!1,r.useLinearAlphaFresnel=!1,r.environmentBRDFTexture=null,r.forceNormalForward=!1,r.useHorizonOcclusion=!0,r.useRadianceOcclusion=!0,r._environmentBRDFTexture=t.TextureTools.GetEnvironmentBRDFTexture(n),r}return o(i,e),Object.defineProperty(i,"PBRMATERIAL_OPAQUE",{get:function(){return this._PBRMATERIAL_OPAQUE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"PBRMATERIAL_ALPHATEST",{get:function(){return this._PBRMATERIAL_ALPHATEST},enumerable:!0,configurable:!0}),Object.defineProperty(i,"PBRMATERIAL_ALPHABLEND",{get:function(){return this._PBRMATERIAL_ALPHABLEND},enumerable:!0,configurable:!0}),Object.defineProperty(i,"PBRMATERIAL_ALPHATESTANDBLEND",{get:function(){return this._PBRMATERIAL_ALPHATESTANDBLEND},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(t){this._attachImageProcessingConfiguration(t),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(t){this.imageProcessingConfiguration.colorCurvesEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(t){this.imageProcessingConfiguration.colorGradingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(t){this._imageProcessingConfiguration.toneMappingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(t){this._imageProcessingConfiguration.exposure=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(t){this._imageProcessingConfiguration.contrast=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(t){this._imageProcessingConfiguration.colorGradingTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(t){this._imageProcessingConfiguration.colorCurves=t},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"PBRMaterial"},i.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._albedoTexture&&t.push(this._albedoTexture),this._ambientTexture&&t.push(this._ambientTexture),this._opacityTexture&&t.push(this._opacityTexture),this._reflectionTexture&&t.push(this._reflectionTexture),this._emissiveTexture&&t.push(this._emissiveTexture),this._reflectivityTexture&&t.push(this._reflectivityTexture),this._metallicTexture&&t.push(this._metallicTexture),this._microSurfaceTexture&&t.push(this._microSurfaceTexture),this._bumpTexture&&t.push(this._bumpTexture),this._lightmapTexture&&t.push(this._lightmapTexture),this._refractionTexture&&t.push(this._refractionTexture),t},i.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this._albedoTexture===t||this._ambientTexture===t||this._opacityTexture===t||this._reflectionTexture===t||this._reflectivityTexture===t||this._metallicTexture===t||this._microSurfaceTexture===t||this._bumpTexture===t||this._lightmapTexture===t||this._refractionTexture===t},i.prototype.clone=function(e){var n=this,r=t.SerializationHelper.Clone(function(){return new i(e,n.getScene())},this);return r.id=e,r.name=e,r},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="BABYLON.PBRMaterial",e},i.Parse=function(e,n,r){return t.SerializationHelper.Parse(function(){return new i(e.name,n)},e,n,r)},i._PBRMATERIAL_OPAQUE=0,i._PBRMATERIAL_ALPHATEST=1,i._PBRMATERIAL_ALPHABLEND=2,i._PBRMATERIAL_ALPHATESTANDBLEND=3,r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"directIntensity",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"emissiveIntensity",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"environmentIntensity",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"specularIntensity",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"disableBumpMap",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"albedoTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"ambientTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"ambientTextureStrength",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],i.prototype,"opacityTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"reflectionTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"emissiveTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"reflectivityTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"metallicTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"metallic",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"roughness",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"microSurfaceTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"bumpTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty",null)],i.prototype,"lightmapTexture",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"refractionTexture",void 0),r([t.serializeAsColor3("ambient"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"ambientColor",void 0),r([t.serializeAsColor3("albedo"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"albedoColor",void 0),r([t.serializeAsColor3("reflectivity"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"reflectivityColor",void 0),r([t.serializeAsColor3("reflection"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"reflectionColor",void 0),r([t.serializeAsColor3("emissive"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"emissiveColor",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"microSurface",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"indexOfRefraction",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"invertRefractionY",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"linkRefractionWithTransparency",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useLightmapAsShadowmap",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],i.prototype,"useAlphaFromAlbedoTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],i.prototype,"forceAlphaTest",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesAndMiscDirty")],i.prototype,"alphaCutOff",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useSpecularOverAlpha",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useMicroSurfaceFromReflectivityMapAlpha",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useRoughnessFromMetallicTextureAlpha",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useRoughnessFromMetallicTextureGreen",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useMetallnessFromMetallicTextureBlue",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useAmbientOcclusionFromMetallicTextureRed",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useAmbientInGrayScale",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useAutoMicroSurfaceFromReflectivityMap",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"usePhysicalLightFalloff",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useRadianceOverAlpha",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useParallax",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useParallaxOcclusion",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"parallaxScaleBias",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsLightsDirty")],i.prototype,"disableLighting",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"forceIrradianceInFragment",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsLightsDirty")],i.prototype,"maxSimultaneousLights",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"invertNormalMapX",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"invertNormalMapY",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"twoSidedLighting",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useAlphaFresnel",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useLinearAlphaFresnel",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"environmentBRDFTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"forceNormalForward",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useHorizonOcclusion",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"useRadianceOcclusion",void 0),i}(t.PBRBaseMaterial);t.PBRMaterial=e}(l||(l={})),function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n._useRoughnessFromMetallicTextureAlpha=!1,n._useRoughnessFromMetallicTextureGreen=!0,n._useMetallnessFromMetallicTextureBlue=!0,n._forceMetallicWorkflow=!0,n}return o(i,e),i.prototype.getClassName=function(){return"PBRMetallicRoughnessMaterial"},i.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this.baseTexture&&t.push(this.baseTexture),this.metallicRoughnessTexture&&t.push(this.metallicRoughnessTexture),t},i.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.baseTexture===t||this.metallicRoughnessTexture===t},i.prototype.clone=function(e){var n=this,r=t.SerializationHelper.Clone(function(){return new i(e,n.getScene())},this);return r.id=e,r.name=e,r},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="BABYLON.PBRMetallicRoughnessMaterial",e},i.Parse=function(e,n,r){return t.SerializationHelper.Parse(function(){return new i(e.name,n)},e,n,r)},r([t.serializeAsColor3(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_albedoColor")],i.prototype,"baseColor",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_albedoTexture")],i.prototype,"baseTexture",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"metallic",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],i.prototype,"roughness",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_metallicTexture")],i.prototype,"metallicRoughnessTexture",void 0),i}(t.PBRBaseSimpleMaterial);t.PBRMetallicRoughnessMaterial=e}(l||(l={})),function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n._useMicroSurfaceFromReflectivityMapAlpha=!0,n}return o(i,e),i.prototype.getClassName=function(){return"PBRSpecularGlossinessMaterial"},i.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this.diffuseTexture&&t.push(this.diffuseTexture),this.specularGlossinessTexture&&t.push(this.specularGlossinessTexture),t},i.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.diffuseTexture===t||this.specularGlossinessTexture===t},i.prototype.clone=function(e){var n=this,r=t.SerializationHelper.Clone(function(){return new i(e,n.getScene())},this);return r.id=e,r.name=e,r},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="BABYLON.PBRSpecularGlossinessMaterial",e},i.Parse=function(e,n,r){return t.SerializationHelper.Parse(function(){return new i(e.name,n)},e,n,r)},r([t.serializeAsColor3("diffuse"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_albedoColor")],i.prototype,"diffuseColor",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_albedoTexture")],i.prototype,"diffuseTexture",void 0),r([t.serializeAsColor3("specular"),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_reflectivityColor")],i.prototype,"specularColor",void 0),r([t.serialize(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_microSurface")],i.prototype,"glossiness",void 0),r([t.serializeAsTexture(),t.expandToProperty("_markAllSubMeshesAsTexturesDirty","_reflectivityTexture")],i.prototype,"specularGlossinessTexture",void 0),i}(t.PBRBaseSimpleMaterial);t.PBRSpecularGlossinessMaterial=e}(l||(l={})),function(t){t.CameraInputTypes={};var e=function(){function e(t){this.attached={},this.camera=t,this.checkInputs=function(){}}return e.prototype.add=function(e){var i=e.getSimpleName();this.attached[i]?t.Tools.Warn("camera input of type "+i+" already exists on camera"):(this.attached[i]=e,e.camera=this.camera,e.checkInputs&&(this.checkInputs=this._addCheckInputs(e.checkInputs.bind(e))),this.attachedElement&&e.attachControl(this.attachedElement))},e.prototype.remove=function(t){for(var e in this.attached){var i=this.attached[e];i===t&&(i.detachControl(this.attachedElement),i.camera=null,delete this.attached[e],this.rebuildInputCheck())}},e.prototype.removeByType=function(t){for(var e in this.attached){var i=this.attached[e];i.getClassName()===t&&(i.detachControl(this.attachedElement),i.camera=null,delete this.attached[e],this.rebuildInputCheck())}},e.prototype._addCheckInputs=function(t){var e=this.checkInputs;return function(){e(),t()}},e.prototype.attachInput=function(t){this.attachedElement&&t.attachControl(this.attachedElement,this.noPreventDefault)},e.prototype.attachElement=function(e,i){if(void 0===i&&(i=!1),!this.attachedElement)for(var n in i=!t.Camera.ForceAttachControlToAlwaysPreventDefault&&i,this.attachedElement=e,this.noPreventDefault=i,this.attached)this.attached[n].attachControl(e,i)},e.prototype.detachElement=function(t,e){if(void 0===e&&(e=!1),this.attachedElement===t){for(var i in this.attached)this.attached[i].detachControl(t),e&&(this.attached[i].camera=null);this.attachedElement=null}},e.prototype.rebuildInputCheck=function(){for(var t in this.checkInputs=function(){},this.attached){var e=this.attached[t];e.checkInputs&&(this.checkInputs=this._addCheckInputs(e.checkInputs.bind(e)))}},e.prototype.clear=function(){this.attachedElement&&this.detachElement(this.attachedElement,!0),this.attached={},this.attachedElement=null,this.checkInputs=function(){}},e.prototype.serialize=function(e){var i={};for(var n in this.attached){var r=this.attached[n],o=t.SerializationHelper.Serialize(r);i[r.getClassName()]=o}e.inputsmgr=i},e.prototype.parse=function(e){var i=e.inputsmgr;if(i)for(var n in this.clear(),i){if(s=t.CameraInputTypes[n]){var r=i[n],o=t.SerializationHelper.Parse(function(){return new s},r,null);this.add(o)}}else for(var n in this.attached){var s;if(s=t.CameraInputTypes[this.attached[n].getClassName()]){o=t.SerializationHelper.Parse(function(){return new s},e,null);this.remove(this.attached[n]),this.add(o)}}},e}();t.CameraInputsManager=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r){var o=e.call(this,i,n,r)||this;return o.cameraDirection=new t.Vector3(0,0,0),o.cameraRotation=new t.Vector2(0,0),o.rotation=new t.Vector3(0,0,0),o.speed=2,o.noRotationConstraint=!1,o.lockedTarget=null,o._currentTarget=t.Vector3.Zero(),o._viewMatrix=t.Matrix.Zero(),o._camMatrix=t.Matrix.Zero(),o._cameraTransformMatrix=t.Matrix.Zero(),o._cameraRotationMatrix=t.Matrix.Zero(),o._referencePoint=new t.Vector3(0,0,1),o._currentUpVector=new t.Vector3(0,1,0),o._transformedReferencePoint=t.Vector3.Zero(),o._lookAtTemp=t.Matrix.Zero(),o._tempMatrix=t.Matrix.Zero(),o}return o(i,e),i.prototype.getFrontPosition=function(t){this.getWorldMatrix();var e=this.getTarget().subtract(this.position);return e.normalize(),e.scaleInPlace(t),this.globalPosition.add(e)},i.prototype._getLockedTargetPosition=function(){return this.lockedTarget?(this.lockedTarget.absolutePosition&&this.lockedTarget.computeWorldMatrix(),this.lockedTarget.absolutePosition||this.lockedTarget):null},i.prototype.storeState=function(){return this._storedPosition=this.position.clone(),this._storedRotation=this.rotation.clone(),this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone()),e.prototype.storeState.call(this)},i.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.position=this._storedPosition.clone(),this.rotation=this._storedRotation.clone(),this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone()),this.cameraDirection.copyFromFloats(0,0,0),this.cameraRotation.copyFromFloats(0,0),!0)},i.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.lockedTarget=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotation=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotationQuaternion=new t.Quaternion(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},i.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this);var i=this._getLockedTargetPosition();i?this._cache.lockedTarget?this._cache.lockedTarget.copyFrom(i):this._cache.lockedTarget=i.clone():this._cache.lockedTarget=null,this._cache.rotation.copyFrom(this.rotation),this.rotationQuaternion&&this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)},i.prototype._isSynchronizedViewMatrix=function(){if(!e.prototype._isSynchronizedViewMatrix.call(this))return!1;var t=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(t):!t)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))},i.prototype._computeLocalCameraSpeed=function(){var t=this.getEngine();return this.speed*Math.sqrt(t.getDeltaTime()/(100*t.getFps()))},i.prototype.setTarget=function(e){this.upVector.normalize(),t.Matrix.LookAtLHToRef(this.position,e,this.upVector,this._camMatrix),this._camMatrix.invert(),this.rotation.x=Math.atan(this._camMatrix.m[6]/this._camMatrix.m[10]);var i=e.subtract(this.position);i.x>=0?this.rotation.y=-Math.atan(i.z/i.x)+Math.PI/2:this.rotation.y=-Math.atan(i.z/i.x)-Math.PI/2,this.rotation.z=0,isNaN(this.rotation.x)&&(this.rotation.x=0),isNaN(this.rotation.y)&&(this.rotation.y=0),isNaN(this.rotation.z)&&(this.rotation.z=0),this.rotationQuaternion&&t.Quaternion.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)},i.prototype.getTarget=function(){return this._currentTarget},i.prototype._decideIfNeedsToMove=function(){return Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},i.prototype._updatePosition=function(){if(this.parent)return this.parent.getWorldMatrix().invertToRef(t.Tmp.Matrix[0]),t.Vector3.TransformNormalToRef(this.cameraDirection,t.Tmp.Matrix[0],t.Tmp.Vector3[0]),void this.position.addInPlace(t.Tmp.Vector3[0]);this.position.addInPlace(this.cameraDirection)},i.prototype._checkInputs=function(){var i=this._decideIfNeedsToMove(),n=Math.abs(this.cameraRotation.x)>0||Math.abs(this.cameraRotation.y)>0;if(i&&this._updatePosition(),n&&(this.rotation.x+=this.cameraRotation.x,this.rotation.y+=this.cameraRotation.y,this.rotationQuaternion&&this.rotation.lengthSquared()&&t.Quaternion.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion),!this.noRotationConstraint)){var r=Math.PI/2*.95;this.rotation.x>r&&(this.rotation.x=r),this.rotation.x<-r&&(this.rotation.x=-r)}i&&(Math.abs(this.cameraDirection.x)<this.speed*t.Epsilon&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*t.Epsilon&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*t.Epsilon&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia)),n&&(Math.abs(this.cameraRotation.x)<this.speed*t.Epsilon&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*t.Epsilon&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia)),e.prototype._checkInputs.call(this)},i.prototype._updateCameraRotationMatrix=function(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):t.Matrix.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix),t.Vector3.TransformNormalToRef(this.upVector,this._cameraRotationMatrix,this._currentUpVector)},i.prototype._getViewMatrix=function(){return this.lockedTarget&&this.setTarget(this._getLockedTargetPosition()),this._updateCameraRotationMatrix(),t.Vector3.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),this.getScene().useRightHandedSystem?t.Matrix.LookAtRHToRef(this.position,this._currentTarget,this._currentUpVector,this._viewMatrix):t.Matrix.LookAtLHToRef(this.position,this._currentTarget,this._currentUpVector,this._viewMatrix),this._viewMatrix},i.prototype.createRigCamera=function(e,n){if(this.cameraRigMode!==t.Camera.RIG_MODE_NONE){var r=new i(e,this.position.clone(),this.getScene());return this.cameraRigMode!==t.Camera.RIG_MODE_VR&&this.cameraRigMode!==t.Camera.RIG_MODE_WEBVR||(this.rotationQuaternion||(this.rotationQuaternion=new t.Quaternion),r._cameraRigParams={},r.rotationQuaternion=new t.Quaternion),r}return null},i.prototype._updateRigCameras=function(){var i=this._rigCameras[0],n=this._rigCameras[1];switch(this.cameraRigMode){case t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER:var r=this.cameraRigMode===t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1,o=this.cameraRigMode===t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPosition(this._cameraRigParams.stereoHalfAngle*r,i.position),this._getRigCamPosition(this._cameraRigParams.stereoHalfAngle*o,n.position),i.setTarget(this.getTarget()),n.setTarget(this.getTarget());break;case t.Camera.RIG_MODE_VR:i.rotationQuaternion?(i.rotationQuaternion.copyFrom(this.rotationQuaternion),n.rotationQuaternion.copyFrom(this.rotationQuaternion)):(i.rotation.copyFrom(this.rotation),n.rotation.copyFrom(this.rotation)),i.position.copyFrom(this.position),n.position.copyFrom(this.position)}e.prototype._updateRigCameras.call(this)},i.prototype._getRigCamPosition=function(e,i){this._rigCamTransformMatrix||(this._rigCamTransformMatrix=new t.Matrix);var n=this.getTarget();t.Matrix.Translation(-n.x,-n.y,-n.z).multiplyToRef(t.Matrix.RotationY(e),this._rigCamTransformMatrix),this._rigCamTransformMatrix=this._rigCamTransformMatrix.multiply(t.Matrix.Translation(n.x,n.y,n.z)),t.Vector3.TransformCoordinatesToRef(this.position,this._rigCamTransformMatrix,i)},i.prototype.getClassName=function(){return"TargetCamera"},r([t.serializeAsVector3()],i.prototype,"rotation",void 0),r([t.serialize()],i.prototype,"speed",void 0),r([t.serializeAsMeshReference("lockedTargetId")],i.prototype,"lockedTarget",void 0),i}(t.Camera);t.TargetCamera=e}(l||(l={})),function(t){var e=function(){function e(t){void 0===t&&(t=!0),this.touchEnabled=t,this.buttons=[0,1,2],this.angularSensibility=2e3,this.previousPosition=null}return e.prototype.attachControl=function(e,i){var n=this,r=this.camera.getEngine();this._pointerInput||(this._pointerInput=function(o,s){var a=o.event;if(!r.isInVRExclusivePointerMode&&(n.touchEnabled||"touch"!==a.pointerType)&&(o.type===t.PointerEventTypes.POINTERMOVE||-1!==n.buttons.indexOf(a.button))){var l=a.srcElement||a.target;if(o.type===t.PointerEventTypes.POINTERDOWN&&l){try{l.setPointerCapture(a.pointerId)}catch(t){}n.previousPosition={x:a.clientX,y:a.clientY},i||(a.preventDefault(),e.focus())}else if(o.type===t.PointerEventTypes.POINTERUP&&l){try{l.releasePointerCapture(a.pointerId)}catch(t){}n.previousPosition=null,i||a.preventDefault()}else if(o.type===t.PointerEventTypes.POINTERMOVE){if(!n.previousPosition||r.isPointerLock)return;var c=a.clientX-n.previousPosition.x,u=a.clientY-n.previousPosition.y;n.camera.getScene().useRightHandedSystem?n.camera.cameraRotation.y-=c/n.angularSensibility:n.camera.cameraRotation.y+=c/n.angularSensibility,n.camera.cameraRotation.x+=u/n.angularSensibility,n.previousPosition={x:a.clientX,y:a.clientY},i||a.preventDefault()}}}),this._onMouseMove=function(t){if(r.isPointerLock&&!r.isInVRExclusivePointerMode){var e=t.movementX||t.mozMovementX||t.webkitMovementX||t.msMovementX||0,o=t.movementY||t.mozMovementY||t.webkitMovementY||t.msMovementY||0;n.camera.getScene().useRightHandedSystem?n.camera.cameraRotation.y-=e/n.angularSensibility:n.camera.cameraRotation.y+=e/n.angularSensibility,n.camera.cameraRotation.x+=o/n.angularSensibility,n.previousPosition=null,i||t.preventDefault()}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,t.PointerEventTypes.POINTERDOWN|t.PointerEventTypes.POINTERUP|t.PointerEventTypes.POINTERMOVE),e.addEventListener("mousemove",this._onMouseMove,!1)},e.prototype.detachControl=function(t){this._observer&&t&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._onMouseMove&&t.removeEventListener("mousemove",this._onMouseMove),this._observer=null,this._onMouseMove=null,this.previousPosition=null)},e.prototype.getClassName=function(){return"FreeCameraMouseInput"},e.prototype.getSimpleName=function(){return"mouse"},r([t.serialize()],e.prototype,"buttons",void 0),r([t.serialize()],e.prototype,"angularSensibility",void 0),e}();t.FreeCameraMouseInput=e,t.CameraInputTypes.FreeCameraMouseInput=e}(l||(l={})),function(t){var e=function(){function e(){this._keys=new Array,this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39]}return e.prototype.attachControl=function(e,i){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r=e.event;if(e.type===t.KeyboardEventTypes.KEYDOWN)-1===n.keysUp.indexOf(r.keyCode)&&-1===n.keysDown.indexOf(r.keyCode)&&-1===n.keysLeft.indexOf(r.keyCode)&&-1===n.keysRight.indexOf(r.keyCode)||(-1===(o=n._keys.indexOf(r.keyCode))&&n._keys.push(r.keyCode),i||r.preventDefault());else if(-1!==n.keysUp.indexOf(r.keyCode)||-1!==n.keysDown.indexOf(r.keyCode)||-1!==n.keysLeft.indexOf(r.keyCode)||-1!==n.keysRight.indexOf(r.keyCode)){var o;(o=n._keys.indexOf(r.keyCode))>=0&&n._keys.splice(o,1),i||r.preventDefault()}}))},e.prototype.detachControl=function(t){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,i=0;i<this._keys.length;i++){var n=this._keys[i],r=e._computeLocalCameraSpeed();-1!==this.keysLeft.indexOf(n)?e._localDirection.copyFromFloats(-r,0,0):-1!==this.keysUp.indexOf(n)?e._localDirection.copyFromFloats(0,0,r):-1!==this.keysRight.indexOf(n)?e._localDirection.copyFromFloats(r,0,0):-1!==this.keysDown.indexOf(n)&&e._localDirection.copyFromFloats(0,0,-r),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),t.Vector3.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}},e.prototype.getClassName=function(){return"FreeCameraKeyboardMoveInput"},e.prototype._onLostFocus=function(t){this._keys=[]},e.prototype.getSimpleName=function(){return"keyboard"},r([t.serialize()],e.prototype,"keysUp",void 0),r([t.serialize()],e.prototype,"keysDown",void 0),r([t.serialize()],e.prototype,"keysLeft",void 0),r([t.serialize()],e.prototype,"keysRight",void 0),e}();t.FreeCameraKeyboardMoveInput=e,t.CameraInputTypes.FreeCameraKeyboardMoveInput=e}(l||(l={})),function(t){var e=function(e){function i(t){return e.call(this,t)||this}return o(i,e),i.prototype.addKeyboard=function(){return this.add(new t.FreeCameraKeyboardMoveInput),this},i.prototype.addMouse=function(e){return void 0===e&&(e=!0),this.add(new t.FreeCameraMouseInput(e)),this},i.prototype.addGamepad=function(){return this.add(new t.FreeCameraGamepadInput),this},i.prototype.addDeviceOrientation=function(){return this.add(new t.FreeCameraDeviceOrientationInput),this},i.prototype.addTouch=function(){return this.add(new t.FreeCameraTouchInput),this},i.prototype.addVirtualJoystick=function(){return this.add(new t.FreeCameraVirtualJoystickInput),this},i}(t.CameraInputsManager);t.FreeCameraInputsManager=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r){var o=e.call(this,i,n,r)||this;return o.ellipsoid=new t.Vector3(.5,1,.5),o.ellipsoidOffset=new t.Vector3(0,0,0),o.checkCollisions=!1,o.applyGravity=!1,o._needMoveForGravity=!1,o._oldPosition=t.Vector3.Zero(),o._diffPosition=t.Vector3.Zero(),o._newPosition=t.Vector3.Zero(),o._collisionMask=-1,o._onCollisionPositionChange=function(e,i,n){void 0===n&&(n=null),o.getScene().workerCollisions&&i.multiplyInPlace(o._collider._radius),function(e){o._newPosition.copyFrom(e),o._newPosition.subtractToRef(o._oldPosition,o._diffPosition),o._diffPosition.length()>t.Engine.CollisionsEpsilon&&(o.position.addInPlace(o._diffPosition),o.onCollide&&n&&o.onCollide(n))}(i)},o.inputs=new t.FreeCameraInputsManager(o),o.inputs.addKeyboard().addMouse(),o}return o(i,e),Object.defineProperty(i.prototype,"angularSensibility",{get:function(){var t=this.inputs.attached.mouse;return t?t.angularSensibility:0},set:function(t){var e=this.inputs.attached.mouse;e&&(e.angularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysUp",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysUp:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysUp=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysDown",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysDown:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysDown=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysLeft",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysLeft:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysLeft=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysRight",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysRight:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysRight=t)},enumerable:!0,configurable:!0}),i.prototype.attachControl=function(t,e){this.inputs.attachElement(t,e)},i.prototype.detachControl=function(e){this.inputs.detachElement(e),this.cameraDirection=new t.Vector3(0,0,0),this.cameraRotation=new t.Vector2(0,0)},Object.defineProperty(i.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(t){this._collisionMask=isNaN(t)?-1:t},enumerable:!0,configurable:!0}),i.prototype._collideWithWorld=function(e){(this.parent?t.Vector3.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset),this._collider||(this._collider=new t.Collider),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;var i=e;this.applyGravity&&(i=e.add(this.getScene().gravity)),this.getScene().collisionCoordinator.getNewPosition(this._oldPosition,i,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)},i.prototype._checkInputs=function(){this._localDirection||(this._localDirection=t.Vector3.Zero(),this._transformedDirection=t.Vector3.Zero()),this.inputs.checkInputs(),e.prototype._checkInputs.call(this)},i.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},i.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):e.prototype._updatePosition.call(this)},i.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},i.prototype.getClassName=function(){return"FreeCamera"},r([t.serializeAsVector3()],i.prototype,"ellipsoid",void 0),r([t.serializeAsVector3()],i.prototype,"ellipsoidOffset",void 0),r([t.serialize()],i.prototype,"checkCollisions",void 0),r([t.serialize()],i.prototype,"applyGravity",void 0),i}(t.TargetCamera);t.FreeCamera=e}(l||(l={})),function(t){var e=function(){function e(){this._keys=new Array,this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this.keysReset=[220],this.panningSensibility=50,this.zoomingSensibility=25,this.useAltToZoom=!0}return e.prototype.attachControl=function(e,i){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r=e.event;if(e.type===t.KeyboardEventTypes.KEYDOWN)n._ctrlPressed=r.ctrlKey,n._altPressed=r.altKey,(-1!==n.keysUp.indexOf(r.keyCode)||-1!==n.keysDown.indexOf(r.keyCode)||-1!==n.keysLeft.indexOf(r.keyCode)||-1!==n.keysRight.indexOf(r.keyCode)||-1!==n.keysReset.indexOf(r.keyCode))&&(-1===(o=n._keys.indexOf(r.keyCode))&&n._keys.push(r.keyCode),r.preventDefault&&(i||r.preventDefault()));else if(-1!==n.keysUp.indexOf(r.keyCode)||-1!==n.keysDown.indexOf(r.keyCode)||-1!==n.keysLeft.indexOf(r.keyCode)||-1!==n.keysRight.indexOf(r.keyCode)||-1!==n.keysReset.indexOf(r.keyCode)){var o;(o=n._keys.indexOf(r.keyCode))>=0&&n._keys.splice(o,1),r.preventDefault&&(i||r.preventDefault())}}))},e.prototype.detachControl=function(t){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var t=this.camera,e=0;e<this._keys.length;e++){var i=this._keys[e];-1!==this.keysLeft.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningX-=1/this.panningSensibility:t.inertialAlphaOffset-=.01:-1!==this.keysUp.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningY+=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?t.inertialRadiusOffset+=1/this.zoomingSensibility:t.inertialBetaOffset-=.01:-1!==this.keysRight.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningX+=1/this.panningSensibility:t.inertialAlphaOffset+=.01:-1!==this.keysDown.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningY-=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?t.inertialRadiusOffset-=1/this.zoomingSensibility:t.inertialBetaOffset+=.01:-1!==this.keysReset.indexOf(i)&&t.restoreState()}},e.prototype.getClassName=function(){return"ArcRotateCameraKeyboardMoveInput"},e.prototype.getSimpleName=function(){return"keyboard"},r([t.serialize()],e.prototype,"keysUp",void 0),r([t.serialize()],e.prototype,"keysDown",void 0),r([t.serialize()],e.prototype,"keysLeft",void 0),r([t.serialize()],e.prototype,"keysRight",void 0),r([t.serialize()],e.prototype,"keysReset",void 0),r([t.serialize()],e.prototype,"panningSensibility",void 0),r([t.serialize()],e.prototype,"zoomingSensibility",void 0),r([t.serialize()],e.prototype,"useAltToZoom",void 0),e}();t.ArcRotateCameraKeyboardMoveInput=e,t.CameraInputTypes.ArcRotateCameraKeyboardMoveInput=e}(l||(l={})),function(t){var e=function(){function e(){this.wheelPrecision=3,this.wheelDeltaPercentage=0}return e.prototype.attachControl=function(e,i){var n=this;this._wheel=function(e,r){if(e.type===t.PointerEventTypes.POINTERWHEEL){var o=e.event,s=0;o.wheelDelta?s=n.wheelDeltaPercentage?.01*o.wheelDelta*n.camera.radius*n.wheelDeltaPercentage:o.wheelDelta/(40*n.wheelPrecision):o.detail&&(s=-o.detail/n.wheelPrecision),s&&(n.camera.inertialRadiusOffset+=s),o.preventDefault&&(i||o.preventDefault())}},this._observer=this.camera.getScene().onPointerObservable.add(this._wheel,t.PointerEventTypes.POINTERWHEEL)},e.prototype.detachControl=function(t){this._observer&&t&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._wheel=null)},e.prototype.getClassName=function(){return"ArcRotateCameraMouseWheelInput"},e.prototype.getSimpleName=function(){return"mousewheel"},r([t.serialize()],e.prototype,"wheelPrecision",void 0),r([t.serialize()],e.prototype,"wheelDeltaPercentage",void 0),e}();t.ArcRotateCameraMouseWheelInput=e,t.CameraInputTypes.ArcRotateCameraMouseWheelInput=e}(l||(l={})),function(t){var e=function(){function e(){this.buttons=[0,1,2],this.angularSensibilityX=1e3,this.angularSensibilityY=1e3,this.pinchPrecision=12,this.pinchDeltaPercentage=0,this.panningSensibility=1e3,this.multiTouchPanning=!0,this.multiTouchPanAndZoom=!0,this._isPanClick=!1,this.pinchInwards=!0}return e.prototype.attachControl=function(e,i){var n,r=this,o=this.camera.getEngine(),s=null,a=null,l=0,c=0,u=0,h={x:0,y:0,isPaning:!1,isPinching:!1};this._pointerInput=function(p,d){var f=p.event,m="touch"===p.event.pointerType;if(!o.isInVRExclusivePointerMode&&(p.type===t.PointerEventTypes.POINTERMOVE||-1!==r.buttons.indexOf(f.button))){var g=f.srcElement||f.target;if(p.type===t.PointerEventTypes.POINTERDOWN&&g){try{g.setPointerCapture(f.pointerId)}catch(t){}r._isPanClick=f.button===r.camera._panningMouseButton,n={x:f.clientX,y:f.clientY,pointerId:f.pointerId,type:f.pointerType},null===s?s=n:null===a&&(a=n),i||(f.preventDefault(),e.focus())}else if(p.type===t.PointerEventTypes.POINTERDOUBLETAP)r.camera.restoreState();else if(p.type===t.PointerEventTypes.POINTERUP&&g){try{g.releasePointerCapture(f.pointerId)}catch(t){}n=null,l=0,h.isPaning=!1,h.isPinching=!1,u=0,c=0,m||(a=null),o.badOS?s=a=null:a&&s&&s.pointerId==f.pointerId?(s=a,a=null,n={x:s.x,y:s.y,pointerId:s.pointerId,type:f.pointerType}):s&&a&&a.pointerId==f.pointerId?(a=null,n={x:s.x,y:s.y,pointerId:s.pointerId,type:f.pointerType}):s=a=null,i||f.preventDefault()}else if(p.type===t.PointerEventTypes.POINTERMOVE)if(i||f.preventDefault(),s&&null===a&&n){if(0!==r.panningSensibility&&(f.ctrlKey&&r.camera._useCtrlForPanning||r._isPanClick))r.camera.inertialPanningX+=-(f.clientX-n.x)/r.panningSensibility,r.camera.inertialPanningY+=(f.clientY-n.y)/r.panningSensibility;else{var y=f.clientX-n.x,_=f.clientY-n.y;r.camera.inertialAlphaOffset-=y/r.angularSensibilityX,r.camera.inertialBetaOffset-=_/r.angularSensibilityY}n.x=f.clientX,n.y=f.clientY}else if(s&&a){var v=s.pointerId===f.pointerId?s:a;v.x=f.clientX,v.y=f.clientY;var b=r.pinchInwards?1:-1,x=s.x-a.x,A=s.y-a.y,w=x*x+A*A,P=Math.sqrt(w);if(0===l)return c=P,l=w,h.x=(s.x+a.x)/2,void(h.y=(s.y+a.y)/2);if(r.multiTouchPanAndZoom){if(r.pinchDeltaPercentage?r.camera.inertialRadiusOffset+=.001*(w-l)*r.camera.radius*r.pinchDeltaPercentage:r.camera.inertialRadiusOffset+=(w-l)/(r.pinchPrecision*((r.angularSensibilityX+r.angularSensibilityY)/2)*b),0!==r.panningSensibility){var E=(s.x+a.x)/2,T=(s.y+a.y)/2,S=E-h.x,C=T-h.y;h.x=E,h.y=T,r.camera.inertialPanningX+=-S/r.panningSensibility,r.camera.inertialPanningY+=C/r.panningSensibility}}else{if(u++,h.isPinching||u<20&&Math.abs(P-c)>r.camera.pinchToPanMaxDistance)r.pinchDeltaPercentage?r.camera.inertialRadiusOffset+=.001*(w-l)*r.camera.radius*r.pinchDeltaPercentage:r.camera.inertialRadiusOffset+=(w-l)/(r.pinchPrecision*((r.angularSensibilityX+r.angularSensibilityY)/2)*b),h.isPaning=!1,h.isPinching=!0;else if(n&&n.pointerId===v.pointerId&&0!==r.panningSensibility&&r.multiTouchPanning){if(!h.isPaning)return h.isPaning=!0,h.isPinching=!1,h.x=v.x,void(h.y=v.y);r.camera.inertialPanningX+=-(v.x-h.x)/r.panningSensibility,r.camera.inertialPanningY+=(v.y-h.y)/r.panningSensibility}n&&n.pointerId===f.pointerId&&(h.x=v.x,h.y=v.y)}l=w}}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,t.PointerEventTypes.POINTERDOWN|t.PointerEventTypes.POINTERUP|t.PointerEventTypes.POINTERMOVE|t.PointerEventTypes._POINTERDOUBLETAP),this._onContextMenu=function(t){t.preventDefault()},this.camera._useCtrlForPanning||e.addEventListener("contextmenu",this._onContextMenu,!1),this._onLostFocus=function(){s=a=null,l=0,h.isPaning=!1,h.isPinching=!1,u=0,n=null,c=0},this._onMouseMove=function(t){if(o.isPointerLock){var e=t.movementX||t.mozMovementX||t.webkitMovementX||t.msMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||t.msMovementY||0;r.camera.inertialAlphaOffset-=e/r.angularSensibilityX,r.camera.inertialBetaOffset-=n/r.angularSensibilityY,i||t.preventDefault()}},this._onGestureStart=function(t){void 0!==window.MSGesture&&(r._MSGestureHandler||(r._MSGestureHandler=new MSGesture,r._MSGestureHandler.target=e),r._MSGestureHandler.addPointer(t.pointerId))},this._onGesture=function(t){r.camera.radius*=t.scale,t.preventDefault&&(i||(t.stopPropagation(),t.preventDefault()))},e.addEventListener("mousemove",this._onMouseMove,!1),e.addEventListener("MSPointerDown",this._onGestureStart,!1),e.addEventListener("MSGestureChange",this._onGesture,!1),t.Tools.RegisterTopRootEvents([{name:"blur",handler:this._onLostFocus}])},e.prototype.detachControl=function(e){this._onLostFocus&&t.Tools.UnregisterTopRootEvents([{name:"blur",handler:this._onLostFocus}]),e&&this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._onContextMenu&&e.removeEventListener("contextmenu",this._onContextMenu),this._onMouseMove&&e.removeEventListener("mousemove",this._onMouseMove),this._onGestureStart&&e.removeEventListener("MSPointerDown",this._onGestureStart),this._onGesture&&e.removeEventListener("MSGestureChange",this._onGesture),this._isPanClick=!1,this.pinchInwards=!0,this._onMouseMove=null,this._onGestureStart=null,this._onGesture=null,this._MSGestureHandler=null,this._onLostFocus=null,this._onContextMenu=null)},e.prototype.getClassName=function(){return"ArcRotateCameraPointersInput"},e.prototype.getSimpleName=function(){return"pointers"},r([t.serialize()],e.prototype,"buttons",void 0),r([t.serialize()],e.prototype,"angularSensibilityX",void 0),r([t.serialize()],e.prototype,"angularSensibilityY",void 0),r([t.serialize()],e.prototype,"pinchPrecision",void 0),r([t.serialize()],e.prototype,"pinchDeltaPercentage",void 0),r([t.serialize()],e.prototype,"panningSensibility",void 0),r([t.serialize()],e.prototype,"multiTouchPanning",void 0),r([t.serialize()],e.prototype,"multiTouchPanAndZoom",void 0),e}();t.ArcRotateCameraPointersInput=e,t.CameraInputTypes.ArcRotateCameraPointersInput=e}(l||(l={})),function(t){var e=function(e){function i(t){return e.call(this,t)||this}return o(i,e),i.prototype.addMouseWheel=function(){return this.add(new t.ArcRotateCameraMouseWheelInput),this},i.prototype.addPointers=function(){return this.add(new t.ArcRotateCameraPointersInput),this},i.prototype.addKeyboard=function(){return this.add(new t.ArcRotateCameraKeyboardMoveInput),this},i.prototype.addGamepad=function(){return this.add(new t.ArcRotateCameraGamepadInput),this},i.prototype.addVRDeviceOrientation=function(){return this.add(new t.ArcRotateCameraVRDeviceOrientationInput),this},i}(t.CameraInputsManager);t.ArcRotateCameraInputsManager=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a){var l=e.call(this,i,t.Vector3.Zero(),a)||this;return l.inertialAlphaOffset=0,l.inertialBetaOffset=0,l.inertialRadiusOffset=0,l.lowerAlphaLimit=null,l.upperAlphaLimit=null,l.lowerBetaLimit=.01,l.upperBetaLimit=Math.PI,l.lowerRadiusLimit=null,l.upperRadiusLimit=null,l.inertialPanningX=0,l.inertialPanningY=0,l.pinchToPanMaxDistance=20,l.panningDistanceLimit=null,l.panningOriginTarget=t.Vector3.Zero(),l.panningInertia=.9,l.zoomOnFactor=1,l.targetScreenOffset=t.Vector2.Zero(),l.allowUpsideDown=!0,l._viewMatrix=new t.Matrix,l.panningAxis=new t.Vector3(1,1,0),l.onMeshTargetChangedObservable=new t.Observable,l.checkCollisions=!1,l.collisionRadius=new t.Vector3(.5,.5,.5),l._previousPosition=t.Vector3.Zero(),l._collisionVelocity=t.Vector3.Zero(),l._newPosition=t.Vector3.Zero(),l._onCollisionPositionChange=function(e,i,n){void 0===n&&(n=null),l.getScene().workerCollisions&&l.checkCollisions&&i.multiplyInPlace(l._collider._radius),n?(l.setPosition(i),l.onCollide&&l.onCollide(n)):l._previousPosition.copyFrom(l.position);var r=Math.cos(l.alpha),o=Math.sin(l.alpha),s=Math.cos(l.beta),a=Math.sin(l.beta);0===a&&(a=1e-4);var c=l._getTargetPosition();c.addToRef(new t.Vector3(l.radius*r*a,l.radius*s,l.radius*o*a),l._newPosition),l.position.copyFrom(l._newPosition);var u=l.upVector;l.allowUpsideDown&&l.beta<0&&(u=(u=u.clone()).negate()),t.Matrix.LookAtLHToRef(l.position,c,u,l._viewMatrix),l._viewMatrix.m[12]+=l.targetScreenOffset.x,l._viewMatrix.m[13]+=l.targetScreenOffset.y,l._collisionTriggered=!1},l._target=t.Vector3.Zero(),s&&l.setTarget(s),l.alpha=n,l.beta=r,l.radius=o,l.getViewMatrix(),l.inputs=new t.ArcRotateCameraInputsManager(l),l.inputs.addKeyboard().addMouseWheel().addPointers(),l}return o(i,e),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this.setTarget(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angularSensibilityX",{get:function(){var t=this.inputs.attached.pointers;return t?t.angularSensibilityX:0},set:function(t){var e=this.inputs.attached.pointers;e&&(e.angularSensibilityX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angularSensibilityY",{get:function(){var t=this.inputs.attached.pointers;return t?t.angularSensibilityY:0},set:function(t){var e=this.inputs.attached.pointers;e&&(e.angularSensibilityY=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pinchPrecision",{get:function(){var t=this.inputs.attached.pointers;return t?t.pinchPrecision:0},set:function(t){var e=this.inputs.attached.pointers;e&&(e.pinchPrecision=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pinchDeltaPercentage",{get:function(){var t=this.inputs.attached.pointers;return t?t.pinchDeltaPercentage:0},set:function(t){var e=this.inputs.attached.pointers;e&&(e.pinchDeltaPercentage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panningSensibility",{get:function(){var t=this.inputs.attached.pointers;return t?t.panningSensibility:0},set:function(t){var e=this.inputs.attached.pointers;e&&(e.panningSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysUp",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysUp:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysUp=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysDown",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysDown:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysDown=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysLeft",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysLeft:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysLeft=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keysRight",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysRight:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysRight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelPrecision",{get:function(){var t=this.inputs.attached.mousewheel;return t?t.wheelPrecision:0},set:function(t){var e=this.inputs.attached.mousewheel;e&&(e.wheelPrecision=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelDeltaPercentage",{get:function(){var t=this.inputs.attached.mousewheel;return t?t.wheelDeltaPercentage:0},set:function(t){var e=this.inputs.attached.mousewheel;e&&(e.wheelDeltaPercentage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bouncingBehavior",{get:function(){return this._bouncingBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useBouncingBehavior",{get:function(){return null!=this._bouncingBehavior},set:function(e){e!==this.useBouncingBehavior&&(e?(this._bouncingBehavior=new t.BouncingBehavior,this.addBehavior(this._bouncingBehavior)):this._bouncingBehavior&&(this.removeBehavior(this._bouncingBehavior),this._bouncingBehavior=null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"framingBehavior",{get:function(){return this._framingBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useFramingBehavior",{get:function(){return null!=this._framingBehavior},set:function(e){e!==this.useFramingBehavior&&(e?(this._framingBehavior=new t.FramingBehavior,this.addBehavior(this._framingBehavior)):this._framingBehavior&&(this.removeBehavior(this._framingBehavior),this._framingBehavior=null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoRotationBehavior",{get:function(){return this._autoRotationBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useAutoRotationBehavior",{get:function(){return null!=this._autoRotationBehavior},set:function(e){e!==this.useAutoRotationBehavior&&(e?(this._autoRotationBehavior=new t.AutoRotationBehavior,this.addBehavior(this._autoRotationBehavior)):this._autoRotationBehavior&&(this.removeBehavior(this._autoRotationBehavior),this._autoRotationBehavior=null))},enumerable:!0,configurable:!0}),i.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache._target=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.alpha=void 0,this._cache.beta=void 0,this._cache.radius=void 0,this._cache.targetScreenOffset=t.Vector2.Zero()},i.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache._target.copyFrom(this._getTargetPosition()),this._cache.alpha=this.alpha,this._cache.beta=this.beta,this._cache.radius=this.radius,this._cache.targetScreenOffset.copyFrom(this.targetScreenOffset)},i.prototype._getTargetPosition=function(){if(this._targetHost&&this._targetHost.getAbsolutePosition){var t=this._targetHost.getAbsolutePosition();this._targetBoundingCenter?t.addToRef(this._targetBoundingCenter,this._target):this._target.copyFrom(t)}return this._getLockedTargetPosition()||this._target},i.prototype.storeState=function(){return this._storedAlpha=this.alpha,this._storedBeta=this.beta,this._storedRadius=this.radius,this._storedTarget=this._getTargetPosition().clone(),e.prototype.storeState.call(this)},i.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.alpha=this._storedAlpha,this.beta=this._storedBeta,this.radius=this._storedRadius,this.setTarget(this._storedTarget.clone()),this.inertialAlphaOffset=0,this.inertialBetaOffset=0,this.inertialRadiusOffset=0,this.inertialPanningX=0,this.inertialPanningY=0,!0)},i.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronizedViewMatrix.call(this)&&this._cache._target.equals(this._getTargetPosition())&&this._cache.alpha===this.alpha&&this._cache.beta===this.beta&&this._cache.radius===this.radius&&this._cache.targetScreenOffset.equals(this.targetScreenOffset)},i.prototype.attachControl=function(t,e,i,n){var r=this;void 0===i&&(i=!0),void 0===n&&(n=2),this._useCtrlForPanning=i,this._panningMouseButton=n,this.inputs.attachElement(t,e),this._reset=function(){r.inertialAlphaOffset=0,r.inertialBetaOffset=0,r.inertialRadiusOffset=0,r.inertialPanningX=0,r.inertialPanningY=0}},i.prototype.detachControl=function(t){this.inputs.detachElement(t),this._reset&&this._reset()},i.prototype._checkInputs=function(){if(!this._collisionTriggered){if(this.inputs.checkInputs(),0===this.inertialAlphaOffset&&0===this.inertialBetaOffset&&0===this.inertialRadiusOffset||(this.getScene().useRightHandedSystem?this.alpha-=this.beta<=0?-this.inertialAlphaOffset:this.inertialAlphaOffset:this.alpha+=this.beta<=0?-this.inertialAlphaOffset:this.inertialAlphaOffset,this.beta+=this.inertialBetaOffset,this.radius-=this.inertialRadiusOffset,this.inertialAlphaOffset*=this.inertia,this.inertialBetaOffset*=this.inertia,this.inertialRadiusOffset*=this.inertia,Math.abs(this.inertialAlphaOffset)<t.Epsilon&&(this.inertialAlphaOffset=0),Math.abs(this.inertialBetaOffset)<t.Epsilon&&(this.inertialBetaOffset=0),Math.abs(this.inertialRadiusOffset)<this.speed*t.Epsilon&&(this.inertialRadiusOffset=0)),0!==this.inertialPanningX||0!==this.inertialPanningY){if(this._localDirection||(this._localDirection=t.Vector3.Zero(),this._transformedDirection=t.Vector3.Zero()),this._localDirection.copyFromFloats(this.inertialPanningX,this.inertialPanningY,this.inertialPanningY),this._localDirection.multiplyInPlace(this.panningAxis),this._viewMatrix.invertToRef(this._cameraTransformMatrix),t.Vector3.TransformNormalToRef(this._localDirection,this._cameraTransformMatrix,this._transformedDirection),this.panningAxis.y||(this._transformedDirection.y=0),!this._targetHost)if(this.panningDistanceLimit){this._transformedDirection.addInPlace(this._target),t.Vector3.DistanceSquared(this._transformedDirection,this.panningOriginTarget)<=this.panningDistanceLimit*this.panningDistanceLimit&&this._target.copyFrom(this._transformedDirection)}else this._target.addInPlace(this._transformedDirection);this.inertialPanningX*=this.panningInertia,this.inertialPanningY*=this.panningInertia,Math.abs(this.inertialPanningX)<this.speed*t.Epsilon&&(this.inertialPanningX=0),Math.abs(this.inertialPanningY)<this.speed*t.Epsilon&&(this.inertialPanningY=0)}this._checkLimits(),e.prototype._checkInputs.call(this)}},i.prototype._checkLimits=function(){null===this.lowerBetaLimit||void 0===this.lowerBetaLimit?this.allowUpsideDown&&this.beta>Math.PI&&(this.beta=this.beta-2*Math.PI):this.beta<this.lowerBetaLimit&&(this.beta=this.lowerBetaLimit),null===this.upperBetaLimit||void 0===this.upperBetaLimit?this.allowUpsideDown&&this.beta<-Math.PI&&(this.beta=this.beta+2*Math.PI):this.beta>this.upperBetaLimit&&(this.beta=this.upperBetaLimit),this.lowerAlphaLimit&&this.alpha<this.lowerAlphaLimit&&(this.alpha=this.lowerAlphaLimit),this.upperAlphaLimit&&this.alpha>this.upperAlphaLimit&&(this.alpha=this.upperAlphaLimit),this.lowerRadiusLimit&&this.radius<this.lowerRadiusLimit&&(this.radius=this.lowerRadiusLimit),this.upperRadiusLimit&&this.radius>this.upperRadiusLimit&&(this.radius=this.upperRadiusLimit)},i.prototype.rebuildAnglesAndRadius=function(){var t=this.position.subtract(this._getTargetPosition());this.radius=t.length(),0===this.radius&&(this.radius=1e-4),this.alpha=Math.acos(t.x/Math.sqrt(Math.pow(t.x,2)+Math.pow(t.z,2))),t.z<0&&(this.alpha=2*Math.PI-this.alpha),this.beta=Math.acos(t.y/this.radius),this._checkLimits()},i.prototype.setPosition=function(t){this.position.equals(t)||(this.position.copyFrom(t),this.rebuildAnglesAndRadius())},i.prototype.setTarget=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t.getBoundingInfo)this._targetBoundingCenter=e?t.getBoundingInfo().boundingBox.centerWorld.clone():null,this._targetHost=t,this._target=this._getTargetPosition(),this.onMeshTargetChangedObservable.notifyObservers(this._targetHost);else{var n=t,r=this._getTargetPosition();if(r&&!i&&r.equals(n))return;this._targetHost=null,this._target=n,this._targetBoundingCenter=null,this.onMeshTargetChangedObservable.notifyObservers(null)}this.rebuildAnglesAndRadius()},i.prototype._getViewMatrix=function(){var e=Math.cos(this.alpha),i=Math.sin(this.alpha),n=Math.cos(this.beta),r=Math.sin(this.beta);0===r&&(r=1e-4);var o=this._getTargetPosition();if(o.addToRef(new t.Vector3(this.radius*e*r,this.radius*n,this.radius*i*r),this._newPosition),this.getScene().collisionsEnabled&&this.checkCollisions)this._collider||(this._collider=new t.Collider),this._collider._radius=this.collisionRadius,this._newPosition.subtractToRef(this.position,this._collisionVelocity),this._collisionTriggered=!0,this.getScene().collisionCoordinator.getNewPosition(this.position,this._collisionVelocity,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId);else{this.position.copyFrom(this._newPosition);var s=this.upVector;this.allowUpsideDown&&r<0&&(s=(s=s.clone()).negate()),this.getScene().useRightHandedSystem?t.Matrix.LookAtRHToRef(this.position,o,s,this._viewMatrix):t.Matrix.LookAtLHToRef(this.position,o,s,this._viewMatrix),this._viewMatrix.m[12]+=this.targetScreenOffset.x,this._viewMatrix.m[13]+=this.targetScreenOffset.y}return this._currentTarget=o,this._viewMatrix},i.prototype.zoomOn=function(e,i){void 0===i&&(i=!1),e=e||this.getScene().meshes;var n=t.Mesh.MinMax(e),r=t.Vector3.Distance(n.min,n.max);this.radius=r*this.zoomOnFactor,this.focusOn({min:n.min,max:n.max,distance:r},i)},i.prototype.focusOn=function(e,i){var n,r;if(void 0===i&&(i=!1),void 0===e.min){var o=e||this.getScene().meshes;n=t.Mesh.MinMax(o),r=t.Vector3.Distance(n.min,n.max)}else{n=e,r=e.distance}this._target=t.Mesh.Center(n),i||(this.maxZ=2*r)},i.prototype.createRigCamera=function(e,n){var r=0;switch(this.cameraRigMode){case t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER:case t.Camera.RIG_MODE_VR:r=this._cameraRigParams.stereoHalfAngle*(0===n?1:-1);break;case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:r=this._cameraRigParams.stereoHalfAngle*(0===n?-1:1)}var o=new i(e,this.alpha+r,this.beta,this.radius,this._target,this.getScene());return o._cameraRigParams={},o},i.prototype._updateRigCameras=function(){var i=this._rigCameras[0],n=this._rigCameras[1];switch(i.beta=n.beta=this.beta,i.radius=n.radius=this.radius,this.cameraRigMode){case t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER:case t.Camera.RIG_MODE_VR:i.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle,n.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle;break;case t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:i.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle,n.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle}e.prototype._updateRigCameras.call(this)},i.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},i.prototype.getClassName=function(){return"ArcRotateCamera"},r([t.serialize()],i.prototype,"alpha",void 0),r([t.serialize()],i.prototype,"beta",void 0),r([t.serialize()],i.prototype,"radius",void 0),r([t.serializeAsVector3("target")],i.prototype,"_target",void 0),r([t.serialize()],i.prototype,"inertialAlphaOffset",void 0),r([t.serialize()],i.prototype,"inertialBetaOffset",void 0),r([t.serialize()],i.prototype,"inertialRadiusOffset",void 0),r([t.serialize()],i.prototype,"lowerAlphaLimit",void 0),r([t.serialize()],i.prototype,"upperAlphaLimit",void 0),r([t.serialize()],i.prototype,"lowerBetaLimit",void 0),r([t.serialize()],i.prototype,"upperBetaLimit",void 0),r([t.serialize()],i.prototype,"lowerRadiusLimit",void 0),r([t.serialize()],i.prototype,"upperRadiusLimit",void 0),r([t.serialize()],i.prototype,"inertialPanningX",void 0),r([t.serialize()],i.prototype,"inertialPanningY",void 0),r([t.serialize()],i.prototype,"pinchToPanMaxDistance",void 0),r([t.serialize()],i.prototype,"panningDistanceLimit",void 0),r([t.serializeAsVector3()],i.prototype,"panningOriginTarget",void 0),r([t.serialize()],i.prototype,"panningInertia",void 0),r([t.serialize()],i.prototype,"zoomOnFactor",void 0),r([t.serialize()],i.prototype,"allowUpsideDown",void 0),i}(t.TargetCamera);t.ArcRotateCamera=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r){var o=e.call(this,i,r)||this;return o.groundColor=new t.Color3(0,0,0),o.direction=n||t.Vector3.Up(),o}return o(i,e),i.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("vLightGround",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},i.prototype.getClassName=function(){return"HemisphericLight"},i.prototype.setDirectionToTarget=function(e){return this.direction=t.Vector3.Normalize(e.subtract(t.Vector3.Zero())),this.direction},i.prototype.getShadowGenerator=function(){return null},i.prototype.transferToEffect=function(e,i){var n=t.Vector3.Normalize(this.direction);return this._uniformBuffer.updateFloat4("vLightData",n.x,n.y,n.z,0,i),this._uniformBuffer.updateColor3("vLightGround",this.groundColor.scale(this.intensity),i),this},i.prototype._getWorldMatrix=function(){return this._worldMatrix||(this._worldMatrix=t.Matrix.Identity()),this._worldMatrix},i.prototype.getTypeID=function(){return t.Light.LIGHTTYPEID_HEMISPHERICLIGHT},r([t.serializeAsColor3()],i.prototype,"groundColor",void 0),r([t.serializeAsVector3()],i.prototype,"direction",void 0),i}(t.Light);t.HemisphericLight=e}(l||(l={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._needProjectionMatrixCompute=!0,t}return o(i,e),i.prototype._setPosition=function(t){this._position=t},Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._setPosition(t)},enumerable:!0,configurable:!0}),i.prototype._setDirection=function(t){this._direction=t},Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._setDirection(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowMinZ",{get:function(){return this._shadowMinZ},set:function(t){this._shadowMinZ=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowMaxZ",{get:function(){return this._shadowMaxZ},set:function(t){this._shadowMaxZ=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),i.prototype.computeTransformedInformation=function(){return!(!this.parent||!this.parent.getWorldMatrix||(this.transformedPosition||(this.transformedPosition=t.Vector3.Zero()),t.Vector3.TransformCoordinatesToRef(this.position,this.parent.getWorldMatrix(),this.transformedPosition),this.direction&&(this.transformedDirection||(this.transformedDirection=t.Vector3.Zero()),t.Vector3.TransformNormalToRef(this.direction,this.parent.getWorldMatrix(),this.transformedDirection)),0))},i.prototype.getDepthScale=function(){return 50},i.prototype.getShadowDirection=function(t){return this.transformedDirection?this.transformedDirection:this.direction},i.prototype.getAbsolutePosition=function(){return this.transformedPosition?this.transformedPosition:this.position},i.prototype.setDirectionToTarget=function(e){return this.direction=t.Vector3.Normalize(e.subtract(this.position)),this.direction},i.prototype.getRotation=function(){this.direction.normalize();var e=t.Vector3.Cross(this.direction,t.Axis.Y),i=t.Vector3.Cross(e,this.direction);return t.Vector3.RotationFromAxis(e,i,this.direction)},i.prototype.needCube=function(){return!1},i.prototype.needProjectionMatrixCompute=function(){return this._needProjectionMatrixCompute},i.prototype.forceProjectionMatrixCompute=function(){this._needProjectionMatrixCompute=!0},i.prototype._getWorldMatrix=function(){return this._worldMatrix||(this._worldMatrix=t.Matrix.Identity()),t.Matrix.TranslationToRef(this.position.x,this.position.y,this.position.z,this._worldMatrix),this._worldMatrix},i.prototype.getDepthMinZ=function(t){return void 0!==this.shadowMinZ?this.shadowMinZ:t.minZ},i.prototype.getDepthMaxZ=function(t){return void 0!==this.shadowMaxZ?this.shadowMaxZ:t.maxZ},i.prototype.setShadowProjectionMatrix=function(t,e,i){return this.customProjectionMatrixBuilder?this.customProjectionMatrixBuilder(e,i,t):this._setDefaultShadowProjectionMatrix(t,e,i),this},r([t.serializeAsVector3()],i.prototype,"position",null),r([t.serializeAsVector3()],i.prototype,"direction",null),r([t.serialize()],i.prototype,"shadowMinZ",null),r([t.serialize()],i.prototype,"shadowMaxZ",null),i}(t.Light);t.ShadowLight=e}(l||(l={})),function(t){var e=function(e){function i(t,i,n){var r=e.call(this,t,n)||this;return r._shadowAngle=Math.PI/2,r.position=i,r}return o(i,e),Object.defineProperty(i.prototype,"shadowAngle",{get:function(){return this._shadowAngle},set:function(t){this._shadowAngle=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){var e=this.needCube();this._direction=t,this.needCube()!==e&&this._shadowGenerator&&this._shadowGenerator.recreateShadowMap()},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"PointLight"},i.prototype.getTypeID=function(){return t.Light.LIGHTTYPEID_POINTLIGHT},i.prototype.needCube=function(){return!this.direction},i.prototype.getShadowDirection=function(i){if(this.direction)return e.prototype.getShadowDirection.call(this,i);switch(i){case 0:return new t.Vector3(1,0,0);case 1:return new t.Vector3(-1,0,0);case 2:return new t.Vector3(0,-1,0);case 3:return new t.Vector3(0,1,0);case 4:return new t.Vector3(0,0,1);case 5:return new t.Vector3(0,0,-1)}return t.Vector3.Zero()},i.prototype._setDefaultShadowProjectionMatrix=function(e,i,n){var r=this.getScene().activeCamera;r&&t.Matrix.PerspectiveFovLHToRef(this.shadowAngle,1,this.getDepthMinZ(r),this.getDepthMaxZ(r),e)},i.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},i.prototype.transferToEffect=function(t,e){return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z,0,e),this):(this._uniformBuffer.updateFloat4("vLightData",this.position.x,this.position.y,this.position.z,0,e),this)},r([t.serialize()],i.prototype,"shadowAngle",null),i}(t.ShadowLight);t.PointLight=e}(l||(l={})),function(t){var e=function(e){function i(t,i,n){var r=e.call(this,t,n)||this;return r._shadowFrustumSize=0,r._shadowOrthoScale=.5,r.autoUpdateExtends=!0,r._orthoLeft=Number.MAX_VALUE,r._orthoRight=Number.MIN_VALUE,r._orthoTop=Number.MIN_VALUE,r._orthoBottom=Number.MAX_VALUE,r.position=i.scale(-1),r.direction=i,r}return o(i,e),Object.defineProperty(i.prototype,"shadowFrustumSize",{get:function(){return this._shadowFrustumSize},set:function(t){this._shadowFrustumSize=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowOrthoScale",{get:function(){return this._shadowOrthoScale},set:function(t){this._shadowOrthoScale=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"DirectionalLight"},i.prototype.getTypeID=function(){return t.Light.LIGHTTYPEID_DIRECTIONALLIGHT},i.prototype._setDefaultShadowProjectionMatrix=function(t,e,i){this.shadowFrustumSize>0?this._setDefaultFixedFrustumShadowProjectionMatrix(t,e):this._setDefaultAutoExtendShadowProjectionMatrix(t,e,i)},i.prototype._setDefaultFixedFrustumShadowProjectionMatrix=function(e,i){var n=this.getScene().activeCamera;n&&t.Matrix.OrthoLHToRef(this.shadowFrustumSize,this.shadowFrustumSize,void 0!==this.shadowMinZ?this.shadowMinZ:n.minZ,void 0!==this.shadowMaxZ?this.shadowMaxZ:n.maxZ,e)},i.prototype._setDefaultAutoExtendShadowProjectionMatrix=function(e,i,n){var r=this.getScene().activeCamera;if(r){if(this.autoUpdateExtends||this._orthoLeft===Number.MAX_VALUE){var o=t.Vector3.Zero();this._orthoLeft=Number.MAX_VALUE,this._orthoRight=Number.MIN_VALUE,this._orthoTop=Number.MIN_VALUE,this._orthoBottom=Number.MAX_VALUE;for(var s=0;s<n.length;s++){var a=n[s];if(a)for(var l=a.getBoundingInfo().boundingBox,c=0;c<l.vectorsWorld.length;c++)t.Vector3.TransformCoordinatesToRef(l.vectorsWorld[c],i,o),o.x<this._orthoLeft&&(this._orthoLeft=o.x),o.y<this._orthoBottom&&(this._orthoBottom=o.y),o.x>this._orthoRight&&(this._orthoRight=o.x),o.y>this._orthoTop&&(this._orthoTop=o.y)}}var u=this._orthoRight-this._orthoLeft,h=this._orthoTop-this._orthoBottom;t.Matrix.OrthoOffCenterLHToRef(this._orthoLeft-u*this.shadowOrthoScale,this._orthoRight+u*this.shadowOrthoScale,this._orthoBottom-h*this.shadowOrthoScale,this._orthoTop+h*this.shadowOrthoScale,void 0!==this.shadowMinZ?this.shadowMinZ:r.minZ,void 0!==this.shadowMaxZ?this.shadowMaxZ:r.maxZ,e)}},i.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},i.prototype.transferToEffect=function(t,e){return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedDirection.x,this.transformedDirection.y,this.transformedDirection.z,1,e),this):(this._uniformBuffer.updateFloat4("vLightData",this.direction.x,this.direction.y,this.direction.z,1,e),this)},i.prototype.getDepthMinZ=function(t){return 1},i.prototype.getDepthMaxZ=function(t){return 1},r([t.serialize()],i.prototype,"shadowFrustumSize",null),r([t.serialize()],i.prototype,"shadowOrthoScale",null),r([t.serialize()],i.prototype,"autoUpdateExtends",void 0),i}(t.ShadowLight);t.DirectionalLight=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a){var l=e.call(this,i,a)||this;return l._projectionTextureMatrix=t.Matrix.Zero(),l._projectionTextureLightNear=1e-6,l._projectionTextureLightFar=1e3,l._projectionTextureUpDirection=t.Vector3.Up(),l._projectionTextureViewLightDirty=!0,l._projectionTextureProjectionLightDirty=!0,l._projectionTextureDirty=!0,l._projectionTextureViewTargetVector=t.Vector3.Zero(),l._projectionTextureViewLightMatrix=t.Matrix.Zero(),l._projectionTextureProjectionLightMatrix=t.Matrix.Zero(),l._projectionTextureScalingMatrix=t.Matrix.FromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),l.position=n,l.direction=r,l.angle=o,l.exponent=s,l}return o(i,e),Object.defineProperty(i.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._projectionTextureProjectionLightDirty=!0,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadowAngleScale",{get:function(){return this._shadowAngleScale},set:function(t){this._shadowAngleScale=t,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projectionTextureMatrix",{get:function(){return this._projectionTextureMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projectionTextureLightNear",{get:function(){return this._projectionTextureLightNear},set:function(t){this._projectionTextureLightNear=t,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projectionTextureLightFar",{get:function(){return this._projectionTextureLightFar},set:function(t){this._projectionTextureLightFar=t,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projectionTextureUpDirection",{get:function(){return this._projectionTextureUpDirection},set:function(t){this._projectionTextureUpDirection=t,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projectionTexture",{get:function(){return this._projectionTexture},set:function(t){this._projectionTexture=t,this._projectionTextureDirty=!0},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"SpotLight"},i.prototype.getTypeID=function(){return t.Light.LIGHTTYPEID_SPOTLIGHT},i.prototype._setDirection=function(t){e.prototype._setDirection.call(this,t),this._projectionTextureViewLightDirty=!0},i.prototype._setPosition=function(t){e.prototype._setPosition.call(this,t),this._projectionTextureViewLightDirty=!0},i.prototype._setDefaultShadowProjectionMatrix=function(e,i,n){var r=this.getScene().activeCamera;if(r){this._shadowAngleScale=this._shadowAngleScale||1;var o=this._shadowAngleScale*this._angle;t.Matrix.PerspectiveFovLHToRef(o,1,this.getDepthMinZ(r),this.getDepthMaxZ(r),e)}},i.prototype._computeProjectionTextureViewLightMatrix=function(){this._projectionTextureViewLightDirty=!1,this._projectionTextureDirty=!0,this.position.addToRef(this.direction,this._projectionTextureViewTargetVector),t.Matrix.LookAtLHToRef(this.position,this._projectionTextureViewTargetVector,this._projectionTextureUpDirection,this._projectionTextureViewLightMatrix)},i.prototype._computeProjectionTextureProjectionLightMatrix=function(){this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0;var e=this.projectionTextureLightFar,i=this.projectionTextureLightNear,n=e/(e-i),r=-n*i,o=1/Math.tan(this._angle/2);t.Matrix.FromValuesToRef(o/1,0,0,0,0,o,0,0,0,0,n,1,0,0,r,0,this._projectionTextureProjectionLightMatrix)},i.prototype._computeProjectionTextureMatrix=function(){this._projectionTextureDirty=!1,this._projectionTextureViewLightMatrix.multiplyToRef(this._projectionTextureProjectionLightMatrix,this._projectionTextureMatrix),this._projectionTextureMatrix.multiplyToRef(this._projectionTextureScalingMatrix,this._projectionTextureMatrix)},i.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("vLightDirection",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},i.prototype.transferToEffect=function(e,i){var n;return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z,this.exponent,i),n=t.Vector3.Normalize(this.transformedDirection)):(this._uniformBuffer.updateFloat4("vLightData",this.position.x,this.position.y,this.position.z,this.exponent,i),n=t.Vector3.Normalize(this.direction)),this._uniformBuffer.updateFloat4("vLightDirection",n.x,n.y,n.z,Math.cos(.5*this.angle),i),this.projectionTexture&&this.projectionTexture.isReady()&&(this._projectionTextureViewLightDirty&&this._computeProjectionTextureViewLightMatrix(),this._projectionTextureProjectionLightDirty&&this._computeProjectionTextureProjectionLightMatrix(),this._projectionTextureDirty&&this._computeProjectionTextureMatrix(),e.setMatrix("textureProjectionMatrix"+i,this._projectionTextureMatrix),e.setTexture("projectionLightSampler"+i,this.projectionTexture)),this},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._projectionTexture&&this._projectionTexture.dispose()},r([t.serialize()],i.prototype,"angle",null),r([t.serialize()],i.prototype,"shadowAngleScale",null),r([t.serialize()],i.prototype,"exponent",void 0),r([t.serialize()],i.prototype,"projectionTextureLightNear",null),r([t.serialize()],i.prototype,"projectionTextureLightFar",null),r([t.serialize()],i.prototype,"projectionTextureUpDirection",null),r([t.serializeAsTexture("projectedLightTexture")],i.prototype,"_projectionTexture",void 0),i}(t.ShadowLight);t.SpotLight=e}(l||(l={})),function(t){var e=function(){function t(t,e,i){this.name=t,this.from=e,this.to=i}return t.prototype.clone=function(){return new t(this.name,this.from,this.to)},t}();t.AnimationRange=e;var i=function(){return function(t,e,i){this.frame=t,this.action=e,this.onlyOnce=i,this.isDone=!1}}();t.AnimationEvent=i;var n=function(){function e(t){this.path=t,this._onchange=new Array,this.value=0,this.animations=new Array}return e.prototype.getPoint=function(){var e=this.path.getPointAtLengthPosition(this.value);return new t.Vector3(e.x,0,e.y)},e.prototype.moveAhead=function(t){return void 0===t&&(t=.002),this.move(t),this},e.prototype.moveBack=function(t){return void 0===t&&(t=.002),this.move(-t),this},e.prototype.move=function(t){if(Math.abs(t)>1)throw"step size should be less than 1.";return this.value+=t,this.ensureLimits(),this.raiseOnChange(),this},e.prototype.ensureLimits=function(){for(;this.value>1;)this.value-=1;for(;this.value<0;)this.value+=1;return this},e.prototype.raiseOnChange=function(){var t=this;return this._onchange.forEach(function(e){return e(t)}),this},e.prototype.onchange=function(t){return this._onchange.push(t),this},e}();t.PathCursor=n,function(t){t[t.STEP=1]="STEP"}(t.AnimationKeyInterpolation||(t.AnimationKeyInterpolation={}));var r=function(){function i(t,e,n,r,o,s){this.name=t,this.targetProperty=e,this.framePerSecond=n,this.dataType=r,this.loopMode=o,this.enableBlending=s,this._runtimeAnimations=new Array,this._events=new Array,this.blendingSpeed=.01,this._ranges={},this.targetPropertyPath=e.split("."),this.dataType=r,this.loopMode=void 0===o?i.ANIMATIONLOOPMODE_CYCLE:o}return i._PrepareAnimation=function(e,n,r,o,s,a,l,c){var u=void 0;if(!isNaN(parseFloat(s))&&isFinite(s)?u=i.ANIMATIONTYPE_FLOAT:s instanceof t.Quaternion?u=i.ANIMATIONTYPE_QUATERNION:s instanceof t.Vector3?u=i.ANIMATIONTYPE_VECTOR3:s instanceof t.Vector2?u=i.ANIMATIONTYPE_VECTOR2:s instanceof t.Color3?u=i.ANIMATIONTYPE_COLOR3:s instanceof t.Size&&(u=i.ANIMATIONTYPE_SIZE),null==u)return null;var h=new i(e,n,r,u,l),p=[{frame:0,value:s},{frame:o,value:a}];return h.setKeys(p),void 0!==c&&h.setEasingFunction(c),h},i.CreateAnimation=function(t,e,n,r){var o=new i(t+"Animation",t,n,e,i.ANIMATIONLOOPMODE_CONSTANT);return o.setEasingFunction(r),o},i.CreateAndStartAnimation=function(t,e,n,r,o,s,a,l,c,u){var h=i._PrepareAnimation(t,n,r,o,s,a,l,c);return h?e.getScene().beginDirectAnimation(e,[h],0,o,1===h.loopMode,1,u):null},i.CreateAndStartHierarchyAnimation=function(t,e,n,r,o,s,a,l,c,u,h){var p=i._PrepareAnimation(t,r,o,s,a,l,c,u);return p?e.getScene().beginDirectHierarchyAnimation(e,n,[p],0,s,1===p.loopMode,1,h):null},i.CreateMergeAndStartAnimation=function(t,e,n,r,o,s,a,l,c,u){var h=i._PrepareAnimation(t,n,r,o,s,a,l,c);return h?(e.animations.push(h),e.getScene().beginAnimation(e,0,o,1===h.loopMode,1,u)):null},i.TransitionTo=function(t,e,i,n,r,o,s,a){if(void 0===a&&(a=null),s<=0)return i[t]=e,a&&a(),null;var l=r*(s/1e3);o.setKeys([{frame:0,value:i[t].clone?i[t].clone():i[t]},{frame:l,value:e}]),i.animations||(i.animations=[]),i.animations.push(o);var c=n.beginAnimation(i,0,l,!1);return c.onAnimationEnd=a,c},Object.defineProperty(i.prototype,"runtimeAnimations",{get:function(){return this._runtimeAnimations},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasRunningRuntimeAnimations",{get:function(){for(var t=0,e=this._runtimeAnimations;t<e.length;t++)if(!e[t].isStopped)return!0;return!1},enumerable:!0,configurable:!0}),i.prototype.toString=function(t){var e="Name: "+this.name+", property: "+this.targetProperty;if(e+=", datatype: "+["Float","Vector3","Quaternion","Matrix","Color3","Vector2"][this.dataType],e+=", nKeys: "+(this._keys?this._keys.length:"none"),e+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),t){e+=", Ranges: {";var i=!0;for(var n in this._ranges)i&&(e+=", ",i=!1),e+=n;e+="}"}return e},i.prototype.addEvent=function(t){this._events.push(t)},i.prototype.removeEvents=function(t){for(var e=0;e<this._events.length;e++)this._events[e].frame===t&&(this._events.splice(e,1),e--)},i.prototype.getEvents=function(){return this._events},i.prototype.createRange=function(t,i,n){this._ranges[t]||(this._ranges[t]=new e(t,i,n))},i.prototype.deleteRange=function(t,e){void 0===e&&(e=!0);var i=this._ranges[t];if(i){if(e)for(var n=i.from,r=i.to,o=this._keys.length-1;o>=0;o--)this._keys[o].frame>=n&&this._keys[o].frame<=r&&this._keys.splice(o,1);this._ranges[t]=null}},i.prototype.getRange=function(t){return this._ranges[t]},i.prototype.getKeys=function(){return this._keys},i.prototype.getHighestFrame=function(){for(var t=0,e=0,i=this._keys.length;e<i;e++)t<this._keys[e].frame&&(t=this._keys[e].frame);return t},i.prototype.getEasingFunction=function(){return this._easingFunction},i.prototype.setEasingFunction=function(t){this._easingFunction=t},i.prototype.floatInterpolateFunction=function(e,i,n){return t.Scalar.Lerp(e,i,n)},i.prototype.floatInterpolateFunctionWithTangents=function(e,i,n,r,o){return t.Scalar.Hermite(e,i,n,r,o)},i.prototype.quaternionInterpolateFunction=function(e,i,n){return t.Quaternion.Slerp(e,i,n)},i.prototype.quaternionInterpolateFunctionWithTangents=function(e,i,n,r,o){return t.Quaternion.Hermite(e,i,n,r,o).normalize()},i.prototype.vector3InterpolateFunction=function(e,i,n){return t.Vector3.Lerp(e,i,n)},i.prototype.vector3InterpolateFunctionWithTangents=function(e,i,n,r,o){return t.Vector3.Hermite(e,i,n,r,o)},i.prototype.vector2InterpolateFunction=function(e,i,n){return t.Vector2.Lerp(e,i,n)},i.prototype.vector2InterpolateFunctionWithTangents=function(e,i,n,r,o){return t.Vector2.Hermite(e,i,n,r,o)},i.prototype.sizeInterpolateFunction=function(e,i,n){return t.Size.Lerp(e,i,n)},i.prototype.color3InterpolateFunction=function(e,i,n){return t.Color3.Lerp(e,i,n)},i.prototype.matrixInterpolateFunction=function(e,i,n){return t.Matrix.Lerp(e,i,n)},i.prototype.clone=function(){var t=new i(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);if(t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed,this._keys&&t.setKeys(this._keys),this._ranges)for(var e in t._ranges={},this._ranges){var n=this._ranges[e];n&&(t._ranges[e]=n.clone())}return t},i.prototype.setKeys=function(t){this._keys=t.slice(0)},i.prototype.serialize=function(){var t={};t.name=this.name,t.property=this.targetProperty,t.framePerSecond=this.framePerSecond,t.dataType=this.dataType,t.loopBehavior=this.loopMode,t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed;var e=this.dataType;t.keys=[];for(var n=this.getKeys(),r=0;r<n.length;r++){var o=n[r],s={};switch(s.frame=o.frame,e){case i.ANIMATIONTYPE_FLOAT:s.values=[o.value];break;case i.ANIMATIONTYPE_QUATERNION:case i.ANIMATIONTYPE_MATRIX:case i.ANIMATIONTYPE_VECTOR3:case i.ANIMATIONTYPE_COLOR3:s.values=o.value.asArray()}t.keys.push(s)}for(var a in t.ranges=[],this._ranges){var l=this._ranges[a];if(l){var c={};c.name=a,c.from=l.from,c.to=l.to,t.ranges.push(c)}}return t},Object.defineProperty(i,"ANIMATIONTYPE_FLOAT",{get:function(){return i._ANIMATIONTYPE_FLOAT},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_VECTOR3",{get:function(){return i._ANIMATIONTYPE_VECTOR3},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_VECTOR2",{get:function(){return i._ANIMATIONTYPE_VECTOR2},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_SIZE",{get:function(){return i._ANIMATIONTYPE_SIZE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_QUATERNION",{get:function(){return i._ANIMATIONTYPE_QUATERNION},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_MATRIX",{get:function(){return i._ANIMATIONTYPE_MATRIX},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONTYPE_COLOR3",{get:function(){return i._ANIMATIONTYPE_COLOR3},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONLOOPMODE_RELATIVE",{get:function(){return i._ANIMATIONLOOPMODE_RELATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONLOOPMODE_CYCLE",{get:function(){return i._ANIMATIONLOOPMODE_CYCLE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ANIMATIONLOOPMODE_CONSTANT",{get:function(){return i._ANIMATIONLOOPMODE_CONSTANT},enumerable:!0,configurable:!0}),i.Parse=function(e){var n,r,o=new i(e.name,e.property,e.framePerSecond,e.dataType,e.loopBehavior),s=e.dataType,a=[];for(e.enableBlending&&(o.enableBlending=e.enableBlending),e.blendingSpeed&&(o.blendingSpeed=e.blendingSpeed),r=0;r<e.keys.length;r++){var l,c,u=e.keys[r];switch(s){case i.ANIMATIONTYPE_FLOAT:n=u.values[0],u.values.length>=1&&(l=u.values[1]),u.values.length>=2&&(c=u.values[2]);break;case i.ANIMATIONTYPE_QUATERNION:if(n=t.Quaternion.FromArray(u.values),u.values.length>=8){var h=t.Quaternion.FromArray(u.values.slice(4,8));h.equals(t.Quaternion.Zero())||(l=h)}if(u.values.length>=12){var p=t.Quaternion.FromArray(u.values.slice(8,12));p.equals(t.Quaternion.Zero())||(c=p)}break;case i.ANIMATIONTYPE_MATRIX:n=t.Matrix.FromArray(u.values);break;case i.ANIMATIONTYPE_COLOR3:n=t.Color3.FromArray(u.values);break;case i.ANIMATIONTYPE_VECTOR3:default:n=t.Vector3.FromArray(u.values)}var d={};d.frame=u.frame,d.value=n,null!=l&&(d.inTangent=l),null!=c&&(d.outTangent=c),a.push(d)}if(o.setKeys(a),e.ranges)for(r=0;r<e.ranges.length;r++)n=e.ranges[r],o.createRange(n.name,n.from,n.to);return o},i.AppendSerializedAnimations=function(t,e){if(t.animations){e.animations=[];for(var i=0;i<t.animations.length;i++){var n=t.animations[i];e.animations.push(n.serialize())}}},i.AllowMatricesInterpolation=!1,i._ANIMATIONTYPE_FLOAT=0,i._ANIMATIONTYPE_VECTOR3=1,i._ANIMATIONTYPE_QUATERNION=2,i._ANIMATIONTYPE_MATRIX=3,i._ANIMATIONTYPE_COLOR3=4,i._ANIMATIONTYPE_VECTOR2=5,i._ANIMATIONTYPE_SIZE=6,i._ANIMATIONLOOPMODE_RELATIVE=0,i._ANIMATIONLOOPMODE_CYCLE=1,i._ANIMATIONLOOPMODE_CONSTANT=2,i}();t.Animation=r}(l||(l={})),function(t){var e=function(){return function(){}}();t.TargetedAnimation=e;var i=function(){function e(e,i){void 0===i&&(i=null),this.name=e,this._targetedAnimations=new Array,this._animatables=new Array,this._from=Number.MAX_VALUE,this._to=-Number.MAX_VALUE,this._speedRatio=1,this.onAnimationEndObservable=new t.Observable,this._scene=i||t.Engine.LastCreatedScene,this._scene.animationGroups.push(this)}return Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(t){if(this._speedRatio!==t){this._speedRatio=t;for(var e=0;e<this._animatables.length;e++)this._animatables[e].speedRatio=this._speedRatio}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetedAnimations",{get:function(){return this._targetedAnimations},enumerable:!0,configurable:!0}),e.prototype.addTargetedAnimation=function(t,e){var i={animation:t,target:e},n=t.getKeys();return this._from>n[0].frame&&(this._from=n[0].frame),this._to<n[n.length-1].frame&&(this._to=n[n.length-1].frame),this._targetedAnimations.push(i),i},e.prototype.normalize=function(t,e){void 0===t&&(t=-Number.MAX_VALUE),void 0===e&&(e=Number.MAX_VALUE),t=Math.max(t,this._from),e=Math.min(e,this._to);for(var i=0;i<this._targetedAnimations.length;i++){var n=this._targetedAnimations[i].animation.getKeys(),r=n[0],o=n[n.length-1];if(r.frame>t){var s={frame:t,value:r.value,inTangent:r.inTangent,outTangent:r.outTangent,interpolation:r.interpolation};n.splice(0,0,s)}if(o.frame<e){s={frame:e,value:o.value,inTangent:o.outTangent,outTangent:o.outTangent,interpolation:o.interpolation};n.push(s)}}return this},e.prototype.start=function(t,e){var i=this;if(void 0===t&&(t=!1),void 0===e&&(e=1),this._isStarted||0===this._targetedAnimations.length)return this;for(var n=this,r=0;r<this._targetedAnimations.length;r++)!function(){var o=n._targetedAnimations[r];n._animatables.push(n._scene.beginDirectAnimation(o.target,[o.animation],n._from,n._to,t,e,function(){i.onAnimationEndObservable.notifyObservers(o)}))}();return this._speedRatio=e,this._isStarted=!0,this},e.prototype.pause=function(){if(!this._isStarted)return this;for(var t=0;t<this._animatables.length;t++)this._animatables[t].pause();return this},e.prototype.play=function(t){if(this.isStarted){if(void 0!==t)for(var e=0;e<this._animatables.length;e++){this._animatables[e].loopAnimation=t}this.restart()}else this.start(t,this._speedRatio);return this},e.prototype.reset=function(){if(!this._isStarted)return this;for(var t=0;t<this._animatables.length;t++)this._animatables[t].reset();return this},e.prototype.restart=function(){if(!this._isStarted)return this;for(var t=0;t<this._animatables.length;t++)this._animatables[t].restart();return this},e.prototype.stop=function(){if(!this._isStarted)return this;for(var t=0;t<this._animatables.length;t++)this._animatables[t].stop();return this._isStarted=!1,this},e.prototype.dispose=function(){this._targetedAnimations=[],this._animatables=[];var t=this._scene.animationGroups.indexOf(this);t>-1&&this._scene.animationGroups.splice(t,1)},e}();t.AnimationGroup=i}(l||(l={})),function(t){var e=function(){function e(t,e){this._offsetsCache={},this._highLimitsCache={},this._stopped=!1,this._blendingFactor=0,this._ratioOffset=0,this._animation=e,this._target=t,e._runtimeAnimations.push(this)}return Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._offsetsCache={},this._highLimitsCache={},this.currentFrame=0,this._blendingFactor=0,this._originalBlendValue=null},e.prototype.isStopped=function(){return this._stopped},e.prototype.dispose=function(){var t=this._animation.runtimeAnimations.indexOf(this);t>-1&&this._animation.runtimeAnimations.splice(t,1)},e.prototype._getKeyValue=function(t){return"function"==typeof t?t():t},e.prototype._interpolate=function(e,i,n,r,o){if(n===t.Animation.ANIMATIONLOOPMODE_CONSTANT&&i>0)return o.clone?o.clone():o;this.currentFrame=e;var s=this._animation.getKeys(),a=Math.max(0,Math.min(s.length-1,Math.floor(s.length*(e-s[0].frame)/(s[s.length-1].frame-s[0].frame))-1));if(s[a].frame>=e)for(;a-1>=0&&s[a].frame>=e;)a--;for(var l=a;l<s.length;l++){var c=s[l+1];if(c.frame>=e){var u=s[l],h=this._getKeyValue(u.value);if(u.interpolation===t.AnimationKeyInterpolation.STEP)return h;var p=this._getKeyValue(c.value),d=void 0!==u.outTangent&&void 0!==c.inTangent,f=c.frame-u.frame,m=(e-u.frame)/f,g=this._animation.getEasingFunction();switch(null!=g&&(m=g.ease(m)),this._animation.dataType){case t.Animation.ANIMATIONTYPE_FLOAT:var y=d?this._animation.floatInterpolateFunctionWithTangents(h,u.outTangent*f,p,c.inTangent*f,m):this._animation.floatInterpolateFunction(h,p,m);switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return y;case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return r*i+y}break;case t.Animation.ANIMATIONTYPE_QUATERNION:var _=d?this._animation.quaternionInterpolateFunctionWithTangents(h,u.outTangent.scale(f),p,c.inTangent.scale(f),m):this._animation.quaternionInterpolateFunction(h,p,m);switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return _;case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return _.add(r.scale(i))}return _;case t.Animation.ANIMATIONTYPE_VECTOR3:var v=d?this._animation.vector3InterpolateFunctionWithTangents(h,u.outTangent.scale(f),p,c.inTangent.scale(f),m):this._animation.vector3InterpolateFunction(h,p,m);switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return v;case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return v.add(r.scale(i))}case t.Animation.ANIMATIONTYPE_VECTOR2:var b=d?this._animation.vector2InterpolateFunctionWithTangents(h,u.outTangent.scale(f),p,c.inTangent.scale(f),m):this._animation.vector2InterpolateFunction(h,p,m);switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return b;case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return b.add(r.scale(i))}case t.Animation.ANIMATIONTYPE_SIZE:switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return this._animation.sizeInterpolateFunction(h,p,m);case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return this._animation.sizeInterpolateFunction(h,p,m).add(r.scale(i))}case t.Animation.ANIMATIONTYPE_COLOR3:switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:return this._animation.color3InterpolateFunction(h,p,m);case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return this._animation.color3InterpolateFunction(h,p,m).add(r.scale(i))}case t.Animation.ANIMATIONTYPE_MATRIX:switch(n){case t.Animation.ANIMATIONLOOPMODE_CYCLE:case t.Animation.ANIMATIONLOOPMODE_CONSTANT:if(t.Animation.AllowMatricesInterpolation)return this._animation.matrixInterpolateFunction(h,p,m);case t.Animation.ANIMATIONLOOPMODE_RELATIVE:return h}}break}}return this._getKeyValue(s[s.length-1].value)},e.prototype.setValue=function(e,i){void 0===i&&(i=!1);var n,r,o=this._animation.targetPropertyPath;if(o.length>1){for(var s=this._target[o[0]],a=1;a<o.length-1;a++)s=s[o[a]];n=o[o.length-1],r=s}else n=o[0],r=this._target;this._animation.enableBlending&&this._blendingFactor<=1?(this._originalBlendValue||(r[n].clone?this._originalBlendValue=r[n].clone():this._originalBlendValue=r[n]),this._originalBlendValue.prototype?this._originalBlendValue.prototype.Lerp?r[n]=this._originalBlendValue.construtor.prototype.Lerp(e,this._originalBlendValue,this._blendingFactor):r[n]=e:this._originalBlendValue.m?r[n]=t.Matrix.Lerp(this._originalBlendValue,e,this._blendingFactor):r[n]=this._originalBlendValue*(1-this._blendingFactor)+this._blendingFactor*e,this._blendingFactor+=this._animation.blendingSpeed):r[n]=e,this._target.markAsDirty&&this._target.markAsDirty(this._animation.targetProperty)},e.prototype.goToFrame=function(t){var e=this._animation.getKeys();t<e[0].frame?t=e[0].frame:t>e[e.length-1].frame&&(t=e[e.length-1].frame);var i=this._interpolate(t,0,this._animation.loopMode);this.setValue(i)},e.prototype._prepareForSpeedRatioChange=function(t){var e=this._previousDelay*(this._animation.framePerSecond*t)/1e3;this._ratioOffset=this._previousRatio-e},e.prototype.animate=function(e,i,n,r,o,s){void 0===s&&(s=!1);var a=this._animation.targetPropertyPath;if(!a||a.length<1)return this._stopped=!0,!1;var l=!0,c=this._animation.getKeys();if(0!==c[0].frame){var u={frame:0,value:c[0].value};c.splice(0,0,u)}(i<c[0].frame||i>c[c.length-1].frame)&&(i=c[0].frame),(n<c[0].frame||n>c[c.length-1].frame)&&(n=c[c.length-1].frame),i===n&&(i>c[0].frame?i--:n<c[c.length-1].frame&&n++);var h,p=n-i,d=e*(this._animation.framePerSecond*o)/1e3+this._ratioOffset,f=0;if(this._previousDelay=e,this._previousRatio=d,(n>i&&d>p||i>n&&d<p)&&!r)l=!1,f=this._getKeyValue(c[c.length-1].value);else if(this._animation.loopMode!==t.Animation.ANIMATIONLOOPMODE_CYCLE){var m=n.toString()+i.toString();if(!this._offsetsCache[m]){var g=this._interpolate(i,0,t.Animation.ANIMATIONLOOPMODE_CYCLE),y=this._interpolate(n,0,t.Animation.ANIMATIONLOOPMODE_CYCLE);switch(this._animation.dataType){case t.Animation.ANIMATIONTYPE_FLOAT:this._offsetsCache[m]=y-g;break;case t.Animation.ANIMATIONTYPE_QUATERNION:this._offsetsCache[m]=y.subtract(g);break;case t.Animation.ANIMATIONTYPE_VECTOR3:this._offsetsCache[m]=y.subtract(g);case t.Animation.ANIMATIONTYPE_VECTOR2:this._offsetsCache[m]=y.subtract(g);case t.Animation.ANIMATIONTYPE_SIZE:this._offsetsCache[m]=y.subtract(g);case t.Animation.ANIMATIONTYPE_COLOR3:this._offsetsCache[m]=y.subtract(g)}this._highLimitsCache[m]=y}f=this._highLimitsCache[m],h=this._offsetsCache[m]}if(void 0===h)switch(this._animation.dataType){case t.Animation.ANIMATIONTYPE_FLOAT:h=0;break;case t.Animation.ANIMATIONTYPE_QUATERNION:h=new t.Quaternion(0,0,0,0);break;case t.Animation.ANIMATIONTYPE_VECTOR3:h=t.Vector3.Zero();break;case t.Animation.ANIMATIONTYPE_VECTOR2:h=t.Vector2.Zero();break;case t.Animation.ANIMATIONTYPE_SIZE:h=t.Size.Zero();break;case t.Animation.ANIMATIONTYPE_COLOR3:h=t.Color3.Black()}var _=d/p>>0,v=l?i+d%p:n,b=this._interpolate(v,_,this._animation.loopMode,h,f);this.setValue(b);for(var x=this._animation.getEvents(),A=0;A<x.length;A++)if(p>0&&v>=x[A].frame&&x[A].frame>=i||p<0&&v<=x[A].frame&&x[A].frame<=i){var w=x[A];w.isDone||(w.onlyOnce&&(x.splice(A,1),A--),w.isDone=!0,w.action())}else x[A].isDone&&!x[A].onlyOnce&&(x[A].isDone=!1);return l||(this._stopped=!0),l},e}();t.RuntimeAnimation=e}(l||(l={})),function(t){var e=function(){function e(t,e,i,n,r,o,s,a){void 0===i&&(i=0),void 0===n&&(n=100),void 0===r&&(r=!1),void 0===o&&(o=1),this.target=e,this.fromFrame=i,this.toFrame=n,this.loopAnimation=r,this.onAnimationEnd=s,this._localDelayOffset=null,this._pausedDelay=null,this._runtimeAnimations=new Array,this._paused=!1,this._speedRatio=1,this.animationStarted=!1,a&&this.appendAnimations(e,a),this._speedRatio=o,this._scene=t,t._activeAnimatables.push(this)}return Object.defineProperty(e.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(t){for(var e=0;e<this._runtimeAnimations.length;e++)this._runtimeAnimations[e]._prepareForSpeedRatioChange(t);this._speedRatio=t},enumerable:!0,configurable:!0}),e.prototype.getAnimations=function(){return this._runtimeAnimations},e.prototype.appendAnimations=function(e,i){for(var n=0;n<i.length;n++){var r=i[n];this._runtimeAnimations.push(new t.RuntimeAnimation(e,r))}},e.prototype.getAnimationByTargetProperty=function(t){for(var e=this._runtimeAnimations,i=0;i<e.length;i++)if(e[i].animation.targetProperty===t)return e[i].animation;return null},e.prototype.getRuntimeAnimationByTargetProperty=function(t){for(var e=this._runtimeAnimations,i=0;i<e.length;i++)if(e[i].animation.targetProperty===t)return e[i];return null},e.prototype.reset=function(){for(var t=this._runtimeAnimations,e=0;e<t.length;e++)t[e].reset();for(e=0;e<t.length;e++)t[e].animate(0,this.fromFrame,this.toFrame,!1,this._speedRatio);this._localDelayOffset=null,this._pausedDelay=null},e.prototype.enableBlending=function(t){for(var e=this._runtimeAnimations,i=0;i<e.length;i++)e[i].animation.enableBlending=!0,e[i].animation.blendingSpeed=t},e.prototype.disableBlending=function(){for(var t=this._runtimeAnimations,e=0;e<t.length;e++)t[e].animation.enableBlending=!1},e.prototype.goToFrame=function(t){var e=this._runtimeAnimations;if(e[0]){var i=e[0].animation.framePerSecond,n=1e3*(t-e[0].currentFrame)/i;null===this._localDelayOffset&&(this._localDelayOffset=0),this._localDelayOffset-=n}for(var r=0;r<e.length;r++)e[r].goToFrame(t)},e.prototype.pause=function(){this._paused||(this._paused=!0)},e.prototype.restart=function(){this._paused=!1},e.prototype.stop=function(t){if(t){var e=this._scene._activeAnimatables.indexOf(this);if(e>-1){for(var i=(n=this._runtimeAnimations).length-1;i>=0;i--)"string"==typeof t&&n[i].animation.name!=t||(n[i].dispose(),n.splice(i,1));0==n.length&&(this._scene._activeAnimatables.splice(e,1),this.onAnimationEnd&&this.onAnimationEnd())}}else{if((i=this._scene._activeAnimatables.indexOf(this))>-1){this._scene._activeAnimatables.splice(i,1);var n=this._runtimeAnimations;for(i=0;i<n.length;i++)n[i].dispose();this.onAnimationEnd&&this.onAnimationEnd()}}},e.prototype._animate=function(t){if(this._paused)return this.animationStarted=!1,null===this._pausedDelay&&(this._pausedDelay=t),!0;null===this._localDelayOffset?(this._localDelayOffset=t,this._pausedDelay=null):null!==this._pausedDelay&&(this._localDelayOffset+=t-this._pausedDelay,this._pausedDelay=null);var e,i=!1,n=this._runtimeAnimations;for(e=0;e<n.length;e++){var r=n[e].animate(t-this._localDelayOffset,this.fromFrame,this.toFrame,this.loopAnimation,this._speedRatio);i=i||r}if(this.animationStarted=i,!i)for(e=this._scene._activeAnimatables.indexOf(this),this._scene._activeAnimatables.splice(e,1),e=0;e<n.length;e++)n[e].dispose();return!i&&this.onAnimationEnd&&(this.onAnimationEnd(),this.onAnimationEnd=null),i},e}();t.Animatable=e}(l||(l={})),function(t){var e=function(){function t(){this._easingMode=t.EASINGMODE_EASEIN}return Object.defineProperty(t,"EASINGMODE_EASEIN",{get:function(){return t._EASINGMODE_EASEIN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EASINGMODE_EASEOUT",{get:function(){return t._EASINGMODE_EASEOUT},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EASINGMODE_EASEINOUT",{get:function(){return t._EASINGMODE_EASEINOUT},enumerable:!0,configurable:!0}),t.prototype.setEasingMode=function(t){var e=Math.min(Math.max(t,0),2);this._easingMode=e},t.prototype.getEasingMode=function(){return this._easingMode},t.prototype.easeInCore=function(t){throw new Error("You must implement this method")},t.prototype.ease=function(e){switch(this._easingMode){case t.EASINGMODE_EASEIN:return this.easeInCore(e);case t.EASINGMODE_EASEOUT:return 1-this.easeInCore(1-e)}return e>=.5?.5*(1-this.easeInCore(2*(1-e)))+.5:.5*this.easeInCore(2*e)},t._EASINGMODE_EASEIN=0,t._EASINGMODE_EASEOUT=1,t._EASINGMODE_EASEINOUT=2,t}();t.EasingFunction=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return t=Math.max(0,Math.min(1,t)),1-Math.sqrt(1-t*t)},e}(e);t.CircleEase=i;var n=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this)||this;return i.amplitude=e,i}return o(e,t),e.prototype.easeInCore=function(t){var e=Math.max(0,this.amplitude);return Math.pow(t,3)-t*e*Math.sin(3.141592653589793*t)},e}(e);t.BackEase=n;var r=function(t){function e(e,i){void 0===e&&(e=3),void 0===i&&(i=2);var n=t.call(this)||this;return n.bounces=e,n.bounciness=i,n}return o(e,t),e.prototype.easeInCore=function(t){var e=Math.max(0,this.bounces),i=this.bounciness;i<=1&&(i=1.001);var n=Math.pow(i,e),r=1-i,o=(1-n)/r+.5*n,s=t*o,a=Math.log(-s*(1-i)+1)/Math.log(i),l=Math.floor(a),c=l+1,u=(1-Math.pow(i,l))/(r*o),h=.5*(u+(1-Math.pow(i,c))/(r*o)),p=t-h,d=h-u;return-Math.pow(1/i,e-l)/(d*d)*(p-d)*(p+d)},e}(e);t.BounceEase=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return t*t*t},e}(e);t.CubicEase=s;var a=function(t){function e(e,i){void 0===e&&(e=3),void 0===i&&(i=3);var n=t.call(this)||this;return n.oscillations=e,n.springiness=i,n}return o(e,t),e.prototype.easeInCore=function(t){var e=Math.max(0,this.oscillations),i=Math.max(0,this.springiness);return(0==i?t:(Math.exp(i*t)-1)/(Math.exp(i)-1))*Math.sin((6.283185307179586*e+1.5707963267948966)*t)},e}(e);t.ElasticEase=a;var l=function(t){function e(e){void 0===e&&(e=2);var i=t.call(this)||this;return i.exponent=e,i}return o(e,t),e.prototype.easeInCore=function(t){return this.exponent<=0?t:(Math.exp(this.exponent*t)-1)/(Math.exp(this.exponent)-1)},e}(e);t.ExponentialEase=l;var c=function(t){function e(e){void 0===e&&(e=2);var i=t.call(this)||this;return i.power=e,i}return o(e,t),e.prototype.easeInCore=function(t){var e=Math.max(0,this.power);return Math.pow(t,e)},e}(e);t.PowerEase=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return t*t},e}(e);t.QuadraticEase=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return t*t*t*t},e}(e);t.QuarticEase=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return t*t*t*t*t},e}(e);t.QuinticEase=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.easeInCore=function(t){return 1-Math.sin(1.5707963267948966*(1-t))},e}(e);t.SineEase=d;var f=function(e){function i(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=1);var o=e.call(this)||this;return o.x1=t,o.y1=i,o.x2=n,o.y2=r,o}return o(i,e),i.prototype.easeInCore=function(e){return t.BezierCurve.interpolate(e,this.x1,this.y1,this.x2,this.y2)},i}(e);t.BezierCurveEase=f}(l||(l={})),function(t){var e=function(){function t(t){this._actionManager=t}return t.prototype.isValid=function(){return!0},t.prototype._getProperty=function(t){return this._actionManager._getProperty(t)},t.prototype._getEffectiveTarget=function(t,e){return this._actionManager._getEffectiveTarget(t,e)},t.prototype.serialize=function(){},t.prototype._serialize=function(t){return{type:2,children:[],name:t.name,properties:t.properties}},t}();t.Condition=e;var i=function(e){function i(t,n,r,o,s){void 0===s&&(s=i.IsEqual);var a=e.call(this,t)||this;return a.propertyPath=r,a.value=o,a.operator=s,a._target=n,a._effectiveTarget=a._getEffectiveTarget(n,a.propertyPath),a._property=a._getProperty(a.propertyPath),a}return o(i,e),Object.defineProperty(i,"IsEqual",{get:function(){return i._IsEqual},enumerable:!0,configurable:!0}),Object.defineProperty(i,"IsDifferent",{get:function(){return i._IsDifferent},enumerable:!0,configurable:!0}),Object.defineProperty(i,"IsGreater",{get:function(){return i._IsGreater},enumerable:!0,configurable:!0}),Object.defineProperty(i,"IsLesser",{get:function(){return i._IsLesser},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){switch(this.operator){case i.IsGreater:return this._effectiveTarget[this._property]>this.value;case i.IsLesser:return this._effectiveTarget[this._property]<this.value;case i.IsEqual:case i.IsDifferent:var t;return t=this.value.equals?this.value.equals(this._effectiveTarget[this._property]):this.value===this._effectiveTarget[this._property],this.operator===i.IsEqual?t:!t}return!1},i.prototype.serialize=function(){return this._serialize({name:"ValueCondition",properties:[t.Action._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:t.Action._SerializeValueAsString(this.value)},{name:"operator",value:i.GetOperatorName(this.operator)}]})},i.GetOperatorName=function(t){switch(t){case i._IsEqual:return"IsEqual";case i._IsDifferent:return"IsDifferent";case i._IsGreater:return"IsGreater";case i._IsLesser:return"IsLesser";default:return""}},i._IsEqual=0,i._IsDifferent=1,i._IsGreater=2,i._IsLesser=3,i}(e);t.ValueCondition=i;var n=function(t){function e(e,i){var n=t.call(this,e)||this;return n.predicate=i,n}return o(e,t),e.prototype.isValid=function(){return this.predicate()},e}(e);t.PredicateCondition=n;var r=function(e){function i(t,i,n){var r=e.call(this,t)||this;return r.value=n,r._target=i,r}return o(i,e),i.prototype.isValid=function(){return this._target.state===this.value},i.prototype.serialize=function(){return this._serialize({name:"StateCondition",properties:[t.Action._GetTargetProperty(this._target),{name:"value",value:this.value}]})},i}(e);t.StateCondition=r}(l||(l={})),function(t){var e=function(){function e(e,i){this.triggerOptions=e,this.onBeforeExecuteObservable=new t.Observable,e.parameter?(this.trigger=e.trigger,this._triggerParameter=e.parameter):this.trigger=e,this._nextActiveAction=this,this._condition=i}return e.prototype._prepare=function(){},e.prototype.getTriggerParameter=function(){return this._triggerParameter},e.prototype._executeCurrent=function(t){if(this._nextActiveAction._condition){var e=this._nextActiveAction._condition,i=this._actionManager.getScene().getRenderId();if(e._evaluationId===i){if(!e._currentResult)return}else{if(e._evaluationId=i,!e.isValid())return void(e._currentResult=!1);e._currentResult=!0}}this.onBeforeExecuteObservable.notifyObservers(this),this._nextActiveAction.execute(t),this.skipToNextActiveAction()},e.prototype.execute=function(t){},e.prototype.skipToNextActiveAction=function(){this._nextActiveAction._child?(this._nextActiveAction._child._actionManager||(this._nextActiveAction._child._actionManager=this._actionManager),this._nextActiveAction=this._nextActiveAction._child):this._nextActiveAction=this},e.prototype.then=function(t){return this._child=t,t._actionManager=this._actionManager,t._prepare(),t},e.prototype._getProperty=function(t){return this._actionManager._getProperty(t)},e.prototype._getEffectiveTarget=function(t,e){return this._actionManager._getEffectiveTarget(t,e)},e.prototype.serialize=function(t){},e.prototype._serialize=function(t,e){var i={type:1,children:[],name:t.name,properties:t.properties||[]};if(this._child&&this._child.serialize(i),this._condition){var n=this._condition.serialize();return n.children.push(i),e&&e.children.push(n),n}return e&&e.children.push(i),i},e._SerializeValueAsString=function(e){return"number"==typeof e?e.toString():"boolean"==typeof e?e?"true":"false":e instanceof t.Vector2?e.x+", "+e.y:e instanceof t.Vector3?e.x+", "+e.y+", "+e.z:e instanceof t.Color3?e.r+", "+e.g+", "+e.b:e instanceof t.Color4?e.r+", "+e.g+", "+e.b+", "+e.a:e},e._GetTargetProperty=function(e){return{name:"target",targetType:e instanceof t.Mesh?"MeshProperties":e instanceof t.Light?"LightProperties":e instanceof t.Camera?"CameraProperties":"SceneProperties",value:e instanceof t.Scene?"Scene":e.name}},e}();t.Action=e}(l||(l={})),function(t){var e=function(){function t(t,e,i,n,r,o){this.source=t,this.pointerX=e,this.pointerY=i,this.meshUnderPointer=n,this.sourceEvent=r,this.additionalData=o}return t.CreateNew=function(e,i,n){var r=e.getScene();return new t(e,r.pointerX,r.pointerY,r.meshUnderPointer,i,n)},t.CreateNewFromSprite=function(e,i,n,r){return new t(e,i.pointerX,i.pointerY,i.meshUnderPointer,n,r)},t.CreateNewFromScene=function(e,i){return new t(null,e.pointerX,e.pointerY,e.meshUnderPointer,i)},t.CreateNewFromPrimitive=function(e,i,n,r){return new t(e,i.x,i.y,null,n,r)},t}();t.ActionEvent=e;var i=function(){function e(t){this.actions=new Array,this.hoverCursor="",this._scene=t,t._actionManagers.push(this)}return Object.defineProperty(e,"NothingTrigger",{get:function(){return e._NothingTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPickTrigger",{get:function(){return e._OnPickTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnLeftPickTrigger",{get:function(){return e._OnLeftPickTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnRightPickTrigger",{get:function(){return e._OnRightPickTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnCenterPickTrigger",{get:function(){return e._OnCenterPickTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPickDownTrigger",{get:function(){return e._OnPickDownTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnDoublePickTrigger",{get:function(){return e._OnDoublePickTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPickUpTrigger",{get:function(){return e._OnPickUpTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPickOutTrigger",{get:function(){return e._OnPickOutTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnLongPressTrigger",{get:function(){return e._OnLongPressTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPointerOverTrigger",{get:function(){return e._OnPointerOverTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnPointerOutTrigger",{get:function(){return e._OnPointerOutTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnEveryFrameTrigger",{get:function(){return e._OnEveryFrameTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnIntersectionEnterTrigger",{get:function(){return e._OnIntersectionEnterTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnIntersectionExitTrigger",{get:function(){return e._OnIntersectionExitTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnKeyDownTrigger",{get:function(){return e._OnKeyDownTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OnKeyUpTrigger",{get:function(){return e._OnKeyUpTrigger},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var t=this._scene._actionManagers.indexOf(this),i=0;i<this.actions.length;i++){var n=this.actions[i];e.Triggers[n.trigger]--,0===e.Triggers[n.trigger]&&delete e.Triggers[n.trigger]}t>-1&&this._scene._actionManagers.splice(t,1)},e.prototype.getScene=function(){return this._scene},e.prototype.hasSpecificTriggers=function(t){for(var e=0;e<this.actions.length;e++){var i=this.actions[e];if(t.indexOf(i.trigger)>-1)return!0}return!1},e.prototype.hasSpecificTrigger=function(t){for(var e=0;e<this.actions.length;e++)if(this.actions[e].trigger===t)return!0;return!1},Object.defineProperty(e.prototype,"hasPointerTriggers",{get:function(){for(var t=0;t<this.actions.length;t++){var i=this.actions[t];if(i.trigger>=e._OnPickTrigger&&i.trigger<=e._OnPointerOutTrigger)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPickTriggers",{get:function(){for(var t=0;t<this.actions.length;t++){var i=this.actions[t];if(i.trigger>=e._OnPickTrigger&&i.trigger<=e._OnPickUpTrigger)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HasTriggers",{get:function(){for(var t in e.Triggers)if(e.Triggers.hasOwnProperty(t))return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HasPickTriggers",{get:function(){for(var t in e.Triggers)if(e.Triggers.hasOwnProperty(t)){var i=parseInt(t);if(i>=e._OnPickTrigger&&i<=e._OnPickUpTrigger)return!0}return!1},enumerable:!0,configurable:!0}),e.HasSpecificTrigger=function(t){for(var i in e.Triggers)if(e.Triggers.hasOwnProperty(i)){if(parseInt(i)===t)return!0}return!1},e.prototype.registerAction=function(i){return i.trigger===e.OnEveryFrameTrigger&&this.getScene().actionManager!==this?(t.Tools.Warn("OnEveryFrameTrigger can only be used with scene.actionManager"),null):(this.actions.push(i),e.Triggers[i.trigger]?e.Triggers[i.trigger]++:e.Triggers[i.trigger]=1,i._actionManager=this,i._prepare(),i)},e.prototype.unregisterAction=function(t){var i=this.actions.indexOf(t);return-1!==i&&(this.actions.splice(i,1),e.Triggers[t.trigger]-=1,0===e.Triggers[t.trigger]&&delete e.Triggers[t.trigger],delete t._actionManager,!0)},e.prototype.processTrigger=function(t,i){for(var n=0;n<this.actions.length;n++){var r=this.actions[n];if(r.trigger===t){if(i&&(t===e.OnKeyUpTrigger||t===e.OnKeyDownTrigger)){var o=r.getTriggerParameter();if(o&&o!==i.sourceEvent.keyCode){if(!o.toLowerCase)continue;var s=o.toLowerCase();if(s!==i.sourceEvent.key){var a=i.sourceEvent.charCode?i.sourceEvent.charCode:i.sourceEvent.keyCode;if(String.fromCharCode(a).toLowerCase()!==s)continue}}}r._executeCurrent(i)}}},e.prototype._getEffectiveTarget=function(t,e){for(var i=e.split("."),n=0;n<i.length-1;n++)t=t[i[n]];return t},e.prototype._getProperty=function(t){var e=t.split(".");return e[e.length-1]},e.prototype.serialize=function(i){for(var n={children:new Array,name:i,type:3,properties:new Array},r=0;r<this.actions.length;r++){var o={type:0,children:new Array,name:e.GetTriggerName(this.actions[r].trigger),properties:new Array},s=this.actions[r].triggerOptions;if(s&&"number"!=typeof s)if(s.parameter instanceof t.Node)o.properties.push(t.Action._GetTargetProperty(s.parameter));else{var a={};t.Tools.DeepCopy(s.parameter,a,["mesh"]),s.parameter.mesh&&(a._meshId=s.parameter.mesh.id),o.properties.push({name:"parameter",targetType:null,value:a})}this.actions[r].serialize(o),n.children.push(o)}return n},e.Parse=function(i,n,r){var o=new e(r);null===n?r.actionManager=o:n.actionManager=o;for(var s=function(e,i,n,r){if(null===r){var o=parseFloat(i);return"true"===i||"false"===i?"true"===i:isNaN(o)?i:o}for(var s=r.split("."),a=i.split(","),l=0;l<s.length;l++)n=n[s[l]];if("boolean"==typeof n)return"true"===a[0];if("string"==typeof n)return a[0];var c=new Array;for(l=0;l<a.length;l++)c.push(parseFloat(a[l]));return n instanceof t.Vector3?t.Vector3.FromArray(c):n instanceof t.Vector4?t.Vector4.FromArray(c):n instanceof t.Color3?t.Color3.FromArray(c):n instanceof t.Color4?t.Color4.FromArray(c):parseFloat(a[0])},a=function(i,n,l,c,u){if(void 0===u&&(u=null),!i.detached){var h=new Array,p=null,d=null,f=i.combine&&i.combine.length>0;if(2===i.type?h.push(o):h.push(n),f){for(var m=new Array,g=0;g<i.combine.length;g++)a(i.combine[g],e.NothingTrigger,l,c,m);h.push(m)}else for(var y=0;y<i.properties.length;y++){var _=i.properties[y].value,v=i.properties[y].name,b=i.properties[y].targetType;"target"===v?_=p=null!==b&&"SceneProperties"===b?r:r.getNodeByName(_):"parent"===v?_=r.getNodeByName(_):"sound"===v?_=r.getSoundByName(_):"propertyPath"!==v?_=2===i.type&&"operator"===v?t.ValueCondition[_]:s(0,_,p,"value"===v?d:null):d=_,h.push(_)}if(null===u?h.push(l):h.push(null),"InterpolateValueAction"===i.name){var x=h[h.length-2];h[h.length-1]=x,h[h.length-2]=l}var A=function(e,i){var n=Object.create(t.Tools.Instantiate("BABYLON."+e).prototype);return n.constructor.apply(n,i),n}(i.name,h);if(A instanceof t.Condition&&null!==l){var w=new t.DoNothingAction(n,l);c?c.then(w):o.registerAction(w),c=w}null===u?A instanceof t.Condition?(l=A,A=c):(l=null,c?c.then(A):o.registerAction(A)):u.push(A);for(y=0;y<i.children.length;y++)a(i.children[y],n,l,A,null)}},l=0;l<i.children.length;l++){var c,u=i.children[l];if(u.properties.length>0){var h=u.properties[0].value,p=null===u.properties[0].targetType?h:r.getMeshByName(h);p._meshId&&(p.mesh=r.getMeshByID(p._meshId)),c={trigger:e[u.name],parameter:p}}else c=e[u.name];for(var d=0;d<u.children.length;d++)u.detached||a(u.children[d],c,null,null)}},e.GetTriggerName=function(t){switch(t){case 0:return"NothingTrigger";case 1:return"OnPickTrigger";case 2:return"OnLeftPickTrigger";case 3:return"OnRightPickTrigger";case 4:return"OnCenterPickTrigger";case 5:return"OnPickDownTrigger";case 6:return"OnPickUpTrigger";case 7:return"OnLongPressTrigger";case 8:return"OnPointerOverTrigger";case 9:return"OnPointerOutTrigger";case 10:return"OnEveryFrameTrigger";case 11:return"OnIntersectionEnterTrigger";case 12:return"OnIntersectionExitTrigger";case 13:return"OnKeyDownTrigger";case 14:return"OnKeyUpTrigger";case 15:return"OnPickOutTrigger";default:return""}},e._NothingTrigger=0,e._OnPickTrigger=1,e._OnLeftPickTrigger=2,e._OnRightPickTrigger=3,e._OnCenterPickTrigger=4,e._OnPickDownTrigger=5,e._OnDoublePickTrigger=6,e._OnPickUpTrigger=7,e._OnLongPressTrigger=8,e._OnPointerOverTrigger=9,e._OnPointerOutTrigger=10,e._OnEveryFrameTrigger=11,e._OnIntersectionEnterTrigger=12,e._OnIntersectionExitTrigger=13,e._OnKeyDownTrigger=14,e._OnKeyUpTrigger=15,e._OnPickOutTrigger=16,e.Triggers={},e}();t.ActionManager=i}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c){void 0===s&&(s=1e3);var u=e.call(this,i,a)||this;return u.propertyPath=r,u.value=o,u.duration=s,u.stopOtherAnimations=l,u.onInterpolationDone=c,u.onInterpolationDoneObservable=new t.Observable,u._target=u._effectiveTarget=n,u}return o(i,e),i.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},i.prototype.execute=function(){var e,i=this,n=this._actionManager.getScene(),r=[{frame:0,value:this._effectiveTarget[this._property]},{frame:100,value:this.value}];if("number"==typeof this.value)e=t.Animation.ANIMATIONTYPE_FLOAT;else if(this.value instanceof t.Color3)e=t.Animation.ANIMATIONTYPE_COLOR3;else if(this.value instanceof t.Vector3)e=t.Animation.ANIMATIONTYPE_VECTOR3;else if(this.value instanceof t.Matrix)e=t.Animation.ANIMATIONTYPE_MATRIX;else{if(!(this.value instanceof t.Quaternion))return void t.Tools.Warn("InterpolateValueAction: Unsupported type ("+typeof this.value+")");e=t.Animation.ANIMATIONTYPE_QUATERNION}var o=new t.Animation("InterpolateValueAction",this._property,1e3/this.duration*100,e,t.Animation.ANIMATIONLOOPMODE_CONSTANT);o.setKeys(r),this.stopOtherAnimations&&n.stopAnimation(this._effectiveTarget);n.beginDirectAnimation(this._effectiveTarget,[o],0,100,!1,1,function(){i.onInterpolationDoneObservable.notifyObservers(i),i.onInterpolationDone&&i.onInterpolationDone()})},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"InterpolateValueAction",properties:[t.Action._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:t.Action._SerializeValueAsString(this.value)},{name:"duration",value:t.Action._SerializeValueAsString(this.duration)},{name:"stopOtherAnimations",value:t.Action._SerializeValueAsString(this.stopOtherAnimations)||!1}]},i)},i}(t.Action);t.InterpolateValueAction=e}(l||(l={})),function(t){var e=function(e){function i(t,i,n,r){var o=e.call(this,t,r)||this;return o.propertyPath=n,o._target=o._effectiveTarget=i,o}return o(i,e),i.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},i.prototype.execute=function(){this._effectiveTarget[this._property]=!this._effectiveTarget[this._property]},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"SwitchBooleanAction",properties:[t.Action._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath}]},i)},i}(t.Action);t.SwitchBooleanAction=e;var i=function(e){function i(t,i,n,r){var o=e.call(this,t,r)||this;return o.value=n,o._target=i,o}return o(i,e),i.prototype.execute=function(){this._target.state=this.value},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"SetStateAction",properties:[t.Action._GetTargetProperty(this._target),{name:"value",value:this.value}]},i)},i}(t.Action);t.SetStateAction=i;var n=function(e){function i(t,i,n,r,o){var s=e.call(this,t,o)||this;return s.propertyPath=n,s.value=r,s._target=s._effectiveTarget=i,s}return o(i,e),i.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},i.prototype.execute=function(){this._effectiveTarget[this._property]=this.value,this._target.markAsDirty&&this._target.markAsDirty(this._property)},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"SetValueAction",properties:[t.Action._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:t.Action._SerializeValueAsString(this.value)}]},i)},i}(t.Action);t.SetValueAction=n;var r=function(e){function i(t,i,n,r,o){var s=e.call(this,t,o)||this;return s.propertyPath=n,s.value=r,s._target=s._effectiveTarget=i,s}return o(i,e),i.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath),"number"!=typeof this._effectiveTarget[this._property]&&t.Tools.Warn("Warning: IncrementValueAction can only be used with number values")},i.prototype.execute=function(){this._effectiveTarget[this._property]+=this.value,this._target.markAsDirty&&this._target.markAsDirty(this._property)},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"IncrementValueAction",properties:[t.Action._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:t.Action._SerializeValueAsString(this.value)}]},i)},i}(t.Action);t.IncrementValueAction=r;var s=function(e){function i(t,i,n,r,o,s){var a=e.call(this,t,s)||this;return a.from=n,a.to=r,a.loop=o,a._target=i,a}return o(i,e),i.prototype._prepare=function(){},i.prototype.execute=function(){this._actionManager.getScene().beginAnimation(this._target,this.from,this.to,this.loop)},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"PlayAnimationAction",properties:[t.Action._GetTargetProperty(this._target),{name:"from",value:String(this.from)},{name:"to",value:String(this.to)},{name:"loop",value:t.Action._SerializeValueAsString(this.loop)||!1}]},i)},i}(t.Action);t.PlayAnimationAction=s;var a=function(e){function i(t,i,n){var r=e.call(this,t,n)||this;return r._target=i,r}return o(i,e),i.prototype._prepare=function(){},i.prototype.execute=function(){this._actionManager.getScene().stopAnimation(this._target)},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"StopAnimationAction",properties:[t.Action._GetTargetProperty(this._target)]},i)},i}(t.Action);t.StopAnimationAction=a;var l=function(e){function i(i,n){return void 0===i&&(i=t.ActionManager.NothingTrigger),e.call(this,i,n)||this}return o(i,e),i.prototype.execute=function(){},i.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"DoNothingAction",properties:[]},t)},i}(t.Action);t.DoNothingAction=l;var c=function(t){function e(e,i,n){var r=t.call(this,e,n)||this;return r.children=i,r}return o(e,t),e.prototype._prepare=function(){for(var t=0;t<this.children.length;t++)this.children[t]._actionManager=this._actionManager,this.children[t]._prepare()},e.prototype.execute=function(t){for(var e=0;e<this.children.length;e++)this.children[e].execute(t)},e.prototype.serialize=function(e){for(var i=t.prototype._serialize.call(this,{name:"CombineAction",properties:[],combine:[]},e),n=0;n<this.children.length;n++)i.combine.push(this.children[n].serialize(null));return i},e}(t.Action);t.CombineAction=c;var u=function(t){function e(e,i,n){var r=t.call(this,e,n)||this;return r.func=i,r}return o(e,t),e.prototype.execute=function(t){this.func(t)},e}(t.Action);t.ExecuteCodeAction=u;var h=function(e){function i(t,i,n,r){var o=e.call(this,t,r)||this;return o._target=i,o._parent=n,o}return o(i,e),i.prototype._prepare=function(){},i.prototype.execute=function(){if(this._target.parent!==this._parent){var e=this._parent.getWorldMatrix().clone();e.invert(),this._target.position=t.Vector3.TransformCoordinates(this._target.position,e),this._target.parent=this._parent}},i.prototype.serialize=function(i){return e.prototype._serialize.call(this,{name:"SetParentAction",properties:[t.Action._GetTargetProperty(this._target),t.Action._GetTargetProperty(this._parent)]},i)},i}(t.Action);t.SetParentAction=h;var p=function(t){function e(e,i,n){var r=t.call(this,e,n)||this;return r._sound=i,r}return o(e,t),e.prototype._prepare=function(){},e.prototype.execute=function(){void 0!==this._sound&&this._sound.play()},e.prototype.serialize=function(e){return t.prototype._serialize.call(this,{name:"PlaySoundAction",properties:[{name:"sound",value:this._sound.name}]},e)},e}(t.Action);t.PlaySoundAction=p;var d=function(t){function e(e,i,n){var r=t.call(this,e,n)||this;return r._sound=i,r}return o(e,t),e.prototype._prepare=function(){},e.prototype.execute=function(){void 0!==this._sound&&this._sound.stop()},e.prototype.serialize=function(e){return t.prototype._serialize.call(this,{name:"StopSoundAction",properties:[{name:"sound",value:this._sound.name}]},e)},e}(t.Action);t.StopSoundAction=d}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o,s,a){if(void 0===s&&(s=.01),void 0===a&&(a=t.Texture.TRILINEAR_SAMPLINGMODE),this.name=e,this.sprites=new Array,this.renderingGroupId=0,this.layerMask=268435455,this.fogEnabled=!0,this.isPickable=!1,this.onDisposeObservable=new t.Observable,this._vertexBuffers={},this._capacity=n,this._spriteTexture=new t.Texture(i,o,!0,!1,a),this._spriteTexture.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._spriteTexture.wrapV=t.Texture.CLAMP_ADDRESSMODE,r.width&&r.height)this.cellWidth=r.width,this.cellHeight=r.height;else{if(void 0===r)return;this.cellWidth=r,this.cellHeight=r}this._epsilon=s,this._scene=o,this._scene.spriteManagers.push(this);for(var l=[],c=0,u=0;u<n;u++)l.push(c),l.push(c+1),l.push(c+2),l.push(c),l.push(c+2),l.push(c+3),c+=4;this._indexBuffer=o.getEngine().createIndexBuffer(l),this._vertexData=new Float32Array(16*n*4),this._buffer=new t.Buffer(o.getEngine(),this._vertexData,!0,16);var h=this._buffer.createVertexBuffer(t.VertexBuffer.PositionKind,0,4),p=this._buffer.createVertexBuffer("options",4,4),d=this._buffer.createVertexBuffer("cellInfo",8,4),f=this._buffer.createVertexBuffer(t.VertexBuffer.ColorKind,12,4);this._vertexBuffers[t.VertexBuffer.PositionKind]=h,this._vertexBuffers.options=p,this._vertexBuffers.cellInfo=d,this._vertexBuffers[t.VertexBuffer.ColorKind]=f,this._effectBase=this._scene.getEngine().createEffect("sprites",[t.VertexBuffer.PositionKind,"options","cellInfo",t.VertexBuffer.ColorKind],["view","projection","textureInfos","alphaTest"],["diffuseSampler"],""),this._effectFog=this._scene.getEngine().createEffect("sprites",[t.VertexBuffer.PositionKind,"options","cellInfo",t.VertexBuffer.ColorKind],["view","projection","textureInfos","alphaTest","vFogInfos","vFogColor"],["diffuseSampler"],"#define FOG")}return Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._spriteTexture},set:function(t){this._spriteTexture=t},enumerable:!0,configurable:!0}),e.prototype._appendSpriteVertex=function(t,e,i,n,r){var o=16*t;0===i?i=this._epsilon:1===i&&(i=1-this._epsilon),0===n?n=this._epsilon:1===n&&(n=1-this._epsilon),this._vertexData[o]=e.position.x,this._vertexData[o+1]=e.position.y,this._vertexData[o+2]=e.position.z,this._vertexData[o+3]=e.angle,this._vertexData[o+4]=e.width,this._vertexData[o+5]=e.height,this._vertexData[o+6]=i,this._vertexData[o+7]=n,this._vertexData[o+8]=e.invertU?1:0,this._vertexData[o+9]=e.invertV?1:0;var s=e.cellIndex/r>>0;this._vertexData[o+10]=e.cellIndex-s*r,this._vertexData[o+11]=s,this._vertexData[o+12]=e.color.r,this._vertexData[o+13]=e.color.g,this._vertexData[o+14]=e.color.b,this._vertexData[o+15]=e.color.a},e.prototype.intersects=function(e,i,n,r){for(var o=Math.min(this._capacity,this.sprites.length),s=t.Vector3.Zero(),a=t.Vector3.Zero(),l=Number.MAX_VALUE,c=null,u=t.Vector3.Zero(),h=i.getViewMatrix(),p=0;p<o;p++){var d=this.sprites[p];if(d){if(n){if(!n(d))continue}else if(!d.isPickable)continue;if(t.Vector3.TransformCoordinatesToRef(d.position,h,u),s.copyFromFloats(u.x-d.width/2,u.y-d.height/2,u.z),a.copyFromFloats(u.x+d.width/2,u.y+d.height/2,u.z),e.intersectsBoxMinMax(s,a)){var f=t.Vector3.Distance(u,e.origin);if(l>f&&(l=f,c=d,r))break}}}if(c){var m=new t.PickingInfo;return m.hit=!0,m.pickedSprite=c,m.distance=l,m}return null},e.prototype.render=function(){if(this._effectBase.isReady()&&this._effectFog.isReady()&&this._spriteTexture&&this._spriteTexture.isReady()){for(var e=this._scene.getEngine(),i=this._spriteTexture.getBaseSize(),n=e.getDeltaTime(),r=Math.min(this._capacity,this.sprites.length),o=i.width/this.cellWidth,s=0,a=0;a<r;a++){var l=this.sprites[a];l&&(l._animate(n),this._appendSpriteVertex(s++,l,0,0,o),this._appendSpriteVertex(s++,l,1,0,o),this._appendSpriteVertex(s++,l,1,1,o),this._appendSpriteVertex(s++,l,0,1,o))}this._buffer.update(this._vertexData);var c=this._effectBase;this._scene.fogEnabled&&this._scene.fogMode!==t.Scene.FOGMODE_NONE&&this.fogEnabled&&(c=this._effectFog),e.enableEffect(c);var u=this._scene.getViewMatrix();c.setTexture("diffuseSampler",this._spriteTexture),c.setMatrix("view",u),c.setMatrix("projection",this._scene.getProjectionMatrix()),c.setFloat2("textureInfos",this.cellWidth/i.width,this.cellHeight/i.height),this._scene.fogEnabled&&this._scene.fogMode!==t.Scene.FOGMODE_NONE&&this.fogEnabled&&(c.setFloat4("vFogInfos",this._scene.fogMode,this._scene.fogStart,this._scene.fogEnd,this._scene.fogDensity),c.setColor3("vFogColor",this._scene.fogColor)),e.bindBuffers(this._vertexBuffers,this._indexBuffer,c),e.setDepthFunctionToLessOrEqual(),c.setBool("alphaTest",!0),e.setColorWrite(!1),e.drawElementsType(t.Material.TriangleFillMode,0,6*r),e.setColorWrite(!0),c.setBool("alphaTest",!1),e.setAlphaMode(t.Engine.ALPHA_COMBINE),e.drawElementsType(t.Material.TriangleFillMode,0,6*r),e.setAlphaMode(t.Engine.ALPHA_DISABLE)}},e.prototype.dispose=function(){this._buffer&&(this._buffer.dispose(),this._buffer=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this._spriteTexture&&(this._spriteTexture.dispose(),this._spriteTexture=null);var t=this._scene.spriteManagers.indexOf(this);this._scene.spriteManagers.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},e}();t.SpriteManager=e}(l||(l={})),function(t){var e=function(){function e(e,i){this.name=e,this.color=new t.Color4(1,1,1,1),this.width=1,this.height=1,this.angle=0,this.cellIndex=0,this.invertU=0,this.invertV=0,this.animations=new Array,this.isPickable=!1,this._animationStarted=!1,this._loopAnimation=!1,this._fromIndex=0,this._toIndex=0,this._delay=0,this._direction=1,this._time=0,this._manager=i,this._manager.sprites.push(this),this.position=t.Vector3.Zero()}return Object.defineProperty(e.prototype,"size",{get:function(){return this.width},set:function(t){this.width=t,this.height=t},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(t,e,i,n,r){this._fromIndex=t,this._toIndex=e,this._loopAnimation=i,this._delay=n,this._animationStarted=!0,this._direction=t<e?1:-1,this.cellIndex=t,this._time=0,this._onAnimationEnd=r},e.prototype.stopAnimation=function(){this._animationStarted=!1},e.prototype._animate=function(t){this._animationStarted&&(this._time+=t,this._time>this._delay&&(this._time=this._time%this._delay,this.cellIndex+=this._direction,this.cellIndex>this._toIndex&&(this._loopAnimation?this.cellIndex=this._fromIndex:(this.cellIndex=this._toIndex,this._animationStarted=!1,this._onAnimationEnd&&this._onAnimationEnd(),this.disposeWhenFinishedAnimating&&this.dispose()))))},e.prototype.dispose=function(){for(var t=0;t<this._manager.sprites.length;t++)this._manager.sprites[t]==this&&this._manager.sprites.splice(t,1)},e}();t.Sprite=e}(l||(l={})),function(t){var e=function(){return function(t,e,i){this.bu=t,this.bv=e,this.distance=i,this.faceId=0,this.subMeshId=0}}();t.IntersectionInfo=e;var i=function(){function e(){this.hit=!1,this.distance=0,this.pickedPoint=null,this.pickedMesh=null,this.bu=0,this.bv=0,this.faceId=-1,this.subMeshId=0,this.pickedSprite=null}return e.prototype.getNormal=function(e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(t.VertexBuffer.NormalKind))return null;var n,r=this.pickedMesh.getIndices();if(!r)return null;if(i){var o=this.pickedMesh.getVerticesData(t.VertexBuffer.NormalKind),s=t.Vector3.FromArray(o,3*r[3*this.faceId]),a=t.Vector3.FromArray(o,3*r[3*this.faceId+1]),l=t.Vector3.FromArray(o,3*r[3*this.faceId+2]);s=s.scale(this.bu),a=a.scale(this.bv),l=l.scale(1-this.bu-this.bv),n=new t.Vector3(s.x+a.x+l.x,s.y+a.y+l.y,s.z+a.z+l.z)}else{var c=this.pickedMesh.getVerticesData(t.VertexBuffer.PositionKind),u=t.Vector3.FromArray(c,3*r[3*this.faceId]),h=t.Vector3.FromArray(c,3*r[3*this.faceId+1]),p=t.Vector3.FromArray(c,3*r[3*this.faceId+2]),d=u.subtract(h),f=p.subtract(h);n=t.Vector3.Cross(d,f)}return e&&(n=t.Vector3.TransformNormal(n,this.pickedMesh.getWorldMatrix())),t.Vector3.Normalize(n)},e.prototype.getTextureCoordinates=function(){if(!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(t.VertexBuffer.UVKind))return null;var e=this.pickedMesh.getIndices();if(!e)return null;var i=this.pickedMesh.getVerticesData(t.VertexBuffer.UVKind);if(!i)return null;var n=t.Vector2.FromArray(i,2*e[3*this.faceId]),r=t.Vector2.FromArray(i,2*e[3*this.faceId+1]),o=t.Vector2.FromArray(i,2*e[3*this.faceId+2]);return n=n.scale(1-this.bu-this.bv),r=r.scale(this.bu),o=o.scale(this.bv),new t.Vector2(n.x+r.x+o.x,n.y+r.y+o.y)},e}();t.PickingInfo=i}(l||(l={})),function(t){var e=function(){function e(t,e,i){void 0===i&&(i=Number.MAX_VALUE),this.origin=t,this.direction=e,this.length=i}return e.prototype.intersectsBoxMinMax=function(t,e){var i,n,r,o,s=0,a=Number.MAX_VALUE;if(Math.abs(this.direction.x)<1e-7){if(this.origin.x<t.x||this.origin.x>e.x)return!1}else if(i=1/this.direction.x,n=(t.x-this.origin.x)*i,(r=(e.x-this.origin.x)*i)===-1/0&&(r=1/0),n>r&&(o=n,n=r,r=o),(s=Math.max(n,s))>(a=Math.min(r,a)))return!1;if(Math.abs(this.direction.y)<1e-7){if(this.origin.y<t.y||this.origin.y>e.y)return!1}else if(i=1/this.direction.y,n=(t.y-this.origin.y)*i,(r=(e.y-this.origin.y)*i)===-1/0&&(r=1/0),n>r&&(o=n,n=r,r=o),(s=Math.max(n,s))>(a=Math.min(r,a)))return!1;if(Math.abs(this.direction.z)<1e-7){if(this.origin.z<t.z||this.origin.z>e.z)return!1}else if(i=1/this.direction.z,n=(t.z-this.origin.z)*i,(r=(e.z-this.origin.z)*i)===-1/0&&(r=1/0),n>r&&(o=n,n=r,r=o),(s=Math.max(n,s))>(a=Math.min(r,a)))return!1;return!0},e.prototype.intersectsBox=function(t){return this.intersectsBoxMinMax(t.minimum,t.maximum)},e.prototype.intersectsSphere=function(t){var e=t.center.x-this.origin.x,i=t.center.y-this.origin.y,n=t.center.z-this.origin.z,r=e*e+i*i+n*n,o=t.radius*t.radius;if(r<=o)return!0;var s=e*this.direction.x+i*this.direction.y+n*this.direction.z;return!(s<0)&&r-s*s<=o},e.prototype.intersectsTriangle=function(e,i,n){this._edge1||(this._edge1=t.Vector3.Zero(),this._edge2=t.Vector3.Zero(),this._pvec=t.Vector3.Zero(),this._tvec=t.Vector3.Zero(),this._qvec=t.Vector3.Zero()),i.subtractToRef(e,this._edge1),n.subtractToRef(e,this._edge2),t.Vector3.CrossToRef(this.direction,this._edge2,this._pvec);var r=t.Vector3.Dot(this._edge1,this._pvec);if(0===r)return null;var o=1/r;this.origin.subtractToRef(e,this._tvec);var s=t.Vector3.Dot(this._tvec,this._pvec)*o;if(s<0||s>1)return null;t.Vector3.CrossToRef(this._tvec,this._edge1,this._qvec);var a=t.Vector3.Dot(this.direction,this._qvec)*o;if(a<0||s+a>1)return null;var l=t.Vector3.Dot(this._edge2,this._qvec)*o;return l>this.length?null:new t.IntersectionInfo(s,a,l)},e.prototype.intersectsPlane=function(e){var i,n=t.Vector3.Dot(e.normal,this.direction);if(Math.abs(n)<9.99999997475243e-7)return null;var r=t.Vector3.Dot(e.normal,this.origin);return(i=(-e.d-r)/n)<0?i<-9.99999997475243e-7?null:0:i},e.prototype.intersectsMesh=function(i,n){var r=t.Tmp.Matrix[0];return i.getWorldMatrix().invertToRef(r),this._tmpRay?e.TransformToRef(this,r,this._tmpRay):this._tmpRay=e.Transform(this,r),i.intersects(this._tmpRay,n)},e.prototype.intersectsMeshes=function(t,e,i){i?i.length=0:i=[];for(var n=0;n<t.length;n++){var r=this.intersectsMesh(t[n],e);r.hit&&i.push(r)}return i.sort(this._comparePickingInfo),i},e.prototype._comparePickingInfo=function(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0},e.prototype.intersectionSegment=function(i,n,r){var o,s,a,l,c=this.origin.add(this.direction.multiplyByFloats(e.rayl,e.rayl,e.rayl)),u=n.subtract(i),h=c.subtract(this.origin),p=i.subtract(this.origin),d=t.Vector3.Dot(u,u),f=t.Vector3.Dot(u,h),m=t.Vector3.Dot(h,h),g=t.Vector3.Dot(u,p),y=t.Vector3.Dot(h,p),_=d*m-f*f,v=_,b=_;_<e.smallnum?(s=0,v=1,l=y,b=m):(l=d*y-f*g,(s=f*y-m*g)<0?(s=0,l=y,b=m):s>v&&(s=v,l=y+f,b=m)),l<0?(l=0,-g<0?s=0:-g>d?s=v:(s=-g,v=d)):l>b&&(l=b,-g+f<0?s=0:-g+f>d?s=v:(s=-g+f,v=d)),o=Math.abs(s)<e.smallnum?0:s/v,a=Math.abs(l)<e.smallnum?0:l/b;var x=h.multiplyByFloats(a,a,a),A=p.add(u.multiplyByFloats(o,o,o)).subtract(x);return a>0&&a<=this.length&&A.lengthSquared()<r*r?x.length():-1},e.prototype.update=function(e,i,n,r,o,s,a){return t.Vector3.UnprojectFloatsToRef(e,i,0,n,r,o,s,a,this.origin),t.Vector3.UnprojectFloatsToRef(e,i,1,n,r,o,s,a,t.Tmp.Vector3[0]),t.Tmp.Vector3[0].subtractToRef(this.origin,this.direction),this.direction.normalize(),this},e.Zero=function(){return new e(t.Vector3.Zero(),t.Vector3.Zero())},e.CreateNew=function(t,i,n,r,o,s,a){return e.Zero().update(t,i,n,r,o,s,a)},e.CreateNewFromTo=function(i,n,r){void 0===r&&(r=t.Matrix.Identity());var o=n.subtract(i),s=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z);return o.normalize(),e.Transform(new e(i,o,s),r)},e.Transform=function(i,n){var r=new e(new t.Vector3(0,0,0),new t.Vector3(0,0,0));return e.TransformToRef(i,n,r),r},e.TransformToRef=function(e,i,n){t.Vector3.TransformCoordinatesToRef(e.origin,i,n.origin),t.Vector3.TransformNormalToRef(e.direction,i,n.direction),n.length=e.length;var r=n.direction,o=r.length();if(0!==o&&1!==o){var s=1/o;r.x*=s,r.y*=s,r.z*=s,n.length*=o}},e.smallnum=1e-8,e.rayl=1e9,e}();t.Ray=e}(l||(l={})),function(t){var e=function(){var t={root:0,found:!1};return function(e,i,n,r){t.root=0,t.found=!1;var o=i*i-4*e*n;if(o<0)return t;var s=Math.sqrt(o),a=(-i-s)/(2*e),l=(-i+s)/(2*e);if(a>l){var c=l;l=a,a=c}return a>0&&a<r?(t.root=a,t.found=!0,t):l>0&&l<r?(t.root=l,t.found=!0,t):t}}(),i=function(){function i(){this._collisionPoint=t.Vector3.Zero(),this._planeIntersectionPoint=t.Vector3.Zero(),this._tempVector=t.Vector3.Zero(),this._tempVector2=t.Vector3.Zero(),this._tempVector3=t.Vector3.Zero(),this._tempVector4=t.Vector3.Zero(),this._edge=t.Vector3.Zero(),this._baseToVertex=t.Vector3.Zero(),this._destinationPoint=t.Vector3.Zero(),this._slidePlaneNormal=t.Vector3.Zero(),this._displacementVector=t.Vector3.Zero(),this._radius=t.Vector3.One(),this._retry=0,this._basePointWorld=t.Vector3.Zero(),this._velocityWorld=t.Vector3.Zero(),this._normalizedVelocity=t.Vector3.Zero(),this._collisionMask=-1}return Object.defineProperty(i.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(t){this._collisionMask=isNaN(t)?-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slidePlaneNormal",{get:function(){return this._slidePlaneNormal},enumerable:!0,configurable:!0}),i.prototype._initialize=function(e,i,n){this._velocity=i,t.Vector3.NormalizeToRef(i,this._normalizedVelocity),this._basePoint=e,e.multiplyToRef(this._radius,this._basePointWorld),i.multiplyToRef(this._radius,this._velocityWorld),this._velocityWorldLength=this._velocityWorld.length(),this._epsilon=n,this.collisionFound=!1},i.prototype._checkPointInTriangle=function(e,i,n,r,o){i.subtractToRef(e,this._tempVector),n.subtractToRef(e,this._tempVector2),t.Vector3.CrossToRef(this._tempVector,this._tempVector2,this._tempVector4);var s=t.Vector3.Dot(this._tempVector4,o);return!(s<0)&&(r.subtractToRef(e,this._tempVector3),t.Vector3.CrossToRef(this._tempVector2,this._tempVector3,this._tempVector4),!((s=t.Vector3.Dot(this._tempVector4,o))<0)&&(t.Vector3.CrossToRef(this._tempVector3,this._tempVector,this._tempVector4),(s=t.Vector3.Dot(this._tempVector4,o))>=0))},i.prototype._canDoCollision=function(e,i,n,r){var o=t.Vector3.Distance(this._basePointWorld,e),s=Math.max(this._radius.x,this._radius.y,this._radius.z);return!(o>this._velocityWorldLength+s+i||!function(t,e,i,n){return!(t.x>i.x+n||i.x-n>e.x||t.y>i.y+n||i.y-n>e.y||t.z>i.z+n||i.z-n>e.z)}(n,r,this._basePointWorld,this._velocityWorldLength+s))},i.prototype._testTriangle=function(i,n,r,o,s,a){var l,c=!1;n||(n=[]),n[i]||(n[i]=new t.Plane(0,0,0,0),n[i].copyFromPoints(r,o,s));var u=n[i];if(a||u.isFrontFacingTo(this._normalizedVelocity,0)){var h=u.signedDistanceTo(this._basePoint),p=t.Vector3.Dot(u.normal,this._velocity);if(0==p){if(Math.abs(h)>=1)return;c=!0,l=0}else{var d=(1-h)/p;if((l=(-1-h)/p)>d){var f=d;d=l,l=f}if(l>1||d<0)return;l<0&&(l=0),l>1&&(l=1)}this._collisionPoint.copyFromFloats(0,0,0);var m=!1,g=1;if(c||(this._basePoint.subtractToRef(u.normal,this._planeIntersectionPoint),this._velocity.scaleToRef(l,this._tempVector),this._planeIntersectionPoint.addInPlace(this._tempVector),this._checkPointInTriangle(this._planeIntersectionPoint,r,o,s,u.normal)&&(m=!0,g=l,this._collisionPoint.copyFrom(this._planeIntersectionPoint))),!m){var y=this._velocity.lengthSquared(),_=y;this._basePoint.subtractToRef(r,this._tempVector);var v=2*t.Vector3.Dot(this._velocity,this._tempVector),b=this._tempVector.lengthSquared()-1,x=e(_,v,b,g);x.found&&(g=x.root,m=!0,this._collisionPoint.copyFrom(r)),this._basePoint.subtractToRef(o,this._tempVector),v=2*t.Vector3.Dot(this._velocity,this._tempVector),b=this._tempVector.lengthSquared()-1,(x=e(_,v,b,g)).found&&(g=x.root,m=!0,this._collisionPoint.copyFrom(o)),this._basePoint.subtractToRef(s,this._tempVector),v=2*t.Vector3.Dot(this._velocity,this._tempVector),b=this._tempVector.lengthSquared()-1,(x=e(_,v,b,g)).found&&(g=x.root,m=!0,this._collisionPoint.copyFrom(s)),o.subtractToRef(r,this._edge),r.subtractToRef(this._basePoint,this._baseToVertex);var A=this._edge.lengthSquared(),w=t.Vector3.Dot(this._edge,this._velocity),P=t.Vector3.Dot(this._edge,this._baseToVertex);if(_=A*-y+w*w,v=A*(2*t.Vector3.Dot(this._velocity,this._baseToVertex))-2*w*P,b=A*(1-this._baseToVertex.lengthSquared())+P*P,(x=e(_,v,b,g)).found){var E=(w*x.root-P)/A;E>=0&&E<=1&&(g=x.root,m=!0,this._edge.scaleInPlace(E),r.addToRef(this._edge,this._collisionPoint))}s.subtractToRef(o,this._edge),o.subtractToRef(this._basePoint,this._baseToVertex),A=this._edge.lengthSquared(),w=t.Vector3.Dot(this._edge,this._velocity),P=t.Vector3.Dot(this._edge,this._baseToVertex),_=A*-y+w*w,v=A*(2*t.Vector3.Dot(this._velocity,this._baseToVertex))-2*w*P,b=A*(1-this._baseToVertex.lengthSquared())+P*P,(x=e(_,v,b,g)).found&&(E=(w*x.root-P)/A)>=0&&E<=1&&(g=x.root,m=!0,this._edge.scaleInPlace(E),o.addToRef(this._edge,this._collisionPoint)),r.subtractToRef(s,this._edge),s.subtractToRef(this._basePoint,this._baseToVertex),A=this._edge.lengthSquared(),w=t.Vector3.Dot(this._edge,this._velocity),P=t.Vector3.Dot(this._edge,this._baseToVertex),_=A*-y+w*w,v=A*(2*t.Vector3.Dot(this._velocity,this._baseToVertex))-2*w*P,b=A*(1-this._baseToVertex.lengthSquared())+P*P,(x=e(_,v,b,g)).found&&(E=(w*x.root-P)/A)>=0&&E<=1&&(g=x.root,m=!0,this._edge.scaleInPlace(E),s.addToRef(this._edge,this._collisionPoint))}if(m){var T=g*this._velocity.length();(!this.collisionFound||T<this._nearestDistance)&&(this.intersectionPoint?this.intersectionPoint.copyFrom(this._collisionPoint):this.intersectionPoint=this._collisionPoint.clone(),this._nearestDistance=T,this.collisionFound=!0)}}},i.prototype._collide=function(t,e,i,n,r,o,s){for(var a=n;a<r;a+=3){var l=e[i[a]-o],c=e[i[a+1]-o],u=e[i[a+2]-o];this._testTriangle(a,t,u,c,l,s)}},i.prototype._getResponse=function(e,i){e.addToRef(i,this._destinationPoint),i.scaleInPlace(this._nearestDistance/i.length()),this._basePoint.addToRef(i,e),e.subtractToRef(this.intersectionPoint,this._slidePlaneNormal),this._slidePlaneNormal.normalize(),this._slidePlaneNormal.scaleToRef(this._epsilon,this._displacementVector),e.addInPlace(this._displacementVector),this.intersectionPoint.addInPlace(this._displacementVector),this._slidePlaneNormal.scaleInPlace(t.Plane.SignedDistanceToPlaneFromPositionAndNormal(this.intersectionPoint,this._slidePlaneNormal,this._destinationPoint)),this._destinationPoint.subtractInPlace(this._slidePlaneNormal),this._destinationPoint.subtractToRef(this.intersectionPoint,i)},i}();t.Collider=i}(l||(l={})),function(t){var e,i;t.CollisionWorker="",function(t){t[t.INIT=0]="INIT",t[t.UPDATE=1]="UPDATE",t[t.COLLIDE=2]="COLLIDE"}(e=t.WorkerTaskType||(t.WorkerTaskType={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.UNKNOWN_ERROR=1]="UNKNOWN_ERROR"}(i=t.WorkerReplyType||(t.WorkerReplyType={}));var n=function(){function n(){var r=this;this._scaledPosition=t.Vector3.Zero(),this._scaledVelocity=t.Vector3.Zero(),this.onMeshUpdated=function(t){r._addUpdateMeshesList[t.uniqueId]=n.SerializeMesh(t)},this.onGeometryUpdated=function(t){r._addUpdateGeometriesList[t.id]=n.SerializeGeometry(t)},this._afterRender=function(){if(r._init&&!(0==r._toRemoveGeometryArray.length&&0==r._toRemoveMeshesArray.length&&0==Object.keys(r._addUpdateGeometriesList).length&&0==Object.keys(r._addUpdateMeshesList).length||r._runningUpdated>4)){++r._runningUpdated;var t={updatedMeshes:r._addUpdateMeshesList,updatedGeometries:r._addUpdateGeometriesList,removedGeometries:r._toRemoveGeometryArray,removedMeshes:r._toRemoveMeshesArray},i={payload:t,taskType:e.UPDATE},n=[];for(var o in t.updatedGeometries)t.updatedGeometries.hasOwnProperty(o)&&(n.push(i.payload.updatedGeometries[o].indices.buffer),n.push(i.payload.updatedGeometries[o].normals.buffer),n.push(i.payload.updatedGeometries[o].positions.buffer));r._worker.postMessage(i,n),r._addUpdateMeshesList={},r._addUpdateGeometriesList={},r._toRemoveGeometryArray=[],r._toRemoveMeshesArray=[]}},this._onMessageFromWorker=function(n){var o=n.data;if(o.error==i.SUCCESS)switch(o.taskType){case e.INIT:r._init=!0,r._scene.meshes.forEach(function(t){r.onMeshAdded(t)}),r._scene.getGeometries().forEach(function(t){r.onGeometryAdded(t)});break;case e.UPDATE:r._runningUpdated--;break;case e.COLLIDE:var s=o.payload;if(!r._collisionsCallbackArray[s.collisionId])return;var a=r._collisionsCallbackArray[s.collisionId];if(a){var l=r._scene.getMeshByUniqueID(s.collidedMeshUniqueId);l&&a(s.collisionId,t.Vector3.FromArray(s.newPosition),l)}r._collisionsCallbackArray[s.collisionId]=null}else t.Tools.Warn("error returned from worker!")},this._collisionsCallbackArray=[],this._init=!1,this._runningUpdated=0,this._addUpdateMeshesList={},this._addUpdateGeometriesList={},this._toRemoveGeometryArray=[],this._toRemoveMeshesArray=[]}return n.prototype.getNewPosition=function(t,i,n,r,o,s,a){if(this._init&&!this._collisionsCallbackArray[a]&&!this._collisionsCallbackArray[a+1e5]){t.divideToRef(n._radius,this._scaledPosition),i.divideToRef(n._radius,this._scaledVelocity),this._collisionsCallbackArray[a]=s;var l={payload:{collider:{position:this._scaledPosition.asArray(),velocity:this._scaledVelocity.asArray(),radius:n._radius.asArray()},collisionId:a,excludedMeshUniqueId:o?o.uniqueId:null,maximumRetry:r},taskType:e.COLLIDE};this._worker.postMessage(l)}},n.prototype.init=function(i){this._scene=i,this._scene.registerAfterRender(this._afterRender);var n=t.WorkerIncluded?t.Engine.CodeRepository+"Collisions/babylon.collisionWorker.js":URL.createObjectURL(new Blob([t.CollisionWorker],{type:"application/javascript"}));this._worker=new Worker(n),this._worker.onmessage=this._onMessageFromWorker;var r={payload:{},taskType:e.INIT};this._worker.postMessage(r)},n.prototype.destroy=function(){this._scene.unregisterAfterRender(this._afterRender),this._worker.terminate()},n.prototype.onMeshAdded=function(t){t.registerAfterWorldMatrixUpdate(this.onMeshUpdated),this.onMeshUpdated(t)},n.prototype.onMeshRemoved=function(t){this._toRemoveMeshesArray.push(t.uniqueId)},n.prototype.onGeometryAdded=function(t){t.onGeometryUpdated=this.onGeometryUpdated,this.onGeometryUpdated(t)},n.prototype.onGeometryDeleted=function(t){this._toRemoveGeometryArray.push(t.id)},n.SerializeMesh=function(e){var i=[];e.subMeshes&&(i=e.subMeshes.map(function(t,e){var i=t.getBoundingInfo();return{position:e,verticesStart:t.verticesStart,verticesCount:t.verticesCount,indexStart:t.indexStart,indexCount:t.indexCount,hasMaterial:!!t.getMaterial(),sphereCenter:i.boundingSphere.centerWorld.asArray(),sphereRadius:i.boundingSphere.radiusWorld,boxMinimum:i.boundingBox.minimumWorld.asArray(),boxMaximum:i.boundingBox.maximumWorld.asArray()}}));var n=null;if(e instanceof t.Mesh)n=(r=e.geometry)?r.id:null;else if(e instanceof t.InstancedMesh){var r;n=(r=e.sourceMesh.geometry)?r.id:null}var o=e.getBoundingInfo();return{uniqueId:e.uniqueId,id:e.id,name:e.name,geometryId:n,sphereCenter:o.boundingSphere.centerWorld.asArray(),sphereRadius:o.boundingSphere.radiusWorld,boxMinimum:o.boundingBox.minimumWorld.asArray(),boxMaximum:o.boundingBox.maximumWorld.asArray(),worldMatrixFromCache:e.worldMatrixFromCache.asArray(),subMeshes:i,checkCollisions:e.checkCollisions}},n.SerializeGeometry=function(e){return{id:e.id,positions:new Float32Array(e.getVerticesData(t.VertexBuffer.PositionKind)||[]),normals:new Float32Array(e.getVerticesData(t.VertexBuffer.NormalKind)||[]),indices:new Uint32Array(e.getIndices()||[])}},n}();t.CollisionCoordinatorWorker=n;var r=function(){function e(){this._scaledPosition=t.Vector3.Zero(),this._scaledVelocity=t.Vector3.Zero(),this._finalPosition=t.Vector3.Zero()}return e.prototype.getNewPosition=function(t,e,i,n,r,o,s){t.divideToRef(i._radius,this._scaledPosition),e.divideToRef(i._radius,this._scaledVelocity),i.collidedMesh=null,i._retry=0,i._initialVelocity=this._scaledVelocity,i._initialPosition=this._scaledPosition,this._collideWithWorld(this._scaledPosition,this._scaledVelocity,i,n,this._finalPosition,r),this._finalPosition.multiplyInPlace(i._radius),o(s,this._finalPosition,i.collidedMesh)},e.prototype.init=function(t){this._scene=t},e.prototype.destroy=function(){},e.prototype.onMeshAdded=function(t){},e.prototype.onMeshUpdated=function(t){},e.prototype.onMeshRemoved=function(t){},e.prototype.onGeometryAdded=function(t){},e.prototype.onGeometryUpdated=function(t){},e.prototype.onGeometryDeleted=function(t){},e.prototype._collideWithWorld=function(e,i,n,r,o,s){void 0===s&&(s=null);var a=10*t.Engine.CollisionsEpsilon;if(!(n._retry>=r)){var l=s?s.collisionMask:n.collisionMask;n._initialize(e,i,a);for(var c=0;c<this._scene.meshes.length;c++){var u=this._scene.meshes[c];u.isEnabled()&&u.checkCollisions&&u.subMeshes&&u!==s&&0!=(l&u.collisionGroup)&&u._checkCollision(n)}return n.collisionFound?(0===i.x&&0===i.y&&0===i.z||n._getResponse(e,i),i.length()<=a?void o.copyFrom(e):(n._retry++,void this._collideWithWorld(e,i,n,r,o,s))):void e.addToRef(i,o)}o.copyFrom(e)},e}();t.CollisionCoordinatorLegacy=r}(l||(l={})),function(t){var e=function(){function e(e){this.particleSystem=e,this.position=t.Vector3.Zero(),this.direction=t.Vector3.Zero(),this.color=new t.Color4(0,0,0,0),this.colorStep=new t.Color4(0,0,0,0),this.lifeTime=1,this.age=0,this.size=0,this.angle=0,this.angularSpeed=0,this.cellIndex=0,this._currentFrameCounter=0,this.particleSystem.isAnimationSheetEnabled&&(this.cellIndex=this.particleSystem.startSpriteCellID,0==this.particleSystem.spriteCellChangeSpeed?this.updateCellIndex=this.updateCellIndexWithSpeedCalculated:this.updateCellIndex=this.updateCellIndexWithCustomSpeed)}return e.prototype.updateCellIndexWithSpeedCalculated=function(t){var e=(this.lifeTime-this.age)/t/(this.particleSystem.endSpriteCellID+1-this.cellIndex);this._currentFrameCounter+=t,this._currentFrameCounter>=e*t&&(this._currentFrameCounter=0,++this.cellIndex>this.particleSystem.endSpriteCellID&&(this.cellIndex=this.particleSystem.endSpriteCellID))},e.prototype.updateCellIndexWithCustomSpeed=function(){this._currentFrameCounter>=this.particleSystem.spriteCellChangeSpeed?(this.cellIndex++,this._currentFrameCounter=0,this.cellIndex>this.particleSystem.endSpriteCellID&&(this.particleSystem.spriteCellLoop?this.cellIndex=this.particleSystem.startSpriteCellID:this.cellIndex=this.particleSystem.endSpriteCellID)):this._currentFrameCounter++},e.prototype.copyTo=function(t){t.position.copyFrom(this.position),t.direction.copyFrom(this.direction),t.color.copyFrom(this.color),t.colorStep.copyFrom(this.colorStep),t.lifeTime=this.lifeTime,t.age=this.age,t.size=this.size,t.angle=this.angle,t.angularSpeed=this.angularSpeed,t.particleSystem=this.particleSystem,t.cellIndex=this.cellIndex},e}();t.Particle=e}(l||(l={})),function(t){var e=function(){function e(i,n,r,o,s,a){void 0===o&&(o=null),void 0===s&&(s=!1),void 0===a&&(a=.01);var l=this;this.animations=[],this.renderingGroupId=0,this.emitter=null,this.emitRate=10,this.manualEmitCount=-1,this.updateSpeed=.01,this.targetStopDuration=0,this.disposeOnStop=!1,this.minEmitPower=1,this.maxEmitPower=1,this.minLifeTime=1,this.maxLifeTime=1,this.minSize=1,this.maxSize=1,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.layerMask=268435455,this.customShader=null,this.preventAutoStart=!1,this.onAnimationEnd=null,this.blendMode=e.BLENDMODE_ONEONE,this.forceDepthWrite=!1,this.gravity=t.Vector3.Zero(),this.direction1=new t.Vector3(0,1,0),this.direction2=new t.Vector3(0,1,0),this.minEmitBox=new t.Vector3(-.5,-.5,-.5),this.maxEmitBox=new t.Vector3(.5,.5,.5),this.color1=new t.Color4(1,1,1,1),this.color2=new t.Color4(1,1,1,1),this.colorDead=new t.Color4(0,0,0,1),this.textureMask=new t.Color4(1,1,1,1),this.spriteCellLoop=!0,this.spriteCellChangeSpeed=0,this.startSpriteCellID=0,this.endSpriteCellID=0,this.spriteCellWidth=0,this.spriteCellHeight=0,this.onDisposeObservable=new t.Observable,this._particles=new Array,this._stockParticles=new Array,this._newPartsExcess=0,this._vertexBuffers={},this._scaledColorStep=new t.Color4(0,0,0,0),this._colorDiff=new t.Color4(0,0,0,0),this._scaledDirection=t.Vector3.Zero(),this._scaledGravity=t.Vector3.Zero(),this._currentRenderId=-1,this._started=!1,this._stopped=!1,this._actualFrame=0,this._vertexBufferSize=11,this._appendParticleVertexes=null,this.id=i,this.name=i,this._capacity=n,this._epsilon=a,this._isAnimationSheetEnabled=s,s&&(this._vertexBufferSize=12),this._scene=r||t.Engine.LastCreatedScene,this._customEffect=o,r.particleSystems.push(this),this._createIndexBuffer(),this._vertexData=new Float32Array(n*this._vertexBufferSize*4),this._vertexBuffer=new t.Buffer(r.getEngine(),this._vertexData,!0,this._vertexBufferSize);var c=this._vertexBuffer.createVertexBuffer(t.VertexBuffer.PositionKind,0,3),u=this._vertexBuffer.createVertexBuffer(t.VertexBuffer.ColorKind,3,4),h=this._vertexBuffer.createVertexBuffer("options",7,4);if(this._isAnimationSheetEnabled){var p=this._vertexBuffer.createVertexBuffer("cellIndex",11,1);this._vertexBuffers.cellIndex=p}this._vertexBuffers[t.VertexBuffer.PositionKind]=c,this._vertexBuffers[t.VertexBuffer.ColorKind]=u,this._vertexBuffers.options=h,this.particleEmitterType=new t.BoxParticleEmitter(this),this.updateFunction=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.age+=l._scaledUpdateSpeed,i.age>=i.lifeTime?(l.recycleParticle(i),e--):(i.colorStep.scaleToRef(l._scaledUpdateSpeed,l._scaledColorStep),i.color.addInPlace(l._scaledColorStep),i.color.a<0&&(i.color.a=0),i.angle+=i.angularSpeed*l._scaledUpdateSpeed,i.direction.scaleToRef(l._scaledUpdateSpeed,l._scaledDirection),i.position.addInPlace(l._scaledDirection),l.gravity.scaleToRef(l._scaledUpdateSpeed,l._scaledGravity),i.direction.addInPlace(l._scaledGravity),l._isAnimationSheetEnabled&&i.updateCellIndex(l._scaledUpdateSpeed))}}}return Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimationSheetEnabled",{get:function(){return this._isAnimationSheetEnabled},enumerable:!0,configurable:!0}),e.prototype._createIndexBuffer=function(){for(var t=[],e=0,i=0;i<this._capacity;i++)t.push(e),t.push(e+1),t.push(e+2),t.push(e),t.push(e+2),t.push(e+3),e+=4;this._indexBuffer=this._scene.getEngine().createIndexBuffer(t)},e.prototype.recycleParticle=function(t){var e=this._particles.pop();e!==t&&(e.copyTo(t),this._stockParticles.push(e))},e.prototype.getCapacity=function(){return this._capacity},e.prototype.isAlive=function(){return this._alive},e.prototype.isStarted=function(){return this._started},e.prototype.start=function(){this._started=!0,this._stopped=!1,this._actualFrame=0},e.prototype.stop=function(){this._stopped=!0},e.prototype._appendParticleVertex=function(t,e,i,n){var r=t*this._vertexBufferSize;this._vertexData[r]=e.position.x,this._vertexData[r+1]=e.position.y,this._vertexData[r+2]=e.position.z,this._vertexData[r+3]=e.color.r,this._vertexData[r+4]=e.color.g,this._vertexData[r+5]=e.color.b,this._vertexData[r+6]=e.color.a,this._vertexData[r+7]=e.angle,this._vertexData[r+8]=e.size,this._vertexData[r+9]=i,this._vertexData[r+10]=n},e.prototype._appendParticleVertexWithAnimation=function(t,e,i,n){0===i?i=this._epsilon:1===i&&(i=1-this._epsilon),0===n?n=this._epsilon:1===n&&(n=1-this._epsilon);var r=t*this._vertexBufferSize;this._vertexData[r]=e.position.x,this._vertexData[r+1]=e.position.y,this._vertexData[r+2]=e.position.z,this._vertexData[r+3]=e.color.r,this._vertexData[r+4]=e.color.g,this._vertexData[r+5]=e.color.b,this._vertexData[r+6]=e.color.a,this._vertexData[r+7]=e.angle,this._vertexData[r+8]=e.size,this._vertexData[r+9]=i,this._vertexData[r+10]=n,this._vertexData[r+11]=e.cellIndex},e.prototype._update=function(e){var i;if(this._alive=this._particles.length>0,this.updateFunction(this._particles),this.emitter.position)i=this.emitter.getWorldMatrix();else{var n=this.emitter;i=t.Matrix.Translation(n.x,n.y,n.z)}for(var r,o=0;o<e&&this._particles.length!==this._capacity;o++){0!==this._stockParticles.length?((r=this._stockParticles.pop()).age=0,r.cellIndex=this.startSpriteCellID):r=new t.Particle(this),this._particles.push(r);var s=t.Scalar.RandomRange(this.minEmitPower,this.maxEmitPower);this.startPositionFunction?this.startPositionFunction(i,r.position,r):this.particleEmitterType.startPositionFunction(i,r.position,r),this.startDirectionFunction?this.startDirectionFunction(s,i,r.direction,r):this.particleEmitterType.startDirectionFunction(s,i,r.direction,r),r.lifeTime=t.Scalar.RandomRange(this.minLifeTime,this.maxLifeTime),r.size=t.Scalar.RandomRange(this.minSize,this.maxSize),r.angularSpeed=t.Scalar.RandomRange(this.minAngularSpeed,this.maxAngularSpeed);var a=t.Scalar.RandomRange(0,1);t.Color4.LerpToRef(this.color1,this.color2,a,r.color),this.colorDead.subtractToRef(r.color,this._colorDiff),this._colorDiff.scaleToRef(1/r.lifeTime,r.colorStep)}},e.prototype._getEffect=function(){if(this._customEffect)return this._customEffect;var e=[];this._scene.clipPlane&&e.push("#define CLIPPLANE"),this._isAnimationSheetEnabled&&e.push("#define ANIMATESHEET");var i,n,r=e.join("\n");this._cachedDefines!==r&&(this._cachedDefines=r,this._isAnimationSheetEnabled?(i=[t.VertexBuffer.PositionKind,t.VertexBuffer.ColorKind,"options","cellIndex"],n=["invView","view","projection","particlesInfos","vClipPlane","textureMask"]):(i=[t.VertexBuffer.PositionKind,t.VertexBuffer.ColorKind,"options"],n=["invView","view","projection","vClipPlane","textureMask"]),this._effect=this._scene.getEngine().createEffect("particles",i,n,["diffuseSampler"],r));return this._effect},e.prototype.animate=function(){if(this._started){var t=this._getEffect();if(this.emitter&&t.isReady()&&this.particleTexture&&this.particleTexture.isReady()&&this._currentRenderId!==this._scene.getRenderId()){var e;this._currentRenderId=this._scene.getRenderId(),this._scaledUpdateSpeed=this.updateSpeed*this._scene.getAnimationRatio(),this.manualEmitCount>-1?(e=this.manualEmitCount,this._newPartsExcess=0,this.manualEmitCount=0):(e=this.emitRate*this._scaledUpdateSpeed>>0,this._newPartsExcess+=this.emitRate*this._scaledUpdateSpeed-e),this._newPartsExcess>1&&(e+=this._newPartsExcess>>0,this._newPartsExcess-=this._newPartsExcess>>0),this._alive=!1,this._stopped?e=0:(this._actualFrame+=this._scaledUpdateSpeed,this.targetStopDuration&&this._actualFrame>=this.targetStopDuration&&this.stop()),this._update(e),this._stopped&&(this._alive||(this._started=!1,this.onAnimationEnd&&this.onAnimationEnd(),this.disposeOnStop&&this._scene._toBeDisposed.push(this))),this._isAnimationSheetEnabled?this._appendParticleVertexes=this._appenedParticleVertexesWithSheet:this._appendParticleVertexes=this._appenedParticleVertexesNoSheet;for(var i=0,n=0;n<this._particles.length;n++){var r=this._particles[n];this._appendParticleVertexes(i,r),i+=4}this._vertexBuffer&&this._vertexBuffer.update(this._vertexData)}}},e.prototype._appenedParticleVertexesWithSheet=function(t,e){this._appendParticleVertexWithAnimation(t++,e,0,0),this._appendParticleVertexWithAnimation(t++,e,1,0),this._appendParticleVertexWithAnimation(t++,e,1,1),this._appendParticleVertexWithAnimation(t++,e,0,1)},e.prototype._appenedParticleVertexesNoSheet=function(t,e){this._appendParticleVertex(t++,e,0,0),this._appendParticleVertex(t++,e,1,0),this._appendParticleVertex(t++,e,1,1),this._appendParticleVertex(t++,e,0,1)},e.prototype.rebuild=function(){this._createIndexBuffer(),this._vertexBuffer&&this._vertexBuffer._rebuild()},e.prototype.render=function(){var i=this._getEffect();if(!(this.emitter&&i.isReady()&&this.particleTexture&&this.particleTexture.isReady()&&this._particles.length))return 0;var n=this._scene.getEngine();n.enableEffect(i),n.setState(!1);var r=this._scene.getViewMatrix();if(i.setTexture("diffuseSampler",this.particleTexture),i.setMatrix("view",r),i.setMatrix("projection",this._scene.getProjectionMatrix()),this._isAnimationSheetEnabled){var o=this.particleTexture.getBaseSize();i.setFloat3("particlesInfos",this.spriteCellWidth/o.width,this.spriteCellHeight/o.height,o.width/this.spriteCellWidth)}if(i.setFloat4("textureMask",this.textureMask.r,this.textureMask.g,this.textureMask.b,this.textureMask.a),this._scene.clipPlane){var s=this._scene.clipPlane,a=r.clone();a.invert(),i.setMatrix("invView",a),i.setFloat4("vClipPlane",s.normal.x,s.normal.y,s.normal.z,s.d)}return n.bindBuffers(this._vertexBuffers,this._indexBuffer,i),this.blendMode===e.BLENDMODE_ONEONE?n.setAlphaMode(t.Engine.ALPHA_ONEONE):n.setAlphaMode(t.Engine.ALPHA_COMBINE),this.forceDepthWrite&&n.setDepthWrite(!0),n.drawElementsType(t.Material.TriangleFillMode,0,6*this._particles.length),n.setAlphaMode(t.Engine.ALPHA_DISABLE),this._particles.length},e.prototype.dispose=function(){this._vertexBuffer&&(this._vertexBuffer.dispose(),this._vertexBuffer=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this.particleTexture&&(this.particleTexture.dispose(),this.particleTexture=null);var t=this._scene.particleSystems.indexOf(this);t>-1&&this._scene.particleSystems.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},e.prototype.createSphereEmitter=function(e){void 0===e&&(e=1);var i=new t.SphereParticleEmitter(e);return this.particleEmitterType=i,i},e.prototype.createDirectedSphereEmitter=function(e,i,n){void 0===e&&(e=1),void 0===i&&(i=new t.Vector3(0,1,0)),void 0===n&&(n=new t.Vector3(0,1,0));var r=new t.SphereDirectedParticleEmitter(e,i,n);return this.particleEmitterType=r,r},e.prototype.createConeEmitter=function(e,i){void 0===e&&(e=1),void 0===i&&(i=Math.PI/4);var n=new t.ConeParticleEmitter(e,i);return this.particleEmitterType=n,n},e.prototype.createBoxEmitter=function(e,i,n,r){var o=new t.BoxParticleEmitter(this);return this.direction1=e,this.direction2=i,this.minEmitBox=n,this.maxEmitBox=r,this.particleEmitterType=o,o},e.prototype.clone=function(i,n){var r=null,o=null;if(null!=this.customShader){var s=(o=this.customShader).shaderOptions.defines.length>0?o.shaderOptions.defines.join("\n"):"";r=this._scene.getEngine().createEffectForParticles(o.shaderPath.fragmentElement,o.shaderOptions.uniforms,o.shaderOptions.samplers,s)}var a=new e(i,this._capacity,this._scene,r);return a.customShader=o,t.Tools.DeepCopy(this,a,["particles","customShader"]),void 0===n&&(n=this.emitter),a.emitter=n,this.particleTexture&&(a.particleTexture=new t.Texture(this.particleTexture.url,this._scene)),this.preventAutoStart||a.start(),a},e.prototype.serialize=function(){var e={};if(e.name=this.name,e.id=this.id,this.emitter.position){var i=this.emitter;e.emitterId=i.id}else{var n=this.emitter;e.emitter=n.asArray()}return e.capacity=this.getCapacity(),this.particleTexture&&(e.textureName=this.particleTexture.name),t.Animation.AppendSerializedAnimations(this,e),e.minAngularSpeed=this.minAngularSpeed,e.maxAngularSpeed=this.maxAngularSpeed,e.minSize=this.minSize,e.maxSize=this.maxSize,e.minEmitPower=this.minEmitPower,e.maxEmitPower=this.maxEmitPower,e.minLifeTime=this.minLifeTime,e.maxLifeTime=this.maxLifeTime,e.emitRate=this.emitRate,e.minEmitBox=this.minEmitBox.asArray(),e.maxEmitBox=this.maxEmitBox.asArray(),e.gravity=this.gravity.asArray(),e.direction1=this.direction1.asArray(),e.direction2=this.direction2.asArray(),e.color1=this.color1.asArray(),e.color2=this.color2.asArray(),e.colorDead=this.colorDead.asArray(),e.updateSpeed=this.updateSpeed,e.targetStopDuration=this.targetStopDuration,e.textureMask=this.textureMask.asArray(),e.blendMode=this.blendMode,e.customShader=this.customShader,e.preventAutoStart=this.preventAutoStart,e.startSpriteCellID=this.startSpriteCellID,e.endSpriteCellID=this.endSpriteCellID,e.spriteCellLoop=this.spriteCellLoop,e.spriteCellChangeSpeed=this.spriteCellChangeSpeed,e.spriteCellWidth=this.spriteCellWidth,e.spriteCellHeight=this.spriteCellHeight,e.isAnimationSheetEnabled=this._isAnimationSheetEnabled,e},e.Parse=function(i,n,r){var o=i.name,s=null,a=null;if(i.customShader){var l=(a=i.customShader).shaderOptions.defines.length>0?a.shaderOptions.defines.join("\n"):"";s=n.getEngine().createEffectForParticles(a.shaderPath.fragmentElement,a.shaderOptions.uniforms,a.shaderOptions.samplers,l)}var c=new e(o,i.capacity,n,s,i.isAnimationSheetEnabled);if(c.customShader=a,i.id&&(c.id=i.id),i.preventAutoStart&&(c.preventAutoStart=i.preventAutoStart),i.textureName&&(c.particleTexture=new t.Texture(r+i.textureName,n),c.particleTexture.name=i.textureName),i.emitterId?c.emitter=n.getLastMeshByID(i.emitterId):c.emitter=t.Vector3.FromArray(i.emitter),i.animations)for(var u=0;u<i.animations.length;u++){var h=i.animations[u];c.animations.push(t.Animation.Parse(h))}return i.autoAnimate&&n.beginAnimation(c,i.autoAnimateFrom,i.autoAnimateTo,i.autoAnimateLoop,i.autoAnimateSpeed||1),c.minAngularSpeed=i.minAngularSpeed,c.maxAngularSpeed=i.maxAngularSpeed,c.minSize=i.minSize,c.maxSize=i.maxSize,c.minLifeTime=i.minLifeTime,c.maxLifeTime=i.maxLifeTime,c.minEmitPower=i.minEmitPower,c.maxEmitPower=i.maxEmitPower,c.emitRate=i.emitRate,c.minEmitBox=t.Vector3.FromArray(i.minEmitBox),c.maxEmitBox=t.Vector3.FromArray(i.maxEmitBox),c.gravity=t.Vector3.FromArray(i.gravity),c.direction1=t.Vector3.FromArray(i.direction1),c.direction2=t.Vector3.FromArray(i.direction2),c.color1=t.Color4.FromArray(i.color1),c.color2=t.Color4.FromArray(i.color2),c.colorDead=t.Color4.FromArray(i.colorDead),c.updateSpeed=i.updateSpeed,c.targetStopDuration=i.targetStopDuration,c.textureMask=t.Color4.FromArray(i.textureMask),c.blendMode=i.blendMode,c.startSpriteCellID=i.startSpriteCellID,c.endSpriteCellID=i.endSpriteCellID,c.spriteCellLoop=i.spriteCellLoop,c.spriteCellChangeSpeed=i.spriteCellChangeSpeed,c.spriteCellWidth=i.spriteCellWidth,c.spriteCellHeight=i.spriteCellHeight,c.preventAutoStart||c.start(),c},e.BLENDMODE_ONEONE=0,e.BLENDMODE_STANDARD=1,e}();t.ParticleSystem=e}(l||(l={})),function(t){var e=function(){function e(t){this._particleSystem=t}return Object.defineProperty(e.prototype,"direction1",{get:function(){return this._particleSystem.direction1},set:function(t){this._particleSystem.direction1=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction2",{get:function(){return this._particleSystem.direction2},set:function(t){this._particleSystem.direction2=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minEmitBox",{get:function(){return this._particleSystem.minEmitBox},set:function(t){this._particleSystem.minEmitBox=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxEmitBox",{get:function(){return this._particleSystem.maxEmitBox},set:function(t){this._particleSystem.maxEmitBox=t},enumerable:!0,configurable:!0}),e.prototype.startDirectionFunction=function(e,i,n,r){var o=t.Scalar.RandomRange(this.direction1.x,this.direction2.x),s=t.Scalar.RandomRange(this.direction1.y,this.direction2.y),a=t.Scalar.RandomRange(this.direction1.z,this.direction2.z);t.Vector3.TransformNormalFromFloatsToRef(o*e,s*e,a*e,i,n)},e.prototype.startPositionFunction=function(e,i,n){var r=t.Scalar.RandomRange(this.minEmitBox.x,this.maxEmitBox.x),o=t.Scalar.RandomRange(this.minEmitBox.y,this.maxEmitBox.y),s=t.Scalar.RandomRange(this.minEmitBox.z,this.maxEmitBox.z);t.Vector3.TransformCoordinatesFromFloatsToRef(r,o,s,e,i)},e.prototype.clone=function(){var i=new e(this._particleSystem);return t.Tools.DeepCopy(this,i),i},e}();t.BoxParticleEmitter=e}(l||(l={})),function(t){var e=function(){function e(t,e,i){void 0===i&&(i=0),this.angle=e,this.directionRandomizer=i,this.radius=t}return Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,0!==this.angle?this._height=t/Math.tan(this.angle/2):this._height=1},enumerable:!0,configurable:!0}),e.prototype.startDirectionFunction=function(e,i,n,r){if(0===this.angle)t.Vector3.TransformNormalFromFloatsToRef(0,e,0,i,n);else{var o=r.position.subtract(i.getTranslation()).normalize(),s=t.Scalar.RandomRange(0,this.directionRandomizer),a=t.Scalar.RandomRange(0,this.directionRandomizer),l=t.Scalar.RandomRange(0,this.directionRandomizer);o.x+=s,o.y+=a,o.z+=l,o.normalize(),t.Vector3.TransformNormalFromFloatsToRef(o.x*e,o.y*e,o.z*e,i,n)}},e.prototype.startPositionFunction=function(e,i,n){var r=t.Scalar.RandomRange(0,2*Math.PI),o=t.Scalar.RandomRange(0,1);o=1-o*o;var s=t.Scalar.RandomRange(0,this._radius),a=(s=s*o/this._height)*Math.sin(r),l=s*Math.cos(r),c=o;t.Vector3.TransformCoordinatesFromFloatsToRef(a,c,l,e,i)},e.prototype.clone=function(){var i=new e(this.radius,this.angle,this.directionRandomizer);return t.Tools.DeepCopy(this,i),i},e}();t.ConeParticleEmitter=e}(l||(l={})),function(t){var e=function(){function e(t,e){void 0===e&&(e=0),this.radius=t,this.directionRandomizer=e}return e.prototype.startDirectionFunction=function(e,i,n,r){var o=r.position.subtract(i.getTranslation()).normalize(),s=t.Scalar.RandomRange(0,this.directionRandomizer),a=t.Scalar.RandomRange(0,this.directionRandomizer),l=t.Scalar.RandomRange(0,this.directionRandomizer);o.x+=s,o.y+=a,o.z+=l,o.normalize(),t.Vector3.TransformNormalFromFloatsToRef(o.x*e,o.y*e,o.z*e,i,n)},e.prototype.startPositionFunction=function(e,i,n){var r=t.Scalar.RandomRange(0,2*Math.PI),o=t.Scalar.RandomRange(0,Math.PI),s=this.radius*Math.cos(r)*Math.sin(o),a=this.radius*Math.cos(o),l=this.radius*Math.sin(r)*Math.sin(o);t.Vector3.TransformCoordinatesFromFloatsToRef(s,a,l,e,i)},e.prototype.clone=function(){var i=new e(this.radius,this.directionRandomizer);return t.Tools.DeepCopy(this,i),i},e}();t.SphereParticleEmitter=e;var i=function(e){function i(t,i,n){var r=e.call(this,t)||this;return r.direction1=i,r.direction2=n,r}return o(i,e),i.prototype.startDirectionFunction=function(e,i,n,r){var o=t.Scalar.RandomRange(this.direction1.x,this.direction2.x),s=t.Scalar.RandomRange(this.direction1.y,this.direction2.y),a=t.Scalar.RandomRange(this.direction1.z,this.direction2.z);t.Vector3.TransformNormalFromFloatsToRef(o*e,s*e,a*e,i,n)},i.prototype.clone=function(){var e=new i(this.radius,this.direction1,this.direction2);return t.Tools.DeepCopy(this,e),e},i}(e);t.SphereDirectedParticleEmitter=i}(l||(l={})),function(t){var e=function(){function e(e,i,n){this.emitter=null,this.renderingGroupId=0,this.layerMask=268435455,this._updateVertexBuffers={},this._renderVertexBuffers={},this._currentRenderId=-1,this._started=!0,this.onDisposeObservable=new t.Observable,this.id=e,this.name=e,this._scene=n||t.Engine.LastCreatedScene,this._capacity=i,this._engine=this._scene.getEngine(),this._scene.particleSystems.push(this),this._renderEffect=new t.Effect("gpuRenderParticles",["position","age","life","velocity"],[],[],this._scene.getEngine());this._updateEffect=new t.Effect("gpuUpdateParticles",{attributes:["position","age","life","velocity"],uniformsNames:[],uniformBuffersNames:[],samplers:[],defines:"",fallbacks:null,onCompiled:null,onError:null,indexParameters:null,maxSimultaneousLights:0,transformFeedbackVaryings:["outPosition","outAge","outLife","outVelocity"]},this._scene.getEngine())}return e.prototype.isStarted=function(){return this._started},e.prototype.start=function(){this._started=!0},e.prototype.stop=function(){this._started=!1},e.prototype.animate=function(){},e.prototype._initialize=function(){if(!this._renderVAO){for(var e=new Array,i=0;i<this._capacity;i++){e.push(0),e.push(0),e.push(0);var n=1+10*Math.random();e.push(n+1),e.push(n),e.push(0),e.push(0),e.push(0)}this._updateBuffer=new t.Buffer(this._scene.getEngine(),e,!1,0),this._updateVertexBuffers.position=this._updateBuffer.createVertexBuffer("position",0,3,3),this._updateVertexBuffers.age=this._updateBuffer.createVertexBuffer("age",3,1,1),this._updateVertexBuffers.life=this._updateBuffer.createVertexBuffer("life",4,1,1),this._updateVertexBuffers.velocity=this._updateBuffer.createVertexBuffer("velocity",5,3,3),this._updateVAO=this._engine.recordVertexArrayObject(this._updateVertexBuffers,null,this._updateEffect),this._engine.bindArrayBuffer(null),this._renderBuffer=new t.Buffer(this._scene.getEngine(),e,!1,0),this._renderVertexBuffers.position=this._renderBuffer.createVertexBuffer("position",0,3,3),this._renderVertexBuffers.age=this._renderBuffer.createVertexBuffer("age",3,1,1),this._renderVertexBuffers.life=this._renderBuffer.createVertexBuffer("life",4,1,1),this._renderVertexBuffers.velocity=this._renderBuffer.createVertexBuffer("velocity",5,3,3),this._renderVAO=this._engine.recordVertexArrayObject(this._renderVertexBuffers,null,this._renderEffect),this._engine.bindArrayBuffer(null),this._sourceVAO=this._updateVAO,this._targetVAO=this._renderVAO,this._sourceBuffer=this._updateBuffer,this._targetBuffer=this._renderBuffer}},e.prototype.render=function(){if(!this.emitter||!this._updateEffect.isReady()||!this._renderEffect.isReady())return 0;if(this._initialize(),this._currentRenderId===this._scene.getRenderId())return 0;this._currentRenderId=this._scene.getRenderId(),this._engine.enableEffect(this._updateEffect),this._engine.setState(!1),this._engine.bindVertexArrayObject(this._sourceVAO,null),this._engine.bindTransformFeedbackBuffer(this._targetBuffer.getBuffer()),this._engine.setRasterizerState(!1),this._engine.beginTransformFeedback(),this._engine.drawArraysType(t.Material.PointListDrawMode,0,this._capacity),this._engine.endTransformFeedback(),this._engine.setRasterizerState(!0),this._engine.bindTransformFeedbackBuffer(null),this._engine.enableEffect(this._renderEffect),this._engine.bindVertexArrayObject(this._targetVAO,null),this._engine.drawArraysType(t.Material.PointListDrawMode,0,this._capacity);var e=this._sourceVAO;this._sourceVAO=this._targetVAO,this._targetVAO=e;var i=this._sourceBuffer;return this._sourceBuffer=this._targetBuffer,this._targetBuffer=i,0},e.prototype.rebuild=function(){},e.prototype.dispose=function(){var t=this._scene.particleSystems.indexOf(this);t>-1&&this._scene.particleSystems.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},e.prototype.clone=function(t,e){return null},e.prototype.serialize=function(){},e}();t.GPUParticleSystem=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o,s,a,l){void 0===l&&(l=null),this.idx=0,this.color=new t.Color4(1,1,1,1),this.position=t.Vector3.Zero(),this.rotation=t.Vector3.Zero(),this.scaling=t.Vector3.One(),this.uvs=new t.Vector4(0,0,1,1),this.velocity=t.Vector3.Zero(),this.pivot=t.Vector3.Zero(),this.translateFromPivot=!1,this.alive=!0,this.isVisible=!0,this._pos=0,this._ind=0,this.shapeId=0,this.idxInShape=0,this._stillInvisible=!1,this._rotationMatrix=[1,0,0,0,1,0,0,0,1],this.idx=e,this._pos=i,this._ind=n,this._model=r,this.shapeId=o,this.idxInShape=s,this._sps=a,l&&(this._modelBoundingInfo=l,this._boundingInfo=new t.BoundingInfo(l.minimum,l.maximum))}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaling},set:function(t){this.scaling=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quaternion",{get:function(){return this.rotationQuaternion},set:function(t){this.rotationQuaternion=t},enumerable:!0,configurable:!0}),e.prototype.intersectsMesh=function(e){return!(!this._boundingInfo||!e._boundingInfo)&&(this._sps._bSphereOnly?t.BoundingSphere.Intersects(this._boundingInfo.boundingSphere,e._boundingInfo.boundingSphere):this._boundingInfo.intersects(e._boundingInfo,!1))},e}();t.SolidParticle=e;var i=function(){return function(t,e,i,n,r,o){this._indicesLength=0,this.shapeID=t,this._shape=e,this._indicesLength=i,this._shapeUV=n,this._positionFunction=r,this._vertexFunction=o}}();t.ModelShape=i;var n=function(){return function(){this.ind=0,this.indicesLength=0,this.sqDistance=0}}();t.DepthSortedParticle=n}(l||(l={})),function(t){var e=function(){function e(e,i,n){this.particles=new Array,this.nbParticles=0,this.billboard=!1,this.recomputeNormals=!0,this.counter=0,this.vars={},this._bSphereOnly=!1,this._bSphereRadiusFactor=1,this._positions=new Array,this._indices=new Array,this._normals=new Array,this._colors=new Array,this._uvs=new Array,this._index=0,this._updatable=!0,this._pickable=!1,this._isVisibilityBoxLocked=!1,this._alwaysVisible=!1,this._depthSort=!1,this._shapeCounter=0,this._copy=new t.SolidParticle(0,0,0,null,0,0,this),this._color=new t.Color4(0,0,0,0),this._computeParticleColor=!0,this._computeParticleTexture=!0,this._computeParticleRotation=!0,this._computeParticleVertex=!1,this._computeBoundingBox=!1,this._depthSortParticles=!0,this._cam_axisZ=t.Vector3.Zero(),this._cam_axisY=t.Vector3.Zero(),this._cam_axisX=t.Vector3.Zero(),this._axisZ=t.Axis.Z,this._camDir=t.Vector3.Zero(),this._camInvertedPosition=t.Vector3.Zero(),this._rotMatrix=new t.Matrix,this._invertMatrix=new t.Matrix,this._rotated=t.Vector3.Zero(),this._quaternion=new t.Quaternion,this._vertex=t.Vector3.Zero(),this._normal=t.Vector3.Zero(),this._yaw=0,this._pitch=0,this._roll=0,this._halfroll=0,this._halfpitch=0,this._halfyaw=0,this._sinRoll=0,this._cosRoll=0,this._sinPitch=0,this._cosPitch=0,this._sinYaw=0,this._cosYaw=0,this._mustUnrotateFixedNormals=!1,this._minimum=t.Vector3.Zero(),this._maximum=t.Vector3.Zero(),this._minBbox=t.Vector3.Zero(),this._maxBbox=t.Vector3.Zero(),this._particlesIntersect=!1,this._depthSortFunction=function(t,e){return e.sqDistance-t.sqDistance},this._needs32Bits=!1,this._pivotBackTranslation=t.Vector3.Zero(),this.name=e,this._scene=i||t.Engine.LastCreatedScene,this._camera=i.activeCamera,this._pickable=!!n&&n.isPickable,this._depthSort=!!n&&n.enableDepthSort,this._particlesIntersect=!!n&&n.particleIntersection,this._bSphereOnly=!!n&&n.boundingSphereOnly,this._bSphereRadiusFactor=n&&n.bSphereRadiusFactor?n.bSphereRadiusFactor:1,n&&n.updatable?this._updatable=n.updatable:this._updatable=!0,this._pickable&&(this.pickedParticles=[]),this._depthSort&&(this.depthSortedParticles=[])}return e.prototype.buildMesh=function(){if(0===this.nbParticles){var e=t.MeshBuilder.CreateDisc("",{radius:1,tessellation:3},this._scene);this.addShape(e,1),e.dispose()}this._indices32=this._needs32Bits?new Uint32Array(this._indices):new Uint16Array(this._indices),this._positions32=new Float32Array(this._positions),this._uvs32=new Float32Array(this._uvs),this._colors32=new Float32Array(this._colors),this.recomputeNormals&&t.VertexData.ComputeNormals(this._positions32,this._indices32,this._normals),this._normals32=new Float32Array(this._normals),this._fixedNormal32=new Float32Array(this._normals),this._mustUnrotateFixedNormals&&this._unrotateFixedNormals();var i=new t.VertexData;i.indices=this._depthSort?this._indices:this._indices32,i.set(this._positions32,t.VertexBuffer.PositionKind),i.set(this._normals32,t.VertexBuffer.NormalKind),this._uvs32&&i.set(this._uvs32,t.VertexBuffer.UVKind),this._colors32&&i.set(this._colors32,t.VertexBuffer.ColorKind);var n=new t.Mesh(this.name,this._scene);return i.applyToMesh(n,this._updatable),this.mesh=n,this.mesh.isPickable=this._pickable,this._depthSort||(this._indices=null),this._positions=null,this._normals=null,this._uvs=null,this._colors=null,this._updatable||(this.particles.length=0),n},e.prototype.digest=function(e,i){var n=i&&i.facetNb||1,r=i&&i.number||0,o=i&&i.delta||0,s=e.getVerticesData(t.VertexBuffer.PositionKind),a=e.getIndices(),l=e.getVerticesData(t.VertexBuffer.UVKind),c=e.getVerticesData(t.VertexBuffer.ColorKind),u=e.getVerticesData(t.VertexBuffer.NormalKind),h=0,p=a.length/3;r?(r=r>p?p:r,n=Math.round(p/r),o=0):n=n>p?p:n;for(var d=[],f=[],m=[],g=[],y=t.Vector3.Zero(),_=n;h<p;){h>p-(n=_+Math.floor((1+o)*Math.random()))&&(n=p-h),d.length=0,f.length=0,m.length=0,g.length=0;for(var v=0,b=3*h;b<3*(h+n);b++){f.push(v);var x=a[b];d.push(s[3*x],s[3*x+1],s[3*x+2]),l&&m.push(l[2*x],l[2*x+1]),c&&g.push(c[4*x],c[4*x+1],c[4*x+2],c[4*x+3]),v++}var A,w,P=this.nbParticles,E=this._posToShape(d),T=this._uvsToShapeUV(m);for(A=0;A<E.length;A++)y.addInPlace(E[A]);for(y.scaleInPlace(1/E.length),A=0;A<E.length;A++)E[A].subtractInPlace(y);this._particlesIntersect&&(w=new t.BoundingInfo(y,y));var S=new t.ModelShape(this._shapeCounter,E,3*n,T,null,null),C=this._positions.length,O=this._indices.length;this._meshBuilder(this._index,E,this._positions,f,this._indices,m,this._uvs,g,this._colors,u,this._normals,P,0,null),this._addParticle(P,C,O,S,this._shapeCounter,0,w),this.particles[this.nbParticles].position.addInPlace(y),this._index+=E.length,P++,this.nbParticles++,this._shapeCounter++,h+=n}return this},e.prototype._unrotateFixedNormals=function(){for(var e=0,i=0,n=0;n<this.particles.length;n++){this._particle=this.particles[n],this._shape=this._particle._model._shape,this._particle.rotationQuaternion?this._quaternion.copyFrom(this._particle.rotationQuaternion):(this._yaw=this._particle.rotation.y,this._pitch=this._particle.rotation.x,this._roll=this._particle.rotation.z,this._quaternionRotationYPR()),this._quaternionToRotationMatrix(),this._rotMatrix.invertToRef(this._invertMatrix);for(var r=0;r<this._shape.length;r++)i=e+3*r,t.Vector3.TransformNormalFromFloatsToRef(this._normals32[i],this._normals32[i+1],this._normals32[i+2],this._invertMatrix,this._normal),this._fixedNormal32[i]=this._normal.x,this._fixedNormal32[i+1]=this._normal.y,this._fixedNormal32[i+2]=this._normal.z;e=i+3}},e.prototype._resetCopy=function(){this._copy.position.x=0,this._copy.position.y=0,this._copy.position.z=0,this._copy.rotation.x=0,this._copy.rotation.y=0,this._copy.rotation.z=0,this._copy.rotationQuaternion=null,this._copy.scaling.x=1,this._copy.scaling.y=1,this._copy.scaling.z=1,this._copy.uvs.x=0,this._copy.uvs.y=0,this._copy.uvs.z=1,this._copy.uvs.w=1,this._copy.color=null,this._copy.translateFromPivot=!1},e.prototype._meshBuilder=function(e,i,n,r,o,s,a,l,c,u,h,p,d,f){var m,g=0,y=0,_=0;for(this._resetCopy(),f&&f.positionFunction&&(f.positionFunction(this._copy,p,d),this._mustUnrotateFixedNormals=!0),this._copy.rotationQuaternion?this._quaternion.copyFrom(this._copy.rotationQuaternion):(this._yaw=this._copy.rotation.y,this._pitch=this._copy.rotation.x,this._roll=this._copy.rotation.z,this._quaternionRotationYPR()),this._quaternionToRotationMatrix(),this._copy.translateFromPivot?this._pivotBackTranslation.copyFromFloats(0,0,0):this._pivotBackTranslation.copyFrom(this._copy.pivot),m=0;m<i.length;m++)this._vertex.x=i[m].x,this._vertex.y=i[m].y,this._vertex.z=i[m].z,f&&f.vertexFunction&&f.vertexFunction(this._copy,this._vertex,m),this._vertex.x*=this._copy.scaling.x,this._vertex.y*=this._copy.scaling.y,this._vertex.z*=this._copy.scaling.z,this._vertex.x-=this._copy.pivot.x,this._vertex.y-=this._copy.pivot.y,this._vertex.z-=this._copy.pivot.z,t.Vector3.TransformCoordinatesToRef(this._vertex,this._rotMatrix,this._rotated),this._rotated.addInPlace(this._pivotBackTranslation),n.push(this._copy.position.x+this._rotated.x,this._copy.position.y+this._rotated.y,this._copy.position.z+this._rotated.z),s&&(a.push((this._copy.uvs.z-this._copy.uvs.x)*s[g]+this._copy.uvs.x,(this._copy.uvs.w-this._copy.uvs.y)*s[g+1]+this._copy.uvs.y),g+=2),this._copy.color?this._color=this._copy.color:l&&void 0!==l[y]?(this._color.r=l[y],this._color.g=l[y+1],this._color.b=l[y+2],this._color.a=l[y+3]):(this._color.r=1,this._color.g=1,this._color.b=1,this._color.a=1),c.push(this._color.r,this._color.g,this._color.b,this._color.a),y+=4,!this.recomputeNormals&&u&&(this._normal.x=u[_],this._normal.y=u[_+1],this._normal.z=u[_+2],t.Vector3.TransformNormalToRef(this._normal,this._rotMatrix,this._normal),h.push(this._normal.x,this._normal.y,this._normal.z),_+=3);for(m=0;m<r.length;m++){var v=e+r[m];o.push(v),v>65535&&(this._needs32Bits=!0)}if(this._pickable){var b=r.length/3;for(m=0;m<b;m++)this.pickedParticles.push({idx:p,faceId:m})}return this._depthSort&&this.depthSortedParticles.push(new t.DepthSortedParticle),this._copy},e.prototype._posToShape=function(e){for(var i=[],n=0;n<e.length;n+=3)i.push(new t.Vector3(e[n],e[n+1],e[n+2]));return i},e.prototype._uvsToShapeUV=function(t){var e=[];if(t)for(var i=0;i<t.length;i++)e.push(t[i]);return e},e.prototype._addParticle=function(e,i,n,r,o,s,a){void 0===a&&(a=null);var l=new t.SolidParticle(e,i,n,r,o,s,this,a);return this.particles.push(l),l},e.prototype.addShape=function(e,i,n){var r,o=e.getVerticesData(t.VertexBuffer.PositionKind),s=e.getIndices(),a=e.getVerticesData(t.VertexBuffer.UVKind),l=e.getVerticesData(t.VertexBuffer.ColorKind),c=e.getVerticesData(t.VertexBuffer.NormalKind);this._particlesIntersect&&(r=e.getBoundingInfo());for(var u,h,p=this._posToShape(o),d=this._uvsToShapeUV(a),f=n?n.positionFunction:null,m=n?n.vertexFunction:null,g=new t.ModelShape(this._shapeCounter,p,s.length,d,f,m),y=this.nbParticles,_=0;_<i;_++){var v=this._positions.length,b=this._indices.length;h=this._meshBuilder(this._index,p,this._positions,s,this._indices,a,this._uvs,l,this._colors,c,this._normals,y,_,n),this._updatable&&((u=this._addParticle(y,v,b,g,this._shapeCounter,_,r)).position.copyFrom(h.position),u.rotation.copyFrom(h.rotation),h.rotationQuaternion&&u.rotationQuaternion&&u.rotationQuaternion.copyFrom(h.rotationQuaternion),h.color&&u.color&&u.color.copyFrom(h.color),u.scaling.copyFrom(h.scaling),u.uvs.copyFrom(h.uvs)),this._index+=p.length,y++}return this.nbParticles+=i,++this._shapeCounter-1},e.prototype._rebuildParticle=function(e){this._resetCopy(),e._model._positionFunction&&e._model._positionFunction(this._copy,e.idx,e.idxInShape),this._copy.rotationQuaternion?this._quaternion.copyFrom(this._copy.rotationQuaternion):(this._yaw=this._copy.rotation.y,this._pitch=this._copy.rotation.x,this._roll=this._copy.rotation.z,this._quaternionRotationYPR()),this._quaternionToRotationMatrix(),this._copy.translateFromPivot?this._pivotBackTranslation.copyFromFloats(0,0,0):this._pivotBackTranslation.copyFrom(this._copy.pivot),this._shape=e._model._shape;for(var i=0;i<this._shape.length;i++)this._vertex.x=this._shape[i].x,this._vertex.y=this._shape[i].y,this._vertex.z=this._shape[i].z,e._model._vertexFunction&&e._model._vertexFunction(this._copy,this._vertex,i),this._vertex.x*=this._copy.scaling.x,this._vertex.y*=this._copy.scaling.y,this._vertex.z*=this._copy.scaling.z,this._vertex.x-=this._copy.pivot.x,this._vertex.y-=this._copy.pivot.y,this._vertex.z-=this._copy.pivot.z,t.Vector3.TransformCoordinatesToRef(this._vertex,this._rotMatrix,this._rotated),this._rotated.addInPlace(this._pivotBackTranslation),this._positions32[e._pos+3*i]=this._copy.position.x+this._rotated.x,this._positions32[e._pos+3*i+1]=this._copy.position.y+this._rotated.y,this._positions32[e._pos+3*i+2]=this._copy.position.z+this._rotated.z;e.position.x=0,e.position.y=0,e.position.z=0,e.rotation.x=0,e.rotation.y=0,e.rotation.z=0,e.rotationQuaternion=null,e.scaling.x=1,e.scaling.y=1,e.scaling.z=1},e.prototype.rebuildMesh=function(){for(var e=0;e<this.particles.length;e++)this._rebuildParticle(this.particles[e]);return this.mesh.updateVerticesData(t.VertexBuffer.PositionKind,this._positions32,!1,!1),this},e.prototype.setParticles=function(e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=this.nbParticles-1),void 0===n&&(n=!0),!this._updatable)return this;if(this.beforeUpdateParticles(e,i,n),this._cam_axisX.x=1,this._cam_axisX.y=0,this._cam_axisX.z=0,this._cam_axisY.x=0,this._cam_axisY.y=1,this._cam_axisY.z=0,this._cam_axisZ.x=0,this._cam_axisZ.y=0,this._cam_axisZ.z=1,(this.billboard||this._depthSort)&&(this.mesh.computeWorldMatrix(!0),this.mesh._worldMatrix.invertToRef(this._invertMatrix)),this.billboard){this._camera.getDirectionToRef(this._axisZ,this._camDir),t.Vector3.TransformNormalToRef(this._camDir,this._invertMatrix,this._cam_axisZ),this._cam_axisZ.normalize();var r=this._camera.getViewMatrix(!0);t.Vector3.TransformNormalFromFloatsToRef(r.m[1],r.m[5],r.m[9],this._invertMatrix,this._cam_axisY),t.Vector3.CrossToRef(this._cam_axisY,this._cam_axisZ,this._cam_axisX),this._cam_axisY.normalize(),this._cam_axisX.normalize()}this._depthSort&&t.Vector3.TransformCoordinatesToRef(this._camera.globalPosition,this._invertMatrix,this._camInvertedPosition),t.Matrix.IdentityToRef(this._rotMatrix);var o=0,s=0,a=0,l=0,c=0,u=0,h=0;this.mesh.isFacetDataEnabled&&(this._computeBoundingBox=!0),i=i>=this.nbParticles?this.nbParticles-1:i,this._computeBoundingBox&&(0==e&&i==this.nbParticles-1?(t.Vector3.FromFloatsToRef(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,this._minimum),t.Vector3.FromFloatsToRef(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,this._maximum)):this.mesh._boundingInfo&&(this._minimum.copyFrom(this.mesh._boundingInfo.boundingBox.minimum),this._maximum.copyFrom(this.mesh._boundingInfo.boundingBox.maximum)));var p=(s=this.particles[e]._pos)/3|0;l=4*p,u=2*p;for(var d=e;d<=i;d++){if(this._particle=this.particles[d],this._shape=this._particle._model._shape,this._shapeUV=this._particle._model._shapeUV,this.updateParticle(this._particle),this._depthSort&&this._depthSortParticles){var f=this.depthSortedParticles[d];f.ind=this._particle._ind,f.indicesLength=this._particle._model._indicesLength,f.sqDistance=t.Vector3.DistanceSquared(this._particle.position,this._camInvertedPosition)}if(!this._particle.alive||this._particle._stillInvisible&&!this._particle.isVisible)s+=3*(h=this._shape.length),l+=4*h,u+=2*h;else{if(this._particle.isVisible)for(this._particle._stillInvisible=!1,this.billboard&&(this._particle.rotation.x=0,this._particle.rotation.y=0),(this._computeParticleRotation||this.billboard)&&(this._particle.rotationQuaternion?this._quaternion.copyFrom(this._particle.rotationQuaternion):(this._yaw=this._particle.rotation.y,this._pitch=this._particle.rotation.x,this._roll=this._particle.rotation.z,this._quaternionRotationYPR()),this._quaternionToRotationMatrix(),this._particle._rotationMatrix[0]=this._rotMatrix.m[0],this._particle._rotationMatrix[1]=this._rotMatrix.m[1],this._particle._rotationMatrix[2]=this._rotMatrix.m[2],this._particle._rotationMatrix[3]=this._rotMatrix.m[4],this._particle._rotationMatrix[4]=this._rotMatrix.m[5],this._particle._rotationMatrix[5]=this._rotMatrix.m[6],this._particle._rotationMatrix[6]=this._rotMatrix.m[8],this._particle._rotationMatrix[7]=this._rotMatrix.m[9],this._particle._rotationMatrix[8]=this._rotMatrix.m[10]),this._particle.translateFromPivot?(this._pivotBackTranslation.x=0,this._pivotBackTranslation.y=0,this._pivotBackTranslation.z=0):(this._pivotBackTranslation.x=this._particle.pivot.x,this._pivotBackTranslation.y=this._particle.pivot.y,this._pivotBackTranslation.z=this._particle.pivot.z),h=0;h<this._shape.length;h++)o=s+3*h,a=l+4*h,c=u+2*h,this._vertex.x=this._shape[h].x,this._vertex.y=this._shape[h].y,this._vertex.z=this._shape[h].z,this._computeParticleVertex&&this.updateParticleVertex(this._particle,this._vertex,h),this._vertex.x*=this._particle.scaling.x,this._vertex.y*=this._particle.scaling.y,this._vertex.z*=this._particle.scaling.z,this._vertex.x-=this._particle.pivot.x,this._vertex.y-=this._particle.pivot.y,this._vertex.z-=this._particle.pivot.z,this._rotated.x=this._vertex.x*this._particle._rotationMatrix[0]+this._vertex.y*this._particle._rotationMatrix[3]+this._vertex.z*this._particle._rotationMatrix[6],this._rotated.y=this._vertex.x*this._particle._rotationMatrix[1]+this._vertex.y*this._particle._rotationMatrix[4]+this._vertex.z*this._particle._rotationMatrix[7],this._rotated.z=this._vertex.x*this._particle._rotationMatrix[2]+this._vertex.y*this._particle._rotationMatrix[5]+this._vertex.z*this._particle._rotationMatrix[8],this._rotated.x+=this._pivotBackTranslation.x,this._rotated.y+=this._pivotBackTranslation.y,this._rotated.z+=this._pivotBackTranslation.z,this._positions32[o]=this._particle.position.x+this._cam_axisX.x*this._rotated.x+this._cam_axisY.x*this._rotated.y+this._cam_axisZ.x*this._rotated.z,this._positions32[o+1]=this._particle.position.y+this._cam_axisX.y*this._rotated.x+this._cam_axisY.y*this._rotated.y+this._cam_axisZ.y*this._rotated.z,this._positions32[o+2]=this._particle.position.z+this._cam_axisX.z*this._rotated.x+this._cam_axisY.z*this._rotated.y+this._cam_axisZ.z*this._rotated.z,this._computeBoundingBox&&(this._positions32[o]<this._minimum.x&&(this._minimum.x=this._positions32[o]),this._positions32[o]>this._maximum.x&&(this._maximum.x=this._positions32[o]),this._positions32[o+1]<this._minimum.y&&(this._minimum.y=this._positions32[o+1]),this._positions32[o+1]>this._maximum.y&&(this._maximum.y=this._positions32[o+1]),this._positions32[o+2]<this._minimum.z&&(this._minimum.z=this._positions32[o+2]),this._positions32[o+2]>this._maximum.z&&(this._maximum.z=this._positions32[o+2])),this._computeParticleVertex||(this._normal.x=this._fixedNormal32[o],this._normal.y=this._fixedNormal32[o+1],this._normal.z=this._fixedNormal32[o+2],this._rotated.x=this._normal.x*this._particle._rotationMatrix[0]+this._normal.y*this._particle._rotationMatrix[3]+this._normal.z*this._particle._rotationMatrix[6],this._rotated.y=this._normal.x*this._particle._rotationMatrix[1]+this._normal.y*this._particle._rotationMatrix[4]+this._normal.z*this._particle._rotationMatrix[7],this._rotated.z=this._normal.x*this._particle._rotationMatrix[2]+this._normal.y*this._particle._rotationMatrix[5]+this._normal.z*this._particle._rotationMatrix[8],this._normals32[o]=this._cam_axisX.x*this._rotated.x+this._cam_axisY.x*this._rotated.y+this._cam_axisZ.x*this._rotated.z,this._normals32[o+1]=this._cam_axisX.y*this._rotated.x+this._cam_axisY.y*this._rotated.y+this._cam_axisZ.y*this._rotated.z,this._normals32[o+2]=this._cam_axisX.z*this._rotated.x+this._cam_axisY.z*this._rotated.y+this._cam_axisZ.z*this._rotated.z),this._computeParticleColor&&this._particle.color&&(this._colors32[a]=this._particle.color.r,this._colors32[a+1]=this._particle.color.g,this._colors32[a+2]=this._particle.color.b,this._colors32[a+3]=this._particle.color.a),this._computeParticleTexture&&(this._uvs32[c]=this._shapeUV[2*h]*(this._particle.uvs.z-this._particle.uvs.x)+this._particle.uvs.x,this._uvs32[c+1]=this._shapeUV[2*h+1]*(this._particle.uvs.w-this._particle.uvs.y)+this._particle.uvs.y);else for(this._particle._stillInvisible=!0,h=0;h<this._shape.length;h++)o=s+3*h,a=l+4*h,c=u+2*h,this._positions32[o]=0,this._positions32[o+1]=0,this._positions32[o+2]=0,this._normals32[o]=0,this._normals32[o+1]=0,this._normals32[o+2]=0,this._computeParticleColor&&this._particle.color&&(this._colors32[a]=this._particle.color.r,this._colors32[a+1]=this._particle.color.g,this._colors32[a+2]=this._particle.color.b,this._colors32[a+3]=this._particle.color.a),this._computeParticleTexture&&(this._uvs32[c]=this._shapeUV[2*h]*(this._particle.uvs.z-this._particle.uvs.x)+this._particle.uvs.x,this._uvs32[c+1]=this._shapeUV[2*h+1]*(this._particle.uvs.w-this._particle.uvs.y)+this._particle.uvs.y);if(this._particlesIntersect){var m=this._particle._boundingInfo,g=m.boundingBox,y=m.boundingSphere;if(!this._bSphereOnly){for(var _=0;_<g.vectors.length;_++)this._vertex.x=this._particle._modelBoundingInfo.boundingBox.vectors[_].x*this._particle.scaling.x,this._vertex.y=this._particle._modelBoundingInfo.boundingBox.vectors[_].y*this._particle.scaling.y,this._vertex.z=this._particle._modelBoundingInfo.boundingBox.vectors[_].z*this._particle.scaling.z,this._rotated.x=this._vertex.x*this._particle._rotationMatrix[0]+this._vertex.y*this._particle._rotationMatrix[3]+this._vertex.z*this._particle._rotationMatrix[6],this._rotated.y=this._vertex.x*this._particle._rotationMatrix[1]+this._vertex.y*this._particle._rotationMatrix[4]+this._vertex.z*this._particle._rotationMatrix[7],this._rotated.z=this._vertex.x*this._particle._rotationMatrix[2]+this._vertex.y*this._particle._rotationMatrix[5]+this._vertex.z*this._particle._rotationMatrix[8],g.vectors[_].x=this._particle.position.x+this._cam_axisX.x*this._rotated.x+this._cam_axisY.x*this._rotated.y+this._cam_axisZ.x*this._rotated.z,g.vectors[_].y=this._particle.position.y+this._cam_axisX.y*this._rotated.x+this._cam_axisY.y*this._rotated.y+this._cam_axisZ.y*this._rotated.z,g.vectors[_].z=this._particle.position.z+this._cam_axisX.z*this._rotated.x+this._cam_axisY.z*this._rotated.y+this._cam_axisZ.z*this._rotated.z;g._update(this.mesh._worldMatrix)}this._minBbox.x=this._particle._modelBoundingInfo.minimum.x*this._particle.scaling.x,this._minBbox.y=this._particle._modelBoundingInfo.minimum.y*this._particle.scaling.y,this._minBbox.z=this._particle._modelBoundingInfo.minimum.z*this._particle.scaling.z,this._maxBbox.x=this._particle._modelBoundingInfo.maximum.x*this._particle.scaling.x,this._maxBbox.y=this._particle._modelBoundingInfo.maximum.y*this._particle.scaling.y,this._maxBbox.z=this._particle._modelBoundingInfo.maximum.z*this._particle.scaling.z,y.center.x=this._particle.position.x+.5*(this._minBbox.x+this._maxBbox.x),y.center.y=this._particle.position.y+.5*(this._minBbox.y+this._maxBbox.y),y.center.z=this._particle.position.z+.5*(this._minBbox.z+this._maxBbox.z),y.radius=.5*this._bSphereRadiusFactor*Math.sqrt((this._maxBbox.x-this._minBbox.x)*(this._maxBbox.x-this._minBbox.x)+(this._maxBbox.y-this._minBbox.y)*(this._maxBbox.y-this._minBbox.y)+(this._maxBbox.z-this._minBbox.z)*(this._maxBbox.z-this._minBbox.z)),y._update(this.mesh._worldMatrix)}s=o+3,l=a+4,u=c+2}}if(n){if(this._computeParticleColor&&this.mesh.updateVerticesData(t.VertexBuffer.ColorKind,this._colors32,!1,!1),this._computeParticleTexture&&this.mesh.updateVerticesData(t.VertexBuffer.UVKind,this._uvs32,!1,!1),this.mesh.updateVerticesData(t.VertexBuffer.PositionKind,this._positions32,!1,!1),!this.mesh.areNormalsFrozen||this.mesh.isFacetDataEnabled){if(this._computeParticleVertex||this.mesh.isFacetDataEnabled){var v=this.mesh.isFacetDataEnabled?this.mesh.getFacetDataParameters():null;t.VertexData.ComputeNormals(this._positions32,this._indices32,this._normals32,v);for(var b=0;b<this._normals32.length;b++)this._fixedNormal32[b]=this._normals32[b]}this.mesh.areNormalsFrozen||this.mesh.updateVerticesData(t.VertexBuffer.NormalKind,this._normals32,!1,!1)}if(this._depthSort&&this._depthSortParticles){this.depthSortedParticles.sort(this._depthSortFunction);var x=this.depthSortedParticles.length,A=0,w=0,P=0,E=0;for(A=0;A<x;A++){w=this.depthSortedParticles[A].indicesLength,P=this.depthSortedParticles[A].ind;for(b=0;b<w;b++)this._indices32[E]=this._indices[P+b],E++}this.mesh.updateIndices(this._indices32)}}return this._computeBoundingBox&&(this.mesh._boundingInfo=new t.BoundingInfo(this._minimum,this._maximum),this.mesh._boundingInfo.update(this.mesh._worldMatrix)),this.afterUpdateParticles(e,i,n),this},e.prototype._quaternionRotationYPR=function(){this._halfroll=.5*this._roll,this._halfpitch=.5*this._pitch,this._halfyaw=.5*this._yaw,this._sinRoll=Math.sin(this._halfroll),this._cosRoll=Math.cos(this._halfroll),this._sinPitch=Math.sin(this._halfpitch),this._cosPitch=Math.cos(this._halfpitch),this._sinYaw=Math.sin(this._halfyaw),this._cosYaw=Math.cos(this._halfyaw),this._quaternion.x=this._cosYaw*this._sinPitch*this._cosRoll+this._sinYaw*this._cosPitch*this._sinRoll,this._quaternion.y=this._sinYaw*this._cosPitch*this._cosRoll-this._cosYaw*this._sinPitch*this._sinRoll,this._quaternion.z=this._cosYaw*this._cosPitch*this._sinRoll-this._sinYaw*this._sinPitch*this._cosRoll,this._quaternion.w=this._cosYaw*this._cosPitch*this._cosRoll+this._sinYaw*this._sinPitch*this._sinRoll},e.prototype._quaternionToRotationMatrix=function(){this._rotMatrix.m[0]=1-2*(this._quaternion.y*this._quaternion.y+this._quaternion.z*this._quaternion.z),this._rotMatrix.m[1]=2*(this._quaternion.x*this._quaternion.y+this._quaternion.z*this._quaternion.w),this._rotMatrix.m[2]=2*(this._quaternion.z*this._quaternion.x-this._quaternion.y*this._quaternion.w),this._rotMatrix.m[3]=0,this._rotMatrix.m[4]=2*(this._quaternion.x*this._quaternion.y-this._quaternion.z*this._quaternion.w),this._rotMatrix.m[5]=1-2*(this._quaternion.z*this._quaternion.z+this._quaternion.x*this._quaternion.x),this._rotMatrix.m[6]=2*(this._quaternion.y*this._quaternion.z+this._quaternion.x*this._quaternion.w),this._rotMatrix.m[7]=0,this._rotMatrix.m[8]=2*(this._quaternion.z*this._quaternion.x+this._quaternion.y*this._quaternion.w),this._rotMatrix.m[9]=2*(this._quaternion.y*this._quaternion.z-this._quaternion.x*this._quaternion.w),this._rotMatrix.m[10]=1-2*(this._quaternion.y*this._quaternion.y+this._quaternion.x*this._quaternion.x),this._rotMatrix.m[11]=0,this._rotMatrix.m[12]=0,this._rotMatrix.m[13]=0,this._rotMatrix.m[14]=0,this._rotMatrix.m[15]=1},e.prototype.dispose=function(){this.mesh.dispose(),this.vars=null,this._positions=null,this._indices=null,this._normals=null,this._uvs=null,this._colors=null,this._indices32=null,this._positions32=null,this._normals32=null,this._fixedNormal32=null,this._uvs32=null,this._colors32=null,this.pickedParticles=null},e.prototype.refreshVisibleSize=function(){return this._isVisibilityBoxLocked||this.mesh.refreshBoundingInfo(),this},e.prototype.setVisibilityBox=function(e){var i=e/2;this.mesh._boundingInfo=new t.BoundingInfo(new t.Vector3(-i,-i,-i),new t.Vector3(i,i,i))},Object.defineProperty(e.prototype,"isAlwaysVisible",{get:function(){return this._alwaysVisible},set:function(t){this._alwaysVisible=t,this.mesh.alwaysSelectAsActiveMesh=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisibilityBoxLocked",{get:function(){return this._isVisibilityBoxLocked},set:function(t){this._isVisibilityBoxLocked=t,this.mesh.getBoundingInfo().isLocked=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleRotation",{get:function(){return this._computeParticleRotation},set:function(t){this._computeParticleRotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleColor",{get:function(){return this._computeParticleColor},set:function(t){this._computeParticleColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleTexture",{get:function(){return this._computeParticleTexture},set:function(t){this._computeParticleTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleVertex",{get:function(){return this._computeParticleVertex},set:function(t){this._computeParticleVertex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeBoundingBox",{get:function(){return this._computeBoundingBox},set:function(t){this._computeBoundingBox=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthSortParticles",{get:function(){return this._depthSortParticles},set:function(t){this._depthSortParticles=t},enumerable:!0,configurable:!0}),e.prototype.initParticles=function(){},e.prototype.recycleParticle=function(t){return t},e.prototype.updateParticle=function(t){return t},e.prototype.updateParticleVertex=function(t,e,i){return e},e.prototype.beforeUpdateParticles=function(t,e,i){},e.prototype.afterUpdateParticles=function(t,e,i){},e}();t.SolidParticleSystem=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,i,n)||this;return s._textures={},s._textureArrays={},s._floats={},s._ints={},s._floatsArrays={},s._colors3={},s._colors3Arrays={},s._colors4={},s._vectors2={},s._vectors3={},s._vectors4={},s._matrices={},s._matrices3x3={},s._matrices2x2={},s._vectors2Arrays={},s._vectors3Arrays={},s._cachedWorldViewMatrix=new t.Matrix,s._shaderPath=r,o.needAlphaBlending=o.needAlphaBlending||!1,o.needAlphaTesting=o.needAlphaTesting||!1,o.attributes=o.attributes||["position","normal","uv"],o.uniforms=o.uniforms||["worldViewProjection"],o.uniformBuffers=o.uniformBuffers||[],o.samplers=o.samplers||[],o.defines=o.defines||[],s._options=o,s}return o(i,e),i.prototype.getClassName=function(){return"ShaderMaterial"},i.prototype.needAlphaBlending=function(){return this._options.needAlphaBlending},i.prototype.needAlphaTesting=function(){return this._options.needAlphaTesting},i.prototype._checkUniform=function(t){-1===this._options.uniforms.indexOf(t)&&this._options.uniforms.push(t)},i.prototype.setTexture=function(t,e){return-1===this._options.samplers.indexOf(t)&&this._options.samplers.push(t),this._textures[t]=e,this},i.prototype.setTextureArray=function(t,e){return-1===this._options.samplers.indexOf(t)&&this._options.samplers.push(t),this._checkUniform(t),this._textureArrays[t]=e,this},i.prototype.setFloat=function(t,e){return this._checkUniform(t),this._floats[t]=e,this},i.prototype.setInt=function(t,e){return this._checkUniform(t),this._ints[t]=e,this},i.prototype.setFloats=function(t,e){return this._checkUniform(t),this._floatsArrays[t]=e,this},i.prototype.setColor3=function(t,e){return this._checkUniform(t),this._colors3[t]=e,this},i.prototype.setColor3Array=function(t,e){return this._checkUniform(t),this._colors3Arrays[t]=e.reduce(function(t,e){return e.toArray(t,t.length),t},[]),this},i.prototype.setColor4=function(t,e){return this._checkUniform(t),this._colors4[t]=e,this},i.prototype.setVector2=function(t,e){return this._checkUniform(t),this._vectors2[t]=e,this},i.prototype.setVector3=function(t,e){return this._checkUniform(t),this._vectors3[t]=e,this},i.prototype.setVector4=function(t,e){return this._checkUniform(t),this._vectors4[t]=e,this},i.prototype.setMatrix=function(t,e){return this._checkUniform(t),this._matrices[t]=e,this},i.prototype.setMatrix3x3=function(t,e){return this._checkUniform(t),this._matrices3x3[t]=e,this},i.prototype.setMatrix2x2=function(t,e){return this._checkUniform(t),this._matrices2x2[t]=e,this},i.prototype.setArray2=function(t,e){return this._checkUniform(t),this._vectors2Arrays[t]=e,this},i.prototype.setArray3=function(t,e){return this._checkUniform(t),this._vectors3Arrays[t]=e,this},i.prototype._checkCache=function(t,e,i){return!e||(this._effect&&this._effect.defines.indexOf("#define INSTANCES"),!1)},i.prototype.isReady=function(e,i){var n=this.getScene(),r=n.getEngine();if(!this.checkReadyOnEveryCall&&this._renderId===n.getRenderId()&&this._checkCache(n,e,i))return!0;var o=[],s=[],a=new t.EffectFallbacks;i&&o.push("#define INSTANCES");for(var l=0;l<this._options.defines.length;l++)o.push(this._options.defines[l]);for(l=0;l<this._options.attributes.length;l++)s.push(this._options.attributes[l]);for(var c in e&&e.isVerticesDataPresent(t.VertexBuffer.ColorKind)&&(s.push(t.VertexBuffer.ColorKind),o.push("#define VERTEXCOLOR")),e&&e.useBones&&e.computeBonesUsingShaders&&e.skeleton?(s.push(t.VertexBuffer.MatricesIndicesKind),s.push(t.VertexBuffer.MatricesWeightsKind),e.numBoneInfluencers>4&&(s.push(t.VertexBuffer.MatricesIndicesExtraKind),s.push(t.VertexBuffer.MatricesWeightsExtraKind)),o.push("#define NUM_BONE_INFLUENCERS "+e.numBoneInfluencers),o.push("#define BonesPerMesh "+(e.skeleton.bones.length+1)),a.addCPUSkinningFallback(0,e),-1===this._options.uniforms.indexOf("mBones")&&this._options.uniforms.push("mBones")):o.push("#define NUM_BONE_INFLUENCERS 0"),this._textures)if(!this._textures[c].isReady())return!1;e&&this._shouldTurnAlphaTestOn(e)&&o.push("#define ALPHATEST");var u=this._effect,h=o.join("\n");return this._effect=r.createEffect(this._shaderPath,{attributes:s,uniformsNames:this._options.uniforms,uniformBuffersNames:this._options.uniformBuffers,samplers:this._options.samplers,defines:h,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError},r),!!this._effect.isReady()&&(u!==this._effect&&n.resetCachedMaterial(),this._renderId=n.getRenderId(),!0)},i.prototype.bindOnlyWorldMatrix=function(t){var e=this.getScene();this._effect&&(-1!==this._options.uniforms.indexOf("world")&&this._effect.setMatrix("world",t),-1!==this._options.uniforms.indexOf("worldView")&&(t.multiplyToRef(e.getViewMatrix(),this._cachedWorldViewMatrix),this._effect.setMatrix("worldView",this._cachedWorldViewMatrix)),-1!==this._options.uniforms.indexOf("worldViewProjection")&&this._effect.setMatrix("worldViewProjection",t.multiply(e.getTransformMatrix())))},i.prototype.bind=function(e,i){if(this.bindOnlyWorldMatrix(e),this._effect&&this.getScene().getCachedMaterial()!==this){var n;for(n in-1!==this._options.uniforms.indexOf("view")&&this._effect.setMatrix("view",this.getScene().getViewMatrix()),-1!==this._options.uniforms.indexOf("projection")&&this._effect.setMatrix("projection",this.getScene().getProjectionMatrix()),-1!==this._options.uniforms.indexOf("viewProjection")&&this._effect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),t.MaterialHelper.BindBonesParameters(i,this._effect),this._textures)this._effect.setTexture(n,this._textures[n]);for(n in this._textureArrays)this._effect.setTextureArray(n,this._textureArrays[n]);for(n in this._ints)this._effect.setInt(n,this._ints[n]);for(n in this._floats)this._effect.setFloat(n,this._floats[n]);for(n in this._floatsArrays)this._effect.setArray(n,this._floatsArrays[n]);for(n in this._colors3)this._effect.setColor3(n,this._colors3[n]);for(n in this._colors3Arrays)this._effect.setArray3(n,this._colors3Arrays[n]);for(n in this._colors4){var r=this._colors4[n];this._effect.setFloat4(n,r.r,r.g,r.b,r.a)}for(n in this._vectors2)this._effect.setVector2(n,this._vectors2[n]);for(n in this._vectors3)this._effect.setVector3(n,this._vectors3[n]);for(n in this._vectors4)this._effect.setVector4(n,this._vectors4[n]);for(n in this._matrices)this._effect.setMatrix(n,this._matrices[n]);for(n in this._matrices3x3)this._effect.setMatrix3x3(n,this._matrices3x3[n]);for(n in this._matrices2x2)this._effect.setMatrix2x2(n,this._matrices2x2[n]);for(n in this._vectors2Arrays)this._effect.setArray2(n,this._vectors2Arrays[n]);for(n in this._vectors3Arrays)this._effect.setArray3(n,this._vectors3Arrays[n])}this._afterBind(i)},i.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);for(var i in this._textures)t.push(this._textures[i]);for(var i in this._textureArrays)for(var n=this._textureArrays[i],r=0;r<n.length;r++)t.push(n[r]);return t},i.prototype.hasTexture=function(t){if(e.prototype.hasTexture.call(this,t))return!0;for(var i in this._textures)if(this._textures[i]===t)return!0;for(var i in this._textureArrays)for(var n=this._textureArrays[i],r=0;r<n.length;r++)if(n[r]===t)return!0;return!1},i.prototype.clone=function(t){return new i(t,this.getScene(),this._shaderPath,this._options)},i.prototype.dispose=function(t,i){if(i){var n;for(n in this._textures)this._textures[n].dispose();for(n in this._textureArrays)for(var r=this._textureArrays[n],o=0;o<r.length;o++)r[o].dispose()}this._textures={},e.prototype.dispose.call(this,t,i)},i.prototype.serialize=function(){var e,i=t.SerializationHelper.Serialize(this);for(e in i.customType="BABYLON.ShaderMaterial",i.options=this._options,i.shaderPath=this._shaderPath,i.textures={},this._textures)i.textures[e]=this._textures[e].serialize();for(e in i.textureArrays={},this._textureArrays){i.textureArrays[e]=[];for(var n=this._textureArrays[e],r=0;r<n.length;r++)i.textureArrays[e].push(n[r].serialize())}for(e in i.floats={},this._floats)i.floats[e]=this._floats[e];for(e in i.FloatArrays={},this._floatsArrays)i.FloatArrays[e]=this._floatsArrays[e];for(e in i.colors3={},this._colors3)i.colors3[e]=this._colors3[e].asArray();for(e in i.colors3Arrays={},this._colors3Arrays)i.colors3Arrays[e]=this._colors3Arrays[e];for(e in i.colors4={},this._colors4)i.colors4[e]=this._colors4[e].asArray();for(e in i.vectors2={},this._vectors2)i.vectors2[e]=this._vectors2[e].asArray();for(e in i.vectors3={},this._vectors3)i.vectors3[e]=this._vectors3[e].asArray();for(e in i.vectors4={},this._vectors4)i.vectors4[e]=this._vectors4[e].asArray();for(e in i.matrices={},this._matrices)i.matrices[e]=this._matrices[e].asArray();for(e in i.matrices3x3={},this._matrices3x3)i.matrices3x3[e]=this._matrices3x3[e];for(e in i.matrices2x2={},this._matrices2x2)i.matrices2x2[e]=this._matrices2x2[e];for(e in i.vectors2Arrays={},this._vectors2Arrays)i.vectors2Arrays[e]=this._vectors2Arrays[e];for(e in i.vectors3Arrays={},this._vectors3Arrays)i.vectors3Arrays[e]=this._vectors3Arrays[e];return i},i.Parse=function(e,n,r){var o,s=t.SerializationHelper.Parse(function(){return new i(e.name,n,e.shaderPath,e.options)},e,n,r);for(o in e.textures)s.setTexture(o,t.Texture.Parse(e.textures[o],n,r));for(o in e.textureArrays){for(var a=e.textureArrays[o],l=new Array,c=0;c<a.length;c++)l.push(t.Texture.Parse(a[c],n,r));s.setTextureArray(o,l)}for(o in e.floats)s.setFloat(o,e.floats[o]);for(o in e.floatsArrays)s.setFloats(o,e.floatsArrays[o]);for(o in e.colors3)s.setColor3(o,t.Color3.FromArray(e.colors3[o]));for(o in e.colors3Arrays){var u=e.colors3Arrays[o].reduce(function(t,e,i){return i%3==0?t.push([e]):t[t.length-1].push(e),t},[]).map(function(e){return t.Color3.FromArray(e)});s.setColor3Array(o,u)}for(o in e.colors4)s.setColor4(o,t.Color4.FromArray(e.colors4[o]));for(o in e.vectors2)s.setVector2(o,t.Vector2.FromArray(e.vectors2[o]));for(o in e.vectors3)s.setVector3(o,t.Vector3.FromArray(e.vectors3[o]));for(o in e.vectors4)s.setVector4(o,t.Vector4.FromArray(e.vectors4[o]));for(o in e.matrices)s.setMatrix(o,t.Matrix.FromArray(e.matrices[o]));for(o in e.matrices3x3)s.setMatrix3x3(o,e.matrices3x3[o]);for(o in e.matrices2x2)s.setMatrix2x2(o,e.matrices2x2[o]);for(o in e.vectors2Arrays)s.setArray2(o,e.vectors2Arrays[o]);for(o in e.vectors3Arrays)s.setArray3(o,e.vectors3Arrays[o]);return s},i}(t.Material);t.ShaderMaterial=e}(l||(l={})),function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.generateOctree=!1,n}return o(i,e),i.prototype.getClassName=function(){return"GroundMesh"},Object.defineProperty(i.prototype,"subdivisions",{get:function(){return Math.min(this._subdivisionsX,this._subdivisionsY)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"subdivisionsX",{get:function(){return this._subdivisionsX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"subdivisionsY",{get:function(){return this._subdivisionsY},enumerable:!0,configurable:!0}),i.prototype.optimize=function(t,e){void 0===e&&(e=32),this._subdivisionsX=t,this._subdivisionsY=t,this.subdivide(t),this.createOrUpdateSubmeshesOctree(e)},i.prototype.getHeightAtCoordinates=function(e,i){var n=this.getWorldMatrix(),r=t.Tmp.Matrix[5];n.invertToRef(r);var o=t.Tmp.Vector3[8];if(t.Vector3.TransformCoordinatesFromFloatsToRef(e,0,i,r,o),e=o.x,i=o.z,e<this._minX||e>this._maxX||i<this._minZ||i>this._maxZ)return this.position.y;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var s=this._getFacetAt(e,i),a=-(s.x*e+s.z*i+s.w)/s.y;return t.Vector3.TransformCoordinatesFromFloatsToRef(0,a,0,n,o),o.y},i.prototype.getNormalAtCoordinates=function(e,i){var n=new t.Vector3(0,1,0);return this.getNormalAtCoordinatesToRef(e,i,n),n},i.prototype.getNormalAtCoordinatesToRef=function(e,i,n){var r=this.getWorldMatrix(),o=t.Tmp.Matrix[5];r.invertToRef(o);var s=t.Tmp.Vector3[8];if(t.Vector3.TransformCoordinatesFromFloatsToRef(e,0,i,o,s),e=s.x,i=s.z,e<this._minX||e>this._maxX||i<this._minZ||i>this._maxZ)return this;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var a=this._getFacetAt(e,i);return t.Vector3.TransformNormalFromFloatsToRef(a.x,a.y,a.z,r,n),this},i.prototype.updateCoordinateHeights=function(){return this._heightQuads&&0!=this._heightQuads.length||this._initHeightQuads(),this._computeHeightQuads(),this},i.prototype._getFacetAt=function(t,e){var i=Math.floor((t+this._maxX)*this._subdivisionsX/this._width),n=Math.floor(-(e+this._maxZ)*this._subdivisionsY/this._height+this._subdivisionsY),r=this._heightQuads[n*this._subdivisionsX+i];return e<r.slope.x*t+r.slope.y?r.facet1:r.facet2},i.prototype._initHeightQuads=function(){var e=this._subdivisionsX,i=this._subdivisionsY;this._heightQuads=new Array;for(var n=0;n<i;n++)for(var r=0;r<e;r++){var o={slope:t.Vector2.Zero(),facet1:new t.Vector4(0,0,0,0),facet2:new t.Vector4(0,0,0,0)};this._heightQuads[n*e+r]=o}return this},i.prototype._computeHeightQuads=function(){var e=this.getVerticesData(t.VertexBuffer.PositionKind);if(!e)return this;for(var i=t.Tmp.Vector3[3],n=t.Tmp.Vector3[2],r=t.Tmp.Vector3[1],o=t.Tmp.Vector3[0],s=t.Tmp.Vector3[4],a=t.Tmp.Vector3[5],l=t.Tmp.Vector3[6],c=t.Tmp.Vector3[7],u=t.Tmp.Vector3[8],h=0,p=0,d=0,f=0,m=0,g=0,y=0,_=this._subdivisionsX,v=this._subdivisionsY,b=0;b<v;b++)for(var x=0;x<_;x++){h=3*x,p=b*(_+1)*3,d=(b+1)*(_+1)*3,i.x=e[p+h],i.y=e[p+h+1],i.z=e[p+h+2],n.x=e[p+h+3],n.y=e[p+h+4],n.z=e[p+h+5],r.x=e[d+h],r.y=e[d+h+1],r.z=e[d+h+2],o.x=e[d+h+3],o.y=e[d+h+4],o.z=e[d+h+5],f=(o.z-i.z)/(o.x-i.x),m=i.z-f*i.x,n.subtractToRef(i,s),r.subtractToRef(i,a),o.subtractToRef(i,l),t.Vector3.CrossToRef(l,a,c),t.Vector3.CrossToRef(s,l,u),c.normalize(),u.normalize(),g=-(c.x*i.x+c.y*i.y+c.z*i.z),y=-(u.x*n.x+u.y*n.y+u.z*n.z);var A=this._heightQuads[b*_+x];A.slope.copyFromFloats(f,m),A.facet1.copyFromFloats(c.x,c.y,c.z,g),A.facet2.copyFromFloats(u.x,u.y,u.z,y)}return this},i.prototype.serialize=function(t){e.prototype.serialize.call(this,t),t.subdivisionsX=this._subdivisionsX,t.subdivisionsY=this._subdivisionsY,t.minX=this._minX,t.maxX=this._maxX,t.minZ=this._minZ,t.maxZ=this._maxZ,t.width=this._width,t.height=this._height},i.Parse=function(t,e){var n=new i(t.name,e);return n._subdivisionsX=t.subdivisionsX||1,n._subdivisionsY=t.subdivisionsY||1,n._minX=t.minX,n._maxX=t.maxX,n._minZ=t.minZ,n._maxZ=t.maxZ,n._width=t.width,n._height=t.height,n},i}(t.Mesh);t.GroundMesh=e}(l||(l={})),function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i.getScene())||this;return i.instances.push(n),n._sourceMesh=i,n.position.copyFrom(i.position),n.rotation.copyFrom(i.rotation),n.scaling.copyFrom(i.scaling),i.rotationQuaternion&&(n.rotationQuaternion=i.rotationQuaternion.clone()),n.infiniteDistance=i.infiniteDistance,n.setPivotMatrix(i.getPivotMatrix()),n.refreshBoundingInfo(),n._syncSubMeshes(),n}return o(i,e),i.prototype.getClassName=function(){return"InstancedMesh"},Object.defineProperty(i.prototype,"receiveShadows",{get:function(){return this._sourceMesh.receiveShadows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this._sourceMesh.material},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibility",{get:function(){return this._sourceMesh.visibility},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skeleton",{get:function(){return this._sourceMesh.skeleton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderingGroupId",{get:function(){return this._sourceMesh.renderingGroupId},enumerable:!0,configurable:!0}),i.prototype.getTotalVertices=function(){return this._sourceMesh.getTotalVertices()},Object.defineProperty(i.prototype,"sourceMesh",{get:function(){return this._sourceMesh},enumerable:!0,configurable:!0}),i.prototype.isReady=function(){return this._sourceMesh.isReady(!0)},i.prototype.getVerticesData=function(t,e){return this._sourceMesh.getVerticesData(t,e)},i.prototype.setVerticesData=function(t,e,i,n){return this.sourceMesh&&this.sourceMesh.setVerticesData(t,e,i,n),this.sourceMesh},i.prototype.updateVerticesData=function(t,e,i,n){return this.sourceMesh&&this.sourceMesh.updateVerticesData(t,e,i,n),this.sourceMesh},i.prototype.setIndices=function(t,e){return void 0===e&&(e=null),this.sourceMesh&&this.sourceMesh.setIndices(t,e),this.sourceMesh},i.prototype.isVerticesDataPresent=function(t){return this._sourceMesh.isVerticesDataPresent(t)},i.prototype.getIndices=function(){return this._sourceMesh.getIndices()},Object.defineProperty(i.prototype,"_positions",{get:function(){return this._sourceMesh._positions},enumerable:!0,configurable:!0}),i.prototype.refreshBoundingInfo=function(){var e=this._sourceMesh.getBoundingInfo();return this._boundingInfo=new t.BoundingInfo(e.minimum.clone(),e.maximum.clone()),this._updateBoundingInfo(),this},i.prototype._preActivate=function(){return this._currentLOD&&this._currentLOD._preActivate(),this},i.prototype._activate=function(t){return this._currentLOD&&this._currentLOD._registerInstanceForRenderId(this,t),this},i.prototype.getLOD=function(t){if(!t)return this;var e=this.getBoundingInfo();return this._currentLOD=this.sourceMesh.getLOD(t,e.boundingSphere),this._currentLOD===this.sourceMesh?this:this._currentLOD},i.prototype._syncSubMeshes=function(){if(this.releaseSubMeshes(),this._sourceMesh.subMeshes)for(var t=0;t<this._sourceMesh.subMeshes.length;t++)this._sourceMesh.subMeshes[t].clone(this,this._sourceMesh);return this},i.prototype._generatePointsArray=function(){return this._sourceMesh._generatePointsArray()},i.prototype.clone=function(e,i,n){var r=this._sourceMesh.createInstance(e);if(t.Tools.DeepCopy(this,r,["name","subMeshes","uniqueId"],[]),this.refreshBoundingInfo(),i&&(r.parent=i),!n)for(var o=0;o<this.getScene().meshes.length;o++){var s=this.getScene().meshes[o];s.parent===this&&s.clone(s.name,r)}return r.computeWorldMatrix(!0),r},i.prototype.dispose=function(t){var i=this._sourceMesh.instances.indexOf(this);this._sourceMesh.instances.splice(i,1),e.prototype.dispose.call(this,t)},i}(t.AbstractMesh);t.InstancedMesh=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===n&&(n=null),void 0===r&&(r=null);var c=e.call(this,i,n,r,o,s)||this;c.useVertexColor=a,c.useVertexAlpha=l,c.color=new t.Color3(1,1,1),c.alpha=1,o&&(c.color=o.color.clone(),c.alpha=o.alpha,c.useVertexColor=o.useVertexColor,c.useVertexAlpha=o.useVertexAlpha),c._intersectionThreshold=.1;var u={attributes:[t.VertexBuffer.PositionKind],uniforms:["world","viewProjection"],needAlphaBlending:!0,defines:[]};return!1===l&&(u.needAlphaBlending=!1),a?(u.defines.push("#define VERTEXCOLOR"),u.attributes.push(t.VertexBuffer.ColorKind)):u.uniforms.push("color"),c._colorShader=new t.ShaderMaterial("colorShader",c.getScene(),"color",u),c}return o(i,e),Object.defineProperty(i.prototype,"intersectionThreshold",{get:function(){return this._intersectionThreshold},set:function(e){this._intersectionThreshold!==e&&(this._intersectionThreshold=e,this.geometry&&(this.geometry.boundingBias=new t.Vector2(0,e)))},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"LinesMesh"},Object.defineProperty(i.prototype,"material",{get:function(){return this._colorShader},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkCollisions",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.createInstance=function(t){throw new Error("LinesMeshes do not support createInstance.")},i.prototype._bind=function(t,e,i){return this._geometry?(this._geometry._bind(this._colorShader.getEffect()),this.useVertexColor||this._colorShader.setColor4("color",this.color.toColor4(this.alpha)),this):this},i.prototype._draw=function(e,i,n){return this._geometry&&this._geometry.getVertexBuffers()&&this._geometry.getIndexBuffer()?(this.getScene().getEngine().drawElementsType(t.Material.LineListDrawMode,e.indexStart,e.indexCount),this):this},i.prototype.dispose=function(t){this._colorShader.dispose(),e.prototype.dispose.call(this,t)},i.prototype.clone=function(t,e,n){return new i(t,this.getScene(),e,this,n)},i}(t.Mesh);t.LinesMesh=e}(l||(l={})),function(t){var e=function(){function e(){}return e.updateSideOrientation=function(e){return e==t.Mesh.DOUBLESIDE?t.Mesh.DOUBLESIDE:null==e?t.Mesh.FRONTSIDE:e},e.CreateBox=function(i,n,r){void 0===r&&(r=null);var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateBox(n).applyToMesh(o,n.updatable),o},e.CreateSphere=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateSphere(n).applyToMesh(o,n.updatable),o},e.CreateDisc=function(i,n,r){void 0===r&&(r=null);var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateDisc(n).applyToMesh(o,n.updatable),o},e.CreateIcoSphere=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateIcoSphere(n).applyToMesh(o,n.updatable),o},e.CreateRibbon=function(i,n,r){void 0===r&&(r=null);var o=n.pathArray,s=n.closeArray,a=n.closePath,l=e.updateSideOrientation(n.sideOrientation),c=n.instance,u=n.updatable;if(c){t.Vector3.FromFloatsToRef(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,t.Tmp.Vector3[0]),t.Vector3.FromFloatsToRef(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,t.Tmp.Vector3[1]);var h=c.getVerticesData(t.VertexBuffer.PositionKind);if(function(e){for(var i=o[0].length,n=0,r=c._originalBuilderSideOrientation===t.Mesh.DOUBLESIDE?2:1,s=1;s<=r;s++)for(var a=0;a<o.length;a++){var l=o[a],u=l.length;i=i<u?i:u;for(var h=0;h<i;)e[n]=l[h].x,e[n+1]=l[h].y,e[n+2]=l[h].z,l[h].x<t.Tmp.Vector3[0].x&&(t.Tmp.Vector3[0].x=l[h].x),l[h].x>t.Tmp.Vector3[1].x&&(t.Tmp.Vector3[1].x=l[h].x),l[h].y<t.Tmp.Vector3[0].y&&(t.Tmp.Vector3[0].y=l[h].y),l[h].y>t.Tmp.Vector3[1].y&&(t.Tmp.Vector3[1].y=l[h].y),l[h].z<t.Tmp.Vector3[0].z&&(t.Tmp.Vector3[0].z=l[h].z),l[h].z>t.Tmp.Vector3[1].z&&(t.Tmp.Vector3[1].z=l[h].z),h++,n+=3;c._closePath&&(e[n]=l[0].x,e[n+1]=l[0].y,e[n+2]=l[0].z,n+=3)}}(h),c._boundingInfo=new t.BoundingInfo(t.Tmp.Vector3[0],t.Tmp.Vector3[1]),c._boundingInfo.update(c._worldMatrix),c.updateVerticesData(t.VertexBuffer.PositionKind,h,!1,!1),n.colors){for(var p=c.getVerticesData(t.VertexBuffer.ColorKind),d=0;d<n.colors.length;d++)p[4*d]=n.colors[d].r,p[4*d+1]=n.colors[d].g,p[4*d+2]=n.colors[d].b,p[4*d+3]=n.colors[d].a;c.updateVerticesData(t.VertexBuffer.ColorKind,p,!1,!1)}if(n.uvs){for(var f=c.getVerticesData(t.VertexBuffer.UVKind),m=0;m<n.uvs.length;m++)f[2*m]=n.uvs[m].x,f[2*m+1]=n.uvs[m].y;c.updateVerticesData(t.VertexBuffer.UVKind,f,!1,!1)}if(!c.areNormalsFrozen||c.isFacetDataEnabled){var g=c.getIndices(),y=c.getVerticesData(t.VertexBuffer.NormalKind),_=c.isFacetDataEnabled?c.getFacetDataParameters():null;if(t.VertexData.ComputeNormals(h,g,y,_),c._closePath)for(var v=0,b=0,x=0;x<o.length;x++)v=3*c._idx[x],b=x+1<o.length?3*(c._idx[x+1]-1):y.length-3,y[v]=.5*(y[v]+y[b]),y[v+1]=.5*(y[v+1]+y[b+1]),y[v+2]=.5*(y[v+2]+y[b+2]),y[b]=y[v],y[b+1]=y[v+1],y[b+2]=y[v+2];c.areNormalsFrozen||c.updateVerticesData(t.VertexBuffer.NormalKind,y,!1,!1)}return c}var A=new t.Mesh(i,r);A._originalBuilderSideOrientation=l;var w=t.VertexData.CreateRibbon(n);return a&&(A._idx=w._idx),A._closePath=a,A._closeArray=s,w.applyToMesh(A,u),A},e.CreateCylinder=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateCylinder(n).applyToMesh(o,n.updatable),o},e.CreateTorus=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateTorus(n).applyToMesh(o,n.updatable),o},e.CreateTorusKnot=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreateTorusKnot(n).applyToMesh(o,n.updatable),o},e.CreateLineSystem=function(e,i,n){var r=i.instance,o=i.lines,s=i.colors;if(r){var a,l,c=r.getVerticesData(t.VertexBuffer.PositionKind);s&&(a=r.getVerticesData(t.VertexBuffer.ColorKind));for(var u=0,h=0,p=0;p<o.length;p++)for(var d=o[p],f=0;f<d.length;f++)c[u]=d[f].x,c[u+1]=d[f].y,c[u+2]=d[f].z,s&&a&&(l=s[p],a[h]=l[f].r,a[h+1]=l[f].g,a[h+2]=l[f].b,a[h+3]=l[f].a,h+=4),u+=3;return r.updateVerticesData(t.VertexBuffer.PositionKind,c,!1,!1),s&&a&&r.updateVerticesData(t.VertexBuffer.ColorKind,a,!1,!1),r}var m=!!s,g=new t.LinesMesh(e,n,null,void 0,void 0,m,i.useVertexAlpha);return t.VertexData.CreateLineSystem(i).applyToMesh(g,i.updatable),g},e.CreateLines=function(t,i,n){void 0===n&&(n=null);var r=i.colors?[i.colors]:null;return e.CreateLineSystem(t,{lines:[i.points],updatable:i.updatable,instance:i.instance,colors:r,useVertexAlpha:i.useVertexAlpha},n)},e.CreateDashedLines=function(e,i,n){void 0===n&&(n=null);var r=i.points,o=i.instance,s=i.gapSize||1,a=i.dashSize||3;if(o){return o.updateMeshPositions(function(e){var i,n,s=t.Vector3.Zero(),a=e.length/6,l=0,c=0,u=0,h=0,p=0,d=0;for(p=0;p<r.length-1;p++)r[p+1].subtractToRef(r[p],s),l+=s.length();for(i=l/a,n=o.dashSize*i/(o.dashSize+o.gapSize),p=0;p<r.length-1;p++)for(r[p+1].subtractToRef(r[p],s),c=Math.floor(s.length()/i),s.normalize(),d=0;d<c&&h<e.length;)u=i*d,e[h]=r[p].x+u*s.x,e[h+1]=r[p].y+u*s.y,e[h+2]=r[p].z+u*s.z,e[h+3]=r[p].x+(u+n)*s.x,e[h+4]=r[p].y+(u+n)*s.y,e[h+5]=r[p].z+(u+n)*s.z,h+=6,d++;for(;h<e.length;)e[h]=r[p].x,e[h+1]=r[p].y,e[h+2]=r[p].z,h+=3},!1),o}var l=new t.LinesMesh(e,n);return t.VertexData.CreateDashedLines(i).applyToMesh(l,i.updatable),l.dashSize=a,l.gapSize=s,l},e.ExtrudeShape=function(i,n,r){void 0===r&&(r=null);var o=n.path,s=n.shape,a=n.scale||1,l=n.rotation||0,c=0===n.cap?0:n.cap||t.Mesh.NO_CAP,u=n.updatable,h=e.updateSideOrientation(n.sideOrientation),p=n.instance||null,d=n.invertUV||!1;return e._ExtrudeShapeGeneric(i,s,o,a,l,null,null,!1,!1,c,!1,r,!!u,h,p,d,n.frontUVs||null,n.backUVs||null)},e.ExtrudeShapeCustom=function(i,n,r){var o=n.path,s=n.shape,a=n.scaleFunction||function(){return 1},l=n.rotationFunction||function(){return 0},c=n.ribbonCloseArray||!1,u=n.ribbonClosePath||!1,h=0===n.cap?0:n.cap||t.Mesh.NO_CAP,p=n.updatable,d=e.updateSideOrientation(n.sideOrientation),f=n.instance,m=n.invertUV||!1;return e._ExtrudeShapeGeneric(i,s,o,null,null,a,l,c,u,h,!0,r,!!p,d,f||null,m,n.frontUVs||null,n.backUVs||null)},e.CreateLathe=function(i,n,r){var o,s=n.arc?n.arc<=0||n.arc>1?1:n.arc:1,a=void 0===n.closed||n.closed,l=n.shape,c=n.radius||1,u=n.tessellation||64,h=n.updatable,p=e.updateSideOrientation(n.sideOrientation),d=n.cap||t.Mesh.NO_CAP,f=2*Math.PI,m=new Array,g=n.invertUV||!1,y=0,_=0,v=f/u*s,b=new Array;for(y=0;y<=u;y++){b=[];for(d!=t.Mesh.CAP_START&&d!=t.Mesh.CAP_ALL||(b.push(new t.Vector3(0,l[0].y,0)),b.push(new t.Vector3(Math.cos(y*v)*l[0].x*c,l[0].y,Math.sin(y*v)*l[0].x*c))),_=0;_<l.length;_++)o=new t.Vector3(Math.cos(y*v)*l[_].x*c,l[_].y,Math.sin(y*v)*l[_].x*c),b.push(o);d!=t.Mesh.CAP_END&&d!=t.Mesh.CAP_ALL||(b.push(new t.Vector3(Math.cos(y*v)*l[l.length-1].x*c,l[l.length-1].y,Math.sin(y*v)*l[l.length-1].x*c)),b.push(new t.Vector3(0,l[l.length-1].y,0))),m.push(b)}return e.CreateRibbon(i,{pathArray:m,closeArray:a,sideOrientation:p,updatable:h,invertUV:g,frontUVs:n.frontUVs,backUVs:n.backUVs},r)},e.CreatePlane=function(i,n,r){var o=new t.Mesh(i,r);if(n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreatePlane(n).applyToMesh(o,n.updatable),n.sourcePlane){o.translate(n.sourcePlane.normal,n.sourcePlane.d);var s=Math.acos(t.Vector3.Dot(n.sourcePlane.normal,t.Axis.Z)),a=t.Vector3.Cross(t.Axis.Z,n.sourcePlane.normal);o.rotate(a,s)}return o},e.CreateGround=function(e,i,n){var r=new t.GroundMesh(e,n);return r._setReady(!1),r._subdivisionsX=i.subdivisionsX||i.subdivisions||1,r._subdivisionsY=i.subdivisionsY||i.subdivisions||1,r._width=i.width||1,r._height=i.height||1,r._maxX=r._width/2,r._maxZ=r._height/2,r._minX=-r._maxX,r._minZ=-r._maxZ,t.VertexData.CreateGround(i).applyToMesh(r,i.updatable),r._setReady(!0),r},e.CreateTiledGround=function(e,i,n){var r=new t.Mesh(e,n);return t.VertexData.CreateTiledGround(i).applyToMesh(r,i.updatable),r},e.CreateGroundFromHeightMap=function(e,i,n,r){var o=n.width||10,s=n.height||10,a=n.subdivisions||1,l=n.minHeight||0,c=n.maxHeight||1,u=n.colorFilter||new t.Color3(.3,.59,.11),h=n.updatable,p=n.onReady,d=new t.GroundMesh(e,r);d._subdivisionsX=a,d._subdivisionsY=a,d._width=o,d._height=s,d._maxX=d._width/2,d._maxZ=d._height/2,d._minX=-d._maxX,d._minZ=-d._maxZ,d._setReady(!1);return t.Tools.LoadImage(i,function(e){var i=document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("Unable to get 2d context for CreateGroundFromHeightMap");if(!r.isDisposed){var f=e.width,m=e.height;i.width=f,i.height=m,n.drawImage(e,0,0);var g=n.getImageData(0,0,f,m).data;t.VertexData.CreateGroundFromHeightMap({width:o,height:s,subdivisions:a,minHeight:l,maxHeight:c,colorFilter:u,buffer:g,bufferWidth:f,bufferHeight:m}).applyToMesh(d,h),d._setReady(!0),p&&p(d)}},function(){},r.database),d},e.CreatePolygon=function(i,n,r){n.sideOrientation=e.updateSideOrientation(n.sideOrientation);for(var o=n.shape,s=n.holes||[],a=n.depth||0,l=[],c=[],u=0;u<o.length;u++)l[u]=new t.Vector2(o[u].x,o[u].z);l[0].equalsWithEpsilon(l[l.length-1],1e-8)&&l.pop();for(var h=new t.PolygonMeshBuilder(i,l,r),p=0;p<s.length;p++){c=[];for(var d=0;d<s[p].length;d++)c.push(new t.Vector2(s[p][d].x,s[p][d].z));h.addHole(c)}var f=h.build(n.updatable,a);return f._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreatePolygon(f,n.sideOrientation,n.faceUV,n.faceColors,n.frontUVs,n.backUVs).applyToMesh(f,n.updatable),f},e.ExtrudePolygon=function(t,i,n){return e.CreatePolygon(t,i,n)},e.CreateTube=function(i,n,r){var o=n.path,s=n.instance,a=1;s&&(a=s.radius),void 0!==n.radius&&(a=n.radius);var l=n.tessellation||64,c=n.radiusFunction||null,u=n.cap||t.Mesh.NO_CAP,h=n.invertUV||!1,p=n.updatable,d=e.updateSideOrientation(n.sideOrientation);n.arc=n.arc&&(n.arc<=0||n.arc>1)?1:n.arc||1;var f,m,g=function(e,i,n,r,o,s,a,l){for(var c,u,h,p,d=i.getTangents(),f=i.getNormals(),m=i.getDistances(),g=2*Math.PI/o*l,y=s||function(){return r},_=t.Tmp.Matrix[0],v=a===t.Mesh._NO_CAP||a===t.Mesh.CAP_END?0:2,b=0;b<e.length;b++){u=y(b,m[b]),c=Array(),h=f[b];for(var x=0;x<o;x++)t.Matrix.RotationAxisToRef(d[b],g*x,_),p=c[x]?c[x]:t.Vector3.Zero(),t.Vector3.TransformCoordinatesToRef(h,_,p),p.scaleInPlace(u).addInPlace(e[b]),c[x]=p;n[v]=c,v++}var A=function(t,i){for(var n=Array(),r=0;r<t;r++)n.push(e[i]);return n};switch(a){case t.Mesh.NO_CAP:break;case t.Mesh.CAP_START:n[0]=A(o,0),n[1]=n[2].slice(0);break;case t.Mesh.CAP_END:n[v]=n[v-1].slice(0),n[v+1]=A(o,e.length-1);break;case t.Mesh.CAP_ALL:n[0]=A(o,0),n[1]=n[2].slice(0),n[v]=n[v-1].slice(0),n[v+1]=A(o,e.length-1)}return n};if(s){var y=n.arc||s.arc;return m=g(o,f=s.path3D.update(o),s.pathArray,a,s.tessellation,c,s.cap,y),(s=e.CreateRibbon("",{pathArray:m,instance:s})).path3D=f,s.pathArray=m,s.arc=y,s.radius=a,s}m=g(o,f=new t.Path3D(o),new Array,a,l,c,u=u<0||u>3?0:u,n.arc);var _=e.CreateRibbon(i,{pathArray:m,closePath:!0,closeArray:!1,updatable:p,sideOrientation:d,invertUV:h,frontUVs:n.frontUVs,backUVs:n.backUVs},r);return _.pathArray=m,_.path3D=f,_.tessellation=l,_.cap=u,_.arc=n.arc,_.radius=a,_},e.CreatePolyhedron=function(i,n,r){var o=new t.Mesh(i,r);return n.sideOrientation=e.updateSideOrientation(n.sideOrientation),o._originalBuilderSideOrientation=n.sideOrientation,t.VertexData.CreatePolyhedron(n).applyToMesh(o,n.updatable),o},e.CreateDecal=function(e,i,n){var r=i.getIndices(),o=i.getVerticesData(t.VertexBuffer.PositionKind),s=i.getVerticesData(t.VertexBuffer.NormalKind),a=n.position||t.Vector3.Zero(),l=n.normal||t.Vector3.Up(),c=n.size||t.Vector3.One(),u=n.angle||0;if(!l){var h=new t.Vector3(0,0,1),p=i.getScene().activeCamera,d=t.Vector3.TransformCoordinates(h,p.getWorldMatrix());l=p.globalPosition.subtract(d)}var f=-Math.atan2(l.z,l.x)-Math.PI/2,m=Math.sqrt(l.x*l.x+l.z*l.z),g=Math.atan2(l.y,m),y=t.Matrix.RotationYawPitchRoll(f,g,u).multiply(t.Matrix.Translation(a.x,a.y,a.z)),_=t.Matrix.Invert(y),v=i.getWorldMatrix().multiply(_),b=new t.VertexData;b.indices=[],b.positions=[],b.normals=[],b.uvs=[];for(var x=0,A=function(e){var i=new t.PositionNormalVertex;if(!r||!o||!s)return i;var n=r[e];return i.position=new t.Vector3(o[3*n],o[3*n+1],o[3*n+2]),i.position=t.Vector3.TransformCoordinates(i.position,v),i.normal=new t.Vector3(s[3*n],s[3*n+1],s[3*n+2]),i.normal=t.Vector3.TransformNormal(i.normal,v),i},w=function(e,i){if(0===e.length)return e;for(var n=.5*Math.abs(t.Vector3.Dot(c,i)),r=function(e,r){var o=t.Vector3.GetClipFactor(e.position,r.position,i,n);return new t.PositionNormalVertex(t.Vector3.Lerp(e.position,r.position,o),t.Vector3.Lerp(e.normal,r.normal,o))},o=new Array,s=0;s<e.length;s+=3){var a,l,u,h=null,p=null,d=null,f=null;switch(((a=t.Vector3.Dot(e[s].position,i)-n>0)?1:0)+((l=t.Vector3.Dot(e[s+1].position,i)-n>0)?1:0)+((u=t.Vector3.Dot(e[s+2].position,i)-n>0)?1:0)){case 0:o.push(e[s]),o.push(e[s+1]),o.push(e[s+2]);break;case 1:if(a&&(h=e[s+1],p=e[s+2],d=r(e[s],h),f=r(e[s],p)),l){h=e[s],p=e[s+2],d=r(e[s+1],h),f=r(e[s+1],p),o.push(d),o.push(p.clone()),o.push(h.clone()),o.push(p.clone()),o.push(d.clone()),o.push(f);break}u&&(h=e[s],p=e[s+1],d=r(e[s+2],h),f=r(e[s+2],p)),h&&p&&d&&f&&(o.push(h.clone()),o.push(p.clone()),o.push(d),o.push(f),o.push(d.clone()),o.push(p.clone()));break;case 2:a||(p=r(h=e[s].clone(),e[s+1]),d=r(h,e[s+2]),o.push(h),o.push(p),o.push(d)),l||(p=r(h=e[s+1].clone(),e[s+2]),d=r(h,e[s]),o.push(h),o.push(p),o.push(d)),u||(p=r(h=e[s+2].clone(),e[s]),d=r(h,e[s+1]),o.push(h),o.push(p),o.push(d))}}return o},P=0;P<r.length;P+=3){var E=new Array;if(E.push(A(P)),E.push(A(P+1)),E.push(A(P+2)),0!==(E=w(E=w(E=w(E=w(E=w(E=w(E,new t.Vector3(1,0,0)),new t.Vector3(-1,0,0)),new t.Vector3(0,1,0)),new t.Vector3(0,-1,0)),new t.Vector3(0,0,1)),new t.Vector3(0,0,-1))).length)for(var T=0;T<E.length;T++){var S=E[T];b.indices.push(x),S.position.toArray(b.positions,3*x),S.normal.toArray(b.normals,3*x),b.uvs.push(.5+S.position.x/c.x),b.uvs.push(.5+S.position.y/c.y),x++}}var C=new t.Mesh(e,i.getScene());return b.applyToMesh(C),C.position=a.clone(),C.rotation=new t.Vector3(g,f,u),C},e._ExtrudeShapeGeneric=function(i,n,r,o,s,a,l,c,u,h,p,d,f,m,g,y,_,v){var b,x,A=function(e,i,n,r,o,s,a,l,c,u){for(var h=n.getTangents(),p=n.getNormals(),d=n.getBinormals(),f=n.getDistances(),m=0,g=u&&l?l:function(){return null!==s?s:0},y=u&&a?a:function(){return null!==o?o:1},_=c===t.Mesh.NO_CAP||c===t.Mesh.CAP_END?0:2,v=t.Tmp.Matrix[0],b=0;b<i.length;b++){for(var x=new Array,A=g(b,f[b]),w=y(b,f[b]),P=0;P<e.length;P++){t.Matrix.RotationAxisToRef(h[b],m,v);var E=h[b].scale(e[P].z).add(p[b].scale(e[P].x)).add(d[b].scale(e[P].y)),T=x[P]?x[P]:t.Vector3.Zero();t.Vector3.TransformCoordinatesToRef(E,v,T),T.scaleInPlace(w).addInPlace(i[b]),x[P]=T}r[_]=x,m+=A,_++}var S=function(e){var i,n=Array(),r=t.Vector3.Zero();for(i=0;i<e.length;i++)r.addInPlace(e[i]);for(r.scaleInPlace(1/e.length),i=0;i<e.length;i++)n.push(r);return n};switch(c){case t.Mesh.NO_CAP:break;case t.Mesh.CAP_START:r[0]=S(r[2]),r[1]=r[2];break;case t.Mesh.CAP_END:r[_]=r[_-1],r[_+1]=S(r[_-1]);break;case t.Mesh.CAP_ALL:r[0]=S(r[2]),r[1]=r[2],r[_]=r[_-1],r[_+1]=S(r[_-1])}return r};if(g)return b=g.path3D.update(r),x=A(n,r,g.path3D,g.pathArray,o,s,a,l,g.cap,p),t.Mesh.CreateRibbon("",x,!1,!1,0,d||void 0,!1,0,g);x=A(n,r,b=new t.Path3D(r),new Array,o,s,a,l,h=h<0||h>3?0:h,p);var w=e.CreateRibbon(i,{pathArray:x,closeArray:c,closePath:u,updatable:f,sideOrientation:m,invertUV:y,frontUVs:_||void 0,backUVs:v||void 0},d);return w.pathArray=x,w.path3D=b,w.cap=h,w},e}();t.MeshBuilder=e}(l||(l={})),function(t){var e=function(){function e(){this._audioContext=null,this._audioContextInitialized=!1,this.canUseWebAudio=!1,this.WarnedWebAudioUnsupported=!1,this.unlocked=!1,this.isMP3supported=!1,this.isOGGsupported=!1,void 0===window.AudioContext&&void 0===window.webkitAudioContext||(window.AudioContext=window.AudioContext||window.webkitAudioContext,this.canUseWebAudio=!0);var t=document.createElement("audio");try{t&&t.canPlayType&&t.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,"")&&(this.isMP3supported=!0)}catch(t){}try{t&&t.canPlayType&&t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.isOGGsupported=!0)}catch(t){}/iPad|iPhone|iPod/.test(navigator.platform)?this._unlockiOSaudio():this.unlocked=!0}return Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._audioContextInitialized||this._initializeAudioContext(),this._audioContext},enumerable:!0,configurable:!0}),e.prototype._unlockiOSaudio=function(){var t=this,e=function(){if(t.audioContext){var i=t.audioContext.createBuffer(1,1,22050),n=t.audioContext.createBufferSource();n.buffer=i,n.connect(t.audioContext.destination),n.start(0),setTimeout(function(){n.playbackState!==n.PLAYING_STATE&&n.playbackState!==n.FINISHED_STATE||(t.unlocked=!0,window.removeEventListener("touchend",e,!1),t.onAudioUnlocked&&t.onAudioUnlocked())},0)}};window.addEventListener("touchend",e,!1)},e.prototype._initializeAudioContext=function(){try{this.canUseWebAudio&&(this._audioContext=new AudioContext,this.masterGain=this._audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this._audioContext.destination),this._audioContextInitialized=!0)}catch(e){this.canUseWebAudio=!1,t.Tools.Error("Web Audio: "+e.message)}},e.prototype.dispose=function(){this.canUseWebAudio&&this._audioContextInitialized&&(this._connectedAnalyser&&this._audioContext&&(this._connectedAnalyser.stopDebugCanvas(),this._connectedAnalyser.dispose(),this.masterGain.disconnect(),this.masterGain.connect(this._audioContext.destination),this._connectedAnalyser=null),this.masterGain.gain.value=1),this.WarnedWebAudioUnsupported=!1},e.prototype.getGlobalVolume=function(){return this.canUseWebAudio&&this._audioContextInitialized?this.masterGain.gain.value:-1},e.prototype.setGlobalVolume=function(t){this.canUseWebAudio&&this._audioContextInitialized&&(this.masterGain.gain.value=t)},e.prototype.connectToAnalyser=function(t){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas(),this.canUseWebAudio&&this._audioContextInitialized&&this._audioContext&&(this._connectedAnalyser=t,this.masterGain.disconnect(),this._connectedAnalyser.connectAudioNodes(this.masterGain,this._audioContext.destination))},e}();t.AudioEngine=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o){void 0===r&&(r=null);var s=this;if(this.autoplay=!1,this.loop=!1,this.useCustomAttenuation=!1,this.spatialSound=!1,this.refDistance=1,this.rolloffFactor=1,this.maxDistance=100,this.distanceModel="linear",this._panningModel="equalpower",this._playbackRate=1,this._streaming=!1,this._startTime=0,this._startOffset=0,this._position=t.Vector3.Zero(),this._localDirection=new t.Vector3(1,0,0),this._volume=1,this._isReadyToPlay=!1,this.isPlaying=!1,this.isPaused=!1,this._isDirectional=!1,this._coneInnerAngle=360,this._coneOuterAngle=360,this._coneOuterGain=0,this._isOutputConnected=!1,this._urlType="Unknown",this.name=e,this._scene=n,this._readyToPlayCallback=r,this._customAttenuationFunction=function(t,e,i,n,r){return e<i?t*(1-e/i):0},o&&(this.autoplay=o.autoplay||!1,this.loop=o.loop||!1,void 0!==o.volume&&(this._volume=o.volume),this.spatialSound=o.spatialSound||!1,this.maxDistance=o.maxDistance||100,this.useCustomAttenuation=o.useCustomAttenuation||!1,this.rolloffFactor=o.rolloffFactor||1,this.refDistance=o.refDistance||1,this.distanceModel=o.distanceModel||"linear",this._playbackRate=o.playbackRate||1,this._streaming=o.streaming||!1),t.Engine.audioEngine.canUseWebAudio&&t.Engine.audioEngine.audioContext){this._soundGain=t.Engine.audioEngine.audioContext.createGain(),this._soundGain.gain.value=this._volume,this._inputAudioNode=this._soundGain,this._ouputAudioNode=this._soundGain,this.spatialSound&&this._createSpatialParameters(),this._scene.mainSoundTrack.AddSound(this);var a=!0;if(i){"string"==typeof i&&(this._urlType="String"),Array.isArray(i)&&(this._urlType="Array"),i instanceof ArrayBuffer&&(this._urlType="ArrayBuffer");var l=[],c=!1;switch(this._urlType){case"ArrayBuffer":i.byteLength>0&&(c=!0,this._soundLoaded(i));break;case"String":l.push(i);case"Array":0===l.length&&(l=i);for(var u=0;u<l.length;u++){var h=l[u];if(-1!==h.indexOf(".mp3",h.length-4)&&t.Engine.audioEngine.isMP3supported&&(c=!0),-1!==h.indexOf(".ogg",h.length-4)&&t.Engine.audioEngine.isOGGsupported&&(c=!0),-1!==h.indexOf(".wav",h.length-4)&&(c=!0),-1!==h.indexOf("blob:")&&(c=!0),c){this._streaming?(this._htmlAudioElement=new Audio(h),this._htmlAudioElement.controls=!1,this._htmlAudioElement.loop=this.loop,t.Tools.SetCorsBehavior(h,this._htmlAudioElement),this._htmlAudioElement.preload="auto",this._htmlAudioElement.addEventListener("canplaythrough",function(){s._isReadyToPlay=!0,s.autoplay&&s.play(),s._readyToPlayCallback&&s._readyToPlayCallback()}),document.body.appendChild(this._htmlAudioElement)):this._scene._loadFile(h,function(t){s._soundLoaded(t)},void 0,!0,!0);break}}break;default:a=!1}a?c||(this._isReadyToPlay=!0,this._readyToPlayCallback&&window.setTimeout(function(){s._readyToPlayCallback&&s._readyToPlayCallback()},1e3)):t.Tools.Error("Parameter must be a URL to the sound, an Array of URLs (.mp3 & .ogg) or an ArrayBuffer of the sound.")}}else this._scene.mainSoundTrack.AddSound(this),t.Engine.audioEngine.WarnedWebAudioUnsupported||(t.Tools.Error("Web Audio is not supported by your browser."),t.Engine.audioEngine.WarnedWebAudioUnsupported=!0),this._readyToPlayCallback&&window.setTimeout(function(){s._readyToPlayCallback&&s._readyToPlayCallback()},1e3)}return e.prototype.dispose=function(){t.Engine.audioEngine.canUseWebAudio&&this._isReadyToPlay&&(this.isPlaying&&this.stop(),this._isReadyToPlay=!1,-1===this.soundTrackId?this._scene.mainSoundTrack.RemoveSound(this):this._scene.soundTracks[this.soundTrackId].RemoveSound(this),this._soundGain&&(this._soundGain.disconnect(),this._soundGain=null),this._soundPanner&&(this._soundPanner.disconnect(),this._soundPanner=null),this._soundSource&&(this._soundSource.disconnect(),this._soundSource=null),this._audioBuffer=null,this._htmlAudioElement&&(this._htmlAudioElement.pause(),this._htmlAudioElement.src="",document.body.removeChild(this._htmlAudioElement)),this._connectedMesh&&this._registerFunc&&(this._connectedMesh.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._connectedMesh=null))},e.prototype.isReady=function(){return this._isReadyToPlay},e.prototype._soundLoaded=function(e){var i=this;t.Engine.audioEngine.audioContext&&t.Engine.audioEngine.audioContext.decodeAudioData(e,function(t){i._audioBuffer=t,i._isReadyToPlay=!0,i.autoplay&&i.play(),i._readyToPlayCallback&&i._readyToPlayCallback()},function(e){t.Tools.Error("Error while decoding audio data for: "+i.name+" / Error: "+e)})},e.prototype.setAudioBuffer=function(e){t.Engine.audioEngine.canUseWebAudio&&(this._audioBuffer=e,this._isReadyToPlay=!0)},e.prototype.updateOptions=function(t){t&&(this.loop=t.loop||this.loop,this.maxDistance=t.maxDistance||this.maxDistance,this.useCustomAttenuation=t.useCustomAttenuation||this.useCustomAttenuation,this.rolloffFactor=t.rolloffFactor||this.rolloffFactor,this.refDistance=t.refDistance||this.refDistance,this.distanceModel=t.distanceModel||this.distanceModel,this._playbackRate=t.playbackRate||this._playbackRate,this._updateSpatialParameters(),this.isPlaying&&(this._streaming?this._htmlAudioElement.playbackRate=this._playbackRate:this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate)))},e.prototype._createSpatialParameters=function(){t.Engine.audioEngine.canUseWebAudio&&t.Engine.audioEngine.audioContext&&(this._scene.headphone&&(this._panningModel="HRTF"),this._soundPanner=t.Engine.audioEngine.audioContext.createPanner(),this._updateSpatialParameters(),this._soundPanner.connect(this._ouputAudioNode),this._inputAudioNode=this._soundPanner)},e.prototype._updateSpatialParameters=function(){this.spatialSound&&this._soundPanner&&(this.useCustomAttenuation?(this._soundPanner.distanceModel="linear",this._soundPanner.maxDistance=Number.MAX_VALUE,this._soundPanner.refDistance=1,this._soundPanner.rolloffFactor=1,this._soundPanner.panningModel=this._panningModel):(this._soundPanner.distanceModel=this.distanceModel,this._soundPanner.maxDistance=this.maxDistance,this._soundPanner.refDistance=this.refDistance,this._soundPanner.rolloffFactor=this.rolloffFactor,this._soundPanner.panningModel=this._panningModel))},e.prototype.switchPanningModelToHRTF=function(){this._panningModel="HRTF",this._switchPanningModel()},e.prototype.switchPanningModelToEqualPower=function(){this._panningModel="equalpower",this._switchPanningModel()},e.prototype._switchPanningModel=function(){t.Engine.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.panningModel=this._panningModel)},e.prototype.connectToSoundTrackAudioNode=function(e){t.Engine.audioEngine.canUseWebAudio&&(this._isOutputConnected&&this._ouputAudioNode.disconnect(),this._ouputAudioNode.connect(e),this._isOutputConnected=!0)},e.prototype.setDirectionalCone=function(e,i,n){i<e?t.Tools.Error("setDirectionalCone(): outer angle of the cone must be superior or equal to the inner angle."):(this._coneInnerAngle=e,this._coneOuterAngle=i,this._coneOuterGain=n,this._isDirectional=!0,this.isPlaying&&this.loop&&(this.stop(),this.play()))},e.prototype.setPosition=function(e){this._position=e,t.Engine.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z)},e.prototype.setLocalDirectionToMesh=function(e){this._localDirection=e,t.Engine.audioEngine.canUseWebAudio&&this._connectedMesh&&this.isPlaying&&this._updateDirection()},e.prototype._updateDirection=function(){if(this._connectedMesh&&this._soundPanner){var e=this._connectedMesh.getWorldMatrix(),i=t.Vector3.TransformNormal(this._localDirection,e);i.normalize(),this._soundPanner.setOrientation(i.x,i.y,i.z)}},e.prototype.updateDistanceFromListener=function(){if(t.Engine.audioEngine.canUseWebAudio&&this._connectedMesh&&this.useCustomAttenuation&&this._soundGain&&this._scene.activeCamera){var e=this._connectedMesh.getDistanceToCamera(this._scene.activeCamera);this._soundGain.gain.value=this._customAttenuationFunction(this._volume,e,this.maxDistance,this.refDistance,this.rolloffFactor)}},e.prototype.setAttenuationFunction=function(t){this._customAttenuationFunction=t},e.prototype.play=function(e,i){var n=this;if(this._isReadyToPlay&&this._scene.audioEnabled&&t.Engine.audioEngine.audioContext)try{this._startOffset<0&&(e=-this._startOffset,this._startOffset=0);var r=e?t.Engine.audioEngine.audioContext.currentTime+e:t.Engine.audioEngine.audioContext.currentTime;this._soundSource&&this._streamingSource||this.spatialSound&&this._soundPanner&&(this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z),this._isDirectional&&(this._soundPanner.coneInnerAngle=this._coneInnerAngle,this._soundPanner.coneOuterAngle=this._coneOuterAngle,this._soundPanner.coneOuterGain=this._coneOuterGain,this._connectedMesh?this._updateDirection():this._soundPanner.setOrientation(this._localDirection.x,this._localDirection.y,this._localDirection.z))),this._streaming?(this._streamingSource||(this._streamingSource=t.Engine.audioEngine.audioContext.createMediaElementSource(this._htmlAudioElement),this._htmlAudioElement.onended=function(){n._onended()},this._htmlAudioElement.playbackRate=this._playbackRate),this._streamingSource.disconnect(),this._streamingSource.connect(this._inputAudioNode),this._htmlAudioElement.play()):(this._soundSource=t.Engine.audioEngine.audioContext.createBufferSource(),this._soundSource.buffer=this._audioBuffer,this._soundSource.connect(this._inputAudioNode),this._soundSource.loop=this.loop,this._soundSource.playbackRate.value=this._playbackRate,this._soundSource.onended=function(){n._onended()},this._soundSource.buffer&&this._soundSource.start(r,this.isPaused?this._startOffset%this._soundSource.buffer.duration:i||0)),this._startTime=r,this.isPlaying=!0,this.isPaused=!1}catch(e){t.Tools.Error("Error while trying to play audio: "+this.name+", "+e.message)}},e.prototype._onended=function(){this.isPlaying=!1,this.onended&&this.onended()},e.prototype.stop=function(e){if(this.isPlaying){if(this._streaming)this._htmlAudioElement.pause(),this._htmlAudioElement.currentTime>0&&(this._htmlAudioElement.currentTime=0);else if(t.Engine.audioEngine.audioContext&&this._soundSource){var i=e?t.Engine.audioEngine.audioContext.currentTime+e:t.Engine.audioEngine.audioContext.currentTime;this._soundSource.stop(i),this._soundSource.onended=function(){},this.isPaused||(this._startOffset=0)}this.isPlaying=!1}},e.prototype.pause=function(){this.isPlaying&&(this.isPaused=!0,this._streaming?this._htmlAudioElement.pause():t.Engine.audioEngine.audioContext&&(this.stop(0),this._startOffset+=t.Engine.audioEngine.audioContext.currentTime-this._startTime))},e.prototype.setVolume=function(e,i){t.Engine.audioEngine.canUseWebAudio&&this._soundGain&&(i&&t.Engine.audioEngine.audioContext?(this._soundGain.gain.cancelScheduledValues(t.Engine.audioEngine.audioContext.currentTime),this._soundGain.gain.setValueAtTime(this._soundGain.gain.value,t.Engine.audioEngine.audioContext.currentTime),this._soundGain.gain.linearRampToValueAtTime(e,t.Engine.audioEngine.audioContext.currentTime+i)):this._soundGain.gain.value=e),this._volume=e},e.prototype.setPlaybackRate=function(t){this._playbackRate=t,this.isPlaying&&(this._streaming?this._htmlAudioElement.playbackRate=this._playbackRate:this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate))},e.prototype.getVolume=function(){return this._volume},e.prototype.attachToMesh=function(t){var e=this;this._connectedMesh&&this._registerFunc&&(this._connectedMesh.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._registerFunc=null),this._connectedMesh=t,this.spatialSound||(this.spatialSound=!0,this._createSpatialParameters(),this.isPlaying&&this.loop&&(this.stop(),this.play())),this._onRegisterAfterWorldMatrixUpdate(this._connectedMesh),this._registerFunc=function(t){return e._onRegisterAfterWorldMatrixUpdate(t)},t.registerAfterWorldMatrixUpdate(this._registerFunc)},e.prototype.detachFromMesh=function(){this._connectedMesh&&this._registerFunc&&(this._connectedMesh.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._registerFunc=null,this._connectedMesh=null)},e.prototype._onRegisterAfterWorldMatrixUpdate=function(e){if(e.getBoundingInfo){var i=e.getBoundingInfo();this.setPosition(i.boundingSphere.centerWorld),t.Engine.audioEngine.canUseWebAudio&&this._isDirectional&&this.isPlaying&&this._updateDirection()}},e.prototype.clone=function(){var t=this;if(this._streaming)return null;var i=function(){t._isReadyToPlay?(r._audioBuffer=t.getAudioBuffer(),r._isReadyToPlay=!0,r.autoplay&&r.play()):window.setTimeout(i,300)},n={autoplay:this.autoplay,loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,useCustomAttenuation:this.useCustomAttenuation,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel},r=new e(this.name+"_cloned",new ArrayBuffer(0),this._scene,null,n);return this.useCustomAttenuation&&r.setAttenuationFunction(this._customAttenuationFunction),r.setPosition(this._position),r.setPlaybackRate(this._playbackRate),i(),r},e.prototype.getAudioBuffer=function(){return this._audioBuffer},e.prototype.serialize=function(){var t={name:this.name,url:this.name,autoplay:this.autoplay,loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel,playbackRate:this._playbackRate,panningModel:this._panningModel,soundTrackId:this.soundTrackId};return this.spatialSound&&(this._connectedMesh&&(t.connectedMeshId=this._connectedMesh.id),t.position=this._position.asArray(),t.refDistance=this.refDistance,t.distanceModel=this.distanceModel,t.isDirectional=this._isDirectional,t.localDirectionToMesh=this._localDirection.asArray(),t.coneInnerAngle=this._coneInnerAngle,t.coneOuterAngle=this._coneOuterAngle,t.coneOuterGain=this._coneOuterGain),t},e.Parse=function(i,n,r,o){var s,a=i.name;s=i.url?r+i.url:r+a;var l,c={autoplay:i.autoplay,loop:i.loop,volume:i.volume,spatialSound:i.spatialSound,maxDistance:i.maxDistance,rolloffFactor:i.rolloffFactor,refDistance:i.refDistance,distanceModel:i.distanceModel,playbackRate:i.playbackRate};if(o){var u=function(){o._isReadyToPlay?(l._audioBuffer=o.getAudioBuffer(),l._isReadyToPlay=!0,l.autoplay&&l.play()):window.setTimeout(u,300)};l=new e(a,new ArrayBuffer(0),n,null,c),u()}else l=new e(a,s,n,function(){n._removePendingData(l)},c),n._addPendingData(l);if(i.position){var h=t.Vector3.FromArray(i.position);l.setPosition(h)}if(i.isDirectional&&(l.setDirectionalCone(i.coneInnerAngle||360,i.coneOuterAngle||360,i.coneOuterGain||0),i.localDirectionToMesh)){var p=t.Vector3.FromArray(i.localDirectionToMesh);l.setLocalDirectionToMesh(p)}if(i.connectedMeshId){var d=n.getMeshByID(i.connectedMeshId);d&&l.attachToMesh(d)}return l},e}();t.Sound=e}(l||(l={})),function(t){var e=function(){function e(t,e){this.id=-1,this._isMainTrack=!1,this._isInitialized=!1,this._scene=t,this.soundCollection=new Array,this._options=e,this._isMainTrack||(this._scene.soundTracks.push(this),this.id=this._scene.soundTracks.length-1)}return e.prototype._initializeSoundTrackAudioGraph=function(){t.Engine.audioEngine.canUseWebAudio&&t.Engine.audioEngine.audioContext&&(this._outputAudioNode=t.Engine.audioEngine.audioContext.createGain(),this._outputAudioNode.connect(t.Engine.audioEngine.masterGain),this._options&&(this._options.volume&&(this._outputAudioNode.gain.value=this._options.volume),this._options.mainTrack&&(this._isMainTrack=this._options.mainTrack)),this._isInitialized=!0)},e.prototype.dispose=function(){if(t.Engine.audioEngine.canUseWebAudio){for(this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas();this.soundCollection.length;)this.soundCollection[0].dispose();this._outputAudioNode&&this._outputAudioNode.disconnect(),this._outputAudioNode=null}},e.prototype.AddSound=function(e){this._isInitialized||this._initializeSoundTrackAudioGraph(),t.Engine.audioEngine.canUseWebAudio&&this._outputAudioNode&&e.connectToSoundTrackAudioNode(this._outputAudioNode),e.soundTrackId&&(-1===e.soundTrackId?this._scene.mainSoundTrack.RemoveSound(e):this._scene.soundTracks[e.soundTrackId].RemoveSound(e)),this.soundCollection.push(e),e.soundTrackId=this.id},e.prototype.RemoveSound=function(t){var e=this.soundCollection.indexOf(t);-1!==e&&this.soundCollection.splice(e,1)},e.prototype.setVolume=function(e){t.Engine.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.gain.value=e)},e.prototype.switchPanningModelToHRTF=function(){if(t.Engine.audioEngine.canUseWebAudio)for(var e=0;e<this.soundCollection.length;e++)this.soundCollection[e].switchPanningModelToHRTF()},e.prototype.switchPanningModelToEqualPower=function(){if(t.Engine.audioEngine.canUseWebAudio)for(var e=0;e<this.soundCollection.length;e++)this.soundCollection[e].switchPanningModelToEqualPower()},e.prototype.connectToAnalyser=function(e){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas(),this._connectedAnalyser=e,t.Engine.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.disconnect(),this._connectedAnalyser.connectAudioNodes(this._outputAudioNode,t.Engine.audioEngine.masterGain))},e}();t.SoundTrack=e}(l||(l={})),function(t){var e=function(){function e(e){this.SMOOTHING=.75,this.FFT_SIZE=512,this.BARGRAPHAMPLITUDE=256,this.DEBUGCANVASPOS={x:20,y:20},this.DEBUGCANVASSIZE={width:320,height:200},this._scene=e,this._audioEngine=t.Engine.audioEngine,this._audioEngine.canUseWebAudio&&this._audioEngine.audioContext&&(this._webAudioAnalyser=this._audioEngine.audioContext.createAnalyser(),this._webAudioAnalyser.minDecibels=-140,this._webAudioAnalyser.maxDecibels=0,this._byteFreqs=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._byteTime=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._floatFreqs=new Float32Array(this._webAudioAnalyser.frequencyBinCount))}return e.prototype.getFrequencyBinCount=function(){return this._audioEngine.canUseWebAudio?this._webAudioAnalyser.frequencyBinCount:0},e.prototype.getByteFrequencyData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteFrequencyData(this._byteFreqs)),this._byteFreqs},e.prototype.getByteTimeDomainData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteTimeDomainData(this._byteTime)),this._byteTime},e.prototype.getFloatFrequencyData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getFloatFrequencyData(this._floatFreqs)),this._floatFreqs},e.prototype.drawDebugCanvas=function(){var t=this;if(this._audioEngine.canUseWebAudio&&(this._debugCanvas||(this._debugCanvas=document.createElement("canvas"),this._debugCanvas.width=this.DEBUGCANVASSIZE.width,this._debugCanvas.height=this.DEBUGCANVASSIZE.height,this._debugCanvas.style.position="absolute",this._debugCanvas.style.top=this.DEBUGCANVASPOS.y+"px",this._debugCanvas.style.left=this.DEBUGCANVASPOS.x+"px",this._debugCanvasContext=this._debugCanvas.getContext("2d"),document.body.appendChild(this._debugCanvas),this._registerFunc=function(){t.drawDebugCanvas()},this._scene.registerBeforeRender(this._registerFunc)),this._registerFunc&&this._debugCanvasContext)){var e=this.getByteFrequencyData();this._debugCanvasContext.fillStyle="rgb(0, 0, 0)",this._debugCanvasContext.fillRect(0,0,this.DEBUGCANVASSIZE.width,this.DEBUGCANVASSIZE.height);for(var i=0;i<this.getFrequencyBinCount();i++){var n=e[i]/this.BARGRAPHAMPLITUDE,r=this.DEBUGCANVASSIZE.height*n,o=this.DEBUGCANVASSIZE.height-r-1,s=this.DEBUGCANVASSIZE.width/this.getFrequencyBinCount(),a=i/this.getFrequencyBinCount()*360;this._debugCanvasContext.fillStyle="hsl("+a+", 100%, 50%)",this._debugCanvasContext.fillRect(i*s,o,s,r)}}},e.prototype.stopDebugCanvas=function(){this._debugCanvas&&(this._registerFunc&&(this._scene.unregisterBeforeRender(this._registerFunc),this._registerFunc=null),document.body.removeChild(this._debugCanvas),this._debugCanvas=null,this._debugCanvasContext=null)},e.prototype.connectAudioNodes=function(t,e){this._audioEngine.canUseWebAudio&&(t.connect(this._webAudioAnalyser),this._webAudioAnalyser.connect(e))},e.prototype.dispose=function(){this._audioEngine.canUseWebAudio&&this._webAudioAnalyser.disconnect()},e}();t.Analyser=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u,h){void 0===r&&(r=null),void 0===o&&(o=!1),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===c&&(c=t.Engine.TEXTUREFORMAT_RGBA),void 0===u&&(u=!1),void 0===h&&(h=null);var p=e.call(this,n)||this;if(p.coordinatesMode=t.Texture.CUBIC_MODE,p.name=i,p.url=i,p._noMipmap=o,p.hasAlpha=!1,p._format=c,p._prefiltered=u,p.isCube=!0,p._textureMatrix=t.Matrix.Identity(),u&&(p.gammaSpace=!1),!i&&!s)return p;p._texture=p._getFromCache(i,o);var d=i.lastIndexOf("."),f=h||(d>-1?i.substring(d).toLowerCase():"");if(!s&&(".dds"===f||r||(r=["_px.jpg","_py.jpg","_pz.jpg","_nx.jpg","_ny.jpg","_nz.jpg"]),s=[],r))for(var m=0;m<r.length;m++)s.push(i+r[m]);return p._files=s,p._texture?a&&(p._texture.isReady?t.Tools.SetImmediate(function(){return a()}):p._texture.onLoadedObservable.add(a)):n.useDelayedTextureLoading?p.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED:p._texture=u?n.getEngine().createPrefilteredCubeTexture(i,n,p.lodGenerationScale,p.lodGenerationOffset,a,l,c,h):n.getEngine().createCubeTexture(i,n,s,o,a,l,p._format,h),p}return o(i,e),i.CreateFromImages=function(t,e,n){return new i("",e,null,n,t)},i.CreateFromPrefilteredData=function(t,e,n){return void 0===n&&(n=null),new i(t,e,null,!1,null,null,null,void 0,!0,n)},i.prototype.delayLoad=function(){if(this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED){var e=this.getScene();e&&(this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap),this._texture||(this._prefiltered?this._texture=e.getEngine().createPrefilteredCubeTexture(this.url,e,this.lodGenerationScale,this.lodGenerationOffset,void 0,void 0,this._format):this._texture=e.getEngine().createCubeTexture(this.url,e,this._files,this._noMipmap,void 0,void 0,this._format)))}},i.prototype.getReflectionTextureMatrix=function(){return this._textureMatrix},i.prototype.setReflectionTextureMatrix=function(t){this._textureMatrix=t},i.Parse=function(e,n,r){var o=t.SerializationHelper.Parse(function(){return new i(r+e.name,n,e.extensions)},e,n);if(e.animations)for(var s=0;s<e.animations.length;s++){var a=e.animations[s];o.animations.push(t.Animation.Parse(a))}return o},i.prototype.clone=function(){var e=this;return t.SerializationHelper.Clone(function(){var t=e.getScene();return t?new i(e.url,t,e._extensions,e._noMipmap,e._files):e},this)},i}(t.BaseTexture);t.CubeTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u,h,p){void 0===s&&(s=!0),void 0===a&&(a=t.Engine.TEXTURETYPE_UNSIGNED_INT),void 0===l&&(l=!1),void 0===c&&(c=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===u&&(u=!0),void 0===h&&(h=!1),void 0===p&&(p=!1);var d=e.call(this,null,r,!o)||this;return d.isCube=l,d.renderList=new Array,d.renderParticles=!0,d.renderSprites=!1,d.coordinatesMode=t.Texture.PROJECTION_MODE,d.ignoreCameraViewport=!1,d.onBeforeBindObservable=new t.Observable,d.onAfterUnbindObservable=new t.Observable,d.onBeforeRenderObservable=new t.Observable,d.onAfterRenderObservable=new t.Observable,d.onClearObservable=new t.Observable,d._currentRefreshId=-1,d._refreshRate=1,d._samples=1,(r=d.getScene())?(d._engine=r.getEngine(),d.name=i,d.isRenderTarget=!0,d._initialSizeParameter=n,d._processSizeParameter(n),d._resizeObserver=d.getScene().getEngine().onResizeObservable.add(function(){}),d._generateMipMaps=!!o,d._doNotChangeAspectRatio=s,d._renderingManager=new t.RenderingManager(r),p?d:(d._renderTargetOptions={generateMipMaps:o,type:a,samplingMode:c,generateDepthBuffer:u,generateStencilBuffer:h},c===t.Texture.NEAREST_SAMPLINGMODE&&(d.wrapU=t.Texture.CLAMP_ADDRESSMODE,d.wrapV=t.Texture.CLAMP_ADDRESSMODE),l?(d._texture=r.getEngine().createRenderTargetCubeTexture(d.getRenderSize(),d._renderTargetOptions),d.coordinatesMode=t.Texture.INVCUBIC_MODE,d._textureMatrix=t.Matrix.Identity()):d._texture=r.getEngine().createRenderTargetTexture(d._size,d._renderTargetOptions),d)):d}return o(i,e),Object.defineProperty(i,"REFRESHRATE_RENDER_ONCE",{get:function(){return i._REFRESHRATE_RENDER_ONCE},enumerable:!0,configurable:!0}),Object.defineProperty(i,"REFRESHRATE_RENDER_ONEVERYFRAME",{get:function(){return i._REFRESHRATE_RENDER_ONEVERYFRAME},enumerable:!0,configurable:!0}),Object.defineProperty(i,"REFRESHRATE_RENDER_ONEVERYTWOFRAMES",{get:function(){return i._REFRESHRATE_RENDER_ONEVERYTWOFRAMES},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onAfterUnbind",{set:function(t){this._onAfterUnbindObserver&&this.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=this.onAfterUnbindObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onBeforeRender",{set:function(t){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onAfterRender",{set:function(t){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onClear",{set:function(t){this._onClearObserver&&this.onClearObservable.remove(this._onClearObserver),this._onClearObserver=this.onClearObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderTargetOptions",{get:function(){return this._renderTargetOptions},enumerable:!0,configurable:!0}),i.prototype._onRatioRescale=function(){this._sizeRatio&&this.resize(this._initialSizeParameter)},i.prototype._processSizeParameter=function(t){t.ratio?(this._sizeRatio=t.ratio,this._size={width:this._bestReflectionRenderTargetDimension(this._engine.getRenderWidth(),this._sizeRatio),height:this._bestReflectionRenderTargetDimension(this._engine.getRenderHeight(),this._sizeRatio)}):this._size=t},Object.defineProperty(i.prototype,"samples",{get:function(){return this._samples},set:function(t){if(this._samples!==t){var e=this.getScene();e&&(this._samples=e.getEngine().updateRenderTargetTextureSampleCount(this._texture,t))}},enumerable:!0,configurable:!0}),i.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},Object.defineProperty(i.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(t){this._refreshRate=t,this.resetRefreshCounter()},enumerable:!0,configurable:!0}),i.prototype.addPostProcess=function(e){if(!this._postProcessManager){var i=this.getScene();if(!i)return;this._postProcessManager=new t.PostProcessManager(i),this._postProcesses=new Array}this._postProcesses.push(e),this._postProcesses[0].autoClear=!1},i.prototype.clearPostProcesses=function(t){if(this._postProcesses){if(t)for(var e=0,i=this._postProcesses;e<i.length;e++){i[e].dispose()}this._postProcesses=[]}},i.prototype.removePostProcess=function(t){if(this._postProcesses){var e=this._postProcesses.indexOf(t);-1!==e&&(this._postProcesses.splice(e,1),this._postProcesses.length>0&&(this._postProcesses[0].autoClear=!1))}},i.prototype._shouldRender=function(){return-1===this._currentRefreshId?(this._currentRefreshId=1,!0):this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,!0):(this._currentRefreshId++,!1)},i.prototype.getRenderSize=function(){return this._size.width?this._size.width:this._size},i.prototype.getRenderWidth=function(){return this._size.width?this._size.width:this._size},i.prototype.getRenderHeight=function(){return this._size.width?this._size.height:this._size},Object.defineProperty(i.prototype,"canRescale",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.scale=function(t){var e=this.getRenderSize()*t;this.resize(e)},i.prototype.getReflectionTextureMatrix=function(){return this.isCube?this._textureMatrix:e.prototype.getReflectionTextureMatrix.call(this)},i.prototype.resize=function(t){this.releaseInternalTexture();var e=this.getScene();e&&(this._processSizeParameter(t),this.isCube?this._texture=e.getEngine().createRenderTargetCubeTexture(this.getRenderSize(),this._renderTargetOptions):this._texture=e.getEngine().createRenderTargetTexture(this._size,this._renderTargetOptions))},i.prototype.render=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),a=this.getScene()){var i,n=a.getEngine();if(void 0!==this.useCameraPostProcesses&&(t=this.useCameraPostProcesses),this._waitingRenderList){this.renderList=[];for(var r=0;r<this._waitingRenderList.length;r++){var o=this._waitingRenderList[r],s=a.getMeshByID(o);s&&this.renderList.push(s)}delete this._waitingRenderList}if(this.renderListPredicate){var a;if(this.renderList?this.renderList.splice(0):this.renderList=[],!(a=this.getScene()))return;var l=a.meshes;for(r=0;r<l.length;r++){var c=l[r];this.renderListPredicate(c)&&this.renderList.push(c)}}this.onBeforeBindObservable.notifyObservers(this),this.activeCamera?(i=this.activeCamera,n.setViewport(this.activeCamera.viewport,this.getRenderWidth(),this.getRenderHeight()),this.activeCamera!==a.activeCamera&&a.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(!0))):(i=a.activeCamera)&&n.setViewport(i.viewport,this.getRenderWidth(),this.getRenderHeight()),this._renderingManager.reset();for(var u=this.renderList?this.renderList:a.getActiveMeshes().data,h=this.renderList?this.renderList.length:a.getActiveMeshes().length,p=a.getRenderId(),d=0;d<h;d++){if(c=u[d]){if(!c.isReady()){this.resetRefreshCounter();continue}c._preActivateForIntermediateRendering(p);var f;if(f=!(this.renderList||!i)&&0==(c.layerMask&i.layerMask),c.isEnabled()&&c.isVisible&&c.subMeshes&&!f){c._activate(p);for(var m=0;m<c.subMeshes.length;m++){var g=c.subMeshes[m];a._activeIndices.addCount(g.indexCount,!1),this._renderingManager.dispatch(g,c)}}}}for(var y=0;y<a.particleSystems.length;y++){var _=a.particleSystems[y],v=_.emitter;_.isStarted()&&v&&v.position&&v.isEnabled()&&u.indexOf(v)>=0&&this._renderingManager.dispatchParticles(_)}if(this.isCube)for(var b=0;b<6;b++)this.renderToTarget(b,u,h,t,e),a.incrementRenderId(),a.resetCachedMaterial();else this.renderToTarget(0,u,h,t,e);this.onAfterUnbindObservable.notifyObservers(this),a.activeCamera&&(this.activeCamera&&this.activeCamera!==a.activeCamera&&a.setTransformMatrix(a.activeCamera.getViewMatrix(),a.activeCamera.getProjectionMatrix(!0)),n.setViewport(a.activeCamera.viewport)),a.resetCachedMaterial()}},i.prototype._bestReflectionRenderTargetDimension=function(e,i){var n=e*i,r=t.Tools.NearestPOT(n+16384/(128+n));return Math.min(t.Tools.FloorPOT(e),r)},i.prototype.unbindFrameBuffer=function(t,e){var i=this;this._texture&&t.unBindFramebuffer(this._texture,this.isCube,function(){i.onAfterRenderObservable.notifyObservers(e)})},i.prototype.renderToTarget=function(e,i,n,r,o){var s=this.getScene();if(s){var a=s.getEngine();this._texture&&(this._postProcessManager?this._postProcessManager._prepareFrame(this._texture,this._postProcesses):r&&s.postProcessManager._prepareFrame(this._texture)||this._texture&&a.bindFramebuffer(this._texture,this.isCube?e:void 0,void 0,void 0,this.ignoreCameraViewport),this.onBeforeRenderObservable.notifyObservers(e),this.onClearObservable.hasObservers()?this.onClearObservable.notifyObservers(a):a.clear(this.clearColor||s.clearColor,!0,!0,!0),this._doNotChangeAspectRatio||s.updateTransformMatrix(!0),this._renderingManager.render(this.customRenderFunction,i,this.renderParticles,this.renderSprites),this._postProcessManager?this._postProcessManager._finalizeFrame(!1,this._texture,e,this._postProcesses,this.ignoreCameraViewport):r&&s.postProcessManager._finalizeFrame(!1,this._texture,e),this._doNotChangeAspectRatio||s.updateTransformMatrix(!0),o&&t.Tools.DumpFramebuffer(this.getRenderWidth(),this.getRenderHeight(),a),this.isCube&&5!==e?this.onAfterRenderObservable.notifyObservers(e):(this.isCube&&5===e&&a.generateMipMapsForCubemap(this._texture),this.unbindFrameBuffer(a,e)))}},i.prototype.setRenderingOrder=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this._renderingManager.setRenderingOrder(t,e,i,n)},i.prototype.setRenderingAutoClearDepthStencil=function(t,e){this._renderingManager.setRenderingAutoClearDepthStencil(t,e)},i.prototype.clone=function(){var t=this.getSize(),e=new i(this.name,t.width,this.getScene(),this._renderTargetOptions.generateMipMaps,this._doNotChangeAspectRatio,this._renderTargetOptions.type,this.isCube,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer,this._renderTargetOptions.generateStencilBuffer);return e.hasAlpha=this.hasAlpha,e.level=this.level,e.coordinatesMode=this.coordinatesMode,this.renderList&&(e.renderList=this.renderList.slice(0)),e},i.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);if(t.renderTargetSize=this.getRenderSize(),t.renderList=[],this.renderList)for(var i=0;i<this.renderList.length;i++)t.renderList.push(this.renderList[i].id);return t},i.prototype.disposeFramebufferObjects=function(){var t=this.getInternalTexture(),e=this.getScene();t&&e&&e.getEngine()._releaseFramebufferObjects(t)},i.prototype.dispose=function(){this._postProcessManager&&(this._postProcessManager.dispose(),this._postProcessManager=null),this.clearPostProcesses(!0),this._resizeObserver&&(this.getScene().getEngine().onResizeObservable.remove(this._resizeObserver),this._resizeObserver=null),this.renderList=null;var t=this.getScene();if(t){var i=t.customRenderTargets.indexOf(this);i>=0&&t.customRenderTargets.splice(i,1);for(var n=0,r=t.cameras;n<r.length;n++){var o=r[n];(i=o.customRenderTargets.indexOf(this))>=0&&o.customRenderTargets.splice(i,1)}e.prototype.dispose.call(this)}},i.prototype._rebuild=function(){this.refreshRate===i.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=i.REFRESHRATE_RENDER_ONCE),this._postProcessManager&&this._postProcessManager._rebuild()},i._REFRESHRATE_RENDER_ONCE=0,i._REFRESHRATE_RENDER_ONEVERYFRAME=1,i._REFRESHRATE_RENDER_ONEVERYTWOFRAMES=2,i}(t.Texture);t.RenderTargetTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s){var a=this,l=!(!s||!s.generateMipMaps)&&s.generateMipMaps,c=!(!s||!s.generateDepthTexture)&&s.generateDepthTexture,u=!s||void 0===s.doNotChangeAspectRatio||s.doNotChangeAspectRatio;if((a=e.call(this,i,n,o,l,u)||this)._engine=o.getEngine(),a.isSupported){for(var h=[],p=[],d=0;d<r;d++)s&&s.types&&void 0!==s.types[d]?h.push(s.types[d]):h.push(s&&s.defaultType?s.defaultType:t.Engine.TEXTURETYPE_UNSIGNED_INT),s&&s.samplingModes&&void 0!==s.samplingModes[d]?p.push(s.samplingModes[d]):p.push(t.Texture.BILINEAR_SAMPLINGMODE);var f=!s||void 0===s.generateDepthBuffer||s.generateDepthBuffer,m=!(!s||void 0===s.generateStencilBuffer)&&s.generateStencilBuffer;return a._size=n,a._multiRenderTargetOptions={samplingModes:p,generateMipMaps:l,generateDepthBuffer:f,generateStencilBuffer:m,generateDepthTexture:c,types:h,textureCount:r},a._createInternalTextures(),a._createTextures(),a}a.dispose()}return o(i,e),Object.defineProperty(i.prototype,"isSupported",{get:function(){return this._engine.webGLVersion>1||this._engine.getCaps().drawBuffersExtension},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textures",{get:function(){return this._textures},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"depthTexture",{get:function(){return this._textures[this._textures.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wrapU",{set:function(t){if(this._textures)for(var e=0;e<this._textures.length;e++)this._textures[e].wrapU=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wrapV",{set:function(t){if(this._textures)for(var e=0;e<this._textures.length;e++)this._textures[e].wrapV=t},enumerable:!0,configurable:!0}),i.prototype._rebuild=function(){this.releaseInternalTextures(),this._createInternalTextures();for(var t=0;t<this._internalTextures.length;t++)this._textures[t]._texture=this._internalTextures[t];this._texture=this._internalTextures[0]},i.prototype._createInternalTextures=function(){this._internalTextures=this._engine.createMultipleRenderTarget(this._size,this._multiRenderTargetOptions)},i.prototype._createTextures=function(){this._textures=[];for(var e=0;e<this._internalTextures.length;e++){var i=new t.Texture(null,this.getScene());i._texture=this._internalTextures[e],this._textures.push(i)}this._texture=this._internalTextures[0]},Object.defineProperty(i.prototype,"samples",{get:function(){return this._samples},set:function(t){this._samples!==t&&(this._samples=this._engine.updateMultipleRenderTargetTextureSampleCount(this._internalTextures,t))},enumerable:!0,configurable:!0}),i.prototype.resize=function(t){this.releaseInternalTextures(),this._internalTextures=this._engine.createMultipleRenderTarget(t,this._multiRenderTargetOptions),this._createInternalTextures()},i.prototype.unbindFrameBuffer=function(t,e){var i=this;t.unBindMultiColorAttachmentFramebuffer(this._internalTextures,this.isCube,function(){i.onAfterRenderObservable.notifyObservers(e)})},i.prototype.dispose=function(){this.releaseInternalTextures(),e.prototype.dispose.call(this)},i.prototype.releaseInternalTextures=function(){if(this._internalTextures)for(var t=this._internalTextures.length-1;t>=0;t--)void 0!==this._internalTextures[t]&&(this._internalTextures[t].dispose(),this._internalTextures.splice(t,1))},i}(t.RenderTargetTexture);t.MultiRenderTarget=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===s&&(s=t.Engine.TEXTURETYPE_UNSIGNED_INT),void 0===a&&(a=t.Texture.BILINEAR_SAMPLINGMODE),void 0===l&&(l=!0);var c=e.call(this,i,n,r,o,!0,s,!1,a,l)||this;return c.mirrorPlane=new t.Plane(0,1,0,1),c._transformMatrix=t.Matrix.Zero(),c._mirrorMatrix=t.Matrix.Zero(),c._adaptiveBlurKernel=0,c._blurKernelX=0,c._blurKernelY=0,c._blurRatio=1,c.ignoreCameraViewport=!0,c.onBeforeRenderObservable.add(function(){t.Matrix.ReflectionToRef(c.mirrorPlane,c._mirrorMatrix),c._savedViewMatrix=r.getViewMatrix(),c._mirrorMatrix.multiplyToRef(c._savedViewMatrix,c._transformMatrix),r.setTransformMatrix(c._transformMatrix,r.getProjectionMatrix()),r.clipPlane=c.mirrorPlane,r.getEngine().cullBackFaces=!1,r._mirroredCameraPosition=t.Vector3.TransformCoordinates(r.activeCamera.globalPosition,c._mirrorMatrix)}),c.onAfterRenderObservable.add(function(){r.setTransformMatrix(c._savedViewMatrix,r.getProjectionMatrix()),r.getEngine().cullBackFaces=!0,r._mirroredCameraPosition=null,delete r.clipPlane}),c}return o(i,e),Object.defineProperty(i.prototype,"blurRatio",{get:function(){return this._blurRatio},set:function(t){this._blurRatio!==t&&(this._blurRatio=t,this._preparePostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"adaptiveBlurKernel",{set:function(t){this._adaptiveBlurKernel=t,this._autoComputeBlurKernel()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blurKernel",{set:function(t){this.blurKernelX=t,this.blurKernelY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blurKernelX",{get:function(){return this._blurKernelX},set:function(t){this._blurKernelX!==t&&(this._blurKernelX=t,this._preparePostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blurKernelY",{get:function(){return this._blurKernelY},set:function(t){this._blurKernelY!==t&&(this._blurKernelY=t,this._preparePostProcesses())},enumerable:!0,configurable:!0}),i.prototype._autoComputeBlurKernel=function(){var t=this.getScene().getEngine(),e=this.getRenderWidth()/t.getRenderWidth(),i=this.getRenderHeight()/t.getRenderHeight();this.blurKernelX=this._adaptiveBlurKernel*e,this.blurKernelY=this._adaptiveBlurKernel*i},i.prototype._onRatioRescale=function(){this._sizeRatio&&(this.resize(this._initialSizeParameter),this._adaptiveBlurKernel||this._preparePostProcesses()),this._adaptiveBlurKernel&&this._autoComputeBlurKernel()},i.prototype._preparePostProcesses=function(){if(this.clearPostProcesses(!0),this._blurKernelX&&this._blurKernelY){var e=this.getScene().getEngine(),i=e.getCaps().textureFloatRender?t.Engine.TEXTURETYPE_FLOAT:t.Engine.TEXTURETYPE_HALF_FLOAT;this._blurX=new t.BlurPostProcess("horizontal blur",new t.Vector2(1,0),this._blurKernelX,this._blurRatio,null,t.Texture.BILINEAR_SAMPLINGMODE,e,!1,i),this._blurX.autoClear=!1,1===this._blurRatio&&this.samples<2&&this._texture?this._blurX.inputTexture=this._texture:this._blurX.alwaysForcePOT=!0,this._blurY=new t.BlurPostProcess("vertical blur",new t.Vector2(0,1),this._blurKernelY,this._blurRatio,null,t.Texture.BILINEAR_SAMPLINGMODE,e,!1,i),this._blurY.autoClear=!1,this._blurY.alwaysForcePOT=1!==this._blurRatio,this.addPostProcess(this._blurX),this.addPostProcess(this._blurY)}else this._blurY&&(this.removePostProcess(this._blurY),this._blurY.dispose(),this._blurY=null),this._blurX&&(this.removePostProcess(this._blurX),this._blurX.dispose(),this._blurX=null)},i.prototype.clone=function(){var t=this.getScene();if(!t)return this;var e=this.getSize(),n=new i(this.name,e.width,t,this._renderTargetOptions.generateMipMaps,this._renderTargetOptions.type,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer);return n.hasAlpha=this.hasAlpha,n.level=this.level,n.mirrorPlane=this.mirrorPlane.clone(),this.renderList&&(n.renderList=this.renderList.slice(0)),n},i.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);return t.mirrorPlane=this.mirrorPlane.asArray(),t},i}(t.RenderTargetTexture);t.MirrorTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,i,n,r,o,!0)||this;return s.refractionPlane=new t.Plane(0,1,0,1),s.depth=2,s.onBeforeRenderObservable.add(function(){r.clipPlane=s.refractionPlane}),s.onAfterRenderObservable.add(function(){delete r.clipPlane}),s}return o(i,e),i.prototype.clone=function(){var t=this.getScene();if(!t)return this;var e=this.getSize(),n=new i(this.name,e.width,t,this._generateMipMaps);return n.hasAlpha=this.hasAlpha,n.level=this.level,n.refractionPlane=this.refractionPlane.clone(),this.renderList&&(n.renderList=this.renderList.slice(0)),n.depth=this.depth,n},i.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);return t.mirrorPlane=this.refractionPlane.asArray(),t.depth=this.depth,t},i}(t.RenderTargetTexture);t.RefractionTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a){void 0===r&&(r=null),void 0===s&&(s=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===a&&(a=t.Engine.TEXTUREFORMAT_RGBA);var l=e.call(this,null,r,!o,void 0,s,void 0,void 0,void 0,void 0,a)||this;l.name=i,l._engine=l.getScene().getEngine(),l.wrapU=t.Texture.CLAMP_ADDRESSMODE,l.wrapV=t.Texture.CLAMP_ADDRESSMODE,l._generateMipMaps=o,n.getContext?(l._canvas=n,l._texture=l._engine.createDynamicTexture(n.width,n.height,o,s)):(l._canvas=document.createElement("canvas"),n.width?l._texture=l._engine.createDynamicTexture(n.width,n.height,o,s):l._texture=l._engine.createDynamicTexture(n,n,o,s));var c=l.getSize();return l._canvas.width=c.width,l._canvas.height=c.height,l._context=l._canvas.getContext("2d"),l}return o(i,e),Object.defineProperty(i.prototype,"canRescale",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype._recreate=function(t){this._canvas.width=t.width,this._canvas.height=t.height,this.releaseInternalTexture(),this._texture=this._engine.createDynamicTexture(t.width,t.height,this._generateMipMaps,this._samplingMode)},i.prototype.scale=function(t){var e=this.getSize();e.width*=t,e.height*=t,this._recreate(e)},i.prototype.scaleTo=function(t,e){var i=this.getSize();i.width=t,i.height=e,this._recreate(i)},i.prototype.getContext=function(){return this._context},i.prototype.clear=function(){var t=this.getSize();this._context.fillRect(0,0,t.width,t.height)},i.prototype.update=function(t){this._engine.updateDynamicTexture(this._texture,this._canvas,void 0===t||t,void 0,this._format||void 0)},i.prototype.drawText=function(t,e,i,n,r,o,s,a){void 0===a&&(a=!0);var l=this.getSize();if(o&&(this._context.fillStyle=o,this._context.fillRect(0,0,l.width,l.height)),this._context.font=n,null==e){var c=this._context.measureText(t);e=(l.width-c.width)/2}if(null==i){var u=parseInt(n.replace(/\D/g,""));i=l.height/2+u/3.65}this._context.fillStyle=r,this._context.fillText(t,e,i),a&&this.update(s)},i.prototype.clone=function(){var t=this.getScene();if(!t)return this;var e=this.getSize(),n=new i(this.name,e,t,this._generateMipMaps);return n.hasAlpha=this.hasAlpha,n.level=this.level,n.wrapU=this.wrapU,n.wrapV=this.wrapV,n},i.prototype._rebuild=function(){this.update()},i}(t.Texture);t.DynamicTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===l&&(l={autoPlay:!0,loop:!0,autoUpdateTexture:!0});var c=e.call(this,null,r,!o,s)||this;return c._createInternalTexture=function(){null==c._texture&&(!c._engine.needPOTTextures||t.Tools.IsExponentOfTwo(c.video.videoWidth)&&t.Tools.IsExponentOfTwo(c.video.videoHeight)?(c.wrapU=t.Texture.WRAP_ADDRESSMODE,c.wrapV=t.Texture.WRAP_ADDRESSMODE):(c.wrapU=t.Texture.CLAMP_ADDRESSMODE,c.wrapV=t.Texture.CLAMP_ADDRESSMODE,c._generateMipMaps=!1),c._texture=c._engine.createDynamicTexture(c.video.videoWidth,c.video.videoHeight,c._generateMipMaps,c._samplingMode),c._texture.isReady=!0,c._updateInternalTexture())},c.reset=function(){null!=c._texture&&(c._texture.dispose(),c._texture=null)},c._updateInternalTexture=function(t){null!=c._texture&&c._texture.isReady&&(c.video.readyState<c.video.HAVE_CURRENT_DATA||c._engine.updateVideoTexture(c._texture,c.video,c._invertY))},c._engine=c.getScene().getEngine(),c._generateMipMaps=o,c._samplingMode=a,c.autoUpdateTexture=l.autoUpdateTexture,c.name=i||c._getName(n),c.video=c._getVideo(n),void 0!==l.autoPlay&&(c.video.autoplay=l.autoPlay),void 0!==l.loop&&(c.video.loop=l.loop),c.video.addEventListener("canplay",c._createInternalTexture),c.video.addEventListener("paused",c._updateInternalTexture),c.video.addEventListener("seeked",c._updateInternalTexture),c.video.addEventListener("emptied",c.reset),c.video.readyState>=c.video.HAVE_CURRENT_DATA&&c._createInternalTexture(),c}return o(i,e),i.prototype._getName=function(t){return t instanceof HTMLVideoElement?t.currentSrc:"object"==typeof t?t.toString():t},i.prototype._getVideo=function(t){if(t instanceof HTMLVideoElement)return t;var e=document.createElement("video");return"string"==typeof t?e.src=t:t.forEach(function(t){var i=document.createElement("source");i.src=t,e.appendChild(i)}),e},i.prototype._rebuild=function(){this.update()},i.prototype.update=function(){this.autoUpdateTexture&&this.updateTexture(!0)},i.prototype.updateTexture=function(t){t&&(this.video.paused||this._updateInternalTexture())},i.prototype.updateURL=function(t){this.video.src=t},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.video.removeEventListener("canplay",this._createInternalTexture),this.video.removeEventListener("paused",this._updateInternalTexture),this.video.removeEventListener("seeked",this._updateInternalTexture),this.video.removeEventListener("emptied",this.reset)},i.CreateFromWebCam=function(e,n,r){var o,s=document.createElement("video");r&&r.deviceId&&(o={exact:r.deviceId}),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia&&navigator.getUserMedia({video:{deviceId:o,width:{min:r&&r.minWidth||256,max:r&&r.maxWidth||640},height:{min:r&&r.minHeight||256,max:r&&r.maxHeight||480}}},function(t){void 0!==s.mozSrcObject?s.mozSrcObject=t:s.src=window.URL&&window.URL.createObjectURL(t)||t,s.play(),n&&n(new i("video",s,e,!0,!0))},function(e){t.Tools.Error(e.name)})},i}(t.Texture);t.VideoTexture=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===c&&(c=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===u&&(u=t.Engine.TEXTURETYPE_UNSIGNED_INT);var h=e.call(this,null,s,!a,l)||this;return h.format=o,h._engine=s.getEngine(),h._texture=s.getEngine().createRawTexture(i,n,r,o,a,l,c,null,u),h.wrapU=t.Texture.CLAMP_ADDRESSMODE,h.wrapV=t.Texture.CLAMP_ADDRESSMODE,h}return o(i,e),i.prototype.update=function(t){this._engine.updateRawTexture(this._texture,t,this._texture.format,this._texture.invertY,void 0,this._texture.type)},i.CreateLuminanceTexture=function(e,n,r,o,s,a,l){return void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=t.Texture.TRILINEAR_SAMPLINGMODE),new i(e,n,r,t.Engine.TEXTUREFORMAT_LUMINANCE,o,s,a,l)},i.CreateLuminanceAlphaTexture=function(e,n,r,o,s,a,l){return void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=t.Texture.TRILINEAR_SAMPLINGMODE),new i(e,n,r,t.Engine.TEXTUREFORMAT_LUMINANCE_ALPHA,o,s,a,l)},i.CreateAlphaTexture=function(e,n,r,o,s,a,l){return void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=t.Texture.TRILINEAR_SAMPLINGMODE),new i(e,n,r,t.Engine.TEXTUREFORMAT_ALPHA,o,s,a,l)},i.CreateRGBTexture=function(e,n,r,o,s,a,l,c){return void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===c&&(c=t.Engine.TEXTURETYPE_UNSIGNED_INT),new i(e,n,r,t.Engine.TEXTUREFORMAT_RGB,o,s,a,l,c)},i.CreateRGBATexture=function(e,n,r,o,s,a,l,c){return void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===c&&(c=t.Engine.TEXTURETYPE_UNSIGNED_INT),new i(e,n,r,t.Engine.TEXTUREFORMAT_RGBA,o,s,a,l,c)},i}(t.Texture);t.RawTexture=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o,s,a,l,c,u,h,p,d,f){void 0===a&&(a=t.Texture.NEAREST_SAMPLINGMODE),void 0===u&&(u=null),void 0===h&&(h=t.Engine.TEXTURETYPE_UNSIGNED_INT),void 0===p&&(p="postprocess"),void 0===f&&(f=!1),this.name=e,this.width=-1,this.height=-1,this.autoClear=!0,this.alphaMode=t.Engine.ALPHA_DISABLE,this.animations=new Array,this.enablePixelPerfectMode=!1,this.scaleMode=t.Engine.SCALEMODE_FLOOR,this.alwaysForcePOT=!1,this.samples=1,this.adaptScaleToCurrentViewport=!1,this._reusable=!1,this._textures=new t.SmartArray(2),this._currentRenderTextureInd=0,this._scaleRatio=new t.Vector2(1,1),this._texelSize=t.Vector2.Zero(),this.onActivateObservable=new t.Observable,this.onSizeChangedObservable=new t.Observable,this.onApplyObservable=new t.Observable,this.onBeforeRenderObservable=new t.Observable,this.onAfterRenderObservable=new t.Observable,null!=s?(this._camera=s,this._scene=s.getScene(),s.attachPostProcess(this),this._engine=this._scene.getEngine(),this._scene.postProcesses.push(this)):l&&(this._engine=l,this._engine.postProcesses.push(this)),this._options=o,this.renderTargetSamplingMode=a||t.Texture.NEAREST_SAMPLINGMODE,this._reusable=c||!1,this._textureType=h,this._samplers=r||[],this._samplers.push("textureSampler"),this._fragmentUrl=i,this._vertexUrl=p,this._parameters=n||[],this._parameters.push("scale"),this._indexParameters=d,f||this.updateEffect(u)}return Object.defineProperty(e.prototype,"onActivate",{set:function(t){this._onActivateObserver&&this.onActivateObservable.remove(this._onActivateObserver),t&&(this._onActivateObserver=this.onActivateObservable.add(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSizeChanged",{set:function(t){this._onSizeChangedObserver&&this.onSizeChangedObservable.remove(this._onSizeChangedObserver),this._onSizeChangedObserver=this.onSizeChangedObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onApply",{set:function(t){this._onApplyObserver&&this.onApplyObservable.remove(this._onApplyObserver),this._onApplyObserver=this.onApplyObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBeforeRender",{set:function(t){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onAfterRender",{set:function(t){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputTexture",{get:function(){return this._textures.data[this._currentRenderTextureInd]},set:function(t){this._forcedOutputTexture=t},enumerable:!0,configurable:!0}),e.prototype.getCamera=function(){return this._camera},Object.defineProperty(e.prototype,"texelSize",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.texelSize:(this._forcedOutputTexture&&this._texelSize.copyFromFloats(1/this._forcedOutputTexture.width,1/this._forcedOutputTexture.height),this._texelSize)},enumerable:!0,configurable:!0}),e.prototype.getEngine=function(){return this._engine},e.prototype.getEffect=function(){return this._effect},e.prototype.shareOutputWith=function(t){return this._disposeTextures(),this._shareOutputWithPostProcess=t,this},e.prototype.updateEffect=function(t,e,i,n,r,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this._effect=this._engine.createEffect({vertex:this._vertexUrl,fragment:this._fragmentUrl},["position"],e||this._parameters,i||this._samplers,null!==t?t:"",void 0,r,o,n||this._indexParameters)},e.prototype.isReusable=function(){return this._reusable},e.prototype.markTextureDirty=function(){this.width=-1},e.prototype.activate=function(e,i,n){var r=this;void 0===i&&(i=null);var o,s=(e=e||this._camera).getScene(),a=s.getEngine(),l=a.getCaps().maxTextureSize,c=(i?i.width:this._engine.getRenderWidth(!0))*this._options|0,u=(i?i.height:this._engine.getRenderHeight(!0))*this._options|0,h=this._options.width||c,p=this._options.height||u;if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this.adaptScaleToCurrentViewport){var d=a.currentViewport;d&&(h*=d.width,p*=d.height)}if((this.renderTargetSamplingMode===t.Texture.TRILINEAR_SAMPLINGMODE||this.alwaysForcePOT)&&(this._options.width||(h=a.needPOTTextures?t.Tools.GetExponentOfTwo(h,l,this.scaleMode):h),this._options.height||(p=a.needPOTTextures?t.Tools.GetExponentOfTwo(p,l,this.scaleMode):p)),this.width!==h||this.height!==p){if(this._textures.length>0){for(var f=0;f<this._textures.length;f++)this._engine._releaseTexture(this._textures.data[f]);this._textures.reset()}this.width=h,this.height=p;var m={width:this.width,height:this.height},g={generateMipMaps:!1,generateDepthBuffer:n||0===e._postProcesses.indexOf(this),generateStencilBuffer:(n||0===e._postProcesses.indexOf(this))&&this._engine.isStencilEnable,samplingMode:this.renderTargetSamplingMode,type:this._textureType};this._textures.push(this._engine.createRenderTargetTexture(m,g)),this._reusable&&this._textures.push(this._engine.createRenderTargetTexture(m,g)),this._texelSize.copyFromFloats(1/this.width,1/this.height),this.onSizeChangedObservable.notifyObservers(this)}this._textures.forEach(function(t){t.samples!==r.samples&&r._engine.updateRenderTargetTextureSampleCount(t,r.samples)})}this._shareOutputWithPostProcess?o=this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?(o=this._forcedOutputTexture,this.width=this._forcedOutputTexture.width,this.height=this._forcedOutputTexture.height):o=this.inputTexture,this.enablePixelPerfectMode?(this._scaleRatio.copyFromFloats(c/h,u/p),this._engine.bindFramebuffer(o,0,c,u,!0)):(this._scaleRatio.copyFromFloats(1,1),this._engine.bindFramebuffer(o,0,void 0,void 0,!0)),this.onActivateObservable.notifyObservers(e),this.autoClear&&this.alphaMode===t.Engine.ALPHA_DISABLE&&this._engine.clear(this.clearColor?this.clearColor:s.clearColor,!0,!0,!0),this._reusable&&(this._currentRenderTextureInd=(this._currentRenderTextureInd+1)%2)},Object.defineProperty(e.prototype,"isSupported",{get:function(){return this._effect.isSupported},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.aspectRatio:this._forcedOutputTexture?this._forcedOutputTexture.width/this._forcedOutputTexture.height:this.width/this.height},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._effect&&this._effect.isReady()},e.prototype.apply=function(){return this._effect&&this._effect.isReady()?(this._engine.enableEffect(this._effect),this._engine.setState(!1),this._engine.setDepthBuffer(!1),this._engine.setDepthWrite(!1),this._engine.setAlphaMode(this.alphaMode),this.alphaConstants&&this.getEngine().setAlphaConstants(this.alphaConstants.r,this.alphaConstants.g,this.alphaConstants.b,this.alphaConstants.a),t=this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?this._forcedOutputTexture:this.inputTexture,this._effect._bindTexture("textureSampler",t),this._effect.setVector2("scale",this._scaleRatio),this.onApplyObservable.notifyObservers(this._effect),this._effect):null;var t},e.prototype._disposeTextures=function(){if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this._textures.length>0)for(var t=0;t<this._textures.length;t++)this._engine._releaseTexture(this._textures.data[t]);this._textures.dispose()}},e.prototype.dispose=function(t){if(t=t||this._camera,this._disposeTextures(),this._scene){var e=this._scene.postProcesses.indexOf(this);-1!==e&&this._scene.postProcesses.splice(e,1)}else{var i=this._engine.postProcesses.indexOf(this);-1!==i&&this._engine.postProcesses.splice(i,1)}t&&(t.detachPostProcess(this),0===t._postProcesses.indexOf(this)&&t._postProcesses.length>0&&this._camera._postProcesses[0].markTextureDirty(),this.onActivateObservable.clear(),this.onAfterRenderObservable.clear(),this.onApplyObservable.clear(),this.onBeforeRenderObservable.clear(),this.onSizeChangedObservable.clear())},e}();t.PostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){return void 0===r&&(r=null),void 0===l&&(l=t.Engine.TEXTURETYPE_UNSIGNED_INT),e.call(this,i,"pass",null,null,n,r,o,s,a,void 0,l)||this}return o(i,e),i}(t.PostProcess);t.PassPostProcess=e}(l||(l={}));var a;s=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(t){var e=function(){function e(i,n,r){this._bias=5e-5,this._blurBoxOffset=1,this._blurScale=2,this._blurKernel=1,this._useKernelBlur=!1,this._filter=e.FILTER_NONE,this._darkness=0,this._transparencyShadow=!1,this.frustumEdgeFalloff=0,this.forceBackFacesOnly=!1,this._lightDirection=t.Vector3.Zero(),this._viewMatrix=t.Matrix.Zero(),this._projectionMatrix=t.Matrix.Zero(),this._transformMatrix=t.Matrix.Zero(),this._currentFaceIndex=0,this._currentFaceIndexCache=0,this._defaultTextureMatrix=t.Matrix.Identity(),this._mapSize=i,this._light=n,this._scene=n.getScene(),n._shadowGenerator=this;var o=this._scene.getEngine().getCaps();r?o.textureFloatRender&&o.textureFloatLinearFiltering?this._textureType=t.Engine.TEXTURETYPE_FLOAT:o.textureHalfFloatRender&&o.textureHalfFloatLinearFiltering?this._textureType=t.Engine.TEXTURETYPE_HALF_FLOAT:this._textureType=t.Engine.TEXTURETYPE_UNSIGNED_INT:o.textureHalfFloatRender&&o.textureHalfFloatLinearFiltering?this._textureType=t.Engine.TEXTURETYPE_HALF_FLOAT:o.textureFloatRender&&o.textureFloatLinearFiltering?this._textureType=t.Engine.TEXTURETYPE_FLOAT:this._textureType=t.Engine.TEXTURETYPE_UNSIGNED_INT,this._initializeGenerator()}return Object.defineProperty(e,"FILTER_NONE",{get:function(){return e._FILTER_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FILTER_POISSONSAMPLING",{get:function(){return e._FILTER_POISSONSAMPLING},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FILTER_EXPONENTIALSHADOWMAP",{get:function(){return e._FILTER_EXPONENTIALSHADOWMAP},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FILTER_BLUREXPONENTIALSHADOWMAP",{get:function(){return e._FILTER_BLUREXPONENTIALSHADOWMAP},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FILTER_CLOSEEXPONENTIALSHADOWMAP",{get:function(){return e._FILTER_CLOSEEXPONENTIALSHADOWMAP},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FILTER_BLURCLOSEEXPONENTIALSHADOWMAP",{get:function(){return e._FILTER_BLURCLOSEEXPONENTIALSHADOWMAP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bias",{get:function(){return this._bias},set:function(t){this._bias=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurBoxOffset",{get:function(){return this._blurBoxOffset},set:function(t){this._blurBoxOffset!==t&&(this._blurBoxOffset=t,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurScale",{get:function(){return this._blurScale},set:function(t){this._blurScale!==t&&(this._blurScale=t,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurKernel",{get:function(){return this._blurKernel},set:function(t){this._blurKernel!==t&&(this._blurKernel=t,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useKernelBlur",{get:function(){return this._useKernelBlur},set:function(t){this._useKernelBlur!==t&&(this._useKernelBlur=t,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthScale",{get:function(){return void 0!==this._depthScale?this._depthScale:this._light.getDepthScale()},set:function(t){this._depthScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(t){if(this._light.needCube()){if(t===e.FILTER_BLUREXPONENTIALSHADOWMAP)return void(this.useExponentialShadowMap=!0);if(t===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP)return void(this.useCloseExponentialShadowMap=!0)}this._filter!==t&&(this._filter=t,this._disposeBlurPostProcesses(),this._applyFilterValues(),this._light._markMeshesAsLightDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usePoissonSampling",{get:function(){return this.filter===e.FILTER_POISSONSAMPLING},set:function(t){(t||this.filter===e.FILTER_POISSONSAMPLING)&&(this.filter=t?e.FILTER_POISSONSAMPLING:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useVarianceShadowMap",{get:function(){return t.Tools.Warn("VSM are now replaced by ESM. Please use useExponentialShadowMap instead."),this.useExponentialShadowMap},set:function(e){t.Tools.Warn("VSM are now replaced by ESM. Please use useExponentialShadowMap instead."),this.useExponentialShadowMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBlurVarianceShadowMap",{get:function(){return t.Tools.Warn("VSM are now replaced by ESM. Please use useBlurExponentialShadowMap instead."),this.useBlurExponentialShadowMap},set:function(e){t.Tools.Warn("VSM are now replaced by ESM. Please use useBlurExponentialShadowMap instead."),this.useBlurExponentialShadowMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useExponentialShadowMap",{get:function(){return this.filter===e.FILTER_EXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_EXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_EXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBlurExponentialShadowMap",{get:function(){return this.filter===e.FILTER_BLUREXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_BLUREXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_BLUREXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCloseExponentialShadowMap",{get:function(){return this.filter===e.FILTER_CLOSEEXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_CLOSEEXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_CLOSEEXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBlurCloseExponentialShadowMap",{get:function(){return this.filter===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),e.prototype.getDarkness=function(){return this._darkness},e.prototype.setDarkness=function(t){return this._darkness=t>=1?1:t<=0?0:t,this},e.prototype.setTransparencyShadow=function(t){return this._transparencyShadow=t,this},e.prototype.getShadowMap=function(){return this._shadowMap},e.prototype.getShadowMapForRendering=function(){return this._shadowMap2?this._shadowMap2:this._shadowMap},e.prototype.addShadowCaster=function(t,e){return void 0===e&&(e=!0),this._shadowMap?(this._shadowMap.renderList||(this._shadowMap.renderList=[]),this._shadowMap.renderList.push(t),e&&(i=this._shadowMap.renderList).push.apply(i,t.getChildMeshes()),this):this;var i},e.prototype.removeShadowCaster=function(t,e){if(void 0===e&&(e=!0),!this._shadowMap||!this._shadowMap.renderList)return this;var i=this._shadowMap.renderList.indexOf(t);if(-1!==i&&this._shadowMap.renderList.splice(i,1),e)for(var n=0,r=t.getChildren();n<r.length;n++){var o=r[n];this.removeShadowCaster(o)}return this},e.prototype.getLight=function(){return this._light},e.prototype._initializeGenerator=function(){this._light._markMeshesAsLightDirty(),this._initializeShadowMap()},e.prototype._initializeShadowMap=function(){var e=this;this._shadowMap=new t.RenderTargetTexture(this._light.name+"_shadowMap",this._mapSize,this._scene,!1,!0,this._textureType,this._light.needCube()),this._shadowMap.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._shadowMap.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._shadowMap.anisotropicFilteringLevel=1,this._shadowMap.updateSamplingMode(t.Texture.BILINEAR_SAMPLINGMODE),this._shadowMap.renderParticles=!1,this._shadowMap.ignoreCameraViewport=!0,this._shadowMap.onBeforeRenderObservable.add(function(t){e._currentFaceIndex=t}),this._shadowMap.customRenderFunction=this._renderForShadowMap.bind(this),this._shadowMap.onAfterUnbindObservable.add(function(){if(e.useBlurExponentialShadowMap||e.useBlurCloseExponentialShadowMap){var t=e.getShadowMapForRendering();t&&e._scene.postProcessManager.directRender(e._blurPostProcesses,t.getInternalTexture(),!0)}}),this._shadowMap.onClearObservable.add(function(i){e.useExponentialShadowMap||e.useBlurExponentialShadowMap?i.clear(new t.Color4(0,0,0,0),!0,!0,!0):i.clear(new t.Color4(1,1,1,1),!0,!0,!0)})},e.prototype._initializeBlurRTTAndPostProcesses=function(){var e=this,i=this._scene.getEngine(),n=this._mapSize/this.blurScale;this.useKernelBlur&&1===this.blurScale||(this._shadowMap2=new t.RenderTargetTexture(this._light.name+"_shadowMap2",n,this._scene,!1,!0,this._textureType),this._shadowMap2.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._shadowMap2.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._shadowMap2.updateSamplingMode(t.Texture.BILINEAR_SAMPLINGMODE)),this.useKernelBlur?(this._kernelBlurXPostprocess=new t.BlurPostProcess(this._light.name+"KernelBlurX",new t.Vector2(1,0),this.blurKernel,1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._textureType),this._kernelBlurXPostprocess.width=n,this._kernelBlurXPostprocess.height=n,this._kernelBlurXPostprocess.onApplyObservable.add(function(t){t.setTexture("textureSampler",e._shadowMap)}),this._kernelBlurYPostprocess=new t.BlurPostProcess(this._light.name+"KernelBlurY",new t.Vector2(0,1),this.blurKernel,1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._textureType),this._kernelBlurXPostprocess.autoClear=!1,this._kernelBlurYPostprocess.autoClear=!1,this._textureType===t.Engine.TEXTURETYPE_UNSIGNED_INT&&(this._kernelBlurXPostprocess.packedFloat=!0,this._kernelBlurYPostprocess.packedFloat=!0),this._blurPostProcesses=[this._kernelBlurXPostprocess,this._kernelBlurYPostprocess]):(this._boxBlurPostprocess=new t.PostProcess(this._light.name+"DepthBoxBlur","depthBoxBlur",["screenSize","boxOffset"],[],1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,"#define OFFSET "+this._blurBoxOffset,this._textureType),this._boxBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",n,n),t.setTexture("textureSampler",e._shadowMap)}),this._boxBlurPostprocess.autoClear=!1,this._blurPostProcesses=[this._boxBlurPostprocess])},e.prototype._renderForShadowMap=function(t,e,i,n){var r,o=this._scene.getEngine();if(n.length){for(o.setColorWrite(!1),r=0;r<n.length;r++)this._renderSubMeshForShadowMap(n.data[r]);o.setColorWrite(!0)}for(r=0;r<t.length;r++)this._renderSubMeshForShadowMap(t.data[r]);for(r=0;r<e.length;r++)this._renderSubMeshForShadowMap(e.data[r]);if(this._transparencyShadow)for(r=0;r<i.length;r++)this._renderSubMeshForShadowMap(i.data[r])},e.prototype._renderSubMeshForShadowMap=function(e){var i=this,n=e.getRenderingMesh(),r=this._scene,o=r.getEngine(),s=e.getMaterial();if(s){o.setState(s.backFaceCulling);var a=n._getInstancesRenderList(e._id);if(!a.mustReturn){var l=o.getCaps().instancedArrays&&null!==a.visibleInstances[e._id]&&void 0!==a.visibleInstances[e._id];if(this.isReady(e,l)){if(o.enableEffect(this._effect),n._bind(e,this._effect,t.Material.TriangleFillMode),this._effect.setFloat2("biasAndScale",this.bias,this.depthScale),this._effect.setMatrix("viewProjection",this.getTransformMatrix()),this._effect.setVector3("lightPosition",this.getLight().position),r.activeCamera&&this._effect.setFloat2("depthValues",this.getLight().getDepthMinZ(r.activeCamera),this.getLight().getDepthMinZ(r.activeCamera)+this.getLight().getDepthMaxZ(r.activeCamera)),s&&s.needAlphaTesting()){var c=s.getAlphaTestTexture();c&&(this._effect.setTexture("diffuseSampler",c),this._effect.setMatrix("diffuseMatrix",c.getTextureMatrix()||this._defaultTextureMatrix))}n.useBones&&n.computeBonesUsingShaders&&this._effect.setMatrices("mBones",n.skeleton.getTransformMatrices(n)),this.forceBackFacesOnly&&o.setState(!0,0,!1,!0),n._processRendering(e,this._effect,t.Material.TriangleFillMode,a,l,function(t,e){return i._effect.setMatrix("world",e)}),this.forceBackFacesOnly&&o.setState(!0,0,!1,!1)}else this._shadowMap&&this._shadowMap.resetRefreshCounter()}}},e.prototype._applyFilterValues=function(){this._shadowMap&&(this.filter===e.FILTER_NONE?this._shadowMap.updateSamplingMode(t.Texture.NEAREST_SAMPLINGMODE):this._shadowMap.updateSamplingMode(t.Texture.BILINEAR_SAMPLINGMODE))},e.prototype.forceCompilation=function(t,e){var i=this,n=s({useInstances:!1},e),r=this.getShadowMap();if(r){var o=r.renderList;if(o){for(var a=new Array,l=0,c=o;l<c.length;l++){var u=c[l];a.push.apply(a,u.subMeshes)}if(0!==a.length){var h=0,p=function(){if(i._scene&&i._scene.getEngine()){for(;i.isReady(a[h],n.useInstances);)if(++h>=a.length)return void(t&&t(i));setTimeout(p,16)}};p()}else t&&t(this)}else t&&t(this)}else t&&t(this)},e.prototype.isReady=function(e,i){var n=[];this._textureType!==t.Engine.TEXTURETYPE_UNSIGNED_INT&&n.push("#define FLOAT"),(this.useExponentialShadowMap||this.useBlurExponentialShadowMap)&&n.push("#define ESM");var r=[t.VertexBuffer.PositionKind],o=e.getMesh(),s=e.getMaterial();if(s&&s.needAlphaTesting()){var a=s.getAlphaTestTexture();a&&(n.push("#define ALPHATEST"),o.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(r.push(t.VertexBuffer.UVKind),n.push("#define UV1")),o.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&1===a.coordinatesIndex&&(r.push(t.VertexBuffer.UV2Kind),n.push("#define UV2")))}o.useBones&&o.computeBonesUsingShaders?(r.push(t.VertexBuffer.MatricesIndicesKind),r.push(t.VertexBuffer.MatricesWeightsKind),o.numBoneInfluencers>4&&(r.push(t.VertexBuffer.MatricesIndicesExtraKind),r.push(t.VertexBuffer.MatricesWeightsExtraKind)),n.push("#define NUM_BONE_INFLUENCERS "+o.numBoneInfluencers),n.push("#define BonesPerMesh "+(o.skeleton.bones.length+1))):n.push("#define NUM_BONE_INFLUENCERS 0"),i&&(n.push("#define INSTANCES"),r.push("world0"),r.push("world1"),r.push("world2"),r.push("world3"));var l=n.join("\n");return this._cachedDefines!==l&&(this._cachedDefines=l,this._effect=this._scene.getEngine().createEffect("shadowMap",r,["world","mBones","viewProjection","diffuseMatrix","lightPosition","depthValues","biasAndScale"],["diffuseSampler"],l)),!(!this._effect.isReady()||((this.useBlurExponentialShadowMap||this.useBlurCloseExponentialShadowMap)&&(this._blurPostProcesses&&this._blurPostProcesses.length||this._initializeBlurRTTAndPostProcesses()),this._kernelBlurXPostprocess&&!this._kernelBlurXPostprocess.isReady()||this._kernelBlurYPostprocess&&!this._kernelBlurYPostprocess.isReady()||this._boxBlurPostprocess&&!this._boxBlurPostprocess.isReady()))},e.prototype.prepareDefines=function(t,e){var i=this._scene,n=this._light;i.shadowsEnabled&&n.shadowEnabled&&(t["SHADOW"+e]=!0,this.usePoissonSampling?t["SHADOWPCF"+e]=!0:this.useExponentialShadowMap||this.useBlurExponentialShadowMap?t["SHADOWESM"+e]=!0:(this.useCloseExponentialShadowMap||this.useBlurCloseExponentialShadowMap)&&(t["SHADOWCLOSEESM"+e]=!0),n.needCube()&&(t["SHADOWCUBE"+e]=!0))},e.prototype.bindShadowLight=function(t,e){var i=this._light,n=this._scene;if(n.shadowsEnabled&&i.shadowEnabled){var r=n.activeCamera;if(r){var o=this.getShadowMap();o&&(i.needCube()||e.setMatrix("lightMatrix"+t,this.getTransformMatrix()),e.setTexture("shadowSampler"+t,this.getShadowMapForRendering()),i._uniformBuffer.updateFloat4("shadowsInfo",this.getDarkness(),this.blurScale/o.getSize().width,this.depthScale,this.frustumEdgeFalloff,t),i._uniformBuffer.updateFloat2("depthValues",this.getLight().getDepthMinZ(r),this.getLight().getDepthMinZ(r)+this.getLight().getDepthMaxZ(r),t))}}},e.prototype.getTransformMatrix=function(){var e=this._scene;if(this._currentRenderID===e.getRenderId()&&this._currentFaceIndexCache===this._currentFaceIndex)return this._transformMatrix;this._currentRenderID=e.getRenderId(),this._currentFaceIndexCache=this._currentFaceIndex;var i=this._light.position;if(this._light.computeTransformedInformation()&&(i=this._light.transformedPosition),t.Vector3.NormalizeToRef(this._light.getShadowDirection(this._currentFaceIndex),this._lightDirection),1===Math.abs(t.Vector3.Dot(this._lightDirection,t.Vector3.Up()))&&(this._lightDirection.z=1e-13),this._light.needProjectionMatrixCompute()||!this._cachedPosition||!this._cachedDirection||!i.equals(this._cachedPosition)||!this._lightDirection.equals(this._cachedDirection)){this._cachedPosition=i.clone(),this._cachedDirection=this._lightDirection.clone(),t.Matrix.LookAtLHToRef(i,i.add(this._lightDirection),t.Vector3.Up(),this._viewMatrix);var n=this.getShadowMap();if(n){var r=n.renderList;r&&this._light.setShadowProjectionMatrix(this._projectionMatrix,this._viewMatrix,r)}this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix)}return this._transformMatrix},e.prototype.recreateShadowMap=function(){var t=this._shadowMap;if(t){var e=t.renderList;this._disposeRTTandPostProcesses(),this._initializeGenerator(),this.filter=this.filter,this._applyFilterValues(),this._shadowMap.renderList=e}},e.prototype._disposeBlurPostProcesses=function(){this._shadowMap2&&(this._shadowMap2.dispose(),this._shadowMap2=null),this._boxBlurPostprocess&&(this._boxBlurPostprocess.dispose(),this._boxBlurPostprocess=null),this._kernelBlurXPostprocess&&(this._kernelBlurXPostprocess.dispose(),this._kernelBlurXPostprocess=null),this._kernelBlurYPostprocess&&(this._kernelBlurYPostprocess.dispose(),this._kernelBlurYPostprocess=null),this._blurPostProcesses=[]},e.prototype._disposeRTTandPostProcesses=function(){this._shadowMap&&(this._shadowMap.dispose(),this._shadowMap=null),this._disposeBlurPostProcesses()},e.prototype.dispose=function(){this._disposeRTTandPostProcesses(),this._light&&(this._light._shadowGenerator=null,this._light._markMeshesAsLightDirty())},e.prototype.serialize=function(){var t={},e=this.getShadowMap();if(!e)return t;if(t.lightId=this._light.id,t.mapSize=e.getRenderSize(),t.useExponentialShadowMap=this.useExponentialShadowMap,t.useBlurExponentialShadowMap=this.useBlurExponentialShadowMap,t.useCloseExponentialShadowMap=this.useBlurExponentialShadowMap,t.useBlurCloseExponentialShadowMap=this.useBlurExponentialShadowMap,t.usePoissonSampling=this.usePoissonSampling,t.forceBackFacesOnly=this.forceBackFacesOnly,t.depthScale=this.depthScale,t.darkness=this.getDarkness(),t.blurBoxOffset=this.blurBoxOffset,t.blurKernel=this.blurKernel,t.blurScale=this.blurScale,t.useKernelBlur=this.useKernelBlur,t.transparencyShadow=this._transparencyShadow,t.renderList=[],e.renderList)for(var i=0;i<e.renderList.length;i++){var n=e.renderList[i];t.renderList.push(n.id)}return t},e.Parse=function(t,i){for(var n=i.getLightByID(t.lightId),r=new e(t.mapSize,n),o=r.getShadowMap(),s=0;s<t.renderList.length;s++)i.getMeshesByID(t.renderList[s]).forEach(function(t){o&&(o.renderList||(o.renderList=[]),o.renderList.push(t))});return t.usePoissonSampling?r.usePoissonSampling=!0:t.useExponentialShadowMap?r.useExponentialShadowMap=!0:t.useBlurExponentialShadowMap?r.useBlurExponentialShadowMap=!0:t.useCloseExponentialShadowMap?r.useCloseExponentialShadowMap=!0:t.useBlurCloseExponentialShadowMap?r.useBlurCloseExponentialShadowMap=!0:t.useVarianceShadowMap?r.useExponentialShadowMap=!0:t.useBlurVarianceShadowMap&&(r.useBlurExponentialShadowMap=!0),t.depthScale&&(r.depthScale=t.depthScale),t.blurScale&&(r.blurScale=t.blurScale),t.blurBoxOffset&&(r.blurBoxOffset=t.blurBoxOffset),t.useKernelBlur&&(r.useKernelBlur=t.useKernelBlur),t.blurKernel&&(r.blurKernel=t.blurKernel),void 0!==t.bias&&(r.bias=t.bias),t.darkness&&r.setDarkness(t.darkness),t.transparencyShadow&&r.setTransparencyShadow(!0),r.forceBackFacesOnly=t.forceBackFacesOnly,r},e._FILTER_NONE=0,e._FILTER_EXPONENTIALSHADOWMAP=1,e._FILTER_POISSONSAMPLING=2,e._FILTER_BLUREXPONENTIALSHADOWMAP=3,e._FILTER_CLOSEEXPONENTIALSHADOWMAP=4,e._FILTER_BLURCLOSEEXPONENTIALSHADOWMAP=5,e}();t.ShadowGenerator=e}(l||(l={})),function(t){var e=function(){function t(t,e,i){void 0===e&&(e=""),void 0===i&&(i="black");var n=this;this._renderingCanvas=t,this._loadingText=e,this._loadingDivBackgroundColor=i,this._resizeLoadingUI=function(){var t=n._renderingCanvas.getBoundingClientRect(),e=window.getComputedStyle(n._renderingCanvas).position;n._loadingDiv&&(n._loadingDiv.style.position="fixed"===e?"fixed":"absolute",n._loadingDiv.style.left=t.left+"px",n._loadingDiv.style.top=t.top+"px",n._loadingDiv.style.width=t.width+"px",n._loadingDiv.style.height=t.height+"px")}}return t.prototype.displayLoadingUI=function(){if(!this._loadingDiv){this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingTextDiv=document.createElement("div"),this._loadingTextDiv.style.position="absolute",this._loadingTextDiv.style.left="0",this._loadingTextDiv.style.top="50%",this._loadingTextDiv.style.marginTop="80px",this._loadingTextDiv.style.width="100%",this._loadingTextDiv.style.height="20px",this._loadingTextDiv.style.fontFamily="Arial",this._loadingTextDiv.style.fontSize="14px",this._loadingTextDiv.style.color="white",this._loadingTextDiv.style.textAlign="center",this._loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this._loadingTextDiv),this._loadingTextDiv.innerHTML=this._loadingText;var t=document.createElement("style");t.type="text/css",t.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(t);var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAYq0lEQVR4Xu2dCZRcVZnHScAJUZSwjSOIbAJmEAZwQCCMoAInYRGIg8AwegQx7AFzUBBmzAFlE4EAwxz2GRk2w7AnAURZBiEOZgyEQDAQAjmEJqTpNd3V1V3Vmd+/6utKV7/1vnpVXd2p/zn3vOV+27vfu/fd/W3QQAPrBZqbm7fJZrN79vf3T+/r67uf4wO9vb37WXQDIwWtra0Tenp6voQTv5XP56/BkfcR3iLk1g6B7hEeI+zP5V+ZiAbqBZ2dnZ8lV+6Gg87CobfhpOc4byf0FjwYE9DneBkWcXrM2tmzNzTxDdQKJPyETCazI46YgiMuI9zJuXJltuChFIHsP/PSfIfTjU19A2mira1tcxy3ey6XO5vEnkV4kes11XBmENDVj97XOT2O03FmWgMuoNLzGRJva8IUnPkzjjcT/kLoKCZzfQB7XiX8M2G8md7AUJgzJ+Z6e88gZ1xGuj3HsY17PcVkrG9gp7CUF/F8PUvxqdZDrFq1ahNVfKjwTCYxZuDE2wjKlc2WViMePM+HPNsFPOdf22OPblD5OZQHvphnV65cjTMzxaQY3eA5V9OO/hmnm1lSjE7woFsQbiXki4++foHnXkW4mLC1JUl947333tsMY3emqfB9jtPJlXN5U0+bOXPmWCPxgOccSy4+AfqPio+9/oFnbyatbqVE28GSZfjQ1NT0KQzaHMcdyPfyaNoE12HcvdxT29K3Fkv8A2vWrPmcifAFZNtD91yRY+SBZ+9UsMtEgD+jTpeenp6JXI6xpKkuUDqRcA6Kr0Wpens+InQTnIpV6Fdi+BQT64ulS5eOIzefD62na7CeoGcnLCM8ykt5OWlzcPv772/BS/w3nP+K+xU11+DvQe5dcrQlTfWAwbNMb8XA8AyGX80xtLlA6TAJuteMbVhhia1v5VMcr+LWMeoZ4xiYw7q6urbhHbgG+paCkIRQehHu4pO3O5fVydEomF5Ulx548JfVD2wqfKE2I3R3ob/f2GoC1DWhdz7HG3i5j2pvb9+Z24m6HvVZQtYsZFWcowlzePEP4jJdR/OQhxTVpAs9NMXxmZxuZKo8IG4s+v8R2tUFphSBTBWzH+OAFwn/gS3TuN55xYoVqfc6dXd3fwHZ1xFaTX0iyGbwjJqXXAammxP00EXx6UMGEx7ram7+vKnzBZ/87Xiwp40tEdDTgYwlHG/CmadSjO7L+XiialOZAej7POFG2VK0Khngl6Pn8/LL0YEtlFh4n8oDAqvaAYH8tzH2iNDm1IIFn8Ax50G7xtgCAU07CfAG4RHOz+vLZL7e0dGxlYlKHaj8BHo25xgrsfV5wrYH4KmouxV+ZZDnCUdwmXxMGgFvFUVWD+jQuOot6rI0tb4gcfaG9v+MrcAn+wj38gL8C7cObmlp2ZRjOkWYD6ypuAf6zjFHLSJ0c/6YQ813DM/yZXgehreiVgP8cvSfsOeExYsXuzs6n8v9j8mqBRZQmdjXVPuira1NHSpn8UDf4Xu0vd2uCtDzacJOlDDf5ng94X8JTWarB8R1EK7ju7udiYgEz/v3pLFKm4oHUHhh3iZdfshpaEYpA4pvKLLXBujLYKRq71XLhUHg27z12rW9B6L/QhLrWWxRH7nzeDK8awi/5HRTEx0K6MZQ694LHk0DqrgfADkreIYz1q5c+UlTEQzesIuMryrggYQWjNL3RGO7p2tuFMeqjaOidgzyCz1yJMTJ6L6d66WEVCcHIO/dQkI75Chs2g97Hoc3jRz9Lge1ED5l4r0gckqRPB0gTw34t1B+h3IqxZkmrn2SULUa7ezZszdE5xfR9130Xsm5ilrnHrmkQOcKvrkncxqrIiY6wlewbw7BOUfDo/b84zzvj9C7J7eCS0NrUiRKCPjUE7ScMBdlF/B2HqBi0ERXBcuXL99YnQz9fX2ah3Up4UnsWGEmDRuUhoTn+Z5PfvbZZ2N/fuCZRJgnfhNVBu73EZoIKt7l0L2UBsYeDZg016nb5EUCWuXQewinUtTuyq2aTStF14a8SD+VDQVj6hDYxjuXf4Hjl83sSMCmTp8j4FtoMuRQ5dAZcii3kk/0s2bBhxIcBxjxUlib1hWInEDO/6qKV+y4geO5HAMntEE/pq+nZyo0ywsG1SmwL4Orf+0yqGCfmvR73LAn9lAeBjQTEhkA+1h49a08iRflcq4H5iuXFU9cz4lqihC/LXS/NZa6Bc+pz5gql5ub6VXD2tZWTSPeyS7XgeLhXrMnEhj6MSHSwaIhFGZH8oA/JzzFeexvJbRN2HW03moT6cEChx6w4QY2rurn85JWrxsiCy0FwjcIqos8w7GZNPulkawDEbFHlaBtjzODEDrVztuKXMmADPWA3RaljyJeNdKq98ilAez8iJdyGqfO31V4NoV/EvyaCqR54V2EshE5Lqcb+TrkstkTLD4WKB4PNNZQ8P05HAelMXNSPWChC8JsYvwthJo0jSoF6fIqjjqe08Aat+LIkd+AVjn09zxbZFqK3tjXAUbXUaWDjTUSyN4J45YZX2Igo4cEOVfFson2ALIxSjR0jog5YNgpfNHM90BxIjDyWIB8Z2NfB01HISJ20wPaw4w1FlavXq1v8aPGXhFw9JNRFTDItifU/RwwpfmKxYsDK180kU4x0lhAXvOSJUs+bezlIDL2N4xi4GpjK4MGCuzUA+SPxzn3m4iKgKyV2DCV08DeMWg0B+zHHOt2DpjS3Mz1BfFOM25C5ZH4LxldJBB0g7GVARkaXgv8VsKqZtIMPpN9RUnJgRzU5Wfp22vifcG3+2vQvmdsdQXsX2pm+oKX+GYjjQXkPWqsXshpRhcJ0RpbGShSHiSuheP37ZYHsGusVHOrU1lMxkO9od4eE+8LlSzQqfetpnPAooBN/2Um+gISp89MkF8K4G3RrMJYoOhbYGxlQEGhSOGogfoLwipExGtUZVVBYIVAluaAaUpuWA+YujlPF22Ra/iBLYEOsV6tV4w0FiitfmLsXiBMU0NiAVrfsp77Zd8MHPgbDoHtva6uLs1jiv1piAKy5tCG+4KJ9wVO/p6RDzvy+b5rzSwP9Okh/WKPERiCWzfk4K8bUSTiOljAyCdx5DZG4gE8W5Dov+NYUfsV/j50fUC4dmXIQDh0qQ6PVgJsOcLM8oA410Ggvo6Ojr81di+g2TKuQOiyJOKWxlpCJpM5zUjKAL3awTsamQfEbYhjtDGKa5tPsyn/wAuiURftlBO56h6aunEwCMxxvV1d+2Fr7Jce2vAu5LUtLeoGi/19gtbToCaR97BoD6BvUs+WkXqgbw6OuhC6wH5l4rRGaCFOvYnjYbyxnpcsCvDVhYOxo6+zszNwSNHVTtJEmSiwzlMAQmNPwIPW42Dds2hfEK/5WJo0Fth+5VNxFHSlkoTzFRh/N3wnq0OGWxXtdoO8enFwaI4jsyidYgNZTxhrMEjEJ4w+En65ESWRXZ7Q4K/COqDAPlhka87WedB8KawmngTIHREOJs5pMiRp+p/GGgxL1FiA9hxjK6G1tVVdhJGAV15+cPXq1f7dahVC20Wg4miCp0uTe3Xh4Hwu93rY1B7SR/t7xQbP5R1FGgpy8IlKe+MJhZ9Aa7u5jPm+pGLX2BMDOZ+hDXgQiXIJ5xoXHZg96anEEFcvOTi0SMUXS4w0FijSTzTWYEA3hkTSEtDI2qw6RoytDLA6jctCvzKqJ8oPFOO7kAhnYe9cZGiWiZ/N9ezguWaSL4h3TUfvKJIfoN0I4sjigYSdZyxlcDVMgEczEY41ER6oZFBOh2Yqegf2zYoziFC3DuZZrjSTPLDtMlxaNPmPP/54W2OPxksrVozP5fLPGr8vEOpbxJCr3jQSJyDvGRNRhv7iHh8vE5LMpKznHBz4zSTOaXwe+mXGGh9tbWvVQf+iyfCAON/ZlTj4v43ECfB94Le4CuMrWVpTtw7O9fZOM5M8oD7xVSOLBdLuNWN1g7bgJUF8+4qpBjf7Te9M6hD4tBDc0289Wh2MHbuaSR7gsHOMLBaQ9W/G6o5MJrNDPu9dcYdQ33Yc95I6OFV5hnp2cGCliDingX5KU+9MShd0dmqta/k8J4zwnV2JsuuNxAnI83VwNpO52kiSoC4djA255cuXBzYPycGzjTQWkPdNY00OfRcQVLafRnd39ySLLsG1i20AyPZ3cDb7AyNJgnp1cOhUHUhcFiL045v9jTUa8Gjlm29fsQQhb3DzJLUEhC+oiK7EISPOwapoEh+7JQJti5YfGXs0YNC62ouC1h9lsrlToClsjc/RM7uSe0kd3EmlzTO/Kqk8Q106mM/Yw2aOB9jnOg6sWTHxJ9FraSJMy6nGz7RbZUDYmN7e3BnQ5Gisez7u3J9c0JwA6Pb0aCFvNObgwKk6NoU59uJwaJ8y1viAT4vCtEFXYO8SFQGtCZpllyXQtNqL+4lmZ/BN/5qJKQFZozEHe9JtAGSaw4wsFnie4JmUQcjleh8yZq0Fnmq3y0D02IzPMgnonYqYIfA4pC+TcXrgIahLB+PEb5s5HrjaR0b7kbHGB0pK7TDO1/T39x1lUZGAPlUH0xTbz+KSoC4dDDx2DQCHzTCaWOB5zjbW+KCSpW0IS0BIJmy6zWCk7WDuxZ4r5oO6dHB7e/sBZo4H2OfUsYOv9jHW+ECJdkAtA/c6MpmMd+XaEKj7km9M4F5TEfBzSKovDLKG1cHobw+b6EDa3WOksYBPAhevBUJMxl8GJTRhFyMLBKSJFn5ls9nvmogS0DfaHOzb3h8AcUuNNBLQNiWa0gRv4MwMMyBwCqxAfCIH82JdYSJKQN+ocjA5NHD2I/e1aj/23iPyhbG6A+bAgXsZoUEII/UAkkQORu71JqIE7o22HBw4VaelpWU74mPPDc/39d1trO5Qb4vJ8QXxbwat06WofcTInMCzeToAtN4VXUn/l1AXDkan9tDSfmL6C81BZooHxDkN9CMveLFZFFAWWZtDwVta3G0sJcAbe3bmYEiniShBXabcL+wflQDD5mD0yKlvk0b/Tk33AG5F7idG+/ibRe54oEl1nLG6A+ZYe1jyAIuG/u2LB3MazxwAfL5vJFGJinxQUwcju6c/n3+FNPm5JhJyy2k/sQTp5nm+2HBJCGi1X1WpwzuBoQXAN+IcjDz8mdePKi/WhH1uxd7GcCjIVBcWpUYDfZ0VbclEJSr2akMBhVrdX6j+Jx3DpSh7vKB8CIiqKwcrcXGqdr05k3RKbU9ryTQVkUB3aHMrEshw7kGCXiv8xxG0h6Uzent6Fpn6MhA17A6GT/3yTxNO1coJbgWur3JFf1fXNuTes5AZe18xXobFHJKv04JZc3O7CtIcgGL9KW03u3QCfL4D4b292dhrpoYgsYOhEz4kaOuHqXKqiagYiN9QnUlyKgX84JUYsQFP9GKzMFRSe8XJb9upE9Dn62CK/KQT75wdTLz+NXgPNdrDuYzeUd0ByN4Wp07n+EdCRZuTY1/ymZQDwIjQye9pA32xdw6IiUgHc639mN8kzCLRjkxzQRzitUpkZ8LZBP1CILUd55EVvdgsCrzJl5i8mgCja+Zgjst4Pq3DUnMmtSWqyNIuQruRU3+CbO08n+pvBAZAjf1IU5kcGJc0YRMBfVV3MPd2RN4+YbvYukI/3sSpe+LUmbw0ryG/6ts1oSLeYrMw6C0xeaFAGc+Wq3hbfeRk582b55lrzf3UHJwWkD0Wp+6BQ3+BfXEXw6UCdHX4TVB0BoJi9Y1Cp59XbUWN8HW7lRjLli3zbINE+1hNiCRI1cGakIhT99ani/A6z1z1nDoUqNQfbO40kyqDfrCBwMg3E5rsCy+8sFlHR8dEnFzRTq/I8hQ9NFFOtGhXVOxgFeUqfknUK7Ctpjl1ANKJ/vmUkvrdwRZmWjpA4J9MTyja2toKY8TQa/ufxP/Whdd5c5cQJHIwfBsTvkKiaqd6/fRyOHKqavdL0H+V2sxmWvrQCAeKItfmQlNyDG/8SVwnetMHyxmA7lm0K2I7GFrlVBW/V6FPP9GqeU4V0Kt2+O2yhctUN6AJBEWD9ngMnessJxh5AfCoQe+8q+xQOYLuWbQrQh2MXP1XYh8S9DKC2sI1z6kCatW3/RCZ6Vj9fNPMqx2wQVNJQlcNEl/mGG5pv48bi7HxMVSOoHsW7QqPg5GlvnJtk6/B9+HMqYUfaXE6rampqWy4dVhgi8FfLprnBXEex+i/wCSkNiSNDSpUxxt7Ccj2nQQYAwUHc9yE3HEotuifDklnfFYMdGNC/lWCxotDf4PvB/jHZTs71c+f2n+ryqCPPcb5/pKdGrTvbH2MUjH4ByOLBDpON9YSFi5cuI1FOwFbbyTox5T6y+iwFL8CqvWvwVtolWgSv/N4sXbl5ZP3r8hRLT50d56KgYJDCYXVhYOhtqqReKDdZuGJtSQSOk8f67x581SspvH3lpoBe9Vefbg/lzveaXmnAf6tEDMNGRp3LnV3ch29o10lQIf+bOKZc+XnmMGARF2EK4vUwQiSw33n7ZlqDWwcaK9Ob29vd26vwj+OT8m3kKFxdd9tlILSJ1Wo8Y8RZT/YiKOY4le5P3SGZJAc7telg7FroL16Jc/n/a1cBBCxsSblwT8LOfofcCh4AQ4x1uoCXZtgVKnYDXLMUECnPSQD29VBcrhfVw7GHrVXb6WylGg0SvUZcrr+YPYuwWVfaE9ltmpA2Q6EQq2UY+yigzf2oqCH4v4MIysD94fdwdig9uqDnB4T5/d+gwHPGNVFcOopyJiPLOfmGTwa0Ek8qS8RKDKORLFWH95utwbDd94SRqqN/Cv4PDXbTFfXfUZWBvRUPJCRBJiIqfnnccy0Dz74wHkWoypY2D4ZGU8gK+kKjQKQ8RcTW1uQI2fmc7nH7LIMFEW+sw6xdyN4CgvNByNIDjp+ZyRVhzlV7dVLaZc7t1cRoW0w9of/No6ptbuRdZupqC3QPZY33HchMkbJiRPssgyaHkN82XaJXPtOJuN+JRuixQI6Cu1VXiZtJehcFGpeNPyXI6cqPWTIvsxU1R7o912akevre4OHfTHot3fEfRbD3y8+Qu0djO5Ce5UXNGl7dTt4z0RGqnOuhgLZgmcPk2FHrrd3jgwkAVQ58e1ioxjcHeMLPWQcq+5gZKm9+hJHjXo5z4xQBQsxxyDjEfir+nNq5GfQo/nYh6f9e4NUgGEFx3DEzvw1nPrOhSJ+kh6GUBUHw6//Kmls96dJ2qv6FxNF9z8g405kVLVXDfkaiFAd4JIkttYUGFpyDOf91Ch/YVEe8DA/gORpuywDfLNMjBOQt4qEupbTPTX4YeJig+/qrnoxkfMeIdH2UHGBfP0H6kFepElc1rY5lBQYXZbzuO7BWYH7b3V3d/+TX1FEG/JSExEJdOi7qsnrx3DuNM8Zdg2NqnN/BjK0EXlVhxORr56wP6Lv/DT+X1FzYLynaOWe2s1TjCQW4An9t6Jk4hBVdH6YpB9YNXoS+SRk/JaQZHd5J2CnesLuyGaze3KZ2hTemoNcpO+uB3pAQuzvC7SeJSfc0258Wo97aX9PT+TmMEMB73jsO0wJzXnVx4llL7pe5kWaFtSqGHHgu6rpPr5jsdx+hyI59G+hA4C25GDO1V69mbf/77h0+lZpzZX44B+Ye1X1cWKz92pKrYlcjtzc6gfN+ufhApd/ErcwTvuTRNI0m4c4Tg77u6gfbCHdTuQcrRFaRKiFU7Xl1O/RqX9RObevRxR43gmEBYUn9wEJIMeF/jk0yVKTta2tE0jg43kx1OatWifEYKDrHYKGDnfkMrU1xHUPaoh7k8i+030EvoV3c6i4aTCoc/9+9NVkFgh6BmZFaig08he3oxYkwBEkQGCzg7gfG6kzaDvuSyLfgIyqt1cF6SAspoS4iJf3c9xaf3JrGEgUzZcOGgvO4agzjTQUkI9V5z4851MuLhBvUUp1gR7tjXEHL+shXFZnduNIBomi6T73FVLLByQePu4N3CxMbVxyzfeQUTYZrdpA3yvoPVf/1jdTGggC6aXx0ieLSecFcWoj72vkhU4IcswU7gVORksb6FHnufbouJ4Xbv+gf1g0EADav9uSeO9YenpA3IfURFVZ0gqEms1rRg0qCzM4TuYy1T061jt0dXXpX0xJ96FMDXIqQXtJ3tSfze6OaY0KU1ogfTUgUJMK0lBIL06dS/F/LJeRe0k2kAAk7BgSWN2GVW/aCOjRuPCbBHVGBG6J3ECKIN3VlfjroguqA+RrMsFvCNqisf5mRox2qPlB4s8vuiMdIE/fVjVvLlRnhKlqYLig7QIpOiva40PAqR2E22neJFrN10AVgWMOIDgPuMOjmRFa+HVaR0fHliaugXoEOe80nBWrZg2dZkZoYffuaW5u1kCVkadmbT70AGdqJodWOhxHqP2eFg1UDvsLatnSFq41M+KKnp6eXbhsdB2OdGiCeX8+/2ecqgnmk/VXNYtqYLSAnNposzpjgw3+H/belpVa8J7TAAAAAElFTkSuQmCC",e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.marginLeft="-60px",e.style.marginTop="-60px",e.style.animation="spin1 2s infinite ease-in-out",e.style.webkitAnimation="spin1 2s infinite ease-in-out",e.style.transformOrigin="50% 50%",e.style.webkitTransformOrigin="50% 50%",this._loadingDiv.appendChild(e),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}},t.prototype.hideLoadingUI=function(){var t=this;if(this._loadingDiv){this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",function(){t._loadingDiv&&(document.body.removeChild(t._loadingDiv),window.removeEventListener("resize",t._resizeLoadingUI),t._loadingDiv=null)})}},Object.defineProperty(t.prototype,"loadingUIText",{set:function(t){this._loadingText=t,this._loadingTextDiv&&(this._loadingTextDiv.innerHTML=this._loadingText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadingUIBackgroundColor",{get:function(){return this._loadingDivBackgroundColor},set:function(t){this._loadingDivBackgroundColor=t,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)},enumerable:!0,configurable:!0}),t}();t.DefaultLoadingScreen=e}(l||(l={})),function(t){var e=function(){function t(t,e,i){this.lengthComputable=t,this.loaded=e,this.total=i}return t.FromProgressEvent=function(e){return new t(e.lengthComputable,e.loaded,e.total)},t}();t.SceneLoaderProgressEvent=e;var i=function(){function i(){}return Object.defineProperty(i,"NO_LOGGING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i,"MINIMAL_LOGGING",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(i,"SUMMARY_LOGGING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(i,"DETAILED_LOGGING",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ForceFullSceneLoadingForIncremental",{get:function(){return i._ForceFullSceneLoadingForIncremental},set:function(t){i._ForceFullSceneLoadingForIncremental=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ShowLoadingScreen",{get:function(){return i._ShowLoadingScreen},set:function(t){i._ShowLoadingScreen=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"loggingLevel",{get:function(){return i._loggingLevel},set:function(t){i._loggingLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"CleanBoneMatrixWeights",{get:function(){return i._CleanBoneMatrixWeights},set:function(t){i._CleanBoneMatrixWeights=t},enumerable:!0,configurable:!0}),i._getDefaultPlugin=function(){return i._registeredPlugins[".babylon"]},i._getPluginForExtension=function(e){return i._registeredPlugins[e]||(t.Tools.Warn("Unable to find a plugin to load "+e+" files. Trying to use .babylon default plugin."),i._getDefaultPlugin())},i._getPluginForDirectLoad=function(t){for(var e in i._registeredPlugins){var n=i._registeredPlugins[e].plugin;if(n.canDirectLoad&&n.canDirectLoad(t))return i._registeredPlugins[e]}return i._getDefaultPlugin()},i._getPluginForFilename=function(t){t.name&&(t=t.name);var e=t.indexOf("?");-1!==e&&(t=t.substring(0,e));var n=t.lastIndexOf("."),r=t.substring(n,t.length).toLowerCase();return i._getPluginForExtension(r)},i._getDirectLoad=function(t){return t.substr&&"data:"===t.substr(0,5)?t.substr(5):null},i._loadData=function(n,r,o,s,a,l,c,u){var h,p=i._getDirectLoad(r),d=u?i._getPluginForExtension(u):p?i._getPluginForDirectLoad(r):i._getPluginForFilename(r);h=d.plugin.createPlugin?d.plugin.createPlugin():d.plugin;var f,m=d.isBinary;i.OnPluginActivatedObservable.notifyObservers(h);var g=function(t,e){o.isDisposed?l("Scene has been disposed"):(o.database=f,s(h,t,e))},y=null,_=!1,v=h.onDisposeObservable;v&&v.add(function(){_=!0,y&&(y.abort(),y=null),c()});var b=function(){if(!_){var i=n+r;y=t.Tools.LoadFile(i,g,a?function(t){a(e.FromProgressEvent(t))}:void 0,f,m,function(t,e){l("Failed to load scene."+(e?"":" "+e.message),e)})}};if(p)return g(p),h;if(-1===n.indexOf("file:"))o.getEngine().enableOfflineSupport?f=new t.Database(n+r,b):b();else{var x=r;x.name?y=t.Tools.ReadFile(x,g,a,m):t.FilesInput.FilesToLoad[r]?y=t.Tools.ReadFile(t.FilesInput.FilesToLoad[r],g,a,m):l("Unable to find file named "+r)}return h},i.GetPluginForExtension=function(t){return i._getPluginForExtension(t).plugin},i.IsPluginForExtensionAvailable=function(t){return!!i._registeredPlugins[t]},i.RegisterPlugin=function(t){if("string"==typeof t.extensions){var e=t.extensions;i._registeredPlugins[e.toLowerCase()]={plugin:t,isBinary:!1}}else{var n=t.extensions;Object.keys(n).forEach(function(e){i._registeredPlugins[e.toLowerCase()]={plugin:t,isBinary:n[e].isBinary}})}},i.ImportMesh=function(e,n,r,o,s,a,l,c){if(void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===c&&(c=null),r.substr&&"/"===r.substr(0,1))return t.Tools.Error("Wrong sceneFilename parameter"),null;var u={};o._addPendingData(u);var h=function(){o._removePendingData(u)},p=function(e,i){var s="Unable to import meshes from "+n+r+": "+e;l?l(o,s,i):t.Tools.Error(s),h()},d=a?function(t){try{a(t)}catch(t){p("Error in onProgress callback",t)}}:void 0,f=function(t,e,i){if(o.importedMeshesFiles.push(n+r),s)try{s(t,e,i)}catch(t){p("Error in onSuccess callback",t)}o._removePendingData(u)};return i._loadData(n,r,o,function(i,s,a){if(i.rewriteRootURL&&(n=i.rewriteRootURL(n,a)),""===r&&""===r&&(n=t.Tools.GetFolderPath(n,!0)),i.importMesh){var l=i,c=new Array,u=new Array,h=new Array;if(!l.importMesh(e,o,s,n,c,u,h,p))return;o.loadingPluginName=i.name,f(c,u,h)}else i.importMeshAsync(e,o,s,n,function(t,e,n){o.loadingPluginName=i.name,f(t,e,n)},d,p)},d,p,h,c)},i.Load=function(e,n,r,o,s,a,l){return void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),i.Append(e,n,new t.Scene(r),o,s,a,l)},i.Append=function(e,n,r,o,s,a,l){if(void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),n.substr&&"/"===n.substr(0,1))return t.Tools.Error("Wrong sceneFilename parameter"),null;i.ShowLoadingScreen&&r.getEngine().displayLoadingUI();var c={};r._addPendingData(c);var u=function(){r._removePendingData(c),r.getEngine().hideLoadingUI()},h=function(i,o){var s="Unable to load from "+e+n+(i?": "+i:"");a?a(r,s,o):t.Tools.Error(s),u()},p=s?function(t){try{s(t)}catch(t){h("Error in onProgress callback",t)}}:void 0,d=function(){if(o)try{o(r)}catch(t){h("Error in onSuccess callback",t)}r._removePendingData(c)};return i._loadData(e,n,r,function(o,s,a){if(""===n&&(e=t.Tools.GetFolderPath(e,!0)),o.load){if(!o.load(r,s,e,h))return;r.loadingPluginName=o.name,d()}else o.loadAsync(r,s,e,function(){r.loadingPluginName=o.name,d()},p,h);i.ShowLoadingScreen&&r.executeWhenReady(function(){r.getEngine().hideLoadingUI()})},p,h,u,l)},i.LoadAssetContainer=function(e,n,r,o,s,a,l){if(void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),n.substr&&"/"===n.substr(0,1))return t.Tools.Error("Wrong sceneFilename parameter"),null;var c={};r._addPendingData(c);var u=function(){r._removePendingData(c)},h=function(i,o){var s="Unable to load assets from "+e+n+(i?": "+i:"");a?a(r,s,o):t.Tools.Error(s),u()},p=s?function(t){try{s(t)}catch(t){h("Error in onProgress callback",t)}}:void 0,d=function(t){if(o)try{o(t)}catch(t){h("Error in onSuccess callback",t)}r._removePendingData(c)};return i._loadData(e,n,r,function(t,n,o){if(t.loadAssets){var s=t.loadAssets(r,n,e,h);if(!s)return;r.loadingPluginName=t.name,d(s)}else if(t.loadAssetsAsync){t.loadAssetsAsync(r,n,e,function(e){e&&(r.loadingPluginName=t.name,d(e))},p,h)}else h("LoadAssetContainer is not supported by this plugin. Plugin did not provide a loadAssets or loadAssetsAsync method.");i.ShowLoadingScreen&&r.executeWhenReady(function(){r.getEngine().hideLoadingUI()})},p,h,u,l)},i._ForceFullSceneLoadingForIncremental=!1,i._ShowLoadingScreen=!0,i._CleanBoneMatrixWeights=!1,i._loggingLevel=i.NO_LOGGING,i.OnPluginActivatedObservable=new t.Observable,i._registeredPlugins={},i}();t.SceneLoader=i}(l||(l={})),function(t){var e=function(e,i,n,r){for(var o=0,s=i.materials.length;o<s;o++){var a=i.materials[o];if(a.id===e)return t.Material.Parse(a,n,r)}return null},i=function(t,e,i){for(var n in e)if(t.name===e[n])return i.push(t.id),!0;return!(!t.parentId||-1===i.indexOf(t.parentId)||(i.push(t.id),0))},n=function(t,e){return t+" of "+(e?e.file+" from "+e.name+" version: "+e.version+", exporter version: "+e.exporter_version:"unknown")},r=function(e,i,r,o,s){void 0===s&&(s=!1);var a=new t.AssetContainer(e),l="importScene has failed JSON parse";try{var c=JSON.parse(i);l="";var u,h,p=t.SceneLoader.loggingLevel===t.SceneLoader.DETAILED_LOGGING;if(void 0!==c.lights&&null!==c.lights)for(u=0,h=c.lights.length;u<h;u++){var d=c.lights[u],f=t.Light.Parse(d,e);f&&(a.lights.push(f),l+=0===u?"\n\tLights:":"",l+="\n\t\t"+f.toString(p))}if(void 0!==c.animations&&null!==c.animations)for(u=0,h=c.animations.length;u<h;u++){var m=c.animations[u],g=t.Animation.Parse(m);e.animations.push(g),a.animations.push(g),l+=0===u?"\n\tAnimations:":"",l+="\n\t\t"+g.toString(p)}if(void 0!==c.materials&&null!==c.materials)for(u=0,h=c.materials.length;u<h;u++){var y=c.materials[u],_=t.Material.Parse(y,e,r);a.materials.push(_),l+=0===u?"\n\tMaterials:":"",l+="\n\t\t"+_.toString(p)}if(void 0!==c.multiMaterials&&null!==c.multiMaterials)for(u=0,h=c.multiMaterials.length;u<h;u++){var v=c.multiMaterials[u],b=t.Material.ParseMultiMaterial(v,e);a.multiMaterials.push(b),l+=0===u?"\n\tMultiMaterials:":"",l+="\n\t\t"+b.toString(p)}if(void 0!==c.morphTargetManagers&&null!==c.morphTargetManagers)for(var x=0,A=c.morphTargetManagers;x<A.length;x++){var w=A[x];a.morphTargetManagers.push(t.MorphTargetManager.Parse(w,e))}if(void 0!==c.skeletons&&null!==c.skeletons)for(u=0,h=c.skeletons.length;u<h;u++){var P=c.skeletons[u],E=t.Skeleton.Parse(P,e);a.skeletons.push(E),l+=0===u?"\n\tSkeletons:":"",l+="\n\t\t"+E.toString(p)}var T=c.geometries;if(null!=T){var S=new Array,C=T.boxes;if(null!=C)for(u=0,h=C.length;u<h;u++){var O=C[u];S.push(t.BoxGeometry.Parse(O,e))}var M=T.spheres;if(null!=M)for(u=0,h=M.length;u<h;u++){var R=M[u];S.push(t.SphereGeometry.Parse(R,e))}var I=T.cylinders;if(null!=I)for(u=0,h=I.length;u<h;u++){var D=I[u];S.push(t.CylinderGeometry.Parse(D,e))}var L=T.toruses;if(null!=L)for(u=0,h=L.length;u<h;u++){var k=L[u];S.push(t.TorusGeometry.Parse(k,e))}var F=T.grounds;if(null!=F)for(u=0,h=F.length;u<h;u++){var N=F[u];S.push(t.GroundGeometry.Parse(N,e))}var B=T.planes;if(null!=B)for(u=0,h=B.length;u<h;u++){var V=B[u];S.push(t.PlaneGeometry.Parse(V,e))}var z=T.torusKnots;if(null!=z)for(u=0,h=z.length;u<h;u++){var U=z[u];S.push(t.TorusKnotGeometry.Parse(U,e))}var j=T.vertexData;if(null!=j)for(u=0,h=j.length;u<h;u++){var G=j[u];S.push(t.Geometry.Parse(G,e,r))}S.forEach(function(t){t&&a.geometries.push(t)})}if(void 0!==c.transformNodes&&null!==c.transformNodes)for(u=0,h=c.transformNodes.length;u<h;u++){var W=c.transformNodes[u],H=t.TransformNode.Parse(W,e,r);a.transformNodes.push(H)}if(void 0!==c.meshes&&null!==c.meshes)for(u=0,h=c.meshes.length;u<h;u++){var X=c.meshes[u],Y=t.Mesh.Parse(X,e,r);a.meshes.push(Y),l+=0===u?"\n\tMeshes:":"",l+="\n\t\t"+Y.toString(p)}if(void 0!==c.cameras&&null!==c.cameras)for(u=0,h=c.cameras.length;u<h;u++){var q=c.cameras[u],K=t.Camera.Parse(q,e);a.cameras.push(K),l+=0===u?"\n\tCameras:":"",l+="\n\t\t"+K.toString(p)}for(u=0,h=e.cameras.length;u<h;u++){(K=e.cameras[u])._waitingParentId&&(K.parent=e.getLastEntryByID(K._waitingParentId),K._waitingParentId=null)}for(u=0,h=e.lights.length;u<h;u++){var Q=e.lights[u];Q&&Q._waitingParentId&&(Q.parent=e.getLastEntryByID(Q._waitingParentId),Q._waitingParentId=null)}var Z,J=[];if(t.AudioEngine&&void 0!==c.sounds&&null!==c.sounds)for(u=0,h=c.sounds.length;u<h;u++){var $=c.sounds[u];t.Engine.audioEngine.canUseWebAudio?($.url||($.url=$.name),J[$.url]?a.sounds.push(t.Sound.Parse($,e,r,J[$.url])):(Z=t.Sound.Parse($,e,r),J[$.url]=Z,a.sounds.push(Z))):a.sounds.push(new t.Sound($.name,null,e))}for(J=[],u=0,h=e.transformNodes.length;u<h;u++){var tt=e.transformNodes[u];tt._waitingParentId&&(tt.parent=e.getLastEntryByID(tt._waitingParentId),tt._waitingParentId=null)}for(u=0,h=e.meshes.length;u<h;u++){(Y=e.meshes[u])._waitingParentId&&(Y.parent=e.getLastEntryByID(Y._waitingParentId),Y._waitingParentId=null),Y._waitingActions&&(t.ActionManager.Parse(Y._waitingActions,Y,e),Y._waitingActions=null)}for(u=0,h=e.meshes.length;u<h;u++){var et=e.meshes[u];et._waitingFreezeWorldMatrix?(et.freezeWorldMatrix(),et._waitingFreezeWorldMatrix=null):et.computeWorldMatrix(!0)}if(void 0!==c.particleSystems&&null!==c.particleSystems)for(u=0,h=c.particleSystems.length;u<h;u++){var it=c.particleSystems[u],nt=t.ParticleSystem.Parse(it,e,r);a.particleSystems.push(nt)}if(void 0!==c.lensFlareSystems&&null!==c.lensFlareSystems)for(u=0,h=c.lensFlareSystems.length;u<h;u++){var rt=c.lensFlareSystems[u],ot=t.LensFlareSystem.Parse(rt,e,r);a.lensFlareSystems.push(ot)}if(void 0!==c.shadowGenerators&&null!==c.shadowGenerators)for(u=0,h=c.shadowGenerators.length;u<h;u++){var st=c.shadowGenerators[u],at=t.ShadowGenerator.Parse(st,e);a.shadowGenerators.push(at)}for(u=0,h=e.lights.length;u<h;u++){var lt=e.lights[u];if(lt._excludedMeshesIds.length>0){for(var ct=0;ct<lt._excludedMeshesIds.length;ct++){var ut=e.getMeshByID(lt._excludedMeshesIds[ct]);ut&&lt.excludedMeshes.push(ut)}lt._excludedMeshesIds=[]}if(lt._includedOnlyMeshesIds.length>0){for(var ht=0;ht<lt._includedOnlyMeshesIds.length;ht++){var pt=e.getMeshByID(lt._includedOnlyMeshesIds[ht]);pt&&lt.includedOnlyMeshes.push(pt)}lt._includedOnlyMeshesIds=[]}}return void 0!==c.actions&&null!==c.actions&&t.ActionManager.Parse(c.actions,null,e),s||a.removeAllFromScene(),a}catch(e){var dt=n("loadAssts",c?c.producer:"Unknown")+l;if(!o)throw t.Tools.Log(dt),e;o(dt,e)}finally{null!==l&&t.SceneLoader.loggingLevel!==t.SceneLoader.NO_LOGGING&&t.Tools.Log(n("loadAssts",c?c.producer:"Unknown")+(t.SceneLoader.loggingLevel!==t.SceneLoader.MINIMAL_LOGGING?l:""))}return null};t.SceneLoader.RegisterPlugin({name:"babylon.js",extensions:".babylon",canDirectLoad:function(t){return-1!==t.indexOf("babylon")},importMesh:function(r,o,s,a,l,c,u,h){var p="importMesh has failed JSON parse";try{var d=JSON.parse(s);p="";var f=t.SceneLoader.loggingLevel===t.SceneLoader.DETAILED_LOGGING;r?Array.isArray(r)||(r=[r]):r=null;var m=new Array;if(void 0!==d.meshes&&null!==d.meshes){var g,y,_,v=[],b=[];for(g=0,y=d.meshes.length;g<y;g++){var x=d.meshes[g];if(null===r||i(x,r,m)){if(null!==r&&delete r[r.indexOf(x.name)],void 0!==x.geometryId&&null!==x.geometryId&&void 0!==d.geometries&&null!==d.geometries){var A=!1;["boxes","spheres","cylinders","toruses","grounds","planes","torusKnots","vertexData"].forEach(function(e){!0!==A&&d.geometries[e]&&Array.isArray(d.geometries[e])&&d.geometries[e].forEach(function(i){if(i.id===x.geometryId){switch(e){case"boxes":t.BoxGeometry.Parse(i,o);break;case"spheres":t.SphereGeometry.Parse(i,o);break;case"cylinders":t.CylinderGeometry.Parse(i,o);break;case"toruses":t.TorusGeometry.Parse(i,o);break;case"grounds":t.GroundGeometry.Parse(i,o);break;case"planes":t.PlaneGeometry.Parse(i,o);break;case"torusKnots":t.TorusKnotGeometry.Parse(i,o);break;case"vertexData":t.Geometry.Parse(i,o,a)}A=!0}})}),!1===A&&t.Tools.Warn("Geometry not found for mesh "+x.id)}if(x.materialId){var w=-1!==b.indexOf(x.materialId);if(!1===w&&void 0!==d.multiMaterials&&null!==d.multiMaterials)for(var P=0,E=d.multiMaterials.length;P<E;P++){var T=d.multiMaterials[P];if(T.id===x.materialId){for(var S=0,C=T.materials.length;S<C;S++){var O,M=T.materials[S];b.push(M),(O=e(M,d,o,a))&&(p+="\n\tMaterial "+O.toString(f))}b.push(T.id);var R=t.Material.ParseMultiMaterial(T,o);R&&(w=!0,p+="\n\tMulti-Material "+R.toString(f));break}}if(!1===w)b.push(x.materialId),(O=e(x.materialId,d,o,a))?p+="\n\tMaterial "+O.toString(f):t.Tools.Warn("Material not found for mesh "+x.id)}if(x.skeletonId>-1&&void 0!==d.skeletons&&null!==d.skeletons&&!1==v.indexOf(x.skeletonId)>-1)for(var I=0,D=d.skeletons.length;I<D;I++){var L=d.skeletons[I];if(L.id===x.skeletonId){var k=t.Skeleton.Parse(L,o);u.push(k),v.push(L.id),p+="\n\tSkeleton "+k.toString(f)}}var F=t.Mesh.Parse(x,o,a);l.push(F),p+="\n\tMesh "+F.toString(f)}}for(g=0,y=o.meshes.length;g<y;g++)(_=o.meshes[g])._waitingParentId&&(_.parent=o.getLastEntryByID(_._waitingParentId),_._waitingParentId=null);for(g=0,y=o.meshes.length;g<y;g++)(_=o.meshes[g])._waitingFreezeWorldMatrix?(_.freezeWorldMatrix(),_._waitingFreezeWorldMatrix=null):_.computeWorldMatrix(!0)}if(void 0!==d.particleSystems&&null!==d.particleSystems)for(g=0,y=d.particleSystems.length;g<y;g++){var N=d.particleSystems[g];-1!==m.indexOf(N.emitterId)&&c.push(t.ParticleSystem.Parse(N,o,a))}return!0}catch(e){var B=n("importMesh",d?d.producer:"Unknown")+p;if(!h)throw t.Tools.Log(B),e;h(B,e)}finally{null!==p&&t.SceneLoader.loggingLevel!==t.SceneLoader.NO_LOGGING&&t.Tools.Log(n("importMesh",d?d.producer:"Unknown")+(t.SceneLoader.loggingLevel!==t.SceneLoader.MINIMAL_LOGGING?p:""))}return!1},load:function(e,i,o,s){var a="importScene has failed JSON parse";try{var l=JSON.parse(i);if(a="",void 0!==l.useDelayedTextureLoading&&null!==l.useDelayedTextureLoading&&(e.useDelayedTextureLoading=l.useDelayedTextureLoading&&!t.SceneLoader.ForceFullSceneLoadingForIncremental),void 0!==l.autoClear&&null!==l.autoClear&&(e.autoClear=l.autoClear),void 0!==l.clearColor&&null!==l.clearColor&&(e.clearColor=t.Color4.FromArray(l.clearColor)),void 0!==l.ambientColor&&null!==l.ambientColor&&(e.ambientColor=t.Color3.FromArray(l.ambientColor)),void 0!==l.gravity&&null!==l.gravity&&(e.gravity=t.Vector3.FromArray(l.gravity)),l.fogMode&&0!==l.fogMode)switch(e.fogMode=l.fogMode,e.fogColor=t.Color3.FromArray(l.fogColor),e.fogStart=l.fogStart,e.fogEnd=l.fogEnd,e.fogDensity=l.fogDensity,a+="\tFog mode for scene:  ",e.fogMode){case 1:a+="exp\n";break;case 2:a+="exp2\n";break;case 3:a+="linear\n"}if(l.physicsEnabled){var c;"cannon"===l.physicsEngine?c=new t.CannonJSPlugin:"oimo"===l.physicsEngine&&(c=new t.OimoJSPlugin),a="\tPhysics engine "+(l.physicsEngine?l.physicsEngine:"oimo")+" enabled\n";var u=l.physicsGravity?t.Vector3.FromArray(l.physicsGravity):null;e.enablePhysics(u,c)}if(void 0!==l.metadata&&null!==l.metadata&&(e.metadata=l.metadata),void 0!==l.collisionsEnabled&&null!==l.collisionsEnabled&&(e.collisionsEnabled=l.collisionsEnabled),e.workerCollisions=!!l.workerCollisions,!r(e,i,o,onerror,!0))return!1;if(l.autoAnimate&&e.beginAnimation(e,l.autoAnimateFrom,l.autoAnimateTo,l.autoAnimateLoop,l.autoAnimateSpeed||1),void 0!==l.activeCameraID&&null!==l.activeCameraID&&e.setActiveCameraByID(l.activeCameraID),void 0!==l.environmentTexture&&null!==l.environmentTexture&&(e.environmentTexture=t.CubeTexture.CreateFromPrefilteredData(o+l.environmentTexture,e),!0===l.createDefaultSkybox)){var h=void 0!==e.activeCamera&&null!==e.activeCamera?(e.activeCamera.maxZ-e.activeCamera.minZ)/2:1e3,p=l.skyboxBlurLevel||0;e.createDefaultSkybox(void 0,!0,h,p)}return!0}catch(e){var d=n("importScene",l?l.producer:"Unknown")+a;if(!s)throw t.Tools.Log(d),e;s(d,e)}finally{null!==a&&t.SceneLoader.loggingLevel!==t.SceneLoader.NO_LOGGING&&t.Tools.Log(n("importScene",l?l.producer:"Unknown")+(t.SceneLoader.loggingLevel!==t.SceneLoader.MINIMAL_LOGGING?a:""))}return!1},loadAssets:function(t,e,i,n){return r(t,e,i,onerror)}})}(l||(l={})),function(t){var e=function(){function e(t,e,i,n,r,o,s,a,l){this.onProcessFileCallback=function(){return!0},this._engine=t,this._currentScene=e,this._sceneLoadedCallback=i,this._progressCallback=n,this._additionalRenderLoopLogicCallback=r,this._textureLoadingCallback=o,this._startingProcessingFilesCallback=s,this._onReloadCallback=a,this._errorCallback=l}return e.prototype.monitorElementForDragNDrop=function(t){var e=this;t&&(this._elementToMonitor=t,this._dragEnterHandler=function(t){e.drag(t)},this._dragOverHandler=function(t){e.drag(t)},this._dropHandler=function(t){e.drop(t)},this._elementToMonitor.addEventListener("dragenter",this._dragEnterHandler,!1),this._elementToMonitor.addEventListener("dragover",this._dragOverHandler,!1),this._elementToMonitor.addEventListener("drop",this._dropHandler,!1))},e.prototype.dispose=function(){this._elementToMonitor&&(this._elementToMonitor.removeEventListener("dragenter",this._dragEnterHandler),this._elementToMonitor.removeEventListener("dragover",this._dragOverHandler),this._elementToMonitor.removeEventListener("drop",this._dropHandler))},e.prototype.renderFunction=function(){if(this._additionalRenderLoopLogicCallback&&this._additionalRenderLoopLogicCallback(),this._currentScene){if(this._textureLoadingCallback){var t=this._currentScene.getWaitingItemsCount();t>0&&this._textureLoadingCallback(t)}this._currentScene.render()}},e.prototype.drag=function(t){t.stopPropagation(),t.preventDefault()},e.prototype.drop=function(t){t.stopPropagation(),t.preventDefault(),this.loadFiles(t)},e.prototype._traverseFolder=function(t,e,i,n){var r=this,o=t.createReader(),s=t.fullPath.replace(/^\//,"").replace(/(.+?)\/?$/,"$1/");o.readEntries(function(t){i.count+=t.length;for(var o=0,a=t;o<a.length;o++){var l=a[o];l.isFile?l.file(function(t){t.correctName=s+t.name,e.push(t),0==--i.count&&n()}):l.isDirectory&&r._traverseFolder(l,e,i,n)}--i.count&&n()})},e.prototype._processFiles=function(t){for(var i=0;i<t.length;i++){var n=t[i].correctName.toLowerCase(),r=n.split(".").pop();this.onProcessFileCallback(t[i],n,r)&&("babylon"!==r&&"stl"!==r&&"obj"!==r&&"gltf"!==r&&"glb"!==r||-1!==n.indexOf(".binary.babylon")||-1!==n.indexOf(".incremental.babylon")?e.FilesToLoad[n]=t[i]:this._sceneFileToLoad=t[i])}},e.prototype.loadFiles=function(t){var e=this;if(this._startingProcessingFilesCallback&&this._startingProcessingFilesCallback(),t&&t.dataTransfer&&t.dataTransfer.files&&(this._filesToLoad=t.dataTransfer.files),t&&t.target&&t.target.files&&(this._filesToLoad=t.target.files),this._filesToLoad&&this._filesToLoad.length>0){for(var i=new Array,n=[],r=t.dataTransfer?t.dataTransfer.items:null,o=0;o<this._filesToLoad.length;o++){var s=this._filesToLoad[o],a=s.name.toLowerCase(),l=void 0;if(s.correctName=a,r){var c=r[o];c.getAsEntry?l=c.getAsEntry():c.webkitGetAsEntry&&(l=c.webkitGetAsEntry())}l&&l.isDirectory?n.push(l):i.push(s)}if(0===n.length)this._processFiles(i),this._processReload();else for(var u={count:n.length},h=0,p=n;h<p.length;h++){var d=p[h];this._traverseFolder(d,i,u,function(){e._processFiles(i),0===u.count&&e._processReload()})}}},e.prototype._processReload=function(){this._onReloadCallback?this._onReloadCallback(this._sceneFileToLoad):this.reload()},e.prototype.reload=function(){var e=this;this._sceneFileToLoad?(this._currentScene&&(t.Tools.errorsCount>0&&t.Tools.ClearLogCache(),this._engine.stopRenderLoop(),this._currentScene.dispose()),t.SceneLoader.Load("file:",this._sceneFileToLoad,this._engine,function(t){e._currentScene=t,e._sceneLoadedCallback&&e._sceneLoadedCallback(e._sceneFileToLoad,e._currentScene),e._currentScene.executeWhenReady(function(){e._engine.runRenderLoop(function(){e.renderFunction()})})},function(t){e._progressCallback&&e._progressCallback(t)},function(t,i){e._currentScene=t,e._errorCallback&&e._errorCallback(e._sceneFileToLoad,e._currentScene,i)})):t.Tools.Error("Please provide a valid .babylon file.")},e.FilesToLoad={},e}();t.FilesInput=e}(l||(l={})),function(t){var e=function(){function t(){this._count=0,this._data={}}return t.prototype.copyFrom=function(t){var e=this;this.clear(),t.forEach(function(t,i){return e.add(t,i)})},t.prototype.get=function(t){var e=this._data[t];if(void 0!==e)return e},t.prototype.getOrAddWithFactory=function(t,e){var i=this.get(t);return void 0!==i?i:((i=e(t))&&this.add(t,i),i)},t.prototype.getOrAdd=function(t,e){var i=this.get(t);return void 0!==i?i:(this.add(t,e),e)},t.prototype.contains=function(t){return void 0!==this._data[t]},t.prototype.add=function(t,e){return void 0===this._data[t]&&(this._data[t]=e,++this._count,!0)},t.prototype.set=function(t,e){return void 0!==this._data[t]&&(this._data[t]=e,!0)},t.prototype.getAndRemove=function(t){var e=this.get(t);return void 0!==e?(delete this._data[t],--this._count,e):null},t.prototype.remove=function(t){return!!this.contains(t)&&(delete this._data[t],--this._count,!0)},t.prototype.clear=function(){this._data={},this._count=0},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){for(var e in this._data)t(e,this._data[e])},t.prototype.first=function(t){for(var e in this._data){var i=t(e,this._data[e]);if(i)return i}return null},t}();t.StringDictionary=e}(l||(l={})),function(t){var e=function(){function e(){}return e.EnableFor=function(t){t._tags=t._tags||{},t.hasTags=function(){return e.HasTags(t)},t.addTags=function(i){return e.AddTagsTo(t,i)},t.removeTags=function(i){return e.RemoveTagsFrom(t,i)},t.matchesTagsQuery=function(i){return e.MatchesQuery(t,i)}},e.DisableFor=function(t){delete t._tags,delete t.hasTags,delete t.addTags,delete t.removeTags,delete t.matchesTagsQuery},e.HasTags=function(e){return!!e._tags&&!t.Tools.IsEmpty(e._tags)},e.GetTags=function(t,e){if(void 0===e&&(e=!0),!t._tags)return null;if(e){var i=[];for(var n in t._tags)t._tags.hasOwnProperty(n)&&!0===t._tags[n]&&i.push(n);return i.join(" ")}return t._tags},e.AddTagsTo=function(t,i){i&&"string"==typeof i&&i.split(" ").forEach(function(i,n,r){e._AddTagTo(t,i)})},e._AddTagTo=function(t,i){""!==(i=i.trim())&&"true"!==i&&"false"!==i&&(i.match(/[\s]/)||i.match(/^([!]|([|]|[&]){2})/)||(e.EnableFor(t),t._tags[i]=!0))},e.RemoveTagsFrom=function(t,i){if(e.HasTags(t)){var n=i.split(" ");for(var r in n)e._RemoveTagFrom(t,n[r])}},e._RemoveTagFrom=function(t,e){delete t._tags[e]},e.MatchesQuery=function(i,n){return void 0===n||(""===n?e.HasTags(i):t.AndOrNotEvaluator.Eval(n,function(t){return e.HasTags(i)&&i._tags[t]}))},e}();t.Tags=e}(l||(l={})),function(t){var e=function(){function t(){}return t.Eval=function(e,i){return"true"===(e=e.match(/\([^\(\)]*\)/g)?e.replace(/\([^\(\)]*\)/g,function(e){return e=e.slice(1,e.length-1),t._HandleParenthesisContent(e,i)}):t._HandleParenthesisContent(e,i))||"false"!==e&&t.Eval(e,i)},t._HandleParenthesisContent=function(e,i){i=i||function(t){return"true"===t};var n,r=e.split("||");for(var o in r)if(r.hasOwnProperty(o)){var s=t._SimplifyNegation(r[o].trim()),a=s.split("&&");if(a.length>1)for(var l=0;l<a.length;++l){var c=t._SimplifyNegation(a[l].trim());if(!(n="true"!==c&&"false"!==c?"!"===c[0]?!i(c.substring(1)):i(c):"true"===c)){s="false";break}}if(n||"true"===s){n=!0;break}n="true"!==s&&"false"!==s?"!"===s[0]?!i(s.substring(1)):i(s):"true"===s}return n?"true":"false"},t._SimplifyNegation=function(t){return"!true"===(t=(t=t.replace(/^[\s!]+/,function(t){return(t=t.replace(/[\s]/g,function(){return""})).length%2?"!":""})).trim())?t="false":"!false"===t&&(t="true"),t},t}();t.AndOrNotEvaluator=e}(l||(l={})),function(t){var e=function(){function e(t,i){this.idbFactory=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.callbackManifestChecked=i,this.currentSceneUrl=e.ReturnFullUrlLocation(t),this.db=null,this._enableSceneOffline=!1,this._enableTexturesOffline=!1,this.manifestVersionFound=0,this.mustUpdateRessources=!1,this.hasReachedQuota=!1,e.IDBStorageEnabled?this.checkManifestFile():this.callbackManifestChecked(!0)}return Object.defineProperty(e.prototype,"enableSceneOffline",{get:function(){return this._enableSceneOffline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableTexturesOffline",{get:function(){return this._enableTexturesOffline},enumerable:!0,configurable:!0}),e.prototype.checkManifestFile=function(){var e=this,i=function(){e._enableSceneOffline=!1,e._enableTexturesOffline=!1,e.callbackManifestChecked(!1)},n=!1,r=this.currentSceneUrl+".manifest",o=new XMLHttpRequest;navigator.onLine&&(n=!0,r=r+(null==r.match(/\?/)?"?":"&")+(new Date).getTime()),o.open("GET",r,!0),o.addEventListener("load",function(){if(200===o.status||t.Tools.ValidateXHRData(o,1))try{var n=JSON.parse(o.response);e._enableSceneOffline=n.enableSceneOffline,e._enableTexturesOffline=n.enableTexturesOffline,n.version&&!isNaN(parseInt(n.version))&&(e.manifestVersionFound=n.version),e.callbackManifestChecked&&e.callbackManifestChecked(!0)}catch(t){i()}else i()},!1),o.addEventListener("error",function(t){if(n){n=!1;var r=e.currentSceneUrl+".manifest";o.open("GET",r,!0),o.send()}else i()},!1);try{o.send()}catch(e){t.Tools.Error("Error on XHR send request."),this.callbackManifestChecked(!1)}},e.prototype.openAsync=function(e,i){var n=this,r=function(){n.isSupported=!1,i&&i()};if(this.idbFactory&&(this._enableSceneOffline||this._enableTexturesOffline))if(this.db)e&&e();else{this.hasReachedQuota=!1,this.isSupported=!0;var o=this.idbFactory.open("babylonjs",1);o.onerror=function(t){r()},o.onblocked=function(e){t.Tools.Error("IDB request blocked. Please reload the page."),r()},o.onsuccess=function(t){n.db=o.result,e()},o.onupgradeneeded=function(e){if(n.db=e.target.result,n.db)try{n.db.createObjectStore("scenes",{keyPath:"sceneUrl"}),n.db.createObjectStore("versions",{keyPath:"sceneUrl"}),n.db.createObjectStore("textures",{keyPath:"textureUrl"})}catch(e){t.Tools.Error("Error while creating object stores. Exception: "+e.message),r()}}}else this.isSupported=!1,i&&i()},e.prototype.loadImageFromDB=function(t,i){var n=this,r=e.ReturnFullUrlLocation(t),o=function(){n.hasReachedQuota||null===n.db?i.src=t:n._saveImageIntoDBAsync(r,i)};this.mustUpdateRessources?o():this._loadImageFromDBAsync(r,i,o)},e.prototype._loadImageFromDBAsync=function(e,i,n){if(this.isSupported&&null!==this.db){var r,o=this.db.transaction(["textures"]);o.onabort=function(t){i.src=e},o.oncomplete=function(o){var s;if(r){var a=window.URL||window.webkitURL;s=a.createObjectURL(r.data,{oneTimeOnly:!0}),i.onerror=function(){t.Tools.Error("Error loading image from blob URL: "+s+" switching back to web url: "+e),i.src=e},i.src=s}else n()};var s=o.objectStore("textures").get(e);s.onsuccess=function(t){r=t.target.result},s.onerror=function(n){t.Tools.Error("Error loading texture "+e+" from DB."),i.src=e}}else t.Tools.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),i.src=e},e.prototype._saveImageIntoDBAsync=function(i,n){var r=this;if(this.isSupported){var o=function(){var t;if(s){var e=window.URL||window.webkitURL;try{t=e.createObjectURL(s,{oneTimeOnly:!0})}catch(i){t=e.createObjectURL(s)}}t&&(n.src=t)};if(e.IsUASupportingBlobStorage){var s,a=new XMLHttpRequest;a.open("GET",i,!0),a.responseType="blob",a.addEventListener("load",function(){if(200===a.status&&r.db){s=a.response;var t=r.db.transaction(["textures"],"readwrite");t.onabort=function(t){try{var e=(t.srcElement||t.target).error;e&&"QuotaExceededError"===e.name&&(r.hasReachedQuota=!0)}catch(t){}o()},t.oncomplete=function(t){o()};var l={textureUrl:i,data:s};try{var c=t.objectStore("textures").put(l);c.onsuccess=function(t){},c.onerror=function(t){o()}}catch(t){25===t.code&&(e.IsUASupportingBlobStorage=!1),n.src=i}}else n.src=i},!1),a.addEventListener("error",function(e){t.Tools.Error("Error in XHR request in BABYLON.Database."),n.src=i},!1),a.send()}else n.src=i}else t.Tools.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),n.src=i},e.prototype._checkVersionFromDB=function(t,e){var i=this;this._loadVersionFromDBAsync(t,e,function(){i._saveVersionIntoDBAsync(t,e)})},e.prototype._loadVersionFromDBAsync=function(e,i,n){var r,o=this;if(this.isSupported&&this.db)try{var s=this.db.transaction(["versions"]);s.oncomplete=function(t){r?o.manifestVersionFound>r.data?(o.mustUpdateRessources=!0,n()):i(r.data):(o.mustUpdateRessources=!0,n())},s.onabort=function(t){i(-1)};var a=s.objectStore("versions").get(e);a.onsuccess=function(t){r=t.target.result},a.onerror=function(n){t.Tools.Error("Error loading version for scene "+e+" from DB."),i(-1)}}catch(e){t.Tools.Error("Error while accessing 'versions' object store (READ OP). Exception: "+e.message),i(-1)}else t.Tools.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),i(-1)},e.prototype._saveVersionIntoDBAsync=function(e,i){var n=this;if(this.isSupported&&!this.hasReachedQuota&&this.db)try{var r=this.db.transaction(["versions"],"readwrite");r.onabort=function(t){try{var e=t.srcElement.error;e&&"QuotaExceededError"===e.name&&(n.hasReachedQuota=!0)}catch(t){}i(-1)},r.oncomplete=function(t){i(n.manifestVersionFound)};var o={sceneUrl:e,data:this.manifestVersionFound},s=r.objectStore("versions").put(o);s.onsuccess=function(t){},s.onerror=function(e){t.Tools.Error("Error in DB add version request in BABYLON.Database.")}}catch(e){t.Tools.Error("Error while accessing 'versions' object store (WRITE OP). Exception: "+e.message),i(-1)}else i(-1)},e.prototype.loadFileFromDB=function(t,i,n,r,o){var s=this,a=e.ReturnFullUrlLocation(t),l=function(){s._saveFileIntoDBAsync(a,i,n)};this._checkVersionFromDB(a,function(t){-1!==t?s.mustUpdateRessources?s._saveFileIntoDBAsync(a,i,n,o):s._loadFileFromDBAsync(a,i,l,o):r&&r()})},e.prototype._loadFileFromDBAsync=function(e,i,n,r){if(this.isSupported&&this.db){var o;o=-1!==e.indexOf(".babylon")?"scenes":"textures";var s,a=this.db.transaction([o]);a.oncomplete=function(t){s?i(s.data):n()},a.onabort=function(t){n()};var l=a.objectStore(o).get(e);l.onsuccess=function(t){s=t.target.result},l.onerror=function(i){t.Tools.Error("Error loading file "+e+" from DB."),n()}}else t.Tools.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),i()},e.prototype._saveFileIntoDBAsync=function(e,i,n,r){var o=this;if(this.isSupported){var s;s=-1!==e.indexOf(".babylon")?"scenes":"textures";var a,l=new XMLHttpRequest;l.open("GET",e,!0),r&&(l.responseType="arraybuffer"),n&&(l.onprogress=n),l.addEventListener("load",function(){if(200===l.status||t.Tools.ValidateXHRData(l,r?6:1))if(a=r?l.response:l.responseText,!o.hasReachedQuota&&o.db){var n,c=o.db.transaction([s],"readwrite");c.onabort=function(t){try{var e=t.srcElement.error;e&&"QuotaExceededError"===e.name&&(o.hasReachedQuota=!0)}catch(t){}i(a)},c.oncomplete=function(t){i(a)},n="scenes"===s?{sceneUrl:e,data:a,version:o.manifestVersionFound}:{textureUrl:e,data:a};try{var u=c.objectStore(s).put(n);u.onsuccess=function(t){},u.onerror=function(e){t.Tools.Error("Error in DB add file request in BABYLON.Database.")}}catch(t){i(a)}}else i(a);else i()},!1),l.addEventListener("error",function(e){t.Tools.Error("error on XHR request."),i()},!1),l.send()}else t.Tools.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),i()},e.IsUASupportingBlobStorage=!0,e.IDBStorageEnabled=!0,e.parseURL=function(t){document.createElement("a").href=t;var e=t.substring(0,t.lastIndexOf("#")),i=t.substring(e.lastIndexOf("/")+1,t.length);return t.substring(0,t.indexOf(i,0))},e.ReturnFullUrlLocation=function(t){return-1===t.indexOf("http:/")&&-1===t.indexOf("https:/")?e.parseURL(window.location.href)+t:t},e}();t.Database=e}(l||(l={})),function(t){var e=function(){function e(){this._isEnabled=!0,this.leftColor=t.Color3.White(),this.rightColor=t.Color3.Black(),this.bias=0,this.power=1}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,t.Engine.MarkAllMaterialsAsDirty(t.Material.FresnelDirtyFlag|t.Material.MiscDirtyFlag))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var i=new e;return t.Tools.DeepCopy(this,i),i},e.prototype.serialize=function(){var t={};return t.isEnabled=this.isEnabled,t.leftColor=this.leftColor,t.rightColor=this.rightColor,t.bias=this.bias,t.power=this.power,t},e.Parse=function(i){var n=new e;return n.isEnabled=i.isEnabled,n.leftColor=t.Color3.FromArray(i.leftColor),n.rightColor=t.Color3.FromArray(i.rightColor),n.bias=i.bias,n.power=i.power||1,n},e}();t.FresnelParameters=e}(l||(l={})),function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i,!0)||this;return i.multiMaterials.push(n),n.subMaterials=new Array,n.storeEffectOnSubMeshes=!0,n}return o(i,e),Object.defineProperty(i.prototype,"subMaterials",{get:function(){return this._subMaterials},set:function(t){this._subMaterials=t,this._hookArray(t)},enumerable:!0,configurable:!0}),i.prototype._hookArray=function(t){var e=this,i=t.push;t.push=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=i.apply(t,n);return e._markAllSubMeshesAsTexturesDirty(),o};var n=t.splice;t.splice=function(i,r){var o=n.apply(t,[i,r]);return e._markAllSubMeshesAsTexturesDirty(),o}},i.prototype.getSubMaterial=function(t){return t<0||t>=this.subMaterials.length?this.getScene().defaultMaterial:this.subMaterials[t]},i.prototype.getActiveTextures=function(){return(t=e.prototype.getActiveTextures.call(this)).concat.apply(t,this.subMaterials.map(function(t){return t?t.getActiveTextures():[]}));var t},i.prototype.getClassName=function(){return"MultiMaterial"},i.prototype.isReadyForSubMesh=function(t,e,i){for(var n=0;n<this.subMaterials.length;n++){var r=this.subMaterials[n];if(r){if(r.storeEffectOnSubMeshes){if(!r.isReadyForSubMesh(t,e,i))return!1;continue}if(!r.isReady(t))return!1}}return!0},i.prototype.clone=function(t,e){for(var n=new i(t,this.getScene()),r=0;r<this.subMaterials.length;r++){var o,s=this.subMaterials[r];o=e&&s?s.clone(t+"-"+s.name):this.subMaterials[r],n.subMaterials.push(o)}return n},i.prototype.serialize=function(){var e={};e.name=this.name,e.id=this.id,t.Tags&&(e.tags=t.Tags.GetTags(this)),e.materials=[];for(var i=0;i<this.subMaterials.length;i++){var n=this.subMaterials[i];n?e.materials.push(n.id):e.materials.push(null)}return e},i.prototype.dispose=function(t,i){var n=this.getScene();if(n){var r=n.multiMaterials.indexOf(this);r>=0&&n.multiMaterials.splice(r,1),e.prototype.dispose.call(this,t,i)}},i}(t.Material);t.MultiMaterial=e}(l||(l={})),function(t){var e=function(){function e(){this._offsetX=null,this._offsetY=null,this._pointerPressed=new Array,this.touchAngularSensibility=2e5,this.touchMoveSensibility=250}return e.prototype.attachControl=function(e,i){var n=this,r=null;void 0===this._pointerInput&&(this._onLostFocus=function(t){n._offsetX=null,n._offsetY=null},this._pointerInput=function(e,o){var s=e.event;if("mouse"!==s.pointerType)if(e.type===t.PointerEventTypes.POINTERDOWN){if(i||s.preventDefault(),n._pointerPressed.push(s.pointerId),1!==n._pointerPressed.length)return;r={x:s.clientX,y:s.clientY}}else if(e.type===t.PointerEventTypes.POINTERUP){if(i||s.preventDefault(),-1===(a=n._pointerPressed.indexOf(s.pointerId)))return;if(n._pointerPressed.splice(a,1),0!=a)return;r=null,n._offsetX=null,n._offsetY=null}else if(e.type===t.PointerEventTypes.POINTERMOVE){if(i||s.preventDefault(),!r)return;var a;if(0!=(a=n._pointerPressed.indexOf(s.pointerId)))return;n._offsetX=s.clientX-r.x,n._offsetY=-(s.clientY-r.y)}}),this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,t.PointerEventTypes.POINTERDOWN|t.PointerEventTypes.POINTERUP|t.PointerEventTypes.POINTERMOVE),this._onLostFocus&&e.addEventListener("blur",this._onLostFocus)},e.prototype.detachControl=function(t){this._pointerInput&&t&&(this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null),this._onLostFocus&&(t.removeEventListener("blur",this._onLostFocus),this._onLostFocus=null),this._pointerPressed=[],this._offsetX=null,this._offsetY=null)},e.prototype.checkInputs=function(){if(this._offsetX&&this._offsetY){var e=this.camera;if(e.cameraRotation.y+=this._offsetX/this.touchAngularSensibility,this._pointerPressed.length>1)e.cameraRotation.x+=-this._offsetY/this.touchAngularSensibility;else{var i=e._computeLocalCameraSpeed(),n=new t.Vector3(0,0,i*this._offsetY/this.touchMoveSensibility);t.Matrix.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,e._cameraRotationMatrix),e.cameraDirection.addInPlace(t.Vector3.TransformCoordinates(n,e._cameraRotationMatrix))}}},e.prototype.getClassName=function(){return"FreeCameraTouchInput"},e.prototype.getSimpleName=function(){return"touch"},r([t.serialize()],e.prototype,"touchAngularSensibility",void 0),r([t.serialize()],e.prototype,"touchMoveSensibility",void 0),e}();t.FreeCameraTouchInput=e,t.CameraInputTypes.FreeCameraTouchInput=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.inputs.addTouch(),r._setupInputs(),r}return o(e,t),Object.defineProperty(e.prototype,"touchAngularSensibility",{get:function(){var t=this.inputs.attached.touch;return t?t.touchAngularSensibility:0},set:function(t){var e=this.inputs.attached.touch;e&&(e.touchAngularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchMoveSensibility",{get:function(){var t=this.inputs.attached.touch;return t?t.touchMoveSensibility:0},set:function(t){var e=this.inputs.attached.touch;e&&(e.touchMoveSensibility=t)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"TouchCamera"},e.prototype._setupInputs=function(){var t=this.inputs.attached.mouse;t&&(t.touchEnabled=!1)},e}(t.FreeCamera);t.TouchCamera=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===s&&(s=null),void 0===a&&(a=!0),void 0===l&&(l=!1);var c=e.call(this,null,o,!a)||this;c.isCube=l,c.isEnabled=!0,c._currentRefreshId=-1,c._refreshRate=1,c._vertexBuffers={},c._uniforms=new Array,c._samplers=new Array,c._textures={},c._floats={},c._floatsArrays={},c._colors3={},c._colors4={},c._vectors2={},c._vectors3={},c._matrices={},c._fallbackTextureUsed=!1,o._proceduralTextures.push(c),c._engine=o.getEngine(),c.name=i,c.isRenderTarget=!0,c._size=n,c._generateMipMaps=a,c.setFragment(r),c._fallbackTexture=s,l?(c._texture=c._engine.createRenderTargetCubeTexture(n,{generateMipMaps:a}),c.setFloat("face",0)):c._texture=c._engine.createRenderTargetTexture(n,a);var u=[];return u.push(1,1),u.push(-1,1),u.push(-1,-1),u.push(1,-1),c._vertexBuffers[t.VertexBuffer.PositionKind]=new t.VertexBuffer(c._engine,u,t.VertexBuffer.PositionKind,!1,!1,2),c._createIndexBuffer(),c}return o(i,e),i.prototype._createIndexBuffer=function(){var t=this._engine,e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=t.createIndexBuffer(e)},i.prototype._rebuild=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&e._rebuild(),this._createIndexBuffer(),this.refreshRate===t.RenderTargetTexture.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=t.RenderTargetTexture.REFRESHRATE_RENDER_ONCE)},i.prototype.reset=function(){void 0!==this._effect&&this._engine._releaseEffect(this._effect)},i.prototype.isReady=function(){var e,i=this,n=this._engine;return!!this._fragment&&(!!this._fallbackTextureUsed||(e=void 0!==this._fragment.fragmentElement?{vertex:"procedural",fragmentElement:this._fragment.fragmentElement}:{vertex:"procedural",fragment:this._fragment},this._effect=n.createEffect(e,[t.VertexBuffer.PositionKind],this._uniforms,this._samplers,"",void 0,void 0,function(){i.releaseInternalTexture(),i._fallbackTexture&&(i._texture=i._fallbackTexture._texture,i._texture&&i._texture.incrementReferences()),i._fallbackTextureUsed=!0}),this._effect.isReady()))},i.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},i.prototype.setFragment=function(t){this._fragment=t},Object.defineProperty(i.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(t){this._refreshRate=t,this.resetRefreshCounter()},enumerable:!0,configurable:!0}),i.prototype._shouldRender=function(){return!(!(this.isEnabled&&this.isReady()&&this._texture)||this._fallbackTextureUsed||(-1===this._currentRefreshId?(this._currentRefreshId=1,0):this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,0):(this._currentRefreshId++,1)))},i.prototype.getRenderSize=function(){return this._size},i.prototype.resize=function(t,e){this._fallbackTextureUsed||(this.releaseInternalTexture(),this._texture=this._engine.createRenderTargetTexture(t,e))},i.prototype._checkUniform=function(t){-1===this._uniforms.indexOf(t)&&this._uniforms.push(t)},i.prototype.setTexture=function(t,e){return-1===this._samplers.indexOf(t)&&this._samplers.push(t),this._textures[t]=e,this},i.prototype.setFloat=function(t,e){return this._checkUniform(t),this._floats[t]=e,this},i.prototype.setFloats=function(t,e){return this._checkUniform(t),this._floatsArrays[t]=e,this},i.prototype.setColor3=function(t,e){return this._checkUniform(t),this._colors3[t]=e,this},i.prototype.setColor4=function(t,e){return this._checkUniform(t),this._colors4[t]=e,this},i.prototype.setVector2=function(t,e){return this._checkUniform(t),this._vectors2[t]=e,this},i.prototype.setVector3=function(t,e){return this._checkUniform(t),this._vectors3[t]=e,this},i.prototype.setMatrix=function(t,e){return this._checkUniform(t),this._matrices[t]=e,this},i.prototype.render=function(e){var i=this.getScene();if(i){var n=this._engine;for(var r in n.enableEffect(this._effect),n.setState(!1),this._textures)this._effect.setTexture(r,this._textures[r]);for(r in this._floats)this._effect.setFloat(r,this._floats[r]);for(r in this._floatsArrays)this._effect.setArray(r,this._floatsArrays[r]);for(r in this._colors3)this._effect.setColor3(r,this._colors3[r]);for(r in this._colors4){var o=this._colors4[r];this._effect.setFloat4(r,o.r,o.g,o.b,o.a)}for(r in this._vectors2)this._effect.setVector2(r,this._vectors2[r]);for(r in this._vectors3)this._effect.setVector3(r,this._vectors3[r]);for(r in this._matrices)this._effect.setMatrix(r,this._matrices[r]);if(this._texture){if(this.isCube)for(var s=0;s<6;s++)n.bindFramebuffer(this._texture,s,void 0,void 0,!0),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect),this._effect.setFloat("face",s),n.clear(i.clearColor,!0,!0,!0),n.drawElementsType(t.Material.TriangleFillMode,0,6),5===s&&n.generateMipMapsForCubemap(this._texture);else n.bindFramebuffer(this._texture,0,void 0,void 0,!0),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect),n.clear(i.clearColor,!0,!0,!0),n.drawElementsType(t.Material.TriangleFillMode,0,6);n.unBindFramebuffer(this._texture,this.isCube),this.onGenerated&&this.onGenerated()}}},i.prototype.clone=function(){var t=this.getSize(),e=new i(this.name,t.width,this._fragment,this.getScene(),this._fallbackTexture,this._generateMipMaps);return e.hasAlpha=this.hasAlpha,e.level=this.level,e.coordinatesMode=this.coordinatesMode,e},i.prototype.dispose=function(){var i=this.getScene();if(i){var n=i._proceduralTextures.indexOf(this);n>=0&&i._proceduralTextures.splice(n,1);var r=this._vertexBuffers[t.VertexBuffer.PositionKind];r&&(r.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer)&&(this._indexBuffer=null),e.prototype.dispose.call(this)}},i}(t.Texture);t.ProceduralTexture=e}(l||(l={})),function(t){var e=function(e){function i(t,i,n,r,o,s){var a=e.call(this,t,n,null,r,o,s)||this;return a._animate=!0,a._time=0,a._texturePath=i,a.loadJson(i),a.refreshRate=1,a}return o(i,e),i.prototype.loadJson=function(e){var i=this,n=function(){t.Tools.Log("No config file found in "+e+" trying to use ShadersStore or DOM element");try{i.setFragment(i._texturePath)}catch(e){t.Tools.Error("No json or ShaderStore or DOM element found for CustomProceduralTexture")}},r=e+"/config.json",o=new XMLHttpRequest;o.open("GET",r,!0),o.addEventListener("load",function(){if(200===o.status||t.Tools.ValidateXHRData(o,1))try{i._config=JSON.parse(o.response),i.updateShaderUniforms(),i.updateTextures(),i.setFragment(i._texturePath+"/custom"),i._animate=i._config.animate,i.refreshRate=i._config.refreshrate}catch(t){n()}else n()},!1),o.addEventListener("error",function(){n()},!1);try{o.send()}catch(e){t.Tools.Error("CustomProceduralTexture: Error on XHR send request.")}},i.prototype.isReady=function(){if(!e.prototype.isReady.call(this))return!1;for(var t in this._textures)if(!this._textures[t].isReady())return!1;return!0},i.prototype.render=function(t){var i=this.getScene();this._animate&&i&&(this._time+=.03*i.getAnimationRatio(),this.updateShaderUniforms()),e.prototype.render.call(this,t)},i.prototype.updateTextures=function(){for(var e=0;e<this._config.sampler2Ds.length;e++)this.setTexture(this._config.sampler2Ds[e].sample2Dname,new t.Texture(this._texturePath+"/"+this._config.sampler2Ds[e].textureRelativeUrl,this.getScene()))},i.prototype.updateShaderUniforms=function(){if(this._config)for(var e=0;e<this._config.uniforms.length;e++){var i=this._config.uniforms[e];switch(i.type){case"float":this.setFloat(i.name,i.value);break;case"color3":this.setColor3(i.name,new t.Color3(i.r,i.g,i.b));break;case"color4":this.setColor4(i.name,new t.Color4(i.r,i.g,i.b,i.a));break;case"vector2":this.setVector2(i.name,new t.Vector2(i.x,i.y));break;case"vector3":this.setVector3(i.name,new t.Vector3(i.x,i.y,i.z))}}this.setFloat("time",this._time)},Object.defineProperty(i.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=t},enumerable:!0,configurable:!0}),i}(t.ProceduralTexture);t.CustomProceduralTexture=e}(l||(l={})),function(t){var e=function(){function e(){this.gamepadAngularSensibility=200,this.gamepadMoveSensibility=40,this._cameraTransform=t.Matrix.Identity(),this._deltaTransform=t.Vector3.Zero(),this._vector3=t.Vector3.Zero(),this._vector2=t.Vector2.Zero()}return e.prototype.attachControl=function(e,i){var n=this,r=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=r.onGamepadConnectedObservable.add(function(e){e.type!==t.Gamepad.POSE_ENABLED&&(n.gamepad&&e.type!==t.Gamepad.XBOX||(n.gamepad=e))}),this._onGamepadDisconnectedObserver=r.onGamepadDisconnectedObservable.add(function(t){n.gamepad===t&&(n.gamepad=null)}),this.gamepad=r.getGamepadByType(t.Gamepad.XBOX)},e.prototype.detachControl=function(t){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},e.prototype.checkInputs=function(){if(this.gamepad&&this.gamepad.leftStick){var e=this.camera,i=this.gamepad.leftStick,n=i.x/this.gamepadMoveSensibility,r=i.y/this.gamepadMoveSensibility;i.x=Math.abs(n)>.005?0+n:0,i.y=Math.abs(r)>.005?0+r:0;var o=this.gamepad.rightStick;if(o){var s=o.x/this.gamepadAngularSensibility,a=o.y/this.gamepadAngularSensibility;o.x=Math.abs(s)>.001?0+s:0,o.y=Math.abs(a)>.001?0+a:0}else o={x:0,y:0};e.rotationQuaternion?e.rotationQuaternion.toRotationMatrix(this._cameraTransform):t.Matrix.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,this._cameraTransform);var l=50*e._computeLocalCameraSpeed();this._vector3.copyFromFloats(i.x*l,0,-i.y*l),t.Vector3.TransformCoordinatesToRef(this._vector3,this._cameraTransform,this._deltaTransform),e.cameraDirection.addInPlace(this._deltaTransform),this._vector2.copyFromFloats(o.y,o.x),e.cameraRotation.addInPlace(this._vector2)}},e.prototype.getClassName=function(){return"FreeCameraGamepadInput"},e.prototype.getSimpleName=function(){return"gamepad"},r([t.serialize()],e.prototype,"gamepadAngularSensibility",void 0),r([t.serialize()],e.prototype,"gamepadMoveSensibility",void 0),e}();t.FreeCameraGamepadInput=e,t.CameraInputTypes.FreeCameraGamepadInput=e}(l||(l={})),function(t){var e=function(){function e(){this.gamepadRotationSensibility=80,this.gamepadMoveSensibility=40}return e.prototype.attachControl=function(e,i){var n=this,r=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=r.onGamepadConnectedObservable.add(function(e){e.type!==t.Gamepad.POSE_ENABLED&&(n.gamepad&&e.type!==t.Gamepad.XBOX||(n.gamepad=e))}),this._onGamepadDisconnectedObserver=r.onGamepadDisconnectedObservable.add(function(t){n.gamepad===t&&(n.gamepad=null)}),this.gamepad=r.getGamepadByType(t.Gamepad.XBOX)},e.prototype.detachControl=function(t){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},e.prototype.checkInputs=function(){if(this.gamepad){var t=this.camera,e=this.gamepad.rightStick;if(e){if(0!=e.x){var i=e.x/this.gamepadRotationSensibility;0!=i&&Math.abs(i)>.005&&(t.inertialAlphaOffset+=i)}if(0!=e.y){var n=e.y/this.gamepadRotationSensibility;0!=n&&Math.abs(n)>.005&&(t.inertialBetaOffset+=n)}}var r=this.gamepad.leftStick;if(r&&0!=r.y){var o=r.y/this.gamepadMoveSensibility;0!=o&&Math.abs(o)>.005&&(this.camera.inertialRadiusOffset-=o)}}},e.prototype.getClassName=function(){return"ArcRotateCameraGamepadInput"},e.prototype.getSimpleName=function(){return"gamepad"},r([t.serialize()],e.prototype,"gamepadRotationSensibility",void 0),r([t.serialize()],e.prototype,"gamepadMoveSensibility",void 0),e}();t.ArcRotateCameraGamepadInput=e,t.CameraInputTypes.ArcRotateCameraGamepadInput=e}(l||(l={})),function(t){var e=function(){function e(e){var i=this;this._scene=e,this._babylonGamepads=[],this._oneGamepadConnected=!1,this._isMonitoring=!1,this.onGamepadDisconnectedObservable=new t.Observable,t.Tools.IsWindowObjectExist()?(this._gamepadEventSupported="GamepadEvent"in window,this._gamepadSupport=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads):this._gamepadEventSupported=!1,this.onGamepadConnectedObservable=new t.Observable(function(t){for(var e in i._babylonGamepads){var n=i._babylonGamepads[e];n&&n._isConnected&&i.onGamepadConnectedObservable.notifyObserver(t,n)}}),this._onGamepadConnectedEvent=function(t){var e,n=t.gamepad;n.index in i._babylonGamepads&&i._babylonGamepads[n.index].isConnected||(i._babylonGamepads[n.index]?((e=i._babylonGamepads[n.index]).browserGamepad=n,e._isConnected=!0):e=i._addNewGamepad(n),i.onGamepadConnectedObservable.notifyObservers(e),i._startMonitoringGamepads())},this._onGamepadDisconnectedEvent=function(t){var e=t.gamepad;for(var n in i._babylonGamepads)if(i._babylonGamepads[n].index===e.index){var r=i._babylonGamepads[n];r._isConnected=!1,i.onGamepadDisconnectedObservable.notifyObservers(r);break}},this._gamepadSupport&&(this._updateGamepadObjects(),this._babylonGamepads.length&&this._startMonitoringGamepads(),this._gamepadEventSupported?(window.addEventListener("gamepadconnected",this._onGamepadConnectedEvent,!1),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent,!1)):this._startMonitoringGamepads())}return Object.defineProperty(e.prototype,"gamepads",{get:function(){return this._babylonGamepads},enumerable:!0,configurable:!0}),e.prototype.getGamepadByType=function(e){void 0===e&&(e=t.Gamepad.XBOX);for(var i=0,n=this._babylonGamepads;i<n.length;i++){var r=n[i];if(r&&r.type===e)return r}return null},e.prototype.dispose=function(){this._gamepadEventSupported&&(this._onGamepadConnectedEvent&&window.removeEventListener("gamepadconnected",this._onGamepadConnectedEvent),this._onGamepadDisconnectedEvent&&window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent),this._onGamepadConnectedEvent=null,this._onGamepadDisconnectedEvent=null),this._babylonGamepads.forEach(function(t){t.dispose()}),this.onGamepadConnectedObservable.clear(),this.onGamepadDisconnectedObservable.clear(),this._oneGamepadConnected=!1,this._stopMonitoringGamepads(),this._babylonGamepads=[]},e.prototype._addNewGamepad=function(e){this._oneGamepadConnected||(this._oneGamepadConnected=!0);var i,n=-1!==e.id.search("Xbox One");return i=n||-1!==e.id.search("Xbox 360")||-1!==e.id.search("xinput")?new t.Xbox360Pad(e.id,e.index,e,n):e.pose?t.PoseEnabledControllerHelper.InitiateController(e):new t.GenericPad(e.id,e.index,e),this._babylonGamepads[i.index]=i,i},e.prototype._startMonitoringGamepads=function(){this._isMonitoring||(this._isMonitoring=!0,this._scene||this._checkGamepadsStatus())},e.prototype._stopMonitoringGamepads=function(){this._isMonitoring=!1},e.prototype._checkGamepadsStatus=function(){var e=this;for(var i in this._updateGamepadObjects(),this._babylonGamepads){var n=this._babylonGamepads[i];n&&n.isConnected&&n.update()}this._isMonitoring&&!this._scene&&t.Tools.QueueNewFrame(function(){e._checkGamepadsStatus()})},e.prototype._updateGamepadObjects=function(){for(var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],e=0;e<t.length;e++)if(t[e])if(this._babylonGamepads[t[e].index])this._babylonGamepads[e].browserGamepad=t[e],this._babylonGamepads[e].isConnected||(this._babylonGamepads[e]._isConnected=!0,this.onGamepadConnectedObservable.notifyObservers(this._babylonGamepads[e]));else{var i=this._addNewGamepad(t[e]);this.onGamepadConnectedObservable.notifyObservers(i)}},e}();t.GamepadManager=e}(l||(l={})),function(t){var e=function(){return function(t,e){this.x=t,this.y=e}}();t.StickValues=e;var i=function(){function t(e,i,n,r,o,s,a){void 0===r&&(r=0),void 0===o&&(o=1),void 0===s&&(s=2),void 0===a&&(a=3),this.id=e,this.index=i,this.browserGamepad=n,this._isConnected=!0,this._invertLeftStickY=!1,this.type=t.GAMEPAD,this._leftStickAxisX=r,this._leftStickAxisY=o,this._rightStickAxisX=s,this._rightStickAxisY=a,this.browserGamepad.axes.length>=2&&(this._leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]}),this.browserGamepad.axes.length>=4&&(this._rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})}return Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!0,configurable:!0}),t.prototype.onleftstickchanged=function(t){this._onleftstickchanged=t},t.prototype.onrightstickchanged=function(t){this._onrightstickchanged=t},Object.defineProperty(t.prototype,"leftStick",{get:function(){return this._leftStick},set:function(t){!this._onleftstickchanged||this._leftStick.x===t.x&&this._leftStick.y===t.y||this._onleftstickchanged(t),this._leftStick=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightStick",{get:function(){return this._rightStick},set:function(t){!this._onrightstickchanged||this._rightStick.x===t.x&&this._rightStick.y===t.y||this._onrightstickchanged(t),this._rightStick=t},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._leftStick&&(this.leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]},this._invertLeftStickY&&(this.leftStick.y*=-1)),this._rightStick&&(this.rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})},t.prototype.dispose=function(){},t.GAMEPAD=0,t.GENERIC=1,t.XBOX=2,t.POSE_ENABLED=3,t}();t.Gamepad=i;var n=function(e){function n(n,r,o){var s=e.call(this,n,r,o)||this;return s.onButtonDownObservable=new t.Observable,s.onButtonUpObservable=new t.Observable,s.type=i.GENERIC,s._buttons=new Array(o.buttons.length),s}return o(n,e),n.prototype.onbuttondown=function(t){this._onbuttondown=t},n.prototype.onbuttonup=function(t){this._onbuttonup=t},n.prototype._setButtonValue=function(t,e,i){return t!==e&&(1===t&&(this._onbuttondown&&this._onbuttondown(i),this.onButtonDownObservable.notifyObservers(i)),0===t&&(this._onbuttonup&&this._onbuttonup(i),this.onButtonUpObservable.notifyObservers(i))),t},n.prototype.update=function(){e.prototype.update.call(this);for(var t=0;t<this._buttons.length;t++)this._buttons[t]=this._setButtonValue(this.browserGamepad.buttons[t].value,this._buttons[t],t)},n.prototype.dispose=function(){e.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear()},n}(i);t.GenericPad=n}(l||(l={})),function(t){var e,i;!function(t){t[t.A=0]="A",t[t.B=1]="B",t[t.X=2]="X",t[t.Y=3]="Y",t[t.Start=4]="Start",t[t.Back=5]="Back",t[t.LB=6]="LB",t[t.RB=7]="RB",t[t.LeftStick=8]="LeftStick",t[t.RightStick=9]="RightStick"}(e=t.Xbox360Button||(t.Xbox360Button={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(i=t.Xbox360Dpad||(t.Xbox360Dpad={}));var n=function(n){function r(e,i,r,o){void 0===o&&(o=!1);var s=n.call(this,e,i,r,0,1,2,3)||this;return s._leftTrigger=0,s._rightTrigger=0,s.onButtonDownObservable=new t.Observable,s.onButtonUpObservable=new t.Observable,s.onPadDownObservable=new t.Observable,s.onPadUpObservable=new t.Observable,s._buttonA=0,s._buttonB=0,s._buttonX=0,s._buttonY=0,s._buttonBack=0,s._buttonStart=0,s._buttonLB=0,s._buttonRB=0,s._buttonLeftStick=0,s._buttonRightStick=0,s._dPadUp=0,s._dPadDown=0,s._dPadLeft=0,s._dPadRight=0,s._isXboxOnePad=!1,s.type=t.Gamepad.XBOX,s._isXboxOnePad=o,s}return o(r,n),r.prototype.onlefttriggerchanged=function(t){this._onlefttriggerchanged=t},r.prototype.onrighttriggerchanged=function(t){this._onrighttriggerchanged=t},Object.defineProperty(r.prototype,"leftTrigger",{get:function(){return this._leftTrigger},set:function(t){this._onlefttriggerchanged&&this._leftTrigger!==t&&this._onlefttriggerchanged(t),this._leftTrigger=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rightTrigger",{get:function(){return this._rightTrigger},set:function(t){this._onrighttriggerchanged&&this._rightTrigger!==t&&this._onrighttriggerchanged(t),this._rightTrigger=t},enumerable:!0,configurable:!0}),r.prototype.onbuttondown=function(t){this._onbuttondown=t},r.prototype.onbuttonup=function(t){this._onbuttonup=t},r.prototype.ondpaddown=function(t){this._ondpaddown=t},r.prototype.ondpadup=function(t){this._ondpadup=t},r.prototype._setButtonValue=function(t,e,i){return t!==e&&(1===t&&(this._onbuttondown&&this._onbuttondown(i),this.onButtonDownObservable.notifyObservers(i)),0===t&&(this._onbuttonup&&this._onbuttonup(i),this.onButtonUpObservable.notifyObservers(i))),t},r.prototype._setDPadValue=function(t,e,i){return t!==e&&(1===t&&(this._ondpaddown&&this._ondpaddown(i),this.onPadDownObservable.notifyObservers(i)),0===t&&(this._ondpadup&&this._ondpadup(i),this.onPadUpObservable.notifyObservers(i))),t},Object.defineProperty(r.prototype,"buttonA",{get:function(){return this._buttonA},set:function(t){this._buttonA=this._setButtonValue(t,this._buttonA,e.A)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonB",{get:function(){return this._buttonB},set:function(t){this._buttonB=this._setButtonValue(t,this._buttonB,e.B)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonX",{get:function(){return this._buttonX},set:function(t){this._buttonX=this._setButtonValue(t,this._buttonX,e.X)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonY",{get:function(){return this._buttonY},set:function(t){this._buttonY=this._setButtonValue(t,this._buttonY,e.Y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonStart",{get:function(){return this._buttonStart},set:function(t){this._buttonStart=this._setButtonValue(t,this._buttonStart,e.Start)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonBack",{get:function(){return this._buttonBack},set:function(t){this._buttonBack=this._setButtonValue(t,this._buttonBack,e.Back)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonLB",{get:function(){return this._buttonLB},set:function(t){this._buttonLB=this._setButtonValue(t,this._buttonLB,e.LB)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonRB",{get:function(){return this._buttonRB},set:function(t){this._buttonRB=this._setButtonValue(t,this._buttonRB,e.RB)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonLeftStick",{get:function(){return this._buttonLeftStick},set:function(t){this._buttonLeftStick=this._setButtonValue(t,this._buttonLeftStick,e.LeftStick)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buttonRightStick",{get:function(){return this._buttonRightStick},set:function(t){this._buttonRightStick=this._setButtonValue(t,this._buttonRightStick,e.RightStick)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dPadUp",{get:function(){return this._dPadUp},set:function(t){this._dPadUp=this._setDPadValue(t,this._dPadUp,i.Up)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dPadDown",{get:function(){return this._dPadDown},set:function(t){this._dPadDown=this._setDPadValue(t,this._dPadDown,i.Down)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dPadLeft",{get:function(){return this._dPadLeft},set:function(t){this._dPadLeft=this._setDPadValue(t,this._dPadLeft,i.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dPadRight",{get:function(){return this._dPadRight},set:function(t){this._dPadRight=this._setDPadValue(t,this._dPadRight,i.Right)},enumerable:!0,configurable:!0}),r.prototype.update=function(){n.prototype.update.call(this),this._isXboxOnePad?(this.buttonA=this.browserGamepad.buttons[0].value,this.buttonB=this.browserGamepad.buttons[1].value,this.buttonX=this.browserGamepad.buttons[2].value,this.buttonY=this.browserGamepad.buttons[3].value,this.buttonLB=this.browserGamepad.buttons[4].value,this.buttonRB=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.axes[2],this.rightTrigger=this.browserGamepad.axes[5],this.buttonBack=this.browserGamepad.buttons[9].value,this.buttonStart=this.browserGamepad.buttons[8].value,this.buttonLeftStick=this.browserGamepad.buttons[6].value,this.buttonRightStick=this.browserGamepad.buttons[7].value,this.dPadUp=this.browserGamepad.buttons[11].value,this.dPadDown=this.browserGamepad.buttons[12].value,this.dPadLeft=this.browserGamepad.buttons[13].value,this.dPadRight=this.browserGamepad.buttons[14].value):(this.buttonA=this.browserGamepad.buttons[0].value,this.buttonB=this.browserGamepad.buttons[1].value,this.buttonX=this.browserGamepad.buttons[2].value,this.buttonY=this.browserGamepad.buttons[3].value,this.buttonLB=this.browserGamepad.buttons[4].value,this.buttonRB=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.buttons[6].value,this.rightTrigger=this.browserGamepad.buttons[7].value,this.buttonBack=this.browserGamepad.buttons[8].value,this.buttonStart=this.browserGamepad.buttons[9].value,this.buttonLeftStick=this.browserGamepad.buttons[10].value,this.buttonRightStick=this.browserGamepad.buttons[11].value,this.dPadUp=this.browserGamepad.buttons[12].value,this.dPadDown=this.browserGamepad.buttons[13].value,this.dPadLeft=this.browserGamepad.buttons[14].value,this.dPadRight=this.browserGamepad.buttons[15].value)},r.prototype.dispose=function(){n.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear(),this.onPadDownObservable.clear(),this.onPadUpObservable.clear()},r}(t.Gamepad);t.Xbox360Pad=n}(l||(l={})),function(t){var e;!function(t){t[t.VIVE=0]="VIVE",t[t.OCULUS=1]="OCULUS",t[t.WINDOWS=2]="WINDOWS",t[t.GEAR_VR=3]="GEAR_VR",t[t.GENERIC=4]="GENERIC"}(e=t.PoseEnabledControllerType||(t.PoseEnabledControllerType={}));var i=function(){function e(){}return e.InitiateController=function(e){return-1!==e.id.indexOf("Oculus Touch")?new t.OculusTouchController(e):0===e.id.indexOf(t.WindowsMotionController.GAMEPAD_ID_PREFIX)?new t.WindowsMotionController(e):-1!==e.id.toLowerCase().indexOf("openvr")?new t.ViveController(e):0===e.id.indexOf(t.GearVRController.GAMEPAD_ID_PREFIX)?new t.GearVRController(e):new t.GenericController(e)},e}();t.PoseEnabledControllerHelper=i;var n=function(i){function n(n){var r=i.call(this,n.id,n.index,n)||this;return r._deviceRoomPosition=t.Vector3.Zero(),r._deviceRoomRotationQuaternion=new t.Quaternion,r.devicePosition=t.Vector3.Zero(),r.deviceRotationQuaternion=new t.Quaternion,r.deviceScaleFactor=1,r._leftHandSystemQuaternion=new t.Quaternion,r._deviceToWorld=t.Matrix.Identity(),r._workingMatrix=t.Matrix.Identity(),r.type=t.Gamepad.POSE_ENABLED,r.controllerType=e.GENERIC,r.position=t.Vector3.Zero(),r.rotationQuaternion=new t.Quaternion,r._calculatedPosition=t.Vector3.Zero(),r._calculatedRotation=new t.Quaternion,t.Quaternion.RotationYawPitchRollToRef(Math.PI,0,0,r._leftHandSystemQuaternion),r}return o(n,i),n.prototype.update=function(){i.prototype.update.call(this);var e=this.browserGamepad.pose;this.updateFromDevice(e),t.Vector3.TransformCoordinatesToRef(this._calculatedPosition,this._deviceToWorld,this.devicePosition),this._deviceToWorld.getRotationMatrixToRef(this._workingMatrix),t.Quaternion.FromRotationMatrixToRef(this._workingMatrix,this.deviceRotationQuaternion),this.deviceRotationQuaternion.multiplyInPlace(this._calculatedRotation),this._mesh&&(this._mesh.position.copyFrom(this.devicePosition),this._mesh.rotationQuaternion&&this._mesh.rotationQuaternion.copyFrom(this.deviceRotationQuaternion))},n.prototype.updateFromDevice=function(t){if(t){this.rawPose=t,t.position&&(this._deviceRoomPosition.copyFromFloats(t.position[0],t.position[1],-t.position[2]),this._mesh&&this._mesh.getScene().useRightHandedSystem&&(this._deviceRoomPosition.z*=-1),this._deviceRoomPosition.scaleToRef(this.deviceScaleFactor,this._calculatedPosition),this._calculatedPosition.addInPlace(this.position));var e=this.rawPose;t.orientation&&e.orientation&&(this._deviceRoomRotationQuaternion.copyFromFloats(e.orientation[0],e.orientation[1],-e.orientation[2],-e.orientation[3]),this._mesh&&(this._mesh.getScene().useRightHandedSystem?(this._deviceRoomRotationQuaternion.z*=-1,this._deviceRoomRotationQuaternion.w*=-1):this._deviceRoomRotationQuaternion.multiplyToRef(this._leftHandSystemQuaternion,this._deviceRoomRotationQuaternion)),this._deviceRoomRotationQuaternion.multiplyToRef(this.rotationQuaternion,this._calculatedRotation))}},n.prototype.attachToMesh=function(e){this._mesh&&(this._mesh.parent=null),this._mesh=e,this._poseControlledCamera&&(this._mesh.parent=this._poseControlledCamera),this._mesh.rotationQuaternion||(this._mesh.rotationQuaternion=new t.Quaternion)},n.prototype.attachToPoseControlledCamera=function(t){this._poseControlledCamera=t,this._mesh&&(this._mesh.parent=this._poseControlledCamera)},n.prototype.dispose=function(){this._mesh&&this._mesh.dispose(),this._mesh=null,i.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"mesh",{get:function(){return this._mesh},enumerable:!0,configurable:!0}),n.prototype.getForwardRay=function(e){if(void 0===e&&(e=100),!this.mesh)return new t.Ray(t.Vector3.Zero(),new t.Vector3(0,0,1),e);var i=this.mesh.getWorldMatrix(),n=i.getTranslation(),r=new t.Vector3(0,0,-1),o=t.Vector3.TransformNormal(r,i),s=t.Vector3.Normalize(o);return new t.Ray(n,s,e)},n}(t.Gamepad);t.PoseEnabledController=n}(l||(l={})),function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.onTriggerStateChangedObservable=new t.Observable,n.onMainButtonStateChangedObservable=new t.Observable,n.onSecondaryButtonStateChangedObservable=new t.Observable,n.onPadStateChangedObservable=new t.Observable,n.onPadValuesChangedObservable=new t.Observable,n.pad={x:0,y:0},n._changes={pressChanged:!1,touchChanged:!1,valueChanged:!1,changed:!1},n._buttons=new Array(i.buttons.length),n.hand=i.hand,n}return o(i,e),i.prototype.onButtonStateChange=function(t){this._onButtonStateChange=t},Object.defineProperty(i.prototype,"defaultModel",{get:function(){return this._defaultModel},enumerable:!0,configurable:!0}),i.prototype.update=function(){e.prototype.update.call(this);for(var t=0;t<this._buttons.length;t++)this._setButtonValue(this.browserGamepad.buttons[t],this._buttons[t],t);this.leftStick.x===this.pad.x&&this.leftStick.y===this.pad.y||(this.pad.x=this.leftStick.x,this.pad.y=this.leftStick.y,this.onPadValuesChangedObservable.notifyObservers(this.pad))},i.prototype._setButtonValue=function(t,e,i){t||(t={pressed:!1,touched:!1,value:0}),e?(this._checkChanges(t,e),this._changes.changed&&(this._onButtonStateChange&&this._onButtonStateChange(this.index,i,t),this.handleButtonChange(i,t,this._changes)),this._buttons[i].pressed=t.pressed,this._buttons[i].touched=t.touched,this._buttons[i].value=t.value<1e-8?0:t.value):this._buttons[i]={pressed:t.pressed,touched:t.touched,value:t.value}},i.prototype._checkChanges=function(t,e){return this._changes.pressChanged=t.pressed!==e.pressed,this._changes.touchChanged=t.touched!==e.touched,this._changes.valueChanged=t.value!==e.value,this._changes.changed=this._changes.pressChanged||this._changes.touchChanged||this._changes.valueChanged,this._changes},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.onTriggerStateChangedObservable.clear(),this.onMainButtonStateChangedObservable.clear(),this.onSecondaryButtonStateChangedObservable.clear(),this.onPadStateChangedObservable.clear(),this.onPadValuesChangedObservable.clear()},i}(t.PoseEnabledController);t.WebVRController=e}(l||(l={})),function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.onSecondaryTriggerStateChangedObservable=new t.Observable,n.onThumbRestChangedObservable=new t.Observable,n.controllerType=t.PoseEnabledControllerType.OCULUS,n}return o(i,e),i.prototype.initControllerMesh=function(e,n){var r,o=this;r="left"===this.hand?i.MODEL_LEFT_FILENAME:i.MODEL_RIGHT_FILENAME,t.SceneLoader.ImportMesh("",i.MODEL_BASE_URL,r,e,function(t){o._defaultModel=t[1],o.attachToMesh(o._defaultModel),n&&n(o._defaultModel)})},Object.defineProperty(i.prototype,"onAButtonStateChangedObservable",{get:function(){if("right"===this.hand)return this.onMainButtonStateChangedObservable;throw new Error("No A button on left hand")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onBButtonStateChangedObservable",{get:function(){if("right"===this.hand)return this.onSecondaryButtonStateChangedObservable;throw new Error("No B button on left hand")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onXButtonStateChangedObservable",{get:function(){if("left"===this.hand)return this.onMainButtonStateChangedObservable;throw new Error("No X button on right hand")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onYButtonStateChangedObservable",{get:function(){if("left"===this.hand)return this.onSecondaryButtonStateChangedObservable;throw new Error("No Y button on right hand")},enumerable:!0,configurable:!0}),i.prototype.handleButtonChange=function(t,e,i){var n=e,r="right"===this.hand?-1:1;switch(t){case 0:return void this.onPadStateChangedObservable.notifyObservers(n);case 1:return this._defaultModel&&(this._defaultModel.getChildren()[3].rotation.x=.2*-n.value,this._defaultModel.getChildren()[3].position.y=.005*-n.value,this._defaultModel.getChildren()[3].position.z=.005*-n.value),void this.onTriggerStateChangedObservable.notifyObservers(n);case 2:return this._defaultModel&&(this._defaultModel.getChildren()[4].position.x=r*n.value*.0035),void this.onSecondaryTriggerStateChangedObservable.notifyObservers(n);case 3:return this._defaultModel&&(n.pressed?this._defaultModel.getChildren()[1].position.y=-.001:this._defaultModel.getChildren()[1].position.y=0),void this.onMainButtonStateChangedObservable.notifyObservers(n);case 4:return this._defaultModel&&(n.pressed?this._defaultModel.getChildren()[2].position.y=-.001:this._defaultModel.getChildren()[2].position.y=0),void this.onSecondaryButtonStateChangedObservable.notifyObservers(n);case 5:return void this.onThumbRestChangedObservable.notifyObservers(n)}},i.MODEL_BASE_URL="https://controllers.babylonjs.com/oculus/",i.MODEL_LEFT_FILENAME="left.babylon",i.MODEL_RIGHT_FILENAME="right.babylon",i}(t.WebVRController);t.OculusTouchController=e}(l||(l={})),function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.controllerType=t.PoseEnabledControllerType.VIVE,n._invertLeftStickY=!0,n}return o(i,e),i.prototype.initControllerMesh=function(e,n){var r=this;t.SceneLoader.ImportMesh("",i.MODEL_BASE_URL,i.MODEL_FILENAME,e,function(t){r._defaultModel=t[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},Object.defineProperty(i.prototype,"onLeftButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onRightButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onMenuButtonStateChangedObservable",{get:function(){return this.onSecondaryButtonStateChangedObservable},enumerable:!0,configurable:!0}),i.prototype.handleButtonChange=function(t,e,i){var n=e;switch(t){case 0:return void this.onPadStateChangedObservable.notifyObservers(n);case 1:return this._defaultModel&&(this._defaultModel.getChildren()[6].rotation.x=.15*-n.value),void this.onTriggerStateChangedObservable.notifyObservers(n);case 2:return void this.onMainButtonStateChangedObservable.notifyObservers(n);case 3:return this._defaultModel&&(n.pressed?this._defaultModel.getChildren()[2].position.y=-.001:this._defaultModel.getChildren()[2].position.y=0),void this.onSecondaryButtonStateChangedObservable.notifyObservers(n)}},i.MODEL_BASE_URL="https://controllers.babylonjs.com/vive/",i.MODEL_FILENAME="wand.babylon",i}(t.WebVRController);t.ViveController=e}(l||(l={})),function(t){var e=function(e){function i(t){return e.call(this,t)||this}return o(i,e),i.prototype.initControllerMesh=function(e,n){var r=this;t.SceneLoader.ImportMesh("",i.MODEL_BASE_URL,i.MODEL_FILENAME,e,function(t){r._defaultModel=t[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},i.prototype.handleButtonChange=function(t,e,i){console.log("Button id: "+t+"state: "),console.dir(e)},i.MODEL_BASE_URL="https://controllers.babylonjs.com/generic/",i.MODEL_FILENAME="generic.babylon",i}(t.WebVRController);t.GenericController=e}(l||(l={})),function(t){var e=function(){return function(){this.buttonMeshes={},this.axisMeshes={}}}(),i=function(i){function n(e){var n=i.call(this,e)||this;return n._mapping={buttons:["thumbstick","trigger","grip","menu","trackpad"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},buttonObservableNames:{trigger:"onTriggerStateChangedObservable",menu:"onSecondaryButtonStateChangedObservable",grip:"onMainButtonStateChangedObservable",thumbstick:"onPadStateChangedObservable",trackpad:"onTrackpadChangedObservable"},axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],pointingPoseMeshName:"POINTING_POSE"},n.onTrackpadChangedObservable=new t.Observable,n.onTrackpadValuesChangedObservable=new t.Observable,n.trackpad={x:0,y:0},n.controllerType=t.PoseEnabledControllerType.WINDOWS,n._loadedMeshInfo=null,n}return o(n,i),Object.defineProperty(n.prototype,"onTriggerButtonStateChangedObservable",{get:function(){return this.onTriggerStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onMenuButtonStateChangedObservable",{get:function(){return this.onSecondaryButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onGripButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onThumbstickButtonStateChangedObservable",{get:function(){return this.onPadStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTouchpadButtonStateChangedObservable",{get:function(){return this.onTrackpadChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onTouchpadValuesChangedObservable",{get:function(){return this.onTrackpadValuesChangedObservable},enumerable:!0,configurable:!0}),n.prototype.update=function(){if(i.prototype.update.call(this),this._loadedMeshInfo&&this.browserGamepad.axes){this.browserGamepad.axes[2]==this.trackpad.x&&this.browserGamepad.axes[3]==this.trackpad.y||(this.trackpad.x=this.browserGamepad.axes[2],this.trackpad.y=this.browserGamepad.axes[3],this.onTrackpadValuesChangedObservable.notifyObservers(this.trackpad));for(var t=0;t<this._mapping.axisMeshNames.length;t++)this.lerpAxisTransform(t,this.browserGamepad.axes[t])}},n.prototype.handleButtonChange=function(t,e,i){var n=this._mapping.buttons[t];if(n){var r=this[this._mapping.buttonObservableNames[n]];r&&r.notifyObservers(e),this.lerpButtonTransform(n,e.value)}},n.prototype.lerpButtonTransform=function(e,i){if(this._loadedMeshInfo){var n=this._loadedMeshInfo.buttonMeshes[e];n.unpressed.rotationQuaternion&&n.pressed.rotationQuaternion&&n.value.rotationQuaternion&&(t.Quaternion.SlerpToRef(n.unpressed.rotationQuaternion,n.pressed.rotationQuaternion,i,n.value.rotationQuaternion),t.Vector3.LerpToRef(n.unpressed.position,n.pressed.position,i,n.value.position))}},n.prototype.lerpAxisTransform=function(e,i){if(this._loadedMeshInfo){var n=this._loadedMeshInfo.axisMeshes[e];if(n&&n.min.rotationQuaternion&&n.max.rotationQuaternion&&n.value.rotationQuaternion){var r=.5*i+.5;t.Quaternion.SlerpToRef(n.min.rotationQuaternion,n.max.rotationQuaternion,r,n.value.rotationQuaternion),t.Vector3.LerpToRef(n.min.position,n.max.position,r,n.value.position)}}},n.prototype.initControllerMesh=function(e,i,r){var o,s,a=this;if(void 0===r&&(r=!1),t.SceneLoader.IsPluginForExtensionAvailable(".glb")){var l="default";if(this.id&&!r){var c=this.id.match(n.GAMEPAD_ID_PATTERN);l=c&&c[0]||l}s="left"===this.hand?n.MODEL_LEFT_FILENAME:n.MODEL_RIGHT_FILENAME,o=n.MODEL_BASE_URL+l+"/"}else t.Tools.Warn("You need to reference GLTF loader to load Windows Motion Controllers model. Falling back to generic models"),o=t.GenericController.MODEL_BASE_URL,s=t.GenericController.MODEL_FILENAME;t.SceneLoader.ImportMesh("",o,s,e,function(t){a._loadedMeshInfo=a.processModel(e,t),a._loadedMeshInfo&&(a._defaultModel=a._loadedMeshInfo.rootNode,a.attachToMesh(a._defaultModel),i&&i(a._defaultModel))},null,function(e,n){t.Tools.Log(n),t.Tools.Warn("Failed to retrieve controller model from the remote server: "+o+s),r||a.initControllerMesh(e,i,!0)})},n.prototype.processModel=function(e,i){for(var n=null,r=new t.Mesh(this.id+" "+this.hand,e),o=null,s=0;s<i.length;s++){var a=i[s];if(!a.parent){a.isPickable=!1,o=a;break}}return o?(o.setParent(r),n=this.createMeshInfo(r)):t.Tools.Warn("Could not find root node in model file."),n},n.prototype.createMeshInfo=function(i){function n(t,e){return t.getChildMeshes(!1,function(t){return t.name===e})[0]}function r(t,e){return t.getChildMeshes(!0,function(t){return t.name==e})[0]}var o,s=new e;for(s.rootNode=i,s.buttonMeshes={},s.axisMeshes={},o=0;o<this._mapping.buttons.length;o++){var a=this._mapping.buttonMeshNames[this._mapping.buttons[o]];if(a){var l=n(i,a);if(l){var c={index:o,value:r(l,"VALUE"),pressed:r(l,"PRESSED"),unpressed:r(l,"UNPRESSED")};c.value&&c.pressed&&c.unpressed?s.buttonMeshes[this._mapping.buttons[o]]=c:t.Tools.Warn("Missing button submesh under mesh with name: "+a+"(VALUE: "+!!c.value+", PRESSED: "+!!c.pressed+", UNPRESSED:"+!!c.unpressed+")")}else t.Tools.Warn("Missing button mesh with name: "+a)}else t.Tools.Log("Skipping unknown button at index: "+o+" with mapped name: "+this._mapping.buttons[o])}for(o=0;o<this._mapping.axisMeshNames.length;o++){var u=this._mapping.axisMeshNames[o];if(u){var h=n(i,u);if(h){var p={index:o,value:r(h,"VALUE"),min:r(h,"MIN"),max:r(h,"MAX")};p.value&&p.min&&p.max?s.axisMeshes[o]=p:t.Tools.Warn("Missing axis submesh under mesh with name: "+u+"(VALUE: "+!!p.value+", MIN: "+!!p.min+", MAX:"+!!p.max+")")}else t.Tools.Warn("Missing axis mesh with name: "+u)}else t.Tools.Log("Skipping unknown axis at index: "+o)}return s.pointingPoseNode=n(i,this._mapping.pointingPoseMeshName),s.pointingPoseNode||t.Tools.Warn("Missing pointing pose mesh with name: "+this._mapping.pointingPoseMeshName),s},n.prototype.getForwardRay=function(e){if(void 0===e&&(e=100),!this._loadedMeshInfo||!this._loadedMeshInfo.pointingPoseNode)return i.prototype.getForwardRay.call(this,e);var n=this._loadedMeshInfo.pointingPoseNode.getWorldMatrix(),r=n.getTranslation(),o=new t.Vector3(0,0,-1),s=t.Vector3.TransformNormal(o,n),a=t.Vector3.Normalize(s);return new t.Ray(r,a,e)},n.prototype.dispose=function(){i.prototype.dispose.call(this),this.onTrackpadChangedObservable.clear()},n.MODEL_BASE_URL="https://controllers.babylonjs.com/microsoft/",n.MODEL_LEFT_FILENAME="left.glb",n.MODEL_RIGHT_FILENAME="right.glb",n.GAMEPAD_ID_PREFIX="Spatial Controller (Spatial Interaction Source) ",n.GAMEPAD_ID_PATTERN=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,n}(t.WebVRController);t.WindowsMotionController=i}(l||(l={})),function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n._buttonIndexToObservableNameMap=["onTrackpadChangedObservable","onTriggerStateChangedObservable"],n.controllerType=t.PoseEnabledControllerType.GEAR_VR,n}return o(i,e),i.prototype.initControllerMesh=function(e,n){var r=this;t.SceneLoader.ImportMesh("",i.MODEL_BASE_URL,i.MODEL_FILENAME,e,function(t){r._defaultModel=t[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},i.prototype.handleButtonChange=function(t,e,i){if(t<this._buttonIndexToObservableNameMap.length){var n=this[this._buttonIndexToObservableNameMap[t]];n&&n.notifyObservers(e)}},i.MODEL_BASE_URL="https://controllers.babylonjs.com/generic/",i.MODEL_FILENAME="generic.babylon",i.GAMEPAD_ID_PREFIX="Gear VR",i}(t.WebVRController);t.GearVRController=e}(l||(l={})),function(t){var e=function(e){function i(t,i,n,r){void 0===r&&(r=null);var o=e.call(this,t,i,n)||this;return o.radius=12,o.rotationOffset=0,o.heightOffset=4,o.cameraAcceleration=.05,o.maxCameraSpeed=20,o.lockedTarget=r,o}return o(i,e),i.prototype.getRadians=function(t){return t*Math.PI/180},i.prototype.follow=function(e){if(e){var i;if(e.rotationQuaternion){var n=new t.Matrix;e.rotationQuaternion.toRotationMatrix(n),i=Math.atan2(n.m[8],n.m[10])}else i=e.rotation.y;var r=this.getRadians(this.rotationOffset)+i,o=e.getAbsolutePosition(),s=o.x+Math.sin(r)*this.radius,a=o.z+Math.cos(r)*this.radius,l=s-this.position.x,c=o.y+this.heightOffset-this.position.y,u=a-this.position.z,h=l*this.cameraAcceleration*2,p=c*this.cameraAcceleration,d=u*this.cameraAcceleration*2;(h>this.maxCameraSpeed||h<-this.maxCameraSpeed)&&(h=h<1?-this.maxCameraSpeed:this.maxCameraSpeed),(p>this.maxCameraSpeed||p<-this.maxCameraSpeed)&&(p=p<1?-this.maxCameraSpeed:this.maxCameraSpeed),(d>this.maxCameraSpeed||d<-this.maxCameraSpeed)&&(d=d<1?-this.maxCameraSpeed:this.maxCameraSpeed),this.position=new t.Vector3(this.position.x+h,this.position.y+p,this.position.z+d),this.setTarget(o)}},i.prototype._checkInputs=function(){e.prototype._checkInputs.call(this),this.lockedTarget&&this.follow(this.lockedTarget)},i.prototype.getClassName=function(){return"FollowCamera"},r([t.serialize()],i.prototype,"radius",void 0),r([t.serialize()],i.prototype,"rotationOffset",void 0),r([t.serialize()],i.prototype,"heightOffset",void 0),r([t.serialize()],i.prototype,"cameraAcceleration",void 0),r([t.serialize()],i.prototype,"maxCameraSpeed",void 0),r([t.serializeAsMeshReference("lockedTargetId")],i.prototype,"lockedTarget",void 0),i}(t.TargetCamera);t.FollowCamera=e;var i=function(e){function i(i,n,r,o,s,a){var l=e.call(this,i,t.Vector3.Zero(),a)||this;return l.alpha=n,l.beta=r,l.radius=o,l.target=s,l._cartesianCoordinates=t.Vector3.Zero(),l.follow(),l}return o(i,e),i.prototype.follow=function(){if(this.target){this._cartesianCoordinates.x=this.radius*Math.cos(this.alpha)*Math.cos(this.beta),this._cartesianCoordinates.y=this.radius*Math.sin(this.beta),this._cartesianCoordinates.z=this.radius*Math.sin(this.alpha)*Math.cos(this.beta);var t=this.target.getAbsolutePosition();this.position=t.add(this._cartesianCoordinates),this.setTarget(t)}},i.prototype._checkInputs=function(){e.prototype._checkInputs.call(this),this.follow()},i.prototype.getClassName=function(){return"ArcFollowCamera"},i}(t.TargetCamera);t.ArcFollowCamera=i}(l||(l={})),function(t){var e=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.inputs.addGamepad(),r}return o(e,t),Object.defineProperty(e.prototype,"gamepadAngularSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadAngularSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadAngularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamepadMoveSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadMoveSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadMoveSensibility=t)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"UniversalCamera"},e}(t.TouchCamera);t.UniversalCamera=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return o(e,t),Object.defineProperty(e.prototype,"gamepadAngularSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadAngularSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadAngularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamepadMoveSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadMoveSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadMoveSensibility=t)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"GamepadCamera"},e}(t.UniversalCamera);t.GamepadCamera=e}(l||(l={})),function(t){var e=function(){function t(){this._renderPipelines={}}return t.prototype.addPipeline=function(t){this._renderPipelines[t._name]=t},t.prototype.attachCamerasToRenderPipeline=function(t,e,i){void 0===i&&(i=!1);var n=this._renderPipelines[t];n&&n._attachCameras(e,i)},t.prototype.detachCamerasFromRenderPipeline=function(t,e){var i=this._renderPipelines[t];i&&i._detachCameras(e)},t.prototype.enableEffectInPipeline=function(t,e,i){var n=this._renderPipelines[t];n&&n._enableEffect(e,i)},t.prototype.disableEffectInPipeline=function(t,e,i){var n=this._renderPipelines[t];n&&n._disableEffect(e,i)},t.prototype.update=function(){for(var t in this._renderPipelines)if(this._renderPipelines.hasOwnProperty(t)){var e=this._renderPipelines[t];e.isSupported?e._update():(e.dispose(),delete this._renderPipelines[t])}},t.prototype._rebuild=function(){for(var t in this._renderPipelines)if(this._renderPipelines.hasOwnProperty(t)){this._renderPipelines[t]._rebuild()}},t.prototype.dispose=function(){for(var t in this._renderPipelines)if(this._renderPipelines.hasOwnProperty(t)){this._renderPipelines[t].dispose()}},t}();t.PostProcessRenderPipelineManager=e}(l||(l={})),function(t){var e=function(){function e(t,e,i,n){this._name=e,this._singleInstance=n||!0,this._getPostProcesses=i,this._cameras={},this._indicesForCamera={},this._postProcesses={}}return Object.defineProperty(e.prototype,"isSupported",{get:function(){for(var t in this._postProcesses)for(var e in this._postProcesses[t])if(!this._postProcesses[t][e].isSupported)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype._update=function(){},e.prototype._attachCameras=function(e){var i,n=this,r=t.Tools.MakeArray(e||this._cameras);if(r)for(var o=0;o<r.length;o++){var s=r[o],a=s.name;if(i=this._singleInstance?0:a,!this._postProcesses[i]){var l=this._getPostProcesses();l&&(this._postProcesses[i]=Array.isArray(l)?l:[l])}this._indicesForCamera[a]||(this._indicesForCamera[a]=[]),this._postProcesses[i].forEach(function(t){var e=s.attachPostProcess(t);n._indicesForCamera[a].push(e)}),this._cameras[a]||(this._cameras[a]=s)}},e.prototype._detachCameras=function(e){var i=t.Tools.MakeArray(e||this._cameras);if(i)for(var n=0;n<i.length;n++){var r=i[n],o=r.name;this._postProcesses[this._singleInstance?0:o].forEach(function(t){r.detachPostProcess(t)}),this._cameras[o]&&(this._cameras[o]=null)}},e.prototype._enable=function(e){var i=t.Tools.MakeArray(e||this._cameras);if(i)for(var n=0;n<i.length;n++)for(var r=i[n],o=r.name,s=0;s<this._indicesForCamera[o].length;s++)void 0===r._postProcesses[this._indicesForCamera[o][s]]&&e[n].attachPostProcess(this._postProcesses[this._singleInstance?0:o],this._indicesForCamera[o][s])},e.prototype._disable=function(e){var i=t.Tools.MakeArray(e||this._cameras);if(i)for(var n=0;n<i.length;n++){var r=i[n],o=r.Name;r.detachPostProcess(this._postProcesses[this._singleInstance?0:o])}},e.prototype.getPostProcesses=function(t){return this._singleInstance?this._postProcesses[0]:t?this._postProcesses[t.name]:null},e}();t.PostProcessRenderEffect=e}(l||(l={})),function(t){var e=function(){function e(t,e){this._name=e,this._renderEffects={},this._renderEffectsForIsolatedPass=new Array,this._cameras=[]}return e.prototype.getClassName=function(){return"PostProcessRenderPipeline"},Object.defineProperty(e.prototype,"isSupported",{get:function(){for(var t in this._renderEffects)if(this._renderEffects.hasOwnProperty(t)&&!this._renderEffects[t].isSupported)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype.addEffect=function(t){this._renderEffects[t._name]=t},e.prototype._rebuild=function(){},e.prototype._enableEffect=function(e,i){var n=this._renderEffects[e];n&&n._enable(t.Tools.MakeArray(i||this._cameras))},e.prototype._disableEffect=function(e,i){var n=this._renderEffects[e];n&&n._disable(t.Tools.MakeArray(i||this._cameras))},e.prototype._attachCameras=function(e,i){var n=t.Tools.MakeArray(e||this._cameras);if(n){var r,o=[];for(r=0;r<n.length;r++){var s=n[r],a=s.name;-1===this._cameras.indexOf(s)?this._cameras[a]=s:i&&o.push(r)}for(r=0;r<o.length;r++)e.splice(o[r],1);for(var l in this._renderEffects)this._renderEffects.hasOwnProperty(l)&&this._renderEffects[l]._attachCameras(n)}},e.prototype._detachCameras=function(e){var i=t.Tools.MakeArray(e||this._cameras);if(i){for(var n in this._renderEffects)this._renderEffects.hasOwnProperty(n)&&this._renderEffects[n]._detachCameras(i);for(var r=0;r<i.length;r++)this._cameras.splice(this._cameras.indexOf(i[r]),1)}},e.prototype._update=function(){for(var t in this._renderEffects)this._renderEffects.hasOwnProperty(t)&&this._renderEffects[t]._update();for(var e=0;e<this._cameras.length;e++){var i=this._cameras[e].name;this._renderEffectsForIsolatedPass[i]&&this._renderEffectsForIsolatedPass[i]._update()}},e.prototype._reset=function(){this._renderEffects={},this._renderEffectsForIsolatedPass=new Array},e.prototype.dispose=function(){},r([t.serialize()],e.prototype,"_name",void 0),e}();t.PostProcessRenderPipeline=e}(l||(l={})),function(t){var e=function(){function e(e,i){void 0===i&&(i=t.Engine.TEXTURETYPE_FLOAT);var n=this;this._scene=e;var r=e.getEngine();this._depthMap=new t.RenderTargetTexture("depthMap",{width:r.getRenderWidth(),height:r.getRenderHeight()},this._scene,!1,!0,i),this._depthMap.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._depthMap.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._depthMap.refreshRate=1,this._depthMap.renderParticles=!1,this._depthMap.renderList=null,this._depthMap.onClearObservable.add(function(e){e.clear(new t.Color4(1,1,1,1),!0,!0,!0)});var o=function(e){var i=e.getRenderingMesh(),r=n._scene,o=r.getEngine(),s=e.getMaterial();if(s){o.setState(s.backFaceCulling,0,!1,r.useRightHandedSystem);var a=i._getInstancesRenderList(e._id);if(!a.mustReturn){var l=o.getCaps().instancedArrays&&null!==a.visibleInstances[e._id];if(n.isReady(e,l)&&r.activeCamera){if(o.enableEffect(n._effect),i._bind(e,n._effect,t.Material.TriangleFillMode),n._effect.setMatrix("viewProjection",r.getTransformMatrix()),n._effect.setFloat2("depthValues",r.activeCamera.minZ,r.activeCamera.minZ+r.activeCamera.maxZ),s&&s.needAlphaTesting()){var c=s.getAlphaTestTexture();c&&(n._effect.setTexture("diffuseSampler",c),n._effect.setMatrix("diffuseMatrix",c.getTextureMatrix()))}i.useBones&&i.computeBonesUsingShaders&&i.skeleton&&n._effect.setMatrices("mBones",i.skeleton.getTransformMatrices(i)),i._processRendering(e,n._effect,t.Material.TriangleFillMode,a,l,function(t,e){return n._effect.setMatrix("world",e)})}}}};this._depthMap.customRenderFunction=function(t,e,i,n){var s;if(n.length){for(r.setColorWrite(!1),s=0;s<n.length;s++)o(n.data[s]);r.setColorWrite(!0)}for(s=0;s<t.length;s++)o(t.data[s]);for(s=0;s<e.length;s++)o(e.data[s])}}return e.prototype.isReady=function(e,i){var n=e.getMaterial();if(n.disableDepthWrite)return!1;var r=[],o=[t.VertexBuffer.PositionKind],s=e.getMesh();n&&n.needAlphaTesting()&&(r.push("#define ALPHATEST"),s.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.push(t.VertexBuffer.UVKind),r.push("#define UV1")),s.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(o.push(t.VertexBuffer.UV2Kind),r.push("#define UV2"))),s.useBones&&s.computeBonesUsingShaders?(o.push(t.VertexBuffer.MatricesIndicesKind),o.push(t.VertexBuffer.MatricesWeightsKind),s.numBoneInfluencers>4&&(o.push(t.VertexBuffer.MatricesIndicesExtraKind),o.push(t.VertexBuffer.MatricesWeightsExtraKind)),r.push("#define NUM_BONE_INFLUENCERS "+s.numBoneInfluencers),r.push("#define BonesPerMesh "+(s.skeleton?s.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),i&&(r.push("#define INSTANCES"),o.push("world0"),o.push("world1"),o.push("world2"),o.push("world3"));var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this._scene.getEngine().createEffect("depth",o,["world","mBones","viewProjection","diffuseMatrix","depthValues"],["diffuseSampler"],a)),this._effect.isReady()},e.prototype.getDepthMap=function(){return this._depthMap},e.prototype.dispose=function(){this._depthMap.dispose()},e}();t.DepthRenderer=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,n.getEngine(),i)||this;s.SSAOOriginalSceneColorEffect="SSAOOriginalSceneColorEffect",s.SSAORenderEffect="SSAORenderEffect",s.SSAOBlurHRenderEffect="SSAOBlurHRenderEffect",s.SSAOBlurVRenderEffect="SSAOBlurVRenderEffect",s.SSAOCombineRenderEffect="SSAOCombineRenderEffect",s.totalStrength=1,s.radius=1e-4,s.area=.0075,s.fallOff=1e-6,s.base=.5,s._firstUpdate=!0,s._scene=n,s._createRandomTexture(),s._depthTexture=n.enableDepthRenderer().getDepthMap();var a=r.ssaoRatio||r,l=r.combineRatio||r;return s._originalColorPostProcess=new t.PassPostProcess("SSAOOriginalSceneColor",l,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1),s._createSSAOPostProcess(a),s._createBlurPostProcess(a),s._createSSAOCombinePostProcess(l),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOOriginalSceneColorEffect,function(){return s._originalColorPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAORenderEffect,function(){return s._ssaoPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOBlurHRenderEffect,function(){return s._blurHPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOBlurVRenderEffect,function(){return s._blurVPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOCombineRenderEffect,function(){return s._ssaoCombinePostProcess},!0)),n.postProcessRenderPipelineManager.addPipeline(s),o&&n.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(i,o),s}return o(i,e),i.prototype.dispose=function(t){void 0===t&&(t=!1);for(var i=0;i<this._scene.cameras.length;i++){var n=this._scene.cameras[i];this._originalColorPostProcess.dispose(n),this._ssaoPostProcess.dispose(n),this._blurHPostProcess.dispose(n),this._blurVPostProcess.dispose(n),this._ssaoCombinePostProcess.dispose(n)}this._randomTexture.dispose(),t&&this._scene.disableDepthRenderer(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),e.prototype.dispose.call(this)},i.prototype._createBlurPostProcess=function(e){var i=this;this._blurHPostProcess=new t.BlurPostProcess("BlurH",new t.Vector2(1,0),16,e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,t.Engine.TEXTURETYPE_UNSIGNED_INT),this._blurVPostProcess=new t.BlurPostProcess("BlurV",new t.Vector2(0,1),16,e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,t.Engine.TEXTURETYPE_UNSIGNED_INT),this._blurHPostProcess.onActivateObservable.add(function(){var t=i._blurHPostProcess.width/i._scene.getEngine().getRenderWidth();i._blurHPostProcess.kernel=16*t}),this._blurVPostProcess.onActivateObservable.add(function(){var t=i._blurVPostProcess.height/i._scene.getEngine().getRenderHeight();i._blurVPostProcess.kernel=16*t})},i.prototype._rebuild=function(){this._firstUpdate=!0,e.prototype._rebuild.call(this)},i.prototype._createSSAOPostProcess=function(e){var i=this,n=[.5381,.1856,-.4319,.1379,.2486,.443,.3371,.5679,-.0057,-.6999,-.0451,-.0019,.0689,-.1598,-.8547,.056,.0069,-.1843,-.0146,.1402,.0762,.01,-.1924,-.0344,-.3577,-.5301,-.4358,-.3169,.1063,.0158,.0103,-.5869,.0046,-.0897,-.494,.3287,.7119,-.0154,-.0918,-.0533,.0596,-.5411,.0352,-.0631,.546,-.4776,.2847,-.0271];this._ssaoPostProcess=new t.PostProcess("ssao","ssao",["sampleSphere","samplesFactor","randTextureTiles","totalStrength","radius","area","fallOff","base","range","viewport"],["randomSampler"],e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define SAMPLES 16\n#define SSAO"),this._ssaoPostProcess.onApply=function(t){i._firstUpdate&&(t.setArray3("sampleSphere",n),t.setFloat("samplesFactor",1/16),t.setFloat("randTextureTiles",4)),t.setFloat("totalStrength",i.totalStrength),t.setFloat("radius",i.radius),t.setFloat("area",i.area),t.setFloat("fallOff",i.fallOff),t.setFloat("base",i.base),t.setTexture("textureSampler",i._depthTexture),t.setTexture("randomSampler",i._randomTexture)}},i.prototype._createSSAOCombinePostProcess=function(e){var i=this;this._ssaoCombinePostProcess=new t.PostProcess("ssaoCombine","ssaoCombine",[],["originalColor"],e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._ssaoCombinePostProcess.onApply=function(t){t.setTextureFromPostProcess("originalColor",i._originalColorPostProcess)}},i.prototype._createRandomTexture=function(){this._randomTexture=new t.DynamicTexture("SSAORandomTexture",512,this._scene,!1,t.Texture.TRILINEAR_SAMPLINGMODE),this._randomTexture.wrapU=t.Texture.WRAP_ADDRESSMODE,this._randomTexture.wrapV=t.Texture.WRAP_ADDRESSMODE;for(var e=this._randomTexture.getContext(),i=function(t,e){return Math.random()*(e-t)+t},n=t.Vector3.Zero(),r=0;r<512;r++)for(var o=0;o<512;o++)n.x=Math.floor(255*i(-1,1)),n.y=Math.floor(255*i(-1,1)),n.z=Math.floor(255*i(-1,1)),e.fillStyle="rgb("+n.x+", "+n.y+", "+n.z+")",e.fillRect(r,o,1,1);this._randomTexture.update(!1)},r([t.serialize()],i.prototype,"totalStrength",void 0),r([t.serialize()],i.prototype,"radius",void 0),r([t.serialize()],i.prototype,"area",void 0),r([t.serialize()],i.prototype,"fallOff",void 0),r([t.serialize()],i.prototype,"base",void 0),i}(t.PostProcessRenderPipeline);t.SSAORenderingPipeline=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,n.getEngine(),i)||this;if(s.SSAOOriginalSceneColorEffect="SSAOOriginalSceneColorEffect",s.SSAORenderEffect="SSAORenderEffect",s.SSAOBlurHRenderEffect="SSAOBlurHRenderEffect",s.SSAOBlurVRenderEffect="SSAOBlurVRenderEffect",s.SSAOCombineRenderEffect="SSAOCombineRenderEffect",s.totalStrength=1,s.maxZ=100,s.minZAspect=.2,s._samples=8,s._expensiveBlur=!0,s.radius=2,s.base=.1,s._firstUpdate=!0,s._scene=n,!s.isSupported)return t.Tools.Error("SSAO 2 needs WebGL 2 support."),s;var a=r.ssaoRatio||r,l=r.blurRatio||r,c=n.enableGeometryBufferRenderer();return s._createRandomTexture(),s._depthTexture=c.getGBuffer().textures[0],s._normalTexture=c.getGBuffer().textures[1],s._originalColorPostProcess=new t.PassPostProcess("SSAOOriginalSceneColor",1,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1),s._createSSAOPostProcess(1),s._createBlurPostProcess(a,l),s._createSSAOCombinePostProcess(l),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOOriginalSceneColorEffect,function(){return s._originalColorPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAORenderEffect,function(){return s._ssaoPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOBlurHRenderEffect,function(){return s._blurHPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOBlurVRenderEffect,function(){return s._blurVPostProcess},!0)),s.addEffect(new t.PostProcessRenderEffect(n.getEngine(),s.SSAOCombineRenderEffect,function(){return s._ssaoCombinePostProcess},!0)),n.postProcessRenderPipelineManager.addPipeline(s),o&&n.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(i,o),s}return o(i,e),Object.defineProperty(i.prototype,"samples",{get:function(){return this._samples},set:function(t){this._ssaoPostProcess.updateEffect("#define SAMPLES "+t+"\n#define SSAO"),this._samples=t,this._sampleSphere=this._generateHemisphere(),this._firstUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expensiveBlur",{get:function(){return this._expensiveBlur},set:function(t){this._blurHPostProcess.updateEffect("#define BILATERAL_BLUR\n#define BILATERAL_BLUR_H\n#define SAMPLES 16\n#define EXPENSIVE "+(t?"1":"0")+"\n",null,["textureSampler","depthSampler"]),this._blurVPostProcess.updateEffect("#define BILATERAL_BLUR\n#define SAMPLES 16\n#define EXPENSIVE "+(t?"1":"0")+"\n",null,["textureSampler","depthSampler"]),this._expensiveBlur=t,this._firstUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i,"IsSupported",{get:function(){var e=t.Engine.LastCreatedEngine;return!!e&&e.getCaps().drawBuffersExtension},enumerable:!0,configurable:!0}),i.prototype.dispose=function(t){void 0===t&&(t=!1);for(var i=0;i<this._scene.cameras.length;i++){var n=this._scene.cameras[i];this._originalColorPostProcess.dispose(n),this._ssaoPostProcess.dispose(n),this._blurHPostProcess.dispose(n),this._blurVPostProcess.dispose(n),this._ssaoCombinePostProcess.dispose(n)}this._randomTexture.dispose(),t&&this._scene.disableGeometryBufferRenderer(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),e.prototype.dispose.call(this)},i.prototype._createBlurPostProcess=function(e,i){var n=this;this._samplerOffsets=[];for(var r=this.expensiveBlur,o=-8;o<8;o++)this._samplerOffsets.push(2*o+.5);this._blurHPostProcess=new t.PostProcess("BlurH","ssao2",["outSize","samplerOffsets","near","far","radius"],["depthSampler"],e,null,t.Texture.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define BILATERAL_BLUR\n#define BILATERAL_BLUR_H\n#define SAMPLES 16\n#define EXPENSIVE "+(r?"1":"0")+"\n"),this._blurHPostProcess.onApply=function(t){n._scene.activeCamera&&(t.setFloat("outSize",n._ssaoCombinePostProcess.width>0?n._ssaoCombinePostProcess.width:n._originalColorPostProcess.width),t.setFloat("near",n._scene.activeCamera.minZ),t.setFloat("far",n._scene.activeCamera.maxZ),t.setFloat("radius",n.radius),t.setTexture("depthSampler",n._depthTexture),n._firstUpdate&&t.setArray("samplerOffsets",n._samplerOffsets))},this._blurVPostProcess=new t.PostProcess("BlurV","ssao2",["outSize","samplerOffsets","near","far","radius"],["depthSampler"],i,null,t.Texture.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define BILATERAL_BLUR\n#define BILATERAL_BLUR_V\n#define SAMPLES 16\n#define EXPENSIVE "+(r?"1":"0")+"\n"),this._blurVPostProcess.onApply=function(t){n._scene.activeCamera&&(t.setFloat("outSize",n._ssaoCombinePostProcess.height>0?n._ssaoCombinePostProcess.height:n._originalColorPostProcess.height),t.setFloat("near",n._scene.activeCamera.minZ),t.setFloat("far",n._scene.activeCamera.maxZ),t.setFloat("radius",n.radius),t.setTexture("depthSampler",n._depthTexture),n._firstUpdate&&(t.setArray("samplerOffsets",n._samplerOffsets),n._firstUpdate=!1))}},i.prototype._rebuild=function(){this._firstUpdate=!0,e.prototype._rebuild.call(this)},i.prototype._generateHemisphere=function(){for(var e,i,n=this.samples,r=[],o=function(t,e){return Math.random()*(e-t)+t},s=0;s<n;)(e=new t.Vector3(o(-1,1),o(-1,1),o(.3,1))).normalize(),i=s/n,i=t.Scalar.Lerp(.1,1,i*i),e.scaleInPlace(i),r.push(e.x,e.y,e.z),s++;return r},i.prototype._createSSAOPostProcess=function(e){var i=this,n=this.samples;this._sampleSphere=this._generateHemisphere(),this._ssaoPostProcess=new t.PostProcess("ssao2","ssao2",["sampleSphere","samplesFactor","randTextureTiles","totalStrength","radius","base","range","projection","near","far","texelSize","xViewport","yViewport","maxZ","minZAspect"],["randomSampler","normalSampler"],e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define SAMPLES "+n+"\n#define SSAO"),this._ssaoPostProcess.onApply=function(t){i._firstUpdate&&(t.setArray3("sampleSphere",i._sampleSphere),t.setFloat("randTextureTiles",4)),i._scene.activeCamera&&(t.setFloat("samplesFactor",1/i.samples),t.setFloat("totalStrength",i.totalStrength),t.setFloat2("texelSize",1/i._ssaoPostProcess.width,1/i._ssaoPostProcess.height),t.setFloat("radius",i.radius),t.setFloat("maxZ",i.maxZ),t.setFloat("minZAspect",i.minZAspect),t.setFloat("base",i.base),t.setFloat("near",i._scene.activeCamera.minZ),t.setFloat("far",i._scene.activeCamera.maxZ),t.setFloat("xViewport",Math.tan(i._scene.activeCamera.fov/2)*i._scene.getEngine().getAspectRatio(i._scene.activeCamera,!0)),t.setFloat("yViewport",Math.tan(i._scene.activeCamera.fov/2)),t.setMatrix("projection",i._scene.getProjectionMatrix()),t.setTexture("textureSampler",i._depthTexture),t.setTexture("normalSampler",i._normalTexture),t.setTexture("randomSampler",i._randomTexture))}},i.prototype._createSSAOCombinePostProcess=function(e){var i=this;this._ssaoCombinePostProcess=new t.PostProcess("ssaoCombine","ssaoCombine",[],["originalColor"],e,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._ssaoCombinePostProcess.onApply=function(t){t.setTextureFromPostProcess("originalColor",i._originalColorPostProcess)}},i.prototype._createRandomTexture=function(){this._randomTexture=new t.DynamicTexture("SSAORandomTexture",512,this._scene,!1,t.Texture.TRILINEAR_SAMPLINGMODE),this._randomTexture.wrapU=t.Texture.WRAP_ADDRESSMODE,this._randomTexture.wrapV=t.Texture.WRAP_ADDRESSMODE;for(var e=this._randomTexture.getContext(),i=function(t,e){return Math.random()*(e-t)+t},n=t.Vector3.Zero(),r=0;r<512;r++)for(var o=0;o<512;o++)n.x=i(0,1),n.y=i(0,1),n.z=0,n.normalize(),n.scaleInPlace(255),n.x=Math.floor(n.x),n.y=Math.floor(n.y),e.fillStyle="rgb("+n.x+", "+n.y+", "+n.z+")",e.fillRect(r,o,1,1);this._randomTexture.update(!1)},r([t.serialize()],i.prototype,"totalStrength",void 0),r([t.serialize()],i.prototype,"maxZ",void 0),r([t.serialize()],i.prototype,"minZAspect",void 0),r([t.serialize("samples")],i.prototype,"_samples",void 0),r([t.serialize("expensiveBlur")],i.prototype,"_expensiveBlur",void 0),r([t.serialize()],i.prototype,"radius",void 0),r([t.serialize()],i.prototype,"base",void 0),i}(t.PostProcessRenderPipeline);t.SSAO2RenderingPipeline=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s){void 0===o&&(o=1);var a=e.call(this,r.getEngine(),i)||this;return a.LensChromaticAberrationEffect="LensChromaticAberrationEffect",a.HighlightsEnhancingEffect="HighlightsEnhancingEffect",a.LensDepthOfFieldEffect="LensDepthOfFieldEffect",a._scene=r,a._depthTexture=r.enableDepthRenderer().getDepthMap(),n.grain_texture?a._grainTexture=n.grain_texture:a._createGrainTexture(),a._edgeBlur=n.edge_blur?n.edge_blur:0,a._grainAmount=n.grain_amount?n.grain_amount:0,a._chromaticAberration=n.chromatic_aberration?n.chromatic_aberration:0,a._distortion=n.distortion?n.distortion:0,a._highlightsGain=void 0!==n.dof_gain?n.dof_gain:-1,a._highlightsThreshold=n.dof_threshold?n.dof_threshold:1,a._dofDistance=void 0!==n.dof_focus_distance?n.dof_focus_distance:-1,a._dofAperture=n.dof_aperture?n.dof_aperture:1,a._dofDarken=n.dof_darken?n.dof_darken:0,a._dofPentagon=void 0===n.dof_pentagon||n.dof_pentagon,a._blurNoise=void 0===n.blur_noise||n.blur_noise,a._createChromaticAberrationPostProcess(o),a._createHighlightsPostProcess(o),a._createDepthOfFieldPostProcess(o/4),a.addEffect(new t.PostProcessRenderEffect(r.getEngine(),a.LensChromaticAberrationEffect,function(){return a._chromaticAberrationPostProcess},!0)),a.addEffect(new t.PostProcessRenderEffect(r.getEngine(),a.HighlightsEnhancingEffect,function(){return a._highlightsPostProcess},!0)),a.addEffect(new t.PostProcessRenderEffect(r.getEngine(),a.LensDepthOfFieldEffect,function(){return a._depthOfFieldPostProcess},!0)),-1===a._highlightsGain&&a._disableEffect(a.HighlightsEnhancingEffect,null),r.postProcessRenderPipelineManager.addPipeline(a),s&&r.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(i,s),a}return o(i,e),i.prototype.setEdgeBlur=function(t){this._edgeBlur=t},i.prototype.disableEdgeBlur=function(){this._edgeBlur=0},i.prototype.setGrainAmount=function(t){this._grainAmount=t},i.prototype.disableGrain=function(){this._grainAmount=0},i.prototype.setChromaticAberration=function(t){this._chromaticAberration=t},i.prototype.disableChromaticAberration=function(){this._chromaticAberration=0},i.prototype.setEdgeDistortion=function(t){this._distortion=t},i.prototype.disableEdgeDistortion=function(){this._distortion=0},i.prototype.setFocusDistance=function(t){this._dofDistance=t},i.prototype.disableDepthOfField=function(){this._dofDistance=-1},i.prototype.setAperture=function(t){this._dofAperture=t},i.prototype.setDarkenOutOfFocus=function(t){this._dofDarken=t},i.prototype.enablePentagonBokeh=function(){this._highlightsPostProcess.updateEffect("#define PENTAGON\n")},i.prototype.disablePentagonBokeh=function(){this._highlightsPostProcess.updateEffect()},i.prototype.enableNoiseBlur=function(){this._blurNoise=!0},i.prototype.disableNoiseBlur=function(){this._blurNoise=!1},i.prototype.setHighlightsGain=function(t){this._highlightsGain=t},i.prototype.setHighlightsThreshold=function(t){-1===this._highlightsGain&&(this._highlightsGain=1),this._highlightsThreshold=t},i.prototype.disableHighlights=function(){this._highlightsGain=-1},i.prototype.dispose=function(t){void 0===t&&(t=!1),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),this._chromaticAberrationPostProcess=null,this._highlightsPostProcess=null,this._depthOfFieldPostProcess=null,this._grainTexture.dispose(),t&&this._scene.disableDepthRenderer()},i.prototype._createChromaticAberrationPostProcess=function(e){var i=this;this._chromaticAberrationPostProcess=new t.PostProcess("LensChromaticAberration","chromaticAberration",["chromatic_aberration","screen_width","screen_height"],[],e,null,t.Texture.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._chromaticAberrationPostProcess.onApply=function(t){t.setFloat("chromatic_aberration",i._chromaticAberration),t.setFloat("screen_width",i._scene.getEngine().getRenderWidth()),t.setFloat("screen_height",i._scene.getEngine().getRenderHeight())}},i.prototype._createHighlightsPostProcess=function(e){var i=this;this._highlightsPostProcess=new t.PostProcess("LensHighlights","lensHighlights",["gain","threshold","screen_width","screen_height"],[],e,null,t.Texture.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,this._dofPentagon?"#define PENTAGON\n":""),this._highlightsPostProcess.onApply=function(t){t.setFloat("gain",i._highlightsGain),t.setFloat("threshold",i._highlightsThreshold),t.setTextureFromPostProcess("textureSampler",i._chromaticAberrationPostProcess),t.setFloat("screen_width",i._scene.getEngine().getRenderWidth()),t.setFloat("screen_height",i._scene.getEngine().getRenderHeight())}},i.prototype._createDepthOfFieldPostProcess=function(e){var i=this;this._depthOfFieldPostProcess=new t.PostProcess("LensDepthOfField","depthOfField",["grain_amount","blur_noise","screen_width","screen_height","distortion","dof_enabled","screen_distance","aperture","darken","edge_blur","highlights","near","far"],["depthSampler","grainSampler","highlightsSampler"],e,null,t.Texture.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._depthOfFieldPostProcess.onApply=function(t){t.setTexture("depthSampler",i._depthTexture),t.setTexture("grainSampler",i._grainTexture),t.setTextureFromPostProcess("textureSampler",i._highlightsPostProcess),t.setTextureFromPostProcess("highlightsSampler",i._depthOfFieldPostProcess),t.setFloat("grain_amount",i._grainAmount),t.setBool("blur_noise",i._blurNoise),t.setFloat("screen_width",i._scene.getEngine().getRenderWidth()),t.setFloat("screen_height",i._scene.getEngine().getRenderHeight()),t.setFloat("distortion",i._distortion),t.setBool("dof_enabled",-1!==i._dofDistance),t.setFloat("screen_distance",1/(.1-1/i._dofDistance)),t.setFloat("aperture",i._dofAperture),t.setFloat("darken",i._dofDarken),t.setFloat("edge_blur",i._edgeBlur),t.setBool("highlights",-1!==i._highlightsGain),i._scene.activeCamera&&(t.setFloat("near",i._scene.activeCamera.minZ),t.setFloat("far",i._scene.activeCamera.maxZ))}},i.prototype._createGrainTexture=function(){this._grainTexture=new t.DynamicTexture("LensNoiseTexture",512,this._scene,!1,t.Texture.BILINEAR_SAMPLINGMODE),this._grainTexture.wrapU=t.Texture.WRAP_ADDRESSMODE,this._grainTexture.wrapV=t.Texture.WRAP_ADDRESSMODE;for(var e,i=this._grainTexture.getContext(),n=0;n<512;n++)for(var r=0;r<512;r++)e=Math.floor(255*(Math.random()*(.58-.42)+.42)),i.fillStyle="rgb("+e+", "+e+", "+e+")",i.fillRect(n,r,1,1);this._grainTexture.update(!1)},i}(t.PostProcessRenderPipeline);t.LensRenderingPipeline=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s){void 0===o&&(o=null);var a=e.call(this,n.getEngine(),i)||this;return a.downSampleX4PostProcess=null,a.brightPassPostProcess=null,a.blurHPostProcesses=[],a.blurVPostProcesses=[],a.textureAdderPostProcess=null,a.volumetricLightPostProcess=null,a.volumetricLightSmoothXPostProcess=null,a.volumetricLightSmoothYPostProcess=null,a.volumetricLightMergePostProces=null,a.volumetricLightFinalPostProcess=null,a.luminancePostProcess=null,a.luminanceDownSamplePostProcesses=[],a.hdrPostProcess=null,a.textureAdderFinalPostProcess=null,a.lensFlareFinalPostProcess=null,a.hdrFinalPostProcess=null,a.lensFlarePostProcess=null,a.lensFlareComposePostProcess=null,a.motionBlurPostProcess=null,a.depthOfFieldPostProcess=null,a.brightThreshold=1,a.blurWidth=512,a.horizontalBlur=!1,a.exposure=1,a.lensTexture=null,a.volumetricLightCoefficient=.2,a.volumetricLightPower=4,a.volumetricLightBlurScale=64,a.sourceLight=null,a.hdrMinimumLuminance=1,a.hdrDecreaseRate=.5,a.hdrIncreaseRate=.5,a.lensColorTexture=null,a.lensFlareStrength=20,a.lensFlareGhostDispersal=1.4,a.lensFlareHaloWidth=.7,a.lensFlareDistortionStrength=16,a.lensStarTexture=null,a.lensFlareDirtTexture=null,a.depthOfFieldDistance=10,a.depthOfFieldBlurWidth=64,a.motionStrength=1,a.animations=[],a._currentDepthOfFieldSource=null,a._hdrCurrentLuminance=1,a._bloomEnabled=!0,a._depthOfFieldEnabled=!1,a._vlsEnabled=!1,a._lensFlareEnabled=!1,a._hdrEnabled=!1,a._motionBlurEnabled=!1,a._motionBlurSamples=64,a._volumetricLightStepsCount=50,a._cameras=s||[],a._scene=n,a._basePostProcess=o,a._ratio=r,a._floatTextureType=n.getEngine().getCaps().textureFloatRender?t.Engine.TEXTURETYPE_FLOAT:t.Engine.TEXTURETYPE_HALF_FLOAT,n.postProcessRenderPipelineManager.addPipeline(a),a._buildPipeline(),a}return o(i,e),Object.defineProperty(i.prototype,"BloomEnabled",{get:function(){return this._bloomEnabled},set:function(t){this._bloomEnabled!==t&&(this._bloomEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"DepthOfFieldEnabled",{get:function(){return this._depthOfFieldEnabled},set:function(t){this._depthOfFieldEnabled!==t&&(this._depthOfFieldEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"LensFlareEnabled",{get:function(){return this._lensFlareEnabled},set:function(t){this._lensFlareEnabled!==t&&(this._lensFlareEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"HDREnabled",{get:function(){return this._hdrEnabled},set:function(t){this._hdrEnabled!==t&&(this._hdrEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"VLSEnabled",{get:function(){return this._vlsEnabled},set:function(e){if(this._vlsEnabled!==e){if(e&&!this._scene.enableGeometryBufferRenderer())return void t.Tools.Warn("Geometry renderer is not supported, cannot create volumetric lights in Standard Rendering Pipeline");this._vlsEnabled=e,this._buildPipeline()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MotionBlurEnabled",{get:function(){return this._motionBlurEnabled},set:function(t){this._motionBlurEnabled!==t&&(this._motionBlurEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volumetricLightStepsCount",{get:function(){return this._volumetricLightStepsCount},set:function(t){this.volumetricLightPostProcess&&this.volumetricLightPostProcess.updateEffect("#define VLS\n#define NB_STEPS "+t.toFixed(1)),this._volumetricLightStepsCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"motionBlurSamples",{get:function(){return this._motionBlurSamples},set:function(t){this.motionBlurPostProcess&&this.motionBlurPostProcess.updateEffect("#define MOTION_BLUR\n#define MAX_MOTION_SAMPLES "+t.toFixed(1)),this._motionBlurSamples=t},enumerable:!0,configurable:!0}),i.prototype._buildPipeline=function(){var e=this,i=this._ratio,n=this._scene;this._disposePostProcesses(),this._reset(),this._basePostProcess?this.originalPostProcess=this._basePostProcess:(this.originalPostProcess=new t.PostProcess("HDRPass","standard",[],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",this._floatTextureType),this.originalPostProcess.onApply=function(t){e._currentDepthOfFieldSource=e.originalPostProcess}),this.addEffect(new t.PostProcessRenderEffect(n.getEngine(),"HDRPassPostProcess",function(){return e.originalPostProcess},!0)),this._currentDepthOfFieldSource=this.originalPostProcess,this._vlsEnabled&&(this._createVolumetricLightPostProcess(n,i),this.volumetricLightFinalPostProcess=new t.PostProcess("HDRVLSFinal","standard",[],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(n.getEngine(),"HDRVLSFinal",function(){return e.volumetricLightFinalPostProcess},!0))),this._bloomEnabled&&(this._createDownSampleX4PostProcess(n,i/2),this._createBrightPassPostProcess(n,i/2),this._createBlurPostProcesses(n,i/4,1),this._createTextureAdderPostProcess(n,i),this.textureAdderFinalPostProcess=new t.PostProcess("HDRDepthOfFieldSource","standard",[],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(n.getEngine(),"HDRBaseDepthOfFieldSource",function(){return e.textureAdderFinalPostProcess},!0))),this._lensFlareEnabled&&(this._createLensFlarePostProcess(n,i),this.lensFlareFinalPostProcess=new t.PostProcess("HDRPostLensFlareDepthOfFieldSource","standard",[],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(n.getEngine(),"HDRPostLensFlareDepthOfFieldSource",function(){return e.lensFlareFinalPostProcess},!0))),this._hdrEnabled&&(this._createLuminancePostProcesses(n,this._floatTextureType),this._createHdrPostProcess(n,i),this.hdrFinalPostProcess=new t.PostProcess("HDRPostHDReDepthOfFieldSource","standard",[],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(n.getEngine(),"HDRPostHDReDepthOfFieldSource",function(){return e.hdrFinalPostProcess},!0))),this._depthOfFieldEnabled&&(this._createBlurPostProcesses(n,i/2,3,"depthOfFieldBlurWidth"),this._createDepthOfFieldPostProcess(n,i)),this._motionBlurEnabled&&this._createMotionBlurPostProcess(n,i),null!==this._cameras&&this._scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(this._name,this._cameras)},i.prototype._createDownSampleX4PostProcess=function(e,i){var n=this,r=new Array(32);this.downSampleX4PostProcess=new t.PostProcess("HDRDownSampleX4","standard",["dsOffsets"],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define DOWN_SAMPLE_X4",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.downSampleX4PostProcess.onApply=function(t){for(var e=0,i=n.downSampleX4PostProcess.width,o=n.downSampleX4PostProcess.height,s=-2;s<2;s++)for(var a=-2;a<2;a++)r[e]=(s+.5)*(1/i),r[e+1]=(a+.5)*(1/o),e+=2;t.setArray2("dsOffsets",r)},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRDownSampleX4",function(){return n.downSampleX4PostProcess},!0))},i.prototype._createBrightPassPostProcess=function(e,i){var n=this,r=new Array(8);this.brightPassPostProcess=new t.PostProcess("HDRBrightPass","standard",["dsOffsets","brightThreshold"],[],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define BRIGHT_PASS",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.brightPassPostProcess.onApply=function(t){var e=1/n.brightPassPostProcess.width,i=1/n.brightPassPostProcess.height;r[0]=-.5*e,r[1]=.5*i,r[2]=.5*e,r[3]=.5*i,r[4]=-.5*e,r[5]=-.5*i,r[6]=.5*e,r[7]=-.5*i,t.setArray2("dsOffsets",r),t.setFloat("brightThreshold",n.brightThreshold)},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRBrightPass",function(){return n.brightPassPostProcess},!0))},i.prototype._createBlurPostProcesses=function(e,i,n,r){var o=this;void 0===r&&(r="blurWidth");var s=e.getEngine(),a=new t.BlurPostProcess("HDRBlurH_"+n,new t.Vector2(1,0),this[r],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,t.Engine.TEXTURETYPE_UNSIGNED_INT),l=new t.BlurPostProcess("HDRBlurV_"+n,new t.Vector2(0,1),this[r],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,t.Engine.TEXTURETYPE_UNSIGNED_INT);a.onActivateObservable.add(function(){var t=a.width/s.getRenderWidth();a.kernel=o[r]*t}),l.onActivateObservable.add(function(){var t=l.height/s.getRenderHeight();l.kernel=o.horizontalBlur?64*t:o[r]*t}),this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRBlurH"+n,function(){return a},!0)),this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRBlurV"+n,function(){return l},!0)),this.blurHPostProcesses.push(a),this.blurVPostProcesses.push(l)},i.prototype._createTextureAdderPostProcess=function(e,i){var n=this;this.textureAdderPostProcess=new t.PostProcess("HDRTextureAdder","standard",["exposure"],["otherSampler","lensSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define TEXTURE_ADDER",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.textureAdderPostProcess.onApply=function(t){t.setTextureFromPostProcess("otherSampler",n._vlsEnabled?n._currentDepthOfFieldSource:n.originalPostProcess),t.setTexture("lensSampler",n.lensTexture),t.setFloat("exposure",n.exposure),n._currentDepthOfFieldSource=n.textureAdderFinalPostProcess},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRTextureAdder",function(){return n.textureAdderPostProcess},!0))},i.prototype._createVolumetricLightPostProcess=function(e,i){var n=this,r=e.enableGeometryBufferRenderer();r.enablePosition=!0;var o=r.getGBuffer();this.volumetricLightPostProcess=new t.PostProcess("HDRVLS","standard",["shadowViewProjection","cameraPosition","sunDirection","sunColor","scatteringCoefficient","scatteringPower","depthValues"],["shadowMapSampler","positionSampler"],i/8,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define VLS\n#define NB_STEPS "+this._volumetricLightStepsCount.toFixed(1));var s=t.Vector2.Zero();this.volumetricLightPostProcess.onApply=function(t){if(n.sourceLight&&n.sourceLight.getShadowGenerator()&&n._scene.activeCamera){var e=n.sourceLight.getShadowGenerator();t.setTexture("shadowMapSampler",e.getShadowMap()),t.setTexture("positionSampler",o.textures[2]),t.setColor3("sunColor",n.sourceLight.diffuse),t.setVector3("sunDirection",n.sourceLight.getShadowDirection()),t.setVector3("cameraPosition",n._scene.activeCamera.globalPosition),t.setMatrix("shadowViewProjection",e.getTransformMatrix()),t.setFloat("scatteringCoefficient",n.volumetricLightCoefficient),t.setFloat("scatteringPower",n.volumetricLightPower),s.x=e.getLight().getDepthMinZ(n._scene.activeCamera),s.y=e.getLight().getDepthMaxZ(n._scene.activeCamera),t.setVector2("depthValues",s)}},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRVLS",function(){return n.volumetricLightPostProcess},!0)),this._createBlurPostProcesses(e,i/4,0,"volumetricLightBlurScale"),this.volumetricLightMergePostProces=new t.PostProcess("HDRVLSMerge","standard",[],["originalSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define VLSMERGE"),this.volumetricLightMergePostProces.onApply=function(t){t.setTextureFromPostProcess("originalSampler",n.originalPostProcess),n._currentDepthOfFieldSource=n.volumetricLightFinalPostProcess},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRVLSMerge",function(){return n.volumetricLightMergePostProces},!0))},i.prototype._createLuminancePostProcesses=function(e,n){var r=this,o=Math.pow(3,i.LuminanceSteps);this.luminancePostProcess=new t.PostProcess("HDRLuminance","standard",["lumOffsets"],[],{width:o,height:o},null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LUMINANCE",n);var s=[];this.luminancePostProcess.onApply=function(t){var e=1/r.luminancePostProcess.width,i=1/r.luminancePostProcess.height;s[0]=-.5*e,s[1]=.5*i,s[2]=.5*e,s[3]=.5*i,s[4]=-.5*e,s[5]=-.5*i,s[6]=.5*e,s[7]=-.5*i,t.setArray2("lumOffsets",s)},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRLuminance",function(){return r.luminancePostProcess},!0));for(var a=i.LuminanceSteps-1;a>=0;a--){o=Math.pow(3,a);var l="#define LUMINANCE_DOWN_SAMPLE\n";0===a&&(l+="#define FINAL_DOWN_SAMPLER");var c=new t.PostProcess("HDRLuminanceDownSample"+a,"standard",["dsOffsets","halfDestPixelSize"],[],{width:o,height:o},null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,l,n);this.luminanceDownSamplePostProcesses.push(c)}var u=this.luminancePostProcess;this.luminanceDownSamplePostProcesses.forEach(function(i,n){var o=new Array(18);i.onApply=function(t){if(u){for(var e=0,s=-1;s<2;s++)for(var a=-1;a<2;a++)o[e]=s/u.width,o[e+1]=a/u.height,e+=2;t.setArray2("dsOffsets",o),t.setFloat("halfDestPixelSize",.5/u.width),u=n===r.luminanceDownSamplePostProcesses.length-1?r.luminancePostProcess:i}},n===r.luminanceDownSamplePostProcesses.length-1&&(i.onAfterRender=function(i){var n=e.getEngine().readPixels(0,0,1,1),o=new t.Vector4(1/16581375,1/65025,1/255,1);r._hdrCurrentLuminance=(n[0]*o.x+n[1]*o.y+n[2]*o.z+n[3]*o.w)/100}),r.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRLuminanceDownSample"+n,function(){return i},!0))})},i.prototype._createHdrPostProcess=function(e,i){var n=this;this.hdrPostProcess=new t.PostProcess("HDR","standard",["averageLuminance"],["textureAdderSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define HDR",t.Engine.TEXTURETYPE_UNSIGNED_INT);var r=1,o=0,s=0;this.hdrPostProcess.onApply=function(i){if(i.setTextureFromPostProcess("textureAdderSampler",n._currentDepthOfFieldSource),o+=e.getEngine().getDeltaTime(),r<0)r=n._hdrCurrentLuminance;else{var a=(s-o)/1e3;n._hdrCurrentLuminance<r+n.hdrDecreaseRate*a?r+=n.hdrDecreaseRate*a:n._hdrCurrentLuminance>r-n.hdrIncreaseRate*a?r-=n.hdrIncreaseRate*a:r=n._hdrCurrentLuminance}r=t.Scalar.Clamp(r,n.hdrMinimumLuminance,1e20),i.setFloat("averageLuminance",r),s=o,n._currentDepthOfFieldSource=n.hdrFinalPostProcess},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDR",function(){return n.hdrPostProcess},!0))},i.prototype._createLensFlarePostProcess=function(e,i){var n=this;this.lensFlarePostProcess=new t.PostProcess("HDRLensFlare","standard",["strength","ghostDispersal","haloWidth","resolution","distortionStrength"],["lensColorSampler"],i/2,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LENS_FLARE",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRLensFlare",function(){return n.lensFlarePostProcess},!0)),this._createBlurPostProcesses(e,i/4,2),this.lensFlareComposePostProcess=new t.PostProcess("HDRLensFlareCompose","standard",["lensStarMatrix"],["otherSampler","lensDirtSampler","lensStarSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LENS_FLARE_COMPOSE",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRLensFlareCompose",function(){return n.lensFlareComposePostProcess},!0));var r=new t.Vector2(0,0);this.lensFlarePostProcess.onApply=function(t){t.setTextureFromPostProcess("textureSampler",n._bloomEnabled?n.blurHPostProcesses[0]:n.originalPostProcess),t.setTexture("lensColorSampler",n.lensColorTexture),t.setFloat("strength",n.lensFlareStrength),t.setFloat("ghostDispersal",n.lensFlareGhostDispersal),t.setFloat("haloWidth",n.lensFlareHaloWidth),r.x=n.lensFlarePostProcess.width,r.y=n.lensFlarePostProcess.height,t.setVector2("resolution",r),t.setFloat("distortionStrength",n.lensFlareDistortionStrength)};var o=t.Matrix.FromValues(2,0,-1,0,0,2,-1,0,0,0,1,0,0,0,0,1),s=t.Matrix.FromValues(.5,0,.5,0,0,.5,.5,0,0,0,1,0,0,0,0,1);this.lensFlareComposePostProcess.onApply=function(e){if(n._scene.activeCamera){e.setTextureFromPostProcess("otherSampler",n._currentDepthOfFieldSource),e.setTexture("lensDirtSampler",n.lensFlareDirtTexture),e.setTexture("lensStarSampler",n.lensStarTexture);var i=n._scene.activeCamera.getViewMatrix().getRow(0),r=n._scene.activeCamera.getViewMatrix().getRow(2),a=t.Vector3.Dot(i.toVector3(),new t.Vector3(1,0,0))+t.Vector3.Dot(r.toVector3(),new t.Vector3(0,0,1));a*=4;var l=t.Matrix.FromValues(.5*Math.cos(a),-Math.sin(a),0,0,Math.sin(a),.5*Math.cos(a),0,0,0,0,1,0,0,0,0,1),c=s.multiply(l).multiply(o);e.setMatrix("lensStarMatrix",c),n._currentDepthOfFieldSource=n.lensFlareFinalPostProcess}}},i.prototype._createDepthOfFieldPostProcess=function(e,i){var n=this;this.depthOfFieldPostProcess=new t.PostProcess("HDRDepthOfField","standard",["distance"],["otherSampler","depthSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define DEPTH_OF_FIELD",t.Engine.TEXTURETYPE_UNSIGNED_INT),this.depthOfFieldPostProcess.onApply=function(t){t.setTextureFromPostProcess("otherSampler",n._currentDepthOfFieldSource),t.setTexture("depthSampler",n._getDepthTexture()),t.setFloat("distance",n.depthOfFieldDistance)},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRDepthOfField",function(){return n.depthOfFieldPostProcess},!0))},i.prototype._createMotionBlurPostProcess=function(e,i){var n=this;this.motionBlurPostProcess=new t.PostProcess("HDRMotionBlur","standard",["inverseViewProjection","prevViewProjection","screenSize","motionScale","motionStrength"],["depthSampler"],i,null,t.Texture.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define MOTION_BLUR\n#define MAX_MOTION_SAMPLES "+this.motionBlurSamples.toFixed(1),t.Engine.TEXTURETYPE_UNSIGNED_INT);var r=0,o=t.Matrix.Identity(),s=t.Matrix.Identity(),a=t.Matrix.Identity(),l=t.Vector2.Zero();this.motionBlurPostProcess.onApply=function(t){(a=e.getProjectionMatrix().multiply(e.getViewMatrix())).invertToRef(s),t.setMatrix("inverseViewProjection",s),t.setMatrix("prevViewProjection",o),o=a,l.x=n.motionBlurPostProcess.width,l.y=n.motionBlurPostProcess.height,t.setVector2("screenSize",l),r=e.getEngine().getFps()/60,t.setFloat("motionScale",r),t.setFloat("motionStrength",n.motionStrength),t.setTexture("depthSampler",n._getDepthTexture())},this.addEffect(new t.PostProcessRenderEffect(e.getEngine(),"HDRMotionBlur",function(){return n.motionBlurPostProcess},!0))},i.prototype._getDepthTexture=function(){return this._scene.getEngine().getCaps().drawBuffersExtension?this._scene.enableGeometryBufferRenderer().getGBuffer().textures[0]:this._scene.enableDepthRenderer().getDepthMap()},i.prototype._disposePostProcesses=function(){for(var t=0;t<this._cameras.length;t++){var e=this._cameras[t];this.originalPostProcess&&this.originalPostProcess.dispose(e),this.downSampleX4PostProcess&&this.downSampleX4PostProcess.dispose(e),this.brightPassPostProcess&&this.brightPassPostProcess.dispose(e),this.textureAdderPostProcess&&this.textureAdderPostProcess.dispose(e),this.textureAdderFinalPostProcess&&this.textureAdderFinalPostProcess.dispose(e),this.volumetricLightPostProcess&&this.volumetricLightPostProcess.dispose(e),this.volumetricLightSmoothXPostProcess&&this.volumetricLightSmoothXPostProcess.dispose(e),this.volumetricLightSmoothYPostProcess&&this.volumetricLightSmoothYPostProcess.dispose(e),this.volumetricLightMergePostProces&&this.volumetricLightMergePostProces.dispose(e),this.volumetricLightFinalPostProcess&&this.volumetricLightFinalPostProcess.dispose(e),this.lensFlarePostProcess&&this.lensFlarePostProcess.dispose(e),this.lensFlareComposePostProcess&&this.lensFlareComposePostProcess.dispose(e);for(var i=0;i<this.luminanceDownSamplePostProcesses.length;i++)this.luminanceDownSamplePostProcesses[i].dispose(e);this.luminancePostProcess&&this.luminancePostProcess.dispose(e),this.hdrPostProcess&&this.hdrPostProcess.dispose(e),this.hdrFinalPostProcess&&this.hdrFinalPostProcess.dispose(e),this.depthOfFieldPostProcess&&this.depthOfFieldPostProcess.dispose(e),this.motionBlurPostProcess&&this.motionBlurPostProcess.dispose(e);for(i=0;i<this.blurHPostProcesses.length;i++)this.blurHPostProcesses[i].dispose(e);for(i=0;i<this.blurVPostProcesses.length;i++)this.blurVPostProcesses[i].dispose(e)}this.originalPostProcess=null,this.downSampleX4PostProcess=null,this.brightPassPostProcess=null,this.textureAdderPostProcess=null,this.textureAdderFinalPostProcess=null,this.volumetricLightPostProcess=null,this.volumetricLightSmoothXPostProcess=null,this.volumetricLightSmoothYPostProcess=null,this.volumetricLightMergePostProces=null,this.volumetricLightFinalPostProcess=null,this.lensFlarePostProcess=null,this.lensFlareComposePostProcess=null,this.luminancePostProcess=null,this.hdrPostProcess=null,this.hdrFinalPostProcess=null,this.depthOfFieldPostProcess=null,this.motionBlurPostProcess=null,this.luminanceDownSamplePostProcesses=[],this.blurHPostProcesses=[],this.blurVPostProcesses=[]},i.prototype.dispose=function(){this._disposePostProcesses(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._cameras),e.prototype.dispose.call(this)},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="StandardRenderingPipeline",e},i.Parse=function(e,n,r){return t.SerializationHelper.Parse(function(){return new i(e._name,n,e._ratio)},e,n,r)},i.LuminanceSteps=6,r([t.serialize()],i.prototype,"brightThreshold",void 0),r([t.serialize()],i.prototype,"blurWidth",void 0),r([t.serialize()],i.prototype,"horizontalBlur",void 0),r([t.serialize()],i.prototype,"exposure",void 0),r([t.serializeAsTexture("lensTexture")],i.prototype,"lensTexture",void 0),r([t.serialize()],i.prototype,"volumetricLightCoefficient",void 0),r([t.serialize()],i.prototype,"volumetricLightPower",void 0),r([t.serialize()],i.prototype,"volumetricLightBlurScale",void 0),r([t.serialize()],i.prototype,"hdrMinimumLuminance",void 0),r([t.serialize()],i.prototype,"hdrDecreaseRate",void 0),r([t.serialize()],i.prototype,"hdrIncreaseRate",void 0),r([t.serializeAsTexture("lensColorTexture")],i.prototype,"lensColorTexture",void 0),r([t.serialize()],i.prototype,"lensFlareStrength",void 0),r([t.serialize()],i.prototype,"lensFlareGhostDispersal",void 0),r([t.serialize()],i.prototype,"lensFlareHaloWidth",void 0),r([t.serialize()],i.prototype,"lensFlareDistortionStrength",void 0),r([t.serializeAsTexture("lensStarTexture")],i.prototype,"lensStarTexture",void 0),r([t.serializeAsTexture("lensFlareDirtTexture")],i.prototype,"lensFlareDirtTexture",void 0),r([t.serialize()],i.prototype,"depthOfFieldDistance",void 0),r([t.serialize()],i.prototype,"depthOfFieldBlurWidth",void 0),r([t.serialize()],i.prototype,"motionStrength",void 0),r([t.serialize()],i.prototype,"_ratio",void 0),r([t.serialize()],i.prototype,"BloomEnabled",null),r([t.serialize()],i.prototype,"DepthOfFieldEnabled",null),r([t.serialize()],i.prototype,"LensFlareEnabled",null),r([t.serialize()],i.prototype,"HDREnabled",null),r([t.serialize()],i.prototype,"VLSEnabled",null),r([t.serialize()],i.prototype,"MotionBlurEnabled",null),r([t.serialize()],i.prototype,"volumetricLightStepsCount",null),r([t.serialize()],i.prototype,"motionBlurSamples",null),i}(t.PostProcessRenderPipeline);t.StandardRenderingPipeline=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===r&&(r=null),void 0===l&&(l=t.Engine.TEXTURETYPE_UNSIGNED_INT);var c=e.call(this,i,"fxaa",["texelSize"],null,n,r,o||t.Texture.BILINEAR_SAMPLINGMODE,s,a,null,l,"fxaa")||this;return c.onApplyObservable.add(function(t){var e=c.texelSize;t.setFloat2("texelSize",e.x,e.y)}),c}return o(i,e),i}(t.PostProcess);t.FxaaPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===u&&(u=t.Engine.TEXTURETYPE_UNSIGNED_INT);var h=e.call(this,i,"circleOfConfusion",["cameraMinMaxZ","focusDistance","cocPrecalculation"],["depthSampler"],o,s,a,l,c,null,u)||this;return h.lensSize=50,h.fStop=1.4,h.focusDistance=2e3,h.focalLength=50,h.onApplyObservable.add(function(t){t.setTexture("depthSampler",r);var e=h.lensSize/h.fStop*h.focalLength/(h.focusDistance-h.focalLength);t.setFloat("focusDistance",h.focusDistance),t.setFloat("cocPrecalculation",e),n.activeCamera&&t.setFloat2("cameraMinMaxZ",n.activeCamera.minZ,n.activeCamera.maxZ)}),h}return o(i,e),i}(t.PostProcess);t.CircleOfConfusionPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===u&&(u=t.Engine.TEXTURETYPE_UNSIGNED_INT);var h=e.call(this,i,"depthOfFieldMerge",[],["circleOfConfusionSampler","originalSampler"],o,s,a,l,c,null,u)||this;return h.onApplyObservable.add(function(t){t.setTextureFromPostProcess("circleOfConfusionSampler",r),t.setTextureFromPostProcess("originalSampler",n)}),h}return o(i,e),i}(t.PostProcess);t.DepthOfFieldMergePostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n){void 0===n&&(n=0);var r=e.call(this,i.getEngine(),"depth of field",function(){return[r._circleOfConfusion,r._depthOfFieldPass,r._depthOfFieldBlurY,r._depthOfFieldBlurX,r._depthOfFieldMerge]},!0)||this,o=i.enableDepthRenderer().getDepthMap();return r._circleOfConfusion=new t.CircleOfConfusionPostProcess("circleOfConfusion",i,o,1,null,t.Texture.BILINEAR_SAMPLINGMODE,i.getEngine(),!1,n),r._depthOfFieldPass=new t.PassPostProcess("depthOfFieldPass",1,null,t.Texture.BILINEAR_SAMPLINGMODE,i.getEngine(),!1,n),r._depthOfFieldBlurY=new t.DepthOfFieldBlurPostProcess("verticle blur",i,new t.Vector2(0,1),15,1,null,o,r._circleOfConfusion,t.Texture.BILINEAR_SAMPLINGMODE,i.getEngine(),!1,n),r._depthOfFieldBlurX=new t.DepthOfFieldBlurPostProcess("horizontal blur",i,new t.Vector2(1,0),15,1,null,o,null,t.Texture.BILINEAR_SAMPLINGMODE,i.getEngine(),!1,n),r._depthOfFieldMerge=new t.DepthOfFieldMergePostProcess("depthOfFieldMerge",r._circleOfConfusion,r._depthOfFieldPass,1,null,t.Texture.BILINEAR_SAMPLINGMODE,i.getEngine(),!1,n),r}return o(i,e),Object.defineProperty(i.prototype,"kernelSize",{get:function(){return this._depthOfFieldBlurX.kernel},set:function(t){this._depthOfFieldBlurX.kernel=t,this._depthOfFieldBlurY.kernel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focalLength",{get:function(){return this._circleOfConfusion.focalLength},set:function(t){this._circleOfConfusion.focalLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fStop",{get:function(){return this._circleOfConfusion.fStop},set:function(t){this._circleOfConfusion.fStop=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focusDistance",{get:function(){return this._circleOfConfusion.focusDistance},set:function(t){this._circleOfConfusion.focusDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lensSize",{get:function(){return this._circleOfConfusion.lensSize},set:function(t){this._circleOfConfusion.lensSize=t},enumerable:!0,configurable:!0}),i.prototype.disposeEffects=function(t){this._depthOfFieldPass.dispose(t),this._circleOfConfusion.dispose(t),this._depthOfFieldBlurX.dispose(t),this._depthOfFieldBlurY.dispose(t),this._depthOfFieldMerge.dispose(t)},i}(t.PostProcessRenderEffect);t.DepthOfFieldEffect=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s){void 0===s&&(s=!0);var a=e.call(this,r.getEngine(),i)||this;a.PassPostProcessId="PassPostProcessEffect",a.HighLightsPostProcessId="HighLightsPostProcessEffect",a.BlurXPostProcessId="BlurXPostProcessEffect",a.BlurYPostProcessId="BlurYPostProcessEffect",a.CopyBackPostProcessId="CopyBackPostProcessEffect",a.ImageProcessingPostProcessId="ImageProcessingPostProcessEffect",a.FxaaPostProcessId="FxaaPostProcessEffect",a.FinalMergePostProcessId="FinalMergePostProcessEffect",a.animations=[],a._bloomEnabled=!1,a._depthOfFieldEnabled=!1,a._fxaaEnabled=!1,a._imageProcessingEnabled=!0,a._bloomScale=.6,a._buildAllowed=!0,a.bloomKernel=64,a._bloomWeight=.15,a._cameras=o||[],a._buildAllowed=s,a._scene=r;var l=a._scene.getEngine().getCaps();return a._hdr=n&&(l.textureHalfFloatRender||l.textureFloatRender),a._hdr?l.textureHalfFloatRender?a._defaultPipelineTextureType=t.Engine.TEXTURETYPE_HALF_FLOAT:l.textureFloatRender&&(a._defaultPipelineTextureType=t.Engine.TEXTURETYPE_FLOAT):a._defaultPipelineTextureType=t.Engine.TEXTURETYPE_UNSIGNED_INT,r.postProcessRenderPipelineManager.addPipeline(a),a._buildPipeline(),a}return o(i,e),Object.defineProperty(i.prototype,"bloomWeight",{get:function(){return this._bloomWeight},set:function(e){this._bloomWeight!==e&&(this._bloomWeight=e,this._hdr&&this.copyBack&&(this.copyBack.alphaConstants=new t.Color4(e,e,e,e)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bloomScale",{get:function(){return this._bloomScale},set:function(t){this._bloomScale!==t&&(this._bloomScale=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bloomEnabled",{get:function(){return this._bloomEnabled},set:function(t){this._bloomEnabled!==t&&(this._bloomEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"depthOfFieldEnabled",{get:function(){return this._depthOfFieldEnabled},set:function(t){this._depthOfFieldEnabled!==t&&(this._depthOfFieldEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fxaaEnabled",{get:function(){return this._fxaaEnabled},set:function(t){this._fxaaEnabled!==t&&(this._fxaaEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"imageProcessingEnabled",{get:function(){return this._imageProcessingEnabled},set:function(t){this._imageProcessingEnabled!==t&&(this._imageProcessingEnabled=t,this._buildPipeline())},enumerable:!0,configurable:!0}),i.prototype.prepare=function(){var t=this._buildAllowed;this._buildAllowed=!0,this._buildPipeline(),this._buildAllowed=t},i.prototype._buildPipeline=function(){var e=this;if(this._buildAllowed){var i=this._scene.getEngine();if(this._disposePostProcesses(),this._reset(),this.bloomEnabled){if(this.pass=new t.PassPostProcess("sceneRenderTarget",1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.PassPostProcessId,function(){return e.pass},!0)),this._hdr||(this.highlights=new t.HighlightsPostProcess("highlights",this.bloomScale,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.HighLightsPostProcessId,function(){return e.highlights},!0)),this.highlights.autoClear=!1,this.highlights.alwaysForcePOT=!0),this.blurX=new t.BlurPostProcess("horizontal blur",new t.Vector2(1,0),10,this.bloomScale,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.BlurXPostProcessId,function(){return e.blurX},!0)),this.blurX.alwaysForcePOT=!0,this.blurX.autoClear=!1,this.blurX.onActivateObservable.add(function(){var t=e.blurX.width/i.getRenderWidth(!0);e.blurX.kernel=e.bloomKernel*t}),this.blurY=new t.BlurPostProcess("vertical blur",new t.Vector2(0,1),10,this.bloomScale,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.BlurYPostProcessId,function(){return e.blurY},!0)),this.blurY.alwaysForcePOT=!0,this.blurY.autoClear=!1,this.blurY.onActivateObservable.add(function(){var t=e.blurY.height/i.getRenderHeight(!0);e.blurY.kernel=e.bloomKernel*t}),this.copyBack=new t.PassPostProcess("bloomBlendBlit",this.bloomScale,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.CopyBackPostProcessId,function(){return e.copyBack},!0)),this.copyBack.alwaysForcePOT=!0,this._hdr){this.copyBack.alphaMode=t.Engine.ALPHA_INTERPOLATE;var n=this.bloomWeight;this.copyBack.alphaConstants=new t.Color4(n,n,n,n)}else this.copyBack.alphaMode=t.Engine.ALPHA_SCREENMODE;this.copyBack.autoClear=!1}this.depthOfFieldEnabled&&(this.depthOfField=new t.DepthOfFieldEffect(this._scene,this._defaultPipelineTextureType),this.addEffect(this.depthOfField)),this._imageProcessingEnabled&&(this.imageProcessing=new t.ImageProcessingPostProcess("imageProcessing",1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this._hdr?this.addEffect(new t.PostProcessRenderEffect(i,this.ImageProcessingPostProcessId,function(){return e.imageProcessing},!0)):this._scene.imageProcessingConfiguration.applyByPostProcess=!1),this.fxaaEnabled?(this.fxaa=new t.FxaaPostProcess("fxaa",1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.FxaaPostProcessId,function(){return e.fxaa},!0)),this.fxaa.autoClear=!(this.bloomEnabled||this._hdr&&this.imageProcessing)):this._hdr&&this.imageProcessing?this.finalMerge=this.imageProcessing:(this.finalMerge=new t.PassPostProcess("finalMerge",1,null,t.Texture.BILINEAR_SAMPLINGMODE,i,!1,this._defaultPipelineTextureType),this.addEffect(new t.PostProcessRenderEffect(i,this.FinalMergePostProcessId,function(){return e.finalMerge},!0)),this.finalMerge.autoClear=!(this.bloomEnabled||this._hdr&&this.imageProcessing)),this.bloomEnabled&&(this._hdr?(this.copyBack.shareOutputWith(this.blurX),this.imageProcessing?(this.imageProcessing.shareOutputWith(this.pass),this.imageProcessing.autoClear=!1):this.fxaa?this.fxaa.shareOutputWith(this.pass):this.finalMerge.shareOutputWith(this.pass)):this.fxaa?this.fxaa.shareOutputWith(this.pass):this.finalMerge.shareOutputWith(this.pass)),null!==this._cameras&&this._scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(this._name,this._cameras)}},i.prototype._disposePostProcesses=function(){for(var t=0;t<this._cameras.length;t++){var e=this._cameras[t];this.pass&&this.pass.dispose(e),this.highlights&&this.highlights.dispose(e),this.blurX&&this.blurX.dispose(e),this.blurY&&this.blurY.dispose(e),this.copyBack&&this.copyBack.dispose(e),this.imageProcessing&&this.imageProcessing.dispose(e),this.fxaa&&this.fxaa.dispose(e),this.finalMerge&&this.finalMerge.dispose(e),this.depthOfField&&this.depthOfField.disposeEffects(e)}this.pass=null,this.highlights=null,this.blurX=null,this.blurY=null,this.copyBack=null,this.imageProcessing=null,this.fxaa=null,this.finalMerge=null,this.depthOfField=null},i.prototype.dispose=function(){this._disposePostProcesses(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._cameras),e.prototype.dispose.call(this)},i.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="DefaultRenderingPipeline",e},i.Parse=function(e,n,r){return t.SerializationHelper.Parse(function(){return new i(e._name,e._name._hdr,n)},e,n,r)},r([t.serialize()],i.prototype,"bloomKernel",void 0),r([t.serialize()],i.prototype,"_bloomWeight",void 0),r([t.serialize()],i.prototype,"_hdr",void 0),r([t.serialize()],i.prototype,"bloomWeight",null),r([t.serialize()],i.prototype,"bloomScale",null),r([t.serialize()],i.prototype,"bloomEnabled",null),r([t.serialize()],i.prototype,"depthOfFieldEnabled",null),r([t.serialize()],i.prototype,"fxaaEnabled",null),r([t.serialize()],i.prototype,"imageProcessingEnabled",null),i}(t.PostProcessRenderPipeline);t.DefaultRenderingPipeline=e}(l||(l={})),function(t){var e=function(){function e(t,e){void 0===e&&(e=1),this._enablePosition=!1,this._scene=t,this._ratio=e,this._createRenderTargets()}return Object.defineProperty(e.prototype,"renderList",{set:function(t){this._multiRenderTarget.renderList=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSupported",{get:function(){return this._multiRenderTarget.isSupported},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enablePosition",{get:function(){return this._enablePosition},set:function(t){this._enablePosition=t,this.dispose(),this._createRenderTargets()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this._ratio},enumerable:!0,configurable:!0}),e.prototype.isReady=function(e,i){var n=e.getMaterial();if(n&&n.disableDepthWrite)return!1;var r=[],o=[t.VertexBuffer.PositionKind,t.VertexBuffer.NormalKind],s=e.getMesh();n&&n.needAlphaTesting()&&(r.push("#define ALPHATEST"),s.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.push(t.VertexBuffer.UVKind),r.push("#define UV1")),s.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(o.push(t.VertexBuffer.UV2Kind),r.push("#define UV2"))),this._enablePosition&&r.push("#define POSITION"),s.useBones&&s.computeBonesUsingShaders?(o.push(t.VertexBuffer.MatricesIndicesKind),o.push(t.VertexBuffer.MatricesWeightsKind),s.numBoneInfluencers>4&&(o.push(t.VertexBuffer.MatricesIndicesExtraKind),o.push(t.VertexBuffer.MatricesWeightsExtraKind)),r.push("#define NUM_BONE_INFLUENCERS "+s.numBoneInfluencers),r.push("#define BonesPerMesh "+(s.skeleton?s.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),i&&(r.push("#define INSTANCES"),o.push("world0"),o.push("world1"),o.push("world2"),o.push("world3"));var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this._scene.getEngine().createEffect("geometry",o,["world","mBones","viewProjection","diffuseMatrix","view"],["diffuseSampler"],a,void 0,void 0,void 0,{buffersCount:this._enablePosition?3:2})),this._effect.isReady()},e.prototype.getGBuffer=function(){return this._multiRenderTarget},Object.defineProperty(e.prototype,"samples",{get:function(){return this._multiRenderTarget.samples},set:function(t){this._multiRenderTarget.samples=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.getGBuffer().dispose()},e.prototype._createRenderTargets=function(){var e=this,i=this._scene.getEngine(),n=this._enablePosition?3:2;if(this._multiRenderTarget=new t.MultiRenderTarget("gBuffer",{width:i.getRenderWidth()*this._ratio,height:i.getRenderHeight()*this._ratio},n,this._scene,{generateMipMaps:!1,generateDepthTexture:!0,defaultType:t.Engine.TEXTURETYPE_FLOAT}),this.isSupported){this._multiRenderTarget.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._multiRenderTarget.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._multiRenderTarget.refreshRate=1,this._multiRenderTarget.renderParticles=!1,this._multiRenderTarget.renderList=null,this._multiRenderTarget.onClearObservable.add(function(e){e.clear(new t.Color4(0,0,0,1),!0,!0,!0)});var r=function(i){var n=i.getRenderingMesh(),r=e._scene,o=r.getEngine(),s=i.getMaterial();if(s){o.setState(s.backFaceCulling,0,!1,r.useRightHandedSystem);var a=n._getInstancesRenderList(i._id);if(!a.mustReturn){var l=o.getCaps().instancedArrays&&null!==a.visibleInstances[i._id];if(e.isReady(i,l)){if(o.enableEffect(e._effect),n._bind(i,e._effect,t.Material.TriangleFillMode),e._effect.setMatrix("viewProjection",r.getTransformMatrix()),e._effect.setMatrix("view",r.getViewMatrix()),s&&s.needAlphaTesting()){var c=s.getAlphaTestTexture();c&&(e._effect.setTexture("diffuseSampler",c),e._effect.setMatrix("diffuseMatrix",c.getTextureMatrix()))}n.useBones&&n.computeBonesUsingShaders&&n.skeleton&&e._effect.setMatrices("mBones",n.skeleton.getTransformMatrices(n)),n._processRendering(i,e._effect,t.Material.TriangleFillMode,a,l,function(t,i){return e._effect.setMatrix("world",i)})}}}};this._multiRenderTarget.customRenderFunction=function(t,e,n,o){var s;if(o.length){for(i.setColorWrite(!1),s=0;s<o.length;s++)r(o.data[s]);i.setColorWrite(!0)}for(s=0;s<t.length;s++)r(t.data[s]);for(s=0;s<e.length;s++)r(e.data[s])}}},e}();t.GeometryBufferRenderer=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u,h){var p=e.call(this,i,"refraction",["baseColor","depth","colorLevel"],["refractionSampler"],a,l,c,u,h)||this;return p.color=r,p.depth=o,p.colorLevel=s,p.onActivateObservable.add(function(e){p._refRexture=p._refRexture||new t.Texture(n,e.getScene())}),p.onApplyObservable.add(function(t){t.setColor3("baseColor",p.color),t.setFloat("depth",p.depth),t.setFloat("colorLevel",p.colorLevel),t.setTexture("refractionSampler",p._refRexture)}),p}return o(i,e),i.prototype.dispose=function(t){this._refRexture&&this._refRexture.dispose(),e.prototype.dispose.call(this,t)},i}(t.PostProcess);t.RefractionPostProcess=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,"blackAndWhite",["degree"],null,i,n,r,o,s)||this;return a.degree=1,a.onApplyObservable.add(function(t){t.setFloat("degree",a.degree)}),a}return o(e,t),e}(t.PostProcess);t.BlackAndWhitePostProcess=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n,r,o,s,a){var l=t.call(this,e,"convolution",["kernel","screenSize"],null,n,r,o,s,a)||this;return l.kernel=i,l.onApply=function(t){t.setFloat2("screenSize",l.width,l.height),t.setArray("kernel",l.kernel)},l}return o(e,t),e.EdgeDetect0Kernel=[1,0,-1,0,0,0,-1,0,1],e.EdgeDetect1Kernel=[0,1,0,1,-4,1,0,1,0],e.EdgeDetect2Kernel=[-1,-1,-1,-1,8,-1,-1,-1,-1],e.SharpenKernel=[0,-1,0,-1,5,-1,0,-1,0],e.EmbossKernel=[-2,-1,0,-1,1,1,0,1,2],e.GaussianKernel=[0,1,0,1,1,1,0,1,0],e}(t.PostProcess);t.ConvolutionPostProcess=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n,r,o,s,a){var l=t.call(this,e,"filter",["kernelMatrix"],null,n,r,o,s,a)||this;return l.kernelMatrix=i,l.onApply=function(t){t.setMatrix("kernelMatrix",l.kernelMatrix)},l}return o(e,t),e}(t.PostProcess);t.FilterPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(n,r,o,s,a,l,c,u,h){void 0===a&&(a=100),void 0===l&&(l=t.Texture.BILINEAR_SAMPLINGMODE);var p=e.call(this,n,"volumetricLightScattering",["decay","exposure","weight","meshPositionOnScreen","density"],["lightScatteringSampler"],r.postProcessRatio||r,o,l,c,u,"#define NUM_SAMPLES "+a)||this;return p._screenCoordinates=t.Vector2.Zero(),p.customMeshPosition=t.Vector3.Zero(),p.useCustomMeshPosition=!1,p.invert=!0,p.excludedMeshes=new Array,p.exposure=.3,p.decay=.96815,p.weight=.58767,p.density=.926,c=(h=null===o?h:o.getScene()).getEngine(),p._viewPort=new t.Viewport(0,0,1,1).toGlobal(c.getRenderWidth(),c.getRenderHeight()),p.mesh=null!==s?s:i.CreateDefaultMesh("VolumetricLightScatteringMesh",h),p._createPass(h,r.passRatio||r),p.onActivate=function(t){p.isSupported||p.dispose(t),p.onActivate=null},p.onApplyObservable.add(function(t){p._updateMeshScreenCoordinates(h),t.setTexture("lightScatteringSampler",p._volumetricLightScatteringRTT),t.setFloat("exposure",p.exposure),t.setFloat("decay",p.decay),t.setFloat("weight",p.weight),t.setFloat("density",p.density),t.setVector2("meshPositionOnScreen",p._screenCoordinates)}),p}return o(i,e),Object.defineProperty(i.prototype,"useDiffuseColor",{get:function(){return t.Tools.Warn("VolumetricLightScatteringPostProcess.useDiffuseColor is no longer used, use the mesh material directly instead"),!1},set:function(e){t.Tools.Warn("VolumetricLightScatteringPostProcess.useDiffuseColor is no longer used, use the mesh material directly instead")},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"VolumetricLightScatteringPostProcess"},i.prototype._isReady=function(e,i){var n=e.getMesh();if(n===this.mesh&&n.material)return n.material.isReady(n);var r=[],o=[t.VertexBuffer.PositionKind],s=e.getMaterial();s&&(s.needAlphaTesting()&&r.push("#define ALPHATEST"),n.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.push(t.VertexBuffer.UVKind),r.push("#define UV1")),n.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(o.push(t.VertexBuffer.UV2Kind),r.push("#define UV2"))),n.useBones&&n.computeBonesUsingShaders?(o.push(t.VertexBuffer.MatricesIndicesKind),o.push(t.VertexBuffer.MatricesWeightsKind),r.push("#define NUM_BONE_INFLUENCERS "+n.numBoneInfluencers),r.push("#define BonesPerMesh "+(n.skeleton?n.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),i&&(r.push("#define INSTANCES"),o.push("world0"),o.push("world1"),o.push("world2"),o.push("world3"));var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._volumetricLightScatteringPass=n.getScene().getEngine().createEffect({vertexElement:"depth",fragmentElement:"volumetricLightScatteringPass"},o,["world","mBones","viewProjection","diffuseMatrix"],["diffuseSampler"],a)),this._volumetricLightScatteringPass.isReady()},i.prototype.setCustomMeshPosition=function(t){this.customMeshPosition=t},i.prototype.getCustomMeshPosition=function(){return this.customMeshPosition},i.prototype.dispose=function(t){var i=t.getScene().customRenderTargets.indexOf(this._volumetricLightScatteringRTT);-1!==i&&t.getScene().customRenderTargets.splice(i,1),this._volumetricLightScatteringRTT.dispose(),e.prototype.dispose.call(this,t)},i.prototype.getPass=function(){return this._volumetricLightScatteringRTT},i.prototype._meshExcluded=function(t){return this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(t)},i.prototype._createPass=function(e,i){var n=this,r=e.getEngine();this._volumetricLightScatteringRTT=new t.RenderTargetTexture("volumetricLightScatteringMap",{width:r.getRenderWidth()*i,height:r.getRenderHeight()*i},e,!1,!0,t.Engine.TEXTURETYPE_UNSIGNED_INT),this._volumetricLightScatteringRTT.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._volumetricLightScatteringRTT.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._volumetricLightScatteringRTT.renderList=null,this._volumetricLightScatteringRTT.renderParticles=!1;var o=this.getCamera();o?o.customRenderTargets.push(this._volumetricLightScatteringRTT):e.customRenderTargets.push(this._volumetricLightScatteringRTT);var s,a=function(e){var i=e.getRenderingMesh();if(!n._meshExcluded(i)){var r=e.getMaterial();if(r){var o=i.getScene(),s=o.getEngine();s.setState(r.backFaceCulling);var a=i._getInstancesRenderList(e._id);if(!a.mustReturn){var l=s.getCaps().instancedArrays&&null!==a.visibleInstances[e._id];if(n._isReady(e,l)){var c=n._volumetricLightScatteringPass;if(i===n.mesh&&(c=e.effect?e.effect:r.getEffect()),s.enableEffect(c),i._bind(e,c,t.Material.TriangleFillMode),i===n.mesh)r.bind(i.getWorldMatrix(),i);else{if(n._volumetricLightScatteringPass.setMatrix("viewProjection",o.getTransformMatrix()),r&&r.needAlphaTesting()){var u=r.getAlphaTestTexture();n._volumetricLightScatteringPass.setTexture("diffuseSampler",u),u&&n._volumetricLightScatteringPass.setMatrix("diffuseMatrix",u.getTextureMatrix())}i.useBones&&i.computeBonesUsingShaders&&i.skeleton&&n._volumetricLightScatteringPass.setMatrices("mBones",i.skeleton.getTransformMatrices(i))}i._processRendering(e,n._volumetricLightScatteringPass,t.Material.TriangleFillMode,a,l,function(t,e){return c.setMatrix("world",e)})}}}}},l=new t.Color4(0,0,0,1);this._volumetricLightScatteringRTT.onBeforeRenderObservable.add(function(){s=e.clearColor,e.clearColor=l}),this._volumetricLightScatteringRTT.onAfterRenderObservable.add(function(){e.clearColor=s}),this._volumetricLightScatteringRTT.customRenderFunction=function(i,n,r,o){var s,l=e.getEngine();if(o.length){for(l.setColorWrite(!1),s=0;s<o.length;s++)a(o.data[s]);l.setColorWrite(!0)}for(s=0;s<i.length;s++)a(i.data[s]);for(s=0;s<n.length;s++)a(n.data[s]);if(r.length){for(s=0;s<r.length;s++){var c=r.data[s],u=c.getBoundingInfo();u&&e.activeCamera&&(c._alphaIndex=c.getMesh().alphaIndex,c._distanceToCamera=u.boundingSphere.centerWorld.subtract(e.activeCamera.position).length())}var h=r.data.slice(0,r.length);for(h.sort(function(t,e){return t._alphaIndex>e._alphaIndex?1:t._alphaIndex<e._alphaIndex?-1:t._distanceToCamera<e._distanceToCamera?1:t._distanceToCamera>e._distanceToCamera?-1:0}),l.setAlphaMode(t.Engine.ALPHA_COMBINE),s=0;s<h.length;s++)a(h[s]);l.setAlphaMode(t.Engine.ALPHA_DISABLE)}}},i.prototype._updateMeshScreenCoordinates=function(e){var i,n=e.getTransformMatrix();i=this.useCustomMeshPosition?this.customMeshPosition:this.attachedNode?this.attachedNode.position:this.mesh.parent?this.mesh.getAbsolutePosition():this.mesh.position;var r=t.Vector3.Project(i,t.Matrix.Identity(),n,this._viewPort);this._screenCoordinates.x=r.x/this._viewPort.width,this._screenCoordinates.y=r.y/this._viewPort.height,this.invert&&(this._screenCoordinates.y=1-this._screenCoordinates.y)},i.CreateDefaultMesh=function(e,i){var n=t.Mesh.CreatePlane(e,1,i);n.billboardMode=t.AbstractMesh.BILLBOARDMODE_ALL;var r=new t.StandardMaterial(e+"Material",i);return r.emissiveColor=new t.Color3(1,1,1),n.material=r,n},r([t.serializeAsVector3()],i.prototype,"customMeshPosition",void 0),r([t.serialize()],i.prototype,"useCustomMeshPosition",void 0),r([t.serialize()],i.prototype,"invert",void 0),r([t.serializeAsMeshReference()],i.prototype,"mesh",void 0),r([t.serialize()],i.prototype,"excludedMeshes",void 0),r([t.serialize()],i.prototype,"exposure",void 0),r([t.serialize()],i.prototype,"decay",void 0),r([t.serialize()],i.prototype,"weight",void 0),r([t.serialize()],i.prototype,"density",void 0),i}(t.PostProcess);t.VolumetricLightScatteringPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){var c=e.call(this,i,"colorCorrection",null,["colorTable"],r,o,s,a,l)||this;return c._colorTableTexture=new t.Texture(n,o.getScene(),!0,!1,t.Texture.TRILINEAR_SAMPLINGMODE),c._colorTableTexture.anisotropicFilteringLevel=1,c._colorTableTexture.wrapU=t.Texture.CLAMP_ADDRESSMODE,c._colorTableTexture.wrapV=t.Texture.CLAMP_ADDRESSMODE,c.onApply=function(t){t.setTexture("colorTable",c._colorTableTexture)},c}return o(i,e),i}(t.PostProcess);t.ColorCorrectionPostProcess=e}(l||(l={})),function(t){var e;!function(t){t[t.Hable=0]="Hable",t[t.Reinhard=1]="Reinhard",t[t.HejiDawson=2]="HejiDawson",t[t.Photographic=3]="Photographic"}(e=t.TonemappingOperator||(t.TonemappingOperator={}));var i=function(i){function n(n,r,o,s,a,l,c){void 0===a&&(a=t.Texture.BILINEAR_SAMPLINGMODE),void 0===c&&(c=t.Engine.TEXTURETYPE_UNSIGNED_INT);var u=i.call(this,n,"tonemap",["_ExposureAdjustment"],null,1,s,a,l,!0,null,c)||this;u._operator=r,u.exposureAdjustment=o;var h="#define ";return u._operator===e.Hable?h+="HABLE_TONEMAPPING":u._operator===e.Reinhard?h+="REINHARD_TONEMAPPING":u._operator===e.HejiDawson?h+="OPTIMIZED_HEJIDAWSON_TONEMAPPING":u._operator===e.Photographic&&(h+="PHOTOGRAPHIC_TONEMAPPING"),u.updateEffect(h),u.onApply=function(t){t.setFloat("_ExposureAdjustment",u.exposureAdjustment)},u}return o(n,i),n}(t.PostProcess);t.TonemapPostProcess=i}(l||(l={})),function(t){var e=function(t){function e(e,i,n,r,o,s){return t.call(this,e,"displayPass",["passSampler"],["passSampler"],i,n,r,o,s)||this}return o(e,t),e}(t.PostProcess);t.DisplayPassPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){return void 0===l&&(l=t.Engine.TEXTURETYPE_UNSIGNED_INT),e.call(this,i,"highlights",null,null,n,r,o,s,a,null,l)||this}return o(i,e),i}(t.PostProcess);t.HighlightsPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c){void 0===r&&(r=null),void 0===l&&(l=t.Engine.TEXTURETYPE_UNSIGNED_INT);var u=e.call(this,i,"imageProcessing",[],[],n,r,o,s,a,null,l,"postprocess",null,!0)||this;return u._fromLinearSpace=!0,u._defines={IMAGEPROCESSING:!1,VIGNETTE:!1,VIGNETTEBLENDMODEMULTIPLY:!1,VIGNETTEBLENDMODEOPAQUE:!1,TONEMAPPING:!1,CONTRAST:!1,COLORCURVES:!1,COLORGRADING:!1,COLORGRADING3D:!1,FROMLINEARSPACE:!1,SAMPLER3DGREENDEPTH:!1,SAMPLER3DBGRMAP:!1,IMAGEPROCESSINGPOSTPROCESS:!1,EXPOSURE:!1},c?(c.applyByPostProcess=!0,u._attachImageProcessingConfiguration(c,!0),u.fromLinearSpace=!1):(u._attachImageProcessingConfiguration(null,!0),u.imageProcessingConfiguration.applyByPostProcess=!0),u.onApply=function(t){u.imageProcessingConfiguration.bind(t,u.aspectRatio)},u}return o(i,e),Object.defineProperty(i.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(t){this._attachImageProcessingConfiguration(t)},enumerable:!0,configurable:!0}),i.prototype._attachImageProcessingConfiguration=function(e,i){var n=this;if(void 0===i&&(i=!1),e!==this._imageProcessingConfiguration){if(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e)this._imageProcessingConfiguration=e;else{var r=null,o=this.getEngine(),s=this.getCamera();if(s)r=s.getScene();else if(o&&o.scenes){var a=o.scenes;r=a[a.length-1]}else r=t.Engine.LastCreatedScene;this._imageProcessingConfiguration=r.imageProcessingConfiguration}this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(t){n._updateParameters()}),i||this._updateParameters()}},Object.defineProperty(i.prototype,"colorCurves",{get:function(){return this.imageProcessingConfiguration.colorCurves},set:function(t){this.imageProcessingConfiguration.colorCurves=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(t){this.imageProcessingConfiguration.colorCurvesEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorGradingTexture",{get:function(){return this.imageProcessingConfiguration.colorGradingTexture},set:function(t){this.imageProcessingConfiguration.colorGradingTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(t){this.imageProcessingConfiguration.colorGradingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exposure",{get:function(){return this.imageProcessingConfiguration.exposure},set:function(t){this.imageProcessingConfiguration.exposure=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(t){this._imageProcessingConfiguration.toneMappingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contrast",{get:function(){return this.imageProcessingConfiguration.contrast},set:function(t){this.imageProcessingConfiguration.contrast=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteStretch",{get:function(){return this.imageProcessingConfiguration.vignetteStretch},set:function(t){this.imageProcessingConfiguration.vignetteStretch=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteCentreX",{get:function(){return this.imageProcessingConfiguration.vignetteCentreX},set:function(t){this.imageProcessingConfiguration.vignetteCentreX=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteCentreY",{get:function(){return this.imageProcessingConfiguration.vignetteCentreY},set:function(t){this.imageProcessingConfiguration.vignetteCentreY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteWeight",{get:function(){return this.imageProcessingConfiguration.vignetteWeight},set:function(t){this.imageProcessingConfiguration.vignetteWeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteColor",{get:function(){return this.imageProcessingConfiguration.vignetteColor},set:function(t){this.imageProcessingConfiguration.vignetteColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteCameraFov",{get:function(){return this.imageProcessingConfiguration.vignetteCameraFov},set:function(t){this.imageProcessingConfiguration.vignetteCameraFov=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteBlendMode",{get:function(){return this.imageProcessingConfiguration.vignetteBlendMode},set:function(t){this.imageProcessingConfiguration.vignetteBlendMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vignetteEnabled",{get:function(){return this.imageProcessingConfiguration.vignetteEnabled},set:function(t){this.imageProcessingConfiguration.vignetteEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fromLinearSpace",{get:function(){return this._fromLinearSpace},set:function(t){this._fromLinearSpace!==t&&(this._fromLinearSpace=t,this._updateParameters())},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"ImageProcessingPostProcess"},i.prototype._updateParameters=function(){this._defines.FROMLINEARSPACE=this._fromLinearSpace,this.imageProcessingConfiguration.prepareDefines(this._defines,!0);var e="";for(var i in this._defines)this._defines[i]&&(e+="#define "+i+";\r\n");var n=["textureSampler"];t.ImageProcessingConfiguration.PrepareSamplers(n,this._defines);var r=["scale"];t.ImageProcessingConfiguration.PrepareUniforms(r,this._defines),this.updateEffect(e,r,n)},i.prototype.dispose=function(t){e.prototype.dispose.call(this,t),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this.imageProcessingConfiguration.applyByPostProcess=!1},r([t.serialize()],i.prototype,"_fromLinearSpace",void 0),i}(t.PostProcess);t.ImageProcessingPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===a&&(a=t.Texture.BILINEAR_SAMPLINGMODE),void 0===u&&(u=t.Engine.TEXTURETYPE_UNSIGNED_INT);var h=e.call(this,i,"kernelBlur",["delta","direction","cameraMinMaxZ"],["depthSampler"],o,s,a,l,c,null,u,"kernelBlur",{varyingCount:0,depCount:0},!0)||this;return h.direction=n,h._packedFloat=!1,h._staticDefines="",h.onApplyObservable.add(function(t){t.setFloat2("delta",1/h.width*h.direction.x,1/h.height*h.direction.y)}),h.kernel=r,h}return o(i,e),Object.defineProperty(i.prototype,"kernel",{get:function(){return this._idealKernel},set:function(t){this._idealKernel!==t&&(t=Math.max(t,1),this._idealKernel=t,this._kernel=this._nearestBestKernel(t),this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"packedFloat",{get:function(){return this._packedFloat},set:function(t){this._packedFloat!==t&&(this._packedFloat=t,this._updateParameters())},enumerable:!0,configurable:!0}),i.prototype._updateParameters=function(){for(var t=this._kernel,e=(t-1)/2,i=[],n=[],r=0,o=0;o<t;o++){var s=o/(t-1),a=this._gaussianWeight(2*s-1);i[o]=o-e,n[o]=a,r+=a}for(o=0;o<n.length;o++)n[o]/=r;var l=[],c=[],u=[];for(o=0;o<=e;o+=2){var h=Math.min(o+1,Math.floor(e));if(o===h)u.push({o:i[o],w:n[o]});else{var p=h===e,d=n[o]+n[h]*(p?.5:1),f=i[o]+1/(1+n[o]/n[h]);0===f?(u.push({o:i[o],w:n[o]}),u.push({o:i[o+1],w:n[o+1]})):(u.push({o:f,w:d}),u.push({o:-f,w:d}))}}for(o=0;o<u.length;o++)c[o]=u[o].o,l[o]=u[o].w;i=c,n=l;var m=this.getEngine().getCaps().maxVaryingVectors,g=Math.max(m,0)-1,y=Math.min(i.length,g),_="";_+=this._staticDefines;for(o=0;o<y;o++)_+="#define KERNEL_OFFSET"+o+" "+this._glslFloat(i[o])+"\r\n",_+="#define KERNEL_WEIGHT"+o+" "+this._glslFloat(n[o])+"\r\n";var v=0;for(o=g;o<i.length;o++)_+="#define KERNEL_DEP_OFFSET"+v+" "+this._glslFloat(i[o])+"\r\n",_+="#define KERNEL_DEP_WEIGHT"+v+" "+this._glslFloat(n[o])+"\r\n",v++;this.packedFloat&&(_+="#define PACKEDFLOAT 1"),this.updateEffect(_,null,null,{varyingCount:y,depCount:v})},i.prototype._nearestBestKernel=function(t){for(var e=Math.round(t),i=0,n=[e,e-1,e+1,e-2,e+2];i<n.length;i++){var r=n[i];if(r%2!=0&&Math.floor(r/2)%2==0&&r>0)return Math.max(r,3)}return Math.max(e,3)},i.prototype._gaussianWeight=function(t){var e=-t*t/(1/3*2*(1/3));return 1/(Math.sqrt(2*Math.PI)*(1/3))*Math.exp(e)},i.prototype._glslFloat=function(t,e){return void 0===e&&(e=8),t.toFixed(e).replace(/0+$/,"")},i}(t.PostProcess);t.BlurPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u,h,p,d){void 0===c&&(c=null),void 0===u&&(u=t.Texture.BILINEAR_SAMPLINGMODE),void 0===d&&(d=t.Engine.TEXTURETYPE_UNSIGNED_INT);var f=e.call(this,i,r,o,s,a,u=t.Texture.BILINEAR_SAMPLINGMODE,h,p,d=t.Engine.TEXTURETYPE_UNSIGNED_INT)||this;return f.direction=r,f._staticDefines+="#define DOF 1\r\n",f.onApplyObservable.add(function(t){null!=c&&t.setTextureFromPostProcess("textureSampler",c),t.setTexture("depthSampler",l),n.activeCamera&&t.setFloat2("cameraMinMaxZ",n.activeCamera.minZ,n.activeCamera.maxZ)}),f}return o(i,e),i}(t.BlurPostProcess);t.DepthOfFieldBlurPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l){void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null);var c=e.call(this,i,n.getScene())||this;return c.name=i,c.children=new Array,c.animations=new Array,c._index=null,c._worldTransform=new t.Matrix,c._absoluteTransform=new t.Matrix,c._invertedAbsoluteTransform=new t.Matrix,c._scaleMatrix=t.Matrix.Identity(),c._scaleVector=t.Vector3.One(),c._negateScaleChildren=t.Vector3.One(),c._scalingDeterminant=1,c._skeleton=n,c._localMatrix=o||t.Matrix.Identity(),c._restPose=s||c._localMatrix.clone(),c._baseMatrix=a||c._localMatrix.clone(),c._index=l,n.bones.push(c),c.setParent(r,!1),c._updateDifferenceMatrix(),c}return o(i,e),Object.defineProperty(i.prototype,"_matrix",{get:function(){return this._localMatrix},set:function(t){this._localMatrix?this._localMatrix.copyFrom(t):this._localMatrix=t},enumerable:!0,configurable:!0}),i.prototype.getSkeleton=function(){return this._skeleton},i.prototype.getParent=function(){return this._parent},i.prototype.setParent=function(t,e){if(void 0===e&&(e=!0),this._parent!==t){if(this._parent){var i=this._parent.children.indexOf(this);-1!==i&&this._parent.children.splice(i,1)}this._parent=t,this._parent&&this._parent.children.push(this),e&&this._updateDifferenceMatrix()}},i.prototype.getLocalMatrix=function(){return this._localMatrix},i.prototype.getBaseMatrix=function(){return this._baseMatrix},i.prototype.getRestPose=function(){return this._restPose},i.prototype.returnToRest=function(){this.updateMatrix(this._restPose.clone())},i.prototype.getWorldMatrix=function(){return this._worldTransform},i.prototype.getInvertedAbsoluteTransform=function(){return this._invertedAbsoluteTransform},i.prototype.getAbsoluteTransform=function(){return this._absoluteTransform},Object.defineProperty(i.prototype,"position",{get:function(){return this.getPosition()},set:function(t){this.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.getRotation()},set:function(t){this.setRotation(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationQuaternion",{get:function(){return this.getRotationQuaternion()},set:function(t){this.setRotationQuaternion(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaling",{get:function(){return this.getScale()},set:function(t){this.setScale(t.x,t.y,t.z)},enumerable:!0,configurable:!0}),i.prototype.updateMatrix=function(t,e){void 0===e&&(e=!0),this._baseMatrix=t.clone(),this._localMatrix=t.clone(),this._skeleton._markAsDirty(),e&&this._updateDifferenceMatrix()},i.prototype._updateDifferenceMatrix=function(t){t||(t=this._baseMatrix),this._parent?t.multiplyToRef(this._parent._absoluteTransform,this._absoluteTransform):this._absoluteTransform.copyFrom(t),this._absoluteTransform.invertToRef(this._invertedAbsoluteTransform);for(var e=0;e<this.children.length;e++)this.children[e]._updateDifferenceMatrix();this._scalingDeterminant=this._absoluteTransform.determinant()<0?-1:1},i.prototype.markAsDirty=function(){this._currentRenderId++,this._skeleton._markAsDirty()},i.prototype.copyAnimationRange=function(e,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=null),0===this.animations.length&&(this.animations.push(new t.Animation(this.name,"_matrix",e.animations[0].framePerSecond,t.Animation.ANIMATIONTYPE_MATRIX,0)),this.animations[0].setKeys([]));var s=e.animations[0].getRange(i);if(!s)return!1;for(var a,l,c,u=s.from,h=s.to,p=e.animations[0].getKeys(),d=e.length,f=e.getParent(),m=this.getParent(),g=r&&f&&d&&this.length&&d!==this.length,y=g&&m&&f?m.length/f.length:1,_=r&&!m&&o&&(1!==o.x||1!==o.y||1!==o.z),v=this.animations[0].getKeys(),b=0,x=p.length;b<x;b++)(a=p[b]).frame>=u&&a.frame<=h&&(r?(c=a.value.clone(),g?(l=c.getTranslation(),c.setTranslation(l.scaleInPlace(y))):_&&o?(l=c.getTranslation(),c.setTranslation(l.multiplyInPlace(o))):c=a.value):c=a.value,v.push({frame:a.frame+n,value:c}));return this.animations[0].createRange(i,u+n,h+n),!0},i.prototype.translate=function(e,n,r){void 0===n&&(n=t.Space.LOCAL);var o=this.getLocalMatrix();if(n==t.Space.LOCAL)o.m[12]+=e.x,o.m[13]+=e.y,o.m[14]+=e.z;else{var s=null;r&&(s=r.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=i._tmpMats[0],l=i._tmpVecs[0];this._parent&&(r&&s?(a.copyFrom(this._parent.getAbsoluteTransform()),a.multiplyToRef(s,a)):a.copyFrom(this._parent.getAbsoluteTransform())),a.m[12]=0,a.m[13]=0,a.m[14]=0,a.invert(),t.Vector3.TransformCoordinatesToRef(e,a,l),o.m[12]+=l.x,o.m[13]+=l.y,o.m[14]+=l.z}this.markAsDirty()},i.prototype.setPosition=function(e,n,r){void 0===n&&(n=t.Space.LOCAL);var o=this.getLocalMatrix();if(n==t.Space.LOCAL)o.m[12]=e.x,o.m[13]=e.y,o.m[14]=e.z;else{var s=null;r&&(s=r.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=i._tmpMats[0],l=i._tmpVecs[0];this._parent&&(r&&s?(a.copyFrom(this._parent.getAbsoluteTransform()),a.multiplyToRef(s,a)):a.copyFrom(this._parent.getAbsoluteTransform())),a.invert(),t.Vector3.TransformCoordinatesToRef(e,a,l),o.m[12]=l.x,o.m[13]=l.y,o.m[14]=l.z}this.markAsDirty()},i.prototype.setAbsolutePosition=function(e,i){this.setPosition(e,t.Space.WORLD,i)},i.prototype.setScale=function(t,e,i,n){void 0===n&&(n=!1),this.animations[0]&&!this.animations[0].hasRunningRuntimeAnimations&&(n||(this._negateScaleChildren.x=1/t,this._negateScaleChildren.y=1/e,this._negateScaleChildren.z=1/i),this._syncScaleVector()),this.scale(t/this._scaleVector.x,e/this._scaleVector.y,i/this._scaleVector.z,n)},i.prototype.scale=function(e,n,r,o){void 0===o&&(o=!1);var s=this.getLocalMatrix(),a=i._tmpMats[0];a.copyFrom(s);var l=i._tmpMats[1];l.copyFrom(a),l.invert();var c=i._tmpMats[2];t.Matrix.FromValuesToRef(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1,c),this._scaleMatrix.multiplyToRef(c,this._scaleMatrix),this._scaleVector.x*=e,this._scaleVector.y*=n,this._scaleVector.z*=r,s.multiplyToRef(l,s),s.multiplyToRef(c,s),s.multiplyToRef(a,s);var u=this.getParent();u?s.multiplyToRef(u.getAbsoluteTransform(),this.getAbsoluteTransform()):this.getAbsoluteTransform().copyFrom(s);var h=this.children.length;c.invert();for(var p=0;p<h;p++){var d=this.children[p],f=d.getLocalMatrix();f.multiplyToRef(c,f);var m=d.getLocalMatrix();m.m[12]*=e,m.m[13]*=n,m.m[14]*=r}if(this.computeAbsoluteTransforms(),o)for(p=0;p<h;p++)this.children[p].scale(e,n,r,o);this.markAsDirty()},i.prototype.setYawPitchRoll=function(e,n,r,o,s){void 0===o&&(o=t.Space.LOCAL);var a=i._tmpMats[0];t.Matrix.RotationYawPitchRollToRef(e,n,r,a);var l=i._tmpMats[1];this._getNegativeRotationToRef(l,o,s),l.multiplyToRef(a,a),this._rotateWithMatrix(a,o,s)},i.prototype.rotate=function(e,n,r,o){void 0===r&&(r=t.Space.LOCAL);var s=i._tmpMats[0];s.m[12]=0,s.m[13]=0,s.m[14]=0,t.Matrix.RotationAxisToRef(e,n,s),this._rotateWithMatrix(s,r,o)},i.prototype.setAxisAngle=function(e,n,r,o){void 0===r&&(r=t.Space.LOCAL);var s=i._tmpMats[0];t.Matrix.RotationAxisToRef(e,n,s);var a=i._tmpMats[1];this._getNegativeRotationToRef(a,r,o),a.multiplyToRef(s,s),this._rotateWithMatrix(s,r,o)},i.prototype.setRotation=function(e,i,n){void 0===i&&(i=t.Space.LOCAL),this.setYawPitchRoll(e.y,e.x,e.z,i,n)},i.prototype.setRotationQuaternion=function(e,n,r){void 0===n&&(n=t.Space.LOCAL);var o=i._tmpMats[0];this._getNegativeRotationToRef(o,n,r);var s=i._tmpMats[1];t.Matrix.FromQuaternionToRef(e,s),o.multiplyToRef(s,s),this._rotateWithMatrix(s,n,r)},i.prototype.setRotationMatrix=function(e,n,r){void 0===n&&(n=t.Space.LOCAL);var o=i._tmpMats[0];this._getNegativeRotationToRef(o,n,r);var s=i._tmpMats[1];s.copyFrom(e),o.multiplyToRef(e,s),this._rotateWithMatrix(s,n,r)},i.prototype._rotateWithMatrix=function(e,n,r){void 0===n&&(n=t.Space.LOCAL);var o=this.getLocalMatrix(),s=o.m[12],a=o.m[13],l=o.m[14],c=this.getParent(),u=i._tmpMats[3],h=i._tmpMats[4];c?(n==t.Space.WORLD?r?(u.copyFrom(r.getWorldMatrix()),c.getAbsoluteTransform().multiplyToRef(u,u)):u.copyFrom(c.getAbsoluteTransform()):u=c._scaleMatrix,h.copyFrom(u),h.invert(),o.multiplyToRef(u,o),o.multiplyToRef(e,o),o.multiplyToRef(h,o)):n==t.Space.WORLD&&r?(u.copyFrom(r.getWorldMatrix()),h.copyFrom(u),h.invert(),o.multiplyToRef(u,o),o.multiplyToRef(e,o),o.multiplyToRef(h,o)):o.multiplyToRef(e,o),o.m[12]=s,o.m[13]=a,o.m[14]=l,this.computeAbsoluteTransforms(),this.markAsDirty()},i.prototype._getNegativeRotationToRef=function(e,n,r){if(void 0===n&&(n=t.Space.LOCAL),n==t.Space.WORLD){if((s=i._tmpMats[2]).copyFrom(this._scaleMatrix),e.copyFrom(this.getAbsoluteTransform()),r){e.multiplyToRef(r.getWorldMatrix(),e);var o=i._tmpMats[3];t.Matrix.ScalingToRef(r.scaling.x,r.scaling.y,r.scaling.z,o),s.multiplyToRef(o,s)}e.invert(),s.m[0]*=this._scalingDeterminant,e.multiplyToRef(s,e)}else{var s;if(e.copyFrom(this.getLocalMatrix()),e.invert(),(s=i._tmpMats[2]).copyFrom(this._scaleMatrix),this._parent){var a=i._tmpMats[3];a.copyFrom(this._parent._scaleMatrix),a.invert(),a.multiplyToRef(e,e)}else s.m[0]*=this._scalingDeterminant;e.multiplyToRef(s,e)}},i.prototype.getScale=function(){return this._scaleVector.clone()},i.prototype.getScaleToRef=function(t){t.copyFrom(this._scaleVector)},i.prototype.getPosition=function(e,i){void 0===e&&(e=t.Space.LOCAL),void 0===i&&(i=null);var n=t.Vector3.Zero();return this.getPositionToRef(e,i,n),n},i.prototype.getPositionToRef=function(e,n,r){if(void 0===e&&(e=t.Space.LOCAL),e==t.Space.LOCAL){var o=this.getLocalMatrix();r.x=o.m[12],r.y=o.m[13],r.z=o.m[14]}else{var s=null;n&&(s=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=i._tmpMats[0];n&&s?(a.copyFrom(this.getAbsoluteTransform()),a.multiplyToRef(s,a)):a=this.getAbsoluteTransform(),r.x=a.m[12],r.y=a.m[13],r.z=a.m[14]}},i.prototype.getAbsolutePosition=function(e){void 0===e&&(e=null);var i=t.Vector3.Zero();return this.getPositionToRef(t.Space.WORLD,e,i),i},i.prototype.getAbsolutePositionToRef=function(e,i){this.getPositionToRef(t.Space.WORLD,e,i)},i.prototype.computeAbsoluteTransforms=function(){if(this._parent)this._localMatrix.multiplyToRef(this._parent._absoluteTransform,this._absoluteTransform);else{this._absoluteTransform.copyFrom(this._localMatrix);var t=this._skeleton.getPoseMatrix();t&&this._absoluteTransform.multiplyToRef(t,this._absoluteTransform)}for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].computeAbsoluteTransforms()},i.prototype._syncScaleVector=function(){var e=this.getLocalMatrix(),i=e.m[0]*e.m[0]+e.m[1]*e.m[1]+e.m[2]*e.m[2],n=e.m[4]*e.m[4]+e.m[5]*e.m[5]+e.m[6]*e.m[6],r=e.m[8]*e.m[8]+e.m[9]*e.m[9]+e.m[10]*e.m[10],o=e.m[0]*e.m[1]*e.m[2]*e.m[3]<0?-1:1,s=e.m[4]*e.m[5]*e.m[6]*e.m[7]<0?-1:1,a=e.m[8]*e.m[9]*e.m[10]*e.m[11]<0?-1:1;this._scaleVector.x=o*Math.sqrt(i),this._scaleVector.y=s*Math.sqrt(n),this._scaleVector.z=a*Math.sqrt(r),this._parent&&(this._scaleVector.x/=this._parent._negateScaleChildren.x,this._scaleVector.y/=this._parent._negateScaleChildren.y,this._scaleVector.z/=this._parent._negateScaleChildren.z),t.Matrix.FromValuesToRef(this._scaleVector.x,0,0,0,0,this._scaleVector.y,0,0,0,0,this._scaleVector.z,0,0,0,0,1,this._scaleMatrix)},i.prototype.getDirection=function(e,i){void 0===i&&(i=null);var n=t.Vector3.Zero();return this.getDirectionToRef(e,i,n),n},i.prototype.getDirectionToRef=function(e,n,r){void 0===n&&(n=null);var o=null;n&&(o=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=i._tmpMats[0];s.copyFrom(this.getAbsoluteTransform()),n&&o&&s.multiplyToRef(o,s),t.Vector3.TransformNormalToRef(e,s,r),r.normalize()},i.prototype.getRotation=function(e,i){void 0===e&&(e=t.Space.LOCAL),void 0===i&&(i=null);var n=t.Vector3.Zero();return this.getRotationToRef(e,i,n),n},i.prototype.getRotationToRef=function(e,n,r){void 0===e&&(e=t.Space.LOCAL),void 0===n&&(n=null);var o=i._tmpQuat;this.getRotationQuaternionToRef(e,n,o),o.toEulerAnglesToRef(r)},i.prototype.getRotationQuaternion=function(e,i){void 0===e&&(e=t.Space.LOCAL),void 0===i&&(i=null);var n=t.Quaternion.Identity();return this.getRotationQuaternionToRef(e,i,n),n},i.prototype.getRotationQuaternionToRef=function(e,n,r){if(void 0===e&&(e=t.Space.LOCAL),void 0===n&&(n=null),e==t.Space.LOCAL)this.getLocalMatrix().decompose(i._tmpVecs[0],r,i._tmpVecs[1]);else{var o=i._tmpMats[0],s=this.getAbsoluteTransform();n?s.multiplyToRef(n.getWorldMatrix(),o):o.copyFrom(s),o.m[0]*=this._scalingDeterminant,o.m[1]*=this._scalingDeterminant,o.m[2]*=this._scalingDeterminant,o.decompose(i._tmpVecs[0],r,i._tmpVecs[1])}},i.prototype.getRotationMatrix=function(e,i){void 0===e&&(e=t.Space.LOCAL);var n=t.Matrix.Identity();return this.getRotationMatrixToRef(e,i,n),n},i.prototype.getRotationMatrixToRef=function(e,n,r){if(void 0===e&&(e=t.Space.LOCAL),e==t.Space.LOCAL)this.getLocalMatrix().getRotationMatrixToRef(r);else{var o=i._tmpMats[0],s=this.getAbsoluteTransform();n?s.multiplyToRef(n.getWorldMatrix(),o):o.copyFrom(s),o.m[0]*=this._scalingDeterminant,o.m[1]*=this._scalingDeterminant,o.m[2]*=this._scalingDeterminant,o.getRotationMatrixToRef(r)}},i.prototype.getAbsolutePositionFromLocal=function(e,i){void 0===i&&(i=null);var n=t.Vector3.Zero();return this.getAbsolutePositionFromLocalToRef(e,i,n),n},i.prototype.getAbsolutePositionFromLocalToRef=function(e,n,r){void 0===n&&(n=null);var o=null;n&&(o=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=i._tmpMats[0];n&&o?(s.copyFrom(this.getAbsoluteTransform()),s.multiplyToRef(o,s)):s=this.getAbsoluteTransform(),t.Vector3.TransformCoordinatesToRef(e,s,r)},i.prototype.getLocalPositionFromAbsolute=function(e,i){void 0===i&&(i=null);var n=t.Vector3.Zero();return this.getLocalPositionFromAbsoluteToRef(e,i,n),n},i.prototype.getLocalPositionFromAbsoluteToRef=function(e,n,r){void 0===n&&(n=null);var o=null;n&&(o=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=i._tmpMats[0];s.copyFrom(this.getAbsoluteTransform()),n&&o&&s.multiplyToRef(o,s),s.invert(),t.Vector3.TransformCoordinatesToRef(e,s,r)},i._tmpVecs=[t.Vector3.Zero(),t.Vector3.Zero()],i._tmpQuat=t.Quaternion.Identity(),i._tmpMats=[t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity()],i}(t.Node);t.Bone=e}(l||(l={})),function(t){var e=function(){function e(e,i,n){if(this.targetPosition=t.Vector3.Zero(),this.poleTargetPosition=t.Vector3.Zero(),this.poleTargetLocalOffset=t.Vector3.Zero(),this.poleAngle=0,this.slerpAmount=1,this._bone1Quat=t.Quaternion.Identity(),this._bone1Mat=t.Matrix.Identity(),this._bone2Ang=Math.PI,this._maxAngle=Math.PI,this._rightHandedSystem=!1,this._bendAxis=t.Vector3.Right(),this._slerping=!1,this._adjustRoll=0,this._bone2=i,this._bone1=i.getParent(),this._bone1){this.mesh=e;var r=i.getPosition();if(i.getAbsoluteTransform().determinant()>0&&(this._rightHandedSystem=!0,this._bendAxis.x=0,this._bendAxis.y=0,this._bendAxis.z=-1,r.x>r.y&&r.x>r.z&&(this._adjustRoll=.5*Math.PI,this._bendAxis.z=1)),this._bone1.length){var o=this._bone1.getScale(),s=this._bone2.getScale();this._bone1Length=this._bone1.length*o.y*this.mesh.scaling.y,this._bone2Length=this._bone2.length*s.y*this.mesh.scaling.y}else if(this._bone1.children[0]){e.computeWorldMatrix(!0);var a=this._bone2.children[0].getAbsolutePosition(e),l=this._bone2.getAbsolutePosition(e),c=this._bone1.getAbsolutePosition(e);this._bone1Length=t.Vector3.Distance(a,l),this._bone2Length=t.Vector3.Distance(l,c)}this._bone1.getRotationMatrixToRef(t.Space.WORLD,e,this._bone1Mat),this.maxAngle=Math.PI,n&&(n.targetMesh&&(this.targetMesh=n.targetMesh,this.targetMesh.computeWorldMatrix(!0)),n.poleTargetMesh?(this.poleTargetMesh=n.poleTargetMesh,this.poleTargetMesh.computeWorldMatrix(!0)):n.poleTargetBone?this.poleTargetBone=n.poleTargetBone:this._bone1.getParent()&&(this.poleTargetBone=this._bone1.getParent()),n.poleTargetLocalOffset&&this.poleTargetLocalOffset.copyFrom(n.poleTargetLocalOffset),n.poleAngle&&(this.poleAngle=n.poleAngle),n.bendAxis&&this._bendAxis.copyFrom(n.bendAxis),n.maxAngle&&(this.maxAngle=n.maxAngle),n.slerpAmount&&(this.slerpAmount=n.slerpAmount))}}return Object.defineProperty(e.prototype,"maxAngle",{get:function(){return this._maxAngle},set:function(t){this._setMaxAngle(t)},enumerable:!0,configurable:!0}),e.prototype._setMaxAngle=function(t){t<0&&(t=0),(t>Math.PI||null==t)&&(t=Math.PI),this._maxAngle=t;var e=this._bone1Length,i=this._bone2Length;this._maxReach=Math.sqrt(e*e+i*i-2*e*i*Math.cos(t))},e.prototype.update=function(){var i=this._bone1;if(i){var n=this.targetPosition,r=this.poleTargetPosition,o=e._tmpMats[0],s=e._tmpMats[1];this.targetMesh&&n.copyFrom(this.targetMesh.getAbsolutePosition()),this.poleTargetBone?this.poleTargetBone.getAbsolutePositionFromLocalToRef(this.poleTargetLocalOffset,this.mesh,r):this.poleTargetMesh&&t.Vector3.TransformCoordinatesToRef(this.poleTargetLocalOffset,this.poleTargetMesh.getWorldMatrix(),r);var a=e._tmpVecs[0],l=e._tmpVecs[1],c=e._tmpVecs[2],u=e._tmpVecs[3],h=e._tmpVecs[4],p=e._tmpQuat;i.getAbsolutePositionToRef(this.mesh,a),r.subtractToRef(a,h),0==h.x&&0==h.y&&0==h.z?h.y=1:h.normalize(),n.subtractToRef(a,u),u.normalize(),t.Vector3.CrossToRef(u,h,l),l.normalize(),t.Vector3.CrossToRef(u,l,c),c.normalize(),t.Matrix.FromXYZAxesToRef(c,u,l,o);var d=this._bone1Length,f=this._bone2Length,m=t.Vector3.Distance(a,n);this._maxReach>0&&(m=Math.min(this._maxReach,m));var g=(f*f+m*m-d*d)/(2*f*m),y=(m*m+d*d-f*f)/(2*m*d);g>1&&(g=1),y>1&&(y=1),g<-1&&(g=-1),y<-1&&(y=-1);var _=Math.acos(g),v=Math.acos(y),b=-_-v;if(this._rightHandedSystem)t.Matrix.RotationYawPitchRollToRef(0,0,this._adjustRoll,s),s.multiplyToRef(o,o),t.Matrix.RotationAxisToRef(this._bendAxis,v,s),s.multiplyToRef(o,o);else{var x=e._tmpVecs[5];x.copyFrom(this._bendAxis),x.x*=-1,t.Matrix.RotationAxisToRef(x,-v,s),s.multiplyToRef(o,o)}this.poleAngle&&(t.Matrix.RotationAxisToRef(u,this.poleAngle,s),o.multiplyToRef(s,o)),this._bone1&&(this.slerpAmount<1?(this._slerping||t.Quaternion.FromRotationMatrixToRef(this._bone1Mat,this._bone1Quat),t.Quaternion.FromRotationMatrixToRef(o,p),t.Quaternion.SlerpToRef(this._bone1Quat,p,this.slerpAmount,this._bone1Quat),b=this._bone2Ang*(1-this.slerpAmount)+b*this.slerpAmount,this._bone1.setRotationQuaternion(this._bone1Quat,t.Space.WORLD,this.mesh),this._slerping=!0):(this._bone1.setRotationMatrix(o,t.Space.WORLD,this.mesh),this._bone1Mat.copyFrom(o),this._slerping=!1)),this._bone2.setAxisAngle(this._bendAxis,b,t.Space.LOCAL),this._bone2Ang=b}},e._tmpVecs=[t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero()],e._tmpQuat=t.Quaternion.Identity(),e._tmpMats=[t.Matrix.Identity(),t.Matrix.Identity()],e}();t.BoneIKController=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r){if(this.upAxis=t.Vector3.Up(),this.upAxisSpace=t.Space.LOCAL,this.adjustYaw=0,this.adjustPitch=0,this.adjustRoll=0,this.slerpAmount=1,this._boneQuat=t.Quaternion.Identity(),this._slerping=!1,this._firstFrameSkipped=!1,this._fowardAxis=t.Vector3.Forward(),this.mesh=e,this.bone=i,this.target=n,r&&(r.adjustYaw&&(this.adjustYaw=r.adjustYaw),r.adjustPitch&&(this.adjustPitch=r.adjustPitch),r.adjustRoll&&(this.adjustRoll=r.adjustRoll),null!=r.maxYaw?this.maxYaw=r.maxYaw:this.maxYaw=Math.PI,null!=r.minYaw?this.minYaw=r.minYaw:this.minYaw=-Math.PI,null!=r.maxPitch?this.maxPitch=r.maxPitch:this.maxPitch=Math.PI,null!=r.minPitch?this.minPitch=r.minPitch:this.minPitch=-Math.PI,null!=r.slerpAmount&&(this.slerpAmount=r.slerpAmount),null!=r.upAxis&&(this.upAxis=r.upAxis),null!=r.upAxisSpace&&(this.upAxisSpace=r.upAxisSpace),null!=r.yawAxis||null!=r.pitchAxis)){var o=t.Axis.Y,s=t.Axis.X;null!=r.yawAxis&&(o=r.yawAxis.clone()).normalize(),null!=r.pitchAxis&&(s=r.pitchAxis.clone()).normalize();var a=t.Vector3.Cross(s,o);this._transformYawPitch=t.Matrix.Identity(),t.Matrix.FromXYZAxesToRef(s,o,a,this._transformYawPitch),this._transformYawPitchInv=this._transformYawPitch.clone(),this._transformYawPitch.invert()}i.getParent()||this.upAxisSpace!=t.Space.BONE||(this.upAxisSpace=t.Space.LOCAL)}return Object.defineProperty(e.prototype,"minYaw",{get:function(){return this._minYaw},set:function(t){this._minYaw=t,this._minYawSin=Math.sin(t),this._minYawCos=Math.cos(t),null!=this._maxYaw&&(this._midYawConstraint=.5*this._getAngleDiff(this._minYaw,this._maxYaw)+this._minYaw,this._yawRange=this._maxYaw-this._minYaw)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxYaw",{get:function(){return this._maxYaw},set:function(t){this._maxYaw=t,this._maxYawSin=Math.sin(t),this._maxYawCos=Math.cos(t),null!=this._minYaw&&(this._midYawConstraint=.5*this._getAngleDiff(this._minYaw,this._maxYaw)+this._minYaw,this._yawRange=this._maxYaw-this._minYaw)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPitch",{get:function(){return this._minPitch},set:function(t){this._minPitch=t,this._minPitchTan=Math.tan(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPitch",{get:function(){return this._maxPitch},set:function(t){this._maxPitch=t,this._maxPitchTan=Math.tan(t)},enumerable:!0,configurable:!0}),e.prototype.update=function(){if(this.slerpAmount<1&&!this._firstFrameSkipped)this._firstFrameSkipped=!0;else{var i=this.bone,n=e._tmpVecs[0];i.getAbsolutePositionToRef(this.mesh,n);var r=this.target,o=e._tmpMats[0],s=e._tmpMats[1],a=this.mesh,l=i.getParent(),c=e._tmpVecs[1];c.copyFrom(this.upAxis),this.upAxisSpace==t.Space.BONE&&l?(this._transformYawPitch&&t.Vector3.TransformCoordinatesToRef(c,this._transformYawPitchInv,c),l.getDirectionToRef(c,this.mesh,c)):this.upAxisSpace==t.Space.LOCAL&&(a.getDirectionToRef(c,c),1==a.scaling.x&&1==a.scaling.y&&1==a.scaling.z||c.normalize());var u=!1,h=!1;if(this._maxYaw==Math.PI&&this._minYaw==-Math.PI||(u=!0),this._maxPitch==Math.PI&&this._minPitch==-Math.PI||(h=!0),u||h){var p=e._tmpMats[2],d=e._tmpMats[3];if(this.upAxisSpace==t.Space.BONE&&1==c.y&&l)l.getRotationMatrixToRef(t.Space.WORLD,this.mesh,p);else if(this.upAxisSpace!=t.Space.LOCAL||1!=c.y||l){(m=e._tmpVecs[2]).copyFrom(this._fowardAxis),this._transformYawPitch&&t.Vector3.TransformCoordinatesToRef(m,this._transformYawPitchInv,m),l?l.getDirectionToRef(m,this.mesh,m):a.getDirectionToRef(m,m);var f=t.Vector3.Cross(c,m);f.normalize();var m=t.Vector3.Cross(f,c);t.Matrix.FromXYZAxesToRef(f,c,m,p)}else p.copyFrom(a.getWorldMatrix());p.invertToRef(d);var g=null;if(h){var y=e._tmpVecs[3];r.subtractToRef(n,y),t.Vector3.TransformCoordinatesToRef(y,d,y),g=Math.sqrt(y.x*y.x+y.z*y.z);var _=Math.atan2(y.y,g),v=_;_>this._maxPitch?(y.y=this._maxPitchTan*g,v=this._maxPitch):_<this._minPitch&&(y.y=this._minPitchTan*g,v=this._minPitch),_!=v&&(t.Vector3.TransformCoordinatesToRef(y,p,y),y.addInPlace(n),r=y)}if(u){y=e._tmpVecs[4];r.subtractToRef(n,y),t.Vector3.TransformCoordinatesToRef(y,d,y);var b=Math.atan2(y.x,y.z),x=b;if((b>this._maxYaw||b<this._minYaw)&&(null==g&&(g=Math.sqrt(y.x*y.x+y.z*y.z)),this._yawRange>Math.PI?this._isAngleBetween(b,this._maxYaw,this._midYawConstraint)?(y.z=this._maxYawCos*g,y.x=this._maxYawSin*g,x=this._maxYaw):this._isAngleBetween(b,this._midYawConstraint,this._minYaw)&&(y.z=this._minYawCos*g,y.x=this._minYawSin*g,x=this._minYaw):b>this._maxYaw?(y.z=this._maxYawCos*g,y.x=this._maxYawSin*g,x=this._maxYaw):b<this._minYaw&&(y.z=this._minYawCos*g,y.x=this._minYawSin*g,x=this._minYaw)),this._slerping&&this._yawRange>Math.PI){var A=e._tmpVecs[8];A.copyFrom(t.Axis.Z),this._transformYawPitch&&t.Vector3.TransformCoordinatesToRef(A,this._transformYawPitchInv,A);var w=e._tmpMats[4];this._boneQuat.toRotationMatrix(w),this.mesh.getWorldMatrix().multiplyToRef(w,w),t.Vector3.TransformCoordinatesToRef(A,w,A),t.Vector3.TransformCoordinatesToRef(A,d,A);var P=Math.atan2(A.x,A.z);if(this._getAngleBetween(P,b)>this._getAngleBetween(P,this._midYawConstraint)){null==g&&(g=Math.sqrt(y.x*y.x+y.z*y.z));var E=this._getAngleBetween(P,this._maxYaw);this._getAngleBetween(P,this._minYaw)<E?(x=P+.75*Math.PI,y.z=Math.cos(x)*g,y.x=Math.sin(x)*g):(x=P-.75*Math.PI,y.z=Math.cos(x)*g,y.x=Math.sin(x)*g)}}b!=x&&(t.Vector3.TransformCoordinatesToRef(y,p,y),y.addInPlace(n),r=y)}}var T=e._tmpVecs[5],S=e._tmpVecs[6],C=e._tmpVecs[7],O=e._tmpQuat;r.subtractToRef(n,T),T.normalize(),t.Vector3.CrossToRef(c,T,S),S.normalize(),t.Vector3.CrossToRef(T,S,C),C.normalize(),t.Matrix.FromXYZAxesToRef(S,C,T,o),0===S.x&&0===S.y&&0===S.z||0===C.x&&0===C.y&&0===C.z||0===T.x&&0===T.y&&0===T.z||((this.adjustYaw||this.adjustPitch||this.adjustRoll)&&(t.Matrix.RotationYawPitchRollToRef(this.adjustYaw,this.adjustPitch,this.adjustRoll,s),s.multiplyToRef(o,o)),this.slerpAmount<1?(this._slerping||this.bone.getRotationQuaternionToRef(t.Space.WORLD,this.mesh,this._boneQuat),this._transformYawPitch&&this._transformYawPitch.multiplyToRef(o,o),t.Quaternion.FromRotationMatrixToRef(o,O),t.Quaternion.SlerpToRef(this._boneQuat,O,this.slerpAmount,this._boneQuat),this.bone.setRotationQuaternion(this._boneQuat,t.Space.WORLD,this.mesh),this._slerping=!0):(this._transformYawPitch&&this._transformYawPitch.multiplyToRef(o,o),this.bone.setRotationMatrix(o,t.Space.WORLD,this.mesh),this._slerping=!1))}},e.prototype._getAngleDiff=function(t,e){var i=e-t;return(i%=2*Math.PI)>Math.PI?i-=2*Math.PI:i<-Math.PI&&(i+=2*Math.PI),i},e.prototype._getAngleBetween=function(t,e){var i=0;return(i=(t=(t%=2*Math.PI)<0?t+2*Math.PI:t)<(e=(e%=2*Math.PI)<0?e+2*Math.PI:e)?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},e.prototype._isAngleBetween=function(t,e,i){if(t=(t%=2*Math.PI)<0?t+2*Math.PI:t,(e=(e%=2*Math.PI)<0?e+2*Math.PI:e)<(i=(i%=2*Math.PI)<0?i+2*Math.PI:i)){if(t>e&&t<i)return!0}else if(t>i&&t<e)return!0;return!1},e._tmpVecs=[t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero()],e._tmpQuat=t.Quaternion.Identity(),e._tmpMats=[t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity(),t.Matrix.Identity()],e}();t.BoneLookController=e}(l||(l={})),function(t){var e=function(){function e(e,i,n){this.name=e,this.id=i,this.bones=new Array,this.needInitialSkinMatrix=!1,this._isDirty=!0,this._meshesWithPoseMatrix=new Array,this._identity=t.Matrix.Identity(),this._ranges={},this._lastAbsoluteTransformsUpdateId=-1,this.onBeforeComputeObservable=new t.Observable,this.bones=[],this._scene=n||t.Engine.LastCreatedScene,n.skeletons.push(this),this._isDirty=!0}return e.prototype.getTransformMatrices=function(t){return this.needInitialSkinMatrix&&t._bonesTransformMatrices?t._bonesTransformMatrices:(this._transformMatrices||this.prepare(),this._transformMatrices)},e.prototype.getScene=function(){return this._scene},e.prototype.toString=function(t){var e="Name: "+this.name+", nBones: "+this.bones.length;if(e+=", nAnimationRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),t){e+=", Ranges: {";var i=!0;for(var n in this._ranges)i&&(e+=", ",i=!1),e+=n;e+="}"}return e},e.prototype.getBoneIndexByName=function(t){for(var e=0,i=this.bones.length;e<i;e++)if(this.bones[e].name===t)return e;return-1},e.prototype.createAnimationRange=function(e,i,n){if(!this._ranges[e]){this._ranges[e]=new t.AnimationRange(e,i,n);for(var r=0,o=this.bones.length;r<o;r++)this.bones[r].animations[0]&&this.bones[r].animations[0].createRange(e,i,n)}},e.prototype.deleteAnimationRange=function(t,e){void 0===e&&(e=!0);for(var i=0,n=this.bones.length;i<n;i++)this.bones[i].animations[0]&&this.bones[i].animations[0].deleteRange(t,e);this._ranges[t]=null},e.prototype.getAnimationRange=function(t){return this._ranges[t]},e.prototype.getAnimationRanges=function(){var t,e=[],i=0;for(t in this._ranges)e[i]=this._ranges[t],i++;return e},e.prototype.copyAnimationRange=function(e,i,n){if(void 0===n&&(n=!1),this._ranges[i]||!e.getAnimationRange(i))return!1;var r,o,s=!0,a=this._getHighestAnimationFrame()+1,l={},c=e.bones;for(o=0,r=c.length;o<r;o++)l[c[o].name]=c[o];this.bones.length!==c.length&&(t.Tools.Warn("copyAnimationRange: this rig has "+this.bones.length+" bones, while source as "+c.length),s=!1);var u=n&&this.dimensionsAtRest&&e.dimensionsAtRest?this.dimensionsAtRest.divide(e.dimensionsAtRest):null;for(o=0,r=this.bones.length;o<r;o++){var h=this.bones[o].name,p=l[h];p?s=s&&this.bones[o].copyAnimationRange(p,i,a,n,u):(t.Tools.Warn("copyAnimationRange: not same rig, missing source bone "+h),s=!1)}var d=e.getAnimationRange(i);return d&&(this._ranges[i]=new t.AnimationRange(i,d.from+a,d.to+a)),s},e.prototype.returnToRest=function(){for(var t=0;t<this.bones.length;t++)this.bones[t].returnToRest()},e.prototype._getHighestAnimationFrame=function(){for(var t=0,e=0,i=this.bones.length;e<i;e++)if(this.bones[e].animations[0]){var n=this.bones[e].animations[0].getHighestFrame();t<n&&(t=n)}return t},e.prototype.beginAnimation=function(t,e,i,n){var r=this.getAnimationRange(t);return r?this._scene.beginAnimation(this,r.from,r.to,e,i,n):null},e.prototype._markAsDirty=function(){this._isDirty=!0},e.prototype._registerMeshWithPoseMatrix=function(t){this._meshesWithPoseMatrix.push(t)},e.prototype._unregisterMeshWithPoseMatrix=function(t){var e=this._meshesWithPoseMatrix.indexOf(t);e>-1&&this._meshesWithPoseMatrix.splice(e,1)},e.prototype._computeTransformMatrices=function(t,e){this.onBeforeComputeObservable.notifyObservers(this);for(var i=0;i<this.bones.length;i++){var n=this.bones[i],r=n.getParent();if(r?n.getLocalMatrix().multiplyToRef(r.getWorldMatrix(),n.getWorldMatrix()):e?n.getLocalMatrix().multiplyToRef(e,n.getWorldMatrix()):n.getWorldMatrix().copyFrom(n.getLocalMatrix()),-1!==n._index){var o=null===n._index?i:n._index;n.getInvertedAbsoluteTransform().multiplyToArray(n.getWorldMatrix(),t,16*o)}}this._identity.copyToArray(t,16*this.bones.length)},e.prototype.prepare=function(){if(this._isDirty){if(this.needInitialSkinMatrix)for(var e=0;e<this._meshesWithPoseMatrix.length;e++){var i=this._meshesWithPoseMatrix[e],n=i.getPoseMatrix();if(i._bonesTransformMatrices&&i._bonesTransformMatrices.length===16*(this.bones.length+1)||(i._bonesTransformMatrices=new Float32Array(16*(this.bones.length+1))),this._synchronizedWithMesh!==i){this._synchronizedWithMesh=i;for(var r=0;r<this.bones.length;r++){var o=this.bones[r];if(!o.getParent())o.getBaseMatrix().multiplyToRef(n,t.Tmp.Matrix[1]),o._updateDifferenceMatrix(t.Tmp.Matrix[1])}}this._computeTransformMatrices(i._bonesTransformMatrices,n)}else this._transformMatrices&&this._transformMatrices.length===16*(this.bones.length+1)||(this._transformMatrices=new Float32Array(16*(this.bones.length+1))),this._computeTransformMatrices(this._transformMatrices,null);this._isDirty=!1,this._scene._activeBones.addCount(this.bones.length,!1)}},e.prototype.getAnimatables=function(){if(!this._animatables||this._animatables.length!==this.bones.length){this._animatables=[];for(var t=0;t<this.bones.length;t++)this._animatables.push(this.bones[t])}return this._animatables},e.prototype.clone=function(i,n){var r=new e(i,n||i,this._scene);r.needInitialSkinMatrix=this.needInitialSkinMatrix;for(var o=0;o<this.bones.length;o++){var s=this.bones[o],a=null,l=s.getParent();if(l){var c=this.bones.indexOf(l);a=r.bones[c]}var u=new t.Bone(s.name,r,a,s.getBaseMatrix().clone(),s.getRestPose().clone());t.Tools.DeepCopy(s.animations,u.animations)}if(this._ranges)for(var h in r._ranges={},this._ranges){var p=this._ranges[h];p&&(r._ranges[h]=p.clone())}return this._isDirty=!0,r},e.prototype.enableBlending=function(t){void 0===t&&(t=.01),this.bones.forEach(function(e){e.animations.forEach(function(e){e.enableBlending=!0,e.blendingSpeed=t})})},e.prototype.dispose=function(){this._meshesWithPoseMatrix=[],this.getScene().stopAnimation(this),this.getScene().removeSkeleton(this)},e.prototype.serialize=function(){var t={};t.name=this.name,t.id=this.id,t.dimensionsAtRest=this.dimensionsAtRest,t.bones=[],t.needInitialSkinMatrix=this.needInitialSkinMatrix;for(var e=0;e<this.bones.length;e++){var i=this.bones[e],n=i.getParent(),r={parentBoneIndex:n?this.bones.indexOf(n):-1,name:i.name,matrix:i.getBaseMatrix().toArray(),rest:i.getRestPose().toArray()};for(var o in t.bones.push(r),i.length&&(r.length=i.length),i.animations&&i.animations.length>0&&(r.animation=i.animations[0].serialize()),t.ranges=[],this._ranges){var s=this._ranges[o];if(s){var a={};a.name=o,a.from=s.from,a.to=s.to,t.ranges.push(a)}}}return t},e.Parse=function(i,n){var r,o=new e(i.name,i.id,n);for(i.dimensionsAtRest&&(o.dimensionsAtRest=t.Vector3.FromArray(i.dimensionsAtRest)),o.needInitialSkinMatrix=i.needInitialSkinMatrix,r=0;r<i.bones.length;r++){var s=i.bones[r],a=null;s.parentBoneIndex>-1&&(a=o.bones[s.parentBoneIndex]);var l=s.rest?t.Matrix.FromArray(s.rest):null,c=new t.Bone(s.name,o,a,t.Matrix.FromArray(s.matrix),l);s.length&&(c.length=s.length),s.animation&&c.animations.push(t.Animation.Parse(s.animation))}if(i.ranges)for(r=0;r<i.ranges.length;r++){var u=i.ranges[r];o.createAnimationRange(u.name,u.from,u.to)}return o},e.prototype.computeAbsoluteTransforms=function(t){void 0===t&&(t=!1);var e=this._scene.getRenderId();(this._lastAbsoluteTransformsUpdateId!=e||t)&&(this.bones[0].computeAbsoluteTransforms(),this._lastAbsoluteTransformsUpdateId=e)},e.prototype.getPoseMatrix=function(){var t=null;return this._meshesWithPoseMatrix.length>0&&(t=this._meshesWithPoseMatrix[0].getPoseMatrix()),t},e.prototype.sortBones=function(){for(var t=new Array,e=new Array(this.bones.length),i=0;i<this.bones.length;i++)this._sortBones(i,t,e);this.bones=t},e.prototype._sortBones=function(t,e,i){if(!i[t]){i[t]=!0;var n=this.bones[t];void 0===n._index&&(n._index=t);var r=n.getParent();r&&this._sortBones(this.bones.indexOf(r),e,i),e.push(n)}},e}();t.Skeleton=e}(l||(l={})),function(t){var e=function(){function e(){this.x=t.Vector3.Zero(),this.y=t.Vector3.Zero(),this.z=t.Vector3.Zero(),this.xx=t.Vector3.Zero(),this.yy=t.Vector3.Zero(),this.zz=t.Vector3.Zero(),this.xy=t.Vector3.Zero(),this.yz=t.Vector3.Zero(),this.zx=t.Vector3.Zero()}return e.prototype.addAmbient=function(e){var i=new t.Vector3(e.r,e.g,e.b);this.xx=this.xx.add(i),this.yy=this.yy.add(i),this.zz=this.zz.add(i)},e.getSphericalPolynomialFromHarmonics=function(t){var i=new e;return i.x=t.L11.scale(1.02333),i.y=t.L1_1.scale(1.02333),i.z=t.L10.scale(1.02333),i.xx=t.L00.scale(.886277).subtract(t.L20.scale(.247708)).add(t.L22.scale(.429043)),i.yy=t.L00.scale(.886277).subtract(t.L20.scale(.247708)).subtract(t.L22.scale(.429043)),i.zz=t.L00.scale(.886277).add(t.L20.scale(.495417)),i.yz=t.L2_1.scale(.858086),i.zx=t.L21.scale(.858086),i.xy=t.L2_2.scale(.858086),i.scale(1/Math.PI),i},e.prototype.scale=function(t){this.x=this.x.scale(t),this.y=this.y.scale(t),this.z=this.z.scale(t),this.xx=this.xx.scale(t),this.yy=this.yy.scale(t),this.zz=this.zz.scale(t),this.yz=this.yz.scale(t),this.zx=this.zx.scale(t),this.xy=this.xy.scale(t)},e}();t.SphericalPolynomial=e;var i=function(){function e(){this.L00=t.Vector3.Zero(),this.L1_1=t.Vector3.Zero(),this.L10=t.Vector3.Zero(),this.L11=t.Vector3.Zero(),this.L2_2=t.Vector3.Zero(),this.L2_1=t.Vector3.Zero(),this.L20=t.Vector3.Zero(),this.L21=t.Vector3.Zero(),this.L22=t.Vector3.Zero()}return e.prototype.addLight=function(e,i,n){var r=new t.Vector3(i.r,i.g,i.b).scale(n);this.L00=this.L00.add(r.scale(.282095)),this.L1_1=this.L1_1.add(r.scale(.488603*e.y)),this.L10=this.L10.add(r.scale(.488603*e.z)),this.L11=this.L11.add(r.scale(.488603*e.x)),this.L2_2=this.L2_2.add(r.scale(1.092548*e.x*e.y)),this.L2_1=this.L2_1.add(r.scale(1.092548*e.y*e.z)),this.L21=this.L21.add(r.scale(1.092548*e.x*e.z)),this.L20=this.L20.add(r.scale(.315392*(3*e.z*e.z-1))),this.L22=this.L22.add(r.scale(.546274*(e.x*e.x-e.y*e.y)))},e.prototype.scale=function(t){this.L00=this.L00.scale(t),this.L1_1=this.L1_1.scale(t),this.L10=this.L10.scale(t),this.L11=this.L11.scale(t),this.L2_2=this.L2_2.scale(t),this.L2_1=this.L2_1.scale(t),this.L20=this.L20.scale(t),this.L21=this.L21.scale(t),this.L22=this.L22.scale(t)},e.prototype.convertIncidentRadianceToIrradiance=function(){this.L00=this.L00.scale(3.141593),this.L1_1=this.L1_1.scale(2.094395),this.L10=this.L10.scale(2.094395),this.L11=this.L11.scale(2.094395),this.L2_2=this.L2_2.scale(.785398),this.L2_1=this.L2_1.scale(.785398),this.L20=this.L20.scale(.785398),this.L21=this.L21.scale(.785398),this.L22=this.L22.scale(.785398)},e.prototype.convertIrradianceToLambertianRadiance=function(){this.scale(1/Math.PI)},e.getsphericalHarmonicsFromPolynomial=function(t){var i=new e;return i.L00=t.xx.scale(.376127).add(t.yy.scale(.376127)).add(t.zz.scale(.376126)),i.L1_1=t.y.scale(.977204),i.L10=t.z.scale(.977204),i.L11=t.x.scale(.977204),i.L2_2=t.xy.scale(1.16538),i.L2_1=t.yz.scale(1.16538),i.L20=t.zz.scale(1.34567).subtract(t.xx.scale(.672834)).subtract(t.yy.scale(.672834)),i.L21=t.zx.scale(1.16538),i.L22=t.xx.scale(1.16538).subtract(t.yy.scale(1.16538)),i.scale(Math.PI),i},e}();t.SphericalHarmonics=i}(l||(l={})),function(t){var e=function(){return function(t,e,i,n){this.name=t,this.worldAxisForNormal=e,this.worldAxisForFileX=i,this.worldAxisForFileY=n}}(),i=function(){function i(){}return i.ConvertCubeMapTextureToSphericalPolynomial=function(e){if(!e.isCube)return null;var i,n,r=e.getSize().width,o=e.readPixels(0),s=e.readPixels(1);e.isRenderTarget?(i=e.readPixels(3),n=e.readPixels(2)):(i=e.readPixels(2),n=e.readPixels(3));var a=e.readPixels(4),l=e.readPixels(5),c=e.gammaSpace,u=t.Engine.TEXTUREFORMAT_RGBA,h=t.Engine.TEXTURETYPE_UNSIGNED_INT;e.textureType&&e.textureType!==t.Engine.TEXTURETYPE_UNSIGNED_INT&&(h=t.Engine.TEXTURETYPE_FLOAT);var p={size:r,right:o,left:s,up:i,down:n,front:a,back:l,format:u,type:h,gammaSpace:c};return this.ConvertCubeMapToSphericalPolynomial(p)},i.ConvertCubeMapToSphericalPolynomial=function(e){for(var i=new t.SphericalHarmonics,n=0,r=2/e.size,o=r,s=.5*r-1,a=0;a<6;a++)for(var l=this.FileFaces[a],c=e[l.name],u=s,h=e.format===t.Engine.TEXTUREFORMAT_RGBA?4:3,p=0;p<e.size;p++){for(var d=s,f=0;f<e.size;f++){var m=l.worldAxisForFileX.scale(d).add(l.worldAxisForFileY.scale(u)).add(l.worldAxisForNormal);m.normalize();var g=Math.pow(1+d*d+u*u,-1.5),y=c[p*e.size*h+f*h+0],_=c[p*e.size*h+f*h+1],v=c[p*e.size*h+f*h+2];e.type===t.Engine.TEXTURETYPE_UNSIGNED_INT&&(y/=255,_/=255,v/=255),e.gammaSpace&&(y=Math.pow(t.Scalar.Clamp(y),t.ToLinearSpace),_=Math.pow(t.Scalar.Clamp(_),t.ToLinearSpace),v=Math.pow(t.Scalar.Clamp(v),t.ToLinearSpace));var b=new t.Color3(y,_,v);i.addLight(m,b,g),n+=g,d+=r}u+=o}var x=6*(4*Math.PI)/6/n;return i.scale(x),i.convertIncidentRadianceToIrradiance(),i.convertIrradianceToLambertianRadiance(),t.SphericalPolynomial.getSphericalPolynomialFromHarmonics(i)},i.FileFaces=[new e("right",new t.Vector3(1,0,0),new t.Vector3(0,0,-1),new t.Vector3(0,-1,0)),new e("left",new t.Vector3(-1,0,0),new t.Vector3(0,0,1),new t.Vector3(0,-1,0)),new e("up",new t.Vector3(0,1,0),new t.Vector3(1,0,0),new t.Vector3(0,0,1)),new e("down",new t.Vector3(0,-1,0),new t.Vector3(1,0,0),new t.Vector3(0,0,-1)),new e("front",new t.Vector3(0,0,1),new t.Vector3(1,0,0),new t.Vector3(0,-1,0)),new e("back",new t.Vector3(0,0,-1),new t.Vector3(-1,0,0),new t.Vector3(0,-1,0))],i}();t.CubeMapToSphericalPolynomialTools=i}(l||(l={})),function(t){var e=function(){function e(){}return e.ConvertPanoramaToCubemap=function(e,i,n,r){if(!e)throw"ConvertPanoramaToCubemap: input cannot be null";if(e.length!=i*n*3)throw"ConvertPanoramaToCubemap: input size is wrong";return{front:this.CreateCubemapTexture(r,this.FACE_FRONT,e,i,n),back:this.CreateCubemapTexture(r,this.FACE_BACK,e,i,n),left:this.CreateCubemapTexture(r,this.FACE_LEFT,e,i,n),right:this.CreateCubemapTexture(r,this.FACE_RIGHT,e,i,n),up:this.CreateCubemapTexture(r,this.FACE_UP,e,i,n),down:this.CreateCubemapTexture(r,this.FACE_DOWN,e,i,n),size:r,type:t.Engine.TEXTURETYPE_FLOAT,format:t.Engine.TEXTUREFORMAT_RGB,gammaSpace:!1}},e.CreateCubemapTexture=function(t,e,i,n,r){for(var o=new ArrayBuffer(t*t*4*3),s=new Float32Array(o),a=e[1].subtract(e[0]).scale(1/t),l=e[3].subtract(e[2]).scale(1/t),c=1/t,u=0,h=0;h<t;h++){for(var p=e[0],d=e[2],f=0;f<t;f++){var m=d.subtract(p).scale(u).add(p);m.normalize();var g=this.CalcProjectionSpherical(m,i,n,r);s[h*t*3+3*f+0]=g.r,s[h*t*3+3*f+1]=g.g,s[h*t*3+3*f+2]=g.b,p=p.add(a),d=d.add(l)}u+=c}return s},e.CalcProjectionSpherical=function(t,e,i,n){for(var r=Math.atan2(t.z,t.x),o=Math.acos(t.y);r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;var s=r/Math.PI,a=o/Math.PI;s=.5*s+.5;var l=Math.round(s*i);l<0?l=0:l>=i&&(l=i-1);var c=Math.round(a*n);c<0?c=0:c>=n&&(c=n-1);var u=n-c-1;return{r:e[u*i*3+3*l+0],g:e[u*i*3+3*l+1],b:e[u*i*3+3*l+2]}},e.FACE_FRONT=[new t.Vector3(-1,-1,-1),new t.Vector3(1,-1,-1),new t.Vector3(-1,1,-1),new t.Vector3(1,1,-1)],e.FACE_BACK=[new t.Vector3(1,-1,1),new t.Vector3(-1,-1,1),new t.Vector3(1,1,1),new t.Vector3(-1,1,1)],e.FACE_RIGHT=[new t.Vector3(1,-1,-1),new t.Vector3(1,-1,1),new t.Vector3(1,1,-1),new t.Vector3(1,1,1)],e.FACE_LEFT=[new t.Vector3(-1,-1,1),new t.Vector3(-1,-1,-1),new t.Vector3(-1,1,1),new t.Vector3(-1,1,-1)],e.FACE_DOWN=[new t.Vector3(-1,1,-1),new t.Vector3(1,1,-1),new t.Vector3(-1,1,1),new t.Vector3(1,1,1)],e.FACE_UP=[new t.Vector3(-1,-1,1),new t.Vector3(1,-1,1),new t.Vector3(-1,-1,-1),new t.Vector3(1,-1,-1)],e}();t.PanoramaToCubeMapTools=e}(l||(l={})),function(t){var e=function(){function e(){}return e.Ldexp=function(t,e){return e>1023?t*Math.pow(2,1023)*Math.pow(2,e-1023):e<-1074?t*Math.pow(2,-1074)*Math.pow(2,e+1074):t*Math.pow(2,e)},e.Rgbe2float=function(t,e,i,n,r,o){r>0?(r=this.Ldexp(1,r-136),t[o+0]=e*r,t[o+1]=i*r,t[o+2]=n*r):(t[o+0]=0,t[o+1]=0,t[o+2]=0)},e.readStringLine=function(t,e){for(var i="",n="",r=e;r<t.length-e&&"\n"!=(n=String.fromCharCode(t[r]));r++)i+=n;return i},e.RGBE_ReadHeader=function(t){var e,i,n=this.readStringLine(t,0);if("#"!=n[0]||"?"!=n[1])throw"Bad HDR Format.";var r=!1,o=!1,s=0;do{s+=n.length+1,"FORMAT=32-bit_rle_rgbe"==(n=this.readStringLine(t,s))?o=!0:0==n.length&&(r=!0)}while(!r);if(!o)throw"HDR Bad header format, unsupported FORMAT";s+=n.length+1,n=this.readStringLine(t,s);var a=/^\-Y (.*) \+X (.*)$/g.exec(n);if(!a||a.length<3)throw"HDR Bad header format, no size";if(i=parseInt(a[2]),e=parseInt(a[1]),i<8||i>32767)throw"HDR Bad header format, unsupported size";return{height:e,width:i,dataPosition:s+=n.length+1}},e.GetCubeMapTextureData=function(e,i){var n=new Uint8Array(e),r=this.RGBE_ReadHeader(n),o=this.RGBE_ReadPixels_RLE(n,r);return t.PanoramaToCubeMapTools.ConvertPanoramaToCubemap(o,r.width,r.height,i)},e.RGBE_ReadPixels=function(t,e){return this.RGBE_ReadPixels_RLE(t,e)},e.RGBE_ReadPixels_RLE=function(t,e){for(var i,n,r,o,s,a=e.height,l=e.width,c=e.dataPosition,u=0,h=0,p=0,d=new ArrayBuffer(4*l),f=new Uint8Array(d),m=new ArrayBuffer(e.width*e.height*4*3),g=new Float32Array(m);a>0;){if(i=t[c++],n=t[c++],r=t[c++],o=t[c++],2!=i||2!=n||128&r)throw"HDR Bad header format, not RLE";if((r<<8|o)!=l)throw"HDR Bad header format, wrong scan line width";for(u=0,p=0;p<4;p++)for(h=(p+1)*l;u<h;)if(i=t[c++],n=t[c++],i>128){if(0==(s=i-128)||s>h-u)throw"HDR Bad Format, bad scanline data (run)";for(;s-- >0;)f[u++]=n}else{if(0==(s=i)||s>h-u)throw"HDR Bad Format, bad scanline data (non-run)";if(f[u++]=n,--s>0)for(var y=0;y<s;y++)f[u++]=t[c++]}for(p=0;p<l;p++)i=f[p],n=f[p+l],r=f[p+2*l],o=f[p+3*l],this.Rgbe2float(g,i,n,r,o,(e.height-a)*l*3+3*p);a--}return g},e}();t.HDRTools=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c,u){void 0===o&&(o=!1),void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===l&&(l=!1),void 0===c&&(c=null),void 0===u&&(u=null);var h=e.call(this,n)||this;if(h._useInGammaSpace=!1,h._generateHarmonics=!0,h._isBABYLONPreprocessed=!1,h._onLoad=null,h._onError=null,h.coordinatesMode=t.Texture.CUBIC_MODE,h.isPMREM=!1,h._isBlocking=!0,!i)return h;h.name=i,h.url=i,h.hasAlpha=!1,h.isCube=!0,h._textureMatrix=t.Matrix.Identity(),h._onLoad=c,h._onError=u,h.gammaSpace=!1;var p=n.getEngine().getCaps();return r?(h._isBABYLONPreprocessed=!1,h._noMipmap=o,h._size=r,h._useInGammaSpace=a,h._usePMREMGenerator=l&&p.textureLOD&&p.textureFloat&&!h._useInGammaSpace):(h._isBABYLONPreprocessed=!0,h._noMipmap=!1,h._useInGammaSpace=!1,h._usePMREMGenerator=p.textureLOD&&p.textureFloat&&!h._useInGammaSpace),h.isPMREM=h._usePMREMGenerator,h._texture=h._getFromCache(i,h._noMipmap),h._texture||(n.useDelayedTextureLoading?h.delayLoadState=t.Engine.DELAYLOADSTATE_NOTLOADED:h.loadTexture()),h}return o(i,e),Object.defineProperty(i.prototype,"isBlocking",{get:function(){return this._isBlocking},set:function(t){this._isBlocking=t},enumerable:!0,configurable:!0}),i.prototype.loadBabylonTexture=function(){var e=this,i=0,n=null,r=this.getScene(),o=!this._useInGammaSpace&&r&&r.getEngine().getCaps().textureFloat?function(t){var r=new Array;if(!n)return r;for(var o=30,s=0;s<i;s++){r.push([]);for(var a=3*Math.pow(e._size>>s,2),l=0;l<6;l++){var c=n.subarray(o,o+a);r[s].push(c),o+=a}}return r}:null;r&&(this._texture=r.getEngine().createRawCubeTextureFromUrl(this.url,r,this._size,t.Engine.TEXTUREFORMAT_RGB,r.getEngine().getCaps().textureFloat?t.Engine.TEXTURETYPE_FLOAT:t.Engine.TEXTURETYPE_UNSIGNED_INT,this._noMipmap,function(r){var s=e.getScene();if(!s)return null;var a=new Int32Array(r);n=new Float32Array(r);var l=a[0];if(e._size=a[1],!e._texture)return null;e._texture.updateSize(e._size,e._size);var c=new t.SphericalPolynomial;c.x.copyFromFloats(n[2],n[3],n[4]),c.y.copyFromFloats(n[5],n[6],n[7]),c.z.copyFromFloats(n[8],n[9],n[10]),c.xx.copyFromFloats(n[11],n[12],n[13]),c.yy.copyFromFloats(n[14],n[15],n[16]),c.zz.copyFromFloats(n[17],n[18],n[19]),c.xy.copyFromFloats(n[20],n[21],n[22]),c.yz.copyFromFloats(n[23],n[24],n[25]),c.zx.copyFromFloats(n[26],n[27],n[28]),e.sphericalPolynomial=c,i=a[29];for(var u=30,h=[],p=3*Math.pow(e._size,2),d=0;d<6;d++)h.push(n.subarray(u,u+p)),u+=p;for(var f=[],m=null,g=0;g<6;g++){var y=null;if(1===l&&(y=h[[0,2,4,1,3,5][g]]),!o&&y){if(!s.getEngine().getCaps().textureFloat){var _=new ArrayBuffer(p);m=new Uint8Array(_)}for(var v=0;v<e._size*e._size;v++)if(e._useInGammaSpace&&(y[3*v+0]=Math.pow(y[3*v+0],t.ToGammaSpace),y[3*v+1]=Math.pow(y[3*v+1],t.ToGammaSpace),y[3*v+2]=Math.pow(y[3*v+2],t.ToGammaSpace)),m){var b=Math.max(255*y[3*v+0],0),x=Math.max(255*y[3*v+1],0),A=Math.max(255*y[3*v+2],0),w=Math.max(Math.max(b,x),A);if(w>255){var P=255/w;b*=P,x*=P,A*=P}m[3*v+0]=b,m[3*v+1]=x,m[3*v+2]=A}}m?f.push(m):f.push(y)}return f},o,this._onLoad,this._onError))},i.prototype.loadHDRTexture=function(){var e=this,n=this.getScene();n&&(this._texture=n.getEngine().createRawCubeTextureFromUrl(this.url,n,this._size,t.Engine.TEXTUREFORMAT_RGB,n.getEngine().getCaps().textureFloat?t.Engine.TEXTURETYPE_FLOAT:t.Engine.TEXTURETYPE_UNSIGNED_INT,this._noMipmap,function(n){var r=e.getScene();if(!r)return null;var o=t.HDRTools.GetCubeMapTextureData(n,e._size);if(e._generateHarmonics){var s=t.CubeMapToSphericalPolynomialTools.ConvertCubeMapToSphericalPolynomial(o);e.sphericalPolynomial=s}for(var a=[],l=null,c=0;c<6;c++){if(!r.getEngine().getCaps().textureFloat){var u=new ArrayBuffer(e._size*e._size*3);l=new Uint8Array(u)}var h=o[i._facesMapping[c]];if(e._useInGammaSpace||l)for(var p=0;p<e._size*e._size;p++)if(e._useInGammaSpace&&(h[3*p+0]=Math.pow(h[3*p+0],t.ToGammaSpace),h[3*p+1]=Math.pow(h[3*p+1],t.ToGammaSpace),h[3*p+2]=Math.pow(h[3*p+2],t.ToGammaSpace)),l){var d=Math.max(255*h[3*p+0],0),f=Math.max(255*h[3*p+1],0),m=Math.max(255*h[3*p+2],0),g=Math.max(Math.max(d,f),m);if(g>255){var y=255/g;d*=y,f*=y,m*=y}l[3*p+0]=d,l[3*p+1]=f,l[3*p+2]=m}l?a.push(l):a.push(h)}return a},null,this._onLoad,this._onError))},i.prototype.loadTexture=function(){this._isBABYLONPreprocessed?this.loadBabylonTexture():this.loadHDRTexture()},i.prototype.clone=function(){var t=this.getScene();if(!t)return this;var e=this._isBABYLONPreprocessed?null:this._size,n=new i(this.url,t,e,this._noMipmap,this._generateHarmonics,this._useInGammaSpace,this._usePMREMGenerator);return n.level=this.level,n.wrapU=this.wrapU,n.wrapV=this.wrapV,n.coordinatesIndex=this.coordinatesIndex,n.coordinatesMode=this.coordinatesMode,n},i.prototype.delayLoad=function(){this.delayLoadState===t.Engine.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=t.Engine.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap),this._texture||this.loadTexture())},i.prototype.getReflectionTextureMatrix=function(){return this._textureMatrix},i.prototype.setReflectionTextureMatrix=function(t){this._textureMatrix=t},i.Parse=function(t,e,n){var r=null;if(t.name&&!t.isRenderTarget){var o=t.isBABYLONPreprocessed?null:t.size;(r=new i(n+t.name,e,o,t.noMipmap,t.generateHarmonics,t.useInGammaSpace,t.usePMREMGenerator)).name=t.name,r.hasAlpha=t.hasAlpha,r.level=t.level,r.coordinatesMode=t.coordinatesMode,r.isBlocking=t.isBlocking}return r},i.prototype.serialize=function(){if(!this.name)return null;var t={};return t.name=this.name,t.hasAlpha=this.hasAlpha,t.isCube=!0,t.level=this.level,t.size=this._size,t.coordinatesMode=this.coordinatesMode,t.useInGammaSpace=this._useInGammaSpace,t.generateHarmonics=this._generateHarmonics,t.usePMREMGenerator=this._usePMREMGenerator,t.isBABYLONPreprocessed=this._isBABYLONPreprocessed,t.customType="BABYLON.HDRCubeTexture",t.noMipmap=this._noMipmap,t.isBlocking=this._isBlocking,t},i.generateBabylonHDROnDisk=function(t,e,n){void 0===n&&(n=null);i.generateBabylonHDR(t,e,function(t){var e=new Blob([t],{type:"application/octet-stream"}),i=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=i,n.download="envmap.babylon.hdr",n.click()},n)},i.generateBabylonHDR=function(e,i,n,r){void 0===r&&(r=null),e&&t.Tools.IsExponentOfTwo(i)&&t.Tools.Error("Generation of Babylon HDR is coming back in 3.2.")},i._facesMapping=["right","left","up","down","front","back"],i}(t.BaseTexture);t.HDRCubeTexture=e}(l||(l={})),function(t){function e(t,e,i,n,r){var o,s=null;if(r===w(t,e,i,n)>0)for(o=e;o<i;o+=n)s=x(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=x(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(A(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!y(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(A(n),(n=e=n.prev)===n.next)return;i=!0}}while(i||n!==e);return e}function n(t,e,l,c,u,p,d){if(t){!d&&p&&h(t,c,u,p);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,p?o(t,c,u,p):r(t))e.push(f.i/l),e.push(t.i/l),e.push(m.i/l),A(t),t=m.next,g=m.next;else if((t=m)===g){d?1===d?n(t=s(t,e,l),e,l,c,u,p,2):2===d&&a(t,e,l,c,u,p):n(i(t,void 0),e,l,c,u,p,1);break}}}function r(t){var e=t.prev,i=t,n=t.next;if(g(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(f(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,i,n){var r=t.prev,o=t,s=t.next;if(g(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=p(a,l,e,i,n),d=p(c,u,e,i,n),m=t.nextZ;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(m=t.prevZ;m&&m.z>=h;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}return!0}function s(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!y(r,o)&&_(r,n,n.next,o)&&v(r,o)&&v(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),A(n),A(n.next),n=t=o),n=n.next}while(n!==t);return n}function a(t,e,r,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=b(l,c);return l=i(l,l.next),u=i(u,u.next),n(l,e,r,o,s,a,void 0),void n(u,e,r,o,s,a,void 0)}c=c.next}l=l.next}while(l!==t)}function l(t,n,r,o){var s,a,l,h=[];for(s=0,a=n.length;s<a;s++)(l=e(t,n[s]*o,s<a-1?n[s+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),h.push(d(l));for(h.sort(c),s=0;s<h.length;s++)u(h[s],r),r=i(r,r.next);return r}function c(t,e){return t.x-e.x}function u(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i.prev;var l,c=i,u=i.x,h=i.y,p=1/0;for(n=i.next;n!==c;)r>=n.x&&n.x>=u&&f(o<h?r:s,o,u,h,o<h?s:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<p||l===p&&n.x>i.x)&&v(n,t)&&(i=n,p=l),n=n.next;return i}(t,e)){var n=b(e,t);i(n,n.next)}}function h(t,e,i,n){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,l,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<c&&(a++,n=n.nextZ);e++);for(l=c;a>0||l>0&&n;)0===a?(r=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,a--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(s>1)}(r)}function p(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&v(t,e)&&v(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,n){return!!(y(t,e)&&y(i,n)||y(t,n)&&y(i,e))||g(t,e,i)>0!=g(t,e,n)>0&&g(i,n,t)>0!=g(i,n,e)>0}function v(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function b(t,e){var i=new P(t.i,t.x,t.y),n=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function x(t,e,i,n){var r=new P(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.earcut=function(t,i,r){r=r||2;var o=i&&i.length,s=o?i[0]*r:t.length,a=e(t,0,s,r,!0),c=new Array;if(!a)return c;var u,h,p,d,f=0,m=0,g=0;if(o&&(a=l(t,i,a,r)),t.length>80*r){f=u=t[0],m=h=t[1];for(var y=r;y<s;y+=r)(p=t[y])<f&&(f=p),(d=t[y+1])<m&&(m=d),p>u&&(u=p),d>h&&(h=d);g=Math.max(u-f,h-m)}return n(a,c,r,f,m,g,0),c};var P=function(){return function(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}();t.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(w(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*i,u=a<l-1?e[a+1]*i:t.length;s-=Math.abs(w(t,c,u,i))}var h=0;for(a=0;a<n.length;a+=3){var p=n[a]*i,d=n[a+1]*i,f=n[a+2]*i;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,i={vertices:new Array,holes:new Array,dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}}(a||(a={})),function(t){var e=function(t){function e(e,i){var n=t.call(this,e.x,e.y)||this;return n.index=i,n}return o(e,t),e}(t.Vector2),i=function(){function i(){this.elements=new Array}return i.prototype.add=function(t){var i=this,n=new Array;return t.forEach(function(t){if(0===n.length||!t.equalsWithEpsilon(n[0])){var r=new e(t,i.elements.length);n.push(r),i.elements.push(r)}}),n},i.prototype.computeBounds=function(){var e=new t.Vector2(this.elements[0].x,this.elements[0].y),i=new t.Vector2(this.elements[0].x,this.elements[0].y);return this.elements.forEach(function(t){t.x<e.x?e.x=t.x:t.x>i.x&&(i.x=t.x),t.y<e.y?e.y=t.y:t.y>i.y&&(i.y=t.y)}),{min:e,max:i,width:i.x-e.x,height:i.y-e.y}},i}(),n=function(){function e(){}return e.Rectangle=function(e,i,n,r){return[new t.Vector2(e,i),new t.Vector2(n,i),new t.Vector2(n,r),new t.Vector2(e,r)]},e.Circle=function(e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=32);for(var o=new Array,s=0,a=2*Math.PI/r,l=0;l<r;l++)o.push(new t.Vector2(i+Math.cos(s)*e,n+Math.sin(s)*e)),s-=a;return o},e.Parse=function(e){var i,n=e.split(/[^-+eE\.\d]+/).map(parseFloat).filter(function(t){return!isNaN(t)}),r=[];for(i=0;i<(2147483646&n.length);i+=2)r.push(new t.Vector2(n[i],n[i+1]));return r},e.StartingAt=function(e,i){return t.Path2.StartingAt(e,i)},e}();t.Polygon=n;var r=function(){function e(e,n,r){var o;this._points=new i,this._outlinepoints=new i,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this._name=e,this._scene=r,o=n instanceof t.Path2?n.getPoints():n,this._addToepoint(o),this._points.add(o),this._outlinepoints.add(o)}return e.prototype._addToepoint=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this._epoints.push(n.x,n.y)}},e.prototype.addHole=function(t){this._points.add(t);var e=new i;return e.add(t),this._holes.push(e),this._eholes.push(this._epoints.length/2),this._addToepoint(t),this},e.prototype.build=function(e,i){var n=this;void 0===e&&(e=!1),void 0===i&&(i=0);var r=new t.Mesh(this._name,this._scene),o=new Array,s=new Array,l=new Array,c=this._points.computeBounds();this._points.elements.forEach(function(t){o.push(0,1,0),s.push(t.x,0,t.y),l.push((t.x-c.min.x)/c.width,(t.y-c.min.y)/c.height)});for(var u=new Array,h=a.earcut(this._epoints,this._eholes,2),p=0;p<h.length;p++)u.push(h[p]);if(i>0){var d=s.length/3;this._points.elements.forEach(function(t){o.push(0,-1,0),s.push(t.x,-i,t.y),l.push(1-(t.x-c.min.x)/c.width,1-(t.y-c.min.y)/c.height)});var f=u.length;for(p=0;p<f;p+=3){var m=u[p+0],g=u[p+1],y=u[p+2];u.push(y+d),u.push(g+d),u.push(m+d)}this.addSide(s,o,l,u,c,this._outlinepoints,i,!1),this._holes.forEach(function(t){n.addSide(s,o,l,u,c,t,i,!0)})}return r.setVerticesData(t.VertexBuffer.PositionKind,s,e),r.setVerticesData(t.VertexBuffer.NormalKind,o,e),r.setVerticesData(t.VertexBuffer.UVKind,l,e),r.setIndices(u),r},e.prototype.addSide=function(e,i,n,r,o,s,a,l){for(var c=e.length/3,u=0,h=0;h<s.elements.length;h++){var p,d=s.elements[h];p=h+1>s.elements.length-1?s.elements[0]:s.elements[h+1],e.push(d.x,0,d.y),e.push(d.x,-a,d.y),e.push(p.x,0,p.y),e.push(p.x,-a,p.y);var f=new t.Vector3(d.x,0,d.y),m=new t.Vector3(p.x,0,p.y).subtract(f),g=new t.Vector3(0,1,0),y=t.Vector3.Cross(m,g);y=y.normalize(),n.push(u/o.width,0),n.push(u/o.width,1),u+=m.length(),n.push(u/o.width,0),n.push(u/o.width,1),l?(i.push(y.x,y.y,y.z),i.push(y.x,y.y,y.z),i.push(y.x,y.y,y.z),i.push(y.x,y.y,y.z),r.push(c),r.push(c+2),r.push(c+1),r.push(c+1),r.push(c+2),r.push(c+3)):(i.push(-y.x,-y.y,-y.z),i.push(-y.x,-y.y,-y.z),i.push(-y.x,-y.y,-y.z),i.push(-y.x,-y.y,-y.z),r.push(c),r.push(c+1),r.push(c+2),r.push(c+1),r.push(c+3),r.push(c+2)),c+=4}},e}();t.PolygonMeshBuilder=r}(l||(l={})),function(t){var e=0,i=function(){function e(t,e,i){this.pos=t,this.normal=e,this.uv=i}return e.prototype.clone=function(){return new e(this.pos.clone(),this.normal.clone(),this.uv.clone())},e.prototype.flip=function(){this.normal=this.normal.scale(-1)},e.prototype.interpolate=function(i,n){return new e(t.Vector3.Lerp(this.pos,i.pos,n),t.Vector3.Lerp(this.normal,i.normal,n),t.Vector2.Lerp(this.uv,i.uv,n))},e}(),n=function(){function e(t,e){this.normal=t,this.w=e}return e.FromPoints=function(i,n,r){var o=r.subtract(i),s=n.subtract(i);if(0===o.lengthSquared()||0===s.lengthSquared())return null;var a=t.Vector3.Normalize(t.Vector3.Cross(o,s));return new e(a,t.Vector3.Dot(a,i))},e.prototype.clone=function(){return new e(this.normal.clone(),this.w)},e.prototype.flip=function(){this.normal.scaleInPlace(-1),this.w=-this.w},e.prototype.splitPolygon=function(i,n,o,s,a){var l,c,u=0,h=[];for(l=0;l<i.vertices.length;l++){var p=(c=t.Vector3.Dot(this.normal,i.vertices[l].pos)-this.w)<-e.EPSILON?2:c>e.EPSILON?1:0;u|=p,h.push(p)}switch(u){case 0:(t.Vector3.Dot(this.normal,i.plane.normal)>0?n:o).push(i);break;case 1:s.push(i);break;case 2:a.push(i);break;case 3:var d,f=[],m=[];for(l=0;l<i.vertices.length;l++){var g=(l+1)%i.vertices.length,y=h[l],_=h[g],v=i.vertices[l],b=i.vertices[g];if(2!==y&&f.push(v),1!==y&&m.push(2!==y?v.clone():v),3==(y|_)){c=(this.w-t.Vector3.Dot(this.normal,v.pos))/t.Vector3.Dot(this.normal,b.pos.subtract(v.pos));var x=v.interpolate(b,c);f.push(x),m.push(x.clone())}}f.length>=3&&((d=new r(f,i.shared)).plane&&s.push(d)),m.length>=3&&((d=new r(m,i.shared)).plane&&a.push(d))}},e.EPSILON=1e-5,e}(),r=function(){function t(t,e){this.vertices=t,this.shared=e,this.plane=n.FromPoints(t[0].pos,t[1].pos,t[2].pos)}return t.prototype.clone=function(){return new t(this.vertices.map(function(t){return t.clone()}),this.shared)},t.prototype.flip=function(){this.vertices.reverse().map(function(t){t.flip()}),this.plane.flip()},t}(),o=function(){function t(t){this.plane=null,this.front=null,this.back=null,this.polygons=new Array,t&&this.build(t)}return t.prototype.clone=function(){var e=new t;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(function(t){return t.clone()}),e},t.prototype.invert=function(){for(var t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var e=this.front;this.front=this.back,this.back=e},t.prototype.clipPolygons=function(t){if(!this.plane)return t.slice();for(var e=new Array,i=new Array,n=0;n<t.length;n++)this.plane.splitPolygon(t[n],e,i,e,i);return this.front&&(e=this.front.clipPolygons(e)),i=this.back?this.back.clipPolygons(i):[],e.concat(i)},t.prototype.clipTo=function(t){this.polygons=t.clipPolygons(this.polygons),this.front&&this.front.clipTo(t),this.back&&this.back.clipTo(t)},t.prototype.allPolygons=function(){var t=this.polygons.slice();return this.front&&(t=t.concat(this.front.allPolygons())),this.back&&(t=t.concat(this.back.allPolygons())),t},t.prototype.build=function(e){if(e.length){this.plane||(this.plane=e[0].plane.clone());for(var i=new Array,n=new Array,r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,i,n);i.length&&(this.front||(this.front=new t),this.front.build(i)),n.length&&(this.back||(this.back=new t),this.back.build(n))}},t}(),s=function(){function n(){this.polygons=new Array}return n.FromMesh=function(o){var s,a,l,c,u,h,p,d,f,m,g=new Array,y=null;if(!(o instanceof t.Mesh))throw"BABYLON.CSG: Wrong Mesh type, must be BABYLON.Mesh";o.computeWorldMatrix(!0),p=o.getWorldMatrix(),d=o.position.clone(),f=o.rotation.clone(),o.rotationQuaternion&&(y=o.rotationQuaternion.clone()),m=o.scaling.clone();for(var _=o.getIndices(),v=o.getVerticesData(t.VertexBuffer.PositionKind),b=o.getVerticesData(t.VertexBuffer.NormalKind),x=o.getVerticesData(t.VertexBuffer.UVKind),A=o.subMeshes,w=0,P=A.length;w<P;w++)for(var E=A[w].indexStart,T=A[w].indexCount+A[w].indexStart;E<T;E+=3){h=[];for(var S=0;S<3;S++){var C=new t.Vector3(b[3*_[E+S]],b[3*_[E+S]+1],b[3*_[E+S]+2]);l=new t.Vector2(x[2*_[E+S]],x[2*_[E+S]+1]);var O=new t.Vector3(v[3*_[E+S]],v[3*_[E+S]+1],v[3*_[E+S]+2]);c=t.Vector3.TransformCoordinates(O,p),a=t.Vector3.TransformNormal(C,p),s=new i(c,a,l),h.push(s)}(u=new r(h,{subMeshId:w,meshId:e,materialIndex:A[w].materialIndex})).plane&&g.push(u)}var M=n.FromPolygons(g);return M.matrix=p,M.position=d,M.rotation=f,M.scaling=m,M.rotationQuaternion=y,e++,M},n.FromPolygons=function(t){var e=new n;return e.polygons=t,e},n.prototype.clone=function(){var t=new n;return t.polygons=this.polygons.map(function(t){return t.clone()}),t.copyTransformAttributes(this),t},n.prototype.union=function(t){var e=new o(this.clone().polygons),i=new o(t.clone().polygons);return e.clipTo(i),i.clipTo(e),i.invert(),i.clipTo(e),i.invert(),e.build(i.allPolygons()),n.FromPolygons(e.allPolygons()).copyTransformAttributes(this)},n.prototype.unionInPlace=function(t){var e=new o(this.polygons),i=new o(t.polygons);e.clipTo(i),i.clipTo(e),i.invert(),i.clipTo(e),i.invert(),e.build(i.allPolygons()),this.polygons=e.allPolygons()},n.prototype.subtract=function(t){var e=new o(this.clone().polygons),i=new o(t.clone().polygons);return e.invert(),e.clipTo(i),i.clipTo(e),i.invert(),i.clipTo(e),i.invert(),e.build(i.allPolygons()),e.invert(),n.FromPolygons(e.allPolygons()).copyTransformAttributes(this)},n.prototype.subtractInPlace=function(t){var e=new o(this.polygons),i=new o(t.polygons);e.invert(),e.clipTo(i),i.clipTo(e),i.invert(),i.clipTo(e),i.invert(),e.build(i.allPolygons()),e.invert(),this.polygons=e.allPolygons()},n.prototype.intersect=function(t){var e=new o(this.clone().polygons),i=new o(t.clone().polygons);return e.invert(),i.clipTo(e),i.invert(),e.clipTo(i),i.clipTo(e),e.build(i.allPolygons()),e.invert(),n.FromPolygons(e.allPolygons()).copyTransformAttributes(this)},n.prototype.intersectInPlace=function(t){var e=new o(this.polygons),i=new o(t.polygons);e.invert(),i.clipTo(e),i.invert(),e.clipTo(i),i.clipTo(e),e.build(i.allPolygons()),e.invert(),this.polygons=e.allPolygons()},n.prototype.inverse=function(){var t=this.clone();return t.inverseInPlace(),t},n.prototype.inverseInPlace=function(){this.polygons.map(function(t){t.flip()})},n.prototype.copyTransformAttributes=function(t){return this.matrix=t.matrix,this.position=t.position,this.rotation=t.rotation,this.scaling=t.scaling,this.rotationQuaternion=t.rotationQuaternion,this},n.prototype.buildMeshGeometry=function(e,i,n){var r=this.matrix.clone();r.invert();var o,s,a,l=new t.Mesh(e,i),c=[],u=[],h=[],p=[],d=t.Vector3.Zero(),f=t.Vector3.Zero(),m=t.Vector2.Zero(),g=this.polygons,y=[0,0,0],_={},v=0,b={};n&&g.sort(function(t,e){return t.shared.meshId===e.shared.meshId?t.shared.subMeshId-e.shared.subMeshId:t.shared.meshId-e.shared.meshId});for(var x=0,A=g.length;x<A;x++){b[(o=g[x]).shared.meshId]||(b[o.shared.meshId]={}),b[o.shared.meshId][o.shared.subMeshId]||(b[o.shared.meshId][o.shared.subMeshId]={indexStart:1/0,indexEnd:-1/0,materialIndex:o.shared.materialIndex}),a=b[o.shared.meshId][o.shared.subMeshId];for(var w=2,P=o.vertices.length;w<P;w++){y[0]=0,y[1]=w-1,y[2]=w;for(var E=0;E<3;E++){d.copyFrom(o.vertices[y[E]].pos),f.copyFrom(o.vertices[y[E]].normal),m.copyFrom(o.vertices[y[E]].uv);var T=t.Vector3.TransformCoordinates(d,r),S=t.Vector3.TransformNormal(f,r);void 0!==(s=_[T.x+","+T.y+","+T.z])&&h[3*s]===S.x&&h[3*s+1]===S.y&&h[3*s+2]===S.z&&p[2*s]===m.x&&p[2*s+1]===m.y||(c.push(T.x,T.y,T.z),p.push(m.x,m.y),h.push(f.x,f.y,f.z),s=_[T.x+","+T.y+","+T.z]=c.length/3-1),u.push(s),a.indexStart=Math.min(v,a.indexStart),a.indexEnd=Math.max(v,a.indexEnd),v++}}}if(l.setVerticesData(t.VertexBuffer.PositionKind,c),l.setVerticesData(t.VertexBuffer.NormalKind,h),l.setVerticesData(t.VertexBuffer.UVKind,p),l.setIndices(u,null),n){var C,O=0;for(var M in l.subMeshes=new Array,b){for(var R in C=-1,b[M])a=b[M][R],t.SubMesh.CreateFromIndices(a.materialIndex+O,a.indexStart,a.indexEnd-a.indexStart+1,l),C=Math.max(a.materialIndex,C);O+=++C}}return l},n.prototype.toMesh=function(t,e,i,n){var r=this.buildMeshGeometry(t,i,n);return r.material=e,r.position.copyFrom(this.position),r.rotation.copyFrom(this.rotation),this.rotationQuaternion&&(r.rotationQuaternion=this.rotationQuaternion.clone()),r.scaling.copyFrom(this.scaling),r.computeWorldMatrix(!0),r},n}();t.CSG=s}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o){this.size=e,this.position=i,this.alphaMode=t.Engine.ALPHA_ONEONE,this.color=n||new t.Color3(1,1,1),this.texture=r?new t.Texture(r,o.getScene(),!0):null,this._system=o,o.lensFlares.push(this)}return e.AddFlare=function(t,i,n,r,o){return new e(t,i,n,r,o)},e.prototype.dispose=function(){this.texture&&this.texture.dispose();var t=this._system.lensFlares.indexOf(this);this._system.lensFlares.splice(t,1)},e}();t.LensFlare=e}(l||(l={})),function(t){var e=function(){function e(e,i,n){this.name=e,this.lensFlares=new Array,this.borderLimit=300,this.viewportBorder=0,this.layerMask=268435455,this._vertexBuffers={},this._isEnabled=!0,this._scene=n||t.Engine.LastCreatedScene,this._emitter=i,this.id=e,n.lensFlareSystems.push(this),this.meshesSelectionPredicate=function(t){return n.activeCamera&&t.material&&t.isVisible&&t.isEnabled()&&t.isBlocker&&0!=(t.layerMask&n.activeCamera.layerMask)};var r=n.getEngine(),o=[];o.push(1,1),o.push(-1,1),o.push(-1,-1),o.push(1,-1),this._vertexBuffers[t.VertexBuffer.PositionKind]=new t.VertexBuffer(r,o,t.VertexBuffer.PositionKind,!1,!1,2);var s=[];s.push(0),s.push(1),s.push(2),s.push(0),s.push(2),s.push(3),this._indexBuffer=r.createIndexBuffer(s),this._effect=r.createEffect("lensFlare",[t.VertexBuffer.PositionKind],["color","viewportMatrix"],["textureSampler"],"")}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled=t},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEmitter=function(){return this._emitter},e.prototype.setEmitter=function(t){this._emitter=t},e.prototype.getEmitterPosition=function(){return this._emitter.getAbsolutePosition?this._emitter.getAbsolutePosition():this._emitter.position},e.prototype.computeEffectivePosition=function(e){var i=this.getEmitterPosition();return i=t.Vector3.Project(i,t.Matrix.Identity(),this._scene.getTransformMatrix(),e),this._positionX=i.x,this._positionY=i.y,i=t.Vector3.TransformCoordinates(this.getEmitterPosition(),this._scene.getViewMatrix()),this.viewportBorder>0&&(e.x-=this.viewportBorder,e.y-=this.viewportBorder,e.width+=2*this.viewportBorder,e.height+=2*this.viewportBorder,i.x+=this.viewportBorder,i.y+=this.viewportBorder,this._positionX+=this.viewportBorder,this._positionY+=this.viewportBorder),i.z>0&&(this._positionX>e.x&&this._positionX<e.x+e.width&&this._positionY>e.y&&(this._positionY,e.y,e.height),!0)},e.prototype._isVisible=function(){if(!this._isEnabled||!this._scene.activeCamera)return!1;var e=this.getEmitterPosition().subtract(this._scene.activeCamera.globalPosition),i=e.length();e.normalize();var n=new t.Ray(this._scene.activeCamera.globalPosition,e),r=this._scene.pickWithRay(n,this.meshesSelectionPredicate,!0);return!r||!r.hit||r.distance>i},e.prototype.render=function(){if(!this._effect.isReady()||!this._scene.activeCamera)return!1;var e,i,n=this._scene.getEngine(),r=this._scene.activeCamera.viewport.toGlobal(n.getRenderWidth(!0),n.getRenderHeight(!0));if(!this.computeEffectivePosition(r))return!1;if(!this._isVisible())return!1;var o=(e=this._positionX<this.borderLimit+r.x?this.borderLimit+r.x-this._positionX:this._positionX>r.x+r.width-this.borderLimit?this._positionX-r.x-r.width+this.borderLimit:0)>(i=this._positionY<this.borderLimit+r.y?this.borderLimit+r.y-this._positionY:this._positionY>r.y+r.height-this.borderLimit?this._positionY-r.y-r.height+this.borderLimit:0)?e:i;(o-=this.viewportBorder)>this.borderLimit&&(o=this.borderLimit);var s=1-o/this.borderLimit;if(s<0)return!1;s>1&&(s=1),this.viewportBorder>0&&(r.x+=this.viewportBorder,r.y+=this.viewportBorder,r.width-=2*this.viewportBorder,r.height-=2*this.viewportBorder,this._positionX-=this.viewportBorder,this._positionY-=this.viewportBorder);var a=r.x+r.width/2,l=r.y+r.height/2,c=a-this._positionX,u=l-this._positionY;n.enableEffect(this._effect),n.setState(!1),n.setDepthBuffer(!1),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect);for(var h=0;h<this.lensFlares.length;h++){var p=this.lensFlares[h];n.setAlphaMode(p.alphaMode);var d=a-c*p.position,f=l-u*p.position,m=p.size,g=p.size*n.getAspectRatio(this._scene.activeCamera,!0),y=d/(r.width+2*r.x)*2-1,_=1-f/(r.height+2*r.y)*2,v=t.Matrix.FromValues(m/2,0,0,0,0,g/2,0,0,0,0,1,0,y,_,0,1);this._effect.setMatrix("viewportMatrix",v),this._effect.setTexture("textureSampler",p.texture),this._effect.setFloat4("color",p.color.r*s,p.color.g*s,p.color.b*s,1),n.drawElementsType(t.Material.TriangleFillMode,0,6)}return n.setDepthBuffer(!0),n.setAlphaMode(t.Engine.ALPHA_DISABLE),!0},e.prototype.dispose=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];for(e&&(e.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null);this.lensFlares.length;)this.lensFlares[0].dispose();var i=this._scene.lensFlareSystems.indexOf(this);this._scene.lensFlareSystems.splice(i,1)},e.Parse=function(i,n,r){var o=n.getLastEntryByID(i.emitterId),s=i.name||"lensFlareSystem#"+i.emitterId,a=new e(s,o,n);a.id=i.id||s,a.borderLimit=i.borderLimit;for(var l=0;l<i.flares.length;l++){var c=i.flares[l];t.LensFlare.AddFlare(c.size,c.position,t.Color3.FromArray(c.color),c.textureName?r+c.textureName:"",a)}return a},e.prototype.serialize=function(){var e={};e.id=this.id,e.name=this.name,e.emitterId=this.getEmitter().id,e.borderLimit=this.borderLimit,e.flares=[];for(var i=0;i<this.lensFlares.length;i++){var n=this.lensFlares[i];e.flares.push({size:n.size,position:n.position,color:n.color.asArray(),textureName:t.Tools.GetFilename(n.texture?n.texture.name:"")})}return e},e}();t.LensFlareSystem=e}(l||(l={})),function(t){var e=function(){function t(t,e){this.type=t,this.jointData=e,e.nativeParams=e.nativeParams||{}}return Object.defineProperty(t.prototype,"physicsJoint",{get:function(){return this._physicsJoint},set:function(t){this._physicsJoint,this._physicsJoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"physicsPlugin",{set:function(t){this._physicsPlugin=t},enumerable:!0,configurable:!0}),t.prototype.executeNativeFunction=function(t){t(this._physicsPlugin.world,this._physicsJoint)},t.DistanceJoint=0,t.HingeJoint=1,t.BallAndSocketJoint=2,t.WheelJoint=3,t.SliderJoint=4,t.PrismaticJoint=5,t.UniversalJoint=6,t.Hinge2Joint=t.WheelJoint,t.PointToPointJoint=8,t.SpringJoint=9,t.LockJoint=10,t}();t.PhysicsJoint=e;var i=function(t){function i(i){return t.call(this,e.DistanceJoint,i)||this}return o(i,t),i.prototype.updateDistance=function(t,e){this._physicsPlugin.updateDistanceJoint(this,t,e)},i}(e);t.DistanceJoint=i;var n=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.setMotor=function(t,e){this._physicsPlugin.setMotor(this,t||0,e)},e.prototype.setLimit=function(t,e){this._physicsPlugin.setLimit(this,t,e)},e}(e);t.MotorEnabledJoint=n;var r=function(t){function i(i){return t.call(this,e.HingeJoint,i)||this}return o(i,t),i.prototype.setMotor=function(t,e){this._physicsPlugin.setMotor(this,t||0,e)},i.prototype.setLimit=function(t,e){this._physicsPlugin.setLimit(this,t,e)},i}(n);t.HingeJoint=r;var s=function(t){function i(i){return t.call(this,e.Hinge2Joint,i)||this}return o(i,t),i.prototype.setMotor=function(t,e,i){void 0===i&&(i=0),this._physicsPlugin.setMotor(this,t||0,e,i)},i.prototype.setLimit=function(t,e,i){void 0===i&&(i=0),this._physicsPlugin.setLimit(this,t,e,i)},i}(n);t.Hinge2Joint=s}(l||(l={})),function(t){var e=function(){function e(e,i,n,r){void 0===n&&(n={mass:0});var o=this;this.object=e,this.type=i,this._options=n,this._scene=r,this._bodyUpdateRequired=!1,this._onBeforePhysicsStepCallbacks=new Array,this._onAfterPhysicsStepCallbacks=new Array,this._onPhysicsCollideCallbacks=[],this._deltaPosition=t.Vector3.Zero(),this._isDisposed=!1,this._tmpQuat=new t.Quaternion,this._tmpQuat2=new t.Quaternion,this.beforeStep=function(){o._physicsEngine&&(o.object.translate(o._deltaPosition,-1),o._deltaRotationConjugated&&o.object.rotationQuaternion&&o.object.rotationQuaternion.multiplyToRef(o._deltaRotationConjugated,o.object.rotationQuaternion),o.object.computeWorldMatrix(!1),o.object.parent&&o.object.rotationQuaternion?(o.getParentsRotation(),o._tmpQuat.multiplyToRef(o.object.rotationQuaternion,o._tmpQuat)):o._tmpQuat.copyFrom(o.object.rotationQuaternion||new t.Quaternion),o._options.disableBidirectionalTransformation||o.object.rotationQuaternion&&o._physicsEngine.getPhysicsPlugin().setPhysicsBodyTransformation(o,o.object.getAbsolutePivotPoint(),o._tmpQuat),o._onBeforePhysicsStepCallbacks.forEach(function(t){t(o)}))},this.afterStep=function(){o._physicsEngine&&(o._onAfterPhysicsStepCallbacks.forEach(function(t){t(o)}),o._physicsEngine.getPhysicsPlugin().setTransformationFromPhysicsBody(o),o.object.parent&&o.object.rotationQuaternion&&(o.getParentsRotation(),o._tmpQuat.conjugateInPlace(),o._tmpQuat.multiplyToRef(o.object.rotationQuaternion,o.object.rotationQuaternion)),o.object.setAbsolutePosition(o.object.position),o._deltaRotation&&o.object.rotationQuaternion&&o.object.rotationQuaternion.multiplyToRef(o._deltaRotation,o.object.rotationQuaternion),o.object.translate(o._deltaPosition,1))},this.onCollideEvent=null,this.onCollide=function(t){if((o._onPhysicsCollideCallbacks.length||o.onCollideEvent)&&o._physicsEngine){var e=o._physicsEngine.getImpostorWithPhysicsBody(t.body);e&&(o.onCollideEvent&&o.onCollideEvent(o,e),o._onPhysicsCollideCallbacks.filter(function(t){return-1!==t.otherImpostors.indexOf(e)}).forEach(function(t){t.callback(o,e)}))}},this.object?(!this._scene&&e.getScene&&(this._scene=e.getScene()),this._scene&&(this._physicsEngine=this._scene.getPhysicsEngine(),this._physicsEngine?(this.object.rotationQuaternion||(this.object.rotation?this.object.rotationQuaternion=t.Quaternion.RotationYawPitchRoll(this.object.rotation.y,this.object.rotation.x,this.object.rotation.z):this.object.rotationQuaternion=new t.Quaternion),this._options.mass=void 0===n.mass?0:n.mass,this._options.friction=void 0===n.friction?.2:n.friction,this._options.restitution=void 0===n.restitution?.2:n.restitution,this._joints=[],!this.object.parent||this._options.ignoreParent?this._init():this.object.parent.physicsImpostor&&t.Tools.Warn("You must affect impostors to children before affecting impostor to parent.")):t.Tools.Error("Physics not enabled. Please use scene.enablePhysics(...) before creating impostors."))):t.Tools.Error("No object was provided. A physics object is obligatory")}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mass",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyMass(this):0},set:function(t){this.setMass(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friction",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyFriction(this):0},set:function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyFriction(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restitution",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyRestitution(this):0},set:function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyRestitution(this,t)},enumerable:!0,configurable:!0}),e.prototype._init=function(){this._physicsEngine&&(this._physicsEngine.removeImpostor(this),this.physicsBody=null,this._parent=this._parent||this._getPhysicsParent(),this._isDisposed||this.parent&&!this._options.ignoreParent||this._physicsEngine.addImpostor(this))},e.prototype._getPhysicsParent=function(){return this.object.parent instanceof t.AbstractMesh?this.object.parent.physicsImpostor:null},e.prototype.isBodyInitRequired=function(){return this._bodyUpdateRequired||!this._physicsBody&&!this._parent},e.prototype.setScalingUpdated=function(t){this.forceUpdate()},e.prototype.forceUpdate=function(){this._init(),this.parent&&!this._options.ignoreParent&&this.parent.forceUpdate()},Object.defineProperty(e.prototype,"physicsBody",{get:function(){return this._parent&&!this._options.ignoreParent?this._parent.physicsBody:this._physicsBody},set:function(t){this._physicsBody&&this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().removePhysicsBody(this),this._physicsBody=t,this.resetUpdateFlags()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return!this._options.ignoreParent&&this._parent?this._parent:null},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),e.prototype.resetUpdateFlags=function(){this._bodyUpdateRequired=!1},e.prototype.getObjectExtendSize=function(){if(this.object.getBoundingInfo){var t=this.object.rotationQuaternion;this.object.rotationQuaternion=e.IDENTITY_QUATERNION,this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0);var i=this.object.getBoundingInfo().boundingBox.extendSizeWorld.scale(2);return this.object.rotationQuaternion=t,this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0),i}return e.DEFAULT_OBJECT_SIZE},e.prototype.getObjectCenter=function(){return this.object.getBoundingInfo?this.object.getBoundingInfo().boundingBox.centerWorld:this.object.position},e.prototype.getParam=function(t){return this._options[t]},e.prototype.setParam=function(t,e){this._options[t]=e,this._bodyUpdateRequired=!0},e.prototype.setMass=function(t){this.getParam("mass")!==t&&this.setParam("mass",t),this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyMass(this,t)},e.prototype.getLinearVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getLinearVelocity(this):t.Vector3.Zero()},e.prototype.setLinearVelocity=function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setLinearVelocity(this,t)},e.prototype.getAngularVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getAngularVelocity(this):t.Vector3.Zero()},e.prototype.setAngularVelocity=function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setAngularVelocity(this,t)},e.prototype.executeNativeFunction=function(t){this._physicsEngine&&t(this._physicsEngine.getPhysicsPlugin().world,this.physicsBody)},e.prototype.registerBeforePhysicsStep=function(t){this._onBeforePhysicsStepCallbacks.push(t)},e.prototype.unregisterBeforePhysicsStep=function(e){var i=this._onBeforePhysicsStepCallbacks.indexOf(e);i>-1?this._onBeforePhysicsStepCallbacks.splice(i,1):t.Tools.Warn("Function to remove was not found")},e.prototype.registerAfterPhysicsStep=function(t){this._onAfterPhysicsStepCallbacks.push(t)},e.prototype.unregisterAfterPhysicsStep=function(e){var i=this._onAfterPhysicsStepCallbacks.indexOf(e);i>-1?this._onAfterPhysicsStepCallbacks.splice(i,1):t.Tools.Warn("Function to remove was not found")},e.prototype.registerOnPhysicsCollide=function(t,e){var i=t instanceof Array?t:[t];this._onPhysicsCollideCallbacks.push({callback:e,otherImpostors:i})},e.prototype.unregisterOnPhysicsCollide=function(e,i){var n=e instanceof Array?e:[e],r=this._onPhysicsCollideCallbacks.indexOf({callback:i,otherImpostors:n});r>-1?this._onPhysicsCollideCallbacks.splice(r,1):t.Tools.Warn("Function to remove was not found")},e.prototype.getParentsRotation=function(){var e=this.object.parent;for(this._tmpQuat.copyFromFloats(0,0,0,1);e;)e.rotationQuaternion?this._tmpQuat2.copyFrom(e.rotationQuaternion):t.Quaternion.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,e.rotation.z,this._tmpQuat2),this._tmpQuat.multiplyToRef(this._tmpQuat2,this._tmpQuat),e=e.parent;return this._tmpQuat},e.prototype.applyForce=function(t,e){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyForce(this,t,e),this},e.prototype.applyImpulse=function(t,e){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyImpulse(this,t,e),this},e.prototype.createJoint=function(e,i,n){var r=new t.PhysicsJoint(i,n);return this.addJoint(e,r),this},e.prototype.addJoint=function(t,e){return this._joints.push({otherImpostor:t,joint:e}),this._physicsEngine&&this._physicsEngine.addJoint(this,t,e),this},e.prototype.sleep=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().sleepBody(this),this},e.prototype.wakeUp=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().wakeUpBody(this),this},e.prototype.clone=function(t){return t?new e(t,this.type,this._options,this._scene):null},e.prototype.dispose=function(){var t=this;this._physicsEngine&&(this._joints.forEach(function(e){t._physicsEngine&&t._physicsEngine.removeJoint(t,e.otherImpostor,e.joint)}),this._physicsEngine.removeImpostor(this),this.parent&&this.parent.forceUpdate(),this._isDisposed=!0)},e.prototype.setDeltaPosition=function(t){this._deltaPosition.copyFrom(t)},e.prototype.setDeltaRotation=function(e){this._deltaRotation||(this._deltaRotation=new t.Quaternion),this._deltaRotation.copyFrom(e),this._deltaRotationConjugated=this._deltaRotation.conjugate()},e.prototype.getBoxSizeToRef=function(t){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().getBoxSizeToRef(this,t),this},e.prototype.getRadius=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getRadius(this):0},e.prototype.syncBoneWithImpostor=function(i,n,r,o,s){var a=e._tmpVecs[0],l=this.object;if(l.rotationQuaternion)if(s){var c=e._tmpQuat;l.rotationQuaternion.multiplyToRef(s,c),i.setRotationQuaternion(c,t.Space.WORLD,n)}else i.setRotationQuaternion(l.rotationQuaternion,t.Space.WORLD,n);a.x=0,a.y=0,a.z=0,r&&(a.x=r.x,a.y=r.y,a.z=r.z,i.getDirectionToRef(a,n,a),null!=o||(o=r.length()),a.x*=o,a.y*=o,a.z*=o),i.getParent()?(a.addInPlace(l.getAbsolutePosition()),i.setAbsolutePosition(a,n)):(n.setAbsolutePosition(l.getAbsolutePosition()),n.position.x-=a.x,n.position.y-=a.y,n.position.z-=a.z)},e.prototype.syncImpostorWithBone=function(i,n,r,o,s,a){var l=this.object;if(l.rotationQuaternion)if(s){var c=e._tmpQuat;i.getRotationQuaternionToRef(t.Space.WORLD,n,c),c.multiplyToRef(s,l.rotationQuaternion)}else i.getRotationQuaternionToRef(t.Space.WORLD,n,l.rotationQuaternion);var u=e._tmpVecs[0],h=e._tmpVecs[1];a||((a=e._tmpVecs[2]).x=0,a.y=1,a.z=0),i.getDirectionToRef(a,n,h),i.getAbsolutePositionToRef(n,u),null!=o||!r||(o=r.length()),null!=o&&(u.x+=h.x*o,u.y+=h.y*o,u.z+=h.z*o),l.setAbsolutePosition(u)},e.DEFAULT_OBJECT_SIZE=new t.Vector3(1,1,1),e.IDENTITY_QUATERNION=t.Quaternion.Identity(),e._tmpVecs=[t.Vector3.Zero(),t.Vector3.Zero(),t.Vector3.Zero()],e._tmpQuat=t.Quaternion.Identity(),e.NoImpostor=0,e.SphereImpostor=1,e.BoxImpostor=2,e.PlaneImpostor=3,e.MeshImpostor=4,e.CylinderImpostor=7,e.ParticleImpostor=8,e.HeightmapImpostor=9,e}();t.PhysicsImpostor=e}(l||(l={})),function(t){var e=function(){function e(e,i){if(void 0===i&&(i=new t.CannonJSPlugin),this._physicsPlugin=i,this._impostors=[],this._joints=[],!this._physicsPlugin.isSupported())throw new Error("Physics Engine "+this._physicsPlugin.name+" cannot be found. Please make sure it is included.");e=e||new t.Vector3(0,-9.807,0),this.setGravity(e),this.setTimeStep()}return e.prototype.setGravity=function(t){this.gravity=t,this._physicsPlugin.setGravity(this.gravity)},e.prototype.setTimeStep=function(t){void 0===t&&(t=1/60),this._physicsPlugin.setTimeStep(t)},e.prototype.getTimeStep=function(){return this._physicsPlugin.getTimeStep()},e.prototype.dispose=function(){this._impostors.forEach(function(t){t.dispose()}),this._physicsPlugin.dispose()},e.prototype.getPhysicsPluginName=function(){return this._physicsPlugin.name},e.prototype.addImpostor=function(t){t.uniqueId=this._impostors.push(t),t.parent||this._physicsPlugin.generatePhysicsBody(t)},e.prototype.removeImpostor=function(t){var e=this._impostors.indexOf(t);if(e>-1){var i=this._impostors.splice(e,1);i.length&&(i[0].physicsBody=null)}},e.prototype.addJoint=function(t,e,i){var n={mainImpostor:t,connectedImpostor:e,joint:i};i.physicsPlugin=this._physicsPlugin,this._joints.push(n),this._physicsPlugin.generateJoint(n)},e.prototype.removeJoint=function(t,e,i){var n=this._joints.filter(function(n){return n.connectedImpostor===e&&n.joint===i&&n.mainImpostor===t});n.length&&this._physicsPlugin.removeJoint(n[0])},e.prototype._step=function(t){var e=this;this._impostors.forEach(function(t){t.isBodyInitRequired()&&e._physicsPlugin.generatePhysicsBody(t)}),t>.1?t=.1:t<=0&&(t=1/60),this._physicsPlugin.executeStep(t,this._impostors)},e.prototype.getPhysicsPlugin=function(){return this._physicsPlugin},e.prototype.getImpostors=function(){return this._impostors},e.prototype.getImpostorForPhysicsObject=function(t){for(var e=0;e<this._impostors.length;++e)if(this._impostors[e].object===t)return this._impostors[e];return null},e.prototype.getImpostorWithPhysicsBody=function(t){for(var e=0;e<this._impostors.length;++e)if(this._impostors[e].physicsBody===t)return this._impostors[e];return null},e.Epsilon=.001,e}();t.PhysicsEngine=e}(l||(l={})),function(t){var e=function(){function e(e){this._scene=e,this._physicsEngine=this._scene.getPhysicsEngine(),this._physicsEngine||t.Tools.Warn("Physics engine not enabled. Please enable the physics before you can use the methods.")}return e.prototype.applyRadialExplosionImpulse=function(e,n,r,s){if(void 0===s&&(s=o.Constant),!this._physicsEngine)return t.Tools.Warn("Physics engine not enabled. Please enable the physics before you call this method."),null;var a=this._physicsEngine.getImpostors();if(0===a.length)return null;var l=new i(this._scene);return a.forEach(function(t){var i=l.getImpostorForceAndContactPoint(t,e,n,r,s);i&&t.applyImpulse(i.force,i.contactPoint)}),l.dispose(!1),l},e.prototype.applyRadialExplosionForce=function(e,n,r,s){if(void 0===s&&(s=o.Constant),!this._physicsEngine)return t.Tools.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;var a=this._physicsEngine.getImpostors();if(0===a.length)return null;var l=new i(this._scene);return a.forEach(function(t){var i=l.getImpostorForceAndContactPoint(t,e,n,r,s);i&&t.applyForce(i.force,i.contactPoint)}),l.dispose(!1),l},e.prototype.gravitationalField=function(e,i,r,s){if(void 0===s&&(s=o.Constant),!this._physicsEngine)return t.Tools.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;var a=new n(this,this._scene,e,i,r,s);return a.dispose(!1),a},e.prototype.updraft=function(e,i,n,o,a){if(void 0===a&&(a=s.Center),!this._physicsEngine)return t.Tools.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;var l=new r(this._scene,e,i,n,o,a);return l.dispose(!1),l},e.prototype.vortex=function(e,i,n,r){if(!this._physicsEngine)return t.Tools.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;var o=new a(this._scene,e,i,n,r);return o.dispose(!1),o},e}();t.PhysicsHelper=e;var i=function(){function e(t){this._sphereOptions={segments:32,diameter:1},this._rays=[],this._dataFetched=!1,this._scene=t}return e.prototype.getData=function(){return this._dataFetched=!0,{sphere:this._sphere,rays:this._rays}},e.prototype.getImpostorForceAndContactPoint=function(e,i,n,r,s){if(0===e.mass)return null;if(!this._intersectsWithSphere(e,i,n))return null;if("Mesh"!==e.object.getClassName())return null;var a=e.object,l=e.getObjectCenter().subtract(i),c=new t.Ray(i,l,n);this._rays.push(c);var u=c.intersectsMesh(a).pickedPoint;if(!u)return null;var h=t.Vector3.Distance(i,u);if(h>n)return null;var p=s===o.Constant?r:r*(1-h/n);return{force:l.multiplyByFloats(p,p,p),contactPoint:u}},e.prototype.dispose=function(t){var e=this;void 0===t&&(t=!0),t?this._sphere.dispose():setTimeout(function(){e._dataFetched||e._sphere.dispose()},0)},e.prototype._prepareSphere=function(){this._sphere||(this._sphere=t.MeshBuilder.CreateSphere("radialExplosionEventSphere",this._sphereOptions,this._scene),this._sphere.isVisible=!1)},e.prototype._intersectsWithSphere=function(e,i,n){var r=e.object;return this._prepareSphere(),this._sphere.position=i,this._sphere.scaling=new t.Vector3(2*n,2*n,2*n),this._sphere._updateBoundingInfo(),this._sphere.computeWorldMatrix(!0),this._sphere.intersectsMesh(r,!0)},e}();t.PhysicsRadialExplosionEvent=i;var n=function(){function t(t,e,i,n,r,s){void 0===s&&(s=o.Constant),this._dataFetched=!1,this._physicsHelper=t,this._scene=e,this._origin=i,this._radius=n,this._strength=r,this._falloff=s,this._tickCallback=this._tick.bind(this)}return t.prototype.getData=function(){return this._dataFetched=!0,{sphere:this._sphere}},t.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},t.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},t.prototype.dispose=function(t){var e=this;void 0===t&&(t=!0),t?this._sphere.dispose():setTimeout(function(){e._dataFetched||e._sphere.dispose()},0)},t.prototype._tick=function(){if(this._sphere)this._physicsHelper.applyRadialExplosionForce(this._origin,this._radius,-1*this._strength,this._falloff);else{var t=this._physicsHelper.applyRadialExplosionForce(this._origin,this._radius,-1*this._strength,this._falloff);t&&(this._sphere=t.getData().sphere.clone("radialExplosionEventSphereClone"))}},t}();t.PhysicsGravitationalFieldEvent=n;var r=function(){function e(e,i,n,r,o,a){this._scene=e,this._origin=i,this._radius=n,this._strength=r,this._height=o,this._updraftMode=a,this._originTop=t.Vector3.Zero(),this._originDirection=t.Vector3.Zero(),this._cylinderPosition=t.Vector3.Zero(),this._dataFetched=!1,this._physicsEngine=this._scene.getPhysicsEngine(),this._origin.addToRef(new t.Vector3(0,this._height/2,0),this._cylinderPosition),this._origin.addToRef(new t.Vector3(0,this._height,0),this._originTop),this._updraftMode===s.Perpendicular&&(this._originDirection=this._origin.subtract(this._originTop).normalize()),this._tickCallback=this._tick.bind(this)}return e.prototype.getData=function(){return this._dataFetched=!0,{cylinder:this._cylinder}},e.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},e.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},e.prototype.dispose=function(t){var e=this;void 0===t&&(t=!0),t?this._cylinder.dispose():setTimeout(function(){e._dataFetched||e._cylinder.dispose()},0)},e.prototype.getImpostorForceAndContactPoint=function(t){if(0===t.mass)return null;if(!this._intersectsWithCylinder(t))return null;var e=t.getObjectCenter();if(this._updraftMode===s.Perpendicular)var i=this._originDirection;else i=e.subtract(this._originTop);var n=-1*this._strength;return{force:i.multiplyByFloats(n,n,n),contactPoint:e}},e.prototype._tick=function(){var t=this;this._physicsEngine.getImpostors().forEach(function(e){var i=t.getImpostorForceAndContactPoint(e);i&&e.applyForce(i.force,i.contactPoint)})},e.prototype._prepareCylinder=function(){this._cylinder||(this._cylinder=t.MeshBuilder.CreateCylinder("updraftEventCylinder",{height:this._height,diameter:2*this._radius},this._scene),this._cylinder.isVisible=!1)},e.prototype._intersectsWithCylinder=function(t){var e=t.object;return this._prepareCylinder(),this._cylinder.position=this._cylinderPosition,this._cylinder.intersectsMesh(e,!0)},e}();t.PhysicsUpdraftEvent=r;var o,s,a=function(){function e(e,i,n,r,o){this._scene=e,this._origin=i,this._radius=n,this._strength=r,this._height=o,this._originTop=t.Vector3.Zero(),this._centripetalForceThreshold=.7,this._updraftMultiplier=.02,this._cylinderPosition=t.Vector3.Zero(),this._dataFetched=!1,this._physicsEngine=this._scene.getPhysicsEngine(),this._origin.addToRef(new t.Vector3(0,this._height/2,0),this._cylinderPosition),this._origin.addToRef(new t.Vector3(0,this._height,0),this._originTop),this._tickCallback=this._tick.bind(this)}return e.prototype.getData=function(){return this._dataFetched=!0,{cylinder:this._cylinder}},e.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},e.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},e.prototype.dispose=function(t){var e=this;void 0===t&&(t=!0),t?this._cylinder.dispose():setTimeout(function(){e._dataFetched||e._cylinder.dispose()},0)},e.prototype.getImpostorForceAndContactPoint=function(e){if(0===e.mass)return null;if(!this._intersectsWithCylinder(e))return null;if("Mesh"!==e.object.getClassName())return null;var i=e.object,n=e.getObjectCenter(),r=new t.Vector3(this._origin.x,n.y,this._origin.z),o=n.subtract(r),s=new t.Ray(r,o,this._radius).intersectsMesh(i),a=s.pickedPoint;if(!a)return null;var l=s.distance/this._radius,c=t.Vector3.Cross(r,n).normalize(),u=a.normalize();if(l>this._centripetalForceThreshold&&(u=u.negate()),l>this._centripetalForceThreshold)var h=u.x*this._strength/8,p=u.y*this._updraftMultiplier,d=u.z*this._strength/8;else h=(c.x+u.x)/2,p=this._originTop.y*this._updraftMultiplier,d=(c.z+u.z)/2;var f=new t.Vector3(h,p,d);return{force:f=f.multiplyByFloats(this._strength,this._strength,this._strength),contactPoint:n}},e.prototype._tick=function(){var t=this;this._physicsEngine.getImpostors().forEach(function(e){var i=t.getImpostorForceAndContactPoint(e);i&&e.applyForce(i.force,i.contactPoint)})},e.prototype._prepareCylinder=function(){this._cylinder||(this._cylinder=t.MeshBuilder.CreateCylinder("vortexEventCylinder",{height:this._height,diameter:2*this._radius},this._scene),this._cylinder.isVisible=!1)},e.prototype._intersectsWithCylinder=function(t){var e=t.object;return this._prepareCylinder(),this._cylinder.position=this._cylinderPosition,this._cylinder.intersectsMesh(e,!0)},e}();t.PhysicsVortexEvent=a,function(t){t[t.Constant=0]="Constant",t[t.Linear=1]="Linear"}(o=t.PhysicsRadialImpulseFalloff||(t.PhysicsRadialImpulseFalloff={})),function(t){t[t.Center=0]="Center",t[t.Perpendicular=1]="Perpendicular"}(s=t.PhysicsUpdraftMode||(t.PhysicsUpdraftMode={}))}(l||(l={})),function(t){var e=function(){function e(e,n){void 0===e&&(e=!0),void 0===n&&(n=10),this._useDeltaForWorldStep=e,this.name="CannonJSPlugin",this._physicsMaterials=new Array,this._fixedTimeStep=1/60,this.BJSCANNON="undefined"!=typeof CANNON?CANNON:i("IV8e"),this._minus90X=new t.Quaternion(-.7071067811865475,0,0,.7071067811865475),this._plus90X=new t.Quaternion(.7071067811865475,0,0,.7071067811865475),this._tmpPosition=t.Vector3.Zero(),this._tmpDeltaPosition=t.Vector3.Zero(),this._tmpUnityRotation=new t.Quaternion,this.isSupported()?(this._extendNamespace(),this.world=new this.BJSCANNON.World,this.world.broadphase=new this.BJSCANNON.NaiveBroadphase,this.world.solver.iterations=n):t.Tools.Error("CannonJS is not available. Please make sure you included the js file.")}return e.prototype.setGravity=function(t){this.world.gravity.copy(t)},e.prototype.setTimeStep=function(t){this._fixedTimeStep=t},e.prototype.getTimeStep=function(){return this._fixedTimeStep},e.prototype.executeStep=function(t,e){this.world.step(this._fixedTimeStep,this._useDeltaForWorldStep?t:0,3)},e.prototype.applyImpulse=function(t,e,i){var n=new this.BJSCANNON.Vec3(i.x,i.y,i.z),r=new this.BJSCANNON.Vec3(e.x,e.y,e.z);t.physicsBody.applyImpulse(r,n)},e.prototype.applyForce=function(t,e,i){var n=new this.BJSCANNON.Vec3(i.x,i.y,i.z),r=new this.BJSCANNON.Vec3(e.x,e.y,e.z);t.physicsBody.applyForce(r,n)},e.prototype.generatePhysicsBody=function(t){if(t.parent)t.physicsBody&&(this.removePhysicsBody(t),t.forceUpdate());else{if(t.isBodyInitRequired()){var e=this._createShape(t),i=t.physicsBody;i&&this.removePhysicsBody(t);var n=this._addMaterial("mat-"+t.uniqueId,t.getParam("friction"),t.getParam("restitution")),r={mass:t.getParam("mass"),material:n},o=t.getParam("nativeOptions");for(var s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);t.physicsBody=new this.BJSCANNON.Body(r),t.physicsBody.addEventListener("collide",t.onCollide),this.world.addEventListener("preStep",t.beforeStep),this.world.addEventListener("postStep",t.afterStep),t.physicsBody.addShape(e),this.world.add(t.physicsBody),i&&["force","torque","velocity","angularVelocity"].forEach(function(e){t.physicsBody[e].copy(i[e])}),this._processChildMeshes(t)}this._updatePhysicsBodyTransformation(t)}},e.prototype._processChildMeshes=function(e){var i=this,n=e.object.getChildMeshes?e.object.getChildMeshes(!0):[],r=e.object.rotationQuaternion;if(n.length){var o=function(n,s){if(r&&s.rotationQuaternion){var a=s.getPhysicsImpostor();if(a&&a.parent!==e){var l=s.getAbsolutePosition().subtract(e.object.getAbsolutePosition()),c=s.rotationQuaternion.multiply(t.Quaternion.Inverse(r));a.physicsBody&&(i.removePhysicsBody(a),a.physicsBody=null),a.parent=e,a.resetUpdateFlags(),e.physicsBody.addShape(i._createShape(a),new i.BJSCANNON.Vec3(l.x,l.y,l.z),new i.BJSCANNON.Quaternion(c.x,c.y,c.z,c.w)),e.physicsBody.mass+=a.getParam("mass")}r.multiplyInPlace(s.rotationQuaternion),s.getChildMeshes(!0).filter(function(t){return!!t.physicsImpostor}).forEach(o.bind(i,s.getAbsolutePosition()))}};n.filter(function(t){return!!t.physicsImpostor}).forEach(o.bind(this,e.object.getAbsolutePosition()))}},e.prototype.removePhysicsBody=function(t){t.physicsBody.removeEventListener("collide",t.onCollide),this.world.removeEventListener("preStep",t.beforeStep),this.world.removeEventListener("postStep",t.afterStep),this.world.remove(t.physicsBody)},e.prototype.generateJoint=function(e){var i=e.mainImpostor.physicsBody,n=e.connectedImpostor.physicsBody;if(i&&n){var r,o=e.joint.jointData,s={pivotA:o.mainPivot?(new this.BJSCANNON.Vec3).copy(o.mainPivot):null,pivotB:o.connectedPivot?(new this.BJSCANNON.Vec3).copy(o.connectedPivot):null,axisA:o.mainAxis?(new this.BJSCANNON.Vec3).copy(o.mainAxis):null,axisB:o.connectedAxis?(new this.BJSCANNON.Vec3).copy(o.connectedAxis):null,maxForce:o.nativeParams.maxForce,collideConnected:!!o.collision};switch(e.joint.type){case t.PhysicsJoint.HingeJoint:case t.PhysicsJoint.Hinge2Joint:r=new this.BJSCANNON.HingeConstraint(i,n,s);break;case t.PhysicsJoint.DistanceJoint:r=new this.BJSCANNON.DistanceConstraint(i,n,o.maxDistance||2);break;case t.PhysicsJoint.SpringJoint:var a=o;r=new this.BJSCANNON.Spring(i,n,{restLength:a.length,stiffness:a.stiffness,damping:a.damping,localAnchorA:s.pivotA,localAnchorB:s.pivotB});break;case t.PhysicsJoint.LockJoint:r=new this.BJSCANNON.LockConstraint(i,n,s);break;case t.PhysicsJoint.PointToPointJoint:case t.PhysicsJoint.BallAndSocketJoint:default:r=new this.BJSCANNON.PointToPointConstraint(i,s.pivotA,n,s.pivotA,s.maxForce)}r.collideConnected=!!o.collision,e.joint.physicsJoint=r,e.joint.type!==t.PhysicsJoint.SpringJoint?this.world.addConstraint(r):e.mainImpostor.registerAfterPhysicsStep(function(){r.applyForce()})}},e.prototype.removeJoint=function(t){this.world.removeConstraint(t.joint.physicsJoint)},e.prototype._addMaterial=function(t,e,i){var n,r;for(n=0;n<this._physicsMaterials.length;n++)if((r=this._physicsMaterials[n]).friction===e&&r.restitution===i)return r;var o=new this.BJSCANNON.Material(t);return o.friction=e,o.restitution=i,this._physicsMaterials.push(o),o},e.prototype._checkWithEpsilon=function(e){return e<t.PhysicsEngine.Epsilon?t.PhysicsEngine.Epsilon:e},e.prototype._createShape=function(e){var i,n=e.object,r=e.getObjectExtendSize();switch(e.type){case t.PhysicsImpostor.SphereImpostor:var o=r.x,s=r.y,a=r.z;i=new this.BJSCANNON.Sphere(Math.max(this._checkWithEpsilon(o),this._checkWithEpsilon(s),this._checkWithEpsilon(a))/2);break;case t.PhysicsImpostor.CylinderImpostor:i=new this.BJSCANNON.Cylinder(this._checkWithEpsilon(r.x)/2,this._checkWithEpsilon(r.x)/2,this._checkWithEpsilon(r.y),16);break;case t.PhysicsImpostor.BoxImpostor:var l=r.scale(.5);i=new this.BJSCANNON.Box(new this.BJSCANNON.Vec3(this._checkWithEpsilon(l.x),this._checkWithEpsilon(l.y),this._checkWithEpsilon(l.z)));break;case t.PhysicsImpostor.PlaneImpostor:t.Tools.Warn("Attention, PlaneImposter might not behave as you expect. Consider using BoxImposter instead"),i=new this.BJSCANNON.Plane;break;case t.PhysicsImpostor.MeshImpostor:var c=n.getVerticesData?n.getVerticesData(t.VertexBuffer.PositionKind):[],u=n.getIndices?n.getIndices():[];if(!c)return;var h=n.position.clone(),p=n.rotation&&n.rotation.clone(),d=n.rotationQuaternion&&n.rotationQuaternion.clone();n.position.copyFromFloats(0,0,0),n.rotation&&n.rotation.copyFromFloats(0,0,0),n.rotationQuaternion&&n.rotationQuaternion.copyFrom(e.getParentsRotation()),n.rotationQuaternion&&n.parent&&n.rotationQuaternion.conjugateInPlace();var f,m=n.computeWorldMatrix(!0),g=new Array;for(f=0;f<c.length;f+=3)t.Vector3.TransformCoordinates(t.Vector3.FromArray(c,f),m).toArray(g,f);t.Tools.Warn("MeshImpostor only collides against spheres."),i=new this.BJSCANNON.Trimesh(g,u),n.position.copyFrom(h),p&&n.rotation&&n.rotation.copyFrom(p),d&&n.rotationQuaternion&&n.rotationQuaternion.copyFrom(d);break;case t.PhysicsImpostor.HeightmapImpostor:var y=n.position.clone(),_=n.rotation&&n.rotation.clone(),v=n.rotationQuaternion&&n.rotationQuaternion.clone();n.position.copyFromFloats(0,0,0),n.rotation&&n.rotation.copyFromFloats(0,0,0),n.rotationQuaternion&&n.rotationQuaternion.copyFrom(e.getParentsRotation()),n.rotationQuaternion&&n.parent&&n.rotationQuaternion.conjugateInPlace(),n.rotationQuaternion&&n.rotationQuaternion.multiplyInPlace(this._minus90X),i=this._createHeightmap(n),n.position.copyFrom(y),_&&n.rotation&&n.rotation.copyFrom(_),v&&n.rotationQuaternion&&n.rotationQuaternion.copyFrom(v),n.computeWorldMatrix(!0);break;case t.PhysicsImpostor.ParticleImpostor:i=new this.BJSCANNON.Particle}return i},e.prototype._createHeightmap=function(e,i){var n,r=e.getVerticesData(t.VertexBuffer.PositionKind),o=e.computeWorldMatrix(!0),s=new Array;for(n=0;n<r.length;n+=3)t.Vector3.TransformCoordinates(t.Vector3.FromArray(r,n),o).toArray(s,n);r=s;for(var a=new Array,l=i||~~(Math.sqrt(r.length/3)-1),c=e.getBoundingInfo(),u=Math.min(c.boundingBox.extendSizeWorld.x,c.boundingBox.extendSizeWorld.y),h=c.boundingBox.extendSizeWorld.z,p=2*u/l,d=0;d<r.length;d+=3){var f=Math.round(r[d+0]/p+l/2),m=Math.round(-1*(r[d+1]/p-l/2)),g=-r[d+2]+h;a[f]||(a[f]=[]),a[f][m]||(a[f][m]=g),a[f][m]=Math.max(g,a[f][m])}for(f=0;f<=l;++f){if(!a[f]){for(var y=1;!a[(f+y)%l];)y++;a[f]=a[(f+y)%l].slice()}for(m=0;m<=l;++m)if(!a[f][m]){var _;for(y=1;void 0===_;)_=a[f][(m+y++)%l];a[f][m]=_}}var v=new this.BJSCANNON.Heightfield(a,{elementSize:p});return v.minY=h,v},e.prototype._updatePhysicsBodyTransformation=function(e){var i=e.object;if(i.computeWorldMatrix&&i.computeWorldMatrix(!0),i.getBoundingInfo()){var n=e.getObjectCenter();this._tmpDeltaPosition.copyFrom(i.getAbsolutePivotPoint().subtract(n)),this._tmpDeltaPosition.divideInPlace(e.object.scaling),this._tmpPosition.copyFrom(n);var r=i.rotationQuaternion;if(r){if(e.type!==t.PhysicsImpostor.PlaneImpostor&&e.type!==t.PhysicsImpostor.HeightmapImpostor&&e.type!==t.PhysicsImpostor.CylinderImpostor||(r=r.multiply(this._minus90X),e.setDeltaRotation(this._plus90X)),e.type===t.PhysicsImpostor.HeightmapImpostor){var o=i,s=o.getBoundingInfo(),a=o.rotationQuaternion;o.rotationQuaternion=this._tmpUnityRotation,o.computeWorldMatrix(!0);var l=n.clone(),c=o.getPivotMatrix()||t.Matrix.Translation(0,0,0),u=t.Matrix.Translation(s.boundingBox.extendSizeWorld.x,0,-s.boundingBox.extendSizeWorld.z);o.setPreTransformMatrix(u),o.computeWorldMatrix(!0);var h=s.boundingBox.centerWorld.subtract(n).subtract(o.position).negate();this._tmpPosition.copyFromFloats(h.x,h.y-s.boundingBox.extendSizeWorld.y,h.z),this._tmpDeltaPosition.copyFrom(s.boundingBox.centerWorld.subtract(l)),this._tmpDeltaPosition.y+=s.boundingBox.extendSizeWorld.y,o.rotationQuaternion=a,o.setPreTransformMatrix(c),o.computeWorldMatrix(!0)}else e.type===t.PhysicsImpostor.MeshImpostor&&this._tmpDeltaPosition.copyFromFloats(0,0,0);e.setDeltaPosition(this._tmpDeltaPosition),e.physicsBody.position.copy(this._tmpPosition),e.physicsBody.quaternion.copy(r)}}},e.prototype.setTransformationFromPhysicsBody=function(t){t.object.position.copyFrom(t.physicsBody.position),t.object.rotationQuaternion&&t.object.rotationQuaternion.copyFrom(t.physicsBody.quaternion)},e.prototype.setPhysicsBodyTransformation=function(t,e,i){t.physicsBody.position.copy(e),t.physicsBody.quaternion.copy(i)},e.prototype.isSupported=function(){return void 0!==this.BJSCANNON},e.prototype.setLinearVelocity=function(t,e){t.physicsBody.velocity.copy(e)},e.prototype.setAngularVelocity=function(t,e){t.physicsBody.angularVelocity.copy(e)},e.prototype.getLinearVelocity=function(e){var i=e.physicsBody.velocity;return i?new t.Vector3(i.x,i.y,i.z):null},e.prototype.getAngularVelocity=function(e){var i=e.physicsBody.angularVelocity;return i?new t.Vector3(i.x,i.y,i.z):null},e.prototype.setBodyMass=function(t,e){t.physicsBody.mass=e,t.physicsBody.updateMassProperties()},e.prototype.getBodyMass=function(t){return t.physicsBody.mass},e.prototype.getBodyFriction=function(t){return t.physicsBody.material.friction},e.prototype.setBodyFriction=function(t,e){t.physicsBody.material.friction=e},e.prototype.getBodyRestitution=function(t){return t.physicsBody.material.restitution},e.prototype.setBodyRestitution=function(t,e){t.physicsBody.material.restitution=e},e.prototype.sleepBody=function(t){t.physicsBody.sleep()},e.prototype.wakeUpBody=function(t){t.physicsBody.wakeUp()},e.prototype.updateDistanceJoint=function(t,e,i){t.physicsJoint.distance=e},e.prototype.setMotor=function(t,e,i,n){n||(t.physicsJoint.enableMotor(),t.physicsJoint.setMotorSpeed(e),i&&this.setLimit(t,i))},e.prototype.setLimit=function(t,e,i){t.physicsJoint.motorEquation.maxForce=e,t.physicsJoint.motorEquation.minForce=void 0===i?-e:i},e.prototype.syncMeshWithImpostor=function(t,e){var i=e.physicsBody;t.position.x=i.position.x,t.position.y=i.position.y,t.position.z=i.position.z,t.rotationQuaternion&&(t.rotationQuaternion.x=i.quaternion.x,t.rotationQuaternion.y=i.quaternion.y,t.rotationQuaternion.z=i.quaternion.z,t.rotationQuaternion.w=i.quaternion.w)},e.prototype.getRadius=function(t){return t.physicsBody.shapes[0].boundingSphereRadius},e.prototype.getBoxSizeToRef=function(t,e){var i=t.physicsBody.shapes[0];e.x=2*i.halfExtents.x,e.y=2*i.halfExtents.y,e.z=2*i.halfExtents.z},e.prototype.dispose=function(){},e.prototype._extendNamespace=function(){var t=new this.BJSCANNON.Vec3,e=this.BJSCANNON;this.BJSCANNON.World.prototype.step=function(i,n,r){if(r=r||10,0===(n=n||0))this.internalStep(i),this.time+=i;else{var o=Math.floor((this.time+n)/i)-Math.floor(this.time/i);o=Math.min(o,r)||1;for(var s=performance.now(),a=0;a!==o&&(this.internalStep(i),!(performance.now()-s>1e3*i));a++);this.time+=n;for(var l=this.time%i/i,c=t,u=this.bodies,h=0;h!==u.length;h++){var p=u[h];p.type!==e.Body.STATIC&&p.sleepState!==e.Body.SLEEPING?(p.position.vsub(p.previousPosition,c),c.scale(l,c),p.position.vadd(c,p.interpolatedPosition)):(p.interpolatedPosition.copy(p.position),p.interpolatedQuaternion.copy(p.quaternion))}}}},e}();t.CannonJSPlugin=e}(l||(l={})),function(t){var e=function(){function e(e){this.name="OimoJSPlugin",this._tmpImpostorsArray=[],this._tmpPositionVector=t.Vector3.Zero(),this.BJSOIMO="undefined"!=typeof OIMO?OIMO:i("HHSa"),this.world=new this.BJSOIMO.World(1/60,2,e,!0),this.world.worldscale(1),this.world.clear(),this.world.isNoStat=!0}return e.prototype.setGravity=function(t){this.world.gravity.copy(t)},e.prototype.setTimeStep=function(t){this.world.timeStep=t},e.prototype.getTimeStep=function(){return this.world.timeStep},e.prototype.executeStep=function(t,e){var i=this;e.forEach(function(t){t.beforeStep()}),this.world.step(),e.forEach(function(t){t.afterStep(),i._tmpImpostorsArray[t.uniqueId]=t});for(var n=this.world.contacts;null!==n;)if(!n.touching||n.body1.sleeping||n.body2.sleeping){var r=this._tmpImpostorsArray[+n.body1.name],o=this._tmpImpostorsArray[+n.body2.name];r&&o?(r.onCollide({body:o.physicsBody}),o.onCollide({body:r.physicsBody}),n=n.next):n=n.next}else n=n.next},e.prototype.applyImpulse=function(t,e,i){var n=t.physicsBody.massInfo.mass;t.physicsBody.applyImpulse(i.scale(this.BJSOIMO.INV_SCALE),e.scale(this.BJSOIMO.INV_SCALE*n))},e.prototype.applyForce=function(e,i,n){t.Tools.Warn("Oimo doesn't support applying force. Using impule instead."),this.applyImpulse(e,i,n)},e.prototype.generatePhysicsBody=function(e){var i=this;if(e.parent)e.physicsBody&&(this.removePhysicsBody(e),e.forceUpdate());else{if(e.isBodyInitRequired()){var n={name:e.uniqueId,config:[e.getParam("mass")||1,e.getParam("friction"),e.getParam("restitution")],size:[],type:[],pos:[],rot:[],move:0!==e.getParam("mass"),world:this.world},r=[e];!function(t){t.getChildMeshes&&t.getChildMeshes().forEach(function(t){t.physicsImpostor&&r.push(t.physicsImpostor)})}(e.object);var o=function(e){return Math.max(e,t.PhysicsEngine.Epsilon)};r.forEach(function(r){if(e.object.rotationQuaternion){var s=r.object.rotationQuaternion,a=(new i.BJSOIMO.Euler).setFromQuaternion({x:e.object.rotationQuaternion.x,y:e.object.rotationQuaternion.y,z:e.object.rotationQuaternion.z,s:e.object.rotationQuaternion.w}),l=r.getObjectExtendSize();if(r===e){var c=e.getObjectCenter();e.object.getAbsolutePivotPoint().subtractToRef(c,i._tmpPositionVector),i._tmpPositionVector.divideInPlace(e.object.scaling),n.pos.push(c.x),n.pos.push(c.y),n.pos.push(c.z),n.rot.push(a.x/(i.BJSOIMO.degtorad||i.BJSOIMO.TO_RAD)),n.rot.push(a.y/(i.BJSOIMO.degtorad||i.BJSOIMO.TO_RAD)),n.rot.push(a.z/(i.BJSOIMO.degtorad||i.BJSOIMO.TO_RAD))}else{var u=r.object.getAbsolutePosition().subtract(e.object.getAbsolutePosition());n.pos.push(u.x),n.pos.push(u.y),n.pos.push(u.z),n.rot.push(0),n.rot.push(0),n.rot.push(0)}switch(r.type){case t.PhysicsImpostor.ParticleImpostor:t.Tools.Warn("No Particle support in this.BJSOIMO.js. using SphereImpostor instead");case t.PhysicsImpostor.SphereImpostor:var h=l.x,p=l.y,d=l.z,f=Math.max(o(h),o(p),o(d))/2;n.type.push("sphere"),n.size.push(f),n.size.push(f),n.size.push(f);break;case t.PhysicsImpostor.CylinderImpostor:var m=o(l.x)/2,g=o(l.y);n.type.push("cylinder"),n.size.push(m),n.size.push(g),n.size.push(g);break;case t.PhysicsImpostor.PlaneImpostor:case t.PhysicsImpostor.BoxImpostor:default:m=o(l.x),g=o(l.y);var y=o(l.z);n.type.push("box"),n.size.push(m),n.size.push(g),n.size.push(y)}r.object.rotationQuaternion=s}}),e.physicsBody=new this.BJSOIMO.Body(n).body}else this._tmpPositionVector.copyFromFloats(0,0,0);e.setDeltaPosition(this._tmpPositionVector)}},e.prototype.removePhysicsBody=function(t){this.world.removeRigidBody(t.physicsBody)},e.prototype.generateJoint=function(e){var i=e.mainImpostor.physicsBody,n=e.connectedImpostor.physicsBody;if(i&&n){var r,o=e.joint.jointData,s=o.nativeParams||{},a={body1:i,body2:n,axe1:s.axe1||(o.mainAxis?o.mainAxis.asArray():null),axe2:s.axe2||(o.connectedAxis?o.connectedAxis.asArray():null),pos1:s.pos1||(o.mainPivot?o.mainPivot.asArray():null),pos2:s.pos2||(o.connectedPivot?o.connectedPivot.asArray():null),min:s.min,max:s.max,collision:s.collision||o.collision,spring:s.spring,world:this.world};switch(e.joint.type){case t.PhysicsJoint.BallAndSocketJoint:r="jointBall";break;case t.PhysicsJoint.SpringJoint:t.Tools.Warn("this.BJSOIMO.js doesn't support Spring Constraint. Simulating using DistanceJoint instead");var l=o;a.min=l.length||a.min,a.max=Math.max(a.min,a.max);case t.PhysicsJoint.DistanceJoint:r="jointDistance",a.max=o.maxDistance;break;case t.PhysicsJoint.PrismaticJoint:r="jointPrisme";break;case t.PhysicsJoint.SliderJoint:r="jointSlide";break;case t.PhysicsJoint.WheelJoint:r="jointWheel";break;case t.PhysicsJoint.HingeJoint:default:r="jointHinge"}a.type=r,e.joint.physicsJoint=new this.BJSOIMO.Link(a).joint}},e.prototype.removeJoint=function(e){try{this.world.removeJoint(e.joint.physicsJoint)}catch(e){t.Tools.Warn(e)}},e.prototype.isSupported=function(){return void 0!==this.BJSOIMO},e.prototype.setTransformationFromPhysicsBody=function(t){if(!t.physicsBody.sleeping){if(t.physicsBody.shapes.next){var e=this._getLastShape(t.physicsBody);t.object.position.x=e.position.x*this.BJSOIMO.WORLD_SCALE,t.object.position.y=e.position.y*this.BJSOIMO.WORLD_SCALE,t.object.position.z=e.position.z*this.BJSOIMO.WORLD_SCALE}else t.object.position.copyFrom(t.physicsBody.getPosition());t.object.rotationQuaternion&&(t.object.rotationQuaternion.copyFrom(t.physicsBody.getQuaternion()),t.object.rotationQuaternion.normalize())}},e.prototype.setPhysicsBodyTransformation=function(t,e,i){var n=t.physicsBody;n.position.init(e.x*this.BJSOIMO.INV_SCALE,e.y*this.BJSOIMO.INV_SCALE,e.z*this.BJSOIMO.INV_SCALE),n.orientation.init(i.w,i.x,i.y,i.z),n.syncShapes(),n.awake()},e.prototype._getLastShape=function(t){for(var e=t.shapes;e.next;)e=e.next;return e},e.prototype.setLinearVelocity=function(t,e){t.physicsBody.linearVelocity.init(e.x,e.y,e.z)},e.prototype.setAngularVelocity=function(t,e){t.physicsBody.angularVelocity.init(e.x,e.y,e.z)},e.prototype.getLinearVelocity=function(e){var i=e.physicsBody.linearVelocity;return i?new t.Vector3(i.x,i.y,i.z):null},e.prototype.getAngularVelocity=function(e){var i=e.physicsBody.angularVelocity;return i?new t.Vector3(i.x,i.y,i.z):null},e.prototype.setBodyMass=function(t,e){var i=0===e;t.physicsBody.shapes.density=i?1:e,t.physicsBody.setupMass(i?2:1)},e.prototype.getBodyMass=function(t){return t.physicsBody.shapes.density},e.prototype.getBodyFriction=function(t){return t.physicsBody.shapes.friction},e.prototype.setBodyFriction=function(t,e){t.physicsBody.shapes.friction=e},e.prototype.getBodyRestitution=function(t){return t.physicsBody.shapes.restitution},e.prototype.setBodyRestitution=function(t,e){t.physicsBody.shapes.restitution=e},e.prototype.sleepBody=function(t){t.physicsBody.sleep()},e.prototype.wakeUpBody=function(t){t.physicsBody.awake()},e.prototype.updateDistanceJoint=function(t,e,i){t.physicsJoint.limitMotor.upperLimit=e,void 0!==i&&(t.physicsJoint.limitMotor.lowerLimit=i)},e.prototype.setMotor=function(t,e,i,n){var r=n?t.physicsJoint.rotationalLimitMotor2:t.physicsJoint.rotationalLimitMotor1||t.physicsJoint.rotationalLimitMotor||t.physicsJoint.limitMotor;r&&r.setMotor(e,i)},e.prototype.setLimit=function(t,e,i,n){var r=n?t.physicsJoint.rotationalLimitMotor2:t.physicsJoint.rotationalLimitMotor1||t.physicsJoint.rotationalLimitMotor||t.physicsJoint.limitMotor;r&&r.setLimit(e,void 0===i?-e:i)},e.prototype.syncMeshWithImpostor=function(t,e){var i=e.physicsBody;t.position.x=i.position.x,t.position.y=i.position.y,t.position.z=i.position.z,t.rotationQuaternion&&(t.rotationQuaternion.x=i.orientation.x,t.rotationQuaternion.y=i.orientation.y,t.rotationQuaternion.z=i.orientation.z,t.rotationQuaternion.w=i.orientation.s)},e.prototype.getRadius=function(t){return t.physicsBody.shapes.radius},e.prototype.getBoxSizeToRef=function(t,e){var i=t.physicsBody.shapes;e.x=2*i.halfWidth,e.y=2*i.halfHeight,e.z=2*i.halfDepth},e.prototype.dispose=function(){this.world.clear()},e}();t.OimoJSPlugin=e}(l||(l={})),function(t){var e=function(){function e(){}return e.GetTGAHeader=function(t){var e=0;return{id_length:t[e++],colormap_type:t[e++],image_type:t[e++],colormap_index:t[e++]|t[e++]<<8,colormap_length:t[e++]|t[e++]<<8,colormap_size:t[e++],origin:[t[e++]|t[e++]<<8,t[e++]|t[e++]<<8],width:t[e++]|t[e++]<<8,height:t[e++]|t[e++]<<8,pixel_size:t[e++],flags:t[e++]}},e.UploadContent=function(i,n){if(n.length<19)t.Tools.Error("Unable to load TGA file - Not enough data to contain header");else{var r=18,o=e.GetTGAHeader(n);if(o.id_length+r>n.length)t.Tools.Error("Unable to load TGA file - Not enough data");else{r+=o.id_length;var s=!1,a=!1,l=!1;switch(o.image_type){case e._TYPE_RLE_INDEXED:s=!0;case e._TYPE_INDEXED:a=!0;break;case e._TYPE_RLE_RGB:s=!0;case e._TYPE_RGB:break;case e._TYPE_RLE_GREY:s=!0;case e._TYPE_GREY:l=!0}var c,u,h,p,d,f,m,g,y=o.pixel_size>>3,_=o.width*o.height*y;if(a&&(u=n.subarray(r,r+=o.colormap_length*(o.colormap_size>>3))),s){c=new Uint8Array(_);for(var v,b,x,A=0,w=new Uint8Array(y);r<_&&A<_;)if(b=1+(127&(v=n[r++])),128&v){for(x=0;x<y;++x)w[x]=n[r++];for(x=0;x<b;++x)c.set(w,A+x*y);A+=y*b}else{for(b*=y,x=0;x<b;++x)c[A+x]=n[r++];A+=b}}else c=n.subarray(r,r+=a?o.width*o.height:_);switch((o.flags&e._ORIGIN_MASK)>>e._ORIGIN_SHIFT){default:case e._ORIGIN_UL:h=0,d=1,g=o.width,p=0,f=1,m=o.height;break;case e._ORIGIN_BL:h=0,d=1,g=o.width,p=o.height-1,f=-1,m=-1;break;case e._ORIGIN_UR:h=o.width-1,d=-1,g=-1,p=0,f=1,m=o.height;break;case e._ORIGIN_BR:h=o.width-1,d=-1,g=-1,p=o.height-1,f=-1,m=-1}var P=e["_getImageData"+(l?"Grey":"")+o.pixel_size+"bits"](o,u,c,p,f,m,h,d,g);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,o.width,o.height,0,i.RGBA,i.UNSIGNED_BYTE,P)}}},e._getImageData8bits=function(t,e,i,n,r,o,s,a,l){var c,u,h,p=i,d=e,f=t.width,m=t.height,g=0,y=new Uint8Array(f*m*4);for(h=n;h!==o;h+=r)for(u=s;u!==l;u+=a,g++)c=p[g],y[4*(u+f*h)+3]=255,y[4*(u+f*h)+2]=d[3*c+0],y[4*(u+f*h)+1]=d[3*c+1],y[4*(u+f*h)+0]=d[3*c+2];return y},e._getImageData16bits=function(t,e,i,n,r,o,s,a,l){var c,u,h,p=i,d=t.width,f=t.height,m=0,g=new Uint8Array(d*f*4);for(h=n;h!==o;h+=r)for(u=s;u!==l;u+=a,m+=2)c=p[m+0]+(p[m+1]<<8),g[4*(u+d*h)+0]=(31744&c)>>7,g[4*(u+d*h)+1]=(992&c)>>2,g[4*(u+d*h)+2]=(31&c)>>3,g[4*(u+d*h)+3]=32768&c?0:255;return g},e._getImageData24bits=function(t,e,i,n,r,o,s,a,l){var c,u,h=i,p=t.width,d=t.height,f=0,m=new Uint8Array(p*d*4);for(u=n;u!==o;u+=r)for(c=s;c!==l;c+=a,f+=3)m[4*(c+p*u)+3]=255,m[4*(c+p*u)+2]=h[f+0],m[4*(c+p*u)+1]=h[f+1],m[4*(c+p*u)+0]=h[f+2];return m},e._getImageData32bits=function(t,e,i,n,r,o,s,a,l){var c,u,h=i,p=t.width,d=t.height,f=0,m=new Uint8Array(p*d*4);for(u=n;u!==o;u+=r)for(c=s;c!==l;c+=a,f+=4)m[4*(c+p*u)+2]=h[f+0],m[4*(c+p*u)+1]=h[f+1],m[4*(c+p*u)+0]=h[f+2],m[4*(c+p*u)+3]=h[f+3];return m},e._getImageDataGrey8bits=function(t,e,i,n,r,o,s,a,l){var c,u,h,p=i,d=t.width,f=t.height,m=0,g=new Uint8Array(d*f*4);for(h=n;h!==o;h+=r)for(u=s;u!==l;u+=a,m++)c=p[m],g[4*(u+d*h)+0]=c,g[4*(u+d*h)+1]=c,g[4*(u+d*h)+2]=c,g[4*(u+d*h)+3]=255;return g},e._getImageDataGrey16bits=function(t,e,i,n,r,o,s,a,l){var c,u,h=i,p=t.width,d=t.height,f=0,m=new Uint8Array(p*d*4);for(u=n;u!==o;u+=r)for(c=s;c!==l;c+=a,f+=2)m[4*(c+p*u)+0]=h[f+0],m[4*(c+p*u)+1]=h[f+0],m[4*(c+p*u)+2]=h[f+0],m[4*(c+p*u)+3]=h[f+1];return m},e._TYPE_INDEXED=1,e._TYPE_RGB=2,e._TYPE_GREY=3,e._TYPE_RLE_INDEXED=9,e._TYPE_RLE_RGB=10,e._TYPE_RLE_GREY=11,e._ORIGIN_MASK=48,e._ORIGIN_SHIFT=4,e._ORIGIN_BL=0,e._ORIGIN_BR=1,e._ORIGIN_UL=2,e._ORIGIN_UR=3,e}();t.TGATools=e}(l||(l={})),function(t){function e(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var i=e("DXT1"),n=e("DXT3"),r=e("DXT5"),o=e("DX10"),s=function(){function e(){}return e.GetDDSInfo=function(e){var s=new Int32Array(e,0,31),a=new Int32Array(e,0,35),l=1;131072&s[2]&&(l=Math.max(1,s[7]));var c=s[21],u=c===o?a[32]:0,h=t.Engine.TEXTURETYPE_UNSIGNED_INT;switch(c){case 113:h=t.Engine.TEXTURETYPE_HALF_FLOAT;break;case 116:h=t.Engine.TEXTURETYPE_FLOAT;break;case o:if(10===u){h=t.Engine.TEXTURETYPE_HALF_FLOAT;break}}return{width:s[4],height:s[3],mipmapCount:l,isFourCC:4==(4&s[20]),isRGB:64==(64&s[20]),isLuminance:131072==(131072&s[20]),isCube:512==(512&s[28]),isCompressed:c===i||c===n||c===r,dxgiFormat:u,textureType:h}},e._ToHalfFloat=function(t){e._FloatView||(e._FloatView=new Float32Array(1),e._Int32View=new Int32Array(e._FloatView.buffer)),e._FloatView[0]=t;var i=e._Int32View[0],n=i>>16&32768,r=i>>12&2047,o=i>>23&255;return o<103?n:o>142?(n|=31744,n|=(255==o?0:1)&&8388607&i):o<113?n|=((r|=2048)>>114-o)+(r>>113-o&1):(n|=o-112<<10|r>>1,n+=1&r)},e._FromHalfFloat=function(t){var e=(32768&t)>>15,i=(31744&t)>>10,n=1023&t;return 0===i?(e?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31==i?n?NaN:1/0*(e?-1:1):(e?-1:1)*Math.pow(2,i-15)*(1+n/Math.pow(2,10))},e._GetHalfFloatAsFloatRGBAArrayBuffer=function(t,i,n,r,o,s){for(var a=new Float32Array(r),l=new Uint16Array(o,n),c=0,u=0;u<i;u++)for(var h=0;h<t;h++){var p=4*(h+u*t);a[c]=e._FromHalfFloat(l[p]),a[c+1]=e._FromHalfFloat(l[p+1]),a[c+2]=e._FromHalfFloat(l[p+2]),e.StoreLODInAlphaChannel?a[c+3]=s:a[c+3]=e._FromHalfFloat(l[p+3]),c+=4}return a},e._GetHalfFloatRGBAArrayBuffer=function(t,i,n,r,o,s){if(e.StoreLODInAlphaChannel){for(var a=new Uint16Array(r),l=new Uint16Array(o,n),c=0,u=0;u<i;u++)for(var h=0;h<t;h++){var p=4*(h+u*t);a[c]=l[p],a[c+1]=l[p+1],a[c+2]=l[p+2],a[c+3]=e._ToHalfFloat(s),c+=4}return a}return new Uint16Array(o,n,r)},e._GetFloatRGBAArrayBuffer=function(t,i,n,r,o,s){if(e.StoreLODInAlphaChannel){for(var a=new Float32Array(r),l=new Float32Array(o,n),c=0,u=0;u<i;u++)for(var h=0;h<t;h++){var p=4*(h+u*t);a[c]=l[p],a[c+1]=l[p+1],a[c+2]=l[p+2],a[c+3]=s,c+=4}return a}return new Float32Array(o,n,r)},e._GetFloatAsUIntRGBAArrayBuffer=function(i,n,r,o,s,a){for(var l=new Uint8Array(o),c=new Float32Array(s,r),u=0,h=0;h<n;h++)for(var p=0;p<i;p++){var d=4*(p+h*i);l[u]=255*t.Scalar.Clamp(c[d]),l[u+1]=255*t.Scalar.Clamp(c[d+1]),l[u+2]=255*t.Scalar.Clamp(c[d+2]),e.StoreLODInAlphaChannel?l[u+3]=a:l[u+3]=255*t.Scalar.Clamp(c[d+3]),u+=4}return l},e._GetHalfFloatAsUIntRGBAArrayBuffer=function(i,n,r,o,s,a){for(var l=new Uint8Array(o),c=new Uint16Array(s,r),u=0,h=0;h<n;h++)for(var p=0;p<i;p++){var d=4*(p+h*i);l[u]=255*t.Scalar.Clamp(e._FromHalfFloat(c[d])),l[u+1]=255*t.Scalar.Clamp(e._FromHalfFloat(c[d+1])),l[u+2]=255*t.Scalar.Clamp(e._FromHalfFloat(c[d+2])),e.StoreLODInAlphaChannel?l[u+3]=a:l[u+3]=255*t.Scalar.Clamp(e._FromHalfFloat(c[d+3])),u+=4}return l},e._GetRGBAArrayBuffer=function(t,e,i,n,r,o,s,a,l){for(var c=new Uint8Array(n),u=new Uint8Array(r,i),h=0,p=0;p<e;p++)for(var d=0;d<t;d++){var f=4*(d+p*t);c[h]=u[f+o],c[h+1]=u[f+s],c[h+2]=u[f+a],c[h+3]=u[f+l],h+=4}return c},e._ExtractLongWordOrder=function(t){return 0===t||255===t||-16777216===t?0:1+e._ExtractLongWordOrder(t>>8)},e._GetRGBArrayBuffer=function(t,e,i,n,r,o,s,a){for(var l=new Uint8Array(n),c=new Uint8Array(r,i),u=0,h=0;h<e;h++)for(var p=0;p<t;p++){var d=3*(p+h*t);l[u]=c[d+o],l[u+1]=c[d+s],l[u+2]=c[d+a],u+=3}return l},e._GetLuminanceArrayBuffer=function(t,e,i,n,r){for(var o=new Uint8Array(n),s=new Uint8Array(r,i),a=0,l=0;l<e;l++)for(var c=0;c<t;c++){var u=c+l*t;o[a]=s[u],a++}return o},e.UploadDDSLevels=function(s,a,l,c,u,h,p,d){void 0===p&&(p=-1);var f,m,g,y,_,v,b,x=s.getCaps().s3tc,A=new Int32Array(l,0,31),w=0,P=0,E=0,T=1;if(542327876===A[0])if(c.isFourCC||c.isRGB||c.isLuminance)if(!c.isCompressed||x){var S=A[22];y=A[1]+4;var C=!1;if(c.isFourCC)switch(f=A[21]){case i:T=8,P=x.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case n:T=16,P=x.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case r:T=16,P=x.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 113:case 116:C=!0;break;case o:y+=20;var O=!1;switch(c.dxgiFormat){case 10:C=!0,O=!0;break;case 88:c.isRGB=!0,c.isFourCC=!1,S=32,O=!0}if(O)break;default:return void console.error("Unsupported FourCC code:",function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}(f))}var M=e._ExtractLongWordOrder(A[23]),R=e._ExtractLongWordOrder(A[24]),I=e._ExtractLongWordOrder(A[25]),D=e._ExtractLongWordOrder(A[26]);C&&(E=s._getWebGLTextureType(c.textureType),P=s._getRGBABufferInternalSizedFormat(c.textureType)),v=1,131072&A[2]&&!1!==u&&(v=Math.max(1,A[7]));for(var L=0;L<h;L++){var k=1===h?a.TEXTURE_2D:a.TEXTURE_CUBE_MAP_POSITIVE_X+L+(d||0);for(m=A[4],g=A[3],b=0;b<v;++b){if(-1===p||p===b){var F=-1===p?b:0;if(!c.isCompressed&&c.isFourCC){w=m*g*4;var N=null;s.badOS||s.badDesktopOS||!s.getCaps().textureHalfFloat&&!s.getCaps().textureFloat?(128===S?N=e._GetFloatAsUIntRGBAArrayBuffer(m,g,y,w,l,F):64===S&&(N=e._GetHalfFloatAsUIntRGBAArrayBuffer(m,g,y,w,l,F)),c.textureType=t.Engine.TEXTURETYPE_UNSIGNED_INT,E=s._getWebGLTextureType(c.textureType),P=s._getRGBABufferInternalSizedFormat(c.textureType)):128===S?N=e._GetFloatRGBAArrayBuffer(m,g,y,w,l,F):64!==S||s.getCaps().textureHalfFloat?N=e._GetHalfFloatRGBAArrayBuffer(m,g,y,w,l,F):(N=e._GetHalfFloatAsFloatRGBAArrayBuffer(m,g,y,w,l,F),c.textureType=t.Engine.TEXTURETYPE_FLOAT,E=s._getWebGLTextureType(c.textureType),P=s._getRGBABufferInternalSizedFormat(c.textureType)),N&&s._uploadDataToTexture(k,F,P,m,g,a.RGBA,E,N)}else if(c.isRGB)24===S?(w=m*g*3,_=e._GetRGBArrayBuffer(m,g,y,w,l,M,R,I),s._uploadDataToTexture(k,F,a.RGB,m,g,a.RGB,a.UNSIGNED_BYTE,_)):(w=m*g*4,_=e._GetRGBAArrayBuffer(m,g,y,w,l,M,R,I,D),s._uploadDataToTexture(k,F,a.RGBA,m,g,a.RGBA,a.UNSIGNED_BYTE,_));else if(c.isLuminance){var B=a.getParameter(a.UNPACK_ALIGNMENT),V=m;w=Math.floor((m+B-1)/B)*B*(g-1)+V,_=e._GetLuminanceArrayBuffer(m,g,y,w,l),s._uploadDataToTexture(k,F,a.LUMINANCE,m,g,a.LUMINANCE,a.UNSIGNED_BYTE,_)}else w=Math.max(4,m)/4*Math.max(4,g)/4*T,_=new Uint8Array(l,y,w),s._uploadCompressedDataToTexture(k,F,P,m,g,_)}y+=S?m*g*(S/8):w,m*=.5,g*=.5,m=Math.max(1,m),g=Math.max(1,g)}if(void 0!==d)break}}else t.Tools.Error("Compressed textures are not supported on this platform.");else t.Tools.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");else t.Tools.Error("Invalid magic number in DDS header")},e.StoreLODInAlphaChannel=!1,e}();t.DDSTools=s}(l||(l={})),function(t){var e=function(){function e(i,n,r,o){this.arrayBuffer=i;var s=new Uint8Array(this.arrayBuffer,0,12);if(171===s[0]&&75===s[1]&&84===s[2]&&88===s[3]&&32===s[4]&&49===s[5]&&49===s[6]&&187===s[7]&&13===s[8]&&10===s[9]&&26===s[10]&&10===s[11]){var a=new Int32Array(this.arrayBuffer,12,13),l=16909060===a[0];return this.glType=l?this.switchEndainness(a[1]):a[1],this.glTypeSize=l?this.switchEndainness(a[2]):a[2],this.glFormat=l?this.switchEndainness(a[3]):a[3],this.glInternalFormat=l?this.switchEndainness(a[4]):a[4],this.glBaseInternalFormat=l?this.switchEndainness(a[5]):a[5],this.pixelWidth=l?this.switchEndainness(a[6]):a[6],this.pixelHeight=l?this.switchEndainness(a[7]):a[7],this.pixelDepth=l?this.switchEndainness(a[8]):a[8],this.numberOfArrayElements=l?this.switchEndainness(a[9]):a[9],this.numberOfFaces=l?this.switchEndainness(a[10]):a[10],this.numberOfMipmapLevels=l?this.switchEndainness(a[11]):a[11],this.bytesOfKeyValueData=l?this.switchEndainness(a[12]):a[12],0!==this.glType?void t.Tools.Error("only compressed formats currently supported"):(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0===this.pixelHeight||0!==this.pixelDepth?void t.Tools.Error("only 2D textures currently supported"):0!==this.numberOfArrayElements?void t.Tools.Error("texture arrays not currently supported"):this.numberOfFaces!==n?void t.Tools.Error("number of faces expected"+n+", but found "+this.numberOfFaces):void(this.loadType=e.COMPRESSED_2D))}t.Tools.Error("texture missing KTX identifier")}return e.prototype.switchEndainness=function(t){return(255&t)<<24|(65280&t)<<8|t>>8&65280|t>>24&255},e.prototype.uploadLevels=function(t,i){switch(this.loadType){case e.COMPRESSED_2D:this._upload2DCompressedLevels(t,i);break;case e.TEX_2D:case e.COMPRESSED_3D:case e.TEX_3D:}},e.prototype._upload2DCompressedLevels=function(t,i){for(var n=e.HEADER_LEN+this.bytesOfKeyValueData,r=this.pixelWidth,o=this.pixelHeight,s=i?this.numberOfMipmapLevels:1,a=0;a<s;a++){for(var l=new Int32Array(this.arrayBuffer,n,1)[0],c=0;c<this.numberOfFaces;c++){var u=1===this.numberOfFaces?t.TEXTURE_2D:t.TEXTURE_CUBE_MAP_POSITIVE_X+c,h=new Uint8Array(this.arrayBuffer,n+4,l);t.compressedTexImage2D(u,a,this.glInternalFormat,r,o,0,h),n+=l+4,n+=3-(l+3)%4}r=Math.max(1,.5*r),o=Math.max(1,.5*o)}},e.HEADER_LEN=64,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}();t.KhronosTextureContainer=e}(l||(l={})),function(t){var e=function(){function e(){}return e.AxesViewer=function(){function e(e,i){void 0===i&&(i=1),this._xline=[t.Vector3.Zero(),t.Vector3.Zero()],this._yline=[t.Vector3.Zero(),t.Vector3.Zero()],this._zline=[t.Vector3.Zero(),t.Vector3.Zero()],this.scaleLines=1,this.scaleLines=i,this._xmesh=t.Mesh.CreateLines("xline",this._xline,e,!0),this._ymesh=t.Mesh.CreateLines("yline",this._yline,e,!0),this._zmesh=t.Mesh.CreateLines("zline",this._zline,e,!0),this._xmesh.renderingGroupId=2,this._ymesh.renderingGroupId=2,this._zmesh.renderingGroupId=2,this._xmesh.material.checkReadyOnlyOnce=!0,this._xmesh.color=new t.Color3(1,0,0),this._ymesh.material.checkReadyOnlyOnce=!0,this._ymesh.color=new t.Color3(0,1,0),this._zmesh.material.checkReadyOnlyOnce=!0,this._zmesh.color=new t.Color3(0,0,1),this.scene=e}return e.prototype.update=function(e,i,n,r){var o=this.scaleLines;this._xmesh&&this._xmesh.position.copyFrom(e),this._ymesh&&this._ymesh.position.copyFrom(e),this._zmesh&&this._zmesh.position.copyFrom(e);var s=this._xline[1];s.x=i.x*o,s.y=i.y*o,s.z=i.z*o,t.Mesh.CreateLines("",this._xline,null,!1,this._xmesh),(s=this._yline[1]).x=n.x*o,s.y=n.y*o,s.z=n.z*o,t.Mesh.CreateLines("",this._yline,null,!1,this._ymesh),(s=this._zline[1]).x=r.x*o,s.y=r.y*o,s.z=r.z*o,t.Mesh.CreateLines("",this._zline,null,!1,this._zmesh)},e.prototype.dispose=function(){this._xmesh&&this._xmesh.dispose(),this._ymesh&&this._ymesh.dispose(),this._zmesh&&this._zmesh.dispose(),this._xmesh=null,this._ymesh=null,this._zmesh=null,this.scene=null},e}(),e.BoneAxesViewer=function(e){function i(i,n,r,o){void 0===o&&(o=1);var s=e.call(this,i,o)||this;return s.pos=t.Vector3.Zero(),s.xaxis=t.Vector3.Zero(),s.yaxis=t.Vector3.Zero(),s.zaxis=t.Vector3.Zero(),s.mesh=r,s.bone=n,s}return o(i,e),i.prototype.update=function(){if(this.mesh&&this.bone){var i=this.bone;i.getAbsolutePositionToRef(this.mesh,this.pos),i.getDirectionToRef(t.Axis.X,this.mesh,this.xaxis),i.getDirectionToRef(t.Axis.Y,this.mesh,this.yaxis),i.getDirectionToRef(t.Axis.Z,this.mesh,this.zaxis),e.prototype.update.call(this,this.pos,this.xaxis,this.yaxis,this.zaxis)}},i.prototype.dispose=function(){this.mesh&&(this.mesh=null,this.bone=null,e.prototype.dispose.call(this))},i}(e.AxesViewer),e.PhysicsViewer=function(){function e(e){this._impostors=[],this._meshes=[],this._numMeshes=0,this._scene=e||t.Engine.LastCreatedScene;var i=this._scene.getPhysicsEngine();i&&(this._physicsEnginePlugin=i.getPhysicsPlugin())}return e.prototype._updateDebugMeshes=function(){for(var t=this._physicsEnginePlugin,e=0;e<this._numMeshes;e++){var i=this._impostors[e];if(i)if(i.isDisposed)this.hideImpostor(this._impostors[e--]);else{var n=this._meshes[e];n&&t&&t.syncMeshWithImpostor(n,i)}}},e.prototype.showImpostor=function(t){if(this._scene){for(var e=0;e<this._numMeshes;e++)if(this._impostors[e]==t)return;var i=this._getDebugMesh(t,this._scene);i&&(this._impostors[this._numMeshes]=t,this._meshes[this._numMeshes]=i,0===this._numMeshes&&(this._renderFunction=this._updateDebugMeshes.bind(this),this._scene.registerBeforeRender(this._renderFunction)),this._numMeshes++)}},e.prototype.hideImpostor=function(t){if(t&&this._scene){for(var e=!1,i=0;i<this._numMeshes;i++)if(this._impostors[i]==t){var n=this._meshes[i];if(!n)continue;this._scene.removeMesh(n),n.dispose(),this._numMeshes--,this._numMeshes>0?(this._meshes[i]=this._meshes[this._numMeshes],this._impostors[i]=this._impostors[this._numMeshes],this._meshes[this._numMeshes]=null,this._impostors[this._numMeshes]=null):(this._meshes[0]=null,this._impostors[0]=null),e=!0;break}e&&0===this._numMeshes&&this._scene.unregisterBeforeRender(this._renderFunction)}},e.prototype._getDebugMaterial=function(e){return this._debugMaterial||(this._debugMaterial=new t.StandardMaterial("",e),this._debugMaterial.wireframe=!0),this._debugMaterial},e.prototype._getDebugBoxMesh=function(e){return this._debugBoxMesh||(this._debugBoxMesh=t.MeshBuilder.CreateBox("physicsBodyBoxViewMesh",{size:1},e),this._debugBoxMesh.renderingGroupId=1,this._debugBoxMesh.rotationQuaternion=t.Quaternion.Identity(),this._debugBoxMesh.material=this._getDebugMaterial(e),e.removeMesh(this._debugBoxMesh)),this._debugBoxMesh.createInstance("physicsBodyBoxViewInstance")},e.prototype._getDebugSphereMesh=function(e){return this._debugSphereMesh||(this._debugSphereMesh=t.MeshBuilder.CreateSphere("physicsBodySphereViewMesh",{diameter:1},e),this._debugSphereMesh.renderingGroupId=1,this._debugSphereMesh.rotationQuaternion=t.Quaternion.Identity(),this._debugSphereMesh.material=this._getDebugMaterial(e),e.removeMesh(this._debugSphereMesh)),this._debugSphereMesh.createInstance("physicsBodyBoxViewInstance")},e.prototype._getDebugMesh=function(e,i){var n=null;if(e.type==t.PhysicsImpostor.BoxImpostor)n=this._getDebugBoxMesh(i),e.getBoxSizeToRef(n.scaling);else if(e.type==t.PhysicsImpostor.SphereImpostor){n=this._getDebugSphereMesh(i);var r=e.getRadius();n.scaling.x=2*r,n.scaling.y=2*r,n.scaling.z=2*r}return n},e.prototype.dispose=function(){for(var t=0;t<this._numMeshes;t++)this.hideImpostor(this._impostors[t]);this._debugBoxMesh&&this._debugBoxMesh.dispose(),this._debugSphereMesh&&this._debugSphereMesh.dispose(),this._debugMaterial&&this._debugMaterial.dispose(),this._impostors.length=0,this._scene=null,this._physicsEnginePlugin=null},e}(),e.SkeletonViewer=function(){function e(e,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=1),this.skeleton=e,this.mesh=i,this.autoUpdateBonesMatrices=r,this.renderingGroupId=o,this.color=t.Color3.White(),this._debugLines=new Array,this._isEnabled=!1,this._scene=n,this.update(),this._renderFunction=this.update.bind(this)}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,t?this._scene.registerBeforeRender(this._renderFunction):this._scene.unregisterBeforeRender(this._renderFunction))},enumerable:!0,configurable:!0}),e.prototype._getBonePosition=function(e,i,n,r,o,s){void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=t.Tmp.Matrix[0],l=i.getParent();if(a.copyFrom(i.getLocalMatrix()),0!==r||0!==o||0!==s){var c=t.Tmp.Matrix[1];t.Matrix.IdentityToRef(c),c.m[12]=r,c.m[13]=o,c.m[14]=s,c.multiplyToRef(a,a)}l&&a.multiplyToRef(l.getAbsoluteTransform(),a),a.multiplyToRef(n,a),e.x=a.m[12],e.y=a.m[13],e.z=a.m[14]},e.prototype._getLinesForBonesWithLength=function(e,i){for(var n=e.length,r=this.mesh.position,o=0;o<n;o++){var s=e[o],a=this._debugLines[o];a||(a=[t.Vector3.Zero(),t.Vector3.Zero()],this._debugLines[o]=a),this._getBonePosition(a[0],s,i),this._getBonePosition(a[1],s,i,0,s.length,0),a[0].subtractInPlace(r),a[1].subtractInPlace(r)}},e.prototype._getLinesForBonesNoLength=function(e,i){for(var n=e.length,r=0,o=this.mesh.position,s=n-1;s>=0;s--){var a=e[s],l=a.getParent();if(l){var c=this._debugLines[r];c||(c=[t.Vector3.Zero(),t.Vector3.Zero()],this._debugLines[r]=c),a.getAbsolutePositionToRef(this.mesh,c[0]),l.getAbsolutePositionToRef(this.mesh,c[1]),c[0].subtractInPlace(o),c[1].subtractInPlace(o),r++}}},e.prototype.update=function(){this.autoUpdateBonesMatrices&&this.skeleton.computeAbsoluteTransforms(),void 0===this.skeleton.bones[0].length?this._getLinesForBonesNoLength(this.skeleton.bones,this.mesh.getWorldMatrix()):this._getLinesForBonesWithLength(this.skeleton.bones,this.mesh.getWorldMatrix()),this._debugMesh?t.MeshBuilder.CreateLineSystem("",{lines:this._debugLines,updatable:!0,instance:this._debugMesh},this._scene):(this._debugMesh=t.MeshBuilder.CreateLineSystem("",{lines:this._debugLines,updatable:!0,instance:null},this._scene),this._debugMesh.renderingGroupId=this.renderingGroupId),this._debugMesh.position.copyFrom(this.mesh.position),this._debugMesh.color=this.color},e.prototype.dispose=function(){this._debugMesh&&(this.isEnabled=!1,this._debugMesh.dispose(),this._debugMesh=null)},e}(),e}();t.Debug=e}(l||(l={})),function(t){var e=function(){function e(t){this.ray=t}return e.CreateAndShow=function(t,i,n){var r=new e(t);return r.show(i,n),r},e.prototype.show=function(e,i){if(!this._renderFunction&&this.ray){var n=this.ray;this._renderFunction=this._render.bind(this),this._scene=e,this._renderPoints=[n.origin,n.origin.add(n.direction.scale(n.length))],this._renderLine=t.Mesh.CreateLines("ray",this._renderPoints,e,!0),this._renderFunction&&this._scene.registerBeforeRender(this._renderFunction)}i&&this._renderLine&&this._renderLine.color.copyFrom(i)},e.prototype.hide=function(){this._renderFunction&&this._scene&&(this._scene.unregisterBeforeRender(this._renderFunction),this._scene=null,this._renderFunction=null,this._renderLine&&(this._renderLine.dispose(),this._renderLine=null),this._renderPoints=[])},e.prototype._render=function(){var e=this.ray;if(e){var i=this._renderPoints[1],n=Math.min(e.length,1e6);i.copyFrom(e.direction),i.scaleInPlace(n),i.addInPlace(e.origin),t.Mesh.CreateLines("ray",this._renderPoints,this._scene,!0,this._renderLine)}},e.prototype.attachToMesh=function(e,i,n,r){this._attachedToMesh=e;var o=this.ray;o&&(o.direction||(o.direction=t.Vector3.Zero()),o.origin||(o.origin=t.Vector3.Zero()),r&&(o.length=r),n||(n=t.Vector3.Zero()),i||(i=new t.Vector3(0,0,-1)),this._meshSpaceDirection?(this._meshSpaceDirection.copyFrom(i),this._meshSpaceOrigin.copyFrom(n)):(this._meshSpaceDirection=i.clone(),this._meshSpaceOrigin=n.clone()),this._updateToMeshFunction||(this._updateToMeshFunction=this._updateToMesh.bind(this),this._attachedToMesh.getScene().registerBeforeRender(this._updateToMeshFunction)),this._updateToMesh())},e.prototype.detachFromMesh=function(){this._attachedToMesh&&(this._updateToMeshFunction&&this._attachedToMesh.getScene().unregisterBeforeRender(this._updateToMeshFunction),this._attachedToMesh=null,this._updateToMeshFunction=null)},e.prototype._updateToMesh=function(){var e=this.ray;if(this._attachedToMesh&&e){if(this._attachedToMesh._isDisposed)return void this.detachFromMesh();this._attachedToMesh.getDirectionToRef(this._meshSpaceDirection,e.direction),t.Vector3.TransformCoordinatesToRef(this._meshSpaceOrigin,this._attachedToMesh.getWorldMatrix(),e.origin)}},e.prototype.dispose=function(){this.hide(),this.detachFromMesh(),this.ray=null},e}();t.RayHelper=e}(l||(l={})),function(t){var e=function(){function e(t){this.BJSINSPECTOR="undefined"!=typeof INSPECTOR?INSPECTOR:void 0,this._scene=t}return e.prototype._createInspector=function(t){void 0===t&&(t={});var e=t.popup||!1,i=t.initialTab||0,n=t.parentElement||null;this._inspector||(this.BJSINSPECTOR=this.BJSINSPECTOR||"undefined"!=typeof INSPECTOR?INSPECTOR:void 0,this._inspector=new this.BJSINSPECTOR.Inspector(this._scene,e,i,n,t.newColors))},e.prototype.isVisible=function(){return!!this._inspector},e.prototype.hide=function(){if(this._inspector){try{this._inspector.dispose()}catch(t){}this._inspector=null}},e.prototype.show=function(i){void 0===i&&(i={}),void 0===this.BJSINSPECTOR?t.Tools.LoadScript(e.InspectorURL,this._createInspector.bind(this,i)):this._createInspector(i)},e.InspectorURL="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js",e}();t.DebugLayer=e}(l||(l={})),function(t){var e=function(){function e(e){this.frontColor=new t.Color3(1,1,1),this.backColor=new t.Color3(.1,.1,.1),this.showBackLines=!0,this.renderList=new t.SmartArray(32),this._vertexBuffers={},this._scene=e}return e.prototype._prepareRessources=function(){if(!this._colorShader){this._colorShader=new t.ShaderMaterial("colorShader",this._scene,"color",{attributes:[t.VertexBuffer.PositionKind],uniforms:["world","viewProjection","color"]});var e=this._scene.getEngine(),i=t.VertexData.CreateBox({size:1});this._vertexBuffers[t.VertexBuffer.PositionKind]=new t.VertexBuffer(e,i.positions,t.VertexBuffer.PositionKind,!1),this._createIndexBuffer()}},e.prototype._createIndexBuffer=function(){var t=this._scene.getEngine();this._indexBuffer=t.createIndexBuffer([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,7,1,6,2,5,3,4])},e.prototype._rebuild=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&e._rebuild(),this._createIndexBuffer()},e.prototype.reset=function(){this.renderList.reset()},e.prototype.render=function(){if(0!==this.renderList.length&&(this._prepareRessources(),this._colorShader.isReady())){var e=this._scene.getEngine();e.setDepthWrite(!1),this._colorShader._preBind();for(var i=0;i<this.renderList.length;i++){var n=this.renderList.data[i],r=n.minimum,o=n.maximum.subtract(r),s=r.add(o.scale(.5)),a=t.Matrix.Scaling(o.x,o.y,o.z).multiply(t.Matrix.Translation(s.x,s.y,s.z)).multiply(n.getWorldMatrix());e.bindBuffers(this._vertexBuffers,this._indexBuffer,this._colorShader.getEffect()),this.showBackLines&&(e.setDepthFunctionToGreaterOrEqual(),this._scene.resetCachedMaterial(),this._colorShader.setColor4("color",this.backColor.toColor4()),this._colorShader.bind(a),e.drawElementsType(t.Material.LineListDrawMode,0,24)),e.setDepthFunctionToLess(),this._scene.resetCachedMaterial(),this._colorShader.setColor4("color",this.frontColor.toColor4()),this._colorShader.bind(a),e.drawElementsType(t.Material.LineListDrawMode,0,24)}this._colorShader.unbind(),e.setDepthFunctionToLessOrEqual(),e.setDepthWrite(!0)}},e.prototype.renderOcclusionBoundingBox=function(e){if(this._prepareRessources(),this._colorShader.isReady()&&e._boundingInfo){var i=this._scene.getEngine();i.setDepthWrite(!1),i.setColorWrite(!1),this._colorShader._preBind();var n=e._boundingInfo.boundingBox,r=n.minimum,o=n.maximum.subtract(r),s=r.add(o.scale(.5)),a=t.Matrix.Scaling(o.x,o.y,o.z).multiply(t.Matrix.Translation(s.x,s.y,s.z)).multiply(n.getWorldMatrix());i.bindBuffers(this._vertexBuffers,this._indexBuffer,this._colorShader.getEffect()),i.setDepthFunctionToLess(),this._scene.resetCachedMaterial(),this._colorShader.bind(a),i.drawElementsType(t.Material.LineListDrawMode,0,24),this._colorShader.unbind(),i.setDepthFunctionToLessOrEqual(),i.setDepthWrite(!0),i.setColorWrite(!0)}},e.prototype.dispose=function(){if(this._colorShader){this.renderList.dispose(),this._colorShader.dispose();var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&(e.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._scene.getEngine()._releaseBuffer(this._indexBuffer)}},e}();t.BoundingBoxRenderer=e}(l||(l={})),function(t){var e=function(){function e(e,i){void 0===i&&(i=0),this.name=e,this.animations=new Array,this._positions=null,this._normals=null,this._tangents=null,this.onInfluenceChanged=new t.Observable,this.influence=i}return Object.defineProperty(e.prototype,"influence",{get:function(){return this._influence},set:function(t){if(this._influence!==t){var e=this._influence;this._influence=t,this.onInfluenceChanged.hasObservers&&this.onInfluenceChanged.notifyObservers(0===e||0===t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPositions",{get:function(){return!!this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNormals",{get:function(){return!!this._normals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTangents",{get:function(){return!!this._tangents},enumerable:!0,configurable:!0}),e.prototype.setPositions=function(t){this._positions=t},e.prototype.getPositions=function(){return this._positions},e.prototype.setNormals=function(t){this._normals=t},e.prototype.getNormals=function(){return this._normals},e.prototype.setTangents=function(t){this._tangents=t},e.prototype.getTangents=function(){return this._tangents},e.prototype.serialize=function(){var e={};return e.name=this.name,e.influence=this.influence,e.positions=Array.prototype.slice.call(this.getPositions()),this.hasNormals&&(e.normals=Array.prototype.slice.call(this.getNormals())),this.hasTangents&&(e.tangents=Array.prototype.slice.call(this.getTangents())),t.Animation.AppendSerializedAnimations(this,e),e},e.Parse=function(i){var n=new e(i.name,i.influence);if(n.setPositions(i.positions),i.normals&&n.setNormals(i.normals),i.tangents&&n.setTangents(i.tangents),i.animations)for(var r=0;r<i.animations.length;r++){var o=i.animations[r];n.animations.push(t.Animation.Parse(o))}return n},e.FromMesh=function(i,n,r){n||(n=i.name);var o=new e(n,r);return o.setPositions(i.getVerticesData(t.VertexBuffer.PositionKind)),i.isVerticesDataPresent(t.VertexBuffer.NormalKind)&&o.setNormals(i.getVerticesData(t.VertexBuffer.NormalKind)),i.isVerticesDataPresent(t.VertexBuffer.TangentKind)&&o.setTangents(i.getVerticesData(t.VertexBuffer.TangentKind)),o},e}();t.MorphTarget=e}(l||(l={})),function(t){var e=function(){function e(e){void 0===e&&(e=null),this._targets=new Array,this._targetObservable=new Array,this._activeTargets=new t.SmartArray(16),this._supportsNormals=!1,this._supportsTangents=!1,this._vertexCount=0,this._uniqueId=0,this._tempInfluences=new Array,e||(e=t.Engine.LastCreatedScene),this._scene=e,this._scene&&(this._scene.morphTargetManagers.push(this),this._uniqueId=this._scene.getUniqueId())}return Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this._uniqueId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexCount",{get:function(){return this._vertexCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportsNormals",{get:function(){return this._supportsNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportsTangents",{get:function(){return this._supportsTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numTargets",{get:function(){return this._targets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numInfluencers",{get:function(){return this._activeTargets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"influences",{get:function(){return this._influences},enumerable:!0,configurable:!0}),e.prototype.getActiveTarget=function(t){return this._activeTargets.data[t]},e.prototype.getTarget=function(t){return this._targets[t]},e.prototype.addTarget=function(t){var e=this;this._targets.push(t),this._targetObservable.push(t.onInfluenceChanged.add(function(t){e._syncActiveTargets(t)})),this._syncActiveTargets(!0)},e.prototype.removeTarget=function(t){var e=this._targets.indexOf(t);e>=0&&(this._targets.splice(e,1),t.onInfluenceChanged.remove(this._targetObservable.splice(e,1)[0]),this._syncActiveTargets(!0))},e.prototype.serialize=function(){var t={};t.id=this.uniqueId,t.targets=[];for(var e=0,i=this._targets;e<i.length;e++){var n=i[e];t.targets.push(n.serialize())}return t},e.prototype._syncActiveTargets=function(e){var i=0;this._activeTargets.reset(),this._supportsNormals=!0,this._supportsTangents=!0,this._vertexCount=0;for(var n=0,r=this._targets;n<r.length;n++){var o=r[n];this._activeTargets.push(o),this._tempInfluences[i++]=o.influence;var s=o.getPositions();if(s){this._supportsNormals=this._supportsNormals&&o.hasNormals,this._supportsTangents=this._supportsTangents&&o.hasTangents;var a=s.length/3;if(0===this._vertexCount)this._vertexCount=a;else if(this._vertexCount!==a)return void t.Tools.Error("Incompatible target. Targets must all have the same vertices count.")}}this._influences&&this._influences.length===i||(this._influences=new Float32Array(i));for(var l=0;l<i;l++)this._influences[l]=this._tempInfluences[l];if(e&&this._scene)for(var c=0,u=this._scene.meshes;c<u.length;c++){var h=u[c];h.morphTargetManager===this&&h._syncGeometryWithMorphTargetManager()}},e.Parse=function(i,n){var r=new e(n);r._uniqueId=i.id;for(var o=0,s=i.targets;o<s.length;o++){var a=s[o];r.addTarget(t.MorphTarget.Parse(a))}return r},e}();t.MorphTargetManager=e}(l||(l={})),function(t){var e=function(){function e(e,i,n){void 0===n&&(n=2),this.maxDepth=n,this.dynamicContent=new Array,this._maxBlockCapacity=i||64,this._selectionContent=new t.SmartArrayNoDuplicate(1024),this._creationFunc=e}return e.prototype.update=function(t,i,n){e._CreateBlocks(t,i,n,this._maxBlockCapacity,0,this.maxDepth,this,this._creationFunc)},e.prototype.addMesh=function(t){for(var e=0;e<this.blocks.length;e++)this.blocks[e].addEntry(t)},e.prototype.select=function(t,e){this._selectionContent.reset();for(var i=0;i<this.blocks.length;i++)this.blocks[i].select(t,this._selectionContent,e);return e?this._selectionContent.concat(this.dynamicContent):this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e.prototype.intersects=function(t,e,i){this._selectionContent.reset();for(var n=0;n<this.blocks.length;n++)this.blocks[n].intersects(t,e,this._selectionContent,i);return i?this._selectionContent.concat(this.dynamicContent):this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e.prototype.intersectsRay=function(t){this._selectionContent.reset();for(var e=0;e<this.blocks.length;e++)this.blocks[e].intersectsRay(t,this._selectionContent);return this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e._CreateBlocks=function(e,i,n,r,o,s,a,l){a.blocks=new Array;for(var c=new t.Vector3((i.x-e.x)/2,(i.y-e.y)/2,(i.z-e.z)/2),u=0;u<2;u++)for(var h=0;h<2;h++)for(var p=0;p<2;p++){var d=e.add(c.multiplyByFloats(u,h,p)),f=e.add(c.multiplyByFloats(u+1,h+1,p+1)),m=new t.OctreeBlock(d,f,r,o+1,s,l);m.addEntries(n),a.blocks.push(m)}},e.CreationFuncForMeshes=function(t,e){var i=t.getBoundingInfo();!t.isBlocked&&i.boundingBox.intersectsMinMax(e.minPoint,e.maxPoint)&&e.entries.push(t)},e.CreationFuncForSubMeshes=function(t,e){t.getBoundingInfo().boundingBox.intersectsMinMax(e.minPoint,e.maxPoint)&&e.entries.push(t)},e}();t.Octree=e}(l||(l={})),function(t){var e=function(){function e(t,e,i,n,r,o){this.entries=new Array,this._boundingVectors=new Array,this._capacity=i,this._depth=n,this._maxDepth=r,this._creationFunc=o,this._minPoint=t,this._maxPoint=e,this._boundingVectors.push(t.clone()),this._boundingVectors.push(e.clone()),this._boundingVectors.push(t.clone()),this._boundingVectors[2].x=e.x,this._boundingVectors.push(t.clone()),this._boundingVectors[3].y=e.y,this._boundingVectors.push(t.clone()),this._boundingVectors[4].z=e.z,this._boundingVectors.push(e.clone()),this._boundingVectors[5].z=t.z,this._boundingVectors.push(e.clone()),this._boundingVectors[6].x=t.x,this._boundingVectors.push(e.clone()),this._boundingVectors[7].y=t.y}return Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPoint",{get:function(){return this._minPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPoint",{get:function(){return this._maxPoint},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(t){if(this.blocks)for(var e=0;e<this.blocks.length;e++){this.blocks[e].addEntry(t)}else this._creationFunc(t,this),this.entries.length>this.capacity&&this._depth<this._maxDepth&&this.createInnerBlocks()},e.prototype.addEntries=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.addEntry(i)}},e.prototype.select=function(e,i,n){if(t.BoundingBox.IsInFrustum(this._boundingVectors,e)){if(this.blocks){for(var r=0;r<this.blocks.length;r++)this.blocks[r].select(e,i,n);return}n?i.concat(this.entries):i.concatWithNoDuplicate(this.entries)}},e.prototype.intersects=function(e,i,n,r){if(t.BoundingBox.IntersectsSphere(this._minPoint,this._maxPoint,e,i)){if(this.blocks){for(var o=0;o<this.blocks.length;o++)this.blocks[o].intersects(e,i,n,r);return}r?n.concat(this.entries):n.concatWithNoDuplicate(this.entries)}},e.prototype.intersectsRay=function(t,e){if(t.intersectsBoxMinMax(this._minPoint,this._maxPoint)){if(this.blocks){for(var i=0;i<this.blocks.length;i++)this.blocks[i].intersectsRay(t,e);return}e.concatWithNoDuplicate(this.entries)}},e.prototype.createInnerBlocks=function(){t.Octree._CreateBlocks(this._minPoint,this._maxPoint,this.entries,this._capacity,this._depth,this._maxDepth,this,this._creationFunc)},e}();t.OctreeBlock=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,i,"vrDistortionCorrection",["LensCenter","Scale","ScaleIn","HmdWarpParam"],null,o.postProcessScaleFactor,n,t.Texture.BILINEAR_SAMPLINGMODE)||this;return s._isRightEye=r,s._distortionFactors=o.distortionK,s._postProcessScaleFactor=o.postProcessScaleFactor,s._lensCenterOffset=o.lensCenterOffset,s.adaptScaleToCurrentViewport=!0,s.onSizeChangedObservable.add(function(){s.aspectRatio=.5*s.width/s.height,s._scaleIn=new t.Vector2(2,2/s.aspectRatio),s._scaleFactor=new t.Vector2(1/s._postProcessScaleFactor*.5,1/s._postProcessScaleFactor*.5*s.aspectRatio),s._lensCenter=new t.Vector2(s._isRightEye?.5-.5*s._lensCenterOffset:.5+.5*s._lensCenterOffset,.5)}),s.onApplyObservable.add(function(t){t.setFloat2("LensCenter",s._lensCenter.x,s._lensCenter.y),t.setFloat2("Scale",s._scaleFactor.x,s._scaleFactor.y),t.setFloat2("ScaleIn",s._scaleIn.x,s._scaleIn.y),t.setFloat4("HmdWarpParam",s._distortionFactors[0],s._distortionFactors[1],s._distortionFactors[2],s._distortionFactors[3])}),s}return o(i,e),i}(t.PostProcess);t.VRDistortionCorrectionPostProcess=e}(l||(l={})),function(t){var e=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,"anaglyph",null,["leftSampler"],i,n[1],r,o,s)||this;return a._passedProcess=n[0]._rigPostProcess,a.onApplyObservable.add(function(t){t.setTextureFromPostProcess("leftSampler",a._passedProcess)}),a}return o(e,t),e}(t.PostProcess);t.AnaglyphPostProcess=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a){var l=e.call(this,i,"stereoscopicInterlace",["stepSize"],["camASampler"],1,n[1],o,s,a,r?"#define IS_STEREOSCOPIC_HORIZ 1":void 0)||this;return l._passedProcess=n[0]._rigPostProcess,l._stepSize=new t.Vector2(1/l.width,1/l.height),l.onSizeChangedObservable.add(function(){l._stepSize=new t.Vector2(1/l.width,1/l.height)}),l.onApplyObservable.add(function(t){t.setTextureFromPostProcess("camASampler",l._passedProcess),t.setFloat2("stepSize",l._stepSize.x,l._stepSize.y)}),l}return o(i,e),i}(t.PostProcess);t.StereoscopicInterlacePostProcess=e}(l||(l={})),function(t){var e=function(){function e(){var e=this;this._screenOrientationAngle=0,this._screenQuaternion=new t.Quaternion,this._alpha=0,this._beta=0,this._gamma=0,this._orientationChanged=function(){e._screenOrientationAngle=void 0!==window.orientation?+window.orientation:window.screen.orientation&&window.screen.orientation.angle?window.screen.orientation.angle:0,e._screenOrientationAngle=-t.Tools.ToRadians(e._screenOrientationAngle/2),e._screenQuaternion.copyFromFloats(0,Math.sin(e._screenOrientationAngle),0,Math.cos(e._screenOrientationAngle))},this._deviceOrientation=function(t){e._alpha=null!==t.alpha?t.alpha:0,e._beta=null!==t.beta?t.beta:0,e._gamma=null!==t.gamma?t.gamma:0},this._constantTranform=new t.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),this._orientationChanged()}return Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},set:function(e){this._camera=e,null==this._camera||this._camera.rotationQuaternion||(this._camera.rotationQuaternion=new t.Quaternion)},enumerable:!0,configurable:!0}),e.prototype.attachControl=function(t,e){window.addEventListener("orientationchange",this._orientationChanged),window.addEventListener("deviceorientation",this._deviceOrientation),this._orientationChanged()},e.prototype.detachControl=function(t){window.removeEventListener("orientationchange",this._orientationChanged),window.removeEventListener("deviceorientation",this._deviceOrientation)},e.prototype.checkInputs=function(){this._alpha&&(t.Quaternion.RotationYawPitchRollToRef(t.Tools.ToRadians(this._alpha),t.Tools.ToRadians(this._beta),-t.Tools.ToRadians(this._gamma),this.camera.rotationQuaternion),this._camera.rotationQuaternion.multiplyInPlace(this._screenQuaternion),this._camera.rotationQuaternion.multiplyInPlace(this._constantTranform),this._camera.rotationQuaternion.z*=-1,this._camera.rotationQuaternion.w*=-1)},e.prototype.getClassName=function(){return"FreeCameraDeviceOrientationInput"},e.prototype.getSimpleName=function(){return"deviceOrientation"},e}();t.FreeCameraDeviceOrientationInput=e,t.CameraInputTypes.FreeCameraDeviceOrientationInput=e}(l||(l={})),function(t){var e=function(){function t(){this.alphaCorrection=1,this.betaCorrection=1,this.gammaCorrection=1,this._alpha=0,this._gamma=0,this._dirty=!1,this._deviceOrientationHandler=this._onOrientationEvent.bind(this)}return t.prototype.attachControl=function(t,e){this.camera.attachControl(t,e),window.addEventListener("deviceorientation",this._deviceOrientationHandler)},t.prototype._onOrientationEvent=function(t){null!==t.alpha&&(this._alpha=0|+t.alpha),null!==t.gamma&&(this._gamma=0|+t.gamma),this._dirty=!0},t.prototype.checkInputs=function(){this._dirty&&(this._dirty=!1,this._gamma<0&&(this._gamma=180+this._gamma),this.camera.alpha=-this._alpha/180*Math.PI%Math.PI*2,this.camera.beta=this._gamma/180*Math.PI)},t.prototype.detachControl=function(t){window.removeEventListener("deviceorientation",this._deviceOrientationHandler)},t.prototype.getClassName=function(){return"ArcRotateCameraVRDeviceOrientationInput"},t.prototype.getSimpleName=function(){return"VRDeviceOrientation"},t}();t.ArcRotateCameraVRDeviceOrientationInput=e,t.CameraInputTypes.ArcRotateCameraVRDeviceOrientationInput=e}(l||(l={})),function(t){var e=function(){function e(){this.compensateDistortion=!0}return Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this.hResolution/(2*this.vResolution)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatioFov",{get:function(){return 2*Math.atan(this.postProcessScaleFactor*this.vScreenSize/(2*this.eyeToScreenDistance))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftHMatrix",{get:function(){var e=4*(this.hScreenSize/4-this.lensSeparationDistance/2)/this.hScreenSize;return t.Matrix.Translation(e,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightHMatrix",{get:function(){var e=4*(this.hScreenSize/4-this.lensSeparationDistance/2)/this.hScreenSize;return t.Matrix.Translation(-e,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftPreViewMatrix",{get:function(){return t.Matrix.Translation(.5*this.interpupillaryDistance,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightPreViewMatrix",{get:function(){return t.Matrix.Translation(-.5*this.interpupillaryDistance,0,0)},enumerable:!0,configurable:!0}),e.GetDefault=function(){var t=new e;return t.hResolution=1280,t.vResolution=800,t.hScreenSize=.149759993,t.vScreenSize=.0935999975,t.vScreenCenter=.0467999987,t.eyeToScreenDistance=.0410000011,t.lensSeparationDistance=.063500002,t.interpupillaryDistance=.064000003,t.distortionK=[1,.219999999,.239999995,0],t.chromaAbCorrection=[.995999992,-.00400000019,1.01400006,0],t.postProcessScaleFactor=1.714605507808412,t.lensCenterOffset=.151976421,t},e}();t.VRCameraMetrics=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){void 0===o&&(o={});var s=e.call(this,i,n,r)||this;s.webVROptions=o,s._vrDevice=null,s.rawPose=null,s._specsVersion="1.1",s._attached=!1,s._descendants=[],s._deviceRoomPosition=t.Vector3.Zero(),s._deviceRoomRotationQuaternion=t.Quaternion.Identity(),s._standingMatrix=null,s.devicePosition=t.Vector3.Zero(),s.deviceRotationQuaternion=t.Quaternion.Identity(),s.deviceScaleFactor=1,s._deviceToWorld=t.Matrix.Identity(),s._worldToDevice=t.Matrix.Identity(),s.controllers=[],s.onControllersAttachedObservable=new t.Observable,s.onControllerMeshLoadedObservable=new t.Observable,s.rigParenting=!0,s._defaultHeight=void 0,s._workingVector=t.Vector3.Zero(),s._oneVector=t.Vector3.One(),s._workingMatrix=t.Matrix.Identity(),s._cache.position=t.Vector3.Zero(),o.defaultHeight&&(s._defaultHeight=o.defaultHeight,s.position.y=s._defaultHeight),s.minZ=.1,5===arguments.length&&(s.webVROptions=arguments[4]),null==s.webVROptions.trackPosition&&(s.webVROptions.trackPosition=!0),null==s.webVROptions.controllerMeshes&&(s.webVROptions.controllerMeshes=!0),null==s.webVROptions.defaultLightingOnControllers&&(s.webVROptions.defaultLightingOnControllers=!0),s.rotationQuaternion=new t.Quaternion,s.webVROptions&&s.webVROptions.positionScale&&(s.deviceScaleFactor=s.webVROptions.positionScale);var a=s.getEngine();return s._onVREnabled=function(t){t&&s.initControllers()},a.onVRRequestPresentComplete.add(s._onVREnabled),a.initWebVR().add(function(e){e.vrDisplay&&s._vrDevice!==e.vrDisplay&&(s._vrDevice=e.vrDisplay,s.setCameraRigMode(t.Camera.RIG_MODE_WEBVR,{parentCamera:s,vrDisplay:s._vrDevice,frameData:s._frameData,specs:s._specsVersion}),s._attached&&s.getEngine().enableVR())}),"undefined"!=typeof VRFrameData&&(s._frameData=new VRFrameData),r.onBeforeCameraRenderObservable.add(function(t){t.parent===s&&s.rigParenting&&(s._descendants=s.getDescendants(!0,function(t){var e=s.controllers.some(function(e){return e._mesh===t}),i=-1!==s._rigCameras.indexOf(t);return!e&&!i}),s._descendants.forEach(function(e){e.parent=t}))}),r.onAfterCameraRenderObservable.add(function(t){t.parent===s&&s.rigParenting&&s._descendants.forEach(function(t){t.parent=s})}),s}return o(i,e),i.prototype.deviceDistanceToRoomGround=function(){return this._standingMatrix&&void 0===this._defaultHeight?(this._standingMatrix.getTranslationToRef(this._workingVector),this._deviceRoomPosition.y+this._workingVector.y):this._defaultHeight||0},i.prototype.useStandingMatrix=function(e){var i=this;void 0===e&&(e=function(t){}),navigator&&navigator.getVRDisplays?navigator.getVRDisplays().then(function(n){n&&n[0]&&n[0].stageParameters&&n[0].stageParameters.sittingToStandingTransform?(i._standingMatrix=new t.Matrix,t.Matrix.FromFloat32ArrayToRefScaled(n[0].stageParameters.sittingToStandingTransform,0,1,i._standingMatrix),i.getScene().useRightHandedSystem||[2,6,8,9,14].forEach(function(t){i._standingMatrix&&(i._standingMatrix.m[t]*=-1)}),e(!0)):e(!1)}):e(!1)},i.prototype.dispose=function(){this.getEngine().onVRRequestPresentComplete.removeCallback(this._onVREnabled),e.prototype.dispose.call(this)},i.prototype.getControllerByName=function(t){for(var e=0,i=this.controllers;e<i.length;e++){var n=i[e];if(n.hand===t)return n}return null},Object.defineProperty(i.prototype,"leftController",{get:function(){return this._leftController||(this._leftController=this.getControllerByName("left")),this._leftController},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightController",{get:function(){return this._rightController||(this._rightController=this.getControllerByName("right")),this._rightController},enumerable:!0,configurable:!0}),i.prototype.getForwardRay=function(t){return void 0===t&&(t=100),this.leftCamera?e.prototype.getForwardRay.call(this,t,this.leftCamera.getWorldMatrix(),this.leftCamera.globalPosition):e.prototype.getForwardRay.call(this,t)},i.prototype._checkInputs=function(){this._vrDevice&&this._vrDevice.isPresenting&&(this._vrDevice.getFrameData(this._frameData),this.updateFromDevice(this._frameData.pose)),e.prototype._checkInputs.call(this)},i.prototype.updateFromDevice=function(t){t&&t.orientation&&(this.rawPose=t,this._deviceRoomRotationQuaternion.copyFromFloats(t.orientation[0],t.orientation[1],-t.orientation[2],-t.orientation[3]),this.getScene().useRightHandedSystem&&(this._deviceRoomRotationQuaternion.z*=-1,this._deviceRoomRotationQuaternion.w*=-1),this.webVROptions.trackPosition&&this.rawPose.position&&(this._deviceRoomPosition.copyFromFloats(this.rawPose.position[0],this.rawPose.position[1],-this.rawPose.position[2]),this.getScene().useRightHandedSystem&&(this._deviceRoomPosition.z*=-1)))},i.prototype.attachControl=function(i,n){e.prototype.attachControl.call(this,i,n),this._attached=!0,n=!t.Camera.ForceAttachControlToAlwaysPreventDefault&&n,this._vrDevice&&this.getEngine().enableVR()},i.prototype.detachControl=function(t){this.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),e.prototype.detachControl.call(this,t),this._attached=!1,this.getEngine().disableVR()},i.prototype.getClassName=function(){return"WebVRFreeCamera"},i.prototype.resetToCurrentRotation=function(){this._vrDevice.resetPose()},i.prototype._updateRigCameras=function(){var t=this._rigCameras[0],e=this._rigCameras[1];t.rotationQuaternion.copyFrom(this._deviceRoomRotationQuaternion),e.rotationQuaternion.copyFrom(this._deviceRoomRotationQuaternion),t.position.copyFrom(this._deviceRoomPosition),e.position.copyFrom(this._deviceRoomPosition)},i.prototype._updateCache=function(i){var n=this;this.rotationQuaternion.equals(this._cache.rotationQuaternion)&&this.position.equals(this._cache.position)||(this.updateCacheCalled||(this.updateCacheCalled=!0,this.update()),this.rotationQuaternion.toRotationMatrix(this._workingMatrix),t.Vector3.TransformCoordinatesToRef(this._deviceRoomPosition,this._workingMatrix,this._workingVector),this.devicePosition.subtractToRef(this._workingVector,this._workingVector),t.Matrix.ComposeToRef(this._oneVector,this.rotationQuaternion,this._workingVector,this._deviceToWorld),this._deviceToWorld.getTranslationToRef(this._workingVector),this._workingVector.addInPlace(this.position),this._workingVector.subtractInPlace(this._cache.position),this._deviceToWorld.setTranslation(this._workingVector),this._deviceToWorld.invertToRef(this._worldToDevice),this.controllers.forEach(function(t){t._deviceToWorld=n._deviceToWorld,t.update()})),i||e.prototype._updateCache.call(this),this.updateCacheCalled=!1},i.prototype.update=function(){t.Vector3.TransformCoordinatesToRef(this._deviceRoomPosition,this._deviceToWorld,this.devicePosition),t.Matrix.FromQuaternionToRef(this._deviceRoomRotationQuaternion,this._workingMatrix),this._workingMatrix.multiplyToRef(this._deviceToWorld,this._workingMatrix),t.Quaternion.FromRotationMatrixToRef(this._workingMatrix,this.deviceRotationQuaternion),e.prototype.update.call(this)},i.prototype._getViewMatrix=function(){return t.Matrix.Identity()},i.prototype._getWebVRViewMatrix=function(){var e=this,i=this._cameraRigParams.left?this._cameraRigParams.frameData.leftViewMatrix:this._cameraRigParams.frameData.rightViewMatrix;t.Matrix.FromArrayToRef(i,0,this._webvrViewMatrix),this.getScene().useRightHandedSystem||[2,6,8,9,14].forEach(function(t){e._webvrViewMatrix.m[t]*=-1}),this._webvrViewMatrix.getRotationMatrixToRef(this._cameraRotationMatrix),t.Vector3.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget);var n=this._cameraRigParams.parentCamera;return 1!==n.deviceScaleFactor&&(this._webvrViewMatrix.invert(),n.deviceScaleFactor&&(this._webvrViewMatrix.m[12]*=n.deviceScaleFactor,this._webvrViewMatrix.m[13]*=n.deviceScaleFactor,this._webvrViewMatrix.m[14]*=n.deviceScaleFactor),this._webvrViewMatrix.invert()),n._worldToDevice.multiplyToRef(this._webvrViewMatrix,this._webvrViewMatrix),this._webvrViewMatrix},i.prototype._getWebVRProjectionMatrix=function(){var e=this,i=this.parent;i._vrDevice.depthNear=i.minZ,i._vrDevice.depthFar=i.maxZ;var n=this._cameraRigParams.left?this._cameraRigParams.frameData.leftProjectionMatrix:this._cameraRigParams.frameData.rightProjectionMatrix;return t.Matrix.FromArrayToRef(n,0,this._projectionMatrix),this.getScene().useRightHandedSystem||[8,9,10,11].forEach(function(t){e._projectionMatrix.m[t]*=-1}),this._projectionMatrix},i.prototype.initControllers=function(){var e=this;this.controllers=[];var i=this.getScene().gamepadManager;this._onGamepadDisconnectedObserver=i.onGamepadDisconnectedObservable.add(function(i){if(i.type===t.Gamepad.POSE_ENABLED){var n=i;n.defaultModel&&n.defaultModel.setEnabled(!1),"right"===n.hand&&(e._rightController=null),"left"===n.hand&&(e._rightController=null);var r=e.controllers.indexOf(n);-1!==r&&e.controllers.splice(r,1)}}),this._onGamepadConnectedObserver=i.onGamepadConnectedObservable.add(function(i){if(i.type===t.Gamepad.POSE_ENABLED){var n=i;if(n._deviceToWorld=e._deviceToWorld,e.webVROptions.controllerMeshes&&(n.defaultModel?n.defaultModel.setEnabled(!0):n.initControllerMesh(e.getScene(),function(i){if(e.onControllerMeshLoadedObservable.notifyObservers(n),e.webVROptions.defaultLightingOnControllers){e._lightOnControllers||(e._lightOnControllers=new t.HemisphericLight("vrControllersLight",new t.Vector3(0,1,0),e.getScene()));var r=function(t,e){var i=t.getChildren();0!==i.length&&i.forEach(function(t){e.includedOnlyMeshes.push(t),r(t,e)})};e._lightOnControllers.includedOnlyMeshes.push(i),r(i,e._lightOnControllers)}})),n.attachToPoseControlledCamera(e),-1===e.controllers.indexOf(n)){e.controllers.push(n);for(var r=!1,o=0;o<e.controllers.length;o++)e.controllers[o].controllerType===t.PoseEnabledControllerType.VIVE&&(r?e.controllers[o].hand="right":(r=!0,e.controllers[o].hand="left"));e.controllers.length>=2&&e.onControllersAttachedObservable.notifyObservers(e.controllers)}}})},i}(t.FreeCamera);t.WebVRFreeCamera=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r){var o=e.call(this,i,n,r)||this;return o._quaternionCache=new t.Quaternion,o.inputs.addDeviceOrientation(),o}return o(i,e),i.prototype.getClassName=function(){return"DeviceOrientationCamera"},i.prototype._checkInputs=function(){e.prototype._checkInputs.call(this),this._quaternionCache.copyFrom(this.rotationQuaternion),this._initialQuaternion&&this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)},i.prototype.resetToCurrentRotation=function(e){var i=this;void 0===e&&(e=t.Axis.Y),this.rotationQuaternion&&(this._initialQuaternion||(this._initialQuaternion=new t.Quaternion),this._initialQuaternion.copyFrom(this._quaternionCache||this.rotationQuaternion),["x","y","z"].forEach(function(t){e[t]?i._initialQuaternion[t]*=-1:i._initialQuaternion[t]=0}),this._initialQuaternion.normalize(),this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion))},i}(t.FreeCamera);t.DeviceOrientationCamera=e}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s){void 0===o&&(o=!0),void 0===s&&(s=t.VRCameraMetrics.GetDefault());var a=e.call(this,i,n,r)||this;return s.compensateDistortion=o,a.setCameraRigMode(t.Camera.RIG_MODE_VR,{vrCameraMetrics:s}),a}return o(i,e),i.prototype.getClassName=function(){return"VRDeviceOrientationFreeCamera"},i}(t.DeviceOrientationCamera);t.VRDeviceOrientationFreeCamera=e;var i=function(e){function i(i,n,r,o,s){void 0===o&&(o=!0),void 0===s&&(s=t.VRCameraMetrics.GetDefault());var a=e.call(this,i,n,r,o,s)||this;return a.inputs.addGamepad(),a}return o(i,e),i.prototype.getClassName=function(){return"VRDeviceOrientationGamepadCamera"},i}(e);t.VRDeviceOrientationGamepadCamera=i;var n=function(e){function i(i,n,r,o,s,a,l,c){void 0===l&&(l=!0),void 0===c&&(c=t.VRCameraMetrics.GetDefault());var u=e.call(this,i,n,r,o,s,a)||this;return c.compensateDistortion=l,u.setCameraRigMode(t.Camera.RIG_MODE_VR,{vrCameraMetrics:c}),u.inputs.addVRDeviceOrientation(),u}return o(i,e),i.prototype.getClassName=function(){return"VRDeviceOrientationArcRotateCamera"},i}(t.ArcRotateCamera);t.VRDeviceOrientationArcRotateCamera=n}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o){var s=e.call(this,i,n,o)||this;return s.interaxialDistance=r,s.setCameraRigMode(t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),s}return o(i,e),i.prototype.getClassName=function(){return"AnaglyphFreeCamera"},i}(t.FreeCamera);t.AnaglyphFreeCamera=e;var i=function(e){function i(i,n,r,o,s,a,l){var c=e.call(this,i,n,r,o,s,l)||this;return c.interaxialDistance=a,c.setCameraRigMode(t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:a}),c}return o(i,e),i.prototype.getClassName=function(){return"AnaglyphArcRotateCamera"},i}(t.ArcRotateCamera);t.AnaglyphArcRotateCamera=i;var n=function(e){function i(i,n,r,o){var s=e.call(this,i,n,o)||this;return s.interaxialDistance=r,s.setCameraRigMode(t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),s}return o(i,e),i.prototype.getClassName=function(){return"AnaglyphGamepadCamera"},i}(t.GamepadCamera);t.AnaglyphGamepadCamera=n;var r=function(e){function i(i,n,r,o){var s=e.call(this,i,n,o)||this;return s.interaxialDistance=r,s.setCameraRigMode(t.Camera.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),s}return o(i,e),i.prototype.getClassName=function(){return"AnaglyphUniversalCamera"},i}(t.UniversalCamera);t.AnaglyphUniversalCamera=r;var s=function(e){function i(i,n,r,o,s){var a=e.call(this,i,n,s)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=o,a.setCameraRigMode(o?t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return o(i,e),i.prototype.getClassName=function(){return"StereoscopicFreeCamera"},i}(t.FreeCamera);t.StereoscopicFreeCamera=s;var a=function(e){function i(i,n,r,o,s,a,l,c){var u=e.call(this,i,n,r,o,s,c)||this;return u.interaxialDistance=a,u.isStereoscopicSideBySide=l,u.setCameraRigMode(l?t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:a}),u}return o(i,e),i.prototype.getClassName=function(){return"StereoscopicArcRotateCamera"},i}(t.ArcRotateCamera);t.StereoscopicArcRotateCamera=a;var l=function(e){function i(i,n,r,o,s){var a=e.call(this,i,n,s)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=o,a.setCameraRigMode(o?t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return o(i,e),i.prototype.getClassName=function(){return"StereoscopicGamepadCamera"},i}(t.GamepadCamera);t.StereoscopicGamepadCamera=l;var c=function(e){function i(i,n,r,o,s){var a=e.call(this,i,n,s)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=o,a.setCameraRigMode(o?t.Camera.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:t.Camera.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return o(i,e),i.prototype.getClassName=function(){return"StereoscopicUniversalCamera"},i}(t.UniversalCamera);t.StereoscopicUniversalCamera=c}(l||(l={})),function(t){var e=function(){function e(e,i){void 0===i&&(i={});var n=this;if(this.webVROptions=i,this._webVRsupported=!1,this._webVRready=!1,this._webVRrequesting=!1,this._webVRpresenting=!1,this._fullscreenVRpresenting=!1,this.onEnteringVRObservable=new t.Observable,this.onExitingVRObservable=new t.Observable,this.onControllerMeshLoadedObservable=new t.Observable,this._useCustomVRButton=!1,this._teleportationRequested=!1,this._teleportationEnabledOnLeftController=!1,this._teleportationEnabledOnRightController=!1,this._interactionsEnabledOnLeftController=!1,this._interactionsEnabledOnRightController=!1,this._leftControllerReady=!1,this._rightControllerReady=!1,this._floorMeshesCollection=[],this._teleportationAllowed=!1,this._rotationAllowed=!0,this._teleportationRequestInitiated=!1,this._teleportationBackRequestInitiated=!1,this.teleportBackwardsVector=new t.Vector3(0,-1,-1),this._rotationRightAsked=!1,this._rotationLeftAsked=!1,this._isDefaultTeleportationTarget=!0,this._teleportationFillColor="#444444",this._teleportationBorderColor="#FFFFFF",this._rotationAngle=0,this._haloCenter=new t.Vector3(0,0,0),this._padSensibilityUp=.65,this._padSensibilityDown=.35,this.onNewMeshSelected=new t.Observable,this.onNewMeshPicked=new t.Observable,this.onBeforeCameraTeleport=new t.Observable,this.onAfterCameraTeleport=new t.Observable,this.onSelectedMeshUnselected=new t.Observable,this.teleportationEnabled=!0,this._pointerDownOnMeshAsked=!1,this._isActionableMesh=!1,this._teleportationInitialized=!1,this._interactionsEnabled=!1,this._interactionsRequested=!1,this._displayGaze=!0,this._displayLaserPointer=!0,this._dpadPressed=!0,this._onResize=function(){n.moveButtonToBottomRight(),n._fullscreenVRpresenting&&n._webVRready&&n.exitVR()},this._onFullscreenChange=function(){void 0!==document.fullscreen?n._fullscreenVRpresenting=document.fullscreen:void 0!==document.mozFullScreen?n._fullscreenVRpresenting=document.mozFullScreen:void 0!==document.webkitIsFullScreen?n._fullscreenVRpresenting=document.webkitIsFullScreen:void 0!==document.msIsFullScreen&&(n._fullscreenVRpresenting=document.msIsFullScreen),!n._fullscreenVRpresenting&&n._canvas&&(n.exitVR(),n._useCustomVRButton||(n._btnVR.style.top=n._canvas.offsetTop+n._canvas.offsetHeight-70+"px",n._btnVR.style.left=n._canvas.offsetLeft+n._canvas.offsetWidth-100+"px"))},this.beforeRender=function(){n._castRayAndSelectObject()},this._onNewGamepadConnected=function(e){if(e.type!==t.Gamepad.POSE_ENABLED)e.leftStick&&e.onleftstickchanged(function(t){n._teleportationInitialized&&n.teleportationEnabled&&(!n._leftLaserPointer&&!n._rightLaserPointer||n._leftLaserPointer&&!n._leftLaserPointer.isVisible&&n._rightLaserPointer&&!n._rightLaserPointer.isVisible)&&(n._checkTeleportWithRay(t),n._checkTeleportBackwards(t))}),e.rightStick&&e.onrightstickchanged(function(t){n._teleportationInitialized&&n._checkRotate(t)}),e.type===t.Gamepad.XBOX&&(e.onbuttondown(function(e){n._interactionsEnabled&&e===t.Xbox360Button.A&&n._selectionPointerDown()}),e.onbuttonup(function(e){n._interactionsEnabled&&e===t.Xbox360Button.A&&n._selectionPointerUp()}));else{var i=e;n._tryEnableInteractionOnController(i)}},this._tryEnableInteractionOnController=function(t){"left"===t.hand&&(n._leftControllerReady=!0,n._interactionsRequested&&!n._interactionsEnabledOnLeftController&&n._enableInteractionOnController(t),n._teleportationRequested&&!n._teleportationEnabledOnLeftController&&n._enableTeleportationOnController(t)),"right"===t.hand&&(n._rightControllerReady=!0,n._interactionsRequested&&!n._interactionsEnabledOnRightController&&n._enableInteractionOnController(t),n._teleportationRequested&&!n._teleportationEnabledOnRightController&&n._enableTeleportationOnController(t))},this._onNewGamepadDisconnected=function(e){e instanceof t.WebVRController&&("left"===e.hand&&(n._interactionsEnabledOnLeftController=!1,n._teleportationEnabledOnLeftController=!1,n._leftControllerReady=!1,n._leftLaserPointer&&n._leftLaserPointer.dispose()),"right"===e.hand&&(n._interactionsEnabledOnRightController=!1,n._teleportationEnabledOnRightController=!1,n._rightControllerReady=!1,n._rightLaserPointer&&n._rightLaserPointer.dispose()))},this._workingVector=t.Vector3.Zero(),this._workingQuaternion=t.Quaternion.Identity(),this._workingMatrix=t.Matrix.Identity(),this._scene=e,this._canvas=e.getEngine().getRenderingCanvas(),void 0===i.createFallbackVRDeviceOrientationFreeCamera&&(i.createFallbackVRDeviceOrientationFreeCamera=!0),void 0===i.createDeviceOrientationCamera&&(i.createDeviceOrientationCamera=!0),void 0===i.defaultHeight&&(i.defaultHeight=1.7),i.useCustomVRButton&&(this._useCustomVRButton=!0,i.customVRButton&&(this._btnVR=i.customVRButton)),i.rayLength&&(this._rayLength=i.rayLength),this._defaultHeight=i.defaultHeight,this._scene.activeCamera?this._position=this._scene.activeCamera.position.clone():this._position=new t.Vector3(0,this._defaultHeight,0),i.createDeviceOrientationCamera||!this._scene.activeCamera){if(this._deviceOrientationCamera=new t.DeviceOrientationCamera("deviceOrientationVRHelper",this._position.clone(),e),this._scene.activeCamera&&(this._deviceOrientationCamera.minZ=this._scene.activeCamera.minZ,this._deviceOrientationCamera.maxZ=this._scene.activeCamera.maxZ,this._scene.activeCamera instanceof t.TargetCamera&&this._scene.activeCamera.rotation)){var r=this._scene.activeCamera;r.rotationQuaternion?this._deviceOrientationCamera.rotationQuaternion.copyFrom(r.rotationQuaternion):this._deviceOrientationCamera.rotationQuaternion.copyFrom(t.Quaternion.RotationYawPitchRoll(r.rotation.y,r.rotation.x,r.rotation.z)),this._deviceOrientationCamera.rotation=r.rotation.clone()}this._scene.activeCamera=this._deviceOrientationCamera,this._canvas&&this._scene.activeCamera.attachControl(this._canvas)}else this._existingCamera=this._scene.activeCamera;if(i.createFallbackVRDeviceOrientationFreeCamera&&(this._vrDeviceOrientationCamera=new t.VRDeviceOrientationFreeCamera("VRDeviceOrientationVRHelper",this._position,this._scene)),this._webVRCamera=new t.WebVRFreeCamera("WebVRHelper",this._position,this._scene,i),this._webVRCamera.useStandingMatrix(),!this._useCustomVRButton){this._btnVR=document.createElement("BUTTON"),this._btnVR.className="babylonVRicon",this._btnVR.id="babylonVRiconbtn",this._btnVR.title="Click to switch to VR";".babylonVRicon.vrdisplaypresenting { display: none; }";var o=document.createElement("style");o.appendChild(document.createTextNode(".babylonVRicon { position: absolute; right: 20px; height: 50px; width: 80px; background-color: rgba(51,51,51,0.7); background-image: url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%222048%22%20height%3D%221152%22%20viewBox%3D%220%200%202048%201152%22%20version%3D%221.1%22%3E%3Cpath%20transform%3D%22rotate%28180%201024%2C576.0000000000001%29%22%20d%3D%22m1109%2C896q17%2C0%2030%2C-12t13%2C-30t-12.5%2C-30.5t-30.5%2C-12.5l-170%2C0q-18%2C0%20-30.5%2C12.5t-12.5%2C30.5t13%2C30t30%2C12l170%2C0zm-85%2C256q59%2C0%20132.5%2C-1.5t154.5%2C-5.5t164.5%2C-11.5t163%2C-20t150%2C-30t124.5%2C-41.5q23%2C-11%2042%2C-24t38%2C-30q27%2C-25%2041%2C-61.5t14%2C-72.5l0%2C-257q0%2C-123%20-47%2C-232t-128%2C-190t-190%2C-128t-232%2C-47l-81%2C0q-37%2C0%20-68.5%2C14t-60.5%2C34.5t-55.5%2C45t-53%2C45t-53%2C34.5t-55.5%2C14t-55.5%2C-14t-53%2C-34.5t-53%2C-45t-55.5%2C-45t-60.5%2C-34.5t-68.5%2C-14l-81%2C0q-123%2C0%20-232%2C47t-190%2C128t-128%2C190t-47%2C232l0%2C257q0%2C68%2038%2C115t97%2C73q54%2C24%20124.5%2C41.5t150%2C30t163%2C20t164.5%2C11.5t154.5%2C5.5t132.5%2C1.5zm939%2C-298q0%2C39%20-24.5%2C67t-58.5%2C42q-54%2C23%20-122%2C39.5t-143.5%2C28t-155.5%2C19t-157%2C11t-148.5%2C5t-129.5%2C1.5q-59%2C0%20-130%2C-1.5t-148%2C-5t-157%2C-11t-155.5%2C-19t-143.5%2C-28t-122%2C-39.5q-34%2C-14%20-58.5%2C-42t-24.5%2C-67l0%2C-257q0%2C-106%2040.5%2C-199t110%2C-162.5t162.5%2C-109.5t199%2C-40l81%2C0q27%2C0%2052%2C14t50%2C34.5t51%2C44.5t55.5%2C44.5t63.5%2C34.5t74%2C14t74%2C-14t63.5%2C-34.5t55.5%2C-44.5t51%2C-44.5t50%2C-34.5t52%2C-14l14%2C0q37%2C0%2070%2C0.5t64.5%2C4.5t63.5%2C12t68%2C23q71%2C30%20128.5%2C78.5t98.5%2C110t63.5%2C133.5t22.5%2C149l0%2C257z%22%20fill%3D%22white%22%20/%3E%3C/svg%3E%0A); background-size: 80%; background-repeat:no-repeat; background-position: center; border: none; outline: none; transition: transform 0.125s ease-out } .babylonVRicon:hover { transform: scale(1.05) } .babylonVRicon:active {background-color: rgba(51,51,51,1) } .babylonVRicon:focus {background-color: rgba(51,51,51,1) }.babylonVRicon.vrdisplaypresenting { display: none; }")),document.getElementsByTagName("head")[0].appendChild(o),this.moveButtonToBottomRight()}this._btnVR&&this._btnVR.addEventListener("click",function(){n.isInVRMode?n.exitVR():n.enterVR()}),window.addEventListener("resize",this._onResize),document.addEventListener("fullscreenchange",this._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",this._onFullscreenChange,!1),i.createFallbackVRDeviceOrientationFreeCamera?this.displayVRButton():this._scene.getEngine().onVRDisplayChangedObservable.add(function(t){t.vrDisplay&&n.displayVRButton()}),this._onKeyDown=function(t){27===t.keyCode&&n.isInVRMode&&n.exitVR()},document.addEventListener("keydown",this._onKeyDown),this._scene.onPrePointerObservable.add(function(t,e){n.isInVRMode&&(n.exitVR(),n._fullscreenVRpresenting&&n._scene.getEngine().switchFullscreen(!0))},t.PointerEventTypes.POINTERDOUBLETAP,!1),this._onVRDisplayChanged=function(t){return n.onVRDisplayChanged(t)},this._onVrDisplayPresentChange=function(){return n.onVrDisplayPresentChange()},this._onVRRequestPresentStart=function(){n._webVRrequesting=!0,n.updateButtonVisibility()},this._onVRRequestPresentComplete=function(t){n._webVRrequesting=!1,n.updateButtonVisibility()},e.getEngine().onVRDisplayChangedObservable.add(this._onVRDisplayChanged),e.getEngine().onVRRequestPresentStart.add(this._onVRRequestPresentStart),e.getEngine().onVRRequestPresentComplete.add(this._onVRRequestPresentComplete),window.addEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),e.onDisposeObservable.add(function(){n.dispose()}),this._webVRCamera.onControllerMeshLoadedObservable.add(function(t){return n._onDefaultMeshLoaded(t)}),this._scene.gamepadManager.onGamepadConnectedObservable.add(this._onNewGamepadConnected),this._scene.gamepadManager.onGamepadDisconnectedObservable.add(this._onNewGamepadDisconnected),this.updateButtonVisibility(),this._circleEase=new t.CircleEase,this._circleEase.setEasingMode(t.EasingFunction.EASINGMODE_EASEINOUT)}return Object.defineProperty(e.prototype,"onEnteringVR",{get:function(){return this.onEnteringVRObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExitingVR",{get:function(){return this.onExitingVRObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onControllerMeshLoaded",{get:function(){return this.onControllerMeshLoadedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teleportationTarget",{get:function(){return this._teleportationTarget},set:function(t){t&&(t.name="teleportationTarget",this._isDefaultTeleportationTarget=!1,this._teleportationTarget=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayGaze",{get:function(){return this._displayGaze},set:function(t){this._displayGaze=t,t||(this._gazeTracker.isVisible=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLaserPointer",{get:function(){return this._displayLaserPointer},set:function(t){this._displayLaserPointer=t,t?this._rightLaserPointer?this._rightLaserPointer.isVisible=!0:this._leftLaserPointer&&(this._leftLaserPointer.isVisible=!0):(this._rightLaserPointer&&(this._rightLaserPointer.isVisible=!1),this._leftLaserPointer&&(this._leftLaserPointer.isVisible=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceOrientationCamera",{get:function(){return this._deviceOrientationCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentVRCamera",{get:function(){return this._webVRready?this._webVRCamera:this._scene.activeCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webVRCamera",{get:function(){return this._webVRCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vrDeviceOrientationCamera",{get:function(){return this._vrDeviceOrientationCamera},enumerable:!0,configurable:!0}),e.prototype._onDefaultMeshLoaded=function(e){this._tryEnableInteractionOnController(e);try{this.onControllerMeshLoadedObservable.notifyObservers(e)}catch(e){t.Tools.Warn("Error in your custom logic onControllerMeshLoaded: "+e)}},Object.defineProperty(e.prototype,"isInVRMode",{get:function(){return this._webVRpresenting||this._fullscreenVRpresenting},enumerable:!0,configurable:!0}),e.prototype.onVrDisplayPresentChange=function(){var e=this._scene.getEngine().getVRDevice();if(e){var i=this._webVRpresenting;this._webVRpresenting=e.isPresenting,i&&!this._webVRpresenting&&this.exitVR()}else t.Tools.Warn("Detected VRDisplayPresentChange on an unknown VRDisplay. Did you can enterVR on the vrExperienceHelper?");this.updateButtonVisibility()},e.prototype.onVRDisplayChanged=function(t){this._webVRsupported=t.vrSupported,this._webVRready=!!t.vrDisplay,this._webVRpresenting=t.vrDisplay&&t.vrDisplay.isPresenting,this.updateButtonVisibility()},e.prototype.moveButtonToBottomRight=function(){this._canvas&&!this._useCustomVRButton&&(this._btnVR.style.top=this._canvas.offsetTop+this._canvas.offsetHeight-70+"px",this._btnVR.style.left=this._canvas.offsetLeft+this._canvas.offsetWidth-100+"px")},e.prototype.displayVRButton=function(){this._useCustomVRButton||this._btnVRDisplayed||(document.body.appendChild(this._btnVR),this._btnVRDisplayed=!0)},e.prototype.updateButtonVisibility=function(){this._btnVR&&!this._useCustomVRButton&&(this._btnVR.className="babylonVRicon",this.isInVRMode?this._btnVR.className+=" vrdisplaypresenting":(this._webVRready&&(this._btnVR.className+=" vrdisplayready"),this._webVRsupported&&(this._btnVR.className+=" vrdisplaysupported"),this._webVRrequesting&&(this._btnVR.className+=" vrdisplayrequesting")))},e.prototype.enterVR=function(){if(this.onEnteringVRObservable)try{this.onEnteringVRObservable.notifyObservers(this)}catch(e){t.Tools.Warn("Error in your custom logic onEnteringVR: "+e)}this._scene.activeCamera&&(this._position=this._scene.activeCamera.position.clone(),this._existingCamera=this._scene.activeCamera),this._webVRrequesting||(this._webVRready?this._webVRpresenting||(this._webVRCamera.position=this._position,this._scene.activeCamera=this._webVRCamera):this._vrDeviceOrientationCamera&&(this._vrDeviceOrientationCamera.position=this._position,this._scene.activeCamera=this._vrDeviceOrientationCamera,this._scene.getEngine().switchFullscreen(!0),this.updateButtonVisibility()),this._scene.activeCamera&&this._canvas&&this._scene.activeCamera.attachControl(this._canvas),this._interactionsEnabled&&this._scene.registerBeforeRender(this.beforeRender))},e.prototype.exitVR=function(){if(this.onExitingVRObservable)try{this.onExitingVRObservable.notifyObservers(this)}catch(e){t.Tools.Warn("Error in your custom logic onExitingVR: "+e)}this._webVRpresenting&&this._scene.getEngine().disableVR(),this._scene.activeCamera&&(this._position=this._scene.activeCamera.position.clone()),this._deviceOrientationCamera?(this._deviceOrientationCamera.position=this._position,this._scene.activeCamera=this._deviceOrientationCamera,this._canvas&&this._scene.activeCamera.attachControl(this._canvas)):this._existingCamera&&(this._existingCamera.position=this._position,this._scene.activeCamera=this._existingCamera),this.updateButtonVisibility(),this._interactionsEnabled&&this._scene.unregisterBeforeRender(this.beforeRender)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._scene.activeCamera&&(this._scene.activeCamera.position=t)},enumerable:!0,configurable:!0}),e.prototype.enableInteractions=function(){var t=this;this._interactionsEnabled||(this._interactionsRequested=!0,this._leftControllerReady&&this._webVRCamera.leftController&&this._enableInteractionOnController(this._webVRCamera.leftController),this._rightControllerReady&&this._webVRCamera.rightController&&this._enableInteractionOnController(this._webVRCamera.rightController),this._createGazeTracker(),this.raySelectionPredicate=function(t){return t.isVisible},this.meshSelectionPredicate=function(t){return!0},this._raySelectionPredicate=function(e){return!!(t._isTeleportationFloor(e)||-1===e.name.indexOf("gazeTracker")&&-1===e.name.indexOf("teleportationTarget")&&-1===e.name.indexOf("torusTeleportation")&&-1===e.name.indexOf("laserPointer"))&&t.raySelectionPredicate(e)},this._interactionsEnabled=!0)},e.prototype._isTeleportationFloor=function(t){for(var e=0;e<this._floorMeshesCollection.length;e++)if(this._floorMeshesCollection[e].id===t.id)return!0;return!(!this._floorMeshName||t.name!==this._floorMeshName)},e.prototype.addFloorMesh=function(t){this._floorMeshesCollection&&(this._floorMeshesCollection.indexOf(t)>-1||this._floorMeshesCollection.push(t))},e.prototype.removeFloorMesh=function(t){if(this._floorMeshesCollection){var e=this._floorMeshesCollection.indexOf(t);-1!==e&&this._floorMeshesCollection.splice(e,1)}},e.prototype.enableTeleportation=function(e){if(void 0===e&&(e={}),!this._teleportationInitialized){this._teleportationRequested=!0,this.enableInteractions(),e.floorMeshName&&(this._floorMeshName=e.floorMeshName),e.floorMeshes&&(this._floorMeshesCollection=e.floorMeshes),this._leftControllerReady&&this._webVRCamera.leftController&&this._enableTeleportationOnController(this._webVRCamera.leftController),this._rightControllerReady&&this._webVRCamera.rightController&&this._enableTeleportationOnController(this._webVRCamera.rightController);var i=new t.ImageProcessingConfiguration;i.vignetteColor=new t.Color4(0,0,0,0),i.vignetteEnabled=!0,this._postProcessMove=new t.ImageProcessingPostProcess("postProcessMove",1,this._webVRCamera,void 0,void 0,void 0,void 0,i),this._webVRCamera.detachPostProcess(this._postProcessMove),this._passProcessMove=new t.PassPostProcess("pass",1,this._webVRCamera),this._teleportationInitialized=!0,this._isDefaultTeleportationTarget&&this._createTeleportationCircles()}},e.prototype._enableInteractionOnController=function(e){var i=this,n=e.mesh;if(n){var r=function(t){t.name+=" laserPointer",t.getChildMeshes().forEach(function(t){r(t)})};r(n);for(var o=n.getChildMeshes(),s=0;s<o.length;s++)if(o[s].name&&o[s].name.indexOf("POINTING_POSE")>=0){n=o[s];break}var a=t.Mesh.CreateCylinder("laserPointer",1,.004,2e-4,20,1,this._scene,!1),l=new t.StandardMaterial("laserPointerMat",this._scene);l.emissiveColor=new t.Color3(.7,.7,.7),l.alpha=.6,a.material=l,a.rotation.x=Math.PI/2,a.parent=n,a.position.z=-.5,a.isVisible=!1,"left"===e.hand?(this._leftLaserPointer=a,this._interactionsEnabledOnLeftController=!0,this._rightLaserPointer||(this._leftLaserPointer.isVisible=!0)):(this._rightLaserPointer=a,this._interactionsEnabledOnRightController=!0,this._leftLaserPointer||(this._rightLaserPointer.isVisible=!0)),e.onMainButtonStateChangedObservable.add(function(t){i._displayLaserPointer&&1===t.value&&(a.isVisible=!a.isVisible,"left"===e.hand&&i._rightLaserPointer?i._rightLaserPointer.isVisible=!1:i._leftLaserPointer&&(i._leftLaserPointer.isVisible=!1))}),e.onTriggerStateChangedObservable.add(function(t){i._pointerDownOnMeshAsked?t.value<i._padSensibilityDown&&i._selectionPointerUp():t.value>i._padSensibilityUp&&i._selectionPointerDown()})}},e.prototype._checkTeleportWithRay=function(t,e){void 0===e&&(e=null),this._teleportationRequestInitiated?(null==e||"left"===e.hand&&this._leftLaserPointer&&this._leftLaserPointer.isVisible||"right"===e.hand&&this._rightLaserPointer&&this._rightLaserPointer.isVisible)&&Math.sqrt(t.y*t.y+t.x*t.x)<this._padSensibilityDown&&(this._teleportationAllowed&&(this._teleportationAllowed=!1,this._teleportCamera()),this._teleportationRequestInitiated=!1):t.y<-this._padSensibilityUp&&this._dpadPressed&&(e&&(this._displayLaserPointer&&"left"===e.hand&&this._leftLaserPointer?(this._leftLaserPointer.isVisible=!0,this._rightLaserPointer&&(this._rightLaserPointer.isVisible=!1)):this._displayLaserPointer&&this._rightLaserPointer&&(this._rightLaserPointer.isVisible=!0,this._leftLaserPointer&&(this._leftLaserPointer.isVisible=!1))),this._teleportationRequestInitiated=!0)},e.prototype._selectionPointerDown=function(){this._pointerDownOnMeshAsked=!0,this._currentMeshSelected&&this._currentHit&&this._scene.simulatePointerDown(this._currentHit)},e.prototype._selectionPointerUp=function(){this._currentMeshSelected&&this._currentHit&&this._scene.simulatePointerUp(this._currentHit),this._pointerDownOnMeshAsked=!1},e.prototype._checkRotate=function(t){this._teleportationRequestInitiated||(this._rotationLeftAsked?t.x>-this._padSensibilityDown&&(this._rotationLeftAsked=!1):t.x<-this._padSensibilityUp&&this._dpadPressed&&(this._rotationLeftAsked=!0,this._rotationAllowed&&this._rotateCamera(!1)),this._rotationRightAsked?t.x<this._padSensibilityDown&&(this._rotationRightAsked=!1):t.x>this._padSensibilityUp&&this._dpadPressed&&(this._rotationRightAsked=!0,this._rotationAllowed&&this._rotateCamera(!0)))},e.prototype._checkTeleportBackwards=function(e){if(!this._teleportationRequestInitiated)if(e.y>this._padSensibilityUp&&this._dpadPressed){if(!this._teleportationBackRequestInitiated){if(!this.currentVRCamera)return;var i=t.Quaternion.FromRotationMatrix(this.currentVRCamera.getWorldMatrix().getRotationMatrix()),n=this.currentVRCamera.position;this.currentVRCamera.devicePosition&&this.currentVRCamera.deviceRotationQuaternion&&(i=this.currentVRCamera.deviceRotationQuaternion,n=this.currentVRCamera.devicePosition),i.toEulerAnglesToRef(this._workingVector),this._workingVector.z=0,this._workingVector.x=0,t.Quaternion.RotationYawPitchRollToRef(this._workingVector.y,this._workingVector.x,this._workingVector.z,this._workingQuaternion),this._workingQuaternion.toRotationMatrix(this._workingMatrix),t.Vector3.TransformCoordinatesToRef(this.teleportBackwardsVector,this._workingMatrix,this._workingVector);var r=new t.Ray(n,this._workingVector),o=this._scene.pickWithRay(r,this._raySelectionPredicate);o&&o.pickedPoint&&o.pickedMesh&&this._isTeleportationFloor(o.pickedMesh)&&o.distance<5&&this._teleportCamera(o.pickedPoint),this._teleportationBackRequestInitiated=!0}}else this._teleportationBackRequestInitiated=!1},e.prototype._enableTeleportationOnController=function(e){var i=this;e.mesh&&("left"===e.hand?(this._interactionsEnabledOnLeftController||this._enableInteractionOnController(e),this._teleportationEnabledOnLeftController=!0):(this._interactionsEnabledOnRightController||this._enableInteractionOnController(e),this._teleportationEnabledOnRightController=!0),e.controllerType===t.PoseEnabledControllerType.VIVE&&(this._dpadPressed=!1,e.onPadStateChangedObservable.add(function(t){i._dpadPressed=t.pressed,i._dpadPressed||(i._rotationLeftAsked=!1,i._rotationRightAsked=!1,i._teleportationBackRequestInitiated=!1)})),e.onPadValuesChangedObservable.add(function(t){i.teleportationEnabled&&(i._checkTeleportBackwards(t),i._checkTeleportWithRay(t,e)),i._checkRotate(t)}))},e.prototype._createGazeTracker=function(){this._gazeTracker=t.Mesh.CreateTorus("gazeTracker",.0035,.0025,20,this._scene,!1),this._gazeTracker.bakeCurrentTransformIntoVertices(),this._gazeTracker.isPickable=!1,this._gazeTracker.isVisible=!1;var e=new t.StandardMaterial("targetMat",this._scene);e.specularColor=t.Color3.Black(),e.emissiveColor=new t.Color3(.7,.7,.7),e.backFaceCulling=!1,this._gazeTracker.material=e},e.prototype._createTeleportationCircles=function(){this._teleportationTarget=t.Mesh.CreateGround("teleportationTarget",2,2,2,this._scene),this._teleportationTarget.isPickable=!1;var e=new t.DynamicTexture("DynamicTexture",512,this._scene,!0);e.hasAlpha=!0;var i=e.getContext();i.beginPath(),i.arc(256,256,200,0,2*Math.PI,!1),i.fillStyle=this._teleportationFillColor,i.fill(),i.lineWidth=10,i.strokeStyle=this._teleportationBorderColor,i.stroke(),i.closePath(),e.update();var n=new t.StandardMaterial("TextPlaneMaterial",this._scene);n.diffuseTexture=e,this._teleportationTarget.material=n;var r=t.Mesh.CreateTorus("torusTeleportation",.75,.1,25,this._scene,!1);r.isPickable=!1,r.parent=this._teleportationTarget;var o=new t.Animation("animationInnerCircle","position.y",30,t.Animation.ANIMATIONTYPE_FLOAT,t.Animation.ANIMATIONLOOPMODE_CYCLE),s=[];s.push({frame:0,value:0}),s.push({frame:30,value:.4}),s.push({frame:60,value:0}),o.setKeys(s);var a=new t.SineEase;a.setEasingMode(t.EasingFunction.EASINGMODE_EASEINOUT),o.setEasingFunction(a),r.animations=[],r.animations.push(o),this._scene.beginAnimation(r,0,60,!0),this._hideTeleportationTarget()},e.prototype._displayTeleportationTarget=function(){this._teleportationInitialized&&(this._teleportationTarget.isVisible=!0,this._isDefaultTeleportationTarget&&(this._teleportationTarget.getChildren()[0].isVisible=!0))},e.prototype._hideTeleportationTarget=function(){this._teleportationInitialized&&(this._teleportationTarget.isVisible=!1,this._isDefaultTeleportationTarget&&(this._teleportationTarget.getChildren()[0].isVisible=!1))},e.prototype._rotateCamera=function(e){var i=this;if(this.currentVRCamera instanceof t.FreeCamera){e?this._rotationAngle++:this._rotationAngle--,this.currentVRCamera.animations=[];var n=t.Quaternion.FromRotationMatrix(t.Matrix.RotationY(Math.PI/4*this._rotationAngle)),r=new t.Animation("animationRotation","rotationQuaternion",90,t.Animation.ANIMATIONTYPE_QUATERNION,t.Animation.ANIMATIONLOOPMODE_CONSTANT),o=[];o.push({frame:0,value:this.currentVRCamera.rotationQuaternion}),o.push({frame:6,value:n}),r.setKeys(o),r.setEasingFunction(this._circleEase),this.currentVRCamera.animations.push(r),this._postProcessMove.animations=[];var s=new t.Animation("animationPP","vignetteWeight",90,t.Animation.ANIMATIONTYPE_FLOAT,t.Animation.ANIMATIONLOOPMODE_CONSTANT),a=[];a.push({frame:0,value:0}),a.push({frame:3,value:4}),a.push({frame:6,value:0}),s.setKeys(a),s.setEasingFunction(this._circleEase),this._postProcessMove.animations.push(s);var l=new t.Animation("animationPP2","vignetteStretch",90,t.Animation.ANIMATIONTYPE_FLOAT,t.Animation.ANIMATIONLOOPMODE_CONSTANT),c=[];c.push({frame:0,value:0}),c.push({frame:3,value:10}),c.push({frame:6,value:0}),l.setKeys(c),l.setEasingFunction(this._circleEase),this._postProcessMove.animations.push(l),this._postProcessMove.imageProcessingConfiguration.vignetteWeight=0,this._postProcessMove.imageProcessingConfiguration.vignetteStretch=0,this._webVRCamera.attachPostProcess(this._postProcessMove),this._scene.beginAnimation(this._postProcessMove,0,6,!1,1,function(){i._webVRCamera.detachPostProcess(i._postProcessMove)}),this._scene.beginAnimation(this.currentVRCamera,0,6,!1,1)}},e.prototype._moveTeleportationSelectorTo=function(e){if(e.pickedPoint){this._teleportationAllowed=!0,this._teleportationRequestInitiated?this._displayTeleportationTarget():this._hideTeleportationTarget(),this._haloCenter.copyFrom(e.pickedPoint),this._teleportationTarget.position.copyFrom(e.pickedPoint);var i=e.getNormal(!0,!1);if(i){var n=t.Vector3.Cross(t.Axis.Y,i),r=t.Vector3.Cross(i,n);t.Vector3.RotationFromAxisToRef(r,i,n,this._teleportationTarget.rotation)}this._teleportationTarget.position.y+=.1}},e.prototype._teleportCamera=function(e){var i=this;if(void 0===e&&(e=null),this.currentVRCamera instanceof t.FreeCamera){e||(e=this._haloCenter),this.webVRCamera.leftCamera?(this._workingVector.copyFrom(this.webVRCamera.leftCamera.globalPosition),this._workingVector.subtractInPlace(this.webVRCamera.position),e.subtractToRef(this._workingVector,this._workingVector)):this._workingVector.copyFrom(e),this.isInVRMode?this._workingVector.y+=this.webVRCamera.deviceDistanceToRoomGround():this._workingVector.y+=this._defaultHeight,this.onBeforeCameraTeleport.notifyObservers(this._workingVector),this.currentVRCamera.animations=[];var n=new t.Animation("animationCameraTeleportation","position",90,t.Animation.ANIMATIONTYPE_VECTOR3,t.Animation.ANIMATIONLOOPMODE_CONSTANT),r=[{frame:0,value:this.currentVRCamera.position},{frame:11,value:this._workingVector}];n.setKeys(r),n.setEasingFunction(this._circleEase),this.currentVRCamera.animations.push(n),this._postProcessMove.animations=[];var o=new t.Animation("animationPP","vignetteWeight",90,t.Animation.ANIMATIONTYPE_FLOAT,t.Animation.ANIMATIONLOOPMODE_CONSTANT),s=[];s.push({frame:0,value:0}),s.push({frame:5,value:8}),s.push({frame:11,value:0}),o.setKeys(s),this._postProcessMove.animations.push(o);var a=new t.Animation("animationPP2","vignetteStretch",90,t.Animation.ANIMATIONTYPE_FLOAT,t.Animation.ANIMATIONLOOPMODE_CONSTANT),l=[];l.push({frame:0,value:0}),l.push({frame:5,value:10}),l.push({frame:11,value:0}),a.setKeys(l),this._postProcessMove.animations.push(a),this._postProcessMove.imageProcessingConfiguration.vignetteWeight=0,this._postProcessMove.imageProcessingConfiguration.vignetteStretch=0,this._webVRCamera.attachPostProcess(this._postProcessMove),this._scene.beginAnimation(this._postProcessMove,0,11,!1,1,function(){i._webVRCamera.detachPostProcess(i._postProcessMove)}),this._scene.beginAnimation(this.currentVRCamera,0,11,!1,1,function(){i.onAfterCameraTeleport.notifyObservers(i._workingVector)})}},e.prototype._castRayAndSelectObject=function(){if(this.currentVRCamera instanceof t.FreeCamera){var e;e=this._leftLaserPointer&&this._leftLaserPointer.isVisible&&this.currentVRCamera.leftController?this.currentVRCamera.leftController.getForwardRay(this._rayLength):this._rightLaserPointer&&this._rightLaserPointer.isVisible&&this.currentVRCamera.rightController?this.currentVRCamera.rightController.getForwardRay(this._rayLength):this.currentVRCamera.getForwardRay(this._rayLength);var i=this._scene.pickWithRay(e,this._raySelectionPredicate);if(i&&i.pickedPoint){if(this._displayGaze){var n=1;this._gazeTracker.isVisible=!0,this._isActionableMesh&&(n=3),this._gazeTracker.scaling.x=i.distance*n,this._gazeTracker.scaling.y=i.distance*n,this._gazeTracker.scaling.z=i.distance*n;var r=i.getNormal();if(r){var o=t.Vector3.Cross(t.Axis.Y,r),s=t.Vector3.Cross(r,o);t.Vector3.RotationFromAxisToRef(s,r,o,this._gazeTracker.rotation)}this._gazeTracker.position.copyFrom(i.pickedPoint),this._gazeTracker.position.x<0?this._gazeTracker.position.x+=.002:this._gazeTracker.position.x-=.002,this._gazeTracker.position.y<0?this._gazeTracker.position.y+=.002:this._gazeTracker.position.y-=.002,this._gazeTracker.position.z<0?this._gazeTracker.position.z+=.002:this._gazeTracker.position.z-=.002}this._rightLaserPointer&&this._rightLaserPointer.isVisible&&(this._rightLaserPointer.scaling.y=i.distance,this._rightLaserPointer.position.z=-i.distance/2),this._leftLaserPointer&&this._leftLaserPointer.isVisible&&(this._leftLaserPointer.scaling.y=i.distance,this._leftLaserPointer.position.z=-i.distance/2)}else this._gazeTracker.isVisible=!1;if(i&&i.pickedMesh){if(this._currentHit=i,this._pointerDownOnMeshAsked&&this._scene.simulatePointerMove(this._currentHit),this._teleportationInitialized&&this._isTeleportationFloor(i.pickedMesh)&&i.pickedPoint)return this._currentMeshSelected&&!this._isTeleportationFloor(this._currentMeshSelected)&&this._notifySelectedMeshUnselected(),this._currentMeshSelected=null,void this._moveTeleportationSelectorTo(i);if(this._hideTeleportationTarget(),this._teleportationAllowed=!1,i.pickedMesh!==this._currentMeshSelected)if(this.meshSelectionPredicate(i.pickedMesh)){this.onNewMeshPicked.notifyObservers(i),this._currentMeshSelected=i.pickedMesh,i.pickedMesh.isPickable&&i.pickedMesh.actionManager?(this.changeGazeColor(new t.Color3(0,0,1)),this.changeLaserColor(new t.Color3(.2,.2,1)),this._isActionableMesh=!0):(this.changeGazeColor(new t.Color3(.7,.7,.7)),this.changeLaserColor(new t.Color3(.7,.7,.7)),this._isActionableMesh=!1);try{this.onNewMeshSelected.notifyObservers(this._currentMeshSelected)}catch(e){t.Tools.Warn("Error in your custom logic onNewMeshSelected: "+e)}}else this._notifySelectedMeshUnselected(),this._currentMeshSelected=null,this.changeGazeColor(new t.Color3(.7,.7,.7)),this.changeLaserColor(new t.Color3(.7,.7,.7))}else this._currentHit=null,this._notifySelectedMeshUnselected(),this._currentMeshSelected=null,this._teleportationAllowed=!1,this._hideTeleportationTarget(),this.changeGazeColor(new t.Color3(.7,.7,.7)),this.changeLaserColor(new t.Color3(.7,.7,.7))}},e.prototype._notifySelectedMeshUnselected=function(){this._currentMeshSelected&&this.onSelectedMeshUnselected.notifyObservers(this._currentMeshSelected)},e.prototype.changeLaserColor=function(t){this._leftLaserPointer&&this._leftLaserPointer.material&&(this._leftLaserPointer.material.emissiveColor=t),this._rightLaserPointer&&this._rightLaserPointer.material&&(this._rightLaserPointer.material.emissiveColor=t)},e.prototype.changeGazeColor=function(t){this._gazeTracker.material&&(this._gazeTracker.material.emissiveColor=t)},e.prototype.dispose=function(){this.isInVRMode&&this.exitVR(),this._passProcessMove&&this._passProcessMove.dispose(),this._postProcessMove&&this._postProcessMove.dispose(),this._webVRCamera&&this._webVRCamera.dispose(),this._vrDeviceOrientationCamera&&this._vrDeviceOrientationCamera.dispose(),!this._useCustomVRButton&&this._btnVR.parentNode&&document.body.removeChild(this._btnVR),this._deviceOrientationCamera&&this._scene.activeCamera!=this._deviceOrientationCamera&&this._deviceOrientationCamera.dispose(),this._gazeTracker&&this._gazeTracker.dispose(),this._teleportationTarget&&this._teleportationTarget.dispose(),this._floorMeshesCollection=[],document.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),window.removeEventListener("resize",this._onResize),document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),this._scene.getEngine().onVRDisplayChangedObservable.removeCallback(this._onVRDisplayChanged),this._scene.getEngine().onVRRequestPresentStart.removeCallback(this._onVRRequestPresentStart),this._scene.getEngine().onVRRequestPresentComplete.removeCallback(this._onVRRequestPresentComplete),window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),this._scene.gamepadManager.onGamepadConnectedObservable.removeCallback(this._onNewGamepadConnected),this._scene.gamepadManager.onGamepadDisconnectedObservable.removeCallback(this._onNewGamepadDisconnected),this._scene.unregisterBeforeRender(this.beforeRender)},e.prototype.getClassName=function(){return"VRExperienceHelper"},e}();t.VRExperienceHelper=e}(l||(l={})),function(t){var e;!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(e=t.JoystickAxis||(t.JoystickAxis={}));var i=function(){function i(n){var r=this;if(this._leftJoystick=!!n,i._globalJoystickIndex++,this._axisTargetedByLeftAndRight=e.X,this._axisTargetedByUpAndDown=e.Y,this.reverseLeftRight=!1,this.reverseUpDown=!1,this._touches=new t.StringDictionary,this.deltaPosition=t.Vector3.Zero(),this._joystickSensibility=25,this._inversedSensibility=1/(this._joystickSensibility/1e3),this._onResize=function(t){i.vjCanvasWidth=window.innerWidth,i.vjCanvasHeight=window.innerHeight,i.vjCanvas&&(i.vjCanvas.width=i.vjCanvasWidth,i.vjCanvas.height=i.vjCanvasHeight),i.halfWidth=i.vjCanvasWidth/2},!i.vjCanvas){window.addEventListener("resize",this._onResize,!1),i.vjCanvas=document.createElement("canvas"),i.vjCanvasWidth=window.innerWidth,i.vjCanvasHeight=window.innerHeight,i.vjCanvas.width=window.innerWidth,i.vjCanvas.height=window.innerHeight,i.vjCanvas.style.width="100%",i.vjCanvas.style.height="100%",i.vjCanvas.style.position="absolute",i.vjCanvas.style.backgroundColor="transparent",i.vjCanvas.style.top="0px",i.vjCanvas.style.left="0px",i.vjCanvas.style.zIndex="5",i.vjCanvas.style.msTouchAction="none",i.vjCanvas.setAttribute("touch-action","none");var o=i.vjCanvas.getContext("2d");if(!o)throw new Error("Unable to create canvas for virtual joystick");i.vjCanvasContext=o,i.vjCanvasContext.strokeStyle="#ffffff",i.vjCanvasContext.lineWidth=2,document.body.appendChild(i.vjCanvas)}i.halfWidth=i.vjCanvas.width/2,this.pressed=!1,this._joystickColor="cyan",this._joystickPointerID=-1,this._joystickPointerPos=new t.Vector2(0,0),this._joystickPreviousPointerPos=new t.Vector2(0,0),this._joystickPointerStartPos=new t.Vector2(0,0),this._deltaJoystickVector=new t.Vector2(0,0),this._onPointerDownHandlerRef=function(t){r._onPointerDown(t)},this._onPointerMoveHandlerRef=function(t){r._onPointerMove(t)},this._onPointerUpHandlerRef=function(t){r._onPointerUp(t)},i.vjCanvas.addEventListener("pointerdown",this._onPointerDownHandlerRef,!1),i.vjCanvas.addEventListener("pointermove",this._onPointerMoveHandlerRef,!1),i.vjCanvas.addEventListener("pointerup",this._onPointerUpHandlerRef,!1),i.vjCanvas.addEventListener("pointerout",this._onPointerUpHandlerRef,!1),i.vjCanvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),requestAnimationFrame(function(){r._drawVirtualJoystick()})}return i.prototype.setJoystickSensibility=function(t){this._joystickSensibility=t,this._inversedSensibility=1/(this._joystickSensibility/1e3)},i.prototype._onPointerDown=function(t){t.preventDefault(),(!0===this._leftJoystick?t.clientX<i.halfWidth:t.clientX>i.halfWidth)&&this._joystickPointerID<0?(this._joystickPointerID=t.pointerId,this._joystickPointerStartPos.x=t.clientX,this._joystickPointerStartPos.y=t.clientY,this._joystickPointerPos=this._joystickPointerStartPos.clone(),this._joystickPreviousPointerPos=this._joystickPointerStartPos.clone(),this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this.pressed=!0,this._touches.add(t.pointerId.toString(),t)):i._globalJoystickIndex<2&&this._action&&(this._action(),this._touches.add(t.pointerId.toString(),{x:t.clientX,y:t.clientY,prevX:t.clientX,prevY:t.clientY}))},i.prototype._onPointerMove=function(t){if(this._joystickPointerID==t.pointerId){this._joystickPointerPos.x=t.clientX,this._joystickPointerPos.y=t.clientY,this._deltaJoystickVector=this._joystickPointerPos.clone(),this._deltaJoystickVector=this._deltaJoystickVector.subtract(this._joystickPointerStartPos);var i=(this.reverseLeftRight?-1:1)*this._deltaJoystickVector.x/this._inversedSensibility;switch(this._axisTargetedByLeftAndRight){case e.X:this.deltaPosition.x=Math.min(1,Math.max(-1,i));break;case e.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,i));break;case e.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,i))}var n=(this.reverseUpDown?1:-1)*this._deltaJoystickVector.y/this._inversedSensibility;switch(this._axisTargetedByUpAndDown){case e.X:this.deltaPosition.x=Math.min(1,Math.max(-1,n));break;case e.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,n));break;case e.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,n))}}else{var r=this._touches.get(t.pointerId.toString());r&&(r.x=t.clientX,r.y=t.clientY)}},i.prototype._onPointerUp=function(t){if(this._joystickPointerID==t.pointerId)i.vjCanvasContext.clearRect(this._joystickPointerStartPos.x-64,this._joystickPointerStartPos.y-64,128,128),i.vjCanvasContext.clearRect(this._joystickPreviousPointerPos.x-42,this._joystickPreviousPointerPos.y-42,84,84),this._joystickPointerID=-1,this.pressed=!1;else{var e=this._touches.get(t.pointerId.toString());e&&i.vjCanvasContext.clearRect(e.prevX-44,e.prevY-44,88,88)}this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this._touches.remove(t.pointerId.toString())},i.prototype.setJoystickColor=function(t){this._joystickColor=t},i.prototype.setActionOnTouch=function(t){this._action=t},i.prototype.setAxisForLeftRight=function(t){switch(t){case e.X:case e.Y:case e.Z:this._axisTargetedByLeftAndRight=t;break;default:this._axisTargetedByLeftAndRight=e.X}},i.prototype.setAxisForUpDown=function(t){switch(t){case e.X:case e.Y:case e.Z:this._axisTargetedByUpAndDown=t;break;default:this._axisTargetedByUpAndDown=e.Y}},i.prototype._drawVirtualJoystick=function(){var t=this;this.pressed&&this._touches.forEach(function(e,n){n.pointerId===t._joystickPointerID?(i.vjCanvasContext.clearRect(t._joystickPointerStartPos.x-64,t._joystickPointerStartPos.y-64,128,128),i.vjCanvasContext.clearRect(t._joystickPreviousPointerPos.x-42,t._joystickPreviousPointerPos.y-42,84,84),i.vjCanvasContext.beginPath(),i.vjCanvasContext.lineWidth=6,i.vjCanvasContext.strokeStyle=t._joystickColor,i.vjCanvasContext.arc(t._joystickPointerStartPos.x,t._joystickPointerStartPos.y,40,0,2*Math.PI,!0),i.vjCanvasContext.stroke(),i.vjCanvasContext.closePath(),i.vjCanvasContext.beginPath(),i.vjCanvasContext.strokeStyle=t._joystickColor,i.vjCanvasContext.lineWidth=2,i.vjCanvasContext.arc(t._joystickPointerStartPos.x,t._joystickPointerStartPos.y,60,0,2*Math.PI,!0),i.vjCanvasContext.stroke(),i.vjCanvasContext.closePath(),i.vjCanvasContext.beginPath(),i.vjCanvasContext.strokeStyle=t._joystickColor,i.vjCanvasContext.arc(t._joystickPointerPos.x,t._joystickPointerPos.y,40,0,2*Math.PI,!0),i.vjCanvasContext.stroke(),i.vjCanvasContext.closePath(),t._joystickPreviousPointerPos=t._joystickPointerPos.clone()):(i.vjCanvasContext.clearRect(n.prevX-44,n.prevY-44,88,88),i.vjCanvasContext.beginPath(),i.vjCanvasContext.fillStyle="white",i.vjCanvasContext.beginPath(),i.vjCanvasContext.strokeStyle="red",i.vjCanvasContext.lineWidth=6,i.vjCanvasContext.arc(n.x,n.y,40,0,2*Math.PI,!0),i.vjCanvasContext.stroke(),i.vjCanvasContext.closePath(),n.prevX=n.x,n.prevY=n.y)}),requestAnimationFrame(function(){t._drawVirtualJoystick()})},i.prototype.releaseCanvas=function(){i.vjCanvas&&(i.vjCanvas.removeEventListener("pointerdown",this._onPointerDownHandlerRef),i.vjCanvas.removeEventListener("pointermove",this._onPointerMoveHandlerRef),i.vjCanvas.removeEventListener("pointerup",this._onPointerUpHandlerRef),i.vjCanvas.removeEventListener("pointerout",this._onPointerUpHandlerRef),window.removeEventListener("resize",this._onResize),document.body.removeChild(i.vjCanvas),i.vjCanvas=null)},i._globalJoystickIndex=0,i}();t.VirtualJoystick=i}(l||(l={})),function(t){var e=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.inputs.addVirtualJoystick(),r}return o(e,t),e.prototype.getClassName=function(){return"VirtualJoysticksCamera"},e}(t.FreeCamera);t.VirtualJoysticksCamera=e}(l||(l={})),function(t){var e=function(){function e(){}return e.prototype.getLeftJoystick=function(){return this._leftjoystick},e.prototype.getRightJoystick=function(){return this._rightjoystick},e.prototype.checkInputs=function(){if(this._leftjoystick){var e=this.camera,i=50*e._computeLocalCameraSpeed(),n=t.Matrix.RotationYawPitchRoll(e.rotation.y,e.rotation.x,0),r=t.Vector3.TransformCoordinates(new t.Vector3(this._leftjoystick.deltaPosition.x*i,this._leftjoystick.deltaPosition.y*i,this._leftjoystick.deltaPosition.z*i),n);e.cameraDirection=e.cameraDirection.add(r),e.cameraRotation=e.cameraRotation.addVector3(this._rightjoystick.deltaPosition),this._leftjoystick.pressed||(this._leftjoystick.deltaPosition=this._leftjoystick.deltaPosition.scale(.9)),this._rightjoystick.pressed||(this._rightjoystick.deltaPosition=this._rightjoystick.deltaPosition.scale(.9))}},e.prototype.attachControl=function(e,i){this._leftjoystick=new t.VirtualJoystick(!0),this._leftjoystick.setAxisForUpDown(t.JoystickAxis.Z),this._leftjoystick.setAxisForLeftRight(t.JoystickAxis.X),this._leftjoystick.setJoystickSensibility(.15),this._rightjoystick=new t.VirtualJoystick(!1),this._rightjoystick.setAxisForUpDown(t.JoystickAxis.X),this._rightjoystick.setAxisForLeftRight(t.JoystickAxis.Y),this._rightjoystick.reverseUpDown=!0,this._rightjoystick.setJoystickSensibility(.05),this._rightjoystick.setJoystickColor("yellow")},e.prototype.detachControl=function(t){this._leftjoystick.releaseCanvas(),this._rightjoystick.releaseCanvas()},e.prototype.getClassName=function(){return"FreeCameraVirtualJoystickInput"},e.prototype.getSimpleName=function(){return"virtualJoystick"},e}();t.FreeCameraVirtualJoystickInput=e,t.CameraInputTypes.FreeCameraVirtualJoystickInput=e}(l||(l={})),function(t){var e=function(){return function(t,e,i){this.quality=t,this.distance=e,this.optimizeMesh=i}}();t.SimplificationSettings=e;var i,n=function(){function e(){this.running=!1,this._simplificationArray=[]}return e.prototype.addTask=function(t){this._simplificationArray.push(t)},e.prototype.executeNext=function(){var t=this._simplificationArray.pop();t?(this.running=!0,this.runSimplification(t)):this.running=!1},e.prototype.runSimplification=function(e){var i=this;if(e.parallelProcessing)e.settings.forEach(function(t){i.getSimplifier(e).simplify(t,function(n){e.mesh.addLODLevel(t.distance,n),n.isVisible=!0,t.quality===e.settings[e.settings.length-1].quality&&e.successCallback&&e.successCallback(),i.executeNext()})});else{var n=this.getSimplifier(e);t.AsyncLoop.Run(e.settings.length,function(t){!function(t,i){n.simplify(t,function(n){e.mesh.addLODLevel(t.distance,n),n.isVisible=!0,i()})}(e.settings[t.index],function(){t.executeNext()})},function(){e.successCallback&&e.successCallback(),i.executeNext()})}},e.prototype.getSimplifier=function(t){switch(t.simplificationType){case i.QUADRATIC:default:return new l(t.mesh)}},e}();t.SimplificationQueue=n,function(t){t[t.QUADRATIC=0]="QUADRATIC"}(i=t.SimplificationType||(t.SimplificationType={}));var r=function(){return function(t){this.vertices=t,this.error=new Array(4),this.deleted=!1,this.isDirty=!1,this.deletePending=!1,this.borderFactor=0}}();t.DecimationTriangle=r;var o=function(){function t(t,e){this.position=t,this.id=e,this.isBorder=!0,this.q=new s,this.triangleCount=0,this.triangleStart=0,this.originalOffsets=[]}return t.prototype.updatePosition=function(t){this.position.copyFrom(t)},t}();t.DecimationVertex=o;var s=function(){function t(t){this.data=new Array(10);for(var e=0;e<10;++e)t&&t[e]?this.data[e]=t[e]:this.data[e]=0}return t.prototype.det=function(t,e,i,n,r,o,s,a,l){return this.data[t]*this.data[r]*this.data[l]+this.data[i]*this.data[n]*this.data[a]+this.data[e]*this.data[o]*this.data[s]-this.data[i]*this.data[r]*this.data[s]-this.data[t]*this.data[o]*this.data[a]-this.data[e]*this.data[n]*this.data[l]},t.prototype.addInPlace=function(t){for(var e=0;e<10;++e)this.data[e]+=t.data[e]},t.prototype.addArrayInPlace=function(t){for(var e=0;e<10;++e)this.data[e]+=t[e]},t.prototype.add=function(e){for(var i=new t,n=0;n<10;++n)i.data[n]=this.data[n]+e.data[n];return i},t.FromData=function(e,i,n,r){return new t(t.DataFromNumbers(e,i,n,r))},t.DataFromNumbers=function(t,e,i,n){return[t*t,t*e,t*i,t*n,e*e,e*i,e*n,i*i,i*n,n*n]},t}();t.QuadraticMatrix=s;var a=function(){return function(t,e){this.vertexId=t,this.triangleId=e}}();t.Reference=a;var l=function(){function e(e){this._mesh=e,this.syncIterations=5e3,this.aggressiveness=7,this.decimationIterations=100,this.boundingBoxEpsilon=t.Epsilon}return e.prototype.simplify=function(e,i){var n=this;this.initDecimatedMesh(),t.AsyncLoop.Run(this._mesh.subMeshes.length,function(t){n.initWithMesh(t.index,function(){n.runDecimation(e,t.index,function(){t.executeNext()})},e.optimizeMesh)},function(){setTimeout(function(){i(n._reconstructedMesh)},0)})},e.prototype.runDecimation=function(e,i,n){var r=this,o=~~(this.triangles.length*e.quality),s=0,a=this.triangles.length,l=function(e,i){setTimeout(function(){e%5==0&&r.updateMesh(0===e);for(var n=0;n<r.triangles.length;++n)r.triangles[n].isDirty=!1;var l=1e-9*Math.pow(e+3,r.aggressiveness);t.AsyncLoop.SyncAsyncForLoop(r.triangles.length,r.syncIterations,function(e){var i=~~((r.triangles.length/2+e)%r.triangles.length),n=r.triangles[i];if(n&&!(n.error[3]>l||n.deleted||n.isDirty))for(var o=0;o<3;++o)if(n.error[o]<l){var a=[],c=[],u=n.vertices[o],h=n.vertices[(o+1)%3];if(u.isBorder||h.isBorder)continue;var p=t.Vector3.Zero(),d=t.Vector3.Zero(),f=t.Vector2.Zero(),m=new t.Color4(0,0,0,1);r.calculateError(u,h,p,d,f,m);var g=new Array;if(r.isFlipped(u,h,p,a,n.borderFactor,g))continue;if(r.isFlipped(h,u,p,c,n.borderFactor,g))continue;if(a.indexOf(!0)<0||c.indexOf(!0)<0)continue;var y=new Array;if(g.forEach(function(t){-1===y.indexOf(t)&&(t.deletePending=!0,y.push(t))}),y.length%2!=0)continue;u.q=h.q.add(u.q),u.updatePosition(p);var _=r.references.length;s=r.updateTriangles(u,u,a,s),s=r.updateTriangles(u,h,c,s);var v=r.references.length-_;if(v<=u.triangleCount){if(v)for(var b=0;b<v;b++)r.references[u.triangleStart+b]=r.references[_+b]}else u.triangleStart=_;u.triangleCount=v;break}},i,function(){return a-s<=o})},0)};t.AsyncLoop.Run(this.decimationIterations,function(t){a-s<=o?t.breakLoop():l(t.index,function(){t.executeNext()})},function(){setTimeout(function(){r.reconstructMesh(i),n()},0)})},e.prototype.initWithMesh=function(e,i,n){var s=this;this.vertices=[],this.triangles=[];var a=this._mesh.getVerticesData(t.VertexBuffer.PositionKind),l=this._mesh.getIndices(),c=this._mesh.subMeshes[e],u=function(t){if(n)for(var e=0;e<s.vertices.length;++e)if(s.vertices[e].position.equals(t))return s.vertices[e];return null},h=[],p=c.verticesCount;t.AsyncLoop.SyncAsyncForLoop(p,this.syncIterations/4>>0,function(e){if(a){var i=e+c.verticesStart,n=t.Vector3.FromArray(a,3*i),r=u(n)||new o(n,s.vertices.length);r.originalOffsets.push(i),r.id===s.vertices.length&&s.vertices.push(r),h.push(r.id)}},function(){t.AsyncLoop.SyncAsyncForLoop(c.indexCount/3,s.syncIterations,function(t){if(l){var e=3*(c.indexStart/3+t),i=l[e+0],n=l[e+1],o=l[e+2],a=s.vertices[h[i-c.verticesStart]],u=s.vertices[h[n-c.verticesStart]],p=s.vertices[h[o-c.verticesStart]],d=new r([a,u,p]);d.originalOffset=e,s.triangles.push(d)}},function(){s.init(i)})})},e.prototype.init=function(e){var i=this;t.AsyncLoop.SyncAsyncForLoop(this.triangles.length,this.syncIterations,function(e){var n=i.triangles[e];n.normal=t.Vector3.Cross(n.vertices[1].position.subtract(n.vertices[0].position),n.vertices[2].position.subtract(n.vertices[0].position)).normalize();for(var r=0;r<3;r++)n.vertices[r].q.addArrayInPlace(s.DataFromNumbers(n.normal.x,n.normal.y,n.normal.z,-t.Vector3.Dot(n.normal,n.vertices[0].position)))},function(){t.AsyncLoop.SyncAsyncForLoop(i.triangles.length,i.syncIterations,function(t){for(var e=i.triangles[t],n=0;n<3;++n)e.error[n]=i.calculateError(e.vertices[n],e.vertices[(n+1)%3]);e.error[3]=Math.min(e.error[0],e.error[1],e.error[2])},function(){e()})})},e.prototype.reconstructMesh=function(e){var i,n,r,o=[];for(i=0;i<this.vertices.length;++i)this.vertices[i].triangleCount=0;for(i=0;i<this.triangles.length;++i)if(!this.triangles[i].deleted){for(n=this.triangles[i],r=0;r<3;++r)n.vertices[r].triangleCount=1;o.push(n)}var s=this._reconstructedMesh.getVerticesData(t.VertexBuffer.PositionKind)||[],a=this._reconstructedMesh.getVerticesData(t.VertexBuffer.NormalKind)||[],l=this._reconstructedMesh.getVerticesData(t.VertexBuffer.UVKind)||[],c=this._reconstructedMesh.getVerticesData(t.VertexBuffer.ColorKind)||[],u=this._mesh.getVerticesData(t.VertexBuffer.NormalKind),h=this._mesh.getVerticesData(t.VertexBuffer.UVKind),p=this._mesh.getVerticesData(t.VertexBuffer.ColorKind),d=0;for(i=0;i<this.vertices.length;++i){var f=this.vertices[i];f.id=d,f.triangleCount&&f.originalOffsets.forEach(function(t){u&&(s.push(f.position.x),s.push(f.position.y),s.push(f.position.z),a.push(u[3*t]),a.push(u[3*t+1]),a.push(u[3*t+2]),h&&h.length?(l.push(h[2*t]),l.push(h[2*t+1])):p&&p.length&&(c.push(p[4*t]),c.push(p[4*t+1]),c.push(p[4*t+2]),c.push(p[4*t+3])),++d)})}var m=this._reconstructedMesh.getTotalIndices(),g=this._reconstructedMesh.getTotalVertices(),y=this._reconstructedMesh.subMeshes;this._reconstructedMesh.subMeshes=[];var _=this._reconstructedMesh.getIndices(),v=this._mesh.getIndices();for(i=0;i<o.length;++i)n=o[i],[0,1,2].forEach(function(t){var e=v[n.originalOffset+t],i=n.vertices[t].originalOffsets.indexOf(e);i<0&&(i=0),_.push(n.vertices[t].id+i+g)});this._reconstructedMesh.setIndices(_),this._reconstructedMesh.setVerticesData(t.VertexBuffer.PositionKind,s),this._reconstructedMesh.setVerticesData(t.VertexBuffer.NormalKind,a),l.length>0&&this._reconstructedMesh.setVerticesData(t.VertexBuffer.UVKind,l),c.length>0&&this._reconstructedMesh.setVerticesData(t.VertexBuffer.ColorKind,c);var b=this._mesh.subMeshes[e];e>0&&(this._reconstructedMesh.subMeshes=[],y.forEach(function(e){t.SubMesh.AddToMesh(e.materialIndex,e.verticesStart,e.verticesCount,e.indexStart,e.indexCount,e.getMesh())}),t.SubMesh.AddToMesh(b.materialIndex,g,d,m,3*o.length,this._reconstructedMesh))},e.prototype.initDecimatedMesh=function(){this._reconstructedMesh=new t.Mesh(this._mesh.name+"Decimated",this._mesh.getScene()),this._reconstructedMesh.material=this._mesh.material,this._reconstructedMesh.parent=this._mesh.parent,this._reconstructedMesh.isVisible=!1,this._reconstructedMesh.renderingGroupId=this._mesh.renderingGroupId},e.prototype.isFlipped=function(e,i,n,r,o,s){for(var a=0;a<e.triangleCount;++a){var l=this.triangles[this.references[e.triangleStart+a].triangleId];if(!l.deleted){var c=this.references[e.triangleStart+a].vertexId,u=l.vertices[(c+1)%3],h=l.vertices[(c+2)%3];if(u!==i&&h!==i){var p=u.position.subtract(n);p=p.normalize();var d=h.position.subtract(n);if(d=d.normalize(),Math.abs(t.Vector3.Dot(p,d))>.999)return!0;var f=t.Vector3.Cross(p,d).normalize();if(r[a]=!1,t.Vector3.Dot(f,l.normal)<.2)return!0}else r[a]=!0,s.push(l)}}return!1},e.prototype.updateTriangles=function(t,e,i,n){for(var r=n,o=0;o<e.triangleCount;++o){var s=this.references[e.triangleStart+o],a=this.triangles[s.triangleId];a.deleted||(i[o]&&a.deletePending?(a.deleted=!0,r++):(a.vertices[s.vertexId]=t,a.isDirty=!0,a.error[0]=this.calculateError(a.vertices[0],a.vertices[1])+a.borderFactor/2,a.error[1]=this.calculateError(a.vertices[1],a.vertices[2])+a.borderFactor/2,a.error[2]=this.calculateError(a.vertices[2],a.vertices[0])+a.borderFactor/2,a.error[3]=Math.min(a.error[0],a.error[1],a.error[2]),this.references.push(s)))}return r},e.prototype.identifyBorder=function(){for(var t=0;t<this.vertices.length;++t){var e,i=[],n=[],r=this.vertices[t];for(e=0;e<r.triangleCount;++e)for(var o=this.triangles[this.references[r.triangleStart+e].triangleId],s=0;s<3;s++){for(var a=0,l=o.vertices[s];a<i.length&&n[a]!==l.id;)++a;a===i.length?(i.push(1),n.push(l.id)):i[a]++}for(e=0;e<i.length;++e)1===i[e]?this.vertices[n[e]].isBorder=!0:this.vertices[n[e]].isBorder=!1}},e.prototype.updateMesh=function(t){var e,i,n,r;if(void 0===t&&(t=!1),!t){var o=[];for(e=0;e<this.triangles.length;++e)this.triangles[e].deleted||o.push(this.triangles[e]);this.triangles=o}for(e=0;e<this.vertices.length;++e)this.vertices[e].triangleCount=0,this.vertices[e].triangleStart=0;for(e=0;e<this.triangles.length;++e)for(i=this.triangles[e],n=0;n<3;++n)(r=i.vertices[n]).triangleCount++;var s=0;for(e=0;e<this.vertices.length;++e)this.vertices[e].triangleStart=s,s+=this.vertices[e].triangleCount,this.vertices[e].triangleCount=0;var l=new Array(3*this.triangles.length);for(e=0;e<this.triangles.length;++e)for(i=this.triangles[e],n=0;n<3;++n)l[(r=i.vertices[n]).triangleStart+r.triangleCount]=new a(n,e),r.triangleCount++;this.references=l,t&&this.identifyBorder()},e.prototype.vertexError=function(t,e){var i=e.x,n=e.y,r=e.z;return t.data[0]*i*i+2*t.data[1]*i*n+2*t.data[2]*i*r+2*t.data[3]*i+t.data[4]*n*n+2*t.data[5]*n*r+2*t.data[6]*n+t.data[7]*r*r+2*t.data[8]*r+t.data[9]},e.prototype.calculateError=function(e,i,n,r,o,s){var a=e.q.add(i.q),l=e.isBorder&&i.isBorder,c=0,u=a.det(0,1,2,1,4,5,2,5,7);if(0===u||l){var h=e.position.add(i.position).divide(new t.Vector3(2,2,2)),p=this.vertexError(a,e.position),d=this.vertexError(a,i.position),f=this.vertexError(a,h);(c=Math.min(p,d,f))===p?n&&n.copyFrom(e.position):c===d?n&&n.copyFrom(i.position):n&&n.copyFrom(h)}else n||(n=t.Vector3.Zero()),n.x=-1/u*a.det(1,2,3,4,5,6,5,7,8),n.y=1/u*a.det(0,2,3,1,5,6,2,7,8),n.z=-1/u*a.det(0,1,3,1,4,6,2,5,8),c=this.vertexError(a,n);return c},e}();t.QuadraticErrorSimplification=l}(l||(l={})),function(t){var e=function(){return function(t,e){this.distance=t,this.mesh=e}}();t.MeshLODLevel=e}(l||(l={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this.priority=t}return t.prototype.getDescription=function(){return""},t.prototype.apply=function(t,e){return!0},t}();t.SceneOptimization=e;var i=function(t){function e(e,i,n){void 0===e&&(e=0),void 0===i&&(i=1024),void 0===n&&(n=.5);var r=t.call(this,e)||this;return r.priority=e,r.maximumSize=i,r.step=n,r}return o(e,t),e.prototype.getDescription=function(){return"Reducing render target texture size to "+this.maximumSize},e.prototype.apply=function(t,e){for(var i=!0,n=0;n<t.textures.length;n++){var r=t.textures[n];if(r.canRescale&&!r.getContext){var o=r.getSize();Math.max(o.width,o.height)>this.maximumSize&&(r.scale(this.step),i=!1)}}return i},e}(e);t.TextureOptimization=i;var n=function(t){function e(e,i,n){void 0===e&&(e=0),void 0===i&&(i=2),void 0===n&&(n=.25);var r=t.call(this,e)||this;return r.priority=e,r.maximumScale=i,r.step=n,r._currentScale=-1,r._directionOffset=1,r}return o(e,t),e.prototype.getDescription=function(){return"Setting hardware scaling level to "+this._currentScale},e.prototype.apply=function(t,e){return-1===this._currentScale&&(this._currentScale=t.getEngine().getHardwareScalingLevel(),this._currentScale>this.maximumScale&&(this._directionOffset=-1)),this._currentScale+=this._directionOffset*this.step,t.getEngine().setHardwareScalingLevel(this._currentScale),1===this._directionOffset?this._currentScale>=this.maximumScale:this._currentScale<=this.maximumScale},e}(e);t.HardwareScalingOptimization=n;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return"Turning shadows on/off"},e.prototype.apply=function(t,e){return t.shadowsEnabled=e.isInImprovementMode,!0},e}(e);t.ShadowsOptimization=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return"Turning post-processes on/off"},e.prototype.apply=function(t,e){return t.postProcessesEnabled=e.isInImprovementMode,!0},e}(e);t.PostProcessesOptimization=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return"Turning lens flares on/off"},e.prototype.apply=function(t,e){return t.lensFlaresEnabled=e.isInImprovementMode,!0},e}(e);t.LensFlaresOptimization=a;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return this.onGetDescription?this.onGetDescription():"Running user defined callback"},e.prototype.apply=function(t,e){return!this.onApply||this.onApply(t,e)},e}(e);t.CustomOptimization=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return"Turning particles on/off"},e.prototype.apply=function(t,e){return t.particlesEnabled=e.isInImprovementMode,!0},e}(e);t.ParticlesOptimization=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getDescription=function(){return"Turning render targets off"},e.prototype.apply=function(t,e){return t.renderTargetsEnabled=e.isInImprovementMode,!0},e}(e);t.RenderTargetsOptimization=u;var h=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i._canBeMerged=function(e){if(!(e instanceof t.Mesh))return!1;var i=e;return!(!i.isVisible||!i.isEnabled()||i.instances.length>0||i.skeleton||i.hasLODLevels||i.parent)},i}return o(i,e),Object.defineProperty(i,"UpdateSelectionTree",{get:function(){return i._UpdateSelectionTree},set:function(t){i._UpdateSelectionTree=t},enumerable:!0,configurable:!0}),i.prototype.getDescription=function(){return"Merging similar meshes together"},i.prototype.apply=function(e,n,r){for(var o=e.meshes.slice(0),s=o.length,a=0;a<s;a++){var l=new Array,c=o[a];if(this._canBeMerged(c)){l.push(c);for(var u=a+1;u<s;u++){var h=o[u];this._canBeMerged(h)&&h.material===c.material&&h.checkCollisions===c.checkCollisions&&(l.push(h),s--,o.splice(u,1),u--)}l.length<2||t.Mesh.MergeMeshes(l)}}return null!=r?r&&e.createOrUpdateSelectionOctree():i.UpdateSelectionTree&&e.createOrUpdateSelectionOctree(),!0},i._UpdateSelectionTree=!1,i}(e);t.MergeMeshesOptimization=h;var p=function(){function t(t,e){void 0===t&&(t=60),void 0===e&&(e=2e3),this.targetFrameRate=t,this.trackerDuration=e,this.optimizations=new Array}return t.prototype.addOptimization=function(t){return this.optimizations.push(t),this},t.prototype.addCustomOptimization=function(t,e,i){void 0===i&&(i=0);var n=new l(i);return n.onApply=t,n.onGetDescription=e,this.optimizations.push(n),this},t.LowDegradationAllowed=function(e){var n=new t(e),o=0;return n.addOptimization(new h(o)),n.addOptimization(new r(o)),n.addOptimization(new a(o)),o++,n.addOptimization(new s(o)),n.addOptimization(new c(o)),o++,n.addOptimization(new i(o,1024)),n},t.ModerateDegradationAllowed=function(e){var o=new t(e),l=0;return o.addOptimization(new h(l)),o.addOptimization(new r(l)),o.addOptimization(new a(l)),l++,o.addOptimization(new s(l)),o.addOptimization(new c(l)),l++,o.addOptimization(new i(l,512)),l++,o.addOptimization(new u(l)),l++,o.addOptimization(new n(l,2)),o},t.HighDegradationAllowed=function(e){var o=new t(e),l=0;return o.addOptimization(new h(l)),o.addOptimization(new r(l)),o.addOptimization(new a(l)),l++,o.addOptimization(new s(l)),o.addOptimization(new c(l)),l++,o.addOptimization(new i(l,256)),l++,o.addOptimization(new u(l)),l++,o.addOptimization(new n(l,4)),o},t}();t.SceneOptimizerOptions=p;var d=function(){function e(e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var o=this;if(this._isRunning=!1,this._currentPriorityLevel=0,this._targetFrameRate=60,this._trackerDuration=2e3,this._currentFrameRate=0,this._improvementMode=!1,this.onSuccessObservable=new t.Observable,this.onNewOptimizationAppliedObservable=new t.Observable,this.onFailureObservable=new t.Observable,this._options=i||new p,this._options.targetFrameRate&&(this._targetFrameRate=this._options.targetFrameRate),this._options.trackerDuration&&(this._trackerDuration=this._options.trackerDuration),n)for(var s=0,a=0,l=this._options.optimizations;a<l.length;a++){l[a].priority=s++}this._improvementMode=r,this._scene=e||t.Engine.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){o._sceneDisposeObserver=null,o.dispose()})}return Object.defineProperty(e.prototype,"isInImprovementMode",{get:function(){return this._improvementMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPriorityLevel",{get:function(){return this._currentPriorityLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFrameRate",{get:function(){return this._currentFrameRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetFrameRate",{get:function(){return this._targetFrameRate},set:function(t){this._targetFrameRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackerDuration",{get:function(){return this._trackerDuration},set:function(t){this._trackerDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optimizations",{get:function(){return this._options.optimizations},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this._isRunning=!1},e.prototype.reset=function(){this._currentPriorityLevel=0},e.prototype.start=function(){var t=this;this._isRunning||(this._isRunning=!0,this._scene.executeWhenReady(function(){setTimeout(function(){t._checkCurrentState()},t._trackerDuration)}))},e.prototype._checkCurrentState=function(){var t=this;if(this._isRunning){var e=this._scene,i=this._options;if(this._currentFrameRate=Math.round(e.getEngine().getFps()),this._improvementMode&&this._currentFrameRate<=this._targetFrameRate||!this._improvementMode&&this._currentFrameRate>=this._targetFrameRate)return this._isRunning=!1,void this.onSuccessObservable.notifyObservers(this);for(var n=!0,r=!0,o=0;o<i.optimizations.length;o++){var s=i.optimizations[o];s.priority===this._currentPriorityLevel&&(r=!1,n=n&&s.apply(e,this),this.onNewOptimizationAppliedObservable.notifyObservers(s))}if(r)return this._isRunning=!1,void this.onFailureObservable.notifyObservers(this);n&&this._currentPriorityLevel++,e.executeWhenReady(function(){setTimeout(function(){t._checkCurrentState()},t._trackerDuration)})}},e.prototype.dispose=function(){this.stop(),this.onSuccessObservable.clear(),this.onFailureObservable.clear(),this.onNewOptimizationAppliedObservable.clear(),this._sceneDisposeObserver&&this._scene.onDisposeObservable.remove(this._sceneDisposeObserver)},e.OptimizeAsync=function(t,i,n,r){var o=new e(t,i||p.ModerateDegradationAllowed(),!1);return n&&o.onSuccessObservable.add(function(){n()}),r&&o.onFailureObservable.add(function(){r()}),o.start(),o},e}();t.SceneOptimizer=d}(l||(l={})),function(t){var e=function(){function e(t){this.zOffset=1,this._scene=t}return e.prototype.render=function(e,i,n){var r=this;void 0===n&&(n=!1);var o=this._scene,s=this._scene.getEngine(),a=s.getCaps().instancedArrays&&null!==i.visibleInstances[e._id]&&void 0!==i.visibleInstances[e._id];if(this.isReady(e,a)){var l=e.getRenderingMesh(),c=e.getMaterial();if(c&&o.activeCamera){if(s.enableEffect(this._effect),c.useLogarithmicDepth&&this._effect.setFloat("logarithmicDepthConstant",2/(Math.log(o.activeCamera.maxZ+1)/Math.LN2)),this._effect.setFloat("offset",n?0:l.outlineWidth),this._effect.setColor4("color",n?l.overlayColor:l.outlineColor,n?l.overlayAlpha:c.alpha),this._effect.setMatrix("viewProjection",o.getTransformMatrix()),l.useBones&&l.computeBonesUsingShaders&&l.skeleton&&this._effect.setMatrices("mBones",l.skeleton.getTransformMatrices(l)),l._bind(e,this._effect,t.Material.TriangleFillMode),c&&c.needAlphaTesting()){var u=c.getAlphaTestTexture();u&&(this._effect.setTexture("diffuseSampler",u),this._effect.setMatrix("diffuseMatrix",u.getTextureMatrix()))}s.setZOffset(-this.zOffset),l._processRendering(e,this._effect,t.Material.TriangleFillMode,i,a,function(t,e){r._effect.setMatrix("world",e)}),s.setZOffset(0)}}},e.prototype.isReady=function(e,i){var n=[],r=[t.VertexBuffer.PositionKind,t.VertexBuffer.NormalKind],o=e.getMesh(),s=e.getMaterial();s&&(s.needAlphaTesting()&&(n.push("#define ALPHATEST"),o.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(r.push(t.VertexBuffer.UVKind),n.push("#define UV1")),o.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&(r.push(t.VertexBuffer.UV2Kind),n.push("#define UV2"))),s.useLogarithmicDepth&&n.push("#define LOGARITHMICDEPTH")),o.useBones&&o.computeBonesUsingShaders?(r.push(t.VertexBuffer.MatricesIndicesKind),r.push(t.VertexBuffer.MatricesWeightsKind),o.numBoneInfluencers>4&&(r.push(t.VertexBuffer.MatricesIndicesExtraKind),r.push(t.VertexBuffer.MatricesWeightsExtraKind)),n.push("#define NUM_BONE_INFLUENCERS "+o.numBoneInfluencers),n.push("#define BonesPerMesh "+(o.skeleton?o.skeleton.bones.length+1:0))):n.push("#define NUM_BONE_INFLUENCERS 0"),i&&(n.push("#define INSTANCES"),r.push("world0"),r.push("world1"),r.push("world2"),r.push("world3"));var a=n.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this._scene.getEngine().createEffect("outline",r,["world","mBones","viewProjection","diffuseMatrix","offset","color","logarithmicDepthConstant"],["diffuseSampler"],a)),this._effect.isReady()},e}();t.OutlineRenderer=e}(l||(l={})),function(t){var e=function(){return function(){this.edges=new Array,this.edgesConnectedCount=0}}(),i=function(){function i(t,e,i){void 0===e&&(e=.95),void 0===i&&(i=!1),this.edgesWidthScalerForOrthographic=1e3,this.edgesWidthScalerForPerspective=50,this._linesPositions=new Array,this._linesNormals=new Array,this._linesIndices=new Array,this._buffers={},this._checkVerticesInsteadOfIndices=!1,this._source=t,this._checkVerticesInsteadOfIndices=i,this._epsilon=e,this._prepareRessources(),this._generateEdgesLines()}return i.prototype._prepareRessources=function(){this._lineShader||(this._lineShader=new t.ShaderMaterial("lineShader",this._source.getScene(),"line",{attributes:["position","normal"],uniforms:["worldViewProjection","color","width","aspectRatio"]}),this._lineShader.disableDepthWrite=!0,this._lineShader.backFaceCulling=!1)},i.prototype._rebuild=function(){var e=this._buffers[t.VertexBuffer.PositionKind];e&&e._rebuild(),(e=this._buffers[t.VertexBuffer.NormalKind])&&e._rebuild();var i=this._source.getScene().getEngine();this._ib=i.createIndexBuffer(this._linesIndices)},i.prototype.dispose=function(){var e=this._buffers[t.VertexBuffer.PositionKind];e&&(e.dispose(),this._buffers[t.VertexBuffer.PositionKind]=null),(e=this._buffers[t.VertexBuffer.NormalKind])&&(e.dispose(),this._buffers[t.VertexBuffer.NormalKind]=null),this._source.getScene().getEngine()._releaseBuffer(this._ib),this._lineShader.dispose()},i.prototype._processEdgeForAdjacencies=function(t,e,i,n,r){return t===i&&e===n||t===n&&e===i?0:t===n&&e===r||t===r&&e===n?1:t===r&&e===i||t===i&&e===r?2:-1},i.prototype._processEdgeForAdjacenciesWithVertices=function(t,e,i,n,r){return t.equalsWithEpsilon(i)&&e.equalsWithEpsilon(n)||t.equalsWithEpsilon(n)&&e.equalsWithEpsilon(i)?0:t.equalsWithEpsilon(n)&&e.equalsWithEpsilon(r)||t.equalsWithEpsilon(r)&&e.equalsWithEpsilon(n)?1:t.equalsWithEpsilon(r)&&e.equalsWithEpsilon(i)||t.equalsWithEpsilon(i)&&e.equalsWithEpsilon(r)?2:-1},i.prototype._checkEdge=function(e,i,n,r,o){if(void 0===i||t.Vector3.Dot(n[e],n[i])<this._epsilon){var s=this._linesPositions.length/3;r.subtract(o).normalize(),this._linesPositions.push(r.x),this._linesPositions.push(r.y),this._linesPositions.push(r.z),this._linesPositions.push(r.x),this._linesPositions.push(r.y),this._linesPositions.push(r.z),this._linesPositions.push(o.x),this._linesPositions.push(o.y),this._linesPositions.push(o.z),this._linesPositions.push(o.x),this._linesPositions.push(o.y),this._linesPositions.push(o.z),this._linesNormals.push(o.x),this._linesNormals.push(o.y),this._linesNormals.push(o.z),this._linesNormals.push(-1),this._linesNormals.push(o.x),this._linesNormals.push(o.y),this._linesNormals.push(o.z),this._linesNormals.push(1),this._linesNormals.push(r.x),this._linesNormals.push(r.y),this._linesNormals.push(r.z),this._linesNormals.push(-1),this._linesNormals.push(r.x),this._linesNormals.push(r.y),this._linesNormals.push(r.z),this._linesNormals.push(1),this._linesIndices.push(s),this._linesIndices.push(s+1),this._linesIndices.push(s+2),this._linesIndices.push(s),this._linesIndices.push(s+2),this._linesIndices.push(s+3)}},i.prototype._generateEdgesLines=function(){var i=this._source.getVerticesData(t.VertexBuffer.PositionKind),n=this._source.getIndices();if(n&&i){var r,o,s=new Array,a=new Array;for(r=0;r<n.length;r+=3){o=new e;var l=n[r],c=n[r+1],u=n[r+2];o.p0=new t.Vector3(i[3*l],i[3*l+1],i[3*l+2]),o.p1=new t.Vector3(i[3*c],i[3*c+1],i[3*c+2]),o.p2=new t.Vector3(i[3*u],i[3*u+1],i[3*u+2]);var h=t.Vector3.Cross(o.p1.subtract(o.p0),o.p2.subtract(o.p1));h.normalize(),a.push(h),s.push(o)}for(r=0;r<s.length;r++){o=s[r];for(var p=r+1;p<s.length;p++){var d=s[p];if(3===o.edgesConnectedCount)break;if(3!==d.edgesConnectedCount)for(var f=n[3*p],m=n[3*p+1],g=n[3*p+2],y=0;y<3;y++){var _=0;if(void 0===o.edges[y]){switch(y){case 0:_=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(o.p0,o.p1,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(n[3*r],n[3*r+1],f,m,g);break;case 1:_=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(o.p1,o.p2,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(n[3*r+1],n[3*r+2],f,m,g);break;case 2:_=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(o.p2,o.p0,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(n[3*r+2],n[3*r],f,m,g)}if(-1!==_&&(o.edges[y]=p,d.edges[_]=r,o.edgesConnectedCount++,d.edgesConnectedCount++,3===o.edgesConnectedCount))break}}}}for(r=0;r<s.length;r++){var v=s[r];this._checkEdge(r,v.edges[0],a,v.p0,v.p1),this._checkEdge(r,v.edges[1],a,v.p1,v.p2),this._checkEdge(r,v.edges[2],a,v.p2,v.p0)}var b=this._source.getScene().getEngine();this._buffers[t.VertexBuffer.PositionKind]=new t.VertexBuffer(b,this._linesPositions,t.VertexBuffer.PositionKind,!1),this._buffers[t.VertexBuffer.NormalKind]=new t.VertexBuffer(b,this._linesNormals,t.VertexBuffer.NormalKind,!1,!1,4),this._ib=b.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},i.prototype.render=function(){var e=this._source.getScene();if(this._lineShader.isReady()&&e.activeCamera){var i=e.getEngine();this._lineShader._preBind(),i.bindBuffers(this._buffers,this._ib,this._lineShader.getEffect()),e.resetCachedMaterial(),this._lineShader.setColor4("color",this._source.edgesColor),e.activeCamera.mode===t.Camera.ORTHOGRAPHIC_CAMERA?this._lineShader.setFloat("width",this._source.edgesWidth/this.edgesWidthScalerForOrthographic):this._lineShader.setFloat("width",this._source.edgesWidth/this.edgesWidthScalerForPerspective),this._lineShader.setFloat("aspectRatio",i.getAspectRatio(e.activeCamera)),this._lineShader.bind(this._source.getWorldMatrix()),i.drawElementsType(t.Material.TriangleFillMode,0,this._indicesCount),this._lineShader.unbind(),i.setDepthWrite(!0)}},i}();t.EdgesRenderer=i}(l||(l={})),function(t){var e=function(e){function i(i,n,r,o,s,a,l,c){void 0===a&&(a=t.Texture.BILINEAR_SAMPLINGMODE);var u=e.call(this,i,"glowBlurPostProcess",["screenSize","direction","blurWidth"],null,o,s,a,l,c)||this;return u.direction=n,u.kernel=r,u.onApplyObservable.add(function(t){t.setFloat2("screenSize",u.width,u.height),t.setVector2("direction",u.direction),t.setFloat("blurWidth",u.kernel)}),u}return o(i,e),i}(t.PostProcess),i=function(){function i(e,n,r){this.name=e,this._vertexBuffers={},this._mainTextureDesiredSize={width:0,height:0},this._meshes={},this._maxSize=0,this._shouldRender=!1,this._instanceGlowingMeshStencilReference=i.glowingMeshStencilReference++,this._excludedMeshes={},this.innerGlow=!0,this.outerGlow=!0,this.isEnabled=!0,this.onDisposeObservable=new t.Observable,this.onBeforeRenderMainTextureObservable=new t.Observable,this.onBeforeBlurObservable=new t.Observable,this.onAfterBlurObservable=new t.Observable,this.onBeforeComposeObservable=new t.Observable,this.onAfterComposeObservable=new t.Observable,this.onSizeChangedObservable=new t.Observable,this._scene=n||t.Engine.LastCreatedScene;var o=n.getEngine();this._engine=o,this._maxSize=this._engine.getCaps().maxTextureSize,this._scene.highlightLayers.push(this),this._engine.isStencilEnable||t.Tools.Warn("Rendering the Highlight Layer requires the stencil to be active on the canvas. var engine = new BABYLON.Engine(canvas, antialias, { stencil: true }"),this._options=r||{mainTextureRatio:.5,blurTextureSizeRatio:.5,blurHorizontalSize:1,blurVerticalSize:1,alphaBlendingMode:t.Engine.ALPHA_COMBINE,camera:null},this._options.mainTextureRatio=this._options.mainTextureRatio||.5,this._options.blurTextureSizeRatio=this._options.blurTextureSizeRatio||1,this._options.blurHorizontalSize=this._options.blurHorizontalSize||1,this._options.blurVerticalSize=this._options.blurVerticalSize||1,this._options.alphaBlendingMode=this._options.alphaBlendingMode||t.Engine.ALPHA_COMBINE;var s=[];s.push(1,1),s.push(-1,1),s.push(-1,-1),s.push(1,-1);var a=new t.VertexBuffer(o,s,t.VertexBuffer.PositionKind,!1,!1,2);this._vertexBuffers[t.VertexBuffer.PositionKind]=a,this._createIndexBuffer(),this._glowMapMergeEffect=o.createEffect("glowMapMerge",[t.VertexBuffer.PositionKind],["offset"],["textureSampler"],this._options.isStroke?"#define STROKE \n":void 0),this.setMainTextureSize(),this.createTextureAndPostProcesses()}return Object.defineProperty(i.prototype,"blurHorizontalSize",{get:function(){return this._horizontalBlurPostprocess.kernel},set:function(t){this._horizontalBlurPostprocess.kernel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blurVerticalSize",{get:function(){return this._verticalBlurPostprocess.kernel},set:function(t){this._verticalBlurPostprocess.kernel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"camera",{get:function(){return this._options.camera},enumerable:!0,configurable:!0}),i.prototype._createIndexBuffer=function(){var t=this._scene.getEngine(),e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=t.createIndexBuffer(e)},i.prototype._rebuild=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&e._rebuild(),this._createIndexBuffer()},i.prototype.createTextureAndPostProcesses=function(){var n=this,r=this._mainTextureDesiredSize.width*this._options.blurTextureSizeRatio,o=this._mainTextureDesiredSize.height*this._options.blurTextureSizeRatio;r=this._engine.needPOTTextures?t.Tools.GetExponentOfTwo(r,this._maxSize):r,o=this._engine.needPOTTextures?t.Tools.GetExponentOfTwo(o,this._maxSize):o,this._mainTexture=new t.RenderTargetTexture("HighlightLayerMainRTT",{width:this._mainTextureDesiredSize.width,height:this._mainTextureDesiredSize.height},this._scene,!1,!0,t.Engine.TEXTURETYPE_UNSIGNED_INT),this._mainTexture.activeCamera=this._options.camera,this._mainTexture.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._mainTexture.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._mainTexture.anisotropicFilteringLevel=1,this._mainTexture.updateSamplingMode(t.Texture.BILINEAR_SAMPLINGMODE),this._mainTexture.renderParticles=!1,this._mainTexture.renderList=null,this._mainTexture.ignoreCameraViewport=!0,this._blurTexture=new t.RenderTargetTexture("HighlightLayerBlurRTT",{width:r,height:o},this._scene,!1,!0,t.Engine.TEXTURETYPE_UNSIGNED_INT),this._blurTexture.wrapU=t.Texture.CLAMP_ADDRESSMODE,this._blurTexture.wrapV=t.Texture.CLAMP_ADDRESSMODE,this._blurTexture.anisotropicFilteringLevel=16,this._blurTexture.updateSamplingMode(t.Texture.TRILINEAR_SAMPLINGMODE),this._blurTexture.renderParticles=!1,this._blurTexture.ignoreCameraViewport=!0,this._downSamplePostprocess=new t.PassPostProcess("HighlightLayerPPP",this._options.blurTextureSizeRatio,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._downSamplePostprocess.onApplyObservable.add(function(t){t.setTexture("textureSampler",n._mainTexture)}),this._options.alphaBlendingMode===t.Engine.ALPHA_COMBINE?(this._horizontalBlurPostprocess=new e("HighlightLayerHBP",new t.Vector2(1,0),this._options.blurHorizontalSize,1,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._horizontalBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",r,o)}),this._verticalBlurPostprocess=new e("HighlightLayerVBP",new t.Vector2(0,1),this._options.blurVerticalSize,1,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._verticalBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",r,o)})):(this._horizontalBlurPostprocess=new t.BlurPostProcess("HighlightLayerHBP",new t.Vector2(1,0),this._options.blurHorizontalSize,1,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._horizontalBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",r,o)}),this._verticalBlurPostprocess=new t.BlurPostProcess("HighlightLayerVBP",new t.Vector2(0,1),this._options.blurVerticalSize,1,null,t.Texture.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._verticalBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",r,o)})),this._mainTexture.onAfterUnbindObservable.add(function(){n.onBeforeBlurObservable.notifyObservers(n);var t=n._blurTexture.getInternalTexture();t&&n._scene.postProcessManager.directRender([n._downSamplePostprocess,n._horizontalBlurPostprocess,n._verticalBlurPostprocess],t,!0),n.onAfterBlurObservable.notifyObservers(n)});var s=function(e){if(n._meshes){var r=e.getMaterial(),o=e.getRenderingMesh(),s=n._scene,a=s.getEngine();if(r&&!r.needAlphaBlendingForMesh(o)){a.setState(r.backFaceCulling);var l=o._getInstancesRenderList(e._id);if(!(l.mustReturn||n._excludedMeshes&&n._excludedMeshes[o.uniqueId])){var c=a.getCaps().instancedArrays&&null!==l.visibleInstances[e._id]&&void 0!==l.visibleInstances[e._id],u=n._meshes[o.uniqueId],h=null;if(u&&u.glowEmissiveOnly&&r&&(h=r.emissiveTexture),n._isReady(e,c,h)){if(a.enableEffect(n._glowMapGenerationEffect),o._bind(e,n._glowMapGenerationEffect,t.Material.TriangleFillMode),n._glowMapGenerationEffect.setMatrix("viewProjection",s.getTransformMatrix()),u?n._glowMapGenerationEffect.setFloat4("color",u.color.r,u.color.g,u.color.b,1):n._glowMapGenerationEffect.setFloat4("color",i.neutralColor.r,i.neutralColor.g,i.neutralColor.b,i.neutralColor.a),r&&r.needAlphaTesting()){var p=r.getAlphaTestTexture();if(p){n._glowMapGenerationEffect.setTexture("diffuseSampler",p);var d=p.getTextureMatrix();d&&n._glowMapGenerationEffect.setMatrix("diffuseMatrix",d)}}h&&(n._glowMapGenerationEffect.setTexture("emissiveSampler",h),n._glowMapGenerationEffect.setMatrix("emissiveMatrix",h.getTextureMatrix())),o.useBones&&o.computeBonesUsingShaders&&o.skeleton&&n._glowMapGenerationEffect.setMatrices("mBones",o.skeleton.getTransformMatrices(o)),o._processRendering(e,n._glowMapGenerationEffect,t.Material.TriangleFillMode,l,c,function(t,e){return n._glowMapGenerationEffect.setMatrix("world",e)})}else n._mainTexture.resetRefreshCounter()}}}};this._mainTexture.customRenderFunction=function(t,e,i,r){n.onBeforeRenderMainTextureObservable.notifyObservers(n);var o,a=n._scene.getEngine();if(r.length){for(a.setColorWrite(!1),o=0;o<r.length;o++)s(r.data[o]);a.setColorWrite(!0)}for(o=0;o<t.length;o++)s(t.data[o]);for(o=0;o<e.length;o++)s(e.data[o]);for(o=0;o<i.length;o++)s(i.data[o])},this._mainTexture.onClearObservable.add(function(t){t.clear(i.neutralColor,!0,!0,!0)})},i.prototype.isReady=function(t,e){var i=t.getMaterial(),n=t.getRenderingMesh();if(!i||!n||!this._meshes)return!1;var r=null,o=this._meshes[n.uniqueId];return o&&o.glowEmissiveOnly&&i&&(r=i.emissiveTexture),this._isReady(t,e,r)},i.prototype._isReady=function(e,i,n){var r=e.getMaterial();if(!r)return!1;if(!r.isReady(e.getMesh(),i))return!1;var o=[],s=[t.VertexBuffer.PositionKind],a=e.getMesh(),l=!1,c=!1;if(r&&r.needAlphaTesting()){var u=r.getAlphaTestTexture();u&&(o.push("#define ALPHATEST"),a.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&1===u.coordinatesIndex?(o.push("#define DIFFUSEUV2"),c=!0):a.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.push("#define DIFFUSEUV1"),l=!0))}n&&(o.push("#define EMISSIVE"),a.isVerticesDataPresent(t.VertexBuffer.UV2Kind)&&1===n.coordinatesIndex?(o.push("#define EMISSIVEUV2"),c=!0):a.isVerticesDataPresent(t.VertexBuffer.UVKind)&&(o.push("#define EMISSIVEUV1"),l=!0)),l&&(s.push(t.VertexBuffer.UVKind),o.push("#define UV1")),c&&(s.push(t.VertexBuffer.UV2Kind),o.push("#define UV2")),a.useBones&&a.computeBonesUsingShaders?(s.push(t.VertexBuffer.MatricesIndicesKind),s.push(t.VertexBuffer.MatricesWeightsKind),a.numBoneInfluencers>4&&(s.push(t.VertexBuffer.MatricesIndicesExtraKind),s.push(t.VertexBuffer.MatricesWeightsExtraKind)),o.push("#define NUM_BONE_INFLUENCERS "+a.numBoneInfluencers),o.push("#define BonesPerMesh "+(a.skeleton?a.skeleton.bones.length+1:0))):o.push("#define NUM_BONE_INFLUENCERS 0"),i&&(o.push("#define INSTANCES"),s.push("world0"),s.push("world1"),s.push("world2"),s.push("world3"));var h=o.join("\n");return this._cachedDefines!==h&&(this._cachedDefines=h,this._glowMapGenerationEffect=this._scene.getEngine().createEffect("glowMapGeneration",s,["world","mBones","viewProjection","diffuseMatrix","color","emissiveMatrix"],["diffuseSampler","emissiveSampler"],h)),this._glowMapGenerationEffect.isReady()},i.prototype.render=function(){var e=this._glowMapMergeEffect;if(e.isReady()&&this._blurTexture.isReady()){var i=this._scene.getEngine();this.onBeforeComposeObservable.notifyObservers(this),i.enableEffect(e),i.setState(!1);var n=i.getStencilBuffer(),r=i.getStencilFunction(),o=i.getStencilMask(),s=i.getStencilOperationPass(),a=i.getStencilOperationFail(),l=i.getStencilOperationDepthFail(),c=i.getAlphaMode();e.setTexture("textureSampler",this._blurTexture),i.bindBuffers(this._vertexBuffers,this._indexBuffer,e),i.setStencilOperationPass(t.Engine.REPLACE),i.setStencilOperationFail(t.Engine.KEEP),i.setStencilOperationDepthFail(t.Engine.KEEP),i.setAlphaMode(this._options.alphaBlendingMode),i.setStencilMask(0),i.setStencilBuffer(!0),i.setStencilFunctionReference(this._instanceGlowingMeshStencilReference),this.outerGlow&&(e.setFloat("offset",0),i.setStencilFunction(t.Engine.NOTEQUAL),i.drawElementsType(t.Material.TriangleFillMode,0,6)),this.innerGlow&&(e.setFloat("offset",1),i.setStencilFunction(t.Engine.EQUAL),i.drawElementsType(t.Material.TriangleFillMode,0,6)),i.setStencilFunction(r),i.setStencilMask(o),i.setAlphaMode(c),i.setStencilBuffer(n),i.setStencilOperationPass(s),i.setStencilOperationFail(a),i.setStencilOperationDepthFail(l),i._stencilState.reset(),this.onAfterComposeObservable.notifyObservers(this);var u=this._mainTexture.getSize();this.setMainTextureSize(),u.width===this._mainTextureDesiredSize.width&&u.height===this._mainTextureDesiredSize.height||(this.onSizeChangedObservable.notifyObservers(this),this.disposeTextureAndPostProcesses(),this.createTextureAndPostProcesses())}},i.prototype.addExcludedMesh=function(t){this._excludedMeshes&&(this._excludedMeshes[t.uniqueId]||(this._excludedMeshes[t.uniqueId]={mesh:t,beforeRender:t.onBeforeRenderObservable.add(function(t){t.getEngine().setStencilBuffer(!1)}),afterRender:t.onAfterRenderObservable.add(function(t){t.getEngine().setStencilBuffer(!0)})}))},i.prototype.removeExcludedMesh=function(t){if(this._excludedMeshes){var e=this._excludedMeshes[t.uniqueId];e&&(e.beforeRender&&t.onBeforeRenderObservable.remove(e.beforeRender),e.afterRender&&t.onAfterRenderObservable.remove(e.afterRender)),this._excludedMeshes[t.uniqueId]=null}},i.prototype.hasMesh=function(t){return!!this._meshes&&void 0!==this._meshes[t.uniqueId]&&null!==this._meshes[t.uniqueId]},i.prototype.addMesh=function(t,e,i){var n=this;if(void 0===i&&(i=!1),this._meshes){var r=this._meshes[t.uniqueId];r?r.color=e:this._meshes[t.uniqueId]={mesh:t,color:e,observerHighlight:t.onBeforeRenderObservable.add(function(t){n._excludedMeshes&&n._excludedMeshes[t.uniqueId]?n.defaultStencilReference(t):t.getScene().getEngine().setStencilFunctionReference(n._instanceGlowingMeshStencilReference)}),observerDefault:t.onAfterRenderObservable.add(this.defaultStencilReference),glowEmissiveOnly:i},this._shouldRender=!0}},i.prototype.removeMesh=function(t){if(this._meshes){var e=this._meshes[t.uniqueId];for(var i in e&&(e.observerHighlight&&t.onBeforeRenderObservable.remove(e.observerHighlight),e.observerDefault&&t.onAfterRenderObservable.remove(e.observerDefault),delete this._meshes[t.uniqueId]),this._shouldRender=!1,this._meshes)if(this._meshes[i]){this._shouldRender=!0;break}}},i.prototype.shouldRender=function(){return this.isEnabled&&this._shouldRender},i.prototype.setMainTextureSize=function(){this._options.mainTextureFixedSize?(this._mainTextureDesiredSize.width=this._options.mainTextureFixedSize,this._mainTextureDesiredSize.height=this._options.mainTextureFixedSize):(this._mainTextureDesiredSize.width=this._engine.getRenderWidth()*this._options.mainTextureRatio,this._mainTextureDesiredSize.height=this._engine.getRenderHeight()*this._options.mainTextureRatio,this._mainTextureDesiredSize.width=this._engine.needPOTTextures?t.Tools.GetExponentOfTwo(this._mainTextureDesiredSize.width,this._maxSize):this._mainTextureDesiredSize.width,this._mainTextureDesiredSize.height=this._engine.needPOTTextures?t.Tools.GetExponentOfTwo(this._mainTextureDesiredSize.height,this._maxSize):this._mainTextureDesiredSize.height)},i.prototype.defaultStencilReference=function(t){t.getScene().getEngine().setStencilFunctionReference(i.normalMeshStencilReference)},i.prototype.disposeTextureAndPostProcesses=function(){this._blurTexture.dispose(),this._mainTexture.dispose(),this._downSamplePostprocess.dispose(),this._horizontalBlurPostprocess.dispose(),this._verticalBlurPostprocess.dispose()},i.prototype.dispose=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];if(e&&(e.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this.disposeTextureAndPostProcesses(),this._meshes){for(var i in this._meshes){(n=this._meshes[i])&&n.mesh&&(n.observerHighlight&&n.mesh.onBeforeRenderObservable.remove(n.observerHighlight),n.observerDefault&&n.mesh.onAfterRenderObservable.remove(n.observerDefault))}this._meshes=null}if(this._excludedMeshes){for(var i in this._excludedMeshes){var n;(n=this._excludedMeshes[i])&&(n.beforeRender&&n.mesh.onBeforeRenderObservable.remove(n.beforeRender),n.afterRender&&n.mesh.onAfterRenderObservable.remove(n.afterRender))}this._excludedMeshes=null}var r=this._scene.highlightLayers.indexOf(this,0);r>-1&&this._scene.highlightLayers.splice(r,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderMainTextureObservable.clear(),this.onBeforeBlurObservable.clear(),this.onBeforeComposeObservable.clear(),this.onAfterComposeObservable.clear(),this.onSizeChangedObservable.clear()},i.neutralColor=new t.Color4(0,0,0,0),i.glowingMeshStencilReference=2,i.normalMeshStencilReference=1,i}();t.HighlightLayer=i}(l||(l={})),function(t){var e;!function(t){t[t.INIT=0]="INIT",t[t.RUNNING=1]="RUNNING",t[t.DONE=2]="DONE",t[t.ERROR=3]="ERROR"}(e=t.AssetTaskState||(t.AssetTaskState={}));var i=function(){function t(t){this.name=t,this._isCompleted=!1,this._taskState=e.INIT}return Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taskState",{get:function(){return this._taskState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorObject",{get:function(){return this._errorObject},enumerable:!0,configurable:!0}),t.prototype._setErrorObject=function(t,e){this._errorObject||(this._errorObject={message:t,exception:e})},t.prototype.run=function(t,i,n){var r=this;this._taskState=e.RUNNING,this.runTask(t,function(){r.onDoneCallback(i,n)},function(t,e){r.onErrorCallback(n,t,e)})},t.prototype.runTask=function(t,e,i){throw new Error("runTask is not implemented")},t.prototype.onErrorCallback=function(t,i,n){this._taskState=e.ERROR,this._errorObject={message:i,exception:n},this.onError&&this.onError(this,i,n),t()},t.prototype.onDoneCallback=function(t,i){try{this._taskState=e.DONE,this._isCompleted=!0,this.onSuccess&&this.onSuccess(this),t()}catch(t){this.onErrorCallback(i,"Task is done, error executing success callback(s)",t)}},t}();t.AbstractAssetTask=i;var n=function(){return function(t,e,i){this.remainingCount=t,this.totalCount=e,this.task=i}}();t.AssetsProgressEvent=n;var r=function(e){function i(t,i,n,r){var o=e.call(this,t)||this;return o.name=t,o.meshesNames=i,o.rootUrl=n,o.sceneFilename=r,o}return o(i,e),i.prototype.runTask=function(e,i,n){var r=this;t.SceneLoader.ImportMesh(this.meshesNames,this.rootUrl,this.sceneFilename,e,function(t,e,n){r.loadedMeshes=t,r.loadedParticleSystems=e,r.loadedSkeletons=n,i()},null,function(t,e,i){n(e,i)})},i}(i);t.MeshAssetTask=r;var s=function(t){function e(e,i){var n=t.call(this,e)||this;return n.name=e,n.url=i,n}return o(e,t),e.prototype.runTask=function(t,e,i){var n=this;t._loadFile(this.url,function(t){n.text=t,e()},void 0,!1,!0,function(t,e){t&&i(t.status+" "+t.statusText,e)})},e}(i);t.TextFileAssetTask=s;var a=function(t){function e(e,i){var n=t.call(this,e)||this;return n.name=e,n.url=i,n}return o(e,t),e.prototype.runTask=function(t,e,i){var n=this;t._loadFile(this.url,function(t){n.data=t,e()},void 0,!0,!0,function(t,e){t&&i(t.status+" "+t.statusText,e)})},e}(i);t.BinaryFileAssetTask=a;var l=function(e){function i(t,i){var n=e.call(this,t)||this;return n.name=t,n.url=i,n}return o(i,e),i.prototype.runTask=function(e,i,n){var r=this,o=new Image;t.Tools.SetCorsBehavior(this.url,o),o.onload=function(){r.image=o,i()},o.onerror=function(t){n("Error loading image",t)},o.src=this.url},i}(i);t.ImageAssetTask=l;var c=function(e){function i(i,n,r,o,s){void 0===s&&(s=t.Texture.TRILINEAR_SAMPLINGMODE);var a=e.call(this,i)||this;return a.name=i,a.url=n,a.noMipmap=r,a.invertY=o,a.samplingMode=s,a}return o(i,e),i.prototype.runTask=function(e,i,n){this.texture=new t.Texture(this.url,e,this.noMipmap,this.invertY,this.samplingMode,function(){i()},function(t,e){n(t,e)})},i}(i);t.TextureAssetTask=c;var u=function(e){function i(t,i,n,r,o){var s=e.call(this,t)||this;return s.name=t,s.url=i,s.extensions=n,s.noMipmap=r,s.files=o,s}return o(i,e),i.prototype.runTask=function(e,i,n){this.texture=new t.CubeTexture(this.url,e,this.extensions,this.noMipmap,this.files,function(){i()},function(t,e){n(t,e)})},i}(i);t.CubeTextureAssetTask=u;var h=function(e){function i(t,i,n,r,o,s,a){void 0===r&&(r=!1),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!1);var l=e.call(this,t)||this;return l.name=t,l.url=i,l.size=n,l.noMipmap=r,l.generateHarmonics=o,l.useInGammaSpace=s,l.usePMREMGenerator=a,l}return o(i,e),i.prototype.run=function(e,i,n){this.texture=new t.HDRCubeTexture(this.url,e,this.size,this.noMipmap,this.generateHarmonics,this.useInGammaSpace,this.usePMREMGenerator,function(){i()},function(t,e){n(t,e)})},i}(i);t.HDRCubeTextureAssetTask=h;var p=function(){function i(e){this._isLoading=!1,this._tasks=new Array,this._waitingTasksCount=0,this._totalTasksCount=0,this.onTaskSuccessObservable=new t.Observable,this.onTaskErrorObservable=new t.Observable,this.onTasksDoneObservable=new t.Observable,this.onProgressObservable=new t.Observable,this.useDefaultLoadingScreen=!0,this._scene=e}return i.prototype.addMeshTask=function(t,e,i,n){var o=new r(t,e,i,n);return this._tasks.push(o),o},i.prototype.addTextFileTask=function(t,e){var i=new s(t,e);return this._tasks.push(i),i},i.prototype.addBinaryFileTask=function(t,e){var i=new a(t,e);return this._tasks.push(i),i},i.prototype.addImageTask=function(t,e){var i=new l(t,e);return this._tasks.push(i),i},i.prototype.addTextureTask=function(e,i,n,r,o){void 0===o&&(o=t.Texture.TRILINEAR_SAMPLINGMODE);var s=new c(e,i,n,r,o);return this._tasks.push(s),s},i.prototype.addCubeTextureTask=function(t,e,i,n,r){var o=new u(t,e,i,n,r);return this._tasks.push(o),o},i.prototype.addHDRCubeTextureTask=function(t,e,i,n,r,o,s){void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===s&&(s=!1);var a=new h(t,e,i,n,r,o,s);return this._tasks.push(a),a},i.prototype._decreaseWaitingTasksCount=function(i){var r=this;this._waitingTasksCount--;try{i.taskState===e.DONE&&t.Tools.SetImmediate(function(){var t=r._tasks.indexOf(i);t>-1&&r._tasks.splice(t,1)}),this.onProgress&&this.onProgress(this._waitingTasksCount,this._totalTasksCount,i),this.onProgressObservable.notifyObservers(new n(this._waitingTasksCount,this._totalTasksCount,i))}catch(e){t.Tools.Error("Error running progress callbacks."),console.log(e)}if(0===this._waitingTasksCount){try{this.onFinish&&this.onFinish(this._tasks),this.onTasksDoneObservable.notifyObservers(this._tasks)}catch(e){t.Tools.Error("Error running tasks-done callbacks."),console.log(e)}this._isLoading=!1,this._scene.getEngine().hideLoadingUI()}},i.prototype._runTask=function(t){var e=this,i=function(i,n){t._setErrorObject(i,n),e.onTaskError&&e.onTaskError(t),e.onTaskErrorObservable.notifyObservers(t),e._decreaseWaitingTasksCount(t)};t.run(this._scene,function(){try{e.onTaskSuccess&&e.onTaskSuccess(t),e.onTaskSuccessObservable.notifyObservers(t),e._decreaseWaitingTasksCount(t)}catch(t){i("Error executing task success callbacks",t)}},i)},i.prototype.reset=function(){return this._isLoading=!1,this._tasks=new Array,this},i.prototype.load=function(){if(this._isLoading)return this;if(this._isLoading=!0,this._waitingTasksCount=this._tasks.length,this._totalTasksCount=this._tasks.length,0===this._waitingTasksCount)return this.onFinish&&this.onFinish(this._tasks),this.onTasksDoneObservable.notifyObservers(this._tasks),this;this.useDefaultLoadingScreen&&this._scene.getEngine().displayLoadingUI();for(var t=0;t<this._tasks.length;t++){var e=this._tasks[t];this._runTask(e)}return this},i}();t.AssetsManager=p}(l||(l={})),function(t){var e=[],i=function(i,n){if(!e[i.id]&&!i.doNotSerialize){if(i instanceof t.BoxGeometry)n.boxes.push(i.serialize());else if(i instanceof t.SphereGeometry)n.spheres.push(i.serialize());else if(i instanceof t.CylinderGeometry)n.cylinders.push(i.serialize());else if(i instanceof t.TorusGeometry)n.toruses.push(i.serialize());else if(i instanceof t.GroundGeometry)n.grounds.push(i.serialize());else if(i instanceof t.Plane)n.planes.push(i.serialize());else if(i instanceof t.TorusKnotGeometry)n.torusKnots.push(i.serialize());else{if(i instanceof t._PrimitiveGeometry)throw new Error("Unknown primitive type");n.vertexData.push(i.serializeVerticeData())}e[i.id]=!0}},n=function(t,e){var n={},r=t._geometry;return r&&(t.getScene().getGeometryByID(r.id)||i(r,e.geometries)),t.serialize&&t.serialize(n),n},r=function(e,r){if(e.delayLoadState===t.Engine.DELAYLOADSTATE_LOADED||e.delayLoadState===t.Engine.DELAYLOADSTATE_NONE){e.material&&(e.material instanceof t.StandardMaterial?(r.materials=r.materials||[],r.materials.some(function(t){return t.id===e.material.id})||r.materials.push(e.material.serialize())):e.material instanceof t.MultiMaterial&&(r.multiMaterials=r.multiMaterials||[],r.multiMaterials.some(function(t){return t.id===e.material.id})||r.multiMaterials.push(e.material.serialize())));var o=e._geometry;o&&(r.geometries||(r.geometries={},r.geometries.boxes=[],r.geometries.spheres=[],r.geometries.cylinders=[],r.geometries.toruses=[],r.geometries.grounds=[],r.geometries.planes=[],r.geometries.torusKnots=[],r.geometries.vertexData=[]),i(o,r.geometries)),e.skeleton&&(r.skeletons=r.skeletons||[],r.skeletons.push(e.skeleton.serialize())),r.meshes=r.meshes||[],r.meshes.push(n(e,r))}},o=function(){function o(){}return o.ClearCache=function(){e=[]},o.Serialize=function(r){var s,a,l,c={};if(o.ClearCache(),c.useDelayedTextureLoading=r.useDelayedTextureLoading,c.autoClear=r.autoClear,c.clearColor=r.clearColor.asArray(),c.ambientColor=r.ambientColor.asArray(),c.gravity=r.gravity.asArray(),c.collisionsEnabled=r.collisionsEnabled,c.workerCollisions=r.workerCollisions,r.fogMode&&0!==r.fogMode&&(c.fogMode=r.fogMode,c.fogColor=r.fogColor.asArray(),c.fogStart=r.fogStart,c.fogEnd=r.fogEnd,c.fogDensity=r.fogDensity),r.isPhysicsEnabled()){var u=r.getPhysicsEngine();u&&(c.physicsEnabled=!0,c.physicsGravity=u.gravity.asArray(),c.physicsEngine=u.getPhysicsPluginName())}r.metadata&&(c.metadata=r.metadata),c.morphTargetManagers=[];for(var h=0,p=r.meshes;h<p.length;h++){var d=(_=p[h]).morphTargetManager;d&&c.morphTargetManagers.push(d.serialize())}for(c.lights=[],s=0;s<r.lights.length;s++)(a=r.lights[s]).doNotSerialize||c.lights.push(a.serialize());for(c.cameras=[],s=0;s<r.cameras.length;s++){var f=r.cameras[s];f.doNotSerialize||c.cameras.push(f.serialize())}for(r.activeCamera&&(c.activeCameraID=r.activeCamera.id),t.Animation.AppendSerializedAnimations(r,c),c.materials=[],c.multiMaterials=[],s=0;s<r.materials.length;s++)(l=r.materials[s]).doNotSerialize||c.materials.push(l.serialize());for(c.multiMaterials=[],s=0;s<r.multiMaterials.length;s++){var m=r.multiMaterials[s];c.multiMaterials.push(m.serialize())}for(r.environmentTexture&&(c.environmentTexture=r.environmentTexture.name),c.skeletons=[],s=0;s<r.skeletons.length;s++)c.skeletons.push(r.skeletons[s].serialize());for(c.transformNodes=[],s=0;s<r.transformNodes.length;s++)c.transformNodes.push(r.transformNodes[s].serialize());c.geometries={},c.geometries.boxes=[],c.geometries.spheres=[],c.geometries.cylinders=[],c.geometries.toruses=[],c.geometries.grounds=[],c.geometries.planes=[],c.geometries.torusKnots=[],c.geometries.vertexData=[],e=[];var g=r.getGeometries();for(s=0;s<g.length;s++){var y=g[s];y.isReady()&&i(y,c.geometries)}for(c.meshes=[],s=0;s<r.meshes.length;s++){var _;if((_=r.meshes[s])instanceof t.Mesh){var v=_;v.doNotSerialize||v.delayLoadState!==t.Engine.DELAYLOADSTATE_LOADED&&v.delayLoadState!==t.Engine.DELAYLOADSTATE_NONE||c.meshes.push(n(v,c))}}for(c.particleSystems=[],s=0;s<r.particleSystems.length;s++)c.particleSystems.push(r.particleSystems[s].serialize());for(c.lensFlareSystems=[],s=0;s<r.lensFlareSystems.length;s++)c.lensFlareSystems.push(r.lensFlareSystems[s].serialize());for(c.shadowGenerators=[],s=0;s<r.lights.length;s++){var b=(a=r.lights[s]).getShadowGenerator();b&&c.shadowGenerators.push(b.serialize())}for(r.actionManager&&(c.actions=r.actionManager.serialize("scene")),c.sounds=[],s=0;s<r.soundTracks.length;s++)for(var x=r.soundTracks[s],A=0;A<x.soundCollection.length;A++)c.sounds.push(x.soundCollection[A].serialize());return c},o.SerializeMesh=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var s={};if(o.ClearCache(),e=e instanceof Array?e:[e],i||n)for(var a=0;a<e.length;++a)n&&e[a].getDescendants().forEach(function(i){i instanceof t.Mesh&&e.indexOf(i)<0&&e.push(i)}),i&&e[a].parent&&e.indexOf(e[a].parent)<0&&e.push(e[a].parent);return e.forEach(function(t){r(t,s)}),s},o}();t.SceneSerializer=o}(l||(l={})),function(t){var e=function(){function e(e,i,n,r){void 0===r&&(r=!0);var o=this;this.name=e,this._viewMatrix=t.Matrix.Identity(),this._target=t.Vector3.Zero(),this._add=t.Vector3.Zero(),this.invertYAxis=!1,this.position=t.Vector3.Zero(),this._scene=n,this._scene.reflectionProbes.push(this),this._renderTargetTexture=new t.RenderTargetTexture(e,i,n,r,!0,t.Engine.TEXTURETYPE_UNSIGNED_INT,!0),this._renderTargetTexture.onBeforeRenderObservable.add(function(e){switch(e){case 0:o._add.copyFromFloats(1,0,0);break;case 1:o._add.copyFromFloats(-1,0,0);break;case 2:o._add.copyFromFloats(0,o.invertYAxis?1:-1,0);break;case 3:o._add.copyFromFloats(0,o.invertYAxis?-1:1,0);break;case 4:o._add.copyFromFloats(0,0,1);break;case 5:o._add.copyFromFloats(0,0,-1)}o._attachedMesh&&o.position.copyFrom(o._attachedMesh.getAbsolutePosition()),o.position.addToRef(o._add,o._target),t.Matrix.LookAtLHToRef(o.position,o._target,t.Vector3.Up(),o._viewMatrix),n.setTransformMatrix(o._viewMatrix,o._projectionMatrix),n._forcedViewPosition=o.position}),this._renderTargetTexture.onAfterUnbindObservable.add(function(){n._forcedViewPosition=null,n.updateTransformMatrix(!0)}),n.activeCamera&&(this._projectionMatrix=t.Matrix.PerspectiveFovLH(Math.PI/2,1,n.activeCamera.minZ,n.activeCamera.maxZ))}return Object.defineProperty(e.prototype,"samples",{get:function(){return this._renderTargetTexture.samples},set:function(t){this._renderTargetTexture.samples=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refreshRate",{get:function(){return this._renderTargetTexture.refreshRate},set:function(t){this._renderTargetTexture.refreshRate=t},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},Object.defineProperty(e.prototype,"cubeTexture",{get:function(){return this._renderTargetTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderList",{get:function(){return this._renderTargetTexture.renderList},enumerable:!0,configurable:!0}),e.prototype.attachToMesh=function(t){this._attachedMesh=t},e.prototype.setRenderingAutoClearDepthStencil=function(t,e){this._renderTargetTexture.setRenderingAutoClearDepthStencil(t,e)},e.prototype.dispose=function(){var t=this._scene.reflectionProbes.indexOf(this);-1!==t&&this._scene.reflectionProbes.splice(t,1),this._renderTargetTexture&&(this._renderTargetTexture.dispose(),this._renderTargetTexture=null)},e}();t.ReflectionProbe=e}(l||(l={})),function(t){var e=function(){function e(e,i,n,r,o){this.name=e,this.scale=new t.Vector2(1,1),this.offset=new t.Vector2(0,0),this.alphaBlendingMode=t.Engine.ALPHA_COMBINE,this.layerMask=268435455,this._vertexBuffers={},this.onDisposeObservable=new t.Observable,this.onBeforeRenderObservable=new t.Observable,this.onAfterRenderObservable=new t.Observable,this.texture=i?new t.Texture(i,n,!0):null,this.isBackground=void 0===r||r,this.color=void 0===o?new t.Color4(1,1,1,1):o,this._scene=n||t.Engine.LastCreatedScene,this._scene.layers.push(this);var s=this._scene.getEngine(),a=[];a.push(1,1),a.push(-1,1),a.push(-1,-1),a.push(1,-1);var l=new t.VertexBuffer(s,a,t.VertexBuffer.PositionKind,!1,!1,2);this._vertexBuffers[t.VertexBuffer.PositionKind]=l,this._createIndexBuffer(),this._effect=s.createEffect("layer",[t.VertexBuffer.PositionKind],["textureMatrix","color","scale","offset"],["textureSampler"],""),this._alphaTestEffect=s.createEffect("layer",[t.VertexBuffer.PositionKind],["textureMatrix","color","scale","offset"],["textureSampler"],"#define ALPHATEST")}return Object.defineProperty(e.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBeforeRender",{set:function(t){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onAfterRender",{set:function(t){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(t)},enumerable:!0,configurable:!0}),e.prototype._createIndexBuffer=function(){var t=this._scene.getEngine(),e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=t.createIndexBuffer(e)},e.prototype._rebuild=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&e._rebuild(),this._createIndexBuffer()},e.prototype.render=function(){var e=this.alphaTest?this._alphaTestEffect:this._effect;if(e.isReady()&&this.texture&&this.texture.isReady()){var i=this._scene.getEngine();this.onBeforeRenderObservable.notifyObservers(this),i.enableEffect(e),i.setState(!1),e.setTexture("textureSampler",this.texture),e.setMatrix("textureMatrix",this.texture.getTextureMatrix()),e.setFloat4("color",this.color.r,this.color.g,this.color.b,this.color.a),e.setVector2("offset",this.offset),e.setVector2("scale",this.scale),i.bindBuffers(this._vertexBuffers,this._indexBuffer,e),this.alphaTest?i.drawElementsType(t.Material.TriangleFillMode,0,6):(i.setAlphaMode(this.alphaBlendingMode),i.drawElementsType(t.Material.TriangleFillMode,0,6),i.setAlphaMode(t.Engine.ALPHA_DISABLE)),this.onAfterRenderObservable.notifyObservers(this)}},e.prototype.dispose=function(){var e=this._vertexBuffers[t.VertexBuffer.PositionKind];e&&(e.dispose(),this._vertexBuffers[t.VertexBuffer.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this.texture&&(this.texture.dispose(),this.texture=null);var i=this._scene.layers.indexOf(this);this._scene.layers.splice(i,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderObservable.clear()},e}();t.Layer=e}(l||(l={})),function(t){var e=function(){function e(){}return e.CreateResizedCopy=function(e,i,n,r){void 0===r&&(r=!0);var o=e.getScene(),s=o.getEngine(),a=new t.RenderTargetTexture("resized"+e.name,{width:i,height:n},o,!e.noMipmap,!0,e._texture.type,!1,e._samplingMode,!1);a.wrapU=e.wrapU,a.wrapV=e.wrapV,a.uOffset=e.uOffset,a.vOffset=e.vOffset,a.uScale=e.uScale,a.vScale=e.vScale,a.uAng=e.uAng,a.vAng=e.vAng,a.wAng=e.wAng,a.coordinatesIndex=e.coordinatesIndex,a.level=e.level,a.anisotropicFilteringLevel=e.anisotropicFilteringLevel,a._texture.isReady=!1,e.wrapU=t.Texture.CLAMP_ADDRESSMODE,e.wrapV=t.Texture.CLAMP_ADDRESSMODE;var l=new t.PassPostProcess("pass",1,null,r?t.Texture.BILINEAR_SAMPLINGMODE:t.Texture.NEAREST_SAMPLINGMODE,s,!1,t.Engine.TEXTURETYPE_UNSIGNED_INT);return l.getEffect().executeWhenCompiled(function(){l.onApply=function(t){t.setTexture("textureSampler",e)};var t=a.getInternalTexture();t&&(o.postProcessManager.directRender([l],t),s.unBindFramebuffer(t),a.disposeFramebufferObjects(),l.dispose(),t.isReady=!0)}),a},e.GetEnvironmentBRDFTexture=function(e){if(!e._environmentBRDFTexture){var i=t.Texture.CreateFromBase64String(this._environmentBRDFBase64Texture,"EnvironmentBRDFTexture",e,!0,!1,t.Texture.BILINEAR_SAMPLINGMODE);i.wrapU=t.Texture.CLAMP_ADDRESSMODE,i.wrapV=t.Texture.CLAMP_ADDRESSMODE,e._environmentBRDFTexture=i}return e._environmentBRDFTexture},e._environmentBRDFBase64Texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAgAElEQVR4Xu19Z7PtTHbW1g3jMMbGmGDAZAMm5xxMLDAU0WSKWOQcCoqccw6eGdtgk4yNbZxnvvAL+Af8Af6AsQl+06ako9X36dXPSi3pnPu+cz/cOntL3S1pq5+w1mrpLs/eud9fvn27rf9evPPwFz+v22S7fGZ/n7/70G79J5/Xv/qzbLP+Pnvvoc/6Tz7jX/15/c62LfeH7fofbpfP3l/ct36Wf+u4+D37+XYb++G26LPsr/zFttnPuh37bm1bt0f7MvtlnOx4uv0H4fty8UUsz77rfn/57u32cgXvDv72eQf0tl0+G38b0Nf9K4Dl704MEfA16KsE8Gw9JgD+DQE8EA0DT2b7GwK4GHnF4a8iguXZt9/vL5/dbisJbEq/uwD5vIK/fbbAv4N9U/8nJIDNCazKvBLBGwdwu62OhajxmQSAx6gqNp5HCg9wPan2nwSNjhLD8ux/3u8vP3y7vbwDAYjtR8AzFyDqLu1Q+YEINnew23rPCYiKb+q/K7o4AVT4tg0t/h4ydJZfkQASQ/d5b9fZ/Z1ENmuPn/cwYCYEELBguKC3nRkCnE0AFOwOKCOAR/sH/L4hgFMpbSWP5dn/uN9ffs7t9mJ5cAHoBLTyszBAFJ/F/xIKdASw5wgaEWDMLySxAk4svf6L+4QAGPiJCziNAPb4f3UZ2dh/m+z7BK4SAPYrxf5FB6ABPgCUAfANAZwKyscc7IEA/vv9/uLzbreXzx9cQCMACAl00m8jAlF7ov6SCMQ8gJsMFFBnCECSg5H6TxJAU3vPAbwhgFfz9AABeOEDBcIbB3AqPzwQwH+731/8sNvt5Ydut5e3B2C/fG9P+jESgGz/RgxG9r9VAwTUUh0goQDafUz+DYnAnSha5l99Z1l/yQVswAZSGIAugNd/9xBgCw9E8aECkHUB22QPHIAVDlQdQAMWAibhBgZAasAVHUAI8Cqg96Tm0bj3VBS9jwd7IIBvuN9ffMHt9vLTbreXy+32QlwAhgMIeuNzKwOqCoB2Aa00KHE+EsIeDuj4H2N+Hf/TfAC6A4nhgQCQDDwiaKDXiq9KgBEJNPArAtCk0AEd2mpAizW3/lYIoANpBPg3BPA+hjs/9eXZV+0E8Bm32wsJA9aEoBCAuAABPiEAC/yDC4gSgRgKRHkAlgsI6v7iEFqJEMgBwb4BGkEfEEDnDlReoAP/SQRgOYIB+IYDMEE/SQBbXoLNr0jhq4qOZc0PHBSf5oKW519xvz//kbfby8+83V68ABfwniIBgwgQ/HoRUMv8w5qAoQqgk4DWQiCw+63eD8k/XAPQgK5s/5a5xzAAqgR6wY9k+ZEMtCOoJABb230hEHMFWQdgAl0Ap/+uc6tKBrrP/n0AuwfiNwTwNKguHHV5/qX3+/M1B/Ddb7cXax7g2e324vaQB3hhkMAW92tHoFb96cVAbimwkgQ0Vv7R+D8iACfuxzKfLvnNlAAjAsBwwP2MwLQAD9sbYJME0AFcg5uBPSAA0x0AobhtcDKDA0j3KYDhk7Hp8uKj9/vzH3C7vfget9uLT9nDgDUZuOYCLBJA8MNKPyGGIftPrL+4gy3eh5p/lwRUYYAs9Fn7tM/E9lvJwCH2DxJ/mPTr4nyyLiDtBgTAGCrgNuPzNuETgN+suEEAFhng9lkCoICMLH7V0isCeEMCxylrefkl9/uzz90J4NNUGLDmAnYXINUBrf5dCCAuQCcCvYVAYPk3G++VAveVfkIAFRLolgbr2F9ifP33pAqAV/fHRF4HcAS7AKlAAEIYFNwITOszs/wMsB6II4BXFZ0QwBsSOEYCDwTw2TsBfPrt9uLlqzCgcwFABI0EVCiANl8Uvq0JWNsi2JPZ/0YKsOiHxftsW4v51ZqAaBWgZf91PsBL/jFHwEqBR1cCiuJ3gAfCmCEA3cf8rmz8AMZHIoA3JDBPAsuHVgL4jNvt+UoCH34ggK0asIYBGArsAB7AD+reQgCl+GwZ8LaNlP3MEEDaSg4ACMGr/+ulwV4JsAEfLH42/vdKgWElAJ4QpBl+LAlKErHwt+oGMgTA2ngE4IUIOH3dGr/hAKT/m/UBdSJYPuVL7vflU26352sScCWAD+0EsCcDVxewKjfmAzAsENVn4EfgdySgnYB81yEAgL4RA8T8mTUASAAYBgylQAkL8K/+zL6rsl8qF6ArAeS7WRGoAB8Sf7isN/VZqTs6jQ5wXlweWfyqpQ8I4I0TmCCAT/3I/b48u92ef9bt9nwNAdZE4FoOFALYXcAGegkDMByAzzQEgJh+cAIs/legH0IA5QTCPADE+7ISkD0TgA/8sBIgLQfOgF/F9kPcr+J8fIYguyCILQRKgV4DNviOzoKqeJS0u4AA3pBAjQSWT//I/b5OmC0MWB3ASgBrGLA+IryvDNxCgRXo+wKhjgwk8bcTwUACsJ09ANRVAALwCxmEoFcrAUsuAJ4M1E8BDuHABAHomJ8RgACrZfQLyT9dBWi2OOEG9NJd/TDQ8HAQuBE97ZhjGKy6o+imnU+4gDckkCeB5cMfud/v6zr9Dz84gOdCAM/3JwQhF9CAD25gBWWz/8wNgMpj3K9Lfy0foMMBVffXyT4r+cceC9bvCcDFP0311QrATPkvWgosYQFLAuoqQEcQuw3v2si25F+M1RkZXLUU+CgBmCBOEsCbvECOBJbP+Oj9fv+u2+3Zp91uz9cy4Kfebs/3ROD6iPD2b10YJCXB+0PyrgsHdtBuRACfBeTN+uM+suJPSEDbfh3/oxPoHgwiC3/06j8Eutj69sAQqj++I0CUfvIpwCEvYCT90O4Pn1XsT5Ve1/+dcp9FBh3woqXBSEJkvjHHEOUPqJPAjUUCeOMGfCJYPvOj9/t7//d2e7YmAlcS2B3A8xcPYcBm/7ULEDIQew+5gS0EIEA31R8Uf6gAoBsgKwBd9ddvBBJAs6XARgLQXQ2o7T8+IETe+9eRACg7rhCMVgCiE8D4O9wOCb2ubOht1/vYd2ubzLlgKbBHEDSnAMfL6durVm8qBPwXWz7rY/f7/X/fbsvL2+3Zqv4QAjzfw4COAMAJbEC3wC8koBJ9lAhgxZ+4hi3Oh/f8dU8EqtV/JhHgWn9cC4CJQZXZp6GAk/1nawMkrrcqAiwPIIA2FwOB2oaAF5UkcX+GADBs0I5gsNbBQqCorJcFJjqWKvhNMjky0Aek7/LZH7vf3/vO2215vruAD91uz/dSYCOAPQzYkoD7vw34sFIQw4LNymNSUKk8Wv0hCYhkoJ74Q6BboO9eDKoWAHXvBiCvAdPZf4nt3QqA924AbfXV8t8uN4Bt2We029WkoErWpSoCSm11TM8AOYA5uRS4RAITIQDDavaYHxCcm5exfM7H7vd3v2N9McDt9uxDD//WKsAG/ue32/M1DEACuO3g1jkBsf57fqCL/7UbIISAio85AAG0VQEYiIC9DJTYfy/+Dx8HlpeDRK8G90IBHQbgWgD2WT8LoOJ7NyeA5JEkAwwxmuqzur5X6y+sBEwDMggrqoBNH7c68Puk/fI9Vwfwvx4e6H724oEA1iSg5AAaAewlweeyLmAnAHQCTfU1CTAH4GyTMt+QDMRFQFEYQB71lXUAOjHYlvTqh4N2xe5yASoh2PpaJUGDBDrLr9cGIDlY1l+vDlQOAQHckYMiA68KMFsGtOy65RCGsMIDT+QqJoD3yUwCy/f+6P3+7koAt50AXrwigM0FrIuEoBrwHMMAUhmQUKAlAwHo7VmAPURo9h/r//ozLv1V7/5v6wGMV4B3rwYPXEBqIZAQwp4TYDE+LQlqtQfw6my/LgsyZaeLg7wVgmDnWQ5AA5ZWCDRx7ECzyn3udgFptFCIgTlyFRMEUCKgA+O/jl2Xz/3o/f7Otz88QvpszQOsLmAPARoBSDVgud02AthdwPZ5BSxUBVr8L3kAVHrvs076KSLQi3/M9QCJ7H/G/rf4n8X41XIgcwHecuBMDgAe+BHA6uQgqnvbF5DB5hwUQM3vQgIWkKOVftH+gAC6cz0RXZ9MjmD5fh/ZCWCd1CsB7CSwhgArAUgIIC5AQoDOCewJwab+CH79WR4C0mQAZT4hEQS9DgfEztNkoEECDfi6FAhZflb6Q1XXqwHDEECpvZX4a0qP1l7bfAS98cQfzQUo9a4mASMC0CsIm6JGK/2i/QkCuFK9PxmIYPm8nQDu795uy3K7LTvwVyJAB7ARwJoAVLkA7QIkJ9A5AQS95Ad2YmgvAJWwQFcBpB38pUuB9wVKbAWgCXwV86Mz2ICKTwUWFgOxMEBicr0eoBwCGBUADfxsDsAiA+zflNay31ZcfnAdAAXgDGkcdAcfZCJYfuCX3O9vf/vtthHAmgcQF7ATwOoAtn9IACsRSDkQ/wqIIUGoXYEQQ/sL5IDJP539776DwodVAGlr5QBgP8sDdApP3gSUXQa8/rZsRaBeHmy+HwDyCI1MUNlZzX9iJSBO9igJGJYCo4RdIqMfJQ4Ztq8C7FXjHuSnQ92XH/yvdwJ4Z68ErOXAlQRW0O9/JRG42v9GBHsuAImAqv+uzDo30C3yAfVHoHeg9xyAp/7wlp+WFCSWv1sOTBb+0EoAZP5DImBrApAUMFHolQG19c+EAkbpjyUEdQ6gm/QEsCzZFxKDlWNwprJVWfBm/1WAvWrcQ0ie7Lz80H91v7/9v263+9sPI2zrAZAEdvXvXMBKBJIIFDcgyUAEvHICg/o7wA/Bvyt35wCc2F9Cg03RvRyAA34N8hD0xsIfXP7bQgDMFSgyYO8GsF4N/hQ5ALak1yUGRQDZZJ5VWXgKEsie8yQuH63b8vn/8oEA3lsJYJ2EQgD73xX4z9bs/74gaHMBQgA7+DsXAJWBBniHCLTtNx2AUnkG/LYNiUCpvX7wp6sIOHF/lwgkNf8UGagwYMgLMBdgLQCyVgOyciCGCs5nz/Jr8EXOQOcQZEbrfjjTU8qaCBseMyx4vxPB8iP+RU8A24Kg9R8Qgaj/av8lDBgcwApQ+QdVgW0bKr3+jsk//AztzBKgtv4K+Kj08rl7JFgt9BnCAIsQcD2AsQAolQj0CAGAqhOFCK5u3cA+84dyIJLCPm6buAgoBa5qDoDF6wzUkZ13iSDKKwTamSKZSf29cuzJUwq7LV/wz18RwH2Nl9dKABLArv6bC5B/+9OBGxmsIIR1AQ3w2gk4RECTfwBulgC0rP96/FYJUOv9SzkAB/xuKTBY/qsTgZ0LILF/s/RW9v81ywEwhbeAwUIH6hRwGp+wEOhqoF49fojqQoPlR/+z+/3t77jd3n3rdru999CzEYAQAYJfXACEAqL8W5lQgA5uoJUK9zxBB3ii9ALiYT2AjvuN72wFILP+XdlP8gLKFeg6f5QM3AC+VlMMZ9ABGuN+VePHWL6tHVD23or3tQPo2iWfBRgShDp0ELcBjmIAbwTWqEzIJvLM6kEDEFcD9erxCzg3my4/9p/e7299x+323lu32+oAtjwAhgE7Cazqv7mAvRLQcgG7A9B5AAwHus87CWBYsIKFfe+eCSBgt2J+7QBQ+VsogOU/9fIPBvLhASEF8AHwlhPQ2wVYFhmo/Wby74QyYLcmQAEbbbue2FcnAb28QTmHQKBwNVCvHv8IESw//h/f7299pyIA7QIE/LsTeIbqL59hPUADvHIBG8jBIWgn0L4rsKMj2Noomz8QgZELsCoAAnh0Caj8lup7ib9tX+ZBoKgUmFkWTGJ8S/UHZa/kAHT+QGaeoeQmMUC/CoAzVYAjYDvSNwPCq8fPnINus/zEfwQE8O7tdt8dwGZjIQQQ9Y9cwAB+RQIC4I4MdvvdLL+O//E7LgLykn6q3Efjf6X8bOUfkoNYcQZ8z/KzBUBYCqT/YQgjBuOBHxPs7JHh7JoAy/IzWz+xEtBKBEYg8fIGw+SeQQQ+CzHZP+oWXWPU/8z9y0/+h/f729/5kAN4791X/6/cpl4SCsDfLRQwHEBLCmJFYH92vssNgBPo7D8qv4CekIHpAjKgx1iffGbKb5UAQwdguIAtz2KsEWj7vIQggNON91lYoIFN2mznYKj9UBmwQgXLLcDstRTdBchEFWAWcLP9MgC9cuzM8aXN8lP//v3+9v/uCUDyAM0FIBFADqAjAsgFiAvYwK3/MfAL8InSd/Yfy37Qpyv3OSTgxf8C5vZXPfF3aB2AA3hJGg5LghMOgCUBo8SgEAyC3Irvh5xAwhW0cT1iQBKYWds/QQLdeVUQcrEjeGoiWH7633sggHfWJOAaAkglYL/wLQyQf3tYsCp9CwmgFIgOgIJ/JwMdBuB3cQTDX4z9wR2whN+WE9idh67761p/F/8bpb8O/OotQCsJDhZfji0qT9p0LsCI83X9H8E9KH8iCSiTrQO29bwAAbvlCipPAw4T/oRKQAVElbaMJ472t7jnqnEjrlt+1t+539/6P4oAxLquawIkF7Bb/40M9hAAHcD2GVzABmBYKSgxfyMGAbROCipl1w6gs/8ZF0Cy/UIOOr7vHAIu9iHP/2v77yX9ROUt29+AHVUCnDJgtvSn8wXsnQGzIUAW3F27qFS4z2CrD07wCogqbR8LtGecUwR4vX/5OX/7FQFsOYC9FCiToBGAEAH83ZwA5AM06BspiPKrNQIt/kcg69iffBegNqVXb/wdQgIMC0DltUuQ+L+Bmz0OrNTdK/91+4JVf15SEPMCYRkwEfc3stBxurMS0AoTMKRocaV8cKw6jpcFsdUn2/8qRT8buGeP55HC8vP+5v3+1v99cADvvfNQBZB4dO24Kv5GAntSUOz/+n1wAis4wAnoMAC/N9svSUKsBABgmwPAbQTwWzsW/2vAI6j14h+1CEjnBYZFQWSxj+sEVFyPjgBBrhf+aOtPY39vRaBVJlQ2vyOGIATQsb6etBguDMSQyAF4IMhUAmZANNNnUNSqBDvtzzif6HSWL/wbuwN4eycA4gDEBQgRYPzfSGC3/BYBdOCHxKBHBAJoAbdWfIz1I9XXsf5g9y0yAJB7iUDPCaC6e2EA2ngMGyIHwAgBldncf4ID0EDXVp1NYmbnrclOtyfDhiPOoCO4CEXB/rOBfOZ4yy/8a7sDAALY1gKAfWMEgOovoNdk0IArKr+7gwH02gWQ2L4t/sEEoLL2IQnoFX96HYC4CIz/jcSgAJSVAtu2RPZ/SPRBHkC7AkYEqceC2fqBfdKaCcHAAeAkpKVBCANcElBVgBQRTC4HngHOTJ+rQo2jhEbP6xf/VU4AmBza7L+EAZgLgGSgxP8dGQDwmQOQbS2xp6oEWAnQn1seIEMCJO4fsv8Q2w/JQU0IJMvPiCCT/NPuQP/noJ0rAFBa23VSr1N/vQhIgxzzB9odMMIAkGvFZPF6JkyIlJeFFl6IcRYYX0ciOOOcll/6l+/3t/7fngPYy4BSCmyT0SGAlgvY4/+BAET10fZjUhAWCg2AV8nBEPQ6D6DJgSUAoQ/G+Dr+T9l/pfg0HxAs/e3WBUhbsihIgHKkHGiGCQHYO/UHomDgdd0BcRkZlYtyAFlgZNtlzqkSJcwc1xr/6FjLL/tLPQG8t+YA3tuXBKPiqISgAB//bjZdkoNE/Rs5EAIYXIAKCwYHYJADlvhalp8RgS4PogNwFN8jgo1A2LoALxRw1gA09TbCAjckQHBZlQEFwEoS0Iv1S3mAYFGPlwOIJn+0v+ocPohEsHzRX9gJYM0BvPvwTyoB2gGsP6iEAowANsBJWAAVgRYeAPCb/WdkAKEAttNJwRbzM+UPQI8K36k9Kf3RagBTe2vhj3o8uAFXLxUGxTdXBrK1AIltTZ2JzUe7Lp/Ralvxvrb5kcWP9nv2fwBzIRF4FRFkx/XcwRljHCGm5Vf++fv9re+63d4xCABVRhOAJoOtRCguQKoCmghwv7L/mBPQwB/KfMQhCEF0ym8RAUkIToUAxrP/gxOwSoDGmn9WCjTzASw3kHQA5poA7Q4g3n+MEMAChiadiopXwHZV26usvB43e/7Lr/pznADakmBdDcB8AFj+5ggcF4AhgAlwwyUM6m+pPgF8U3BS6jOdAAkJ3HUAO5C7ZKBT99/IVDsGhwyY3e8qNfhCERXDa5BrlW/ftaoqe265Ar0U+PIQQCUzqwqYBYfnSK4AcuW8sjmHaMzl1/zZnQDeud3eXRcCrfH/ngNYbyxzAKL8nQNAMiC5gI0gBNz42XIBAnAkBACwqDyWByPlp2BPWP7WD0Crs/5ewq+1JaBnWX8rEajbDiVAlbNpwHRyAJ4D6EqECQcQWfxo/0wI4E3wcPJnUbSLXqH5A26qHaD9kb7ssKaj+nV/ZiSALRG4rwhsJLBfUKt/k3yAJMGwEtCFBGD/PTIY4n6d8ANyaEk/Q/nPUv8h+WeRgXYCVgIwSwbK3osKi4PonEGUC2C2Pngc2LL73Xanlj9bBTg7BIgAFe2vuoxZS14B7wy/DCT8xX/qfn/rrYccwLtrElA7AJkgkrDSJUHJfO/Z/wZ4Kx8g4IXyYKfm0i9QfkoSJK5HghALr51Ce2Jwv0ad9BvAj1WCidKfZf1x3UDnvPQ90HYf7o1WfSQMGbOpU1D3H6oCynpjPE7VfSccpoalMEHNdAxFKkDLgDzTRo5ZaXukz1E34f1Gy2/8kzEB6MUlsjCoCwWMEAAdgOcGTECrnECn+JYTgPyABn0U82vwt7hfJft0rK9DAlHooTSolH94GxBUAnTSL/reAbz6UBADt344SDkIJBIT5E62HgnEAwgFmjq3ChFkAJUFd7Zd9fwsdZ89nnX85Tf/8Z0A1hwAOgDJAxBbuU1usboYCoiCKvWX+L/lAUDlNUG0bD8Bt7dviP9Vf0v9LbV3XQCz/3qbZf2d0h8D+JAPYDb/RAfArL1l92W7Z/OjEICpOZvkw7bES0EisET7M0RxRNkzx78qJGj37rf+MUUA+zoAnQjs1gTAhJNyFy4X7kBtkYHKB0ifDMgrLiADfJMESGa/Cwe0/a+CHsmA5QQ8N6ByAzJZh1IhEobOAegsvwaVDhEKDkCre0cielYbau4SQfIZggyIM0DMtMkc6ywnMHMsduzlt/+R+/2tt2+3d8QBiAtQSUBaEVDxPyYB22cEuiYDQgJtLUFk7539ke1vgAeAR05gC3ekbAclwuaEjEVA3XoAAnLpT6sBCuStrUrIpqsBHhkwcBOVTecFJAteCAFSyk/GzapwBOJofwV0mbEQkNX2p/X9HX9IEcB7eyLw3q8IlPgSbV/LBThEIMreQJkhAeYOIsDrsELV8VmIgHX9ITGo1L+BnxGB5wQY6IvKLzZZCKD7nsj8m+sADjoAVHk9ga19tF1CzSk5GO8T9MCUAdpZbSqEUW17lpNYfucfvN/fBgfwLlQBcEnwdkA9cdGiCjCgGrCpZhACDMSA6wL28dewgKl6GzuI963EXwtf1Nr/wQ0YMb+bCJwAPgKc5gPIPeiImeUC4B5J2zbZnGXBQjI4Mdk2HFNPYqv9MNlJCJByAzPPEezIiUAe7a8ANjPWGYpePc52Db/799/vb7/zKgQQAnhvDwH0cwFWLqBluwkRYJ7AqgoMTiHjApTqR9ZfbLxbCbCUX1wOKQGiO8ASn7XdKgMimL2SoG4nkxGVnqk+OoeBDHR4AN87EmCWnlULBGiBuiNJMFC5RJB8HsACRgYwZ7WpEEY2pNEuYOoYv/f37Q7g3dvtnT3+39YC6BBAv3IK1wVA9p8SAYC5gRDBqz53QDasvag/dQboGMCy0zBA7e/CgoTyszX/VeA35QeH1YGc2Hwr2YchGn5mJNGVd8FdoEOIHEBo9VkeQc3cqFJgEkPhxSBHwoIMCVTAlx1vlggq4y+/7/fe72+tDuDdV2XARgD7isDtd95BpZWjKRUov4Acwa6BT5OEsEjICg1aBUAl8DpwA2kgQeCYbHsjL0zygfKbll9XC5xk3zYGgM1yA0IKERGgI2PJQJ20M13CAQfgWv1kEjBj+Yc2zlqAGdWPgBPtrwI2O16FXMrn8Ad+z04AaxVgTwDiasAtBNgnrK4E6HBgSApichCBBHkBCnQNbmb1iTPoSEXlDXCfTv6x0EAA2OUDtCPA70bMT6sAXjVAlf4sIhieC8BYXy0CYk5gIPKCA8CJGzoAI5QYJqoRzx8NAZ6KCLLgzra7igSWP/i79hzA6gCAAMQFrBMNSUCrFypUm+x78k/cQRffY45AqatOGDJy0CDHkh5dDERielFhWvrTIYHO+icy/jK+qe6sCkCAH70erLsXylXMWv5GFowQrLyACISU6HZ0W+RALX0Qz2ug4NgYUWScRNQ+q6IZ8GbaVMCdHS99jX/4dwIBCAmsoNd5AHAB1sRDArByAV1YgLkBnfRDF6AtPbP4LNY32lkOgMX/tPynSKFzC466Y2JP+mT+mk8BOiVAVP2MA9COgH4nQGcgHxyCAe5uMicqARTcJ+QBIlB5+6O+V4E7c9wMCSx/9HfkCEDyAMPDJiQZ2AABqtZUVwG7s+ZWMlCDO/F9iPFZso9l/IkDaMRgxPqe4g8JQa30yg14pdaM7TddgWHxXcUPVgLqvnqyWw6AqrlT0jPV33AekYJb4IlAdfX+6LwR0BVi8Yhg+WO//X5/e68AyLMAawlwCAEwF2BkpTfgqwlu5QU6G45KrdYNsNi9qwAQMgjBnyEDI77XYGcxfjXut1wAhlfSptsGoNHJPab6XkLwTAeAk1MIidp+mJlRJYCqPxCABwizr0aUDl3I/ogEMsDMjJEZp0oYjECWP/HbSA4ACEDWAbA8gJ6MjADWbYP6i5LqvyRROBBABHgjXEAV14k963s7d0koOkm/s+J+FiaERADqbjkAHKNNrsRCoE7lmYsQ0HjlPm+dgMzKRLmQkkgyBJhR/SPWPwPyTJuriWD5U78FHMB7eyJQ5QDaYiBhXL0mgGWumRNQAO/KbieTASMOL8bvVgUSq2/lAvAaOvDiwiEjs6/BThdZ6bUBJNvfuQN0Z+pzVzI09nXqrT3UMRMAACAASURBVJcKg+J6xKAnLao7Tvruc6ZcyBS6EDpUXUIEvgyAz2oTnQuqe+aYzT386d98v69rALZ1AEIAazVgz/4zBzC8aorlAdS2rkIgC4e8v2TxkOsGMLeA45I6vgZ7ygFg4g8JQhOdl+FPZv+ZnRey0CQhE4PtH1TfCBmkXQd+S+1ZXkCTiQZq0gG4sb6qMHSAKFYQHpsIMoDMtKla/syYy5/9Tb0DWGP/7R8QgOUA2NtnzEw3LhRS6hjlA9CK6/gfS4XU5rOk427p9bg02cfATtS9CwGcSsB6/taTf9Zvx0ItvQ2JgH7WgEYyMMA+5AwmHMBMDsAjAhrPTz5M9H4mggy4M65g+XO/YSeAXf1lLYAsBca/24D7MwKdakBIYOUBxKYyJ0BDAeIOTOW2QI75AgVkXNVH7b+VBFTgDisAQda/gd5LrCrlZpa/WXJrEVBk+cGxNWAkqwDMQWiFNq2/zNKgDOi6A2NFICULRAV8rrSN7HgEzmh/NH4G2MZlDi8qXf78Fz8QgNj/thjIcADtvw9HNcgQwGxIwPIGLHTQVj8BfszWmzkAlZsQwFrlPbcCYOUCjBwKKwl6pUBRWyFhukxY7LmO7414X8f61BVY4YLY9iDBhy6BTX6LPJCoPHtcAXelbQRUD+gZEojGZyCvjrv8hV/fOwArBGBLgnFpcGdJYUJ0gNknxLDNCwm8xKEV6xtqPwt4DWpm92kIQICN7bSNF2Xv/pLfUgNd5wxoCEAA34GbqL0VAmhSuMIBuIqv8wGJRUQWmCzAfNIQwV/8tff7O+9BEhBKgEMiUIUAXjLQinMbAAAcCIruFWMVgBPFX28iLhW2Yvzu+JCo06A21wAQm69XRVJwk+RpaiEQCxeQKEDlaWhgtEWQWEqvt7vhwoQDKAFfjR+5hytdgjf20X1HLH/kIpa//GtUCLATgE4CogOQz628IwzslKx0gosuG1bWnuUGotJhyzUYYUIjBSsnoJKVXZnPCAeYo3EBH1UDDIA38CniiBR/CA1I1r5VEQBUg/1XVt8jjG7iWZUD5WEz5UIK8sRagIhYquQQgfqI/a/aeBYKZMOD5a/86r0MCGsApAqQcQDbgTQBMNuqJ70GE/nuOgMSGjDFj7ZZhNABnxBTIxon459Vfa9yYpUEEfRU5RXounEUkJEgGJlEYNb9O2IQ16hsO07y9nk2ETjzJKG4JIKUSlgQKqyDzgzQM22ic/AcxPLXflXSAew30no8eDsJvBGWyhmJsKojQOAOi3R0yRFtPcvuqxo/tf7qeryYv2T/mZqT0IARgfzmG9Eg6erP8Jvr+4Tk4Sk6IwnWfgA/IxsCPhmfKWuk3ugcqENIgLwC+hl1j4Ac7c+CPDNOd4/++q/ccwCRA1iFHkqAtBrA3ICh/J46Yp7AjM+DHIK27t1aA0YIbKGPIisrw59NAOqSH/0NEKyMCBS4qwnAtNpnk4JGnN8pfKYKoIgiA2R2DEYglW1XE8FZQI6AHu1vv8nf+BUPBNDKgFYOgDkAsHdmQhAnkhP74kNDg72OwgMP0CRuN90GW+CTdCwWoVluQKv3EAYQ1cZjuOpv9JXJNyT49KIgliMwlByVu7kJUFwvPBjcQuaxYSuUOBAGZMjGIxEP1BEQn3z/3/oi4gA0CQD4uxAACMBLCKLNjFSPJd3Q7rtJOWu1oZNcHMgmE+8H5T3P3Xj7OlCzCgEeN+sEVDs8Rpu4Ol9ggd1ScuYWkAQIsDv1lrYqB+BZ/2FfsBqQAe3sbZG6Xwn2aGzr3Ja//cuJA8CnAXfr314SajgBkwBwAs6EAwmwWWFChThY0s8iI297B3DDPYRtCLi3Psb2AdRAHrKvqb9BCEyNtaKXS4OkoqAnomXjKUEo9e/GSjqAs0HvAS8C5WzfaNwKES1/95cZDmAlAbIacPudIRcgi4H0oqBuUirgU6WDSVtJsHnJw8gtZNyGWeJLEJNn61vZzYjzo/3dQ0Ea1DgmUXMWAqTAbil9UOaLynttQj+iAzibCCLQRfstUM+ShJiqqP/y937p7gDuex5gBz5bByD23woDMA9ACeCAG8jkCLTis+8ZUhjCAisZOKvwySw/OoWONFWMrmv4ZsWAqX+wrXMGbLkwnMvgIowEIWuHTsV1CTKz978WeViA88IKDzRnA/Ts8TyCcUng7/+SngC2twFZJLBPljIB4IQ1wgA9waPM+rCfJApN9Tae1beOGZ1LO06CEKj7UbF9A7CVB7AShIa9R3Uf1gOwhF9V6S1iEEQFDqFN3my14IJEYNYRTANNERd+PZMMIsXXp7H8g198v68VgHf2uP9dBX5xAtvbgaUUqEqCg/1HKweAlx9vsLeGIlqxchWojCyqY1RCgXK5jxGHofIsD9B+V92nSAgIxCEkgLEGBU8mAaO4PgoVmEJbOQQG1CzIs+08Msg6kAwRzJBOlgiWf/SLRgewksCq8l0YAKBveQAgBGb/t4vDhJQmAwf4a9dQeZPWnJbiHMfgOYeNlAKlx3BFOxs3L6B+LySS8EUg6rzwuEgQ3luBGugDqx/lCzyCGPbtCBBi05M9Io2OFB4hEXgmGLMgzZDEjIvYruUf/0I7BGgkAJWAbY46SUArGThMyAIZVADH2ppEkiCBir2n5xmpu5ME1I5pUH+LYEnFICKEDpiFEADPSSu0JhQX/MphTBFBIYnI3MRjgLviLs48H9OR/JNf4IcAK9bxPwoV9TerAXgj4T0BOJk9MhAQDZOfACUCNgIy0zbTJpPZpyGAQwTiKug7AYkr0L+N991Vf00gpGyHINbK3yZVMQQwVT2xEMh1BEZ/Nvk1EKsKmgXyGeOeTQQdEf/TL3wggNX2b/H//jqwLRGo1gC0HMCeD9AlQPw+WDqZJEZIoCdaNY6OgOmFAVq5u7ae3Y9AHam7sd8kApUsZHaekclAvrv86eoBcwkZkFvrA1hf1wU4Cu4Btu1T/c8G/hWgrxDEmSFDc0D//OdDCEAqADoPIMnA7a8wrv6LpSEFfJlkoQtAdfKShEmAWlUDN7xgOYYE6DPuBY+Lv0W0HRXdK/cN2X6l0jqcsICubbx2AVeFAK7Sy+zV1YDiasAjgH6MvqZth+vXH6sksfyLn/eKAFaw6yoA5gEE9FYScDsZZfsR8CwhSJNb2Tq5UVLsQO0lE5Pk4bqRiBDU/oEcHFVn9X1T4dFZ6TKhYfWZcltqbm6HsZm6D07QKuGRcqQGgEUKSF5N2QySYPutbZkw4SmJwCIIJIXIYSz/8uf2BEDXAWAosN/w7gUhAHwhge7GY2wGBKFtf5oMGKgcl1Cx/wKwKKQY2hWB3oHbqver7ab6J8t/2L9VbaR6sM8auk4gArlRNbBchQnSaBw5RyV7lRCAgSYCerS/otRZwqiMmSECc7x/9XNUDkCvAyB5AAwDtrlBQgG8KegCOsvolQgrgPKcQKTQSReBhOCquBP3a8LTToXF/vpY8ls2J6AdBFH/rNJfov4YDoL6UzVP5gDc8MBJBFbBnwHrWW08EEcqrvhw+5oNBZZ//bMLBCDqb7kAcAJtUQeyOuQDcGIPnzFeJQClSbJqngBULW3xIzKpkBYe3wGxkISn/u5zASwccLbh5NHhht43ELsFcGeFXwfmA1UAdBsZ9YxU/ej+zDkwJ+RtO5Mkmhh9yc+637cKwJ79lxyAlP/kKcC1IqBzAJgL0K4AQwC0m7hgyAsBrAVEaL0HJU6SQKeiyT6dWictOwsTsqW+9ttosAax/pA3AKJBEqEhQLX+T+J2PG9GEIxEPPC6ag/SNzhOtm/fZo3JABYpfLT/KBFU+leUvxHNR37mSAAC/lYBUDkA76EgIYWOAHASKnXHm4/hwaB8pIxIV8oFFpxlziNws/0diSgF91bwuQQmE7QQ+2fUvwO+pf7KkXRA9db6W6QB1+KCHu1qMgTQE70DoTOG24/Y5qMuIEMOFYBXQ4FM++WjP2MnAFUClGTg5gCEAMhy4M4F7JNou/eZ0qBWELD7qO6D0uNkZXmEwKqb4HXI4wzAa8ejLTYSjb5mfXz8jgCvlP86YrhC/ZH4lfpSFU4SgAfMo88TZFxAlRgyY1aI4Iy2zQF87KfbBLCVAAP199YCaBJAV9AlnAxX0NqwnIBSrHSSziAPa/VeJt/ACMp0AY6l1+CNvofqb6h6NikoJMMUHN2apayZNt3YxRwAPa6Tb2iTXj4cVP2MwkdkUQFz5njsGt1tX/rTHghArwHY7P++DBhdwDanYCWgzgPIfh2TtfUB+6QcJhcBedfGUXoGwAaOyXhdKy4rC1rxPAtlymqfjP0x5h6ArVSdARJdiQa6BWC8t3h8RhQ616AnY+cEigRQdREWUZ1NDBnFz4I5Y+OroMf2y5f9VE4ACH50AS4B7OD28gDtxyEVgW6yOIQwWGlg/Uz8bQLXcBoa/AM56Dq8FcMbCTyx/o3ISF3fsvaMWPRv7JLEPht08nC4TyTDb5UNI1VnwO3coaHQFPBKxa0QwAO/G1LAucwA+2oHkDkny2Vs27/8pygCANUXF9D+h2CdC1CA334rcQf7Z7yxsp8qiFpBOKhPQAiW6jIlN9UdzllAKQBjdtxT9eF8HJLQ5xNae6Lska1nSu+pfyMjb3GOlxwEYrHANwA6sO/abdBxyRiPAf4ZoGf6WOA9y0Es/+YnAwHs4JfsP4v/JSEoTgD/is1veYFZEsB+xAp7gDEX0yRU2asQaHX2wD8QjEEsCDKt0pZqM2LpSqaiiNpteCW7mQSgukc4UTWxsH0Z8EaKT/erRGIW/E/pAo6AOdt35+Pxvwf/t0gA8BKQFfzZMiDmAYakoJ4oUB2gE4UtHDLiYQSa9bnsDEhJj4HfdBYHF/V4Vn8gvh3sh9Rfk60ot7c9Uf+Xc80AkDnCNGng+RrnzCa/RS6Z8zXBJDv0ORnf9bHY96Pbov7LV/ykMQfQrQMgVQABvP67//60BKgXA7UTU9Z/mDgk+TeAndjrBtpCBcEF9Wz23on7j1p9TW74mzaH4jgC/Vtri20uDdakzvIDbTL0y1I9Gx+V8CJHgNeTBfIMEXhjz5LDU5HB8pU/ccwByBOAXQ6AxP9sQVBL5EJGF8uByPYDCehJE1UGAuB7JKD3MadA22iFx9DCiPPpeZAFOZWyH46Jk2cDPiZFRX1IvI7XrMdg2fsOvCRsYGMM25QadgC8KAeQIg5BblAajOL26v5Z4DPrb6m95wKWf/cTxhwAPgJskQAu/aUhAIB5+22J9aelQa0uOuFFQoRBCY2Soc4PNBDBMQVAGJ50amqVI8kYOH4F3FTZsyU9EvuLMs4q/NBP3SNT1Y2FPQyQcs0RYYT7JxYTZQgiAmoE/Ki/8E80DgO+RQYe8Nvx/v2P3wng9updALgAyEoEYrY/ejS4katyBegG2OfOEqpSX7s4K0QohgVUpSft+5VgR7BFsb/nEkxScByD/s31pB2IIOMSIETRE9YLF0wiOGMtwcUu4EoyyIAe79uyEsDwIhAsBSrrT6sAuyJ0i4KU6p9CAkpl9boBNuHT7iCw9vThJBJfe8erKrt2IZZjoWSIcTkLCTwVt6oC6nojwLKYvuoWIsUf1DsZRljn7m3PAPcMBY/GqIK8YU/IHTYs/+HHKQLYAd+tBCQkMIQA7L0AQAxo8bbjI1MXPiOIqMJNOgIEly4HmvsUIaUA7oQ0tD/LuBsAzTqC7XosUnAy/MwBZADtKTl1fjhB2aT19j9RCHAGOWTGyII/Gyos//HHAgEo5c8kAbv4X6m+lRDEmy73EtViSEA5pcFOIVTSMHIEAgTLVuvVceXVeFWwO3F+ByIW5zuxv1ZRRqL6d2TK64E1Y/9dIiDWfVB3veqPEcEThAARcDNgPKtNdC6Dw/lPP+Z+fxcWAOHbgM2FQKDsQ/wP+7TSo+qzsiAqk1apLmGoVUor4kTpcCCDALzZen1EQpbNp+QEjgNdiZWxN8t4pCKQUXeLOChZOFacEoFxTmzsYRIjEZwQAnjjRwCL7Hu0PxofLnVc1IM7gzxGE96vWgkAHwUWF8AWAuGDQOyhIAQ/KwPu+9t5KmVvJwXtMHSgE9BQfU0g7oMy2g4byb9ZMFtkwUCMhNDtJ2VDDVoNLBoSEBLpQBYB18kPpElkv9HM1XRzwFB85gzw2BaArX4uoRRAFYG7up+RQYYgKm5i+aof/RACiPK39wAAEbB3ArSq3v4Bl//qpcAa8Nt3QhAM7N0FE7DTSWc4goEUAAwm8Ky1CNYCG69syWr/BJBWLkArvWflL1H/iDwE2I6dH0hKJkeyYtCRFYCThSdZYLuEwo6hCGwGlE9FBsNx//OP2gkAwwBJBBoVgK4SsE8KyQWwuJ8RAoIdCQJvpMXqVnlQA3z4TpRdjsHA1IEo6hss7JFzQQDQYwaE0AHAUmMrSWgAmJKomuRH7D8DmOVWGMAjgHb7T8oBeORR2XcFOcyMyfps2776C/ocwPr7df8rkEMC23xS/0uQLgVm3IBOAHYni1ldneHVcSMJKdbJEYYOQU7BDR+M8VMZeQZUY1tHVNYxlQJnQgJNKNbk9tzGAFovx0CWDXurDkPF1+MVcgBZhzDbbgaoVWdQsftNaIHcNwLQIYCQgCh9SwaC2jfgQ/lPg92qAnQnokIB6gCUcrlVAqNsZqqco+xMtTM2/FTwVxyBofAsvGGgNe25UxqskgxV+ETIkCaCAgFEzkLmqdXuqZ1ARBam6gMAl6/5kSoEUPYfwa/fBNSeBQBi2MZW7wRox8skBgnYTUfgKLeA11O4KDk3gJ0pWzI00BOYxuhOeU9fhwXWqdg/Io7MfuJKKNhBfRrAJisAFJgH1wF4oPYAF4HxyP6oLwN6xhls/f7Lj7jf5dHf9hdeBNoRgJH5L4UB+2TSpBDmBADsCG5U9izYq+Sg25uKqqsJhnJ64JdrcC13Mfan14tAdDL76MhM0qmOFdh2fRxGJBZQoycKI7BkQZ5tFx0v2h+BPw30BrhXH7bweCOA/eWf+kUgFvjxKcChGqAAbuYADCLQ4N5O14j9I/DjftcGe1UDpn7Ogh2LhCrHfyzw098Hwews/aVkkMzkD8qd7JciggNJQItUjoC0CuAjxMLOMzz3r/3h4ADgLcDM+ktOwKwC4HJg9ZmV/RoXWaGBUv1TiYABO8ofWLHwRDLPBd8JCn8quLMWPeMkiPozK5/dNpBCkAPIgnwWiLP9QqAqBc8of6rN1/3wh4VA8gRg9AxARwI7iFgJUCcAKwlBFg50lQIdDoCbMC1rpYKQrBygW+kUMcjkR+CsxvHus/sReCPQRvsR0A74rPCBnXtK6ZVTsdzgYwK+ovaVthE5zCi/8MnydZ+vQgC1AIiFARveINHnJQMbNlHlAbDbiTj7NBmUiYCoNqsiDBNUT+YjoHaSh3Lz3BDBcivedkaSjvqa8X2ypBe+QEQBVl9vBHrmCCi4H7EKcJban00GFcJYvv6H9UlA+i4AXAuAZT/1WWf/LdXv8G6VAQkxlMHPMsJFJ3CJylugstTaU2FPdT3wZpQ9UZ4LiYvU/TswJ1xDRsWZ88v0a0oIFjtDNt7YEQCPEEc0dnX/AwGQ2P9oDkDCAvld9XdP9dEV4I3tbpaenMZ3V2lIn0yCSlv0wyTh1Nkz9p6ppxVGoFU2VV/UOqn+6NKiMbtzdQgmcgRv1P/hJlXdw/C7/dcfajsAifeFDESU27MB+wa5jzoUaOB3LD4SA4v9NVF4LgAnd3ehgeozAHugHianEx6wCR+FG2YeA294whVQYtjvWQRUMw9BlDIkG7b6j4VmVrusOp9s/y0ncJX6R+POAD4kiI0A4L8BQ+Uf3gfg2H/2MBBTfdP+C7vAzdaPAFfIwLSERHVoIoqUBjNKm3EDGVIwx8kAOFLuaL86hkkkxcU/jDgrSh8CUhG9B6iMzc+0iUB7xO6H4EWszLqBb/ghJARgTwKytwI7OYAhBHBcQDYckOtlTmFYABIA3XILbCEJ3QaE1ampsRItHTbsF+mqqpUryCzZzYA/QzJJN+ICPLFqLwPCI/F/aXy5N4YjiRT6akB7BGmd2/INP/ghBGjJPwL+1QnIfGf2X8CuQ4GGEZXoO9UFEOdwhAxYDiCtXE79ngKh2t7LFWTAHwAbSTEKEby2kaqznEHUJ6XmCUJJjaPUdFbFK4CvtI2IprJ/+caVAHQSkD0ObL0MxCgJbnNNqb7+XlX+KATYLlwdky4NZVaRxY/ZcMGLZwNHkCaXCPwZ1bbOBZXNyS0wkJruSKmll1w9CsrHdACzZOBdYwWwYj7CcAhcijf+8o0/KHYAkgzs/u4Trqm+/g7gKYUDRNG7F4jKhTlAbz+SbgNjdz+g0S5yA0wFO5AQAnHVzwOoZ/vPAn8yMeclKSMlPwOspm1nhO2oeRZEM+0qgH8q9d/O8ZtWAig4AMGQuRDIWQ48JAUBkO3eRcDWuQSi+pETQOBSdpxQ/kjJI7IYljkrVXaBlajpZxbqeGrOQEDzGqA8OoywfvdqHP5+IICznEKFSDJOYhjvm35g0QEkFwIh2Bm4w3AgcAJ6MrV5R+y9BpcmCFQl+oOz8MByE0qNu/EK4UDkJBihWHF7Bvz4m5jAJct+I8Wn+6+I1a8YE0k4+OwBtaLwlbYZwIfjrQQwrP4jK/82+6+2y8q/IQmolR2SiNvvqFUc3x/A9jOwESfAgB6BnxGJFR6E9tWbhJ499ey9FUbIhDT6ejadAjwKMbSVtkgxY7kvAOuZjwFn1fvq0CACeAhucGPycejzzT9gdABYERheCLqDUQhh+0qeC2iYNcBvWf4wMWgQhE7+CdHoC04TAlFy0zkY6+41udAJkyANar8JKVIHEBFEspYfOZLIxofkmSEOr82B+H9WvWcIoALaStuILNj+bdtKAF4JUKu+uQpQx/5AFKj6NBwQeiLOYCCxKEegCELb++GHcCoCA2taYHXU0IrtXTJhjsd5kKcDpziDBEEgQZkkg+MBWVigiYjA/T3gZofjGI4kC+azwTszXgTaqwlgHX/5ls97tRRYVL2tADRCgUH1yYKgDofE4nc4VqDG/EGbE0ZiziMIF/yGYlCHYJEKKzviJLaOEWTbQ5CQpN9AAhcoP5JWGaBA8lmyKYHZI+FgldwMeLNhgncNlX0RWczufyAAWQqcjP2tCgACV+Z+t0RYAUmIpAOxEdtHTmDbTybBsHaAnIMmiuHmatcBk9m8iexcEgrqVgP2c6cxvFL+LMii2HkYJ5Er8H6TaeL4ANj/CKSPofiIowcH8P23COBGnwHQhOBVALxHg1l4kCED0mbIEVjqTIhk+4GT26dJIXAF0yGBQR4U6MR5ZNsNTkIRS0mVsa8ir+o4LnF4ZKvPYXKV3xWK/1o4gG/9/ioJKC8E9dyAAXaM75sDANDp+N8LA7p3CyjF1Y5B3xxKEsZ6AVo5SIDYZHMvGRUlqqLseLCSbzunpBVGMsy6hTA0icAWXf9sIjC45irZyPzKuJUjIH4KxR8cwLd+v50A1PMAmOzTnwXTYvkld7Bth5uM+9uBo3yAodKR8uP4HUEQ5dFtGYEM25QCDwQQqVAEzAgcQdx/JvipC4jICX50Cpxk/wzoorCkAsrM8WbHM0WCEGXU9qr9y0oAWwiglH8LCYz1/w3wqvznqr5BDhqsUwuEqg5BkUwHdgOI2yGsx02tHIHcaGd/pMQIbArMRF7hCGAwFMqAxWwTEdys+sO9zJzfjBuoKPVVba8lgGISsFsApElivyE45wdXADdNhwUdlkm8nnYCCeWXY+l439tecgvG5OxuZqSMjnPoJnwWYJETYUoenWOkaBP9M2C2yDML8my72fg/Am2FLKKxZvZvfb7t+77KAWxOwEj8NXUHp7DNb3QBCvwSAnSCq0MAQhiitugOcCzcbsX71qrAri9OXEY21nMGHUu9GnG4oQVncMg2Z8FPSDEFNMcVHemf6ssIidw3a6wsyM9oVwXhUQLwznkQMVIKbQRAV/45RKDJoAHcIQMhiwjUQwjQscer3hYh0BWBxhhCNCzej/ZZx9FuIsolHLbMFUWfAXIUviAY2ecKOUVjMTIoXH8EmAwhRSA/Cuoj/c255pHot33uQw6A5QFku5cLQGAjMSDmLCcw4BImixUaCDCZkntuwGtPCcABCx6nHBJkVDg7qSuvwEoAcQDIBPi9MTIAKyt59rcKyGWWHCr9IvJ4kv2NAII8gIC1Wwqs1wUAoi0yEABrx82UP+sGziCFDsgkHLDyBN1N80gjqCLg+CkQJOPqdn4BUOhEniENVJtE/2x8TduRa/IAmT1WBMSzxomO8yj7P/65r1YCotIPn0m8j28BFpVvwGdkoCRf2/gOd1k3MNgImIEEyBZZYEKJugVrHYEoi3EsTSzu5HEIZCCFyuQPnMIl4If7kgVMtt0hUkOCMj5XgVex7VM2XU3IlEAQxyPDdP0//n3GlYAh+FWs370OXBbbqWSfblNxAlbbsuUPyMLLBeA9YLafTZruB8+AO2vps+32650Flqem4b4T1d881oyreWICqJLL1e2XjQDkjUDkmX+d5WffEVeWE0CBNJU/qfq6f0eQBdVv/Qw1tdyCBWzGsDJGqBIZgiCAzjqK0kQ6A1hnjOGBNUEwIUmd5AAqxyndB0PFw7nkOAY9R5ePf+9XSUBGBAJudAVt234Ttn37xi4ESGyTE0rnAIBtBqwfAD/+Zl68r8nGdA3RykEsy2TtfJYkKsfWk+wM4GavJwnA2fj/CDCPgqzSPwoLov1HSOUVAeBKwGgtgJH80+AfbL8OC9A66Od0gFy0UiuCa+Sjt0cKboYQRGmHsR0w4vmGE0GRltk+AapuIlTbG9dcDh8mxpkCauL6wt/eUcojfY8AUiv0Wd+tc3ogAA/8xsKfDuykTVP2/YO1GlCLNnUCiii0Cpu7LUfgjUf2WTG/JgXLORwFtbkE2VLQRNKPTgiHjNKASBw7PZZ2J0Vnc+Q4ugsk6gAAG0BJREFUVVKKQH/muZxKCp/4Xv3DQGLn0fI3sEerAPVTghAaaFyllgcDi1Asq43t6yzwI2IIKgHiOFKWjZyjZ3XZBMuAOJqYbTJVwwuDfIb/l8FR2cy5VX6Ts0HmZdunz90i7eClJZnjZdoMv1EjAMcFbLiYAT+x8TpX0DCeAHPXxAA5XTug7YiW7on9NPYPwgLtEEKiSNjcTg2y4YSehCeBv+xUZid98ne5khCmwHaQDGeOGfVZVgKwqgAiiBH4U2XAfTCco1qxNcAZxiOAm+J/kSvwEoYU4Anl325ath0hr5BYNPDYq9Sr4LzY+reJfBZZVa/vhPYRGGf2Z/p4bZZPfM++CmCFAF4YIETR/upnApw3AqUJAQ4ShQPD/ovA3wjdANDwwxvKZbVjN45uSwI427eqnIywpsbIKOT7iAAy4Ix+p5kxMn2kzSsCCKoA+AiwJoOOAJTtF8vPSAK3NSFLhAJdPwLuTKiwHc8jhsx+1YaGBSRxJdeadQgWETBVTJNG0mVEE3TbXww9yg6lmPzL/gapawNSitpXgIdcF40783tlzmUd94EAEiVAuc8m+HWOoCH61fxAy19R/mplAElHicqrryeD3wM1fVkpm1gBkOgxHEV0gZA4VnpiFlQ5MzHNNoXjpM+9APBozKuI59BvpgAwJgE/B0KA6CWgrP7vZP4bWcBJZJYEI1FYQuzlAtw8gTFg2jXs12I+diz7gQA9tu/2GaRkOQvrfYapiZgNR6znyMn1zQCkpG7GOZfG0PenQAAZIM6cS2bcq9osnxAC0C6AgH14+Ie9EIQQwoY5FRo0HAbbKY5In3Yf2QtHEGVWiGEAVhHow1cHPHgeJnAZqAIll3GrSUdKBkdyBmQF41WTsxv3LMK6mAAe5bdwSKt6/AcCMEIAmevrbz88A7Dv1CofVQQ66w9ftAJrMdSuAHD46ucIiEGDeRDcKCwgB43KgZYa47l4biIav0QyybjfOufhWGcRiQHK7nivKQFUATcQ+Ylgnhl7+cT3sEOARgDO038dATjZ/w74AKTM9q05AScjBY8YEHRVy4/Kr4mEKZXbRnaSa/IAvR3HISk3CZkkr3AMOPeM3c2SiTtWAfyzgDyz3+xYZ/6e6XPoCMBZ9tuAboB8cALKIbT5x54H2CeVBrkGOHUFHjFQNlBJ6wnVZ+AWgogA3Fg6cVymuJ1zME/kYQdT0CwgXTUpEFdmUodtCgQQjrVf2NXtMuNn2lTu18x4rxyACgO8sp+n+ts+A+Rs+a+0Z1jFfXS/ASLLGQxjJEAYlgpn1FwdN0UazloDD6wR4aQVH4GTPP+ZCUkn/MmhxtWgsu7H7O9x5fkun/hsFQKw5B+AGsGfjfc9UrDIYjukmmjatlv4taoAFduvyccFWYJIvOSdFvIo7s8Avps0ScBaE606VoVUdFvL9byO4Inc2PvhnEcC2CfL+mf7p+P//ar1dgTsEA7AmJ1gFrZ36k36tXEjV8CshFwT3tEsqBPt2rDQNqX68GNl2kfEUQGmpcQR+VSOkQJIQf2vUMorxkxdd1R+hbl6aLzmAMhCnuEZAKPmrxW+EYAFcGtpsLM9dATgUrSiMvLQbSruYArQCaKIAJxyCjgxnGN6hGLuyy55npicFuEcJZSjAD7aPwvOK46TGfPBAej4nz3959T8B8VXYMR5aK4HIACOLD8DLZvzlp2nZiAB1G1+J9pVbD8jrdR6Awts5PymQL+Pf6j6EBCCNVHN/7iV/lgq6XkWCcn1k2NmwX2UxLLHyQBeLkPGXD7x3cccQGbdP1P9UPmt5CAAqiMLOVvD8re2XkjggHXASALUWfAzl4BzKLT0wblk+kdt0vuNc6lMbBPkhtU9tMpRgfUogGaApfmi8lsdPd9S/44ASLyPQEelZwlATQqIPU/56ctB1MtEGI61slP1NybvU4LfELBXmxMZfzZGxnGkQY8HgB9rxkVM9XkK0imqfYUYqgRYAnHBEelxXzkAJwcg4EOFz9p+5hSasBPlZuGCMgIPIkwmiN50RjWg+22zDsFxHRnwR21cEKtzjADvTUx0OzMgjsY2VbEI/iq4ps+L3JiKslfPszJ2pS2exwMBZHMA+8Re709HAGxxELTtnACgWZNIa5ew/APY9c0xngno+qlBXHxfDP7tBlaOwSZjsn+GFLZJciAMOUQYRQI4dKxHBvWVJDAz9vKJz4rXAYjidiHA/sPRtQDWE4LGOwIt1e+2KxvgEsD7DPyotNPqXwQNO84ApIkxI3IJwXryMcPjnUAAVeCd1f6MaxsJgNX9WXjgKbzlCIwyX7vn3jJhpZCUAGBjRBCKTzjukoraOlfbp04iooTk04mFic4I6QiwvQkvp+XlL44cewYkZwF0uDZ1D2Ztu76VR8ZZPv5ZDxpOwwDr+X9P4ZV9b66B2HodRmgXnHEGrc8Tgz98B4GF4wJp0Bud7B+BqDu9fcxMn6hNaT+5llL/IsnNkMNMn9eZUDYC0M/5I2jXzxqowzaw9l1bZzsCl1p9I1zQJCHkhffeVH+HJBgA9HwysZYE4TA/Z/sZziECi+clPAXOKg62y5xLFHJMjZFU2ciVnA30GRJ4jD7Lxz/zVQ5AwFVa/rt3osAv5gIQ3A+25OFuenbefV6AlBLZeBb4U/hMNSLQC8gonPyzx7Xq7gapyObwfKJx4SfIOJmzjveYQM78VlW7PktU2eseCSCI9wegW5Y/SQwakDpksPYLM1juofVTQHFxE71NKGkJQmyGDTyt9qsFGeCYo8N5ZcfJtnMnsvo9smNm2mWBUHU50bFnjvvYY67H6wiAvvLLyQPgk3xWqKCFRZSdAbdti5KBilws8YrcAd70cgxfJYtAYQPI97uPEog62DbxCmNGE7UKJjx2duwz2kVjXLl/hiAihzEz5isCCFYByhzRCj0A37H92xjE1neuwtmP/V1nQBYKWfMbQ40MCKvtD5EMO6ErgBqMGQGBnWa6z37sdPujoUYUipy4f9a+R0A/c9zl277bXgXYRQABjsDUIK0Anym7DiW0m2CCaS0ZHsggafuzYO6GSwCQNkn0CwnojDESYUwFjDjcTL9osVHZTTwigCMgvu77txCAEkCy7s9IAcHI3IIGNoJwIAV0ppmwYD+4xgn9HoCpAuIQl0aDsF9nH0J6KDWo2v5DKk86zxy/QjCZtq9Tm+hcrtq/EUCn9M4LQIYwYL+x5mpABUgK8H0jgmH47IC/U38Sl1fBnwV+GryzuYILwd+GTl5ENPmyzNONkzx2xg7PklP2ujLtHqtNdJxov3YljQBEibW1t7Y34CVW/Wngt3vv9MXxB4sPd5w5CBY+6PESTvihCUzU7JzF68uCwzrnSnKudCx1MZmJUxo/itWTP+bMeWX7PEW7s46ZGSdq00IA+uYfou4DkEG9vX2W7Weqz8gBccjcAQNPRfnNuUjcCQPB6a7BZIMqBI32SfBVjhZNtm6sxPFL48HglX5XtM2OeWa7zFhWm+VbP6NPAgrYXOX3VH8fwFT9qEqg+rvq76izRxQZfEVlQXcOJ4nDBdgZY6TZKoZ6ZpLFo4iq8JZHj1Htf1X7K8bNjDnTZiCAyPLPxvs4LnUEiaW/HaifCPyReEXEkSGfM22/nO82OaKTTyP4QMOLQo/M5NdnfXWf6viZ9pk263Vm2m0hwOoAUK3NxUCBsrvEkFH9YI1AN3+zFYHki0M6UBog8bCDYcth0SUHOgW3pwxyAPiJ9wvMjp6Z7Gzsx+pXPU62/RntGgFYyt/IQVnS9au3DwHL6vc6RIjWASDIBntvOMvsSkAPwBZuuu0HQBuNUwUFPd+LwZ+diFc4kPSxyQ/52H2rx6u0z7bV7ZZvkRyAEddr694BP3IFmXyAE/NHlt8iAv2fjXju1wJ/Cvhq4AzOzDZO58y4mXxClUxObX/4IvqzyU547xqOjnGkf7VvpX2p7bd8eCIJKIpLXAFTfq322jl0feCOee00qC2HYIHfUt408GFgb26n5v0JawVmiOVUgHuDpX6E+GwqEzseLRcnXz3OzDVV+3jtl5UAEKAIOhO40WO+mZifOA5KBEG7DuCJhUADIcDkZPPUJIQDil21/dP4KXYsNs9g46HNgYGrkz1/UucRwHrMo+c527/abwwBdgLoSIAou1bjSNU98jD/81Ct/t7/IyAuRPocAH9F9be2pEM0x+l+tTEag03u11H55Zy2yTZzURUUH2xbBVDmcEfGfOy+yzfrEMBaCrzfTAbsiBwyYcGg/oSEAOu9sKi2oe2fUP3WJQnacN4XbH84lp6VB9xJZoKn25RPPD3yaQ2PAC5zEkfHP9I/03cjAAbgAegHFv9YBMEsPyqsPgcNbNaWgb+bh4QsNLHgjWV9Q4IxZoZFIubxghmWcRWZSVrgj/xwb8Df/VYZMEY/7hVjPBAAgIIqvKHGkfJ3Y0UEsl99+L4AaQcoxLmm593Z4Gfz2pvrw76kg5giBXIiV+EwHDdsEE336/efAaiZszzzuEfHWr7508k7ARXIEMjMGZhKnnkpKGnDxhu2ESWfAX8K0Jn/ZwBmgjn3E7Y/i5uIWDITM3uszFgdYV01cPVEgvZHwXP0dK46fmXc5Zs+nZcBN8BFqn10v7H8V5NMZ7kTVYHBoicBTMkgqaqhC3AaRHiJ9m8TccJZeBM4dUw2wIHrjABVmdjkJ2nDV8eJzuus/VeelzX2RgCDwnuLghxV74CbedQ3Uy5MvBQkUn53P7odreIJUFnzvdueGKdq+b3xLwF2NqE/zRxnweiDNc6VpLD+Uo0AGnjBWg92f6dVur2yNFhA59h4nEfb5+T6fw2MCPxU9ZV8mG3UXKNzn1yjnqIRZtz9RXIpinaIplkiCgd+08D9Bc4ihuUbMQRQkzXrDBAv4UNBcllR+IDK/Ejgb5MZZnVEIJ7V9J4M9EAdEUI7ZqZhVrkzZJawFslTegPvR/gFMiSxEYBW2PX7oPIROWTe+JsIHzoygS/6fDTwjiq/Bv8s8BmJAOfR2x6BxnMW1dDBIyxrTkbnt/VzGqX6PwIgjhxCX0MGXEeO9xh912t4IIAo5nfAj2o0kAaqeDLb341hHNcDf/QEoAvsI8lCA4nW5D/iAE5558ABxR/O/SDCD3a/DCuZ83q/E8HyDZ/mVAF2pCEoKcizdj5DJEIaVfAnlgJXwT/lApxS3wzoM2DLTNSK8mfHE+UvtS/A9apxM6fwlMeW81vJ5WrnsREAA/W2LQHsVMyfGKez/gr8Q1ignEXm8V8PzFXXYIHJUmY2mWbIwPq/EvWEzkzeTJuQNMgg2XEzIJwJb6rjHgp7zjrYI43D3MryX8EBWHZ+VvUtEmGAbseAGUSPWwT/2apvglntOAv0bRwDWRnAXdYmM/BkEvKpgZm8tEeC7nWH6QhgRvVdkColt9rKcT1ioC4gsP0V8LttjUnMwFkBvjXJhu2EFGcBEk3saL8cN5uHmD3PaMpnzzMax9v/GMc4cn5n9N0IANXXBWnmPQCi0Enwb8AO2mbAXwFw1fJXiKQBxLg7FYJAR8aGiyboZfvVwNFxMhN1ZoyZPplzie5hZYzXve3y9RICEBAOZJAEdQnQxpiuG3DWBWA//RnJhu5TdyskFTIDKwBPtU2qfwQGb3/Ut/utEo0TTUxczPSd6ZMF5pVjZ88hanfkHDcCiAC7HSAqFQJthi4icAlU8YMyImPtAcAOmLBtCHzCHikwR6GEvtMnVxQY6ZFD2vMt8TDTjFN5yj5Xgisa29t/BNSV4y5f/6nj04ADABNZfI8kqJor5XcVPwF+D7RybimSgF/PHDNQ5YhAPCC2vkl3EYF6VvlpP7VxZpJW+lTasntbAYLVduYcKse9evzoXJav+9RX6wBkMnUKfgH4U+VFDcTkcmANCAR/SBIF8M+CPOUUCDnijZwB9UyfDlSJmZpo0s3HTPtMm7McRMkNRcgK9s9e18HDDt03AugArx7qMfftQ0XKP+MmvD4U4HguhDi8PpV9mfUGTJFToJdrMGaGNWHO2u46iYCQjgAwC4RsuyxRZoA0c8xo3CvGjI7p3dvla4kD2Dqom06JIOsOEs8A4A9jOZCzwV9yBKpxBtSZNt01JY5h3cwzicA7p84VZGZech1AFhjZdjPneYTIop+iet7ReGed60YAFuBc9T8R/IPiF2N+Rh6RWtM+xEmIw/EmlEckacA6KnsGuL0JaO5LJv2ykztqF+2fBXV23LNApcc5cnyPCM4Yd/kv6ACyoM62q7wSTD+BaDiQlAuYLBNSIBeAGRGBSQbkTlZAf0bb4dySbqQ62TOTNtPGDVkIarJjnkkCR45Z/V1nHMPa5xUBwEQ/TfnhF3DHJC8TYa7gKPhLqg8Hi4Bd3W9ZbDZhzgB3ZYx2bs7szUzsqM3R/Y/pBqJzPZM0HgP4eD0bAaTi/WxeoBDvD6SQIAzG/K1bslJgEUF3o48+XUhi32EiFev8WYKYAjzOPBCDSFkicHj7o75Zlc+MQy4vurS2vzp+9ryvtveZ81i+5lPGMiBT3zRJ7J3Tig9UHvVxHYC6SxmQm22csVwC2q8lcgTbGGRWHQF4tq83KbYxjNkegWAW6NG4mUk84wYyx50Zt3K+FgFUzu2o+9gIIALeVeBHuxmdQxb8VeAP48IAEZCn9zvHsCZQFuDZdvQ4CeWPJudTE0F0fjNOoDLmEQKoHmfmWjRhLF8dOQA1KVygFpKDrwP4B7IwgDkNdOYIDJBlgXt2O7wPenJEE3IG7DN9qhM9Ou8rx5slgMo5zzoT5hY2AjBBfTL48cfZhs6+OhzOvANtArBpR5AA5mEiIHc5GjPrCLLEcIXyW5O3uj07sTNgybTJgjU7Vna8KtEebe/1X/6z5QAmwT+AnL1g9CD4hTzcsMAiDba9mPCLQEv3G2RlTfoMoDNtvEnZ+quBZlR6Buwzx7lCvTMAz7SZIYDsuFlyZCrvnddGAIMDCMDfgbxCFIkKgUcg2q6m1X3/VWj7yTUD7Ec1iSHhLrJEcAT0dLIVKxHRRKwSQQSAq/dH15PdX2030z76LRj4oz7LV2kHQJRqIAgB1GOD31DRChF0bR3lM8GcKO91fYvuwmJr73y8yeQSRlL5zwL1rOJHk/jo/oxyR8e4GtDZ41fPoyeAQhKvVBk4Q/kD8FdIYLvhCTLxQozIAWzDBwCLQB3tj87BnQwTyl8hgkrbzKSNAHD1/gxJZNtkrhfVPLo2rfyV9hsBlMH8RMpfBjn8MpbyZ8asEEEbT/1GFZWOgB/tD13EBcpfBfwVbiCa+FfvrwA7OpfKWLNksZ7D8p8+lFwI9AS2H1U0A1Rp47YlwLTaTwF/7xSB9Oj+I+pfeX15SCYGyWYm5etGAhlQPmabqxwFjrsRgAaO+f0k5ccTcI+dBGuaHJLjReByCSNQ16PAj/qHgIUBKqrN2h7tH6ncFQQRgSoCeLQ/Gj+65gxxasufPSZrt/zHrAN4jcCfBjyG4RPPCZQdgAOuCLgeqUSEFIIeZt0VQD46pjeBryCBCMRX788CNjqPCplYx9wIIHQAB8GfVvwT3gNAgTQBflflme0l7qJCIDMgzwCvtQmcSZpECi82rTiECBTVsWbHi/pl9kdtzgT20bGW/xA5gNcc/K4bOAh8D8DdD3/kPygplhVLoL9Q+TPnESlUFdTV9rPOIgLw0f1HQRv9rjpE8I63EYDpAF5D8LuAP2j5o7GpSkMn/UNXvlfaZtxCa3Oh8lcAWWk7C9yzjpEFmAes2X3ZY2dIKNNm+feWA3hC8FeASNuS9QxZNbeOTfur38i6edkxI2BnVFc7kyPWPnO8yvhntI0m9WOSwBGQRy7g6P4skWwEMDiASfDjzTFdxX5m3f4CYCNyyCzwicZIkQUBv6fiFYWvtDVB9cjKnyWLqrqfBehZsM4CcbZfFrjR+BFRynGWf6cdwCT4GahSJBCAPwJrtx++6GOnQK3icVO5T3p+oAL0qG13fYScvImVAW/p+CoIzYxfPb8qkUSAuIIgZseMzjWzP9NmPb+NABpYXgPwlwAPE02vZjwT8BHJsMn7ZG6AzLoMAM9qU7H5Z6j7GWNkVLd6nCwAFVe2r5HCn7V/+crVAVSeAUALbyjhrPJ7LsIC9NaHKN4lDsBQVtMpOI7CIyg2ebxjzKr/DOgzfSok8NhtI2CeCfQjID3SN7pG3L985cvEOgAE/ZFXfSceCio7AMO1uIShriflFhySqQL2DMKgx0yofwbAnnupALYCpsx5PUaY8H4ILSoAjxzG8hUvi88C7Ee3VB5PjrZJuA02BgVp4EBSwM7E/cn1BBVV90A2tQ86RQCOCCuz/ygRZAF/lETOBLSnypXz9Igssy8igIp7WP7tTgAhcCfVuyOBE8DfLq4A/shVuERhAGsKpBeFBNH/gmRNqogoov2PRQJHj/MYJDBDDkeAPHs8fcxGAJaiVwHMwLZtS4Df7Kst+8HKgQX44fj7hizYz24XKbH8rmjzItAe3R+dU9WmZ53AB5UEZoE8228ggH+TdQAFADMgpQhGAZ0SAlHkSOGj/VZ4MRNCZPvMtuv6JQgqA9gqKWTBmAV3tl32uGcpvgWy6vZZpT8L5CgQlAA85a2qtwZ6RflDB5AEfwT4aL+21Fb7LIhn+kfAzfzHIhVgR22j8zmq/BVQZc61SgKV41fH9n6bWXI4q9/y5SoJiAMfBb9Xm7ccwXB8cQVE7QayIW8groI0s5KwOmYEHm9Cm/suUP+MEp/V5oiaV8B6VdsZEphR9Jk+FXLYCMAE0oTtb2OpCZoBq+kAjLFMsgDP4x33TOsfugohMnJuEUEM56lmRaSIV+/PnP8RwGfHrxzjyrZnksPlBPBlRhlwxrpnwW8CnWXJC0RymBCS5b4zwV5Wf+hwBNhH+lqW9rHdwVF1P9r/dQZ6ljiWlQC0SjIbPLRRilYFv0cC7Yc9WOrLAFWf94y9n+ljnZurdie8YnzquMS9PAUJHAVshqCs63oMsFeuzzvPaB8eZ/lS7QCU4jJVNckgUGurH1XuiVJfilSYFTdUtUIgR0nA67/tU7OjouBll2GEKVnQZ4EWXUPFps8es3KM15EEskoPt3T7KP02AojUO0UCk+CnoCWAzII7Au2w3yG8o6COzoUBioKCnKPrFBjJqRlQcQLVY2WJIjNuBaCvIwlUVX0G0NVjdATwMXEAAYBdEnhC8Ecgc/efGPNH5xFNdhOQRdt/ptpHCh3tj675CFE8JTFUjv2UriFz7GUlgOp/DNKRwUHwdxPfUeMjDoCCq5BfOOoEZvpr2x+BLavolXEyAM6obnTMzHEqoMuc09HxKv2rbTPAVYZO/ydUbXfkKP4/BnecprBuissAAAAASUVORK5CYII=",e}();t.TextureTools=e}(l||(l={})),function(t){var e=function(){function e(){this._mode=e.FitFrustumSidesMode,this._radiusScale=1,this._positionScale=.5,this._defaultElevation=.3,this._elevationReturnTime=1500,this._elevationReturnWaitTime=1e3,this._zoomStopsAnimation=!1,this._framingTime=1500,this._isPointerDown=!1,this._lastInteractionTime=-1/0,this._animatables=new Array,this._betaIsAnimating=!1}return Object.defineProperty(e.prototype,"name",{get:function(){return"Framing"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusScale",{get:function(){return this._radiusScale},set:function(t){this._radiusScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionScale",{get:function(){return this._positionScale},set:function(t){this._positionScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultElevation",{get:function(){return this._defaultElevation},set:function(t){this._defaultElevation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elevationReturnTime",{get:function(){return this._elevationReturnTime},set:function(t){this._elevationReturnTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elevationReturnWaitTime",{get:function(){return this._elevationReturnWaitTime},set:function(t){this._elevationReturnWaitTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(t){this._zoomStopsAnimation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framingTime",{get:function(){return this._framingTime},set:function(t){this._framingTime=t},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(i){var n=this;this._attachedCamera=i;var r=this._attachedCamera.getScene();e.EasingFunction.setEasingMode(e.EasingMode),this._onPrePointerObservableObserver=r.onPrePointerObservable.add(function(e){e.type!==t.PointerEventTypes.POINTERDOWN?e.type===t.PointerEventTypes.POINTERUP&&(n._isPointerDown=!1):n._isPointerDown=!0}),this._onMeshTargetChangedObserver=i.onMeshTargetChangedObservable.add(function(t){t&&n.zoomOnMesh(t)}),this._onAfterCheckInputsObserver=i.onAfterCheckInputsObservable.add(function(){n._applyUserInteraction(),n._maintainCameraAboveGround()})},e.prototype.detach=function(){if(this._attachedCamera){var t=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&t.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null}},e.prototype.zoomOnMesh=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null),t.computeWorldMatrix(!0);var n=t.getBoundingInfo().boundingBox;this.zoomOnBoundingInfo(n.minimumWorld,n.maximumWorld,e,i)},e.prototype.zoomOnMeshHierarchy=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null),t.computeWorldMatrix(!0);var n=t.getHierarchyBoundingVectors(!0);this.zoomOnBoundingInfo(n.min,n.max,e,i)},e.prototype.zoomOnMeshesHierarchy=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);for(var r=new t.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),o=new t.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),s=0;s<e.length;s++){var a=e[s].getHierarchyBoundingVectors(!0);t.Tools.CheckExtends(a.min,r,o),t.Tools.CheckExtends(a.max,r,o)}this.zoomOnBoundingInfo(r,o,i,n)},e.prototype.zoomOnBoundingInfo=function(i,n,r,o){var s,a=this;if(void 0===r&&(r=!1),void 0===o&&(o=null),this._attachedCamera){var l=i.y,c=l+(n.y-l)*this._positionScale,u=n.subtract(i).scale(.5);if(r)s=new t.Vector3(0,c,0);else{var h=i.add(u);s=new t.Vector3(h.x,c,h.z)}this._vectorTransition||(this._vectorTransition=t.Animation.CreateAnimation("target",t.Animation.ANIMATIONTYPE_VECTOR3,60,e.EasingFunction)),this._betaIsAnimating=!0;var p=t.Animation.TransitionTo("target",s,this._attachedCamera,this._attachedCamera.getScene(),60,this._vectorTransition,this._framingTime);p&&this._animatables.push(p);var d=0;if(this._mode===e.FitFrustumSidesMode){var f=this._calculateLowerRadiusFromModelBoundingSphere(i,n);this._attachedCamera.lowerRadiusLimit=u.length()+this._attachedCamera.minZ,d=f}else this._mode===e.IgnoreBoundsSizeMode&&(d=this._calculateLowerRadiusFromModelBoundingSphere(i,n),null===this._attachedCamera.lowerRadiusLimit&&(this._attachedCamera.lowerRadiusLimit=this._attachedCamera.minZ));var m=n.subtract(i).length();this._attachedCamera.panningSensibility=5e3/m,this._attachedCamera.wheelPrecision=100/d,this._radiusTransition||(this._radiusTransition=t.Animation.CreateAnimation("radius",t.Animation.ANIMATIONTYPE_FLOAT,60,e.EasingFunction)),(p=t.Animation.TransitionTo("radius",d,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusTransition,this._framingTime,function(){o&&o(),a._attachedCamera&&a._attachedCamera.storeState()}))&&this._animatables.push(p)}},e.prototype._calculateLowerRadiusFromModelBoundingSphere=function(t,i){var n=i.subtract(t).length(),r=this._getFrustumSlope(),o=.5*n*this._radiusScale,s=o*Math.sqrt(1+1/(r.x*r.x)),a=o*Math.sqrt(1+1/(r.y*r.y)),l=Math.max(s,a),c=this._attachedCamera;return c?(c.lowerRadiusLimit&&this._mode===e.IgnoreBoundsSizeMode&&(l=l<c.lowerRadiusLimit?c.lowerRadiusLimit:l),c.upperRadiusLimit&&(l=l>c.upperRadiusLimit?c.upperRadiusLimit:l),l):0},e.prototype._maintainCameraAboveGround=function(){var i=this;if(!(this._elevationReturnTime<0)){var n=t.Tools.Now-this._lastInteractionTime,r=.5*Math.PI-this._defaultElevation,o=.5*Math.PI;if(this._attachedCamera&&!this._betaIsAnimating&&this._attachedCamera.beta>o&&n>=this._elevationReturnWaitTime){this._betaIsAnimating=!0,this.stopAllAnimations(),this._betaTransition||(this._betaTransition=t.Animation.CreateAnimation("beta",t.Animation.ANIMATIONTYPE_FLOAT,60,e.EasingFunction));var s=t.Animation.TransitionTo("beta",r,this._attachedCamera,this._attachedCamera.getScene(),60,this._betaTransition,this._elevationReturnTime,function(){i._clearAnimationLocks(),i.stopAllAnimations()});s&&this._animatables.push(s)}}},e.prototype._getFrustumSlope=function(){var e=this._attachedCamera;if(!e)return t.Vector2.Zero();var i=e.getScene().getEngine().getAspectRatio(e),n=Math.tan(e.fov/2),r=n*i;return new t.Vector2(r,n)},e.prototype._clearAnimationLocks=function(){this._betaIsAnimating=!1},e.prototype._applyUserInteraction=function(){this.isUserIsMoving&&(this._lastInteractionTime=t.Tools.Now,this.stopAllAnimations(),this._clearAnimationLocks())},e.prototype.stopAllAnimations=function(){for(this._attachedCamera&&(this._attachedCamera.animations=[]);this._animatables.length;)this._animatables[0]&&(this._animatables[0].onAnimationEnd=null,this._animatables[0].stop()),this._animatables.shift()},Object.defineProperty(e.prototype,"isUserIsMoving",{get:function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},enumerable:!0,configurable:!0}),e.EasingFunction=new t.ExponentialEase,e.EasingMode=t.EasingFunction.EASINGMODE_EASEINOUT,e.IgnoreBoundsSizeMode=0,e.FitFrustumSidesMode=1,e}();t.FramingBehavior=e}(l||(l={})),function(t){var e=function(){function e(){this.transitionDuration=450,this.lowerRadiusTransitionRange=2,this.upperRadiusTransitionRange=-2,this._autoTransitionRange=!1,this._radiusIsAnimating=!1,this._radiusBounceTransition=null,this._animatables=new Array}return Object.defineProperty(e.prototype,"name",{get:function(){return"Bouncing"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTransitionRange",{get:function(){return this._autoTransitionRange},set:function(t){var e=this;if(this._autoTransitionRange!==t){this._autoTransitionRange=t;var i=this._attachedCamera;i&&(t?this._onMeshTargetChangedObserver=i.onMeshTargetChangedObservable.add(function(t){if(t){t.computeWorldMatrix(!0);var i=t.getBoundingInfo().diagonalLength;e.lowerRadiusTransitionRange=.05*i,e.upperRadiusTransitionRange=.05*i}}):this._onMeshTargetChangedObserver&&i.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver))}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(t){var e=this;this._attachedCamera=t,this._onAfterCheckInputsObserver=t.onAfterCheckInputsObservable.add(function(){e._attachedCamera&&(e._isRadiusAtLimit(e._attachedCamera.lowerRadiusLimit)&&e._applyBoundRadiusAnimation(e.lowerRadiusTransitionRange),e._isRadiusAtLimit(e._attachedCamera.upperRadiusLimit)&&e._applyBoundRadiusAnimation(e.upperRadiusTransitionRange))})},e.prototype.detach=function(){this._attachedCamera&&(this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null)},e.prototype._isRadiusAtLimit=function(t){return!!this._attachedCamera&&this._attachedCamera.radius===t&&!this._radiusIsAnimating},e.prototype._applyBoundRadiusAnimation=function(i){var n=this;if(this._attachedCamera){this._radiusBounceTransition||(e.EasingFunction.setEasingMode(e.EasingMode),this._radiusBounceTransition=t.Animation.CreateAnimation("radius",t.Animation.ANIMATIONTYPE_FLOAT,60,e.EasingFunction)),this._cachedWheelPrecision=this._attachedCamera.wheelPrecision,this._attachedCamera.wheelPrecision=1/0,this._attachedCamera.inertialRadiusOffset=0,this.stopAllAnimations(),this._radiusIsAnimating=!0;var r=t.Animation.TransitionTo("radius",this._attachedCamera.radius+i,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusBounceTransition,this.transitionDuration,function(){return n._clearAnimationLocks()});r&&this._animatables.push(r)}},e.prototype._clearAnimationLocks=function(){this._radiusIsAnimating=!1,this._attachedCamera&&(this._attachedCamera.wheelPrecision=this._cachedWheelPrecision)},e.prototype.stopAllAnimations=function(){for(this._attachedCamera&&(this._attachedCamera.animations=[]);this._animatables.length;)this._animatables[0].onAnimationEnd=null,this._animatables[0].stop(),this._animatables.shift()},e.EasingFunction=new t.BackEase(.3),e.EasingMode=t.EasingFunction.EASINGMODE_EASEOUT,e}();t.BouncingBehavior=e}(l||(l={})),function(t){var e=function(){function e(){this._zoomStopsAnimation=!1,this._idleRotationSpeed=.05,this._idleRotationWaitTime=2e3,this._idleRotationSpinupTime=2e3,this._isPointerDown=!1,this._lastFrameTime=null,this._lastInteractionTime=-1/0,this._cameraRotationSpeed=0,this._lastFrameRadius=0}return Object.defineProperty(e.prototype,"name",{get:function(){return"AutoRotation"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(t){this._zoomStopsAnimation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationSpeed",{get:function(){return this._idleRotationSpeed},set:function(t){this._idleRotationSpeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationWaitTime",{get:function(){return this._idleRotationWaitTime},set:function(t){this._idleRotationWaitTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationSpinupTime",{get:function(){return this._idleRotationSpinupTime},set:function(t){this._idleRotationSpinupTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationInProgress",{get:function(){return Math.abs(this._cameraRotationSpeed)>0},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(e){var i=this;this._attachedCamera=e;var n=this._attachedCamera.getScene();this._onPrePointerObservableObserver=n.onPrePointerObservable.add(function(e){e.type!==t.PointerEventTypes.POINTERDOWN?e.type===t.PointerEventTypes.POINTERUP&&(i._isPointerDown=!1):i._isPointerDown=!0}),this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add(function(){var e=t.Tools.Now,n=0;null!=i._lastFrameTime&&(n=e-i._lastFrameTime),i._lastFrameTime=e,i._applyUserInteraction();var r=e-i._lastInteractionTime-i._idleRotationWaitTime,o=Math.max(Math.min(r/i._idleRotationSpinupTime,1),0);i._cameraRotationSpeed=i._idleRotationSpeed*o,i._attachedCamera&&(i._attachedCamera.alpha-=i._cameraRotationSpeed*(n/1e3))})},e.prototype.detach=function(){if(this._attachedCamera){var t=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&t.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._attachedCamera=null}},e.prototype._userIsZooming=function(){return!!this._attachedCamera&&0!==this._attachedCamera.inertialRadiusOffset},e.prototype._shouldAnimationStopForInteraction=function(){if(!this._attachedCamera)return!1;var t=!1;return this._lastFrameRadius===this._attachedCamera.radius&&0!==this._attachedCamera.inertialRadiusOffset&&(t=!0),this._lastFrameRadius=this._attachedCamera.radius,this._zoomStopsAnimation?t:this._userIsZooming()},e.prototype._applyUserInteraction=function(){this._userIsMoving()&&!this._shouldAnimationStopForInteraction()&&(this._lastInteractionTime=t.Tools.Now)},e.prototype._userIsMoving=function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},e}();t.AutoRotationBehavior=e}(l||(l={})),function(t){var e=function(){return function(){this.renderWidth=512,this.renderHeight=256,this.textureSize=512,this.deterministicLockstep=!1,this.lockstepMaxSteps=4}}();t.NullEngineOptions=e;var i=function(i){function n(n){void 0===n&&(n=new e);var r=i.call(this,null)||this;return void 0===n.deterministicLockstep&&(n.deterministicLockstep=!1),void 0===n.lockstepMaxSteps&&(n.lockstepMaxSteps=4),r._options=n,r._caps=new t.EngineCapabilities,r._caps.maxTexturesImageUnits=16,r._caps.maxVertexTextureImageUnits=16,r._caps.maxTextureSize=512,r._caps.maxCubemapTextureSize=512,r._caps.maxRenderTextureSize=512,r._caps.maxVertexAttribs=16,r._caps.maxVaryingVectors=16,r._caps.maxFragmentUniformVectors=16,r._caps.maxVertexUniformVectors=16,r._caps.standardDerivatives=!1,r._caps.astc=null,r._caps.s3tc=null,r._caps.pvrtc=null,r._caps.etc1=null,r._caps.etc2=null,r._caps.textureAnisotropicFilterExtension=null,r._caps.maxAnisotropy=0,r._caps.uintIndices=!1,r._caps.fragmentDepthSupported=!1,r._caps.highPrecisionShaderSupported=!0,r._caps.colorBufferFloat=!1,r._caps.textureFloat=!1,r._caps.textureFloatLinearFiltering=!1,r._caps.textureFloatRender=!1,r._caps.textureHalfFloat=!1,r._caps.textureHalfFloatLinearFiltering=!1,r._caps.textureHalfFloatRender=!1,r._caps.textureLOD=!1,r._caps.drawBuffersExtension=!1,r._caps.depthTextureExtension=!1,r._caps.vertexArrayObject=!1,r._caps.instancedArrays=!1,t.Tools.Log("Babylon.js null engine (v"+t.Engine.Version+") launched"),"undefined"==typeof URL&&(URL={createObjectURL:function(){},revokeObjectURL:function(){}}),"undefined"==typeof Blob&&(Blob=function(){}),r}return o(n,i),n.prototype.isDeterministicLockStep=function(){return this._options.deterministicLockstep},n.prototype.getLockstepMaxSteps=function(){return this._options.lockstepMaxSteps},n.prototype.createVertexBuffer=function(t){return{capacity:0,references:1,is32Bits:!1}},n.prototype.createIndexBuffer=function(t){return{capacity:0,references:1,is32Bits:!1}},n.prototype.clear=function(t,e,i,n){void 0===n&&(n=!1)},n.prototype.getRenderWidth=function(t){return void 0===t&&(t=!1),!t&&this._currentRenderTarget?this._currentRenderTarget.width:this._options.renderWidth},n.prototype.getRenderHeight=function(t){return void 0===t&&(t=!1),!t&&this._currentRenderTarget?this._currentRenderTarget.height:this._options.renderHeight},n.prototype.setViewport=function(t,e,i){this._cachedViewport=t},n.prototype.createShaderProgram=function(t,e,i,n){return{transformFeedback:null,__SPECTOR_rebuildProgram:null}},n.prototype.getUniforms=function(t,e){return[]},n.prototype.getAttributes=function(t,e){return[]},n.prototype.bindSamplers=function(t){this._currentEffect=null},n.prototype.enableEffect=function(t){this._currentEffect=t,t.onBind&&t.onBind(t),t.onBindObservable.notifyObservers(t)},n.prototype.setState=function(t,e,i,n){void 0===e&&(e=0),void 0===n&&(n=!1)},n.prototype.setIntArray=function(t,e){},n.prototype.setIntArray2=function(t,e){},n.prototype.setIntArray3=function(t,e){},n.prototype.setIntArray4=function(t,e){},n.prototype.setFloatArray=function(t,e){},n.prototype.setFloatArray2=function(t,e){},n.prototype.setFloatArray3=function(t,e){},n.prototype.setFloatArray4=function(t,e){},n.prototype.setArray=function(t,e){},n.prototype.setArray2=function(t,e){},n.prototype.setArray3=function(t,e){},n.prototype.setArray4=function(t,e){},n.prototype.setMatrices=function(t,e){},n.prototype.setMatrix=function(t,e){},n.prototype.setMatrix3x3=function(t,e){},n.prototype.setMatrix2x2=function(t,e){},n.prototype.setFloat=function(t,e){},n.prototype.setFloat2=function(t,e,i){},n.prototype.setFloat3=function(t,e,i,n){},n.prototype.setBool=function(t,e){},n.prototype.setFloat4=function(t,e,i,n,r){},n.prototype.setColor3=function(t,e){},n.prototype.setColor4=function(t,e,i){},n.prototype.setAlphaMode=function(e,i){void 0===i&&(i=!1),this._alphaMode!==e&&(this._alphaState.alphaBlend=e!==t.Engine.ALPHA_DISABLE,i||this.setDepthWrite(e===t.Engine.ALPHA_DISABLE),this._alphaMode=e)},n.prototype.bindBuffers=function(t,e,i){},n.prototype.wipeCaches=function(t){this.preventCacheWipeBetweenFrames||(this.resetTextureCache(),this._currentEffect=null,t&&(this._currentProgram=null,this._stencilState.reset(),this._depthCullingState.reset(),this.setDepthFunctionToLessOrEqual(),this._alphaState.reset()),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null)},n.prototype.draw=function(t,e,i,n){},n.prototype.drawElementsType=function(t,e,i,n){},n.prototype.drawArraysType=function(t,e,i,n){},n.prototype._createTexture=function(){return{}},n.prototype.createTexture=function(e,i,n,r,o,s,a,l,c,u){void 0===o&&(o=t.Texture.TRILINEAR_SAMPLINGMODE),void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null);var h=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_URL),p=String(e);return h.url=p,h.generateMipMaps=!i,h.samplingMode=o,h.invertY=n,h.baseWidth=this._options.textureSize,h.baseHeight=this._options.textureSize,h.width=this._options.textureSize,h.height=this._options.textureSize,u&&(h.format=u),h.isReady=!0,s&&s(),h},n.prototype.createRenderTargetTexture=function(e,i){var n=new t.RenderTargetCreationOptions;void 0!==i&&"object"==typeof i?(n.generateMipMaps=i.generateMipMaps,n.generateDepthBuffer=void 0===i.generateDepthBuffer||i.generateDepthBuffer,n.generateStencilBuffer=n.generateDepthBuffer&&i.generateStencilBuffer,n.type=void 0===i.type?t.Engine.TEXTURETYPE_UNSIGNED_INT:i.type,n.samplingMode=void 0===i.samplingMode?t.Texture.TRILINEAR_SAMPLINGMODE:i.samplingMode):(n.generateMipMaps=i,n.generateDepthBuffer=!0,n.generateStencilBuffer=!1,n.type=t.Engine.TEXTURETYPE_UNSIGNED_INT,n.samplingMode=t.Texture.TRILINEAR_SAMPLINGMODE);var r=new t.InternalTexture(this,t.InternalTexture.DATASOURCE_RENDERTARGET),o=e.width||e,s=e.height||e;return r._depthStencilBuffer={},r._framebuffer={},r.baseWidth=o,r.baseHeight=s,r.width=o,r.height=s,r.isReady=!0,r.samples=1,r.generateMipMaps=!!n.generateMipMaps,r.samplingMode=n.samplingMode,r.type=n.type,r._generateDepthBuffer=n.generateDepthBuffer,r._generateStencilBuffer=!!n.generateStencilBuffer,r},n.prototype.updateTextureSamplingMode=function(t,e){e.samplingMode=t},n.prototype.bindFramebuffer=function(t,e,i,n,r){this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=t,this._currentFramebuffer=t._MSAAFramebuffer?t._MSAAFramebuffer:t._framebuffer,this._cachedViewport&&!r&&this.setViewport(this._cachedViewport,i,n)},n.prototype.unBindFramebuffer=function(t,e,i){void 0===e&&(e=!1),this._currentRenderTarget=null,i&&(t._MSAAFramebuffer&&(this._currentFramebuffer=t._framebuffer),i()),this._currentFramebuffer=null},n.prototype.createDynamicVertexBuffer=function(t){return{capacity:1,references:1,is32Bits:!1}},n.prototype.updateDynamicIndexBuffer=function(t,e,i){void 0===i&&(i=0)},n.prototype.updateDynamicVertexBuffer=function(t,e,i,n){},n.prototype._bindTextureDirectly=function(t,e){this._boundTexturesCache[this._activeChannel]!==e&&(this._boundTexturesCache[this._activeChannel]=e)},n.prototype._bindTexture=function(t,e){t<0||this._bindTextureDirectly(0,e)},n.prototype._releaseBuffer=function(t){return 0==--t.references},n}(t.Engine);t.NullEngine=i}(l||(l={})),function(t){var e=function(){function e(e){this.engine=e,this._captureGPUFrameTime=!1,this._gpuFrameTime=new t.PerfCounter,this._captureShaderCompilationTime=!1,this._shaderCompilationTime=new t.PerfCounter,this._onBeginFrameObserver=null,this._onEndFrameObserver=null,this._onBeforeShaderCompilationObserver=null,this._onAfterShaderCompilationObserver=null}return Object.defineProperty(e.prototype,"gpuFrameTimeCounter",{get:function(){return this._gpuFrameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureGPUFrameTime",{get:function(){return this._captureGPUFrameTime},set:function(t){var e=this;t!==this._captureGPUFrameTime&&(this._captureGPUFrameTime=t,t?(this._onBeginFrameObserver=this.engine.onBeginFrameObservable.add(function(){e._gpuFrameTimeToken||(e._gpuFrameTimeToken=e.engine.startTimeQuery())}),this._onEndFrameObserver=this.engine.onEndFrameObservable.add(function(){if(e._gpuFrameTimeToken){var t=e.engine.endTimeQuery(e._gpuFrameTimeToken);t>-1&&(e._gpuFrameTimeToken=null,e._gpuFrameTime.fetchNewFrame(),e._gpuFrameTime.addCount(t,!0))}})):(this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver),this._onBeginFrameObserver=null,this.engine.onEndFrameObservable.remove(this._onEndFrameObserver),this._onEndFrameObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderCompilationTimeCounter",{get:function(){return this._shaderCompilationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureShaderCompilationTime",{get:function(){return this._captureShaderCompilationTime},set:function(t){var e=this;t!==this._captureShaderCompilationTime&&(this._captureShaderCompilationTime=t,t?(this._onBeforeShaderCompilationObserver=this.engine.onBeforeShaderCompilationObservable.add(function(){e._shaderCompilationTime.fetchNewFrame(),e._shaderCompilationTime.beginMonitoring()}),this._onAfterShaderCompilationObserver=this.engine.onAfterShaderCompilationObservable.add(function(){e._shaderCompilationTime.endMonitoring()})):(this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver),this._onBeforeShaderCompilationObserver=null,this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver),this._onAfterShaderCompilationObserver=null))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver),this._onBeginFrameObserver=null,this.engine.onEndFrameObservable.remove(this._onEndFrameObserver),this._onEndFrameObserver=null,this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver),this._onBeforeShaderCompilationObserver=null,this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver),this._onAfterShaderCompilationObserver=null,this.engine=null},e}();t.EngineInstrumentation=e}(l||(l={})),function(t){var e=function(){function e(e){var i=this;this.scene=e,this._captureActiveMeshesEvaluationTime=!1,this._activeMeshesEvaluationTime=new t.PerfCounter,this._captureRenderTargetsRenderTime=!1,this._renderTargetsRenderTime=new t.PerfCounter,this._captureFrameTime=!1,this._frameTime=new t.PerfCounter,this._captureRenderTime=!1,this._renderTime=new t.PerfCounter,this._captureInterFrameTime=!1,this._interFrameTime=new t.PerfCounter,this._captureParticlesRenderTime=!1,this._particlesRenderTime=new t.PerfCounter,this._captureSpritesRenderTime=!1,this._spritesRenderTime=new t.PerfCounter,this._capturePhysicsTime=!1,this._physicsTime=new t.PerfCounter,this._captureAnimationsTime=!1,this._animationsTime=new t.PerfCounter,this._onBeforeActiveMeshesEvaluationObserver=null,this._onAfterActiveMeshesEvaluationObserver=null,this._onBeforeRenderTargetsRenderObserver=null,this._onAfterRenderTargetsRenderObserver=null,this._onAfterRenderObserver=null,this._onBeforeDrawPhaseObserver=null,this._onAfterDrawPhaseObserver=null,this._onBeforeAnimationsObserver=null,this._onBeforeParticlesRenderingObserver=null,this._onAfterParticlesRenderingObserver=null,this._onBeforeSpritesRenderingObserver=null,this._onAfterSpritesRenderingObserver=null,this._onBeforePhysicsObserver=null,this._onAfterPhysicsObserver=null,this._onAfterAnimationsObserver=null,this._onBeforeAnimationsObserver=e.onBeforeAnimationsObservable.add(function(){i._captureActiveMeshesEvaluationTime&&i._activeMeshesEvaluationTime.fetchNewFrame(),i._captureRenderTargetsRenderTime&&i._renderTargetsRenderTime.fetchNewFrame(),i._captureFrameTime&&(t.Tools.StartPerformanceCounter("Scene rendering"),i._frameTime.beginMonitoring()),i._captureInterFrameTime&&i._interFrameTime.endMonitoring(),i._captureParticlesRenderTime&&i._particlesRenderTime.fetchNewFrame(),i._captureSpritesRenderTime&&i._spritesRenderTime.fetchNewFrame(),i._captureAnimationsTime&&i._animationsTime.beginMonitoring(),i.scene.getEngine()._drawCalls.fetchNewFrame(),i.scene.getEngine()._textureCollisions.fetchNewFrame()}),this._onAfterRenderObserver=e.onAfterRenderObservable.add(function(){i._captureFrameTime&&(t.Tools.EndPerformanceCounter("Scene rendering"),i._frameTime.endMonitoring()),i._captureRenderTime&&i._renderTime.endMonitoring(!1),i._captureInterFrameTime&&i._interFrameTime.beginMonitoring()})}return Object.defineProperty(e.prototype,"activeMeshesEvaluationTimeCounter",{get:function(){return this._activeMeshesEvaluationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureActiveMeshesEvaluationTime",{get:function(){return this._captureActiveMeshesEvaluationTime},set:function(e){var i=this;e!==this._captureActiveMeshesEvaluationTime&&(this._captureActiveMeshesEvaluationTime=e,e?(this._onBeforeActiveMeshesEvaluationObserver=this.scene.onBeforeActiveMeshesEvaluationObservable.add(function(){t.Tools.StartPerformanceCounter("Active meshes evaluation"),i._activeMeshesEvaluationTime.beginMonitoring()}),this._onAfterActiveMeshesEvaluationObserver=this.scene.onAfterActiveMeshesEvaluationObservable.add(function(){t.Tools.EndPerformanceCounter("Active meshes evaluation"),i._activeMeshesEvaluationTime.endMonitoring()})):(this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver),this._onBeforeActiveMeshesEvaluationObserver=null,this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver),this._onAfterActiveMeshesEvaluationObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderTargetsRenderTimeCounter",{get:function(){return this._renderTargetsRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureRenderTargetsRenderTime",{get:function(){return this._captureRenderTargetsRenderTime},set:function(e){var i=this;e!==this._captureRenderTargetsRenderTime&&(this._captureRenderTargetsRenderTime=e,e?(this._onBeforeRenderTargetsRenderObserver=this.scene.OnBeforeRenderTargetsRenderObservable.add(function(){t.Tools.StartPerformanceCounter("Render targets rendering"),i._renderTargetsRenderTime.beginMonitoring()}),this._onAfterRenderTargetsRenderObserver=this.scene.OnAfterRenderTargetsRenderObservable.add(function(){t.Tools.EndPerformanceCounter("Render targets rendering"),i._renderTargetsRenderTime.endMonitoring(!1)})):(this.scene.OnBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver),this._onBeforeRenderTargetsRenderObserver=null,this.scene.OnAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver),this._onAfterRenderTargetsRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"particlesRenderTimeCounter",{get:function(){return this._particlesRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureParticlesRenderTime",{get:function(){return this._captureParticlesRenderTime},set:function(e){var i=this;e!==this._captureParticlesRenderTime&&(this._captureParticlesRenderTime=e,e?(this._onBeforeParticlesRenderingObserver=this.scene.onBeforeParticlesRenderingObservable.add(function(){t.Tools.StartPerformanceCounter("Particles"),i._particlesRenderTime.beginMonitoring()}),this._onAfterParticlesRenderingObserver=this.scene.onAfterParticlesRenderingObservable.add(function(){t.Tools.EndPerformanceCounter("Particles"),i._particlesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver),this._onBeforeParticlesRenderingObserver=null,this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver),this._onAfterParticlesRenderingObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spritesRenderTimeCounter",{get:function(){return this._spritesRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureSpritesRenderTime",{get:function(){return this._captureSpritesRenderTime},set:function(e){var i=this;e!==this._captureSpritesRenderTime&&(this._captureSpritesRenderTime=e,e?(this._onBeforeSpritesRenderingObserver=this.scene.onBeforeSpritesRenderingObservable.add(function(){t.Tools.StartPerformanceCounter("Sprites"),i._spritesRenderTime.beginMonitoring()}),this._onAfterSpritesRenderingObserver=this.scene.onAfterSpritesRenderingObservable.add(function(){t.Tools.EndPerformanceCounter("Sprites"),i._spritesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),this._onBeforeSpritesRenderingObserver=null,this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"physicsTimeCounter",{get:function(){return this._physicsTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capturePhysicsTime",{get:function(){return this._capturePhysicsTime},set:function(e){var i=this;e!==this._capturePhysicsTime&&(this._capturePhysicsTime=e,e?(this._onBeforePhysicsObserver=this.scene.onBeforePhysicsObservable.add(function(){t.Tools.StartPerformanceCounter("Physics"),i._physicsTime.beginMonitoring()}),this._onAfterPhysicsObserver=this.scene.onAfterPhysicsObservable.add(function(){t.Tools.EndPerformanceCounter("Physics"),i._physicsTime.endMonitoring()})):(this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=null,this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),this._onAfterPhysicsObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationsTimeCounter",{get:function(){return this._animationsTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureAnimationsTime",{get:function(){return this._captureAnimationsTime},set:function(t){var e=this;t!==this._captureAnimationsTime&&(this._captureAnimationsTime=t,t?this._onAfterAnimationsObserver=this.scene.onAfterAnimationsObservable.add(function(){e._animationsTime.endMonitoring()}):(this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver),this._onAfterAnimationsObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameTimeCounter",{get:function(){return this._frameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureFrameTime",{get:function(){return this._captureFrameTime},set:function(t){this._captureFrameTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interFrameTimeCounter",{get:function(){return this._interFrameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureInterFrameTime",{get:function(){return this._captureInterFrameTime},set:function(t){this._captureInterFrameTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(e){var i=this;e!==this._captureRenderTime&&(this._captureRenderTime=e,e?(this._onBeforeDrawPhaseObserver=this.scene.onBeforeDrawPhaseObservable.add(function(){i._renderTime.beginMonitoring(),t.Tools.StartPerformanceCounter("Main render")}),this._onAfterDrawPhaseObserver=this.scene.onAfterDrawPhaseObservable.add(function(){i._renderTime.endMonitoring(!1),t.Tools.EndPerformanceCounter("Main render")})):(this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver),this._onBeforeDrawPhaseObserver=null,this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver),this._onAfterDrawPhaseObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawCallsCounter",{get:function(){return this.scene.getEngine()._drawCalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureCollisionsCounter",{get:function(){return this.scene.getEngine()._textureCollisions},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.scene.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=null,this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver),this._onBeforeActiveMeshesEvaluationObserver=null,this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver),this._onAfterActiveMeshesEvaluationObserver=null,this.scene.OnBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver),this._onBeforeRenderTargetsRenderObserver=null,this.scene.OnAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver),this._onAfterRenderTargetsRenderObserver=null,this.scene.onBeforeAnimationsObservable.remove(this._onBeforeAnimationsObserver),this._onBeforeAnimationsObserver=null,this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver),this._onBeforeParticlesRenderingObserver=null,this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver),this._onAfterParticlesRenderingObserver=null,this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),this._onBeforeSpritesRenderingObserver=null,this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null,this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver),this._onBeforeDrawPhaseObserver=null,this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver),this._onAfterDrawPhaseObserver=null,this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=null,this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),this._onAfterPhysicsObserver=null,this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver),this._onAfterAnimationsObserver=null,this.scene=null},e}();t.SceneInstrumentation=e}(l||(l={})),function(t){var e=function(){return function(){this._timeElapsedQueryEnded=!1}}();t._TimeToken=e}(l||(l={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.DIFFUSE=!1,e.DIFFUSEDIRECTUV=0,e.GAMMADIFFUSE=!1,e.DIFFUSEHASALPHA=!1,e.OPACITYFRESNEL=!1,e.REFLECTIONBLUR=!1,e.REFLECTIONFRESNEL=!1,e.REFLECTIONFALLOFF=!1,e.TEXTURELODSUPPORT=!1,e.PREMULTIPLYALPHA=!1,e.USERGBCOLOR=!1,e.NOISE=!1,e.IMAGEPROCESSING=!1,e.VIGNETTE=!1,e.VIGNETTEBLENDMODEMULTIPLY=!1,e.VIGNETTEBLENDMODEOPAQUE=!1,e.TONEMAPPING=!1,e.CONTRAST=!1,e.COLORCURVES=!1,e.COLORGRADING=!1,e.COLORGRADING3D=!1,e.SAMPLER3DGREENDEPTH=!1,e.SAMPLER3DBGRMAP=!1,e.IMAGEPROCESSINGPOSTPROCESS=!1,e.EXPOSURE=!1,e.REFLECTION=!1,e.REFLECTIONMAP_3D=!1,e.REFLECTIONMAP_SPHERICAL=!1,e.REFLECTIONMAP_PLANAR=!1,e.REFLECTIONMAP_CUBIC=!1,e.REFLECTIONMAP_PROJECTION=!1,e.REFLECTIONMAP_SKYBOX=!1,e.REFLECTIONMAP_EXPLICIT=!1,e.REFLECTIONMAP_EQUIRECTANGULAR=!1,e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,e.INVERTCUBICMAP=!1,e.REFLECTIONMAP_OPPOSITEZ=!1,e.LODINREFLECTIONALPHA=!1,e.GAMMAREFLECTION=!1,e.MAINUV1=!1,e.MAINUV2=!1,e.UV1=!1,e.UV2=!1,e.CLIPPLANE=!1,e.POINTSIZE=!1,e.FOG=!1,e.NORMAL=!1,e.NUM_BONE_INFLUENCERS=0,e.BonesPerMesh=0,e.INSTANCES=!1,e.SHADOWFLOAT=!1,e.rebuild(),e}return o(e,t),e}(t.MaterialDefines),i=function(i){function n(e,n){var r=i.call(this,e,n)||this;return r.primaryColor=t.Color3.White(),r.primaryLevel=1,r.secondaryColor=t.Color3.Gray(),r.secondaryLevel=1,r.tertiaryColor=t.Color3.Black(),r.tertiaryLevel=1,r.reflectionTexture=null,r.reflectionBlur=0,r.diffuseTexture=null,r._shadowLights=null,r.shadowLights=null,r.shadowBlurScale=1,r.shadowLevel=0,r.sceneCenter=t.Vector3.Zero(),r.opacityFresnel=!0,r.reflectionFresnel=!1,r.reflectionFalloffDistance=0,r.reflectionAmount=1,r.reflectionReflectance0=.05,r.reflectionReflectance90=.5,r.useRGBColor=!0,r.enableNoise=!1,r._maxSimultaneousLights=4,r.maxSimultaneousLights=4,r._imageProcessingObserver=null,r._renderTargets=new t.SmartArray(16),r._reflectionControls=t.Vector4.Zero(),r._attachImageProcessingConfiguration(null),r.getRenderTargetTextures=function(){return r._renderTargets.reset(),r._diffuseTexture&&r._diffuseTexture.isRenderTarget&&r._renderTargets.push(r._diffuseTexture),r._reflectionTexture&&r._reflectionTexture.isRenderTarget&&r._renderTargets.push(r._reflectionTexture),r._renderTargets},r}return o(n,i),Object.defineProperty(n.prototype,"reflectionStandardFresnelWeight",{set:function(t){var e=t;e<.5?(e*=2,this.reflectionReflectance0=n.StandardReflectance0*e,this.reflectionReflectance90=n.StandardReflectance90*e):(e=2*e-1,this.reflectionReflectance0=n.StandardReflectance0+(1-n.StandardReflectance0)*e,this.reflectionReflectance90=n.StandardReflectance90+(1-n.StandardReflectance90)*e)},enumerable:!0,configurable:!0}),n.prototype._attachImageProcessingConfiguration=function(t){var e=this;t!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=t||this.getScene().imageProcessingConfiguration,this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(t){e._markAllSubMeshesAsImageProcessingDirty()}))},Object.defineProperty(n.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(t){this._attachImageProcessingConfiguration(t),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(t){this.imageProcessingConfiguration.colorCurvesEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(t){this.imageProcessingConfiguration.colorGradingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(t){this._imageProcessingConfiguration.toneMappingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(t){this._imageProcessingConfiguration.exposure=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(t){this._imageProcessingConfiguration.contrast=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(t){this.imageProcessingConfiguration.colorGradingTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cameraColorCurves",{get:function(){return this.imageProcessingConfiguration.colorCurves},set:function(t){this.imageProcessingConfiguration.colorCurves=t},enumerable:!0,configurable:!0}),n.prototype.needAlphaTesting=function(){return!0},n.prototype.needAlphaBlending=function(){return this.alpha<0||null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha},n.prototype.isReadyForSubMesh=function(i,n,r){var o=this;if(void 0===r&&(r=!1),n.effect&&this.isFrozen&&this._wasPreviouslyReady)return!0;n._materialDefines||(n._materialDefines=new e);var s=this.getScene(),a=n._materialDefines;if(!this.checkReadyOnEveryCall&&n.effect&&a._renderId===s.getRenderId())return!0;var l=s.getEngine();if(t.MaterialHelper.PrepareDefinesForLights(s,i,a,!1,this._maxSimultaneousLights),a._needNormals=!0,a._areTexturesDirty){if(a._needUVs=!1,s.texturesEnabled){if(s.getEngine().getCaps().textureLOD&&(a.TEXTURELODSUPPORT=!0),this._diffuseTexture&&t.StandardMaterial.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;t.MaterialHelper.PrepareDefinesForMergedUV(this._diffuseTexture,a,"DIFFUSE"),a.DIFFUSEHASALPHA=this._diffuseTexture.hasAlpha,a.GAMMADIFFUSE=this._diffuseTexture.gammaSpace,a.OPACITYFRESNEL=this._opacityFresnel}else a.DIFFUSE=!1,a.DIFFUSEHASALPHA=!1,a.GAMMADIFFUSE=!1,a.OPACITYFRESNEL=!1;var c=this._reflectionTexture;if(c&&t.StandardMaterial.ReflectionTextureEnabled){if(!c.isReadyOrNotBlocking())return!1;switch(a.REFLECTION=!0,a.GAMMAREFLECTION=c.gammaSpace,a.REFLECTIONBLUR=this._reflectionBlur>0,a.REFLECTIONMAP_OPPOSITEZ=this.getScene().useRightHandedSystem?!c.invertZ:c.invertZ,a.LODINREFLECTIONALPHA=c.lodLevelInAlpha,c.coordinatesMode===t.Texture.INVCUBIC_MODE&&(a.INVERTCUBICMAP=!0),a.REFLECTIONMAP_3D=c.isCube,c.coordinatesMode){case t.Texture.CUBIC_MODE:case t.Texture.INVCUBIC_MODE:a.REFLECTIONMAP_CUBIC=!0;break;case t.Texture.EXPLICIT_MODE:a.REFLECTIONMAP_EXPLICIT=!0;break;case t.Texture.PLANAR_MODE:a.REFLECTIONMAP_PLANAR=!0;break;case t.Texture.PROJECTION_MODE:a.REFLECTIONMAP_PROJECTION=!0;break;case t.Texture.SKYBOX_MODE:a.REFLECTIONMAP_SKYBOX=!0;break;case t.Texture.SPHERICAL_MODE:a.REFLECTIONMAP_SPHERICAL=!0;break;case t.Texture.EQUIRECTANGULAR_MODE:a.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case t.Texture.FIXED_EQUIRECTANGULAR_MODE:a.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case t.Texture.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:a.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0}this.reflectionFresnel?(a.REFLECTIONFRESNEL=!0,a.REFLECTIONFALLOFF=this.reflectionFalloffDistance>0,this._reflectionControls.x=this.reflectionAmount,this._reflectionControls.y=this.reflectionReflectance0,this._reflectionControls.z=this.reflectionReflectance90,this._reflectionControls.w=1/this.reflectionFalloffDistance):(a.REFLECTIONFRESNEL=!1,a.REFLECTIONFALLOFF=!1)}else a.REFLECTION=!1,a.REFLECTIONFALLOFF=!1,a.REFLECTIONBLUR=!1,a.REFLECTIONMAP_3D=!1,a.REFLECTIONMAP_SPHERICAL=!1,a.REFLECTIONMAP_PLANAR=!1,a.REFLECTIONMAP_CUBIC=!1,a.REFLECTIONMAP_PROJECTION=!1,a.REFLECTIONMAP_SKYBOX=!1,a.REFLECTIONMAP_EXPLICIT=!1,a.REFLECTIONMAP_EQUIRECTANGULAR=!1,a.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,a.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,a.INVERTCUBICMAP=!1,a.REFLECTIONMAP_OPPOSITEZ=!1,a.LODINREFLECTIONALPHA=!1,a.GAMMAREFLECTION=!1}a.PREMULTIPLYALPHA=this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED||this.alphaMode===t.Engine.ALPHA_PREMULTIPLIED_PORTERDUFF,a.USERGBCOLOR=this._useRGBColor,a.NOISE=this._enableNoise}if(a._areImageProcessingDirty){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(a)}if(t.MaterialHelper.PrepareDefinesForMisc(i,s,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(i),a),t.MaterialHelper.PrepareDefinesForFrameBoundValues(s,l,a,r),t.MaterialHelper.PrepareDefinesForAttributes(i,a,!1,!0,!1)&&i&&(s.getEngine().getCaps().standardDerivatives||i.isVerticesDataPresent(t.VertexBuffer.NormalKind)||(i.createNormals(!0),t.Tools.Warn("BackgroundMaterial: Normals have been created for the mesh: "+i.name))),a.isDirty){a.markAsProcessed(),s.resetCachedMaterial();var u=new t.EffectFallbacks;a.FOG&&u.addFallback(0,"FOG"),a.POINTSIZE&&u.addFallback(1,"POINTSIZE"),t.MaterialHelper.HandleFallbacksForShadows(a,u,this._maxSimultaneousLights),a.NUM_BONE_INFLUENCERS>0&&u.addCPUSkinningFallback(0,i);var h=[t.VertexBuffer.PositionKind];a.NORMAL&&h.push(t.VertexBuffer.NormalKind),a.UV1&&h.push(t.VertexBuffer.UVKind),a.UV2&&h.push(t.VertexBuffer.UV2Kind),t.MaterialHelper.PrepareAttributesForBones(h,i,a,u),t.MaterialHelper.PrepareAttributesForInstances(h,a);var p=["world","view","viewProjection","vEyePosition","vLightsType","vFogInfos","vFogColor","pointSize","vClipPlane","mBones","vPrimaryColor","vSecondaryColor","vTertiaryColor","vReflectionInfos","reflectionMatrix","vReflectionMicrosurfaceInfos","shadowLevel","alpha","vBackgroundCenter","vReflectionControl","vDiffuseInfos","diffuseMatrix"],d=["diffuseSampler","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh"],f=["Material","Scene"];t.ImageProcessingConfiguration.PrepareUniforms(p,a),t.ImageProcessingConfiguration.PrepareSamplers(d,a),t.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:p,uniformBuffersNames:f,samplers:d,defines:a,maxSimultaneousLights:this._maxSimultaneousLights});var m=a.toString();n.setEffect(s.getEngine().createEffect("background",{attributes:h,uniformsNames:p,uniformBuffersNames:f,samplers:d,defines:m,fallbacks:u,onCompiled:function(t){o.onCompiled&&o.onCompiled(t),o.bindSceneUniformBuffer(t,s.getSceneUniformBuffer())},onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights}},l),a),this.buildUniformLayout()}return!(!n.effect||!n.effect.isReady()||(a._renderId=s.getRenderId(),this._wasPreviouslyReady=!0,0))},n.prototype.buildUniformLayout=function(){this._uniformBuffer.addUniform("vPrimaryColor",4),this._uniformBuffer.addUniform("vSecondaryColor",4),this._uniformBuffer.addUniform("vTertiaryColor",4),this._uniformBuffer.addUniform("vDiffuseInfos",2),this._uniformBuffer.addUniform("vReflectionInfos",2),this._uniformBuffer.addUniform("diffuseMatrix",16),this._uniformBuffer.addUniform("reflectionMatrix",16),this._uniformBuffer.addUniform("vReflectionMicrosurfaceInfos",3),this._uniformBuffer.addUniform("pointSize",1),this._uniformBuffer.addUniform("shadowLevel",1),this._uniformBuffer.addUniform("alpha",1),this._uniformBuffer.addUniform("vBackgroundCenter",3),this._uniformBuffer.addUniform("vReflectionControl",4),this._uniformBuffer.create()},n.prototype.unbind=function(){this._diffuseTexture&&this._diffuseTexture.isRenderTarget&&this._uniformBuffer.setTexture("diffuseSampler",null),this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._uniformBuffer.setTexture("reflectionSampler",null),i.prototype.unbind.call(this)},n.prototype.bindOnlyWorldMatrix=function(t){this._activeEffect.setMatrix("world",t)},n.prototype.bindForSubMesh=function(e,i,n){var r=this.getScene(),o=n._materialDefines;if(o){var s=n.effect;if(s){this._activeEffect=s,this.bindOnlyWorldMatrix(e),t.MaterialHelper.BindBonesParameters(i,this._activeEffect);var a=this._mustRebind(r,s,i.visibility);if(a){this._uniformBuffer.bindToEffect(s,"Material"),this.bindViewProjection(s);var l=this._reflectionTexture;this._uniformBuffer.useUbo&&this.isFrozen&&this._uniformBuffer.isSync||(r.texturesEnabled&&(this._diffuseTexture&&t.StandardMaterial.DiffuseTextureEnabled&&(this._uniformBuffer.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),t.MaterialHelper.BindTextureMatrix(this._diffuseTexture,this._uniformBuffer,"diffuse")),l&&t.StandardMaterial.ReflectionTextureEnabled&&(this._uniformBuffer.updateMatrix("reflectionMatrix",l.getReflectionTextureMatrix()),this._uniformBuffer.updateFloat2("vReflectionInfos",l.level,this._reflectionBlur),this._uniformBuffer.updateFloat3("vReflectionMicrosurfaceInfos",l.getSize().width,l.lodGenerationScale,l.lodGenerationOffset))),this.shadowLevel>0&&this._uniformBuffer.updateFloat("shadowLevel",this.shadowLevel),this._uniformBuffer.updateFloat("alpha",this.alpha),this.pointsCloud&&this._uniformBuffer.updateFloat("pointSize",this.pointSize),this._uniformBuffer.updateColor4("vPrimaryColor",this._primaryColor,this._primaryLevel),this._uniformBuffer.updateColor4("vSecondaryColor",this._secondaryColor,this._secondaryLevel),this._uniformBuffer.updateColor4("vTertiaryColor",this._tertiaryColor,this._tertiaryLevel)),r.texturesEnabled&&(this._diffuseTexture&&t.StandardMaterial.DiffuseTextureEnabled&&this._uniformBuffer.setTexture("diffuseSampler",this._diffuseTexture),l&&t.StandardMaterial.ReflectionTextureEnabled&&(o.REFLECTIONBLUR&&o.TEXTURELODSUPPORT?this._uniformBuffer.setTexture("reflectionSampler",l):o.REFLECTIONBLUR?(this._uniformBuffer.setTexture("reflectionSampler",l._lodTextureMid||l),this._uniformBuffer.setTexture("reflectionSamplerLow",l._lodTextureLow||l),this._uniformBuffer.setTexture("reflectionSamplerHigh",l._lodTextureHigh||l)):this._uniformBuffer.setTexture("reflectionSampler",l),o.REFLECTIONFRESNEL&&(this._uniformBuffer.updateFloat3("vBackgroundCenter",this.sceneCenter.x,this.sceneCenter.y,this.sceneCenter.z),this._uniformBuffer.updateFloat4("vReflectionControl",this._reflectionControls.x,this._reflectionControls.y,this._reflectionControls.z,this._reflectionControls.w)))),t.MaterialHelper.BindClipPlane(this._activeEffect,r),t.MaterialHelper.BindEyePosition(s,r)}!a&&this.isFrozen||(r.lightsEnabled&&t.MaterialHelper.BindLights(r,i,this._activeEffect,o,this._maxSimultaneousLights,!1),this.bindView(s),t.MaterialHelper.BindFogParameters(r,i,this._activeEffect),this._imageProcessingConfiguration.bind(this._activeEffect)),this._uniformBuffer.update(),this._afterBind(i)}}},n.prototype.dispose=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),e&&(this.diffuseTexture&&this.diffuseTexture.dispose(),this.reflectionTexture&&this.reflectionTexture.dispose()),this._renderTargets.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),i.prototype.dispose.call(this,t)},n.prototype.clone=function(e){var i=this;return t.SerializationHelper.Clone(function(){return new n(e,i.getScene())},this)},n.prototype.serialize=function(){var e=t.SerializationHelper.Serialize(this);return e.customType="BABYLON.BackgroundMaterial",e},n.prototype.getClassName=function(){return"BackgroundMaterial"},n.Parse=function(e,i,r){return t.SerializationHelper.Parse(function(){return new n(e.name,i)},e,i,r)},n.StandardReflectance0=.05,n.StandardReflectance90=.5,r([t.serializeAsColor3()],n.prototype,"_primaryColor",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"primaryColor",void 0),r([t.serialize()],n.prototype,"_primaryLevel",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"primaryLevel",void 0),r([t.serializeAsColor3()],n.prototype,"_secondaryColor",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"secondaryColor",void 0),r([t.serialize()],n.prototype,"_secondaryLevel",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"secondaryLevel",void 0),r([t.serializeAsColor3()],n.prototype,"_tertiaryColor",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"tertiaryColor",void 0),r([t.serialize()],n.prototype,"_tertiaryLevel",void 0),r([t.expandToProperty("_markAllSubMeshesAsLightsDirty")],n.prototype,"tertiaryLevel",void 0),r([t.serializeAsTexture()],n.prototype,"_reflectionTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionTexture",void 0),r([t.serialize()],n.prototype,"_reflectionBlur",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionBlur",void 0),r([t.serializeAsTexture()],n.prototype,"_diffuseTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"diffuseTexture",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"shadowLights",void 0),r([t.serialize()],n.prototype,"_shadowBlurScale",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"shadowBlurScale",void 0),r([t.serialize()],n.prototype,"_shadowLevel",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"shadowLevel",void 0),r([t.serializeAsVector3()],n.prototype,"_sceneCenter",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"sceneCenter",void 0),r([t.serialize()],n.prototype,"_opacityFresnel",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"opacityFresnel",void 0),r([t.serialize()],n.prototype,"_reflectionFresnel",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionFresnel",void 0),r([t.serialize()],n.prototype,"_reflectionFalloffDistance",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionFalloffDistance",void 0),r([t.serialize()],n.prototype,"_reflectionAmount",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionAmount",void 0),r([t.serialize()],n.prototype,"_reflectionReflectance0",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionReflectance0",void 0),r([t.serialize()],n.prototype,"_reflectionReflectance90",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionReflectance90",void 0),r([t.serialize()],n.prototype,"_useRGBColor",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useRGBColor",void 0),r([t.serialize()],n.prototype,"_enableNoise",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"enableNoise",void 0),r([t.serialize()],n.prototype,"_maxSimultaneousLights",void 0),r([t.expandToProperty("_markAllSubMeshesAsTexturesDirty")],n.prototype,"maxSimultaneousLights",void 0),r([t.serializeAsImageProcessingConfiguration()],n.prototype,"_imageProcessingConfiguration",void 0),n}(t.PushMaterial);t.BackgroundMaterial=i}(l||(l={}));var l;s=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(t){var e=function(){function e(t,i){this._options=s({},e._getDefaultOptions(),t),this._scene=i,this._setupBackground(),this._setupImageProcessing()}return e._getDefaultOptions=function(){return{createGround:!0,groundSize:15,groundTexture:this._groundTextureCDNUrl,groundColor:new t.Color3(.2,.2,.3).toLinearSpace().scale(3),groundOpacity:.9,enableGroundShadow:!0,groundShadowLevel:.5,enableGroundMirror:!1,groundMirrorSizeRatio:.3,groundMirrorBlurKernel:64,groundMirrorAmount:1,groundMirrorFresnelWeight:1,groundMirrorFallOffDistance:0,groundMirrorTextureType:t.Engine.TEXTURETYPE_UNSIGNED_INT,groundYBias:1e-5,createSkybox:!0,skyboxSize:20,skyboxTexture:this._skyboxTextureCDNUrl,skyboxColor:new t.Color3(.2,.2,.3).toLinearSpace().scale(3),backgroundYRotation:0,sizeAuto:!0,rootPosition:t.Vector3.Zero(),setupImageProcessing:!0,environmentTexture:this._environmentTextureCDNUrl,cameraExposure:.8,cameraContrast:1.2,toneMappingEnabled:!0}},Object.defineProperty(e.prototype,"rootMesh",{get:function(){return this._rootMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skybox",{get:function(){return this._skybox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyboxTexture",{get:function(){return this._skyboxTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyboxMaterial",{get:function(){return this._skyboxMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ground",{get:function(){return this._ground},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundTexture",{get:function(){return this._groundTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMirror",{get:function(){return this._groundMirror},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMirrorRenderList",{get:function(){return this._groundMirror?this._groundMirror.renderList:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMaterial",{get:function(){return this._groundMaterial},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(t){var e=s({},this._options,t);this._ground&&!e.createGround&&(this._ground.dispose(),this._ground=null),this._groundMaterial&&!e.createGround&&(this._groundMaterial.dispose(),this._groundMaterial=null),this._groundTexture&&this._options.groundTexture!=e.groundTexture&&(this._groundTexture.dispose(),this._groundTexture=null),this._skybox&&!e.createSkybox&&(this._skybox.dispose(),this._skybox=null),this._skyboxMaterial&&!e.createSkybox&&(this._skyboxMaterial.dispose(),this._skyboxMaterial=null),this._skyboxTexture&&this._options.skyboxTexture!=e.skyboxTexture&&(this._skyboxTexture.dispose(),this._skyboxTexture=null),this._groundMirror&&!e.enableGroundMirror&&(this._groundMirror.dispose(),this._groundMirror=null),this._scene.environmentTexture&&this._options.environmentTexture!=e.environmentTexture&&this._scene.environmentTexture.dispose(),this._options=e,this._setupBackground(),this._setupImageProcessing()},e.prototype.setMainColor=function(e){this.groundMaterial&&(this.groundMaterial.primaryColor=e),this.skyboxMaterial&&(this.skyboxMaterial.primaryColor=e),this.groundMirror&&(this.groundMirror.clearColor=new t.Color4(e.r,e.g,e.b,1))},e.prototype._setupImageProcessing=function(){this._options.setupImageProcessing&&(this._scene.imageProcessingConfiguration.contrast=this._options.cameraContrast,this._scene.imageProcessingConfiguration.exposure=this._options.cameraExposure,this._scene.imageProcessingConfiguration.toneMappingEnabled=this._options.toneMappingEnabled,this._setupEnvironmentTexture())},e.prototype._setupEnvironmentTexture=function(){if(!this._scene.environmentTexture){if(this._options.environmentTexture instanceof t.BaseTexture)return void(this._scene.environmentTexture=this._options.environmentTexture);var e=t.CubeTexture.CreateFromPrefilteredData(this._options.environmentTexture,this._scene);this._scene.environmentTexture=e}},e.prototype._setupBackground=function(){this._rootMesh||(this._rootMesh=new t.Mesh("BackgroundHelper",this._scene)),this._rootMesh.rotation.y=this._options.backgroundYRotation;var e=this._getSceneSize();this._options.createGround&&(this._setupGround(e),this._setupGroundMaterial(),this._setupGroundDiffuseTexture(),this._options.enableGroundMirror&&this._setupGroundMirrorTexture(e),this._setupMirrorInGroundMaterial()),this._options.createSkybox&&(this._setupSkybox(e),this._setupSkyboxMaterial(),this._setupSkyboxReflectionTexture()),this._rootMesh.position.x=e.rootPosition.x,this._rootMesh.position.z=e.rootPosition.z,this._rootMesh.position.y=e.rootPosition.y},e.prototype._getSceneSize=function(){var e=this._options.groundSize,i=this._options.skyboxSize,n=this._options.rootPosition;if(!this._scene.meshes||1===this._scene.meshes.length)return{groundSize:e,skyboxSize:i,rootPosition:n};var r=this._scene.getWorldExtends(),o=r.max.subtract(r.min);if(this._options.sizeAuto){this._scene.activeCamera instanceof t.ArcRotateCamera&&this._scene.activeCamera.upperRadiusLimit&&(i=e=2*this._scene.activeCamera.upperRadiusLimit);var s=o.length();s>e&&(i=e=2*s),e*=1.1,i*=1.5,(n=r.min.add(o.scale(.5))).y=r.min.y-this._options.groundYBias}return{groundSize:e,skyboxSize:i,rootPosition:n}},e.prototype._setupGround=function(e){var i=this;this._ground||(this._ground=t.Mesh.CreatePlane("BackgroundPlane",e.groundSize,this._scene),this._ground.rotation.x=Math.PI/2,this._ground.parent=this._rootMesh,this._ground.onDisposeObservable.add(function(){i._ground=null})),this._ground.receiveShadows=this._options.enableGroundShadow},e.prototype._setupGroundMaterial=function(){this._groundMaterial||(this._groundMaterial=new t.BackgroundMaterial("BackgroundPlaneMaterial",this._scene)),this._groundMaterial.alpha=this._options.groundOpacity,this._groundMaterial.alphaMode=t.Engine.ALPHA_PREMULTIPLIED_PORTERDUFF,this._groundMaterial.shadowLevel=this._options.groundShadowLevel,this._groundMaterial.primaryLevel=1,this._groundMaterial.primaryColor=this._options.groundColor,this._groundMaterial.secondaryLevel=0,this._groundMaterial.tertiaryLevel=0,this._groundMaterial.useRGBColor=!1,this._groundMaterial.enableNoise=!0,this._ground&&(this._ground.material=this._groundMaterial)},e.prototype._setupGroundDiffuseTexture=function(){if(this._groundMaterial&&!this._groundTexture){if(this._options.groundTexture instanceof t.BaseTexture)return void(this._groundMaterial.diffuseTexture=this._options.groundTexture);var e=new t.Texture(this._options.groundTexture,this._scene);e.gammaSpace=!1,e.hasAlpha=!0,this._groundMaterial.diffuseTexture=e}},e.prototype._setupGroundMirrorTexture=function(e){var i=t.Texture.CLAMP_ADDRESSMODE;if(!this._groundMirror&&(this._groundMirror=new t.MirrorTexture("BackgroundPlaneMirrorTexture",{ratio:this._options.groundMirrorSizeRatio},this._scene,!1,this._options.groundMirrorTextureType,t.Texture.BILINEAR_SAMPLINGMODE,!0),this._groundMirror.mirrorPlane=new t.Plane(0,-1,0,e.rootPosition.y),this._groundMirror.anisotropicFilteringLevel=1,this._groundMirror.wrapU=i,this._groundMirror.wrapV=i,this._groundMirror.gammaSpace=!1,this._groundMirror.renderList))for(var n=0;n<this._scene.meshes.length;n++){var r=this._scene.meshes[n];r!==this._ground&&r!==this._skybox&&r!==this._rootMesh&&this._groundMirror.renderList.push(r)}this._groundMirror.clearColor=new t.Color4(this._options.groundColor.r,this._options.groundColor.g,this._options.groundColor.b,1),this._groundMirror.adaptiveBlurKernel=this._options.groundMirrorBlurKernel},e.prototype._setupMirrorInGroundMaterial=function(){this._groundMaterial&&(this._groundMaterial.reflectionTexture=this._groundMirror,this._groundMaterial.reflectionFresnel=!0,this._groundMaterial.reflectionAmount=this._options.groundMirrorAmount,this._groundMaterial.reflectionStandardFresnelWeight=this._options.groundMirrorFresnelWeight,this._groundMaterial.reflectionFalloffDistance=this._options.groundMirrorFallOffDistance)},e.prototype._setupSkybox=function(e){var i=this;this._skybox||(this._skybox=t.Mesh.CreateBox("BackgroundSkybox",e.skyboxSize,this._scene,void 0,t.Mesh.BACKSIDE),this._skybox.onDisposeObservable.add(function(){i._skybox=null})),this._skybox.parent=this._rootMesh},e.prototype._setupSkyboxMaterial=function(){this._skybox&&(this._skyboxMaterial||(this._skyboxMaterial=new t.BackgroundMaterial("BackgroundSkyboxMaterial",this._scene)),this._skyboxMaterial.useRGBColor=!1,this._skyboxMaterial.primaryLevel=1,this._skyboxMaterial.primaryColor=this._options.skyboxColor,this._skyboxMaterial.secondaryLevel=0,this._skyboxMaterial.tertiaryLevel=0,this._skyboxMaterial.enableNoise=!0,this._skybox.material=this._skyboxMaterial)},e.prototype._setupSkyboxReflectionTexture=function(){if(this._skyboxMaterial&&!this._skyboxTexture){if(this._options.skyboxTexture instanceof t.BaseTexture)return void(this._skyboxMaterial.reflectionTexture=this._skyboxTexture);this._skyboxTexture=new t.CubeTexture(this._options.skyboxTexture,this._scene),this._skyboxTexture.coordinatesMode=t.Texture.SKYBOX_MODE,this._skyboxTexture.gammaSpace=!1,this._skyboxMaterial.reflectionTexture=this._skyboxTexture}},e.prototype.dispose=function(){this._groundMaterial&&this._groundMaterial.dispose(!0,!0),this._skyboxMaterial&&this._skyboxMaterial.dispose(!0,!0),this._rootMesh.dispose(!1)},e._groundTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundGround.png",e._skyboxTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundSkybox.dds",e._environmentTextureCDNUrl="https://assets.babylonjs.com/environments/environmentSpecular.dds",e}();t.EnvironmentHelper=e}(l||(l={})),l.Effect.ShadersStore={defaultVertexShader:"#include<__decl__defaultVertex>\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nvarying vec2 vSpecularUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\nvoid main(void) {\nvec3 positionUpdated=position;\n#ifdef NORMAL \nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvPositionUVW=positionUpdated;\n#endif \n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nif (vSpecularInfos.x == 0.)\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n#include<pointCloudVertex>\n#include<logDepthVertex>\n}",defaultPixelShader:"#include<__decl__defaultFragment>\n#if defined(BUMP) || !defined(NORMAL)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#define RECIPROCAL_PI2 0.15915494\nuniform vec3 vEyePosition;\nuniform vec3 vAmbientColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY \n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFRACTION\n#ifdef REFRACTIONMAP_3D\nuniform samplerCube refractionCubeSampler;\n#else\nuniform sampler2D refraction2DSampler;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\n#if SPECULARDIRECTUV == 1\n#define vSpecularUV vMainUV1\n#elif SPECULARDIRECTUV == 2\n#define vSpecularUV vMainUV2\n#else\nvarying vec2 vSpecularUV;\n#endif\nuniform sampler2D specularSampler;\n#endif\n\n#include<fresnelFunction>\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\nuniform samplerCube reflectionCubeSampler;\n#else\nuniform sampler2D reflection2DSampler;\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n#include<imageProcessingDeclaration>\n#include<imageProcessingFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(-cross(dFdx(vPositionW),dFdy(vPositionW)));\n#endif\n#include<bumpFragment>\n#ifdef TWOSIDEDLIGHTING\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV+uvOffset);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#ifdef ALPHAFROMDIFFUSE\nalpha*=baseColor.a;\n#endif\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\nvec3 baseAmbientColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nbaseAmbientColor=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#endif\n\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#ifdef SPECULAR\nvec4 specularMapColor=texture2D(specularSampler,vSpecularUV+uvOffset);\nspecularColor=specularMapColor.rgb;\n#ifdef GLOSSINESS\nglossiness=glossiness*specularMapColor.a;\n#endif\n#endif\n#else\nfloat glossiness=0.;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\nfloat shadow=1.;\n#ifdef LIGHTMAP\nvec3 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset).rgb*vLightmapInfos.y;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n\nvec3 refractionColor=vec3(0.,0.,0.);\n#ifdef REFRACTION\nvec3 refractionVector=normalize(refract(-viewDirectionW,normalW,vRefractionInfos.y));\n#ifdef REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nif (dot(refractionVector,viewDirectionW)<1.0)\n{\nrefractionColor=textureCube(refractionCubeSampler,refractionVector).rgb*vRefractionInfos.x;\n}\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\nrefractionColor=texture2D(refraction2DSampler,refractionCoords).rgb*vRefractionInfos.x;\n#endif\n#endif\n\nvec3 reflectionColor=vec3(0.,0.,0.);\n#ifdef REFLECTION\nvec3 vReflectionUVW=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_3D\n#ifdef ROUGHNESS\nfloat bias=vReflectionInfos.y;\n#ifdef SPECULARTERM\n#ifdef SPECULAR\n#ifdef GLOSSINESS\nbias*=(1.0-specularMapColor.a);\n#endif\n#endif\n#endif\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW,bias).rgb*vReflectionInfos.x;\n#else\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW).rgb*vReflectionInfos.x;\n#endif\n#else\nvec2 coords=vReflectionUVW.xy;\n#ifdef REFLECTIONMAP_PROJECTION\ncoords/=vReflectionUVW.z;\n#endif\ncoords.y=1.0-coords.y;\nreflectionColor=texture2D(reflection2DSampler,coords).rgb*vReflectionInfos.x;\n#endif\n#ifdef REFLECTIONFRESNEL\nfloat reflectionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,reflectionRightColor.a,reflectionLeftColor.a);\n#ifdef REFLECTIONFRESNELFROMSPECULAR\n#ifdef SPECULARTERM\nreflectionColor*=specularColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#endif\n#endif\n#ifdef REFRACTIONFRESNEL\nfloat refractionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,refractionRightColor.a,refractionLeftColor.a);\nrefractionColor*=refractionLeftColor.rgb*(1.0-refractionFresnelTerm)+refractionFresnelTerm*refractionRightColor.rgb;\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nopacityMap.rgb=opacityMap.rgb*vec3(0.3,0.59,0.11);\nalpha*=(opacityMap.x+opacityMap.y+opacityMap.z)* vOpacityInfos.y;\n#else\nalpha*=opacityMap.a*vOpacityInfos.y;\n#endif\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef OPACITYFRESNEL\nfloat opacityFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,opacityParts.z,opacityParts.w);\nalpha+=opacityParts.x*(1.0-opacityFresnelTerm)+opacityFresnelTerm*opacityParts.y;\n#endif\n\nvec3 emissiveColor=vEmissiveColor;\n#ifdef EMISSIVE\nemissiveColor+=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb*vEmissiveInfos.y;\n#endif\n#ifdef EMISSIVEFRESNEL\nfloat emissiveFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,emissiveRightColor.a,emissiveLeftColor.a);\nemissiveColor*=emissiveLeftColor.rgb*(1.0-emissiveFresnelTerm)+emissiveFresnelTerm*emissiveRightColor.rgb;\n#endif\n\n#ifdef DIFFUSEFRESNEL\nfloat diffuseFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,diffuseRightColor.a,diffuseLeftColor.a);\ndiffuseBase*=diffuseLeftColor.rgb*(1.0-diffuseFresnelTerm)+diffuseFresnelTerm*diffuseRightColor.rgb;\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\n#ifdef LINKEMISSIVEWITHDIFFUSE\nvec3 finalDiffuse=clamp((diffuseBase+emissiveColor)*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+emissiveColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#endif\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#ifdef SPECULAROVERALPHA\nalpha=clamp(alpha+dot(finalSpecular,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#ifdef REFLECTIONOVERALPHA\nalpha=clamp(alpha+dot(reflectionColor,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec4 color=vec4(clamp(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+emissiveColor+refractionColor,0.0,1.0),alpha);\n#else\nvec4 color=vec4(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+refractionColor,alpha);\n#endif\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\ncolor.rgb*=lightmapColor;\n#else\ncolor.rgb+=lightmapColor;\n#endif\n#endif\n#endif\n#include<logDepthFragment>\n#include<fogFragment>\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb=toLinearSpace(color.rgb);\n#else\n#ifdef IMAGEPROCESSING\ncolor.rgb=toLinearSpace(color.rgb);\ncolor=applyImageProcessing(color);\n#endif\n#endif\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\ngl_FragColor=color;\n}",pbrVertexShader:"precision highp float;\n#include<__decl__pbrVertex>\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2; \n#endif \n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#if defined(ALBEDO) && ALBEDODIRECTUV == 0\nvarying vec2 vAlbedoUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(REFLECTIVITY) && REFLECTIVITYDIRECTUV == 0\nvarying vec2 vReflectivityUV;\n#endif\n#if defined(MICROSURFACEMAP) && MICROSURFACEMAPDIRECTUV == 0\nvarying vec2 vMicroSurfaceSamplerUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvarying vec3 vEnvironmentIrradiance;\n#include<harmonicsFunctions>\n#endif\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\nvoid main(void) {\nvec3 positionUpdated=position;\n#ifdef NORMAL\nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvPositionUVW=positionUpdated;\n#endif \n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvec3 reflectionVector=vec3(reflectionMatrix*vec4(vNormalW,0)).xyz;\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\nvEnvironmentIrradiance=environmentIrradianceJones(reflectionVector);\n#endif\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif \n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif \n#if defined(ALBEDO) && ALBEDODIRECTUV == 0 \nif (vAlbedoInfos.x == 0.)\n{\nvAlbedoUV=vec2(albedoMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAlbedoUV=vec2(albedoMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0 \nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0 \nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0 \nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0 \nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(REFLECTIVITY) && REFLECTIVITYDIRECTUV == 0 \nif (vReflectivityInfos.x == 0.)\n{\nvReflectivityUV=vec2(reflectivityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvReflectivityUV=vec2(reflectivityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(MICROSURFACEMAP) && MICROSURFACEMAPDIRECTUV == 0 \nif (vMicroSurfaceSamplerInfos.x == 0.)\n{\nvMicroSurfaceSamplerUV=vec2(microSurfaceSamplerMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvMicroSurfaceSamplerUV=vec2(microSurfaceSamplerMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0 \nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<bumpVertex>\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n\n#include<logDepthVertex>\n}",pbrPixelShader:"#if defined(BUMP) || !defined(NORMAL) || defined(FORCENORMALFORWARD)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef LODBASEDMICROSFURACE\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;\n#include<__decl__pbrFragment>\nuniform vec4 vEyePosition;\nuniform vec3 vAmbientColor;\nuniform vec4 vCameraInfos;\n\nvarying vec3 vPositionW;\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif \n#ifdef MAINUV2 \nvarying vec2 vMainUV2;\n#endif \n#ifdef NORMAL\nvarying vec3 vNormalW;\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvarying vec3 vEnvironmentIrradiance;\n#endif\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#ifdef ALBEDO\n#if ALBEDODIRECTUV == 1\n#define vAlbedoUV vMainUV1\n#elif ALBEDODIRECTUV == 2\n#define vAlbedoUV vMainUV2\n#else\nvarying vec2 vAlbedoUV;\n#endif\nuniform sampler2D albedoSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY\n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFLECTIVITY\n#if REFLECTIVITYDIRECTUV == 1\n#define vReflectivityUV vMainUV1\n#elif REFLECTIVITYDIRECTUV == 2\n#define vReflectivityUV vMainUV2\n#else\nvarying vec2 vReflectivityUV;\n#endif\nuniform sampler2D reflectivitySampler;\n#endif\n#ifdef MICROSURFACEMAP\n#if MICROSURFACEMAPDIRECTUV == 1\n#define vMicroSurfaceSamplerUV vMainUV1\n#elif MICROSURFACEMAPDIRECTUV == 2\n#define vMicroSurfaceSamplerUV vMainUV2\n#else\nvarying vec2 vMicroSurfaceSamplerUV;\n#endif\nuniform sampler2D microSurfaceSampler;\n#endif\n\n#ifdef REFRACTION\n#ifdef REFRACTIONMAP_3D\n#define sampleRefraction(s,c) textureCube(s,c)\nuniform samplerCube refractionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleRefractionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube refractionSamplerLow;\nuniform samplerCube refractionSamplerHigh;\n#endif\n#else\n#define sampleRefraction(s,c) texture2D(s,c)\nuniform sampler2D refractionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleRefractionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube refractionSamplerLow;\nuniform samplerCube refractionSamplerHigh;\n#endif\n#endif\n#endif\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\n#define sampleReflection(s,c) textureCube(s,c)\nuniform samplerCube reflectionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleReflectionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#else\n#define sampleReflection(s,c) texture2D(s,c)\nuniform sampler2D reflectionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleReflectionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n#ifdef ENVIRONMENTBRDF\nuniform sampler2D environmentBrdfSampler;\n#endif\n\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE;\n#endif\n#include<imageProcessingDeclaration>\n#include<helperFunctions>\n#include<imageProcessingFunctions>\n\n#include<shadowsFragmentFunctions>\n#include<pbrFunctions>\n#include<harmonicsFunctions>\n#include<pbrLightFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\n\n\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(cross(dFdx(vPositionW),dFdy(vPositionW)))*vEyePosition.w;\n#endif\n#include<bumpFragment>\n#if defined(FORCENORMALFORWARD) && defined(NORMAL)\nvec3 faceNormal=normalize(cross(dFdx(vPositionW),dFdy(vPositionW)))*vEyePosition.w;\n#if defined(TWOSIDEDLIGHTING)\nfaceNormal=gl_FrontFacing ? faceNormal : -faceNormal;\n#endif\nnormalW*=sign(dot(normalW,faceNormal));\n#endif\n#if defined(TWOSIDEDLIGHTING) && defined(NORMAL)\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n\n\nvec3 surfaceAlbedo=vAlbedoColor.rgb;\n\nfloat alpha=vAlbedoColor.a;\n#ifdef ALBEDO\nvec4 albedoTexture=texture2D(albedoSampler,vAlbedoUV+uvOffset);\n#if defined(ALPHAFROMALBEDO) || defined(ALPHATEST)\nalpha*=albedoTexture.a;\n#endif\nsurfaceAlbedo*=toLinearSpace(albedoTexture.rgb);\nsurfaceAlbedo*=vAlbedoInfos.y;\n#endif\n\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nalpha=getLuminance(opacityMap.rgb);\n#else\nalpha*=opacityMap.a;\n#endif\nalpha*=vOpacityInfos.y;\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#if !defined(LINKREFRACTIONTOTRANSPARENCY) && !defined(ALPHAFRESNEL)\n#ifdef ALPHATEST\nif (alpha<=ALPHATESTVALUE)\ndiscard;\n#ifndef ALPHABLEND\n\nalpha=1.0;\n#endif\n#endif\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nsurfaceAlbedo*=vColor.rgb;\n#endif\n\nvec3 ambientOcclusionColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nvec3 ambientOcclusionColorMap=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#ifdef AMBIENTINGRAYSCALE\nambientOcclusionColorMap=vec3(ambientOcclusionColorMap.r,ambientOcclusionColorMap.r,ambientOcclusionColorMap.r);\n#endif\nambientOcclusionColor=mix(ambientOcclusionColor,ambientOcclusionColorMap,vAmbientInfos.z);\n#endif\n\nfloat microSurface=vReflectivityColor.a;\nvec3 surfaceReflectivityColor=vReflectivityColor.rgb;\n#ifdef METALLICWORKFLOW\nvec2 metallicRoughness=surfaceReflectivityColor.rg;\n#ifdef REFLECTIVITY\nvec4 surfaceMetallicColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\n#ifdef AOSTOREINMETALMAPRED\nvec3 aoStoreInMetalMap=vec3(surfaceMetallicColorMap.r,surfaceMetallicColorMap.r,surfaceMetallicColorMap.r);\nambientOcclusionColor=mix(ambientOcclusionColor,aoStoreInMetalMap,vReflectivityInfos.z);\n#endif\n#ifdef METALLNESSSTOREINMETALMAPBLUE\nmetallicRoughness.r*=surfaceMetallicColorMap.b;\n#else\nmetallicRoughness.r*=surfaceMetallicColorMap.r;\n#endif\n#ifdef ROUGHNESSSTOREINMETALMAPALPHA\nmetallicRoughness.g*=surfaceMetallicColorMap.a;\n#else\n#ifdef ROUGHNESSSTOREINMETALMAPGREEN\nmetallicRoughness.g*=surfaceMetallicColorMap.g;\n#endif\n#endif\n#endif\n#ifdef MICROSURFACEMAP\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\nmetallicRoughness.g*=microSurfaceTexel.r;\n#endif\n\nmicroSurface=1.0-metallicRoughness.g;\n\nvec3 baseColor=surfaceAlbedo;\n\n\nconst vec3 DefaultSpecularReflectanceDielectric=vec3(0.04,0.04,0.04);\n\nsurfaceAlbedo=mix(baseColor.rgb*(1.0-DefaultSpecularReflectanceDielectric.r),vec3(0.,0.,0.),metallicRoughness.r);\n\nsurfaceReflectivityColor=mix(DefaultSpecularReflectanceDielectric,baseColor,metallicRoughness.r);\n#else\n#ifdef REFLECTIVITY\nvec4 surfaceReflectivityColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\nsurfaceReflectivityColor*=toLinearSpace(surfaceReflectivityColorMap.rgb);\nsurfaceReflectivityColor*=vReflectivityInfos.y;\n#ifdef MICROSURFACEFROMREFLECTIVITYMAP\nmicroSurface*=surfaceReflectivityColorMap.a;\nmicroSurface*=vReflectivityInfos.z;\n#else\n#ifdef MICROSURFACEAUTOMATIC\nmicroSurface*=computeDefaultMicroSurface(microSurface,surfaceReflectivityColor);\n#endif\n#ifdef MICROSURFACEMAP\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\nmicroSurface*=microSurfaceTexel.r;\n#endif\n#endif\n#endif\n#endif\n\nmicroSurface=clamp(microSurface,0.,1.);\n\nfloat roughness=1.-microSurface;\n\n#ifdef ALPHAFRESNEL\n#if defined(ALPHATEST) || defined(ALPHABLEND)\n\n\n\nfloat opacityPerceptual=alpha;\n#ifdef LINEARALPHAFRESNEL\nfloat opacity0=opacityPerceptual;\n#else\nfloat opacity0=opacityPerceptual*opacityPerceptual;\n#endif\nfloat opacity90=fresnelGrazingReflectance(opacity0);\nvec3 normalForward=faceforward(normalW,-viewDirectionW,normalW);\n\nalpha=fresnelSchlickEnvironmentGGX(clamp(dot(viewDirectionW,normalForward),0.0,1.0),vec3(opacity0),vec3(opacity90),sqrt(microSurface)).x;\n#ifdef ALPHATEST\nif (alpha<=ALPHATESTVALUE)\ndiscard;\n#ifndef ALPHABLEND\n\nalpha=1.0;\n#endif\n#endif\n#endif\n#endif\n\n\nfloat NdotVUnclamped=dot(normalW,viewDirectionW);\nfloat NdotV=clamp(NdotVUnclamped,0.,1.)+0.00001;\nfloat alphaG=convertRoughnessToAverageSlope(roughness);\n\n#ifdef REFRACTION\nvec3 environmentRefraction=vec3(0.,0.,0.);\nvec3 refractionVector=refract(-viewDirectionW,normalW,vRefractionInfos.y);\n#ifdef REFRACTIONMAP_OPPOSITEZ\nrefractionVector.z*=-1.0;\n#endif\n\n#ifdef REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nvec3 refractionCoords=refractionVector;\nrefractionCoords=vec3(refractionMatrix*vec4(refractionCoords,0));\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\n#endif\n#ifdef LODINREFRACTIONALPHA\nfloat refractionLOD=getLodFromAlphaG(vRefractionMicrosurfaceInfos.x,alphaG,NdotVUnclamped);\n#else\nfloat refractionLOD=getLodFromAlphaG(vRefractionMicrosurfaceInfos.x,alphaG,1.0);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nrefractionLOD=refractionLOD*vRefractionMicrosurfaceInfos.y+vRefractionMicrosurfaceInfos.z;\n#ifdef LODINREFRACTIONALPHA\n\n\n\n\n\n\n\n\n\nfloat automaticRefractionLOD=UNPACK_LOD(sampleRefraction(refractionSampler,refractionCoords).a);\nfloat requestedRefractionLOD=max(automaticRefractionLOD,refractionLOD);\n#else\nfloat requestedRefractionLOD=refractionLOD;\n#endif\nenvironmentRefraction=sampleRefractionLod(refractionSampler,refractionCoords,requestedRefractionLOD).rgb;\n#else\nfloat lodRefractionNormalized=clamp(refractionLOD/log2(vRefractionMicrosurfaceInfos.x),0.,1.);\nfloat lodRefractionNormalizedDoubled=lodRefractionNormalized*2.0;\nvec3 environmentRefractionMid=sampleRefraction(refractionSampler,refractionCoords).rgb;\nif(lodRefractionNormalizedDoubled<1.0){\nenvironmentRefraction=mix(\nsampleRefraction(refractionSamplerHigh,refractionCoords).rgb,\nenvironmentRefractionMid,\nlodRefractionNormalizedDoubled\n);\n}else{\nenvironmentRefraction=mix(\nenvironmentRefractionMid,\nsampleRefraction(refractionSamplerLow,refractionCoords).rgb,\nlodRefractionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef GAMMAREFRACTION\nenvironmentRefraction=toLinearSpace(environmentRefraction.rgb);\n#endif\n\nenvironmentRefraction*=vRefractionInfos.x;\n#endif\n\n#ifdef REFLECTION\nvec3 environmentRadiance=vec3(0.,0.,0.);\nvec3 environmentIrradiance=vec3(0.,0.,0.);\nvec3 reflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\n\n#ifdef REFLECTIONMAP_3D\nvec3 reflectionCoords=reflectionVector;\n#else\nvec2 reflectionCoords=reflectionVector.xy;\n#ifdef REFLECTIONMAP_PROJECTION\nreflectionCoords/=reflectionVector.z;\n#endif\nreflectionCoords.y=1.0-reflectionCoords.y;\n#endif\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nfloat reflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,alphaG,NdotVUnclamped);\n#else\nfloat reflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,alphaG,1.);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nreflectionLOD=reflectionLOD*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\n#ifdef LODINREFLECTIONALPHA\n\n\n\n\n\n\n\n\n\nfloat automaticReflectionLOD=UNPACK_LOD(sampleReflection(reflectionSampler,reflectionCoords).a);\nfloat requestedReflectionLOD=max(automaticReflectionLOD,reflectionLOD);\n#else\nfloat requestedReflectionLOD=reflectionLOD;\n#endif\nenvironmentRadiance=sampleReflectionLod(reflectionSampler,reflectionCoords,requestedReflectionLOD).rgb;\n#else\nfloat lodReflectionNormalized=clamp(reflectionLOD/log2(vReflectionMicrosurfaceInfos.x),0.,1.);\nfloat lodReflectionNormalizedDoubled=lodReflectionNormalized*2.0;\nvec3 environmentSpecularMid=sampleReflection(reflectionSampler,reflectionCoords).rgb;\nif(lodReflectionNormalizedDoubled<1.0){\nenvironmentRadiance=mix(\nsampleReflection(reflectionSamplerHigh,reflectionCoords).rgb,\nenvironmentSpecularMid,\nlodReflectionNormalizedDoubled\n);\n}else{\nenvironmentRadiance=mix(\nenvironmentSpecularMid,\nsampleReflection(reflectionSamplerLow,reflectionCoords).rgb,\nlodReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef GAMMAREFLECTION\nenvironmentRadiance=toLinearSpace(environmentRadiance.rgb);\n#endif\n\n#ifdef USESPHERICALFROMREFLECTIONMAP\n#if defined(NORMAL) && defined(USESPHERICALINVERTEX)\nenvironmentIrradiance=vEnvironmentIrradiance;\n#else\nvec3 irradianceVector=vec3(reflectionMatrix*vec4(normalW,0)).xyz;\n#ifdef REFLECTIONMAP_OPPOSITEZ\nirradianceVector.z*=-1.0;\n#endif\nenvironmentIrradiance=environmentIrradianceJones(irradianceVector);\n#endif\n#endif\n\nenvironmentRadiance*=vReflectionInfos.x;\nenvironmentRadiance*=vReflectionColor.rgb;\nenvironmentIrradiance*=vReflectionColor.rgb;\n#endif\n\n\n\nfloat reflectance=max(max(surfaceReflectivityColor.r,surfaceReflectivityColor.g),surfaceReflectivityColor.b);\nfloat reflectance90=fresnelGrazingReflectance(reflectance);\nvec3 specularEnvironmentR0=surfaceReflectivityColor.rgb;\nvec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;\n\nvec3 diffuseBase=vec3(0.,0.,0.);\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#ifdef LIGHTMAP\nvec3 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset).rgb*vLightmapInfos.y;\n#endif\nlightingInfo info;\nfloat shadow=1.; \nfloat NdotL=-1.;\n#include<lightFragment>[0..maxSimultaneousLights]\n\n#if defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\n\nvec2 brdfSamplerUV=vec2(NdotV,roughness);\n\nvec4 environmentBrdf=texture2D(environmentBrdfSampler,brdfSamplerUV);\nvec3 specularEnvironmentReflectance=specularEnvironmentR0*environmentBrdf.x+environmentBrdf.y;\n#ifdef RADIANCEOCCLUSION\n#ifdef AMBIENTINGRAYSCALE\nfloat ambientMonochrome=ambientOcclusionColor.r;\n#else\nfloat ambientMonochrome=getLuminance(ambientOcclusionColor);\n#endif\nfloat seo=environmentRadianceOcclusion(ambientMonochrome,NdotVUnclamped);\nspecularEnvironmentReflectance*=seo;\n#endif\n#ifdef HORIZONOCCLUSION\n#ifdef BUMP\n#ifdef REFLECTIONMAP_3D\nfloat eho=environmentHorizonOcclusion(reflectionCoords,normalW);\nspecularEnvironmentReflectance*=eho;\n#endif\n#endif\n#endif\n#else\n\nvec3 specularEnvironmentReflectance=fresnelSchlickEnvironmentGGX(NdotV,specularEnvironmentR0,specularEnvironmentR90,sqrt(microSurface));\n#endif\n\n#ifdef REFRACTION\nvec3 refractance=vec3(0.0,0.0,0.0);\nvec3 transmission=vec3(1.0,1.0,1.0);\n#ifdef LINKREFRACTIONTOTRANSPARENCY\n\ntransmission*=(1.0-alpha);\n\n\nvec3 mixedAlbedo=surfaceAlbedo;\nfloat maxChannel=max(max(mixedAlbedo.r,mixedAlbedo.g),mixedAlbedo.b);\nvec3 tint=clamp(maxChannel*mixedAlbedo,0.0,1.0);\n\nsurfaceAlbedo*=alpha;\n\nenvironmentIrradiance*=alpha;\n\nenvironmentRefraction*=tint;\n\nalpha=1.0;\n#endif\n\nvec3 bounceSpecularEnvironmentReflectance=(2.0*specularEnvironmentReflectance)/(1.0+specularEnvironmentReflectance);\nspecularEnvironmentReflectance=mix(bounceSpecularEnvironmentReflectance,specularEnvironmentReflectance,alpha);\n\ntransmission*=1.0-specularEnvironmentReflectance;\n\nrefractance=transmission;\n#endif\n\n\n\n\nsurfaceAlbedo.rgb=(1.-reflectance)*surfaceAlbedo.rgb;\n\nvec3 finalDiffuse=diffuseBase;\nfinalDiffuse.rgb+=vAmbientColor;\nfinalDiffuse*=surfaceAlbedo.rgb;\nfinalDiffuse=max(finalDiffuse,0.0);\n\n#ifdef REFLECTION\nvec3 finalIrradiance=environmentIrradiance;\nfinalIrradiance*=surfaceAlbedo.rgb;\n#endif\n\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase;\nfinalSpecular=max(finalSpecular,0.0);\n\nvec3 finalSpecularScaled=finalSpecular*vLightingIntensity.x*vLightingIntensity.w;\n#endif\n\n#ifdef REFLECTION\nvec3 finalRadiance=environmentRadiance;\nfinalRadiance*=specularEnvironmentReflectance;\n\nvec3 finalRadianceScaled=finalRadiance*vLightingIntensity.z;\n#endif\n\n#ifdef REFRACTION\nvec3 finalRefraction=environmentRefraction;\nfinalRefraction*=refractance;\n#endif\n\nvec3 finalEmissive=vEmissiveColor;\n#ifdef EMISSIVE\nvec3 emissiveColorTex=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb;\nfinalEmissive*=toLinearSpace(emissiveColorTex.rgb);\nfinalEmissive*=vEmissiveInfos.y;\n#endif\n\n#ifdef ALPHABLEND\nfloat luminanceOverAlpha=0.0;\n#if defined(REFLECTION) && defined(RADIANCEOVERALPHA)\nluminanceOverAlpha+=getLuminance(finalRadianceScaled);\n#endif\n#if defined(SPECULARTERM) && defined(SPECULAROVERALPHA)\nluminanceOverAlpha+=getLuminance(finalSpecularScaled);\n#endif\n#if defined(RADIANCEOVERALPHA) || defined(SPECULAROVERALPHA)\nalpha=clamp(alpha+luminanceOverAlpha*luminanceOverAlpha,0.,1.);\n#endif\n#endif\n\n\n\nvec4 finalColor=vec4(finalDiffuse*ambientOcclusionColor*vLightingIntensity.x +\n#ifdef REFLECTION\nfinalIrradiance*ambientOcclusionColor*vLightingIntensity.z +\n#endif\n#ifdef SPECULARTERM\n\n\nfinalSpecularScaled +\n#endif\n#ifdef REFLECTION\n\n\nfinalRadianceScaled +\n#endif\n#ifdef REFRACTION\nfinalRefraction*vLightingIntensity.z +\n#endif\nfinalEmissive*vLightingIntensity.y,\nalpha);\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\nfinalColor.rgb*=lightmapColor;\n#else\nfinalColor.rgb+=lightmapColor;\n#endif\n#endif\n#endif\n\nfinalColor=max(finalColor,0.0);\n#include<logDepthFragment>\n#include<fogFragment>(color,finalColor)\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n\n\nfinalColor.rgb=clamp(finalColor.rgb,0.,30.0);\n#else\n\nfinalColor=applyImageProcessing(finalColor);\n#endif\n#ifdef PREMULTIPLYALPHA\n\nfinalColor.rgb*=finalColor.a;\n#endif\ngl_FragColor=finalColor;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n}",spritesVertexShader:"\nattribute vec4 position;\nattribute vec4 options;\nattribute vec4 cellInfo;\nattribute vec4 color;\n\nuniform vec2 textureInfos;\nuniform mat4 view;\nuniform mat4 projection;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\n#include<fogVertexDeclaration>\nvoid main(void) { \nvec3 viewPos=(view*vec4(position.xyz,1.0)).xyz; \nvec2 cornerPos;\nfloat angle=position.w;\nvec2 size=vec2(options.x,options.y);\nvec2 offset=options.zw;\nvec2 uvScale=textureInfos.xy;\ncornerPos=vec2(offset.x-0.5,offset.y-0.5)*size;\n\nvec3 rotatedCorner;\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\n\nviewPos+=rotatedCorner;\ngl_Position=projection*vec4(viewPos,1.0); \n\nvColor=color;\n\nvec2 uvOffset=vec2(abs(offset.x-cellInfo.x),1.0-abs(offset.y-cellInfo.y));\nvUV=(uvOffset+cellInfo.zw)*uvScale;\n\n#ifdef FOG\nvFogDistance=viewPos;\n#endif\n}",spritesPixelShader:"uniform bool alphaTest;\nvarying vec4 vColor;\n\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\nvec4 color=texture2D(diffuseSampler,vUV);\nif (alphaTest) \n{\nif (color.a<0.95)\ndiscard;\n}\ncolor*=vColor;\n#include<fogFragment>\ngl_FragColor=color;\n}",particlesVertexShader:"\nattribute vec3 position;\nattribute vec4 color;\nattribute vec4 options;\nattribute float cellIndex;\n\nuniform mat4 view;\nuniform mat4 projection;\nuniform vec3 particlesInfos; \n\nvarying vec2 vUV;\nvarying vec4 vColor;\n#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nuniform mat4 invView;\nvarying float fClipDistance;\n#endif\nvoid main(void) { \nvec3 viewPos=(view*vec4(position,1.0)).xyz; \nvec3 cornerPos;\nfloat size=options.y;\nfloat angle=options.x;\nvec2 offset=options.zw;\ncornerPos=vec3(offset.x-0.5,offset.y-0.5,0.)*size;\n\nvec3 rotatedCorner;\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\n\nviewPos+=rotatedCorner;\ngl_Position=projection*vec4(viewPos,1.0); \nvColor=color;\n#ifdef ANIMATESHEET\nfloat rowOffset=floor(cellIndex/particlesInfos.z);\nfloat columnOffset=cellIndex-rowOffset*particlesInfos.z;\nvec2 uvScale=particlesInfos.xy;\nvec2 uvOffset=vec2(offset.x ,1.0-offset.y);\nvUV=(uvOffset+vec2(columnOffset,rowOffset))*uvScale;\n#else\nvUV=offset;\n#endif\n\n#ifdef CLIPPLANE\nvec4 worldPos=invView*vec4(viewPos,1.0);\nfClipDistance=dot(worldPos,vClipPlane);\n#endif\n}",particlesPixelShader:"\nvarying vec2 vUV;\nvarying vec4 vColor;\nuniform vec4 textureMask;\nuniform sampler2D diffuseSampler;\n#ifdef CLIPPLANE\nvarying float fClipDistance;\n#endif\nvoid main(void) {\n#ifdef CLIPPLANE\nif (fClipDistance>0.0)\ndiscard;\n#endif\nvec4 baseColor=texture2D(diffuseSampler,vUV);\ngl_FragColor=(baseColor*textureMask+(vec4(1.,1.,1.,1.)-textureMask))*vColor;\n}",gpuRenderParticlesVertexShader:"#version 300 es\n\nin vec3 position;\nin float age;\nin float life;\nin vec3 velocity;\nvoid main() {\ngl_PointSize=1.0;\ngl_Position=vec4(position,1.0);\n}",gpuRenderParticlesPixelShader:"void main() {\ngl_FragColor=vec4(1.0);\n}\n",gpuUpdateParticlesVertexShader:"#version 300 es\nuniform float timeDelta;\n\nin vec3 position;\nin float age;\nin float life;\nin vec3 velocity;\n\nout vec3 outPosition;\nout float outAge;\nout float outLife;\nout vec3 outVelocity;\nvoid main() {\nif (age>=life) {\n\noutPosition=vec3(0,0,0);\n\noutAge=0.0;\noutLife=life;\n\noutVelocity=vec3(0,1,0);\n} else {\noutPosition=position+velocity*timeDelta;\noutAge=age+timeDelta;\noutLife=life;\noutVelocity=velocity;\n}\n}",gpuUpdateParticlesPixelShader:"#version 300 es\nvoid main() {\ndiscard;\n}\n",colorVertexShader:"\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n\nuniform mat4 viewProjection;\nuniform mat4 world;\n\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\nvoid main(void) {\nmat4 finalWorld=world;\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n}",colorPixelShader:"#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#else\nuniform vec4 color;\n#endif\nvoid main(void) {\n#ifdef VERTEXCOLOR\ngl_FragColor=vColor;\n#else\ngl_FragColor=color;\n#endif\n}",postprocessVertexShader:"\nattribute vec2 position;\nuniform vec2 scale;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nvUV=(position*madd+madd)*scale;\ngl_Position=vec4(position,0.0,1.0);\n}",passPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nvoid main(void) \n{\ngl_FragColor=texture2D(textureSampler,vUV);\n}",shadowMapVertexShader:"\nattribute vec3 position;\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nuniform vec2 biasAndScale;\nuniform vec2 depthValues;\nvarying float vDepthMetric;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvDepthMetric=((gl_Position.z+depthValues.x)/(depthValues.y))+biasAndScale.x;\n#ifdef ALPHATEST\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",shadowMapPixelShader:"#ifndef FLOAT\nvec4 pack(float depth)\n{\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(depth*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\n#endif\nvarying float vDepthMetric;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\nuniform vec2 biasAndScale;\nuniform vec2 depthValues;\nvoid main(void)\n{\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\nfloat depth=vDepthMetric;\n#ifdef ESM\ndepth=clamp(exp(-min(87.,biasAndScale.y*depth)),0.,1.);\n#endif\n#ifdef FLOAT\ngl_FragColor=vec4(depth,1.0,1.0,1.0);\n#else\ngl_FragColor=pack(depth);\n#endif\n}",depthBoxBlurPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec2 screenSize;\nvoid main(void)\n{\nvec4 colorDepth=vec4(0.0);\nfor (int x=-OFFSET; x<=OFFSET; x++)\nfor (int y=-OFFSET; y<=OFFSET; y++)\ncolorDepth+=texture2D(textureSampler,vUV+vec2(x,y)/screenSize);\ngl_FragColor=(colorDepth/float((OFFSET*2+1)*(OFFSET*2+1)));\n}",proceduralVertexShader:"\nattribute vec2 position;\n\nvarying vec2 vPosition;\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nvPosition=position;\nvUV=position*madd+madd;\ngl_Position=vec4(position,0.0,1.0);\n}",depthVertexShader:"\nattribute vec3 position;\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nuniform vec2 depthValues;\n#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\nvarying float vDepthMetric;\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\nvDepthMetric=((gl_Position.z+depthValues.x)/(depthValues.y));\n#if defined(ALPHATEST) || defined(BASIC_RENDER)\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",depthPixelShader:"#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\nvarying float vDepthMetric;\nvoid main(void)\n{\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\ngl_FragColor=vec4(vDepthMetric,vDepthMetric*vDepthMetric,0.0,1.0);\n}",ssaoPixelShader:"\nuniform sampler2D textureSampler;\nvarying vec2 vUV;\n#ifdef SSAO\nuniform sampler2D randomSampler;\nuniform float randTextureTiles;\nuniform float samplesFactor;\nuniform vec3 sampleSphere[SAMPLES];\nuniform float totalStrength;\nuniform float radius;\nuniform float area;\nuniform float fallOff;\nuniform float base;\nvec3 normalFromDepth(float depth,vec2 coords)\n{\nvec2 offset1=vec2(0.0,radius);\nvec2 offset2=vec2(radius,0.0);\nfloat depth1=texture2D(textureSampler,coords+offset1).r;\nfloat depth2=texture2D(textureSampler,coords+offset2).r;\nvec3 p1=vec3(offset1,depth1-depth);\nvec3 p2=vec3(offset2,depth2-depth);\nvec3 normal=cross(p1,p2);\nnormal.z=-normal.z;\nreturn normalize(normal);\n}\nvoid main()\n{\nvec3 random=normalize(texture2D(randomSampler,vUV*randTextureTiles).rgb);\nfloat depth=texture2D(textureSampler,vUV).r;\nvec3 position=vec3(vUV,depth);\nvec3 normal=normalFromDepth(depth,vUV);\nfloat radiusDepth=radius/depth;\nfloat occlusion=0.0;\nvec3 ray;\nvec3 hemiRay;\nfloat occlusionDepth;\nfloat difference;\nfor (int i=0; i<SAMPLES; i++)\n{\nray=radiusDepth*reflect(sampleSphere[i],random);\nhemiRay=position+sign(dot(ray,normal))*ray;\nocclusionDepth=texture2D(textureSampler,clamp(hemiRay.xy,vec2(0.001,0.001),vec2(0.999,0.999))).r;\ndifference=depth-occlusionDepth;\nocclusion+=step(fallOff,difference)*(1.0-smoothstep(fallOff,area,difference));\n}\nfloat ao=1.0-totalStrength*occlusion*samplesFactor;\nfloat result=clamp(ao+base,0.0,1.0);\ngl_FragColor.r=result;\ngl_FragColor.g=result;\ngl_FragColor.b=result;\ngl_FragColor.a=1.0;\n}\n#endif\n",ssao2PixelShader:"\nprecision highp float;\nuniform sampler2D textureSampler;\nuniform float near;\nuniform float far;\nuniform float radius;\nvarying vec2 vUV;\nfloat perspectiveDepthToViewZ( const in float invClipZ,const in float near,const in float far ) {\nreturn ( near*far )/( ( far-near )*invClipZ-far );\n}\nfloat viewZToPerspectiveDepth( const in float viewZ,const in float near,const in float far ) {\nreturn ( near*far/viewZ+far)/( far-near );\n}\nfloat viewZToOrthographicDepth( const in float viewZ,const in float near,const in float far ) {\nreturn ( viewZ+near )/( near-far );\n}\n#ifdef SSAO\nuniform sampler2D randomSampler;\nuniform sampler2D normalSampler;\nuniform float randTextureTiles;\nuniform float samplesFactor;\nuniform vec3 sampleSphere[SAMPLES];\nuniform float totalStrength;\nuniform float base;\nuniform float xViewport;\nuniform float yViewport;\nuniform float maxZ;\nuniform float minZAspect;\nuniform vec2 texelSize;\nuniform mat4 projection;\nvoid main()\n{\nvec3 random=texture2D(randomSampler,vUV*randTextureTiles).rgb;\nfloat depth=texture2D(textureSampler,vUV).r;\nfloat depthSign=depth/abs(depth);\ndepth=depth*depthSign;\nvec3 normal=texture2D(normalSampler,vUV).rgb; \nfloat occlusion=0.0;\nfloat correctedRadius=min(radius,minZAspect*depth/near);\nvec3 vViewRay=vec3((vUV.x*2.0-1.0)*xViewport,(vUV.y*2.0-1.0)*yViewport,depthSign);\nvec3 origin=vViewRay*depth;\nvec3 rvec=random*2.0-1.0;\nrvec.z=0.0;\nvec3 tangent=normalize(rvec-normal*dot(rvec,normal));\nvec3 bitangent=cross(normal,tangent);\nmat3 tbn=mat3(tangent,bitangent,normal);\nfloat difference;\nif (depth>maxZ) {\ngl_FragColor=vec4(1.0,1.0,1.0,1.0);\nreturn;\n}\nfor (int i=0; i<SAMPLES; ++i) {\n\nvec3 samplePosition=tbn*sampleSphere[i];\nsamplePosition=samplePosition*correctedRadius+origin;\n\nvec4 offset=vec4(samplePosition,1.0);\noffset=projection*offset;\noffset.xyz/=offset.w;\noffset.xy=offset.xy*0.5+0.5;\nif (offset.x<0.0 || offset.y<0.0 || offset.x>1.0 || offset.y>1.0) {\ncontinue;\n}\n\nfloat sampleDepth=abs(texture2D(textureSampler,offset.xy).r);\n\nfloat rangeCheck=abs(depth-sampleDepth)<correctedRadius ? 1.0 : 0.0;\ndifference=depthSign*samplePosition.z-sampleDepth;\n\nocclusion+=(difference>=1e-5 ? 1.0 : 0.0)*rangeCheck;\n}\n\nfloat ao=1.0-totalStrength*occlusion*samplesFactor;\nfloat result=clamp(ao+base,0.0,1.0);\ngl_FragColor=vec4(vec3(result),1.0);\n}\n#endif\n#ifdef BILATERAL_BLUR\nuniform sampler2D depthSampler;\nuniform float outSize;\nuniform float samplerOffsets[SAMPLES];\nvec4 blur9(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.3846153846)*direction;\nvec2 off2=vec2(3.2307692308)*direction;\ncolor+=texture2D(image,uv)*0.2270270270;\ncolor+=texture2D(image,uv+(off1/resolution))*0.3162162162;\ncolor+=texture2D(image,uv-(off1/resolution))*0.3162162162;\ncolor+=texture2D(image,uv+(off2/resolution))*0.0702702703;\ncolor+=texture2D(image,uv-(off2/resolution))*0.0702702703;\nreturn color;\n}\nvec4 blur13(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.411764705882353)*direction;\nvec2 off2=vec2(3.2941176470588234)*direction;\nvec2 off3=vec2(5.176470588235294)*direction;\ncolor+=texture2D(image,uv)*0.1964825501511404;\ncolor+=texture2D(image,uv+(off1/resolution))*0.2969069646728344;\ncolor+=texture2D(image,uv-(off1/resolution))*0.2969069646728344;\ncolor+=texture2D(image,uv+(off2/resolution))*0.09447039785044732;\ncolor+=texture2D(image,uv-(off2/resolution))*0.09447039785044732;\ncolor+=texture2D(image,uv+(off3/resolution))*0.010381362401148057;\ncolor+=texture2D(image,uv-(off3/resolution))*0.010381362401148057;\nreturn color;\n}\nvec4 blur13Bilateral(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.411764705882353)*direction;\nvec2 off2=vec2(3.2941176470588234)*direction;\nvec2 off3=vec2(5.176470588235294)*direction;\nfloat compareDepth=abs(texture2D(depthSampler,uv).r);\nfloat sampleDepth;\nfloat weight;\nfloat weightSum=30.0;\ncolor+=texture2D(image,uv)*30.0;\nsampleDepth=abs(texture2D(depthSampler,uv+(off1/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off1/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off1/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off1/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv+(off2/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off2/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off2/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off2/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv+(off3/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off3/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off3/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off3/resolution))*weight;\nreturn color/weightSum;\n}\nvoid main()\n{\n#if EXPENSIVE\nfloat compareDepth=abs(texture2D(depthSampler,vUV).r);\nfloat texelsize=1.0/outSize;\nfloat result=0.0;\nfloat weightSum=0.0;\nfor (int i=0; i<SAMPLES; ++i)\n{\n#ifdef BILATERAL_BLUR_H\nvec2 direction=vec2(1.0,0.0);\nvec2 sampleOffset=vec2(texelsize*samplerOffsets[i],0.0);\n#else\nvec2 direction=vec2(0.0,1.0);\nvec2 sampleOffset=vec2(0.0,texelsize*samplerOffsets[i]);\n#endif\nvec2 samplePos=vUV+sampleOffset;\nfloat sampleDepth=abs(texture2D(depthSampler,samplePos).r);\nfloat weight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30000.0);\nresult+=texture2D(textureSampler,samplePos).r*weight;\nweightSum+=weight;\n}\nresult/=weightSum;\ngl_FragColor.rgb=vec3(result);\ngl_FragColor.a=1.0;\n#else\nvec4 color;\n#ifdef BILATERAL_BLUR_H\nvec2 direction=vec2(1.0,0.0);\ncolor=blur13Bilateral(textureSampler,vUV,outSize,direction);\n#else\nvec2 direction=vec2(0.0,1.0);\ncolor=blur13Bilateral(textureSampler,vUV,outSize,direction);\n#endif\ngl_FragColor.rgb=vec3(color.r);\ngl_FragColor.a=1.0;\n#endif\n}\n#endif\n",ssaoCombinePixelShader:"uniform sampler2D textureSampler;\nuniform sampler2D originalColor;\nvarying vec2 vUV;\nvoid main(void) {\nvec4 ssaoColor=texture2D(textureSampler,vUV);\nvec4 sceneColor=texture2D(originalColor,vUV);\ngl_FragColor=sceneColor*ssaoColor;\n}\n",chromaticAberrationPixelShader:"\nuniform sampler2D textureSampler; \n\nuniform float chromatic_aberration;\nuniform float screen_width;\nuniform float screen_height;\n\nvarying vec2 vUV;\nvoid main(void)\n{\nvec2 centered_screen_pos=vec2(vUV.x-0.5,vUV.y-0.5);\nfloat radius2=centered_screen_pos.x*centered_screen_pos.x\n+centered_screen_pos.y*centered_screen_pos.y;\nfloat radius=sqrt(radius2);\nvec4 original=texture2D(textureSampler,vUV);\nif (chromatic_aberration>0.0) {\n\nvec3 ref_indices=vec3(-0.3,0.0,0.3);\nfloat ref_shiftX=chromatic_aberration*radius*17.0/screen_width;\nfloat ref_shiftY=chromatic_aberration*radius*17.0/screen_height;\n\nvec2 ref_coords_r=vec2(vUV.x+ref_indices.r*ref_shiftX,vUV.y+ref_indices.r*ref_shiftY*0.5);\nvec2 ref_coords_g=vec2(vUV.x+ref_indices.g*ref_shiftX,vUV.y+ref_indices.g*ref_shiftY*0.5);\nvec2 ref_coords_b=vec2(vUV.x+ref_indices.b*ref_shiftX,vUV.y+ref_indices.b*ref_shiftY*0.5);\noriginal.r=texture2D(textureSampler,ref_coords_r).r;\noriginal.g=texture2D(textureSampler,ref_coords_g).g;\noriginal.b=texture2D(textureSampler,ref_coords_b).b;\n}\ngl_FragColor=original;\n}",lensHighlightsPixelShader:"\nuniform sampler2D textureSampler; \n\nuniform float gain;\nuniform float threshold;\nuniform float screen_width;\nuniform float screen_height;\n\nvarying vec2 vUV;\n\nvec4 highlightColor(vec4 color) {\nvec4 highlight=color;\nfloat luminance=dot(highlight.rgb,vec3(0.2125,0.7154,0.0721));\nfloat lum_threshold;\nif (threshold>1.0) { lum_threshold=0.94+0.01*threshold; }\nelse { lum_threshold=0.5+0.44*threshold; }\nluminance=clamp((luminance-lum_threshold)*(1.0/(1.0-lum_threshold)),0.0,1.0);\nhighlight*=luminance*gain;\nhighlight.a=1.0;\nreturn highlight;\n}\nvoid main(void)\n{\nvec4 original=texture2D(textureSampler,vUV);\n\nif (gain == -1.0) {\ngl_FragColor=vec4(0.0,0.0,0.0,1.0);\nreturn;\n}\nfloat w=2.0/screen_width;\nfloat h=2.0/screen_height;\nfloat weight=1.0;\n\nvec4 blurred=vec4(0.0,0.0,0.0,0.0);\n#ifdef PENTAGON\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.84*w,0.43*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.48*w,-1.29*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.61*w,1.51*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.55*w,-0.74*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.71*w,-0.52*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.94*w,1.59*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.40*w,-1.87*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.62*w,1.16*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.09*w,0.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.46*w,-1.71*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.08*w,2.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.85*w,-1.89*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.89*w,0.16*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.29*w,1.88*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.40*w,-2.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.54*w,2.26*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.60*w,-0.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.31*w,-1.30*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.83*w,2.53*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.12*w,-2.48*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.60*w,1.11*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.82*w,0.99*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.50*w,-2.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.85*w,3.33*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.94*w,-1.92*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.27*w,-0.53*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.95*w,2.48*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.23*w,-3.04*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.17*w,2.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.97*w,-0.04*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.25*w,-2.00*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.31*w,3.08*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.94*w,-2.59*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.37*w,0.64*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.13*w,1.93*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.03*w,-3.65*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.60*w,3.17*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.14*w,-1.19*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.00*w,-1.19*h)));\n#else\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.85*w,0.36*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.52*w,-1.14*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.46*w,1.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.46*w,-0.83*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.79*w,-0.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.11*w,1.62*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.29*w,-2.07*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.69*w,1.39*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.28*w,0.12*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.65*w,-1.69*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.08*w,2.44*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.63*w,-1.90*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.55*w,0.31*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.13*w,1.52*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.56*w,-2.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.38*w,2.34*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.64*w,-0.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.53*w,-1.21*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.06*w,2.63*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.00*w,-2.69*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.59*w,1.32*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.82*w,0.78*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.57*w,-2.50*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.54*w,2.93*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.39*w,-1.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.01*w,-0.28*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.04*w,2.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.02*w,-3.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.09*w,2.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.07*w,-0.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.44*w,-1.90*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.52*w,3.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.68*w,-2.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.01*w,0.79*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.76*w,1.46*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.05*w,-2.94*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.21*w,2.88*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.84*w,-1.30*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.98*w,-0.96*h)));\n#endif\nblurred/=39.0;\ngl_FragColor=blurred;\n\n}",depthOfFieldPixelShader:"\n\n\n\n\nuniform sampler2D textureSampler;\nuniform sampler2D highlightsSampler;\nuniform sampler2D depthSampler;\nuniform sampler2D grainSampler;\n\nuniform float grain_amount;\nuniform bool blur_noise;\nuniform float screen_width;\nuniform float screen_height;\nuniform float distortion;\nuniform bool dof_enabled;\n\nuniform float screen_distance; \nuniform float aperture;\nuniform float darken;\nuniform float edge_blur;\nuniform bool highlights;\n\nuniform float near;\nuniform float far;\n\nvarying vec2 vUV;\n\n#define PI 3.14159265\n#define TWOPI 6.28318530\n#define inverse_focal_length 0.1 \n\nvec2 centered_screen_pos;\nvec2 distorted_coords;\nfloat radius2;\nfloat radius;\n\nvec2 rand(vec2 co)\n{\nfloat noise1=(fract(sin(dot(co,vec2(12.9898,78.233)))*43758.5453));\nfloat noise2=(fract(sin(dot(co,vec2(12.9898,78.233)*2.0))*43758.5453));\nreturn clamp(vec2(noise1,noise2),0.0,1.0);\n}\n\nvec2 getDistortedCoords(vec2 coords) {\nif (distortion == 0.0) { return coords; }\nvec2 direction=1.0*normalize(centered_screen_pos);\nvec2 dist_coords=vec2(0.5,0.5);\ndist_coords.x=0.5+direction.x*radius2*1.0;\ndist_coords.y=0.5+direction.y*radius2*1.0;\nfloat dist_amount=clamp(distortion*0.23,0.0,1.0);\ndist_coords=mix(coords,dist_coords,dist_amount);\nreturn dist_coords;\n}\n\nfloat sampleScreen(inout vec4 color,const in vec2 offset,const in float weight) {\n\nvec2 coords=distorted_coords;\nfloat angle=rand(coords*100.0).x*TWOPI;\ncoords+=vec2(offset.x*cos(angle)-offset.y*sin(angle),offset.x*sin(angle)+offset.y*cos(angle));\ncolor+=texture2D(textureSampler,coords)*weight;\nreturn weight;\n}\n\nfloat getBlurLevel(float size) {\nreturn min(3.0,ceil(size/1.0));\n}\n\nvec4 getBlurColor(float size) {\nvec4 col=texture2D(textureSampler,distorted_coords);\nif (size == 0.0) { return col; }\n\n\nfloat blur_level=getBlurLevel(size);\nfloat w=(size/screen_width);\nfloat h=(size/screen_height);\nfloat total_weight=1.0;\nvec2 sample_coords;\ntotal_weight+=sampleScreen(col,vec2(-0.50*w,0.24*h),0.93);\ntotal_weight+=sampleScreen(col,vec2(0.30*w,-0.75*h),0.90);\ntotal_weight+=sampleScreen(col,vec2(0.36*w,0.96*h),0.87);\ntotal_weight+=sampleScreen(col,vec2(-1.08*w,-0.55*h),0.85);\ntotal_weight+=sampleScreen(col,vec2(1.33*w,-0.37*h),0.83);\ntotal_weight+=sampleScreen(col,vec2(-0.82*w,1.31*h),0.80);\ntotal_weight+=sampleScreen(col,vec2(-0.31*w,-1.67*h),0.78);\ntotal_weight+=sampleScreen(col,vec2(1.47*w,1.11*h),0.76);\ntotal_weight+=sampleScreen(col,vec2(-1.97*w,0.19*h),0.74);\ntotal_weight+=sampleScreen(col,vec2(1.42*w,-1.57*h),0.72);\nif (blur_level>1.0) {\ntotal_weight+=sampleScreen(col,vec2(0.01*w,2.25*h),0.70);\ntotal_weight+=sampleScreen(col,vec2(-1.62*w,-1.74*h),0.67);\ntotal_weight+=sampleScreen(col,vec2(2.49*w,0.20*h),0.65);\ntotal_weight+=sampleScreen(col,vec2(-2.07*w,1.61*h),0.63);\ntotal_weight+=sampleScreen(col,vec2(0.46*w,-2.70*h),0.61);\ntotal_weight+=sampleScreen(col,vec2(1.55*w,2.40*h),0.59);\ntotal_weight+=sampleScreen(col,vec2(-2.88*w,-0.75*h),0.56);\ntotal_weight+=sampleScreen(col,vec2(2.73*w,-1.44*h),0.54);\ntotal_weight+=sampleScreen(col,vec2(-1.08*w,3.02*h),0.52);\ntotal_weight+=sampleScreen(col,vec2(-1.28*w,-3.05*h),0.49);\n}\nif (blur_level>2.0) {\ntotal_weight+=sampleScreen(col,vec2(3.11*w,1.43*h),0.46);\ntotal_weight+=sampleScreen(col,vec2(-3.36*w,1.08*h),0.44);\ntotal_weight+=sampleScreen(col,vec2(1.80*w,-3.16*h),0.41);\ntotal_weight+=sampleScreen(col,vec2(0.83*w,3.65*h),0.38);\ntotal_weight+=sampleScreen(col,vec2(-3.16*w,-2.19*h),0.34);\ntotal_weight+=sampleScreen(col,vec2(3.92*w,-0.53*h),0.31);\ntotal_weight+=sampleScreen(col,vec2(-2.59*w,3.12*h),0.26);\ntotal_weight+=sampleScreen(col,vec2(-0.20*w,-4.15*h),0.22);\ntotal_weight+=sampleScreen(col,vec2(3.02*w,3.00*h),0.15);\n}\ncol/=total_weight; \n\nif (darken>0.0) {\ncol.rgb*=clamp(0.3,1.0,1.05-size*0.5*darken);\n}\n\n\n\n\nreturn col;\n}\nvoid main(void)\n{\n\ncentered_screen_pos=vec2(vUV.x-0.5,vUV.y-0.5);\nradius2=centered_screen_pos.x*centered_screen_pos.x+centered_screen_pos.y*centered_screen_pos.y;\nradius=sqrt(radius2);\ndistorted_coords=getDistortedCoords(vUV); \nvec2 texels_coords=vec2(vUV.x*screen_width,vUV.y*screen_height); \nfloat depth=texture2D(depthSampler,distorted_coords).r; \nfloat distance=near+(far-near)*depth; \nvec4 color=texture2D(textureSampler,vUV); \n\n\nfloat coc=abs(aperture*(screen_distance*(inverse_focal_length-1.0/distance)-1.0));\n\nif (dof_enabled == false || coc<0.07) { coc=0.0; }\n\nfloat edge_blur_amount=0.0;\nif (edge_blur>0.0) {\nedge_blur_amount=clamp((radius*2.0-1.0+0.15*edge_blur)*1.5,0.0,1.0)*1.3;\n}\n\nfloat blur_amount=max(edge_blur_amount,coc);\n\nif (blur_amount == 0.0) {\ngl_FragColor=texture2D(textureSampler,distorted_coords);\n}\nelse {\n\ngl_FragColor=getBlurColor(blur_amount*1.7);\n\nif (highlights) {\ngl_FragColor.rgb+=clamp(coc,0.0,1.0)*texture2D(highlightsSampler,distorted_coords).rgb;\n}\nif (blur_noise) {\n\nvec2 noise=rand(distorted_coords)*0.01*blur_amount;\nvec2 blurred_coord=vec2(distorted_coords.x+noise.x,distorted_coords.y+noise.y);\ngl_FragColor=0.04*texture2D(textureSampler,blurred_coord)+0.96*gl_FragColor;\n}\n}\n\nif (grain_amount>0.0) {\nvec4 grain_color=texture2D(grainSampler,texels_coords*0.003);\ngl_FragColor.rgb+=(-0.5+grain_color.rgb)*0.30*grain_amount;\n}\n}\n",standardPixelShader:"uniform sampler2D textureSampler;\nvarying vec2 vUV;\n#if defined(PASS_POST_PROCESS)\nvoid main(void)\n{\nvec4 color=texture2D(textureSampler,vUV);\ngl_FragColor=color;\n}\n#endif\n#if defined(DOWN_SAMPLE_X4)\nuniform vec2 dsOffsets[16];\nvoid main(void)\n{\nvec4 average=vec4(0.0,0.0,0.0,0.0);\naverage=texture2D(textureSampler,vUV+dsOffsets[0]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[1]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[2]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[3]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[4]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[5]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[6]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[7]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[8]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[9]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[10]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[11]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[12]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[13]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[14]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[15]);\naverage/=16.0;\ngl_FragColor=average;\n}\n#endif\n#if defined(BRIGHT_PASS)\nuniform vec2 dsOffsets[4];\nuniform float brightThreshold;\nvoid main(void)\n{\nvec4 average=vec4(0.0,0.0,0.0,0.0);\naverage=texture2D(textureSampler,vUV+vec2(dsOffsets[0].x,dsOffsets[0].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[1].x,dsOffsets[1].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[2].x,dsOffsets[2].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[3].x,dsOffsets[3].y));\naverage*=0.25;\nfloat luminance=length(average.rgb);\nif (luminance<brightThreshold) {\naverage=vec4(0.0,0.0,0.0,1.0);\n}\ngl_FragColor=average;\n}\n#endif\n#if defined(TEXTURE_ADDER)\nuniform sampler2D otherSampler;\nuniform sampler2D lensSampler;\nuniform float exposure;\nvoid main(void)\n{\nvec3 colour=texture2D(textureSampler,vUV).rgb;\ncolour*=exposure;\nvec3 X=max(vec3(0.0,0.0,0.0),colour-0.004);\nvec3 retColor=(X*(6.2*X+0.5))/(X*(6.2*X+1.7)+0.06);\ncolour=retColor*retColor;\ncolour+=colour*texture2D(lensSampler,vUV).rgb;\nvec4 finalColor=vec4(colour.rgb,1.0)+texture2D(otherSampler,vUV);\ngl_FragColor=finalColor;\n}\n#endif\n#if defined(VLS)\n#define PI 3.1415926535897932384626433832795\nuniform mat4 shadowViewProjection;\nuniform mat4 lightWorld;\nuniform vec3 cameraPosition;\nuniform vec3 sunDirection;\nuniform vec3 sunColor;\nuniform vec2 depthValues;\nuniform float scatteringCoefficient;\nuniform float scatteringPower;\nuniform sampler2D shadowMapSampler;\nuniform sampler2D positionSampler;\nfloat computeScattering(float lightDotView)\n{\nfloat result=1.0-scatteringCoefficient*scatteringCoefficient;\nresult/=(4.0*PI*pow(1.0+scatteringCoefficient*scatteringCoefficient-(2.0*scatteringCoefficient)*lightDotView,1.5));\nreturn result;\n}\nvoid main(void)\n{\n\nvec3 worldPos=texture2D(positionSampler,vUV).rgb;\nvec3 startPosition=cameraPosition;\nvec3 rayVector=worldPos-startPosition;\nfloat rayLength=length(rayVector);\nvec3 rayDirection=rayVector/rayLength;\nfloat stepLength=rayLength/NB_STEPS;\nvec3 stepL=rayDirection*stepLength;\nvec3 currentPosition=startPosition;\nvec3 accumFog=vec3(0.0);\nfor (int i=0; i<int(NB_STEPS); i++)\n{\nvec4 worldInShadowCameraSpace=shadowViewProjection*vec4(currentPosition,1.0);\nfloat depthMetric=(worldInShadowCameraSpace.z+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depthMetric,0.0,1.0);\nworldInShadowCameraSpace.xyz/=worldInShadowCameraSpace.w;\nworldInShadowCameraSpace.xyz=0.5*worldInShadowCameraSpace.xyz+vec3(0.5);\nfloat shadowMapValue=texture2D(shadowMapSampler,worldInShadowCameraSpace.xy).r;\nif (shadowMapValue>shadowPixelDepth)\naccumFog+=sunColor*computeScattering(dot(rayDirection,sunDirection));\ncurrentPosition+=stepL;\n}\naccumFog/=NB_STEPS;\nvec3 color=accumFog*scatteringPower;\ngl_FragColor=vec4(color*exp(color) ,1.0);\n}\n#endif\n#if defined(VLSMERGE)\nuniform sampler2D originalSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(originalSampler,vUV)+texture2D(textureSampler,vUV);\n}\n#endif\n#if defined(LUMINANCE)\nuniform vec2 lumOffsets[4];\nvoid main()\n{\nfloat average=0.0;\nvec4 color=vec4(0.0);\nfloat maximum=-1e20;\nvec3 weight=vec3(0.299,0.587,0.114);\nfor (int i=0; i<4; i++)\n{\ncolor=texture2D(textureSampler,vUV+ lumOffsets[i]);\n\nfloat GreyValue=dot(color.rgb,vec3(0.33,0.33,0.33));\n\n#ifdef WEIGHTED_AVERAGE\nfloat GreyValue=dot(color.rgb,weight);\n#endif\n#ifdef BRIGHTNESS\nfloat GreyValue=max(color.r,max(color.g,color.b));\n#endif\n#ifdef HSL_COMPONENT\nfloat GreyValue=0.5*(max(color.r,max(color.g,color.b))+min(color.r,min(color.g,color.b)));\n#endif\n#ifdef MAGNITUDE\nfloat GreyValue=length(color.rgb);\n#endif\nmaximum=max(maximum,GreyValue);\naverage+=(0.25*log(1e-5+GreyValue));\n}\naverage=exp(average);\ngl_FragColor=vec4(average,maximum,0.0,1.0);\n}\n#endif\n#if defined(LUMINANCE_DOWN_SAMPLE)\nuniform vec2 dsOffsets[9];\nuniform float halfDestPixelSize;\n#ifdef FINAL_DOWN_SAMPLER\nvec4 pack(float value) {\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(value*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\n#endif\nvoid main()\n{\nvec4 color=vec4(0.0);\nfloat average=0.0;\nfor (int i=0; i<9; i++)\n{\ncolor=texture2D(textureSampler,vUV+vec2(halfDestPixelSize,halfDestPixelSize)+dsOffsets[i]);\naverage+=color.r;\n}\naverage/=9.0;\n#ifdef FINAL_DOWN_SAMPLER\ngl_FragColor=pack(average);\n#else\ngl_FragColor=vec4(average,average,0.0,1.0);\n#endif\n}\n#endif\n#if defined(HDR)\nuniform sampler2D textureAdderSampler;\nuniform float averageLuminance;\nvoid main()\n{\nvec4 color=texture2D(textureAdderSampler,vUV);\nvec4 adjustedColor=color/averageLuminance;\ncolor=adjustedColor;\ncolor.a=1.0;\ngl_FragColor=color;\n}\n#endif\n#if defined(LENS_FLARE)\n#define GHOSTS 3\nuniform sampler2D lensColorSampler;\nuniform float strength;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform vec2 resolution;\nuniform float distortionStrength;\nfloat hash(vec2 p)\n{\nfloat h=dot(p,vec2(127.1,311.7));\nreturn -1.0+2.0*fract(sin(h)*43758.5453123);\n}\nfloat noise(in vec2 p)\n{\nvec2 i=floor(p);\nvec2 f=fract(p);\nvec2 u=f*f*(3.0-2.0*f);\nreturn mix(mix(hash(i+vec2(0.0,0.0)),\nhash(i+vec2(1.0,0.0)),u.x),\nmix(hash(i+vec2(0.0,1.0)),\nhash(i+vec2(1.0,1.0)),u.x),u.y);\n}\nfloat fbm(vec2 p)\n{\nfloat f=0.0;\nf+=0.5000*noise(p); p*=2.02;\nf+=0.2500*noise(p); p*=2.03;\nf+=0.1250*noise(p); p*=2.01;\nf+=0.0625*noise(p); p*=2.04;\nf/=0.9375;\nreturn f;\n}\nvec3 pattern(vec2 uv)\n{\nvec2 p=-1.0+2.0*uv;\nfloat p2=dot(p,p);\nfloat f=fbm(vec2(15.0*p2))/2.0;\nfloat r=0.2+0.6*sin(12.5*length(uv-vec2(0.5)));\nfloat g=0.2+0.6*sin(20.5*length(uv-vec2(0.5)));\nfloat b=0.2+0.6*sin(17.2*length(uv-vec2(0.5)));\nreturn (1.0-f)*vec3(r,g,b);\n}\nfloat luminance(vec3 color)\n{\nreturn dot(color.rgb,vec3(0.2126,0.7152,0.0722));\n}\nvec4 textureDistorted(sampler2D tex,vec2 texcoord,vec2 direction,vec3 distortion)\n{\nreturn vec4(\ntexture2D(tex,texcoord+direction*distortion.r).r,\ntexture2D(tex,texcoord+direction*distortion.g).g,\ntexture2D(tex,texcoord+direction*distortion.b).b,\n1.0\n);\n}\nvoid main(void)\n{\nvec2 uv=-vUV+vec2(1.0);\nvec2 ghostDir=(vec2(0.5)-uv)*ghostDispersal;\nvec2 texelSize=1.0/resolution;\nvec3 distortion=vec3(-texelSize.x*distortionStrength,0.0,texelSize.x*distortionStrength);\nvec4 result=vec4(0.0);\nfloat ghostIndice=1.0;\nfor (int i=0; i<GHOSTS; ++i)\n{\nvec2 offset=fract(uv+ghostDir*ghostIndice);\nfloat weight=length(vec2(0.5)-offset)/length(vec2(0.5));\nweight=pow(1.0-weight,10.0);\nresult+=textureDistorted(textureSampler,offset,normalize(ghostDir),distortion)*weight*strength;\nghostIndice+=1.0;\n}\nvec2 haloVec=normalize(ghostDir)*haloWidth;\nfloat weight=length(vec2(0.5)-fract(uv+haloVec))/length(vec2(0.5));\nweight=pow(1.0-weight,10.0);\nresult+=textureDistorted(textureSampler,fract(uv+haloVec),normalize(ghostDir),distortion)*weight*strength;\nresult*=texture2D(lensColorSampler,vec2(length(vec2(0.5)-uv)/length(vec2(0.5))));\ngl_FragColor=result;\n}\n#endif\n#if defined(LENS_FLARE_COMPOSE)\nuniform sampler2D otherSampler;\nuniform sampler2D lensDirtSampler;\nuniform sampler2D lensStarSampler;\nuniform mat4 lensStarMatrix;\nvoid main(void)\n{\nvec2 lensFlareCoords=(lensStarMatrix*vec4(vUV,1.0,1.0)).xy;\nvec4 lensMod=texture2D(lensDirtSampler,vUV);\nlensMod+=texture2D(lensStarSampler,vUV);\nvec4 result=texture2D(textureSampler,vUV)*lensMod;\ngl_FragColor=texture2D(otherSampler,vUV)+result;\n}\n#endif\n#if defined(DEPTH_OF_FIELD)\nuniform sampler2D otherSampler;\nuniform sampler2D depthSampler;\nuniform float distance;\nvoid main(void)\n{\nvec4 sharp=texture2D(otherSampler,vUV);\nvec4 blur=texture2D(textureSampler,vUV);\nfloat dist=clamp(texture2D(depthSampler,vUV).r*distance,0.0,1.0);\nfloat factor=0.0;\nif (dist<0.05)\nfactor=1.0;\nelse if (dist<0.1)\nfactor=20.0*(0.1-dist);\nelse if (dist<0.5)\nfactor=0.0;\nelse\nfactor=2.0*(dist-0.5);\nfactor=clamp(factor,0.0,0.90);\ngl_FragColor=mix(sharp,blur,factor);\n}\n#endif\n#if defined(MOTION_BLUR)\nuniform mat4 inverseViewProjection;\nuniform mat4 prevViewProjection;\nuniform vec2 screenSize;\nuniform float motionScale;\nuniform float motionStrength;\nuniform sampler2D depthSampler;\nvoid main(void)\n{\nvec2 texelSize=1.0/screenSize;\nfloat depth=texture2D(depthSampler,vUV).r;\nvec4 cpos=vec4(vUV*2.0-1.0,depth,1.0);\ncpos=cpos*inverseViewProjection;\nvec4 ppos=cpos*prevViewProjection;\nppos.xyz/=ppos.w;\nppos.xy=ppos.xy*0.5+0.5;\nvec2 velocity=(ppos.xy-vUV)*motionScale*motionStrength;\nfloat speed=length(velocity/texelSize);\nint nSamples=int(clamp(speed,1.0,MAX_MOTION_SAMPLES));\nvec4 result=texture2D(textureSampler,vUV);\nfor (int i=1; i<int(MAX_MOTION_SAMPLES); ++i) {\nif (i>=nSamples)\nbreak;\nvec2 offset1=vUV+velocity*(float(i)/float(nSamples-1)-0.5);\nresult+=texture2D(textureSampler,offset1);\n}\ngl_FragColor=result/float(nSamples);\n}\n#endif\n",fxaaVertexShader:"\nattribute vec2 position;\nuniform vec2 texelSize;\n\nvarying vec2 vUV;\nvarying vec2 sampleCoordS;\nvarying vec2 sampleCoordE;\nvarying vec2 sampleCoordN;\nvarying vec2 sampleCoordW;\nvarying vec2 sampleCoordNW;\nvarying vec2 sampleCoordSE;\nvarying vec2 sampleCoordNE;\nvarying vec2 sampleCoordSW;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nvUV=(position*madd+madd);\nsampleCoordS=vUV+vec2( 0.0,1.0)*texelSize;\nsampleCoordE=vUV+vec2( 1.0,0.0)*texelSize;\nsampleCoordN=vUV+vec2( 0.0,-1.0)*texelSize;\nsampleCoordW=vUV+vec2(-1.0,0.0)*texelSize;\nsampleCoordNW=vUV+vec2(-1.0,-1.0)*texelSize;\nsampleCoordSE=vUV+vec2( 1.0,1.0)*texelSize;\nsampleCoordNE=vUV+vec2( 1.0,-1.0)*texelSize;\nsampleCoordSW=vUV+vec2(-1.0,1.0)*texelSize;\ngl_Position=vec4(position,0.0,1.0);\n}",fxaaPixelShader:"uniform sampler2D textureSampler;\nuniform vec2 texelSize;\nvarying vec2 vUV;\nvarying vec2 sampleCoordS;\nvarying vec2 sampleCoordE;\nvarying vec2 sampleCoordN;\nvarying vec2 sampleCoordW;\nvarying vec2 sampleCoordNW;\nvarying vec2 sampleCoordSE;\nvarying vec2 sampleCoordNE;\nvarying vec2 sampleCoordSW;\nconst float fxaaQualitySubpix=1.0;\nconst float fxaaQualityEdgeThreshold=0.166;\nconst float fxaaQualityEdgeThresholdMin=0.0833;\nconst vec3 kLumaCoefficients=vec3(0.2126,0.7152,0.0722);\n#define FxaaLuma(rgba) dot(rgba.rgb,kLumaCoefficients)\nvoid main(){\nvec2 posM;\nposM.x=vUV.x;\nposM.y=vUV.y;\nvec4 rgbyM=texture2D(textureSampler,vUV,0.0);\nfloat lumaM=FxaaLuma(rgbyM);\nfloat lumaS=FxaaLuma(texture2D(textureSampler,sampleCoordS,0.0));\nfloat lumaE=FxaaLuma(texture2D(textureSampler,sampleCoordE,0.0));\nfloat lumaN=FxaaLuma(texture2D(textureSampler,sampleCoordN,0.0));\nfloat lumaW=FxaaLuma(texture2D(textureSampler,sampleCoordW,0.0));\nfloat maxSM=max(lumaS,lumaM);\nfloat minSM=min(lumaS,lumaM);\nfloat maxESM=max(lumaE,maxSM);\nfloat minESM=min(lumaE,minSM);\nfloat maxWN=max(lumaN,lumaW);\nfloat minWN=min(lumaN,lumaW);\nfloat rangeMax=max(maxWN,maxESM);\nfloat rangeMin=min(minWN,minESM);\nfloat rangeMaxScaled=rangeMax*fxaaQualityEdgeThreshold;\nfloat range=rangeMax-rangeMin;\nfloat rangeMaxClamped=max(fxaaQualityEdgeThresholdMin,rangeMaxScaled);\nif(range<rangeMaxClamped) \n{\ngl_FragColor=rgbyM;\nreturn;\n}\nfloat lumaNW=FxaaLuma(texture2D(textureSampler,sampleCoordNW,0.0));\nfloat lumaSE=FxaaLuma(texture2D(textureSampler,sampleCoordSE,0.0));\nfloat lumaNE=FxaaLuma(texture2D(textureSampler,sampleCoordNE,0.0));\nfloat lumaSW=FxaaLuma(texture2D(textureSampler,sampleCoordSW,0.0));\nfloat lumaNS=lumaN+lumaS;\nfloat lumaWE=lumaW+lumaE;\nfloat subpixRcpRange=1.0/range;\nfloat subpixNSWE=lumaNS+lumaWE;\nfloat edgeHorz1=(-2.0*lumaM)+lumaNS;\nfloat edgeVert1=(-2.0*lumaM)+lumaWE;\nfloat lumaNESE=lumaNE+lumaSE;\nfloat lumaNWNE=lumaNW+lumaNE;\nfloat edgeHorz2=(-2.0*lumaE)+lumaNESE;\nfloat edgeVert2=(-2.0*lumaN)+lumaNWNE;\nfloat lumaNWSW=lumaNW+lumaSW;\nfloat lumaSWSE=lumaSW+lumaSE;\nfloat edgeHorz4=(abs(edgeHorz1)*2.0)+abs(edgeHorz2);\nfloat edgeVert4=(abs(edgeVert1)*2.0)+abs(edgeVert2);\nfloat edgeHorz3=(-2.0*lumaW)+lumaNWSW;\nfloat edgeVert3=(-2.0*lumaS)+lumaSWSE;\nfloat edgeHorz=abs(edgeHorz3)+edgeHorz4;\nfloat edgeVert=abs(edgeVert3)+edgeVert4;\nfloat subpixNWSWNESE=lumaNWSW+lumaNESE;\nfloat lengthSign=texelSize.x;\nbool horzSpan=edgeHorz>=edgeVert;\nfloat subpixA=subpixNSWE*2.0+subpixNWSWNESE;\nif (!horzSpan)\n{\nlumaN=lumaW;\n}\nif (!horzSpan) \n{\nlumaS=lumaE;\n}\nif (horzSpan) \n{\nlengthSign=texelSize.y;\n}\nfloat subpixB=(subpixA*(1.0/12.0))-lumaM;\nfloat gradientN=lumaN-lumaM;\nfloat gradientS=lumaS-lumaM;\nfloat lumaNN=lumaN+lumaM;\nfloat lumaSS=lumaS+lumaM;\nbool pairN=abs(gradientN)>=abs(gradientS);\nfloat gradient=max(abs(gradientN),abs(gradientS));\nif (pairN)\n{\nlengthSign=-lengthSign;\n}\nfloat subpixC=clamp(abs(subpixB)*subpixRcpRange,0.0,1.0);\nvec2 posB;\nposB.x=posM.x;\nposB.y=posM.y;\nvec2 offNP;\noffNP.x=(!horzSpan) ? 0.0 : texelSize.x;\noffNP.y=(horzSpan) ? 0.0 : texelSize.y;\nif (!horzSpan) \n{\nposB.x+=lengthSign*0.5;\n}\nif (horzSpan)\n{\nposB.y+=lengthSign*0.5;\n}\nvec2 posN;\nposN.x=posB.x-offNP.x*1.5;\nposN.y=posB.y-offNP.y*1.5;\nvec2 posP;\nposP.x=posB.x+offNP.x*1.5;\nposP.y=posB.y+offNP.y*1.5;\nfloat subpixD=((-2.0)*subpixC)+3.0;\nfloat lumaEndN=FxaaLuma(texture2D(textureSampler,posN,0.0));\nfloat subpixE=subpixC*subpixC;\nfloat lumaEndP=FxaaLuma(texture2D(textureSampler,posP,0.0));\nif (!pairN) \n{\nlumaNN=lumaSS;\n}\nfloat gradientScaled=gradient*1.0/4.0;\nfloat lumaMM=lumaM-lumaNN*0.5;\nfloat subpixF=subpixD*subpixE;\nbool lumaMLTZero=lumaMM<0.0;\nlumaEndN-=lumaNN*0.5;\nlumaEndP-=lumaNN*0.5;\nbool doneN=abs(lumaEndN)>=gradientScaled;\nbool doneP=abs(lumaEndP)>=gradientScaled;\nif (!doneN) \n{\nposN.x-=offNP.x*3.0;\n}\nif (!doneN) \n{\nposN.y-=offNP.y*3.0;\n}\nbool doneNP=(!doneN) || (!doneP);\nif (!doneP) \n{\nposP.x+=offNP.x*3.0;\n}\nif (!doneP)\n{\nposP.y+=offNP.y*3.0;\n}\nif (doneNP)\n{\nif (!doneN) lumaEndN=FxaaLuma(texture2D(textureSampler,posN.xy,0.0));\nif (!doneP) lumaEndP=FxaaLuma(texture2D(textureSampler,posP.xy,0.0));\nif (!doneN) lumaEndN=lumaEndN-lumaNN*0.5;\nif (!doneP) lumaEndP=lumaEndP-lumaNN*0.5;\ndoneN=abs(lumaEndN)>=gradientScaled;\ndoneP=abs(lumaEndP)>=gradientScaled;\nif (!doneN) posN.x-=offNP.x*12.0;\nif (!doneN) posN.y-=offNP.y*12.0;\ndoneNP=(!doneN) || (!doneP);\nif (!doneP) posP.x+=offNP.x*12.0;\nif (!doneP) posP.y+=offNP.y*12.0;\n}\nfloat dstN=posM.x-posN.x;\nfloat dstP=posP.x-posM.x;\nif (!horzSpan)\n{\ndstN=posM.y-posN.y;\n}\nif (!horzSpan) \n{\ndstP=posP.y-posM.y;\n}\nbool goodSpanN=(lumaEndN<0.0) != lumaMLTZero;\nfloat spanLength=(dstP+dstN);\nbool goodSpanP=(lumaEndP<0.0) != lumaMLTZero;\nfloat spanLengthRcp=1.0/spanLength;\nbool directionN=dstN<dstP;\nfloat dst=min(dstN,dstP);\nbool goodSpan=directionN ? goodSpanN : goodSpanP;\nfloat subpixG=subpixF*subpixF;\nfloat pixelOffset=(dst*(-spanLengthRcp))+0.5;\nfloat subpixH=subpixG*fxaaQualitySubpix;\nfloat pixelOffsetGood=goodSpan ? pixelOffset : 0.0;\nfloat pixelOffsetSubpix=max(pixelOffsetGood,subpixH);\nif (!horzSpan)\n{\nposM.x+=pixelOffsetSubpix*lengthSign;\n}\nif (horzSpan)\n{\nposM.y+=pixelOffsetSubpix*lengthSign;\n}\ngl_FragColor=texture2D(textureSampler,posM,0.0);\n}",circleOfConfusionPixelShader:"\nuniform sampler2D depthSampler;\n\nvarying vec2 vUV;\n\nuniform vec2 cameraMinMaxZ;\n\nuniform float focusDistance;\nuniform float cocPrecalculation;\nfloat sampleDistance(const in vec2 offset) {\nfloat depth=texture2D(depthSampler,offset).r; \nreturn (cameraMinMaxZ.x+(cameraMinMaxZ.y-cameraMinMaxZ.x)*depth)*1000.0; \n}\nvoid main(void)\n{\nfloat pixelDistance=sampleDistance(vUV);\nfloat coc=abs(cocPrecalculation* ((focusDistance-pixelDistance)/pixelDistance));\ncoc=clamp(coc,0.0,1.0);\ngl_FragColor=vec4(coc,coc,coc,1.0);\n}\n",depthOfFieldMergePixelShader:"\nuniform sampler2D textureSampler;\nuniform sampler2D originalSampler;\nuniform sampler2D circleOfConfusionSampler;\n\nvarying vec2 vUV;\nvoid main(void)\n{\nvec4 blurred=texture2D(textureSampler,vUV);\nvec4 original=texture2D(originalSampler,vUV);\nfloat coc=texture2D(circleOfConfusionSampler,vUV).r;\ngl_FragColor=mix(original,blurred,coc);\n}\n",geometryVertexShader:"precision highp float;\nprecision highp int;\n#include<bonesDeclaration>\n#include<instancesDeclaration>\nattribute vec3 position;\nattribute vec3 normal;\n#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nvarying vec2 uv;\n#endif\n#ifdef UV2\nvarying vec2 uv2;\n#endif\n#endif\n\nuniform mat4 viewProjection;\nuniform mat4 view;\nvarying vec3 vNormalV;\nvarying vec4 vViewPos;\n#ifdef POSITION\nvarying vec3 vPosition;\n#endif\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\nvec4 pos=vec4(finalWorld*vec4(position,1.0));\nvNormalV=normalize(vec3((view*finalWorld)*vec4(normal,0.0)));\nvViewPos=view*pos;\n#ifdef POSITION\nvPosition=pos.xyz/pos.w;\n#endif\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#if defined(ALPHATEST) || defined(BASIC_RENDER)\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",geometryPixelShader:"#extension GL_EXT_draw_buffers : require\nprecision highp float;\nprecision highp int;\nvarying vec3 vNormalV;\nvarying vec4 vViewPos;\n#ifdef POSITION\nvarying vec3 vPosition;\n#endif\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef POSITION\n#include<mrtFragmentDeclaration>[3]\n#else\n#include<mrtFragmentDeclaration>[2]\n#endif\nvoid main() {\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\ngl_FragData[0]=vec4(vViewPos.z/vViewPos.w,0.0,0.0,1.0);\n\ngl_FragData[1]=vec4(normalize(vNormalV),1.0);\n\n#ifdef POSITION\ngl_FragData[2]=vec4(vPosition,1.0);\n#endif\n}",refractionPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D refractionSampler;\n\nuniform vec3 baseColor;\nuniform float depth;\nuniform float colorLevel;\nvoid main() {\nfloat ref=1.0-texture2D(refractionSampler,vUV).r;\nvec2 uv=vUV-vec2(0.5);\nvec2 offset=uv*depth*ref;\nvec3 sourceColor=texture2D(textureSampler,vUV-offset).rgb;\ngl_FragColor=vec4(sourceColor+sourceColor*ref*colorLevel,1.0);\n}",blackAndWhitePixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform float degree;\nvoid main(void) \n{\nvec3 color=texture2D(textureSampler,vUV).rgb;\nfloat luminance=dot(color,vec3(0.3,0.59,0.11)); \nvec3 blackAndWhite=vec3(luminance,luminance,luminance);\ngl_FragColor=vec4(color-((color-blackAndWhite)*degree),1.0);\n}",convolutionPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform vec2 screenSize;\nuniform float kernel[9];\nvoid main(void)\n{\nvec2 onePixel=vec2(1.0,1.0)/screenSize;\nvec4 colorSum =\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,-1))*kernel[0] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,-1))*kernel[1] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,-1))*kernel[2] +\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,0))*kernel[3] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,0))*kernel[4] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,0))*kernel[5] +\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,1))*kernel[6] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,1))*kernel[7] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,1))*kernel[8];\nfloat kernelWeight =\nkernel[0] +\nkernel[1] +\nkernel[2] +\nkernel[3] +\nkernel[4] +\nkernel[5] +\nkernel[6] +\nkernel[7] +\nkernel[8];\nif (kernelWeight<=0.0) {\nkernelWeight=1.0;\n}\ngl_FragColor=vec4((colorSum/kernelWeight).rgb,1);\n}",filterPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform mat4 kernelMatrix;\nvoid main(void)\n{\nvec3 baseColor=texture2D(textureSampler,vUV).rgb;\nvec3 updatedColor=(kernelMatrix*vec4(baseColor,1.0)).rgb;\ngl_FragColor=vec4(updatedColor,1.0);\n}",volumetricLightScatteringPixelShader:"uniform sampler2D textureSampler;\nuniform sampler2D lightScatteringSampler;\nuniform float decay;\nuniform float exposure;\nuniform float weight;\nuniform float density;\nuniform vec2 meshPositionOnScreen;\nvarying vec2 vUV;\nvoid main(void) {\nvec2 tc=vUV;\nvec2 deltaTexCoord=(tc-meshPositionOnScreen.xy);\ndeltaTexCoord*=1.0/float(NUM_SAMPLES)*density;\nfloat illuminationDecay=1.0;\nvec4 color=texture2D(lightScatteringSampler,tc)*0.4;\nfor(int i=0; i<NUM_SAMPLES; i++) {\ntc-=deltaTexCoord;\nvec4 dataSample=texture2D(lightScatteringSampler,tc)*0.4;\ndataSample*=illuminationDecay*weight;\ncolor+=dataSample;\nilluminationDecay*=decay;\n}\nvec4 realColor=texture2D(textureSampler,vUV);\ngl_FragColor=((vec4((vec3(color.r,color.g,color.b)*exposure),1))+(realColor*(1.5-0.4)));\n}\n",volumetricLightScatteringPassPixelShader:"#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\n#endif\n#if defined(ALPHATEST)\nuniform sampler2D diffuseSampler;\n#endif\nvoid main(void)\n{\n#if defined(ALPHATEST)\nvec4 diffuseColor=texture2D(diffuseSampler,vUV);\nif (diffuseColor.a<0.4)\ndiscard;\n#endif\ngl_FragColor=vec4(0.0,0.0,0.0,1.0);\n}\n",colorCorrectionPixelShader:"\nuniform sampler2D textureSampler; \nuniform sampler2D colorTable; \n\nvarying vec2 vUV;\n\nconst float SLICE_COUNT=16.0; \n\nvec4 sampleAs3DTexture(sampler2D textureSampler,vec3 uv,float width) {\nfloat sliceSize=1.0/width; \nfloat slicePixelSize=sliceSize/width; \nfloat sliceInnerSize=slicePixelSize*(width-1.0); \nfloat zSlice0=min(floor(uv.z*width),width-1.0);\nfloat zSlice1=min(zSlice0+1.0,width-1.0);\nfloat xOffset=slicePixelSize*0.5+uv.x*sliceInnerSize;\nfloat s0=xOffset+(zSlice0*sliceSize);\nfloat s1=xOffset+(zSlice1*sliceSize);\nvec4 slice0Color=texture2D(textureSampler,vec2(s0,uv.y));\nvec4 slice1Color=texture2D(textureSampler,vec2(s1,uv.y));\nfloat zOffset=mod(uv.z*width,1.0);\nvec4 result=mix(slice0Color,slice1Color,zOffset);\nreturn result;\n}\nvoid main(void)\n{\nvec4 screen_color=texture2D(textureSampler,vUV);\ngl_FragColor=sampleAs3DTexture(colorTable,screen_color.rgb,SLICE_COUNT);\n}",tonemapPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform float _ExposureAdjustment;\n#if defined(HABLE_TONEMAPPING)\nconst float A=0.15;\nconst float B=0.50;\nconst float C=0.10;\nconst float D=0.20;\nconst float E=0.02;\nconst float F=0.30;\nconst float W=11.2;\n#endif\nfloat Luminance(vec3 c)\n{\nreturn dot(c,vec3(0.22,0.707,0.071));\n}\nvoid main(void) \n{\nvec3 colour=texture2D(textureSampler,vUV).rgb;\n#if defined(REINHARD_TONEMAPPING)\nfloat lum=Luminance(colour.rgb); \nfloat lumTm=lum*_ExposureAdjustment;\nfloat scale=lumTm/(1.0+lumTm); \ncolour*=scale/lum;\n#elif defined(HABLE_TONEMAPPING)\ncolour*=_ExposureAdjustment;\nconst float ExposureBias=2.0;\nvec3 x=ExposureBias*colour;\nvec3 curr=((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\nx=vec3(W,W,W);\nvec3 whiteScale=1.0/(((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F);\ncolour=curr*whiteScale;\n#elif defined(OPTIMIZED_HEJIDAWSON_TONEMAPPING)\ncolour*=_ExposureAdjustment;\nvec3 X=max(vec3(0.0,0.0,0.0),colour-0.004);\nvec3 retColor=(X*(6.2*X+0.5))/(X*(6.2*X+1.7)+0.06);\ncolour=retColor*retColor;\n#elif defined(PHOTOGRAPHIC_TONEMAPPING)\ncolour=vec3(1.0,1.0,1.0)-exp2(-_ExposureAdjustment*colour);\n#endif\ngl_FragColor=vec4(colour.rgb,1.0);\n}",displayPassPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D passSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(passSampler,vUV);\n}",highlightsPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nconst vec3 RGBLuminanceCoefficients=vec3(0.2126,0.7152,0.0722);\nvoid main(void) \n{\nvec4 tex=texture2D(textureSampler,vUV);\nvec3 c=tex.rgb;\nfloat luma=dot(c.rgb,RGBLuminanceCoefficients);\n\n\ngl_FragColor=vec4(pow(c,vec3(25.0-luma*15.0)),tex.a); \n}",imageProcessingPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#include<imageProcessingDeclaration>\n#include<helperFunctions>\n#include<imageProcessingFunctions>\nvoid main(void)\n{\nvec4 result=texture2D(textureSampler,vUV);\n#ifdef IMAGEPROCESSING\n#ifndef FROMLINEARSPACE\n\nresult.rgb=toLinearSpace(result.rgb);\n#endif\nresult=applyImageProcessing(result);\n#else\n\n#ifdef FROMLINEARSPACE\nresult=applyImageProcessing(result);\n#endif\n#endif\ngl_FragColor=result;\n}",kernelBlurVertexShader:"\nattribute vec2 position;\n\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nsampleCenter=(position*madd+madd);\n#include<kernelBlurVertex>[0..varyingCount]\ngl_Position=vec4(position,0.0,1.0);\n}",kernelBlurPixelShader:"\nuniform sampler2D textureSampler;\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#ifdef DOF\nuniform sampler2D depthSampler;\nuniform vec2 cameraMinMaxZ;\nfloat sampleDistance(const in vec2 offset) {\nfloat depth=texture2D(depthSampler,offset).r; \nreturn cameraMinMaxZ.x+(cameraMinMaxZ.y-cameraMinMaxZ.x)*depth; \n}\n#endif\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\n#ifdef PACKEDFLOAT\nvec4 pack(float depth)\n{\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(depth*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}\n#endif\nvoid main(void)\n{\n#ifdef DOF\nfloat sumOfWeights=0.0; \nfloat sampleDepth=0.0;\nfloat factor=0.0;\nfloat centerSampleDepth=sampleDistance(sampleCenter);\n#endif\nfloat computedWeight=0.0;\n#ifdef PACKEDFLOAT \nfloat blend=0.;\n#else\nvec4 blend=vec4(0.);\n#endif\n#include<kernelBlurFragment>[0..varyingCount]\n#include<kernelBlurFragment2>[0..depCount]\n#ifdef PACKEDFLOAT\ngl_FragColor=pack(blend);\n#else\ngl_FragColor=blend;\n#endif\n#ifdef DOF\n\nif(sumOfWeights == 0.0){\ngl_FragColor=vec4(0.0,0.0,0.0,1.0);\n}\ngl_FragColor/=sumOfWeights;\n#endif\n}",lensFlareVertexShader:"\nattribute vec2 position;\n\nuniform mat4 viewportMatrix;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nvUV=position*madd+madd;\ngl_Position=viewportMatrix*vec4(position,0.0,1.0);\n}",lensFlarePixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec4 color;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\ngl_FragColor=baseColor*color;\n}",anaglyphPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D leftSampler;\nvoid main(void)\n{\nvec4 leftFrag=texture2D(leftSampler,vUV);\nleftFrag=vec4(1.0,leftFrag.g,leftFrag.b,1.0);\nvec4 rightFrag=texture2D(textureSampler,vUV);\nrightFrag=vec4(rightFrag.r,1.0,1.0,1.0);\ngl_FragColor=vec4(rightFrag.rgb*leftFrag.rgb,1.0);\n}",stereoscopicInterlacePixelShader:"const vec3 TWO=vec3(2.0,2.0,2.0);\nvarying vec2 vUV;\nuniform sampler2D camASampler;\nuniform sampler2D textureSampler;\nuniform vec2 stepSize;\nvoid main(void)\n{\nbool useCamB;\nvec2 texCoord1;\nvec2 texCoord2;\nvec3 frag1;\nvec3 frag2;\n#ifdef IS_STEREOSCOPIC_HORIZ\nuseCamB=vUV.x>0.5;\ntexCoord1=vec2(useCamB ? (vUV.x-0.5)*2.0 : vUV.x*2.0,vUV.y);\ntexCoord2=vec2(texCoord1.x+stepSize.x,vUV.y);\n#else\nuseCamB=vUV.y>0.5;\ntexCoord1=vec2(vUV.x,useCamB ? (vUV.y-0.5)*2.0 : vUV.y*2.0);\ntexCoord2=vec2(vUV.x,texCoord1.y+stepSize.y);\n#endif\n\nif (useCamB){\nfrag1=texture2D(textureSampler,texCoord1).rgb;\nfrag2=texture2D(textureSampler,texCoord2).rgb;\n}else{\nfrag1=texture2D(camASampler ,texCoord1).rgb;\nfrag2=texture2D(camASampler ,texCoord2).rgb;\n}\ngl_FragColor=vec4((frag1+frag2)/TWO,1.0);\n}",vrDistortionCorrectionPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform vec2 LensCenter;\nuniform vec2 Scale;\nuniform vec2 ScaleIn;\nuniform vec4 HmdWarpParam;\nvec2 HmdWarp(vec2 in01) {\nvec2 theta=(in01-LensCenter)*ScaleIn; \nfloat rSq=theta.x*theta.x+theta.y*theta.y;\nvec2 rvector=theta*(HmdWarpParam.x+HmdWarpParam.y*rSq+HmdWarpParam.z*rSq*rSq+HmdWarpParam.w*rSq*rSq*rSq);\nreturn LensCenter+Scale*rvector;\n}\nvoid main(void)\n{\nvec2 tc=HmdWarp(vUV);\nif (tc.x <0.0 || tc.x>1.0 || tc.y<0.0 || tc.y>1.0)\ngl_FragColor=vec4(0.0,0.0,0.0,0.0);\nelse{\ngl_FragColor=texture2D(textureSampler,tc);\n}\n}",glowBlurPostProcessPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec2 screenSize;\nuniform vec2 direction;\nuniform float blurWidth;\n\nfloat getLuminance(vec3 color)\n{\nreturn dot(color,vec3(0.2126,0.7152,0.0722));\n}\nvoid main(void)\n{\nfloat weights[7];\nweights[0]=0.05;\nweights[1]=0.1;\nweights[2]=0.2;\nweights[3]=0.3;\nweights[4]=0.2;\nweights[5]=0.1;\nweights[6]=0.05;\nvec2 texelSize=vec2(1.0/screenSize.x,1.0/screenSize.y);\nvec2 texelStep=texelSize*direction*blurWidth;\nvec2 start=vUV-3.0*texelStep;\nvec4 baseColor=vec4(0.,0.,0.,0.);\nvec2 texelOffset=vec2(0.,0.);\nfor (int i=0; i<7; i++)\n{\n\nvec4 texel=texture2D(textureSampler,start+texelOffset);\nbaseColor.a+=texel.a*weights[i];\n\nfloat luminance=getLuminance(baseColor.rgb);\nfloat luminanceTexel=getLuminance(texel.rgb);\nfloat choice=step(luminanceTexel,luminance);\nbaseColor.rgb=choice*baseColor.rgb+(1.0-choice)*texel.rgb;\ntexelOffset+=texelStep;\n}\ngl_FragColor=baseColor;\n}",glowMapGenerationPixelShader:"#ifdef ALPHATEST\nvarying vec2 vUVDiffuse;\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform sampler2D emissiveSampler;\n#endif\nuniform vec4 color;\nvoid main(void)\n{\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUVDiffuse).a<0.4)\ndiscard;\n#endif\n#ifdef EMISSIVE\ngl_FragColor=texture2D(emissiveSampler,vUVEmissive);\n#else\ngl_FragColor=color;\n#endif\n}",glowMapGenerationVertexShader:"\nattribute vec3 position;\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nvarying vec4 vPosition;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef ALPHATEST\nvarying vec2 vUVDiffuse;\nuniform mat4 diffuseMatrix;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform mat4 emissiveMatrix;\n#endif\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef CUBEMAP\nvPosition=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#else\nvPosition=viewProjection*finalWorld*vec4(position,1.0);\ngl_Position=vPosition;\n#endif\n#ifdef ALPHATEST\n#ifdef DIFFUSEUV1\nvUVDiffuse=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef DIFFUSEUV2\nvUVDiffuse=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef EMISSIVE\n#ifdef EMISSIVEUV1\nvUVEmissive=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef EMISSIVEUV2\nvUVEmissive=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",glowMapMergePixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform float offset;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\nbaseColor.a=abs(offset-baseColor.a);\n#ifdef STROKE\nfloat alpha=smoothstep(.0,.1,baseColor.a);\nbaseColor.a=alpha;\nbaseColor.rgb=baseColor.rgb*alpha;\n#endif\ngl_FragColor=baseColor;\n}",glowMapMergeVertexShader:"\nattribute vec2 position;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=position*madd+madd;\ngl_Position=vec4(position,0.0,1.0);\n}",lineVertexShader:"\nattribute vec3 position;\nattribute vec4 normal;\n\nuniform mat4 worldViewProjection;\nuniform float width;\nuniform float aspectRatio;\nvoid main(void) {\nvec4 viewPosition=worldViewProjection*vec4(position,1.0);\nvec4 viewPositionNext=worldViewProjection*vec4(normal.xyz,1.0);\nvec2 currentScreen=viewPosition.xy/viewPosition.w;\nvec2 nextScreen=viewPositionNext.xy/viewPositionNext.w;\ncurrentScreen.x*=aspectRatio;\nnextScreen.x*=aspectRatio;\nvec2 dir=normalize(nextScreen-currentScreen);\nvec2 normalDir=vec2(-dir.y,dir.x);\nnormalDir*=width/2.0;\nnormalDir.x/=aspectRatio;\nvec4 offset=vec4(normalDir*normal.w,0.0,0.0);\ngl_Position=viewPosition+offset;\n}",linePixelShader:"uniform vec4 color;\nvoid main(void) {\ngl_FragColor=color;\n}",outlineVertexShader:"\nattribute vec3 position;\nattribute vec3 normal;\n#include<bonesDeclaration>\n\nuniform float offset;\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\n#include<logDepthDeclaration>\nvoid main(void)\n{\nvec3 offsetPosition=position+normal*offset;\n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(offsetPosition,1.0);\n#ifdef ALPHATEST\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#include<logDepthVertex>\n}\n",outlinePixelShader:"#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nuniform vec4 color;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\n#include<logDepthDeclaration>\nvoid main(void) {\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\n#include<logDepthFragment>\ngl_FragColor=color;\n}",layerVertexShader:"\nattribute vec2 position;\n\nuniform vec2 scale;\nuniform vec2 offset;\nuniform mat4 textureMatrix;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) { \nvec2 shiftedPosition=position*scale+offset;\nvUV=vec2(textureMatrix*vec4(shiftedPosition*madd+madd,1.0,0.0));\ngl_Position=vec4(shiftedPosition,0.0,1.0);\n}",layerPixelShader:"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec4 color;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\ngl_FragColor=baseColor*color;\n}",backgroundVertexShader:"precision highp float;\n#include<__decl__backgroundVertex>\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2; \n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\nvoid main(void) {\n#ifdef REFLECTIONMAP_SKYBOX\nvPositionUVW=position;\n#endif \n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\nvec4 worldPos=finalWorld*vec4(position,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normal);\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(position,0.0)));\n#endif\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif \n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0 \nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n",backgroundPixelShader:"#ifdef TEXTURELODSUPPORT\n#extension GL_EXT_shader_texture_lod : enable\n#endif\nprecision highp float;\n#include<__decl__backgroundFragment>\n\nuniform vec3 vEyePosition;\n\nvarying vec3 vPositionW;\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif \n#ifdef MAINUV2 \nvarying vec2 vMainUV2; \n#endif \n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\n#define sampleReflection(s,c) textureCube(s,c)\nuniform samplerCube reflectionSampler;\n#ifdef TEXTURELODSUPPORT\n#define sampleReflectionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#else\n#define sampleReflection(s,c) texture2D(s,c)\nuniform sampler2D reflectionSampler;\n#ifdef TEXTURELODSUPPORT\n#define sampleReflectionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE;\n#endif\n\n#ifndef SHADOWONLY\n#define SHADOWONLY;\n#endif\n#include<imageProcessingDeclaration>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<helperFunctions>\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<imageProcessingFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\n#ifdef REFLECTIONFRESNEL\n#define FRESNEL_MAXIMUM_ON_ROUGH 0.25\nvec3 fresnelSchlickEnvironmentGGX(float VdotN,vec3 reflectance0,vec3 reflectance90,float smoothness)\n{\n\nfloat weight=mix(FRESNEL_MAXIMUM_ON_ROUGH,1.0,smoothness);\nreturn reflectance0+weight*(reflectance90-reflectance0)*pow(clamp(1.0-VdotN,0.,1.),5.0);\n}\n#endif\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(0.0,1.0,0.0);\n#endif\n\nfloat shadow=1.;\nfloat globalShadow=0.;\nfloat shadowLightCount=0.;\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef SHADOWINUSE\nglobalShadow/=shadowLightCount;\n#else\nglobalShadow=1.0;\n#endif\n\nvec3 reflectionColor=vec3(1.,1.,1.);\n#ifdef REFLECTION\nvec3 reflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\n\n#ifdef REFLECTIONMAP_3D\nvec3 reflectionCoords=reflectionVector;\n#else\nvec2 reflectionCoords=reflectionVector.xy;\n#ifdef REFLECTIONMAP_PROJECTION\nreflectionCoords/=reflectionVector.z;\n#endif\nreflectionCoords.y=1.0-reflectionCoords.y;\n#endif\n#ifdef REFLECTIONBLUR\nfloat reflectionLOD=vReflectionInfos.y;\n#ifdef TEXTURELODSUPPORT\n\nreflectionLOD=reflectionLOD*log2(vReflectionMicrosurfaceInfos.x)*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\nreflectionColor=sampleReflectionLod(reflectionSampler,reflectionCoords,reflectionLOD).rgb;\n#else\nfloat lodReflectionNormalized=clamp(reflectionLOD,0.,1.);\nfloat lodReflectionNormalizedDoubled=lodReflectionNormalized*2.0;\nvec3 reflectionSpecularMid=sampleReflection(reflectionSampler,reflectionCoords).rgb;\nif(lodReflectionNormalizedDoubled<1.0){\nreflectionColor=mix(\nsampleReflection(reflectionSamplerHigh,reflectionCoords).rgb,\nreflectionSpecularMid,\nlodReflectionNormalizedDoubled\n);\n} else {\nreflectionColor=mix(\nreflectionSpecularMid,\nsampleReflection(reflectionSamplerLow,reflectionCoords).rgb,\nlodReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#else\nvec4 reflectionSample=sampleReflection(reflectionSampler,reflectionCoords);\nreflectionColor=reflectionSample.rgb;\n#endif\n#ifdef GAMMAREFLECTION\nreflectionColor=toLinearSpace(reflectionColor.rgb);\n#endif\n\nreflectionColor*=vReflectionInfos.x;\n#endif\n\nvec3 diffuseColor=vec3(1.,1.,1.);\nfloat finalAlpha=alpha;\n#ifdef DIFFUSE\nvec4 diffuseMap=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef GAMMADIFFUSE\ndiffuseMap.rgb=toLinearSpace(diffuseMap.rgb);\n#endif\n\ndiffuseMap.rgb*=vDiffuseInfos.y;\n#ifdef DIFFUSEHASALPHA\nfinalAlpha*=diffuseMap.a;\n#endif\ndiffuseColor=diffuseMap.rgb;\n#endif\n\n#ifdef REFLECTIONFRESNEL\nvec3 colorBase=diffuseColor;\n#else\nvec3 colorBase=reflectionColor*diffuseColor;\n#endif\ncolorBase=max(colorBase,0.0);\n\n#ifdef USERGBCOLOR\nvec3 finalColor=colorBase;\n#else\nvec3 finalColor=colorBase.r*vPrimaryColor.rgb*vPrimaryColor.a;\nfinalColor+=colorBase.g*vSecondaryColor.rgb*vSecondaryColor.a;\nfinalColor+=colorBase.b*vTertiaryColor.rgb*vTertiaryColor.a;\n#endif\n\n#ifdef REFLECTIONFRESNEL\nvec3 reflectionAmount=vReflectionControl.xxx;\nvec3 reflectionReflectance0=vReflectionControl.yyy;\nvec3 reflectionReflectance90=vReflectionControl.zzz;\nfloat VdotN=dot(normalize(vEyePosition),normalW);\nvec3 planarReflectionFresnel=fresnelSchlickEnvironmentGGX(clamp(VdotN,0.0,1.0),reflectionReflectance0,reflectionReflectance90,1.0);\nreflectionAmount*=planarReflectionFresnel;\n#ifdef REFLECTIONFALLOFF\nfloat reflectionDistanceFalloff=1.0-clamp(length(vPositionW.xyz-vBackgroundCenter)*vReflectionControl.w,0.0,1.0);\nreflectionDistanceFalloff*=reflectionDistanceFalloff;\nreflectionAmount*=reflectionDistanceFalloff;\n#endif\nfinalColor=mix(finalColor,reflectionColor,clamp(reflectionAmount,0.,1.));\n#endif\n#ifdef OPACITYFRESNEL\nfloat viewAngleToFloor=dot(normalW,normalize(vEyePosition-vBackgroundCenter));\n\nconst float startAngle=0.1;\nfloat fadeFactor=clamp(viewAngleToFloor/startAngle,0.0,1.0);\nfinalAlpha*=fadeFactor*fadeFactor;\n#endif\n\n#ifdef SHADOWINUSE\nfinalColor=mix(finalColor*shadowLevel,finalColor,globalShadow);\n#endif\n\nvec4 color=vec4(finalColor,finalAlpha);\n#include<fogFragment>\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n\n\ncolor.rgb=clamp(color.rgb,0.,30.0);\n#else\n\ncolor=applyImageProcessing(color);\n#endif\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\n#ifdef NOISE\ncolor.rgb=dither(vPositionW.xy,color.rgb);\n#endif\ngl_FragColor=color;\n}"},l.Effect.IncludesShadersStore={depthPrePass:"#ifdef DEPTHPREPASS\ngl_FragColor=vec4(0.,0.,0.,1.0);\nreturn;\n#endif",bonesDeclaration:"#if NUM_BONE_INFLUENCERS>0\nuniform mat4 mBones[BonesPerMesh];\nattribute vec4 matricesIndices;\nattribute vec4 matricesWeights;\n#if NUM_BONE_INFLUENCERS>4\nattribute vec4 matricesIndicesExtra;\nattribute vec4 matricesWeightsExtra;\n#endif\n#endif",instancesDeclaration:"#ifdef INSTANCES\nattribute vec4 world0;\nattribute vec4 world1;\nattribute vec4 world2;\nattribute vec4 world3;\n#else\nuniform mat4 world;\n#endif",pointCloudVertexDeclaration:"#ifdef POINTSIZE\nuniform float pointSize;\n#endif",bumpVertexDeclaration:"#if defined(BUMP) || defined(PARALLAX)\n#if defined(TANGENT) && defined(NORMAL) \nvarying mat3 vTBN;\n#endif\n#endif\n",clipPlaneVertexDeclaration:"#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nvarying float fClipDistance;\n#endif",fogVertexDeclaration:"#ifdef FOG\nvarying vec3 vFogDistance;\n#endif",morphTargetsVertexGlobalDeclaration:"#ifdef MORPHTARGETS\nuniform float morphTargetInfluences[NUM_MORPH_INFLUENCERS];\n#endif",morphTargetsVertexDeclaration:"#ifdef MORPHTARGETS\nattribute vec3 position{X};\n#ifdef MORPHTARGETS_NORMAL\nattribute vec3 normal{X};\n#endif\n#ifdef MORPHTARGETS_TANGENT\nattribute vec3 tangent{X};\n#endif\n#endif",logDepthDeclaration:"#ifdef LOGARITHMICDEPTH\nuniform float logarithmicDepthConstant;\nvarying float vFragmentDepth;\n#endif",morphTargetsVertex:"#ifdef MORPHTARGETS\npositionUpdated+=(position{X}-position)*morphTargetInfluences[{X}];\n#ifdef MORPHTARGETS_NORMAL\nnormalUpdated+=(normal{X}-normal)*morphTargetInfluences[{X}];\n#endif\n#ifdef MORPHTARGETS_TANGENT\ntangentUpdated.xyz+=(tangent{X}-tangent.xyz)*morphTargetInfluences[{X}];\n#endif\n#endif",instancesVertex:"#ifdef INSTANCES\nmat4 finalWorld=mat4(world0,world1,world2,world3);\n#else\nmat4 finalWorld=world;\n#endif",bonesVertex:"#if NUM_BONE_INFLUENCERS>0\nmat4 influence;\ninfluence=mBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=mBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif \n#if NUM_BONE_INFLUENCERS>2\ninfluence+=mBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif \n#if NUM_BONE_INFLUENCERS>3\ninfluence+=mBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif \n#if NUM_BONE_INFLUENCERS>4\ninfluence+=mBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif \n#if NUM_BONE_INFLUENCERS>5\ninfluence+=mBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif \n#if NUM_BONE_INFLUENCERS>6\ninfluence+=mBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif \n#if NUM_BONE_INFLUENCERS>7\ninfluence+=mBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif \nfinalWorld=finalWorld*influence;\n#endif",bumpVertex:"#if defined(BUMP) || defined(PARALLAX)\n#if defined(TANGENT) && defined(NORMAL)\nvec3 tbnNormal=normalize(normalUpdated);\nvec3 tbnTangent=normalize(tangentUpdated.xyz);\nvec3 tbnBitangent=cross(tbnNormal,tbnTangent)*tangentUpdated.w;\nvTBN=mat3(finalWorld)*mat3(tbnTangent,tbnBitangent,tbnNormal);\n#endif\n#endif",clipPlaneVertex:"#ifdef CLIPPLANE\nfClipDistance=dot(worldPos,vClipPlane);\n#endif",fogVertex:"#ifdef FOG\nvFogDistance=(view*worldPos).xyz;\n#endif",shadowsVertex:"#ifdef SHADOWS\n#if defined(SHADOW{X}) && !defined(SHADOWCUBE{X})\nvPositionFromLight{X}=lightMatrix{X}*worldPos;\nvDepthMetric{X}=((vPositionFromLight{X}.z+light{X}.depthValues.x)/(light{X}.depthValues.y));\n#endif\n#endif",pointCloudVertex:"#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif",logDepthVertex:"#ifdef LOGARITHMICDEPTH\nvFragmentDepth=1.0+gl_Position.w;\ngl_Position.z=log2(max(0.000001,vFragmentDepth))*logarithmicDepthConstant;\n#endif",helperFunctions:"const float PI=3.1415926535897932384626433832795;\nconst float LinearEncodePowerApprox=2.2;\nconst float GammaEncodePowerApprox=1.0/LinearEncodePowerApprox;\nconst vec3 LuminanceEncodeApprox=vec3(0.2126,0.7152,0.0722);\nmat3 transposeMat3(mat3 inMatrix) {\nvec3 i0=inMatrix[0];\nvec3 i1=inMatrix[1];\nvec3 i2=inMatrix[2];\nmat3 outMatrix=mat3(\nvec3(i0.x,i1.x,i2.x),\nvec3(i0.y,i1.y,i2.y),\nvec3(i0.z,i1.z,i2.z)\n);\nreturn outMatrix;\n}\n\nmat3 inverseMat3(mat3 inMatrix) {\nfloat a00=inMatrix[0][0],a01=inMatrix[0][1],a02=inMatrix[0][2];\nfloat a10=inMatrix[1][0],a11=inMatrix[1][1],a12=inMatrix[1][2];\nfloat a20=inMatrix[2][0],a21=inMatrix[2][1],a22=inMatrix[2][2];\nfloat b01=a22*a11-a12*a21;\nfloat b11=-a22*a10+a12*a20;\nfloat b21=a21*a10-a11*a20;\nfloat det=a00*b01+a01*b11+a02*b21;\nreturn mat3(b01,(-a22*a01+a02*a21),(a12*a01-a02*a11),\nb11,(a22*a00-a02*a20),(-a12*a00+a02*a10),\nb21,(-a21*a00+a01*a20),(a11*a00-a01*a10))/det;\n}\nfloat computeFallOff(float value,vec2 clipSpace,float frustumEdgeFalloff)\n{\nfloat mask=smoothstep(1.0-frustumEdgeFalloff,1.0,clamp(dot(clipSpace,clipSpace),0.,1.));\nreturn mix(value,1.0,mask);\n}\nvec3 applyEaseInOut(vec3 x){\nreturn x*x*(3.0-2.0*x);\n}\nvec3 toLinearSpace(vec3 color)\n{\nreturn pow(color,vec3(LinearEncodePowerApprox));\n}\nvec3 toGammaSpace(vec3 color)\n{\nreturn pow(color,vec3(GammaEncodePowerApprox));\n}\nfloat square(float value)\n{\nreturn value*value;\n}\nfloat getLuminance(vec3 color)\n{\nreturn clamp(dot(color,LuminanceEncodeApprox),0.,1.);\n}\n\nfloat getRand(vec2 seed) {\nreturn fract(sin(dot(seed.xy ,vec2(12.9898,78.233)))*43758.5453);\n}\nvec3 dither(vec2 seed,vec3 color) {\nfloat rand=getRand(seed);\ncolor+=mix(-0.5/255.0,0.5/255.0,rand);\ncolor=max(color,0.0);\nreturn color;\n}",lightFragmentDeclaration:"#ifdef LIGHT{X}\nuniform vec4 vLightData{X};\nuniform vec4 vLightDiffuse{X};\n#ifdef SPECULARTERM\nuniform vec3 vLightSpecular{X};\n#else\nvec3 vLightSpecular{X}=vec3(0.);\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\nuniform sampler2D shadowSampler{X};\nuniform mat4 lightMatrix{X};\n#endif\nuniform vec4 shadowsInfo{X};\nuniform vec2 depthValues{X};\n#endif\n#ifdef SPOTLIGHT{X}\nuniform vec4 vLightDirection{X};\n#endif\n#ifdef HEMILIGHT{X}\nuniform vec3 vLightGround{X};\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#endif",lightsFragmentFunctions:"\nstruct lightingInfo\n{\nvec3 diffuse;\n#ifdef SPECULARTERM\nvec3 specular;\n#endif\n#ifdef NDOTL\nfloat ndl;\n#endif\n};\nlightingInfo computeLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 lightVectorW;\nfloat attenuation=1.0;\nif (lightData.w == 0.)\n{\nvec3 direction=lightData.xyz-vPositionW;\nattenuation=max(0.,1.0-length(direction)/range);\nlightVectorW=normalize(direction);\n}\nelse\n{\nlightVectorW=normalize(-lightData.xyz);\n}\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nlightingInfo computeSpotLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec4 lightDirection,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 direction=lightData.xyz-vPositionW;\nvec3 lightVectorW=normalize(direction);\nfloat attenuation=max(0.,1.0-length(direction)/range);\n\nfloat cosAngle=max(0.,dot(lightDirection.xyz,-lightVectorW));\nif (cosAngle>=lightDirection.w)\n{\ncosAngle=max(0.,pow(cosAngle,lightData.w));\nattenuation*=cosAngle;\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nresult.diffuse=vec3(0.);\n#ifdef SPECULARTERM\nresult.specular=vec3(0.);\n#endif\n#ifdef NDOTL\nresult.ndl=0.;\n#endif\nreturn result;\n}\nlightingInfo computeHemisphericLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,vec3 groundColor,float glossiness) {\nlightingInfo result;\n\nfloat ndl=dot(vNormal,lightData.xyz)*0.5+0.5;\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=mix(groundColor,diffuseColor,ndl);\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightData.xyz);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor;\n#endif\nreturn result;\n}\nvec3 computeProjectionTextureDiffuseLighting(sampler2D projectionLightSampler,mat4 textureProjectionMatrix){\nvec4 strq=textureProjectionMatrix*vec4(vPositionW,1.0);\nstrq/=strq.w;\nvec3 textureColor=texture2D(projectionLightSampler,strq.xy).rgb;\n#ifdef PBR\ntextureColor=toLinearSpace(textureColor);\n#endif\nreturn textureColor;\n}",lightUboDeclaration:"#ifdef LIGHT{X}\nuniform Light{X}\n{\nvec4 vLightData;\nvec4 vLightDiffuse;\nvec3 vLightSpecular;\n#ifdef SPOTLIGHT{X}\nvec4 vLightDirection;\n#endif\n#ifdef HEMILIGHT{X}\nvec3 vLightGround;\n#endif\nvec4 shadowsInfo;\nvec2 depthValues;\n} light{X};\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\nuniform sampler2D shadowSampler{X};\nuniform mat4 lightMatrix{X};\n#endif\n#endif\n#endif",defaultVertexDeclaration:"\nuniform mat4 viewProjection;\nuniform mat4 view;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\nuniform mat4 specularMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n",defaultFragmentDeclaration:"uniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nuniform vec3 vEmissiveColor;\n\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY \nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\n#ifndef REFRACTIONMAP_3D\nuniform mat4 refractionMatrix;\n#endif\n#ifdef REFRACTIONFRESNEL\nuniform vec4 refractionLeftColor;\nuniform vec4 refractionRightColor;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\n#endif\n#ifdef DIFFUSEFRESNEL\nuniform vec4 diffuseLeftColor;\nuniform vec4 diffuseRightColor;\n#endif\n#ifdef OPACITYFRESNEL\nuniform vec4 opacityParts;\n#endif\n#ifdef EMISSIVEFRESNEL\nuniform vec4 emissiveLeftColor;\nuniform vec4 emissiveRightColor;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\n#ifdef REFLECTIONMAP_SKYBOX\n#else\n#if defined(REFLECTIONMAP_PLANAR) || defined(REFLECTIONMAP_CUBIC) || defined(REFLECTIONMAP_PROJECTION)\nuniform mat4 reflectionMatrix;\n#endif\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 reflectionLeftColor;\nuniform vec4 reflectionRightColor;\n#endif\n#endif",defaultUboDeclaration:"layout(std140,column_major) uniform;\nuniform Material\n{\nvec4 diffuseLeftColor;\nvec4 diffuseRightColor;\nvec4 opacityParts;\nvec4 reflectionLeftColor;\nvec4 reflectionRightColor;\nvec4 refractionLeftColor;\nvec4 refractionRightColor;\nvec4 emissiveLeftColor; \nvec4 emissiveRightColor;\nvec2 vDiffuseInfos;\nvec2 vAmbientInfos;\nvec2 vOpacityInfos;\nvec2 vReflectionInfos;\nvec2 vEmissiveInfos;\nvec2 vLightmapInfos;\nvec2 vSpecularInfos;\nvec3 vBumpInfos;\nmat4 diffuseMatrix;\nmat4 ambientMatrix;\nmat4 opacityMatrix;\nmat4 reflectionMatrix;\nmat4 emissiveMatrix;\nmat4 lightmapMatrix;\nmat4 specularMatrix;\nmat4 bumpMatrix; \nvec4 vTangentSpaceParams;\nmat4 refractionMatrix;\nvec4 vRefractionInfos;\nvec4 vSpecularColor;\nvec3 vEmissiveColor;\nvec4 vDiffuseColor;\nfloat pointSize; \n};\nuniform Scene {\nmat4 viewProjection;\nmat4 view;\n};",shadowsFragmentFunctions:"#ifdef SHADOWS\n#ifndef SHADOWFLOAT\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}\n#endif\nfloat computeShadowCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadow=textureCube(shadowSampler,directionToLight).x;\n#endif\nif (depth>shadow)\n{\nreturn darkness;\n}\nreturn 1.0;\n}\nfloat computeShadowWithPCFCube(vec3 lightPosition,samplerCube shadowSampler,float mapSize,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\nfloat visibility=1.;\nvec3 poissonDisk[4];\npoissonDisk[0]=vec3(-1.0,1.0,-1.0);\npoissonDisk[1]=vec3(1.0,-1.0,-1.0);\npoissonDisk[2]=vec3(-1.0,-1.0,-1.0);\npoissonDisk[3]=vec3(1.0,-1.0,1.0);\n\n#ifndef SHADOWFLOAT\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize))<depth) visibility-=0.25;\n#else\nif (textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize).x<depth) visibility-=0.25;\n#endif\nreturn min(1.0,visibility+darkness);\n}\nfloat computeShadowWithESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness); \nreturn esm;\n}\nfloat computeShadowWithCloseESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn esm;\n}\nfloat computeShadow(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadow=texture2D(shadowSampler,uv).x;\n#endif\nif (shadowPixelDepth>shadow)\n{\nreturn computeFallOff(darkness,clipSpace.xy,frustumEdgeFalloff);\n}\nreturn 1.;\n}\nfloat computeShadowWithPCF(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float mapSize,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\nfloat visibility=1.;\nvec2 poissonDisk[4];\npoissonDisk[0]=vec2(-0.94201624,-0.39906216);\npoissonDisk[1]=vec2(0.94558609,-0.76890725);\npoissonDisk[2]=vec2(-0.094184101,-0.92938870);\npoissonDisk[3]=vec2(0.34495938,0.29387760);\n\n#ifndef SHADOWFLOAT\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[0]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[1]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[2]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[3]*mapSize))<shadowPixelDepth) visibility-=0.25;\n#else\nif (texture2D(shadowSampler,uv+poissonDisk[0]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[1]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[2]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[3]*mapSize).x<shadowPixelDepth) visibility-=0.25;\n#endif\nreturn computeFallOff(min(1.0,visibility+darkness),clipSpace.xy,frustumEdgeFalloff);\n}\nfloat computeShadowWithESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\nfloat computeShadowWithCloseESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0); \n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\n#endif\n",fresnelFunction:"#ifdef FRESNEL\nfloat computeFresnelTerm(vec3 viewDirection,vec3 worldNormal,float bias,float power)\n{\nfloat fresnelTerm=pow(bias+abs(dot(viewDirection,worldNormal)),power);\nreturn clamp(fresnelTerm,0.,1.);\n}\n#endif",reflectionFunction:"vec3 computeReflectionCoords(vec4 worldPos,vec3 worldNormal)\n{\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvec3 direction=normalize(vDirectionW);\nfloat t=clamp(direction.y*-0.5+0.5,0.,1.0);\nfloat s=atan(direction.z,direction.x)*RECIPROCAL_PI2+0.5;\n#ifdef REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED\nreturn vec3(1.0-s,t,0);\n#else\nreturn vec3(s,t,0);\n#endif\n#endif\n#ifdef REFLECTIONMAP_EQUIRECTANGULAR\nvec3 cameraToVertex=normalize(worldPos.xyz-vEyePosition.xyz);\nvec3 r=reflect(cameraToVertex,worldNormal);\nfloat t=clamp(r.y*-0.5+0.5,0.,1.0);\nfloat s=atan(r.z,r.x)*RECIPROCAL_PI2+0.5;\nreturn vec3(s,t,0);\n#endif\n#ifdef REFLECTIONMAP_SPHERICAL\nvec3 viewDir=normalize(vec3(view*worldPos));\nvec3 viewNormal=normalize(vec3(view*vec4(worldNormal,0.0)));\nvec3 r=reflect(viewDir,viewNormal);\nr.z=r.z-1.0;\nfloat m=2.0*length(r);\nreturn vec3(r.x/m+0.5,1.0-r.y/m-0.5,0);\n#endif\n#ifdef REFLECTIONMAP_PLANAR\nvec3 viewDir=worldPos.xyz-vEyePosition.xyz;\nvec3 coords=normalize(reflect(viewDir,worldNormal));\nreturn vec3(reflectionMatrix*vec4(coords,1));\n#endif\n#ifdef REFLECTIONMAP_CUBIC\nvec3 viewDir=worldPos.xyz-vEyePosition.xyz;\nvec3 coords=reflect(viewDir,worldNormal);\n#ifdef INVERTCUBICMAP\ncoords.y=1.0-coords.y;\n#endif\nreturn vec3(reflectionMatrix*vec4(coords,0));\n#endif\n#ifdef REFLECTIONMAP_PROJECTION\nreturn vec3(reflectionMatrix*(view*worldPos));\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nreturn vPositionUVW;\n#endif\n#ifdef REFLECTIONMAP_EXPLICIT\nreturn vec3(0,0,0);\n#endif\n}",imageProcessingDeclaration:"#ifdef EXPOSURE\nuniform float exposureLinear;\n#endif\n#ifdef CONTRAST\nuniform float contrast;\n#endif\n#ifdef VIGNETTE\nuniform vec2 vInverseScreenSize;\nuniform vec4 vignetteSettings1;\nuniform vec4 vignetteSettings2;\n#endif\n#ifdef COLORCURVES\nuniform vec4 vCameraColorCurveNegative;\nuniform vec4 vCameraColorCurveNeutral;\nuniform vec4 vCameraColorCurvePositive;\n#endif\n#ifdef COLORGRADING\n#ifdef COLORGRADING3D\nuniform highp sampler3D txColorTransform;\n#else\nuniform sampler2D txColorTransform;\n#endif\nuniform vec4 colorTransformSettings;\n#endif",imageProcessingFunctions:"#if defined(COLORGRADING) && !defined(COLORGRADING3D)\n\nvec3 sampleTexture3D(sampler2D colorTransform,vec3 color,vec2 sampler3dSetting)\n{\nfloat sliceSize=2.0*sampler3dSetting.x; \n#ifdef SAMPLER3DGREENDEPTH\nfloat sliceContinuous=(color.g-sampler3dSetting.x)*sampler3dSetting.y;\n#else\nfloat sliceContinuous=(color.b-sampler3dSetting.x)*sampler3dSetting.y;\n#endif\nfloat sliceInteger=floor(sliceContinuous);\n\n\nfloat sliceFraction=sliceContinuous-sliceInteger;\n#ifdef SAMPLER3DGREENDEPTH\nvec2 sliceUV=color.rb;\n#else\nvec2 sliceUV=color.rg;\n#endif\nsliceUV.x*=sliceSize;\nsliceUV.x+=sliceInteger*sliceSize;\nsliceUV=clamp(sliceUV,0.,1.);\nvec4 slice0Color=texture2D(colorTransform,sliceUV);\nsliceUV.x+=sliceSize;\nsliceUV=clamp(sliceUV,0.,1.);\nvec4 slice1Color=texture2D(colorTransform,sliceUV);\nvec3 result=mix(slice0Color.rgb,slice1Color.rgb,sliceFraction);\n#ifdef SAMPLER3DBGRMAP\ncolor.rgb=result.rgb;\n#else\ncolor.rgb=result.bgr;\n#endif\nreturn color;\n}\n#endif\nvec4 applyImageProcessing(vec4 result) {\n#ifdef EXPOSURE\nresult.rgb*=exposureLinear;\n#endif\n#ifdef VIGNETTE\n\nvec2 viewportXY=gl_FragCoord.xy*vInverseScreenSize;\nviewportXY=viewportXY*2.0-1.0;\nvec3 vignetteXY1=vec3(viewportXY*vignetteSettings1.xy+vignetteSettings1.zw,1.0);\nfloat vignetteTerm=dot(vignetteXY1,vignetteXY1);\nfloat vignette=pow(vignetteTerm,vignetteSettings2.w);\n\nvec3 vignetteColor=vignetteSettings2.rgb;\n#ifdef VIGNETTEBLENDMODEMULTIPLY\nvec3 vignetteColorMultiplier=mix(vignetteColor,vec3(1,1,1),vignette);\nresult.rgb*=vignetteColorMultiplier;\n#endif\n#ifdef VIGNETTEBLENDMODEOPAQUE\nresult.rgb=mix(vignetteColor,result.rgb,vignette);\n#endif\n#endif\n#ifdef TONEMAPPING\nconst float tonemappingCalibration=1.590579;\nresult.rgb=1.0-exp2(-tonemappingCalibration*result.rgb);\n#endif\n\nresult.rgb=toGammaSpace(result.rgb);\nresult.rgb=clamp(result.rgb,0.0,1.0);\n#ifdef CONTRAST\n\nvec3 resultHighContrast=applyEaseInOut(result.rgb);\nif (contrast<1.0) {\n\nresult.rgb=mix(vec3(0.5,0.5,0.5),result.rgb,contrast);\n} else {\n\nresult.rgb=mix(result.rgb,resultHighContrast,contrast-1.0);\n}\n#endif\n\n#ifdef COLORGRADING\nvec3 colorTransformInput=result.rgb*colorTransformSettings.xxx+colorTransformSettings.yyy;\n#ifdef COLORGRADING3D\nvec3 colorTransformOutput=texture(txColorTransform,colorTransformInput).rgb;\n#else\nvec3 colorTransformOutput=sampleTexture3D(txColorTransform,colorTransformInput,colorTransformSettings.yz).rgb;\n#endif\nresult.rgb=mix(result.rgb,colorTransformOutput,colorTransformSettings.www);\n#endif\n#ifdef COLORCURVES\n\nfloat luma=getLuminance(result.rgb);\nvec2 curveMix=clamp(vec2(luma*3.0-1.5,luma*-3.0+1.5),vec2(0.0),vec2(1.0));\nvec4 colorCurve=vCameraColorCurveNeutral+curveMix.x*vCameraColorCurvePositive-curveMix.y*vCameraColorCurveNegative;\nresult.rgb*=colorCurve.rgb;\nresult.rgb=mix(vec3(luma),result.rgb,colorCurve.a);\n#endif\nreturn result;\n}",bumpFragmentFunctions:"#ifdef BUMP\n#if BUMPDIRECTUV == 1\n#define vBumpUV vMainUV1\n#elif BUMPDIRECTUV == 2\n#define vBumpUV vMainUV2\n#else\nvarying vec2 vBumpUV;\n#endif\nuniform sampler2D bumpSampler;\n#if defined(TANGENT) && defined(NORMAL) \nvarying mat3 vTBN;\n#endif\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\n\nuv=gl_FrontFacing ? uv : -uv;\n\nvec3 dp1=dFdx(p);\nvec3 dp2=dFdy(p);\nvec2 duv1=dFdx(uv);\nvec2 duv2=dFdy(uv);\n\nvec3 dp2perp=cross(dp2,normal);\nvec3 dp1perp=cross(normal,dp1);\nvec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;\nvec3 bitangent=dp2perp*duv1.y+dp1perp*duv2.y;\n\ntangent*=vTangentSpaceParams.x;\nbitangent*=vTangentSpaceParams.y;\n\nfloat invmax=inversesqrt(max(dot(tangent,tangent),dot(bitangent,bitangent)));\nreturn mat3(tangent*invmax,bitangent*invmax,normal);\n}\nvec3 perturbNormal(mat3 cotangentFrame,vec2 uv)\n{\nvec3 map=texture2D(bumpSampler,uv).xyz;\nmap=map*2.0-1.0;\n#ifdef NORMALXYSCALE\nmap=normalize(map*vec3(vBumpInfos.y,vBumpInfos.y,1.0));\n#endif\nreturn normalize(cotangentFrame*map);\n}\n#ifdef PARALLAX\nconst float minSamples=4.;\nconst float maxSamples=15.;\nconst int iMaxSamples=15;\n\nvec2 parallaxOcclusion(vec3 vViewDirCoT,vec3 vNormalCoT,vec2 texCoord,float parallaxScale) {\nfloat parallaxLimit=length(vViewDirCoT.xy)/vViewDirCoT.z;\nparallaxLimit*=parallaxScale;\nvec2 vOffsetDir=normalize(vViewDirCoT.xy);\nvec2 vMaxOffset=vOffsetDir*parallaxLimit;\nfloat numSamples=maxSamples+(dot(vViewDirCoT,vNormalCoT)*(minSamples-maxSamples));\nfloat stepSize=1.0/numSamples;\n\nfloat currRayHeight=1.0;\nvec2 vCurrOffset=vec2(0,0);\nvec2 vLastOffset=vec2(0,0);\nfloat lastSampledHeight=1.0;\nfloat currSampledHeight=1.0;\nfor (int i=0; i<iMaxSamples; i++)\n{\ncurrSampledHeight=texture2D(bumpSampler,vBumpUV+vCurrOffset).w;\n\nif (currSampledHeight>currRayHeight)\n{\nfloat delta1=currSampledHeight-currRayHeight;\nfloat delta2=(currRayHeight+stepSize)-lastSampledHeight;\nfloat ratio=delta1/(delta1+delta2);\nvCurrOffset=(ratio)* vLastOffset+(1.0-ratio)*vCurrOffset;\n\nbreak;\n}\nelse\n{\ncurrRayHeight-=stepSize;\nvLastOffset=vCurrOffset;\nvCurrOffset+=stepSize*vMaxOffset;\nlastSampledHeight=currSampledHeight;\n}\n}\nreturn vCurrOffset;\n}\nvec2 parallaxOffset(vec3 viewDir,float heightScale)\n{\n\nfloat height=texture2D(bumpSampler,vBumpUV).w;\nvec2 texCoordOffset=heightScale*viewDir.xy*height;\nreturn -texCoordOffset;\n}\n#endif\n#endif",clipPlaneFragmentDeclaration:"#ifdef CLIPPLANE\nvarying float fClipDistance;\n#endif",fogFragmentDeclaration:"#ifdef FOG\n#define FOGMODE_NONE 0.\n#define FOGMODE_EXP 1.\n#define FOGMODE_EXP2 2.\n#define FOGMODE_LINEAR 3.\n#define E 2.71828\nuniform vec4 vFogInfos;\nuniform vec3 vFogColor;\nvarying vec3 vFogDistance;\nfloat CalcFogFactor()\n{\nfloat fogCoeff=1.0;\nfloat fogStart=vFogInfos.y;\nfloat fogEnd=vFogInfos.z;\nfloat fogDensity=vFogInfos.w;\nfloat fogDistance=length(vFogDistance);\nif (FOGMODE_LINEAR == vFogInfos.x)\n{\nfogCoeff=(fogEnd-fogDistance)/(fogEnd-fogStart);\n}\nelse if (FOGMODE_EXP == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDensity);\n}\nelse if (FOGMODE_EXP2 == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDistance*fogDensity*fogDensity);\n}\nreturn clamp(fogCoeff,0.0,1.0);\n}\n#endif",clipPlaneFragment:"#ifdef CLIPPLANE\nif (fClipDistance>0.0)\n{\ndiscard;\n}\n#endif",bumpFragment:"vec2 uvOffset=vec2(0.0,0.0);\n#if defined(BUMP) || defined(PARALLAX)\n#ifdef NORMALXYSCALE\nfloat normalScale=1.0;\n#else \nfloat normalScale=vBumpInfos.y;\n#endif\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBN=vTBN;\n#else\nmat3 TBN=cotangent_frame(normalW*normalScale,vPositionW,vBumpUV);\n#endif\n#endif\n#ifdef PARALLAX\nmat3 invTBN=transposeMat3(TBN);\n#ifdef PARALLAXOCCLUSION\nuvOffset=parallaxOcclusion(invTBN*-viewDirectionW,invTBN*normalW,vBumpUV,vBumpInfos.z);\n#else\nuvOffset=parallaxOffset(invTBN*viewDirectionW,vBumpInfos.z);\n#endif\n#endif\n#ifdef BUMP\nnormalW=perturbNormal(TBN,vBumpUV+uvOffset);\n#endif",lightFragment:"#ifdef LIGHT{X}\n#if defined(SHADOWONLY) || (defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X}))\n\n#else\n#ifdef PBR\n#ifdef SPOTLIGHT{X}\ninfo=computeSpotLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDirection,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,roughness,NdotV,specularEnvironmentR0,specularEnvironmentR90,NdotL);\n#endif\n#ifdef HEMILIGHT{X}\ninfo=computeHemisphericLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightGround,roughness,NdotV,specularEnvironmentR0,specularEnvironmentR90,NdotL);\n#endif\n#if defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\ninfo=computeLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,roughness,NdotV,specularEnvironmentR0,specularEnvironmentR90,NdotL);\n#endif\n#else\n#ifdef SPOTLIGHT{X}\ninfo=computeSpotLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDirection,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,glossiness);\n#endif\n#ifdef HEMILIGHT{X}\ninfo=computeHemisphericLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightGround,glossiness);\n#endif\n#if defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\ninfo=computeLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,glossiness);\n#endif\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\ninfo.diffuse*=computeProjectionTextureDiffuseLighting(projectionLightSampler{X},textureProjectionMatrix{X});\n#endif\n#endif\n#ifdef SHADOW{X}\n#ifdef SHADOWCLOSEESM{X}\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithCloseESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithCloseESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#else\n#ifdef SHADOWESM{X}\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#else \n#ifdef SHADOWPCF{X}\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithPCFCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadowWithPCF(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#else\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadow(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#endif\n#endif\n#endif\n#ifdef SHADOWONLY\n#ifndef SHADOWINUSE\n#define SHADOWINUSE\n#endif\nglobalShadow+=shadow;\nshadowLightCount+=1.0;\n#endif\n#else\nshadow=1.;\n#endif\n#ifndef SHADOWONLY\n#ifdef CUSTOMUSERLIGHTING\ndiffuseBase+=computeCustomDiffuseLighting(info,diffuseBase,shadow);\n#ifdef SPECULARTERM\nspecularBase+=computeCustomSpecularLighting(info,specularBase,shadow);\n#endif\n#elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\ndiffuseBase+=lightmapColor*shadow;\n#ifdef SPECULARTERM\n#ifndef LIGHTMAPNOSPECULAR{X}\nspecularBase+=info.specular*shadow*lightmapColor;\n#endif\n#endif\n#else\ndiffuseBase+=info.diffuse*shadow;\n#ifdef SPECULARTERM\nspecularBase+=info.specular*shadow;\n#endif\n#endif\n#endif\n#endif",logDepthFragment:"#ifdef LOGARITHMICDEPTH\ngl_FragDepthEXT=log2(vFragmentDepth)*logarithmicDepthConstant*0.5;\n#endif",fogFragment:"#ifdef FOG\nfloat fog=CalcFogFactor();\ncolor.rgb=fog*color.rgb+(1.0-fog)*vFogColor;\n#endif",pbrVertexDeclaration:"uniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef ALBEDO\nuniform mat4 albedoMatrix;\nuniform vec2 vAlbedoInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec3 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#ifdef REFLECTIVITY \nuniform vec3 vReflectivityInfos;\nuniform mat4 reflectivityMatrix;\n#endif\n#ifdef MICROSURFACEMAP\nuniform vec2 vMicroSurfaceSamplerInfos;\nuniform mat4 microSurfaceSamplerMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\nuniform mat4 refractionMatrix;\nuniform vec3 vRefractionMicrosurfaceInfos;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#endif\n",pbrFragmentDeclaration:"uniform vec3 vReflectionColor;\nuniform vec4 vAlbedoColor;\n\nuniform vec4 vLightingIntensity;\nuniform vec4 vReflectivityColor;\nuniform vec3 vEmissiveColor;\n\n#ifdef ALBEDO\nuniform vec2 vAlbedoInfos;\n#endif\n#ifdef AMBIENT\nuniform vec3 vAmbientInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#ifdef OPACITY \nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef REFLECTIVITY\nuniform vec3 vReflectivityInfos;\n#endif\n#ifdef MICROSURFACEMAP\nuniform vec2 vMicroSurfaceSamplerInfos;\n#endif\n\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif\n\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\nuniform mat4 refractionMatrix;\nuniform vec3 vRefractionMicrosurfaceInfos;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#endif",pbrUboDeclaration:"layout(std140,column_major) uniform;\nuniform Material\n{\nuniform vec2 vAlbedoInfos;\nuniform vec3 vAmbientInfos;\nuniform vec2 vOpacityInfos;\nuniform vec2 vEmissiveInfos;\nuniform vec2 vLightmapInfos;\nuniform vec3 vReflectivityInfos;\nuniform vec2 vMicroSurfaceSamplerInfos;\nuniform vec4 vRefractionInfos;\nuniform vec2 vReflectionInfos;\nuniform vec3 vBumpInfos;\nuniform mat4 albedoMatrix;\nuniform mat4 ambientMatrix;\nuniform mat4 opacityMatrix;\nuniform mat4 emissiveMatrix;\nuniform mat4 lightmapMatrix;\nuniform mat4 reflectivityMatrix;\nuniform mat4 microSurfaceSamplerMatrix;\nuniform mat4 bumpMatrix;\nuniform vec2 vTangentSpaceParams;\nuniform mat4 refractionMatrix;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionColor;\nuniform vec4 vAlbedoColor;\nuniform vec4 vLightingIntensity;\nuniform vec3 vRefractionMicrosurfaceInfos;\nuniform vec3 vReflectionMicrosurfaceInfos;\nuniform vec4 vReflectivityColor;\nuniform vec3 vEmissiveColor;\nuniform float pointSize;\n};\nuniform Scene {\nmat4 viewProjection;\nmat4 view;\n};",pbrFunctions:"\n#define RECIPROCAL_PI2 0.15915494\n#define FRESNEL_MAXIMUM_ON_ROUGH 0.25\n\nconst float kRougnhessToAlphaScale=0.1;\nconst float kRougnhessToAlphaOffset=0.29248125;\nfloat convertRoughnessToAverageSlope(float roughness)\n{\n\nconst float kMinimumVariance=0.0005;\nfloat alphaG=square(roughness)+kMinimumVariance;\nreturn alphaG;\n}\n\nfloat smithVisibilityG1_TrowbridgeReitzGGX(float dot,float alphaG)\n{\nfloat tanSquared=(1.0-dot*dot)/(dot*dot);\nreturn 2.0/(1.0+sqrt(1.0+alphaG*alphaG*tanSquared));\n}\nfloat smithVisibilityG_TrowbridgeReitzGGX_Walter(float NdotL,float NdotV,float alphaG)\n{\nreturn smithVisibilityG1_TrowbridgeReitzGGX(NdotL,alphaG)*smithVisibilityG1_TrowbridgeReitzGGX(NdotV,alphaG);\n}\n\n\nfloat normalDistributionFunction_TrowbridgeReitzGGX(float NdotH,float alphaG)\n{\n\n\n\nfloat a2=square(alphaG);\nfloat d=NdotH*NdotH*(a2-1.0)+1.0;\nreturn a2/(PI*d*d);\n}\nvec3 fresnelSchlickGGX(float VdotH,vec3 reflectance0,vec3 reflectance90)\n{\nreturn reflectance0+(reflectance90-reflectance0)*pow(clamp(1.0-VdotH,0.,1.),5.0);\n}\nvec3 fresnelSchlickEnvironmentGGX(float VdotN,vec3 reflectance0,vec3 reflectance90,float smoothness)\n{\n\nfloat weight=mix(FRESNEL_MAXIMUM_ON_ROUGH,1.0,smoothness);\nreturn reflectance0+weight*(reflectance90-reflectance0)*pow(clamp(1.0-VdotN,0.,1.),5.0);\n}\n\nvec3 computeSpecularTerm(float NdotH,float NdotL,float NdotV,float VdotH,float roughness,vec3 reflectance0,vec3 reflectance90)\n{\nfloat alphaG=convertRoughnessToAverageSlope(roughness);\nfloat distribution=normalDistributionFunction_TrowbridgeReitzGGX(NdotH,alphaG);\nfloat visibility=smithVisibilityG_TrowbridgeReitzGGX_Walter(NdotL,NdotV,alphaG);\nvisibility/=(4.0*NdotL*NdotV); \nfloat specTerm=max(0.,visibility*distribution)*NdotL;\nvec3 fresnel=fresnelSchlickGGX(VdotH,reflectance0,reflectance90);\nreturn fresnel*specTerm;\n}\nfloat computeDiffuseTerm(float NdotL,float NdotV,float VdotH,float roughness)\n{\n\n\nfloat diffuseFresnelNV=pow(clamp(1.0-NdotL,0.000001,1.),5.0);\nfloat diffuseFresnelNL=pow(clamp(1.0-NdotV,0.000001,1.),5.0);\nfloat diffuseFresnel90=0.5+2.0*VdotH*VdotH*roughness;\nfloat fresnel =\n(1.0+(diffuseFresnel90-1.0)*diffuseFresnelNL) *\n(1.0+(diffuseFresnel90-1.0)*diffuseFresnelNV);\nreturn fresnel*NdotL/PI;\n}\nfloat adjustRoughnessFromLightProperties(float roughness,float lightRadius,float lightDistance)\n{\n#ifdef USEPHYSICALLIGHTFALLOFF\n\nfloat lightRoughness=lightRadius/lightDistance;\n\nfloat totalRoughness=clamp(lightRoughness+roughness,0.,1.);\nreturn totalRoughness;\n#else\nreturn roughness;\n#endif\n}\nfloat computeDefaultMicroSurface(float microSurface,vec3 reflectivityColor)\n{\nconst float kReflectivityNoAlphaWorkflow_SmoothnessMax=0.95;\nfloat reflectivityLuminance=getLuminance(reflectivityColor);\nfloat reflectivityLuma=sqrt(reflectivityLuminance);\nmicroSurface=reflectivityLuma*kReflectivityNoAlphaWorkflow_SmoothnessMax;\nreturn microSurface;\n}\n\n\nfloat fresnelGrazingReflectance(float reflectance0) {\nfloat reflectance90=clamp(reflectance0*25.0,0.0,1.0);\nreturn reflectance90;\n}\n\n\n#define UNPACK_LOD(x) (1.0-x)*255.0\nfloat getLodFromAlphaG(float cubeMapDimensionPixels,float alphaG,float NdotV) {\nfloat microsurfaceAverageSlope=alphaG;\n\n\n\n\n\n\nmicrosurfaceAverageSlope*=sqrt(abs(NdotV));\nfloat microsurfaceAverageSlopeTexels=microsurfaceAverageSlope*cubeMapDimensionPixels;\nfloat lod=log2(microsurfaceAverageSlopeTexels);\nreturn lod;\n}\nfloat environmentRadianceOcclusion(float ambientOcclusion,float NdotVUnclamped) {\n\n\nfloat temp=NdotVUnclamped+ambientOcclusion;\nreturn clamp(square(temp)-1.0+ambientOcclusion,0.0,1.0);\n}\nfloat environmentHorizonOcclusion(vec3 reflection,vec3 normal) {\n\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflection.z*=-1.0;\n#endif\nfloat temp=clamp( 1.0+1.1*dot(reflection,normal),0.0,1.0);\nreturn square(temp);\n}",harmonicsFunctions:"#ifdef USESPHERICALFROMREFLECTIONMAP\nuniform vec3 vSphericalX;\nuniform vec3 vSphericalY;\nuniform vec3 vSphericalZ;\nuniform vec3 vSphericalXX_ZZ;\nuniform vec3 vSphericalYY_ZZ;\nuniform vec3 vSphericalZZ;\nuniform vec3 vSphericalXY;\nuniform vec3 vSphericalYZ;\nuniform vec3 vSphericalZX;\nvec3 quaternionVectorRotation_ScaledSqrtTwo(vec4 Q,vec3 V){\nvec3 T=cross(Q.xyz,V);\nT+=Q.www*V;\nreturn cross(Q.xyz,T)+V;\n}\nvec3 environmentIrradianceJones(vec3 normal)\n{\n\n\n\n\n\n\n\n\n\nfloat Nx=normal.x;\nfloat Ny=normal.y;\nfloat Nz=normal.z;\nvec3 C1=vSphericalZZ.rgb;\nvec3 Cx=vSphericalX.rgb;\nvec3 Cy=vSphericalY.rgb;\nvec3 Cz=vSphericalZ.rgb;\nvec3 Cxx_zz=vSphericalXX_ZZ.rgb;\nvec3 Cyy_zz=vSphericalYY_ZZ.rgb;\nvec3 Cxy=vSphericalXY.rgb;\nvec3 Cyz=vSphericalYZ.rgb;\nvec3 Czx=vSphericalZX.rgb;\nvec3 a1=Cyy_zz*Ny+Cy;\nvec3 a2=Cyz*Nz+a1;\nvec3 b1=Czx*Nz+Cx;\nvec3 b2=Cxy*Ny+b1;\nvec3 b3=Cxx_zz*Nx+b2;\nvec3 t1=Cz*Nz+C1;\nvec3 t2=a2*Ny+t1;\nvec3 t3=b3*Nx+t2;\nreturn t3;\n}\n#endif",pbrLightFunctions:"\nstruct lightingInfo\n{\nvec3 diffuse;\n#ifdef SPECULARTERM\nvec3 specular;\n#endif\n};\nfloat computeDistanceLightFalloff(vec3 lightOffset,float lightDistanceSquared,float range)\n{ \n#ifdef USEPHYSICALLIGHTFALLOFF\nfloat lightDistanceFalloff=1.0/((lightDistanceSquared+0.001));\n#else\nfloat lightDistanceFalloff=max(0.,1.0-length(lightOffset)/range);\n#endif\nreturn lightDistanceFalloff;\n}\nfloat computeDirectionalLightFalloff(vec3 lightDirection,vec3 directionToLightCenterW,float cosHalfAngle,float exponent)\n{\nfloat falloff=0.0;\n#ifdef USEPHYSICALLIGHTFALLOFF\nconst float kMinusLog2ConeAngleIntensityRatio=6.64385618977; \n\n\n\n\n\nfloat concentrationKappa=kMinusLog2ConeAngleIntensityRatio/(1.0-cosHalfAngle);\n\n\nvec4 lightDirectionSpreadSG=vec4(-lightDirection*concentrationKappa,-concentrationKappa);\nfalloff=exp2(dot(vec4(directionToLightCenterW,1.0),lightDirectionSpreadSG));\n#else\nfloat cosAngle=max(0.000000000000001,dot(-lightDirection,directionToLightCenterW));\nif (cosAngle>=cosHalfAngle)\n{\nfalloff=max(0.,pow(cosAngle,exponent));\n}\n#endif\nreturn falloff;\n}\nlightingInfo computeLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,float rangeRadius,float roughness,float NdotV,vec3 reflectance0,vec3 reflectance90,out float NdotL) {\nlightingInfo result;\nvec3 lightDirection;\nfloat attenuation=1.0;\nfloat lightDistance;\n\nif (lightData.w == 0.)\n{\nvec3 lightOffset=lightData.xyz-vPositionW;\nfloat lightDistanceSquared=dot(lightOffset,lightOffset);\nattenuation=computeDistanceLightFalloff(lightOffset,lightDistanceSquared,rangeRadius);\nlightDistance=sqrt(lightDistanceSquared);\nlightDirection=normalize(lightOffset);\n}\n\nelse\n{\nlightDistance=length(-lightData.xyz);\nlightDirection=normalize(-lightData.xyz);\n}\n\nroughness=adjustRoughnessFromLightProperties(roughness,rangeRadius,lightDistance);\n\nvec3 H=normalize(viewDirectionW+lightDirection);\nNdotL=clamp(dot(vNormal,lightDirection),0.00000000001,1.0);\nfloat VdotH=clamp(dot(viewDirectionW,H),0.0,1.0);\nfloat diffuseTerm=computeDiffuseTerm(NdotL,NdotV,VdotH,roughness);\nresult.diffuse=diffuseTerm*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nfloat NdotH=clamp(dot(vNormal,H),0.000000000001,1.0);\nvec3 specTerm=computeSpecularTerm(NdotH,NdotL,NdotV,VdotH,roughness,reflectance0,reflectance90);\nresult.specular=specTerm*diffuseColor*attenuation;\n#endif\nreturn result;\n}\nlightingInfo computeSpotLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec4 lightDirection,vec3 diffuseColor,vec3 specularColor,float rangeRadius,float roughness,float NdotV,vec3 reflectance0,vec3 reflectance90,out float NdotL) {\nlightingInfo result;\nvec3 lightOffset=lightData.xyz-vPositionW;\nvec3 directionToLightCenterW=normalize(lightOffset);\n\nfloat lightDistanceSquared=dot(lightOffset,lightOffset);\nfloat attenuation=computeDistanceLightFalloff(lightOffset,lightDistanceSquared,rangeRadius);\n\nfloat directionalAttenuation=computeDirectionalLightFalloff(lightDirection.xyz,directionToLightCenterW,lightDirection.w,lightData.w);\nattenuation*=directionalAttenuation;\n\nfloat lightDistance=sqrt(lightDistanceSquared);\nroughness=adjustRoughnessFromLightProperties(roughness,rangeRadius,lightDistance);\n\nvec3 H=normalize(viewDirectionW+directionToLightCenterW);\nNdotL=clamp(dot(vNormal,directionToLightCenterW),0.000000000001,1.0);\nfloat VdotH=clamp(dot(viewDirectionW,H),0.0,1.0);\nfloat diffuseTerm=computeDiffuseTerm(NdotL,NdotV,VdotH,roughness);\nresult.diffuse=diffuseTerm*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nfloat NdotH=clamp(dot(vNormal,H),0.000000000001,1.0);\nvec3 specTerm=computeSpecularTerm(NdotH,NdotL,NdotV,VdotH,roughness,reflectance0,reflectance90);\nresult.specular=specTerm*diffuseColor*attenuation;\n#endif\nreturn result;\n}\nlightingInfo computeHemisphericLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,vec3 groundColor,float roughness,float NdotV,vec3 reflectance0,vec3 reflectance90,out float NdotL) {\nlightingInfo result;\n\n\n\nNdotL=dot(vNormal,lightData.xyz)*0.5+0.5;\nresult.diffuse=mix(groundColor,diffuseColor,NdotL);\n#ifdef SPECULARTERM\n\nvec3 lightVectorW=normalize(lightData.xyz);\nvec3 H=normalize(viewDirectionW+lightVectorW);\nfloat NdotH=clamp(dot(vNormal,H),0.000000000001,1.0);\nNdotL=clamp(NdotL,0.000000000001,1.0);\nfloat VdotH=clamp(dot(viewDirectionW,H),0.0,1.0);\nvec3 specTerm=computeSpecularTerm(NdotH,NdotL,NdotV,VdotH,roughness,reflectance0,reflectance90);\nresult.specular=specTerm*diffuseColor;\n#endif\nreturn result;\n}",mrtFragmentDeclaration:"#if __VERSION__>=200\nlayout(location=0) out vec4 glFragData[{X}];\n#endif\n",bones300Declaration:"#if NUM_BONE_INFLUENCERS>0\nuniform mat4 mBones[BonesPerMesh];\nin vec4 matricesIndices;\nin vec4 matricesWeights;\n#if NUM_BONE_INFLUENCERS>4\nin vec4 matricesIndicesExtra;\nin vec4 matricesWeightsExtra;\n#endif\n#endif",instances300Declaration:"#ifdef INSTANCES\nin vec4 world0;\nin vec4 world1;\nin vec4 world2;\nin vec4 world3;\n#else\nuniform mat4 world;\n#endif",kernelBlurFragment:"#ifdef DOF\nsampleDepth=sampleDistance(sampleCoord{X});\nfactor=clamp(1.0-((centerSampleDepth-sampleDepth)/centerSampleDepth),0.0,1.0);\ncomputedWeight=KERNEL_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCoord{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCoord{X})*computedWeight;\n#endif",kernelBlurFragment2:"#ifdef DOF\nsampleDepth=sampleDistance(sampleCoord{X});\nfactor=clamp(1.0-((centerSampleDepth-sampleDepth)/centerSampleDepth),0.0,1.0);\ncomputedWeight=KERNEL_DEP_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_DEP_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X})*computedWeight;\n#endif",kernelBlurVaryingDeclaration:"varying vec2 sampleCoord{X};",kernelBlurVertex:"sampleCoord{X}=sampleCenter+delta*KERNEL_OFFSET{X};",backgroundVertexDeclaration:"uniform mat4 view;\nuniform mat4 viewProjection;\nuniform float shadowLevel;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif",backgroundFragmentDeclaration:" uniform vec4 vPrimaryColor;\nuniform vec4 vSecondaryColor;\nuniform vec4 vTertiaryColor;\nuniform float shadowLevel;\nuniform float alpha;\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#endif\n#if defined(REFLECTIONFRESNEL) || defined(OPACITYFRESNEL)\nuniform vec3 vBackgroundCenter;\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 vReflectionControl;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif",backgroundUboDeclaration:"layout(std140,column_major) uniform;\nuniform Material\n{\nuniform vec4 vPrimaryColor;\nuniform vec4 vSecondaryColor;\nuniform vec4 vTertiaryColor;\nuniform vec2 vDiffuseInfos;\nuniform vec2 vReflectionInfos;\nuniform mat4 diffuseMatrix;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\nuniform float pointSize;\nuniform float shadowLevel;\nuniform float alpha;\n#if defined(REFLECTIONFRESNEL) || defined(OPACITYFRESNEL)\nuniform vec3 vBackgroundCenter;\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 vReflectionControl;\n#endif\n};\nuniform Scene {\nmat4 viewProjection;\nmat4 view;\n};"},function(i,n){var r=n();i&&i.BABYLON||(("undefined"!=typeof e?e:"undefined"!=typeof window?window:this).BABYLON=r,t.exports=r)}(this,function(){return l})}).call(e,i("GTd5"))},XecN:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("GTlS"),r=new(i("wclm").a)(n.a)},Xfi0:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("nfFB"),r=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.left=t,this.right=t+i,this.top=e,this.bottom=e+n}return Object.defineProperty(t.prototype,"width",{get:function(){return this.right-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!0,configurable:!0}),t.prototype.getCentre=function(){var t=this.width,e=this.height;return n.a.instance.borrow(this.left+t/2,this.top+e/2)},t}()},Xgfo:function(t,e,i){"use strict";e.decode=e.parse=i("rSoR"),e.encode=e.stringify=i("mTPF")},XvLI:function(t,e,i){t.exports=i("dJzE")},YRqN:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("E9/g"),r=i("PAZ8"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var s=function(t){function e(e,i,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=i,this.delay=n}return o(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new a(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(r.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(r.a.createError(t))},e.prototype._complete=function(){this.scheduleMessage(r.a.createComplete())},e}(n.a),a=function(){return function(t,e){this.notification=t,this.destination=e}}()},YXpL:function(t,e,i){"use strict";i.d(e,"b",function(){return p}),i.d(e,"a",function(){return h});var n=i("LMZF"),r=i("j5BN"),o=i("V8+5"),s=i("6Xbx"),a=i("Un6q"),l=function(){return function(t){this._elementRef=t}}(),c=Object(r.C)(l),u=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-toolbar-row",exportAs:"matToolbarRow",host:{class:"mat-toolbar-row"}}]}],t.ctorParameters=function(){return[]},t}(),h=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._platform=i,r._document=n,r}return Object(s.b)(e,t),e.prototype.ngAfterViewInit=function(){var t=this;Object(n._6)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return t._checkToolbarMixedModes()}))},e.prototype._checkToolbarMixedModes=function(){var t=this;this._toolbarRows.length&&([].slice.call(this._elementRef.nativeElement.childNodes).filter(function(t){return!(t.classList&&t.classList.contains("mat-toolbar-row"))}).filter(function(e){return e.nodeType!==(t._document?t._document.COMMENT_NODE:8)}).some(function(t){return t.textContent.trim()})&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}())},e.decorators=[{type:n.j,args:[{selector:"mat-toolbar",exportAs:"matToolbar",template:'<ng-content></ng-content><ng-content select="mat-toolbar-row"></ng-content>',styles:[".mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],inputs:["color"],host:{class:"mat-toolbar","[class.mat-toolbar-multiple-rows]":"this._toolbarRows.length","[class.mat-toolbar-single-row]":"!this._toolbarRows.length"},changeDetection:n.g.OnPush,encapsulation:n._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:n.o},{type:o.a},{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},e.propDecorators={_toolbarRows:[{type:n.m,args:[u]}]},e}(c);var p=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.n,o.b],exports:[h,u,r.n],declarations:[h,u]}]}],t.ctorParameters=function(){return[]},t}()},Yuvf:function(t,e,i){"use strict";var n=function(){return function(){}}();e.Any=n},ZFRd:function(t,e,i){"use strict";i.d(e,"a",function(){return b}),i.d(e,"c",function(){return T}),i.d(e,"d",function(){return E}),i.d(e,"f",function(){return L}),i.d(e,"h",function(){return I}),i.d(e,"b",function(){return w}),i.d(e,"g",function(){return x}),i.d(e,"i",function(){return F}),i.d(e,"j",function(){return V}),i.d(e,"e",function(){return M});var n=i("ppgG"),r=i("CZgk"),o=i("4jwp"),s=i("Un6q"),a=i("LMZF"),l=i("j5BN"),c=i("6Xbx"),u=i("TO51"),h=i("l6RC"),p=i("fAeS"),d=i("XEj9"),f=i("qLnt"),m=i("2kLc"),g=i("rT01"),y=i("GZB0"),_=i("V8+5"),v=i("5O0w"),b=function(){function t(t,e){this._elementRef=t,this._ngZone=e}return t.prototype.alignToElement=function(t){var e=this;this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){return e._setStyles(t)})}):this._setStyles(t)},t.prototype.show=function(){this._elementRef.nativeElement.style.visibility="visible"},t.prototype.hide=function(){this._elementRef.nativeElement.style.visibility="hidden"},t.prototype._setStyles=function(t){var e=this._elementRef.nativeElement;e.style.left=t?(t.offsetLeft||0)+"px":"0",e.style.width=t?(t.offsetWidth||0)+"px":"0"},t.decorators=[{type:a.n,args:[{selector:"mat-ink-bar",host:{class:"mat-ink-bar"}}]}],t.ctorParameters=function(){return[{type:a.o},{type:a.F}]},t}(),x=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(c.b)(e,t),e.decorators=[{type:a.n,args:[{selector:"[mat-tab-label], [matTabLabel]"}]}],e.ctorParameters=function(){return[{type:a.U},{type:a.Z}]},e}(r.b),A=function(){return function(){}}(),w=function(t){function e(e){var i=t.call(this)||this;return i._viewContainerRef=e,i.textLabel="",i._contentPortal=null,i._labelChange=new u.a,i._disableChange=new u.a,i.position=null,i.origin=null,i.isActive=!1,i}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._contentPortal},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){t.hasOwnProperty("textLabel")&&this._labelChange.next(),t.hasOwnProperty("disabled")&&this._disableChange.next()},e.prototype.ngOnDestroy=function(){this._disableChange.complete(),this._labelChange.complete()},e.prototype.ngOnInit=function(){this._contentPortal=new r.h(this._content,this._viewContainerRef)},e.decorators=[{type:a.j,args:[{selector:"mat-tab",template:"<ng-template><ng-content></ng-content></ng-template>",inputs:["disabled"],changeDetection:a.g.OnPush,encapsulation:a._0.None,preserveWhitespaces:!1,exportAs:"matTab"}]}],e.ctorParameters=function(){return[{type:a.Z}]},e.propDecorators={templateLabel:[{type:a.l,args:[x]}],_content:[{type:a.X,args:[a.U]}],textLabel:[{type:a.y,args:["label"]}]},e}(Object(l.E)(A)),P={translateTab:Object(p.m)("translateTab",[Object(p.j)("center, void, left-origin-center, right-origin-center",Object(p.k)({transform:"none"})),Object(p.j)("left",Object(p.k)({transform:"translate3d(-100%, 0, 0)"})),Object(p.j)("right",Object(p.k)({transform:"translate3d(100%, 0, 0)"})),Object(p.l)("* => left, * => right, left => center, right => center",Object(p.e)("500ms cubic-bezier(0.35, 0, 0.25, 1)")),Object(p.l)("void => left-origin-center",[Object(p.k)({transform:"translate3d(-100%, 0, 0)"}),Object(p.e)("500ms cubic-bezier(0.35, 0, 0.25, 1)")]),Object(p.l)("void => right-origin-center",[Object(p.k)({transform:"translate3d(100%, 0, 0)"}),Object(p.e)("500ms cubic-bezier(0.35, 0, 0.25, 1)")])])},E=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r._host=n,r}return Object(c.b)(e,t),e.prototype.ngOnInit=function(){var t=this;this._host._isCenterPosition(this._host._position)&&this.attach(this._host._content),this._centeringSub=this._host._beforeCentering.subscribe(function(e){e&&(t.hasAttached()||t.attach(t._host._content))}),this._leavingSub=this._host._afterLeavingCenter.subscribe(function(){t.detach()})},e.prototype.ngOnDestroy=function(){this._centeringSub&&!this._centeringSub.closed&&this._centeringSub.unsubscribe(),this._leavingSub&&!this._leavingSub.closed&&this._leavingSub.unsubscribe()},e.decorators=[{type:a.n,args:[{selector:"[matTabBodyHost]"}]}],e.ctorParameters=function(){return[{type:a.k},{type:a.Z},{type:T,decorators:[{type:a.u,args:[Object(a._4)(function(){return T})]}]}]},e}(r.c),T=function(){function t(t,e){this._elementRef=t,this._dir=e,this._onCentering=new a.r,this._beforeCentering=new a.r,this._afterLeavingCenter=new a.r,this._onCentered=new a.r(!0)}return Object.defineProperty(t.prototype,"position",{set:function(t){this._position=t<0?"ltr"==this._getLayoutDirection()?"left":"right":t>0?"ltr"==this._getLayoutDirection()?"right":"left":"center"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{set:function(t){if(null!=t){var e=this._getLayoutDirection();this._origin="ltr"==e&&t<=0||"rtl"==e&&t>0?"left":"right"}},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){"center"==this._position&&this._origin&&(this._position="left"==this._origin?"left-origin-center":"right-origin-center")},t.prototype._onTranslateTabStarted=function(t){var e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)},t.prototype._onTranslateTabComplete=function(t){this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()},t.prototype._getLayoutDirection=function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},t.prototype._isCenterPosition=function(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t},t.decorators=[{type:a.j,args:[{selector:"mat-tab-body",template:'<div class="mat-tab-body-content" #content [@translateTab]="_position" (@translateTab.start)="_onTranslateTabStarted($event)" (@translateTab.done)="_onTranslateTabComplete($event)"><ng-template matTabBodyHost></ng-template></div>',styles:[".mat-tab-body-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}"],encapsulation:a._0.None,preserveWhitespaces:!1,changeDetection:a.g.OnPush,animations:[P.translateTab],host:{class:"mat-tab-body"}}]}],t.ctorParameters=function(){return[{type:a.o},{type:h.c,decorators:[{type:a.G}]}]},t.propDecorators={_onCentering:[{type:a.H}],_beforeCentering:[{type:a.H}],_afterLeavingCenter:[{type:a.H}],_onCentered:[{type:a.H}],_content:[{type:a.y,args:["content"]}],position:[{type:a.y}],origin:[{type:a.y}]},t}(),S=0,C=function(){return function(){}}(),O=function(){return function(t){this._elementRef=t}}(),M=function(t){function e(e,i){var n=t.call(this,e)||this;return n._changeDetectorRef=i,n._indexToSelect=0,n._tabBodyWrapperHeight=0,n._tabsSubscription=f.a.EMPTY,n._tabLabelSubscription=f.a.EMPTY,n._dynamicHeight=!1,n._selectedIndex=null,n.headerPosition="above",n.selectedIndexChange=new a.r,n.focusChange=new a.r,n.animationDone=new a.r,n.selectedTabChange=new a.r(!0),n.selectChange=n.selectedTabChange,n._groupId=S++,n}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"dynamicHeight",{get:function(){return this._dynamicHeight},set:function(t){this._dynamicHeight=Object(d.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_dynamicHeightDeprecated",{get:function(){return this._dynamicHeight},set:function(t){this._dynamicHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._indexToSelect=Object(d.d)(t,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e=this._elementRef.nativeElement;e.classList.remove("mat-background-"+this.backgroundColor),t&&e.classList.add("mat-background-"+t),this._backgroundColor=t},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentChecked=function(){var t=this,e=this._indexToSelect=Math.min(this._tabs.length-1,Math.max(this._indexToSelect||0,0));if(this._selectedIndex!=e&&null!=this._selectedIndex){var i=this._createChangeEvent(e);this.selectedTabChange.emit(i),Promise.resolve().then(function(){return t.selectedIndexChange.emit(e)})}this._tabs.forEach(function(i,n){i.position=n-e,i.isActive=n===e,null==t._selectedIndex||0!=i.position||i.origin||(i.origin=e-t._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._changeDetectorRef.markForCheck())},e.prototype.ngAfterContentInit=function(){var t=this;this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(function(){t._subscribeToTabLabels(),t._changeDetectorRef.markForCheck()})},e.prototype.ngOnDestroy=function(){this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()},e.prototype._focusChanged=function(t){this.focusChange.emit(this._createChangeEvent(t))},e.prototype._createChangeEvent=function(t){var e=new C;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e},e.prototype._subscribeToTabLabels=function(){var t=this;this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=m.a.apply(void 0,this._tabs.map(function(t){return t._disableChange}).concat(this._tabs.map(function(t){return t._labelChange}))).subscribe(function(){t._changeDetectorRef.markForCheck()})},e.prototype._getTabLabelId=function(t){return"mat-tab-label-"+this._groupId+"-"+t},e.prototype._getTabContentId=function(t){return"mat-tab-content-"+this._groupId+"-"+t},e.prototype._setTabBodyWrapperHeight=function(t){if(this._dynamicHeight&&this._tabBodyWrapperHeight){var e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}},e.prototype._removeTabBodyWrapperHeight=function(){this._tabBodyWrapperHeight=this._tabBodyWrapper.nativeElement.clientHeight,this._tabBodyWrapper.nativeElement.style.height="",this.animationDone.emit()},e.prototype._handleClick=function(t,e,i){t.disabled||(this.selectedIndex=e.focusIndex=i)},e.prototype._getTabIndex=function(t,e){return t.disabled?null:this.selectedIndex===e?0:-1},e.decorators=[{type:a.j,args:[{selector:"mat-tab-group",exportAs:"matTabGroup",template:'<mat-tab-header #tabHeader [selectedIndex]="selectedIndex" [disableRipple]="disableRipple" (indexFocused)="_focusChanged($event)" (selectFocusedIndex)="selectedIndex = $event"><div class="mat-tab-label" role="tab" matTabLabelWrapper mat-ripple *ngFor="let tab of _tabs; let i = index" [id]="_getTabLabelId(i)" [attr.tabIndex]="_getTabIndex(tab, i)" [attr.aria-controls]="_getTabContentId(i)" [attr.aria-selected]="selectedIndex == i" [class.mat-tab-label-active]="selectedIndex == i" [disabled]="tab.disabled" [matRippleDisabled]="tab.disabled || disableRipple" (click)="_handleClick(tab, tabHeader, i)"><ng-template [ngIf]="tab.templateLabel"><ng-template [cdkPortalOutlet]="tab.templateLabel"></ng-template></ng-template><ng-template [ngIf]="!tab.templateLabel">{{tab.textLabel}}</ng-template></div></mat-tab-header><div class="mat-tab-body-wrapper" #tabBodyWrapper><mat-tab-body role="tabpanel" *ngFor="let tab of _tabs; let i = index" [id]="_getTabContentId(i)" [attr.aria-labelledby]="_getTabLabelId(i)" [class.mat-tab-body-active]="selectedIndex == i" [content]="tab.content" [position]="tab.position" [origin]="tab.origin" (_onCentered)="_removeTabBodyWrapperHeight()" (_onCentering)="_setTabBodyWrapperHeight($event)"></mat-tab-body></div>',styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-label{padding:0 12px}}@media (max-width:959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs] .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height .5s cubic-bezier(.35,0,.25,1)}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],encapsulation:a._0.None,preserveWhitespaces:!1,changeDetection:a.g.OnPush,inputs:["color","disableRipple"],host:{class:"mat-tab-group","[class.mat-tab-group-dynamic-height]":"dynamicHeight","[class.mat-tab-group-inverted-header]":'headerPosition === "below"'}}]}],e.ctorParameters=function(){return[{type:a.o},{type:a.h}]},e.propDecorators={_tabs:[{type:a.m,args:[w]}],_tabBodyWrapper:[{type:a.X,args:["tabBodyWrapper"]}],dynamicHeight:[{type:a.y}],_dynamicHeightDeprecated:[{type:a.y,args:["mat-dynamic-height"]}],selectedIndex:[{type:a.y}],headerPosition:[{type:a.y}],backgroundColor:[{type:a.y}],selectedIndexChange:[{type:a.H}],focusChange:[{type:a.H}],animationDone:[{type:a.H}],selectedTabChange:[{type:a.H}],selectChange:[{type:a.H}]},e}(Object(l.C)(Object(l.D)(O),"primary")),R=function(){return function(){}}(),I=function(t){function e(e){var i=t.call(this)||this;return i.elementRef=e,i}return Object(c.b)(e,t),e.prototype.focus=function(){this.elementRef.nativeElement.focus()},e.prototype.getOffsetLeft=function(){return this.elementRef.nativeElement.offsetLeft},e.prototype.getOffsetWidth=function(){return this.elementRef.nativeElement.offsetWidth},e.decorators=[{type:a.n,args:[{selector:"[matTabLabelWrapper]",inputs:["disabled"],host:{"[class.mat-tab-disabled]":"disabled"}}]}],e.ctorParameters=function(){return[{type:a.o}]},e}(Object(l.E)(R)),D=function(){return function(){}}(),L=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o._elementRef=e,o._changeDetectorRef=i,o._viewportRuler=n,o._dir=r,o._focusIndex=0,o._scrollDistance=0,o._selectedIndexChanged=!1,o._realignInkBar=f.a.EMPTY,o._showPaginationControls=!1,o._disableScrollAfter=!0,o._disableScrollBefore=!0,o._selectedIndex=0,o.selectFocusedIndex=new a.r,o.indexFocused=new a.r,o}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){t=Object(d.d)(t),this._selectedIndexChanged=this._selectedIndex!=t,this._selectedIndex=t,this._focusIndex=t},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentChecked=function(){this._tabLabelCount!=this._labelWrappers.length&&(this._updatePagination(),this._tabLabelCount=this._labelWrappers.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())},e.prototype._handleKeydown=function(t){switch(t.keyCode){case g.m:this._focusNextTab();break;case g.i:this._focusPreviousTab();break;case g.h:this._focusFirstTab(),t.preventDefault();break;case g.e:this._focusLastTab(),t.preventDefault();break;case g.f:case g.n:this.selectFocusedIndex.emit(this.focusIndex),t.preventDefault()}},e.prototype.ngAfterContentInit=function(){var t=this,e=this._dir?this._dir.change:Object(y.a)(null),i=this._viewportRuler.change(150),n=function(){t._updatePagination(),t._alignInkBarToSelectedTab()};"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),this._realignInkBar=Object(m.a)(e,i).subscribe(n)},e.prototype.ngOnDestroy=function(){this._realignInkBar.unsubscribe()},e.prototype._onContentChanges=function(){this._updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()},e.prototype._updatePagination=function(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()},Object.defineProperty(e.prototype,"focusIndex",{get:function(){return this._focusIndex},set:function(t){this._isValidIndex(t)&&this._focusIndex!=t&&(this._focusIndex=t,this.indexFocused.emit(t),this._setTabFocus(t))},enumerable:!0,configurable:!0}),e.prototype._isValidIndex=function(t){if(!this._labelWrappers)return!0;var e=this._labelWrappers?this._labelWrappers.toArray()[t]:null;return!!e&&!e.disabled},e.prototype._setTabFocus=function(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._labelWrappers&&this._labelWrappers.length){this._labelWrappers.toArray()[t].focus();var e=this._tabListContainer.nativeElement,i=this._getLayoutDirection();e.scrollLeft="ltr"==i?0:e.scrollWidth-e.offsetWidth}},e.prototype._moveFocus=function(t){if(this._labelWrappers)for(var e=this._labelWrappers.toArray(),i=this.focusIndex+t;i<e.length&&i>=0;i+=t)if(this._isValidIndex(i))return void(this.focusIndex=i)},e.prototype._focusNextTab=function(){this._moveFocus("ltr"==this._getLayoutDirection()?1:-1)},e.prototype._focusPreviousTab=function(){this._moveFocus("ltr"==this._getLayoutDirection()?-1:1)},e.prototype._focusFirstTab=function(){for(var t=0;t<this._labelWrappers.length;t++)if(this._isValidIndex(t)){this.focusIndex=t;break}},e.prototype._focusLastTab=function(){for(var t=this._labelWrappers.length-1;t>-1;t--)if(this._isValidIndex(t)){this.focusIndex=t;break}},e.prototype._getLayoutDirection=function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},e.prototype._updateTabScrollPosition=function(){var t=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform="translate3d("+e+"px, 0, 0)"},Object.defineProperty(e.prototype,"scrollDistance",{get:function(){return this._scrollDistance},set:function(t){this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),t)),this._scrollDistanceChanged=!0,this._checkScrollingControls()},enumerable:!0,configurable:!0}),e.prototype._scrollHeader=function(t){var e=this._tabListContainer.nativeElement.offsetWidth;this.scrollDistance+=("before"==t?-1:1)*e/3},e.prototype._scrollToLabel=function(t){var e=this._labelWrappers?this._labelWrappers.toArray()[t]:null;if(e){var i,n,r=this._tabListContainer.nativeElement.offsetWidth;"ltr"==this._getLayoutDirection()?n=(i=e.getOffsetLeft())+e.getOffsetWidth():i=(n=this._tabList.nativeElement.offsetWidth-e.getOffsetLeft())-e.getOffsetWidth();var o=this.scrollDistance,s=this.scrollDistance+r;i<o?this.scrollDistance-=o-i+60:n>s&&(this.scrollDistance+=n-s+60)}},e.prototype._checkPaginationEnabled=function(){var t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t},e.prototype._checkScrollingControls=function(){this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck()},e.prototype._getMaxScrollDistance=function(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0},e.prototype._alignInkBarToSelectedTab=function(){var t=this._labelWrappers&&this._labelWrappers.length?this._labelWrappers.toArray()[this.selectedIndex].elementRef.nativeElement:null;this._inkBar.alignToElement(t)},e.decorators=[{type:a.j,args:[{selector:"mat-tab-header",template:'<div class="mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4" aria-hidden="true" mat-ripple [matRippleDisabled]="_disableScrollBefore || disableRipple" [class.mat-tab-header-pagination-disabled]="_disableScrollBefore" (click)="_scrollHeader(\'before\')"><div class="mat-tab-header-pagination-chevron"></div></div><div class="mat-tab-label-container" #tabListContainer (keydown)="_handleKeydown($event)"><div class="mat-tab-list" #tabList role="tablist" (cdkObserveContent)="_onContentChanges()"><div class="mat-tab-labels"><ng-content></ng-content></div><mat-ink-bar></mat-ink-bar></div></div><div class="mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4" aria-hidden="true" mat-ripple [matRippleDisabled]="_disableScrollAfter || disableRipple" [class.mat-tab-header-pagination-disabled]="_disableScrollAfter" (click)="_scrollHeader(\'after\')"><div class="mat-tab-header-pagination-chevron"></div></div>',styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-label{min-width:72px}}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.mat-tab-header-pagination{position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-pagination-after,.mat-tab-header-rtl .mat-tab-header-pagination-before{padding-right:4px}.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:'';height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list{flex-grow:1;position:relative;transition:transform .5s cubic-bezier(.35,0,.25,1)}.mat-tab-labels{display:flex}"],inputs:["disableRipple"],encapsulation:a._0.None,preserveWhitespaces:!1,changeDetection:a.g.OnPush,host:{class:"mat-tab-header","[class.mat-tab-header-pagination-controls-enabled]":"_showPaginationControls","[class.mat-tab-header-rtl]":"_getLayoutDirection() == 'rtl'"}}]}],e.ctorParameters=function(){return[{type:a.o},{type:a.h},{type:o.g},{type:h.c,decorators:[{type:a.G}]}]},e.propDecorators={_labelWrappers:[{type:a.m,args:[I]}],_inkBar:[{type:a.X,args:[b]}],_tabListContainer:[{type:a.X,args:["tabListContainer"]}],_tabList:[{type:a.X,args:["tabList"]}],selectedIndex:[{type:a.y}],selectFocusedIndex:[{type:a.H}],indexFocused:[{type:a.H}]},e}(Object(l.D)(D)),k=function(){return function(t){this._elementRef=t}}(),F=function(t){function e(e,i,n,r,o){var s=t.call(this,e)||this;return s._dir=i,s._ngZone=n,s._changeDetectorRef=r,s._viewportRuler=o,s._onDestroy=new u.a,s._disableRipple=!1,s}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e=this._elementRef.nativeElement;e.classList.remove("mat-background-"+this.backgroundColor),t&&e.classList.add("mat-background-"+t),this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(t){this._disableRipple=Object(d.c)(t),this._setLinkDisableRipple()},enumerable:!0,configurable:!0}),e.prototype.updateActiveLink=function(t){this._activeLinkChanged=this._activeLinkElement!=t,this._activeLinkElement=t,this._activeLinkChanged&&this._changeDetectorRef.markForCheck()},e.prototype.ngAfterContentInit=function(){var t=this;this._ngZone.runOutsideAngular(function(){var e=t._dir?t._dir.change:Object(y.a)(null);return Object(m.a)(e,t._viewportRuler.change(10)).pipe(Object(v.a)(t._onDestroy)).subscribe(function(){return t._alignInkBar()})}),this._setLinkDisableRipple()},e.prototype.ngAfterContentChecked=function(){this._activeLinkChanged&&(this._alignInkBar(),this._activeLinkChanged=!1)},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete()},e.prototype._alignInkBar=function(){this._activeLinkElement&&this._inkBar.alignToElement(this._activeLinkElement.nativeElement)},e.prototype._setLinkDisableRipple=function(){var t=this;this._tabLinks&&this._tabLinks.forEach(function(e){return e.disableRipple=t.disableRipple})},e.decorators=[{type:a.j,args:[{selector:"[mat-tab-nav-bar]",exportAs:"matTabNavBar, matTabNav",inputs:["color"],template:'<div class="mat-tab-links" (cdkObserveContent)="_alignInkBar()"><ng-content></ng-content><mat-ink-bar></mat-ink-bar></div>',styles:[".mat-tab-nav-bar{overflow:hidden;position:relative;flex-shrink:0}.mat-tab-links{position:relative}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden}.mat-tab-link:focus{outline:0}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-link.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-link{min-width:72px}}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}"],host:{class:"mat-tab-nav-bar"},encapsulation:a._0.None,preserveWhitespaces:!1,changeDetection:a.g.OnPush}]}],e.ctorParameters=function(){return[{type:a.o},{type:h.c,decorators:[{type:a.G}]},{type:a.F},{type:a.h},{type:o.g}]},e.propDecorators={_inkBar:[{type:a.X,args:[b]}],_tabLinks:[{type:a.m,args:[Object(a._4)(function(){return B}),{descendants:!0}]}],backgroundColor:[{type:a.y}],disableRipple:[{type:a.y}]},e}(Object(l.C)(k,"primary")),N=function(){return function(){}}(),B=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a._tabNavBar=e,a._elementRef=i,a._isActive=!1,a.rippleConfig={},a._tabLinkRipple=new l.B(a,n,i,r),a._tabLinkRipple.setupTriggerEvents(i.nativeElement),a.tabIndex=parseInt(s)||0,o&&(a.rippleConfig={terminateOnPointerUp:o.terminateOnPointerUp,speedFactor:o.baseSpeedFactor,animation:o.animation}),a}return Object(c.b)(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._isActive},set:function(t){this._isActive=t,t&&this._tabNavBar.updateActiveLink(this._elementRef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rippleDisabled",{get:function(){return this.disabled||this.disableRipple},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._tabLinkRipple._removeTriggerEvents()},e.prototype._handleClick=function(t){this.disabled&&t.preventDefault()},e.decorators=[{type:a.n,args:[{selector:"[mat-tab-link], [matTabLink]",exportAs:"matTabLink",inputs:["disabled","disableRipple","tabIndex"],host:{class:"mat-tab-link","[attr.aria-disabled]":"disabled.toString()","[attr.tabIndex]":"tabIndex","[class.mat-tab-disabled]":"disabled","[class.mat-tab-label-active]":"active","(click)":"_handleClick($event)"}}]}],e.ctorParameters=function(){return[{type:F},{type:a.o},{type:a.F},{type:_.a},{type:void 0,decorators:[{type:a.G},{type:a.u,args:[l.m]}]},{type:void 0,decorators:[{type:a.f,args:["tabindex"]}]}]},e.propDecorators={active:[{type:a.y}]},e}(Object(l.G)(Object(l.D)(Object(l.E)(N)))),V=function(){function t(){}return t.decorators=[{type:a.C,args:[{imports:[s.b,l.n,r.g,l.y,n.c,o.c],exports:[l.n,M,x,w,F,B],declarations:[M,x,w,b,I,F,B,T,E,L],providers:[o.e]}]}],t.ctorParameters=function(){return[]},t}()},ZN67:function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},ZO8H:function(t,e,i){"use strict";e.b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=null;"function"==typeof t[t.length-1]&&(i=t.pop());1===t.length&&Object(r.a)(t[0])&&(t=t[0].slice());return function(e){return e.lift.call(new n.a([e].concat(t)),new c(i))}},i.d(e,"a",function(){return c});var n=i("Oryw"),r=i("1j/l"),o=i("lI6h"),s=i("qgI0"),a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l={};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project))},t}(),u=function(t){function e(e,i){t.call(this,e),this.project=i,this.active=0,this.values=[],this.observables=[]}return a(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var i=0;i<e;i++){var n=t[i];this.add(Object(s.a)(this,n,n,i))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,n,r){var o=this.values,s=o[i],a=this.toRespond?s===l?--this.toRespond:this.toRespond:0;o[i]=e,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.a)},ZfEn:function(t,e,i){"use strict";(function(t){var n=i("v0OU").Buffer,r=i("+Bur").Transform,o=i("QEDK"),s=i("N+n4"),a=i("iw1t").ok,l=i("v0OU").kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(o),h=0;h<u.length;h++){var p=u[h];p.match(/^Z/)&&Object.defineProperty(e,p,{enumerable:!0,value:o[p],writable:!1})}for(var d={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},f=Object.keys(d),m=0;m<f.length;m++){var g=f[m];d[d[g]]=g}function y(t,e,i){var r=[],o=0;function s(){for(var e;null!==(e=t.read());)r.push(e),o+=e.length;t.once("readable",s)}function a(){var e,s=null;o>=l?s=new RangeError(c):e=n.concat(r,o),r=[],t.close(),i(s,e)}t.on("error",function(e){t.removeListener("end",a),t.removeListener("readable",s),i(e)}),t.on("end",a),t.end(e),s()}function _(t,e){if("string"==typeof e&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Not a string or buffer");var i=t._finishFlushFlag;return t._processChunk(e,i)}function v(t){if(!(this instanceof v))return new v(t);S.call(this,t,o.DEFLATE)}function b(t){if(!(this instanceof b))return new b(t);S.call(this,t,o.INFLATE)}function x(t){if(!(this instanceof x))return new x(t);S.call(this,t,o.GZIP)}function A(t){if(!(this instanceof A))return new A(t);S.call(this,t,o.GUNZIP)}function w(t){if(!(this instanceof w))return new w(t);S.call(this,t,o.DEFLATERAW)}function P(t){if(!(this instanceof P))return new P(t);S.call(this,t,o.INFLATERAW)}function E(t){if(!(this instanceof E))return new E(t);S.call(this,t,o.UNZIP)}function T(t){return t===o.Z_NO_FLUSH||t===o.Z_PARTIAL_FLUSH||t===o.Z_SYNC_FLUSH||t===o.Z_FULL_FLUSH||t===o.Z_FINISH||t===o.Z_BLOCK}function S(t,i){var s=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,t),t.flush&&!T(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!T(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||o.Z_NO_FLUSH,this._finishFlushFlag="undefined"!=typeof t.finishFlush?t.finishFlush:o.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!n.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(i);var a=this;this._hadError=!1,this._handle.onerror=function(t,i){C(a),a._hadError=!0;var n=new Error(t);n.errno=i,n.code=e.codes[i],a.emit("error",n)};var l=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(l=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,l,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function C(e,i){i&&t.nextTick(i),e._handle&&(e._handle.close(),e._handle=null)}function O(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),e.Deflate=v,e.Inflate=b,e.Gzip=x,e.Gunzip=A,e.DeflateRaw=w,e.InflateRaw=P,e.Unzip=E,e.createDeflate=function(t){return new v(t)},e.createInflate=function(t){return new b(t)},e.createDeflateRaw=function(t){return new w(t)},e.createInflateRaw=function(t){return new P(t)},e.createGzip=function(t){return new x(t)},e.createGunzip=function(t){return new A(t)},e.createUnzip=function(t){return new E(t)},e.deflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new v(e),t,i)},e.deflateSync=function(t,e){return _(new v(e),t)},e.gzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new x(e),t,i)},e.gzipSync=function(t,e){return _(new x(e),t)},e.deflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new w(e),t,i)},e.deflateRawSync=function(t,e){return _(new w(e),t)},e.unzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new E(e),t,i)},e.unzipSync=function(t,e){return _(new E(e),t)},e.inflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new b(e),t,i)},e.inflateSync=function(t,e){return _(new b(e),t)},e.gunzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new A(e),t,i)},e.gunzipSync=function(t,e){return _(new A(e),t)},e.inflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),y(new P(e),t,i)},e.inflateRawSync=function(t,e){return _(new P(e),t)},s.inherits(S,r),S.prototype.params=function(i,n,r){if(i<e.Z_MIN_LEVEL||i>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+i);if(n!=e.Z_FILTERED&&n!=e.Z_HUFFMAN_ONLY&&n!=e.Z_RLE&&n!=e.Z_FIXED&&n!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==i||this._strategy!==n){var s=this;this.flush(o.Z_SYNC_FLUSH,function(){a(s._handle,"zlib binding closed"),s._handle.params(i,n),s._hadError||(s._level=i,s._strategy=n,r&&r())})}else t.nextTick(r)},S.prototype.reset=function(){return a(this._handle,"zlib binding closed"),this._handle.reset()},S.prototype._flush=function(t){this._transform(n.alloc(0),"",t)},S.prototype.flush=function(e,i){var r=this,s=this._writableState;("function"==typeof e||void 0===e&&!i)&&(i=e,e=o.Z_FULL_FLUSH),s.ended?i&&t.nextTick(i):s.ending?i&&this.once("end",i):s.needDrain?i&&this.once("drain",function(){return r.flush(e,i)}):(this._flushFlag=e,this.write(n.alloc(0),"",i))},S.prototype.close=function(e){C(this,e),t.nextTick(O,this)},S.prototype._transform=function(t,e,i){var r,s=this._writableState,a=(s.ending||s.ended)&&(!t||s.length===t.length);return null===t||n.isBuffer(t)?this._handle?(a?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=s.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(t,r,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},S.prototype._processChunk=function(t,e,i){var r=t&&t.length,o=this._chunkSize-this._offset,s=0,u=this,h="function"==typeof i;if(!h){var p,d=[],f=0;this.on("error",function(t){p=t}),a(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(e,t,s,r,this._buffer,this._offset,o)}while(!this._hadError&&_(m[0],m[1]));if(this._hadError)throw p;if(f>=l)throw C(this),new RangeError(c);var g=n.concat(d,f);return C(this),g}a(this._handle,"zlib binding closed");var y=this._handle.write(e,t,s,r,this._buffer,this._offset,o);function _(l,c){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var p=o-c;if(a(p>=0,"have should not go down"),p>0){var m=u._buffer.slice(u._offset,u._offset+p);u._offset+=p,h?u.push(m):(d.push(m),f+=m.length)}if((0===c||u._offset>=u._chunkSize)&&(o=u._chunkSize,u._offset=0,u._buffer=n.allocUnsafe(u._chunkSize)),0===c){if(s+=r-l,r=l,!h)return!0;var g=u._handle.write(e,t,s,r,u._buffer,u._offset,u._chunkSize);return g.callback=_,void(g.buffer=t)}if(!h)return!1;i()}}y.buffer=t,y.callback=_},s.inherits(v,S),s.inherits(b,S),s.inherits(x,S),s.inherits(A,S),s.inherits(w,S),s.inherits(P,S),s.inherits(E,S)}).call(e,i("1WNV"))},ZsUR:function(t,e,i){"use strict";i.d(e,"a",function(){return d}),e.d=m,i.d(e,"b",function(){return g}),e.c=y;var n=i("LMZF"),r=i("R1vt"),o=i("Un6q"),s=i("V8+5"),a=i("8Xfy"),l=i("l6RC"),c=i("4jwp"),u=i("OFGE"),h=i("j5BN"),p=i("CZgk"),d=(n._13(r.e,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(4608,s.a,s.a,[]),n._25(4608,a.j,a.j,[s.a]),n._25(4608,a.i,a.i,[a.j,n.F,o.c]),n._25(136192,a.e,a.c,[[3,a.e],o.c]),n._25(5120,a.n,a.m,[[3,a.n],[2,a.k],o.c]),n._25(5120,a.h,a.f,[[3,a.h],n.F,s.a]),n._25(6144,l.b,null,[o.c]),n._25(4608,l.c,l.c,[[2,l.b]]),n._25(5120,c.d,c.b,[[3,c.d],n.F,s.a]),n._25(5120,c.g,c.f,[[3,c.g],s.a,n.F]),n._25(4608,u.i,u.i,[c.d,c.g,n.F,o.c]),n._25(5120,u.e,u.k,[[3,u.e],o.c]),n._25(4608,u.h,u.h,[c.g,o.c]),n._25(5120,u.f,u.n,[[3,u.f],o.c]),n._25(4608,u.c,u.c,[u.i,u.e,n.k,u.h,u.f,n.e,n.x,n.F,o.c]),n._25(5120,u.l,u.m,[u.c]),n._25(5120,r.b,r.g,[u.c]),n._25(512,o.b,o.b,[]),n._25(512,s.b,s.b,[]),n._25(512,a.a,a.a,[]),n._25(512,l.a,l.a,[]),n._25(256,h.f,!0,[]),n._25(512,h.n,h.n,[[2,h.f]]),n._25(512,h.y,h.y,[]),n._25(512,p.g,p.g,[]),n._25(512,c.c,c.c,[]),n._25(512,u.g,u.g,[]),n._25(512,r.e,r.e,[]),n._25(256,r.a,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[])])}),n._14({encapsulation:2,styles:[".mat-menu-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:2px;outline:0}.mat-menu-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:left top}.mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:right top}.mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:right top}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:left top}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.ng-animating{pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content{padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item .mat-icon{vertical-align:middle}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.01, 0.01)"},offset:null},options:void 0},{type:0,name:"enter-start",styles:{type:6,styles:{opacity:1,transform:"scale(1, 0.5)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"scale(1, 1)"},offset:null},options:void 0},{type:1,expr:"void => enter-start",animation:{type:4,styles:null,timings:"100ms linear"},options:null},{type:1,expr:"enter-start => enter",animation:{type:4,styles:null,timings:"300ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"150ms 50ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}}));function f(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.done"]],function(t,e,i){var n=!0,r=t.component;"keydown"===e&&(n=!1!==r._handleKeydown(i)&&n);"click"===e&&(n=!1!==r.closed.emit("click")&&n);"@transformMenu.done"===e&&(n=!1!==r._onAnimationDone(i)&&n);return n},null,null)),n._15(1,278528,null,0,o.g,[n.z,n.A,n.o,n.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),n._16(2,0,null,null,1,"div",[["class","mat-menu-content"]],[[24,"@fadeInItems",0]],null,null,null,null)),n._27(null,0)],function(t,e){t(e,1,0,"mat-menu-panel",e.component._classList)},function(t,e){t(e,0,0,e.component._panelAnimationState);t(e,2,0,"showing")})}function m(t){return n._39(2,[n._35(402653184,1,{templateRef:0}),(t()(),n._11(0,[[1,2]],null,0,null,f))],null,null)}n._12("mat-menu",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"mat-menu",[],null,null,null,m,d)),n._15(1,1228800,null,2,r.c,[n.o,n.F,r.a],null,null),n._35(603979776,1,{items:1}),n._35(335544320,2,{lazyContent:0})],null,null)},{xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",panelClass:"class",classList:"classList"},{closed:"closed",close:"close"},["*"]);var g=n._14({encapsulation:2,styles:[],data:{}});function y(t){return n._39(2,[n._27(null,0),(t()(),n._16(1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),n._15(2,212992,null,0,h.x,[n.o,n.F,s.a,[2,h.m]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var i=e.component;t(e,2,0,i.disableRipple||i.disabled,i._getHostElement())},function(t,e){t(e,1,0,n._28(e,2).unbounded)})}n._12("[mat-menu-item]",r.d,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,i){var r=!0;return"click"===e&&(r=!1!==n._28(t,1)._checkDisabled(i)&&r),"mouseenter"===e&&(r=!1!==n._28(t,1)._emitHoverEvent()&&r),r},y,g)),n._15(1,180224,null,0,r.d,[n.o,o.c,a.h],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._highlighted,n._28(e,1)._triggersSubmenu,n._28(e,1)._getTabIndex(),n._28(e,1).disabled.toString(),n._28(e,1).disabled||null)})},{disabled:"disabled",disableRipple:"disableRipple"},{},["*"])},aT7f:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("Xfi0"),r=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=+t,this.y=+e,this.w=+i,this.h=+n}return t.prototype.toBounds=function(){return new n.a(this.x,this.y,this.w,this.h)},t.prototype.isInitialized=function(){return 0!==this.x&&0!==this.y&&0!==this.w&&0!==this.h},t}()},agPy:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prev",{get:function(){return this._prev},set:function(t){this._prev=t},enumerable:!0,configurable:!0}),t}()},bawV:function(t,e,i){"use strict";var n=i("ZN67"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,c,u,h,p){var d,f,m,g,y,_,v,b,x,A=p.bits,w=0,P=0,E=0,T=0,S=0,C=0,O=0,M=0,R=0,I=0,D=null,L=0,k=new n.Buf16(16),F=new n.Buf16(16),N=null,B=0;for(w=0;w<=15;w++)k[w]=0;for(P=0;P<l;P++)k[e[i+P]]++;for(S=A,T=15;T>=1&&0===k[T];T--);if(S>T&&(S=T),0===T)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(E=1;E<T&&0===k[E];E++);for(S<E&&(S=E),M=1,w=1;w<=15;w++)if(M<<=1,(M-=k[w])<0)return-1;if(M>0&&(0===t||1!==T))return-1;for(F[1]=0,w=1;w<15;w++)F[w+1]=F[w]+k[w];for(P=0;P<l;P++)0!==e[i+P]&&(h[F[e[i+P]]++]=P);if(0===t?(D=N=h,_=19):1===t?(D=r,L-=257,N=o,B-=257,_=256):(D=s,N=a,_=-1),I=0,P=0,w=E,y=u,C=S,O=0,m=-1,g=(R=1<<S)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){v=w-O,h[P]<_?(b=0,x=h[P]):h[P]>_?(b=N[B+h[P]],x=D[L+h[P]]):(b=96,x=0),d=1<<w-O,E=f=1<<C;do{c[y+(I>>O)+(f-=d)]=v<<24|b<<16|x|0}while(0!==f);for(d=1<<w-1;I&d;)d>>=1;if(0!==d?(I&=d-1,I+=d):I=0,P++,0==--k[w]){if(w===T)break;w=e[i+h[P]]}if(w>S&&(I&g)!==m){for(0===O&&(O=S),y+=E,M=1<<(C=w-O);C+O<T&&!((M-=k[C+O])<=0);)C++,M<<=1;if(R+=1<<C,1===t&&R>852||2===t&&R>592)return 1;c[m=I&g]=S<<24|C<<16|y-u|0}}return 0!==I&&(c[y+I]=w-O<<24|64<<16|0),p.bits=S,0}},bcUg:function(t,e,i){"use strict";i("jGTa"),i("9WiL"),i("k+Bt");var n=i("xqKW");i.d(e,"a",function(){return n.a});i("PlHj"),i("Xfi0"),i("aT7f")},bywS:function(t,e,i){"use strict";var n=i("wP3s");function r(t){return t}e.a=function(t){void 0===t&&(t=Number.POSITIVE_INFINITY);return Object(n.a)(r,null,t)}},c4k3:function(t,e,i){"use strict";i.d(e,"q",function(){return E}),i.d(e,"p",function(){return T}),i.d(e,"b",function(){return S}),i.d(e,"m",function(){return C}),i.d(e,"d",function(){return v}),i.d(e,"h",function(){return b}),i.d(e,"f",function(){return x}),i.d(e,"g",function(){return A}),i.d(e,"c",function(){return w}),i.d(e,"a",function(){return p}),i.d(e,"j",function(){return f}),i.d(e,"l",function(){return m}),i.d(e,"e",function(){return g}),i.d(e,"i",function(){return y}),i.d(e,"k",function(){return _}),i.d(e,"n",function(){return M});var n=i("6Xbx"),r=i("LMZF"),o=i("ka8K"),s=i("5O0w"),a=i("eoFs"),l=i("TO51"),c=i("AP4T"),u=i("GZB0"),h=i("Un6q");i.d(e,"o",function(){return o.a});var p="<ng-container cdkCellOutlet></ng-container>",d=function(){function t(t,e){this.template=t,this._differs=e}return t.prototype.ngOnChanges=function(t){var e=t.columns.currentValue||[];this._columnsDiffer||(this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e))},t.prototype.getColumnsDiff=function(){return this._columnsDiffer.diff(this.columns)},t}(),f=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(n.b)(e,t),e.decorators=[{type:r.n,args:[{selector:"[cdkHeaderRowDef]",inputs:["columns: cdkHeaderRowDef"]}]}],e.ctorParameters=function(){return[{type:r.U},{type:r.z}]},e}(d),m=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(n.b)(e,t),e.decorators=[{type:r.n,args:[{selector:"[cdkRowDef]",inputs:["columns: cdkRowDefColumns","when: cdkRowDefWhen"]}]}],e.ctorParameters=function(){return[{type:r.U},{type:r.z}]},e}(d),g=function(){function t(e){this._viewContainer=e,t.mostRecentCellOutlet=this}return t.mostRecentCellOutlet=null,t.decorators=[{type:r.n,args:[{selector:"[cdkCellOutlet]"}]}],t.ctorParameters=function(){return[{type:r.Z}]},t}(),y=function(){function t(){}return t.decorators=[{type:r.j,args:[{selector:"cdk-header-row",template:p,host:{class:"cdk-header-row",role:"row"},changeDetection:r.g.OnPush,encapsulation:r._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[]},t}(),_=function(){function t(){}return t.decorators=[{type:r.j,args:[{selector:"cdk-row",template:p,host:{class:"cdk-row",role:"row"},changeDetection:r.g.OnPush,encapsulation:r._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[]},t}(),v=function(){function t(t){this.template=t}return t.decorators=[{type:r.n,args:[{selector:"[cdkCellDef]"}]}],t.ctorParameters=function(){return[{type:r.U}]},t}(),b=function(){function t(t){this.template=t}return t.decorators=[{type:r.n,args:[{selector:"[cdkHeaderCellDef]"}]}],t.ctorParameters=function(){return[{type:r.U}]},t}(),x=function(){function t(){}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"))},enumerable:!0,configurable:!0}),t.decorators=[{type:r.n,args:[{selector:"[cdkColumnDef]"}]}],t.ctorParameters=function(){return[]},t.propDecorators={name:[{type:r.y,args:["cdkColumnDef"]}],cell:[{type:r.l,args:[v]}],headerCell:[{type:r.l,args:[b]}]},t}(),A=function(){function t(t,e){e.nativeElement.classList.add("cdk-column-"+t.cssClassFriendlyName)}return t.decorators=[{type:r.n,args:[{selector:"cdk-header-cell",host:{class:"cdk-header-cell",role:"columnheader"}}]}],t.ctorParameters=function(){return[{type:x},{type:r.o}]},t}(),w=function(){function t(t,e){e.nativeElement.classList.add("cdk-column-"+t.cssClassFriendlyName)}return t.decorators=[{type:r.n,args:[{selector:"cdk-cell",host:{class:"cdk-cell",role:"gridcell"}}]}],t.ctorParameters=function(){return[{type:x},{type:r.o}]},t}();function P(t){return Error('Could not find column with id "'+t+'".')}var E=function(){function t(t){this.viewContainer=t}return t.decorators=[{type:r.n,args:[{selector:"[rowPlaceholder]"}]}],t.ctorParameters=function(){return[{type:r.Z}]},t}(),T=function(){function t(t){this.viewContainer=t}return t.decorators=[{type:r.n,args:[{selector:"[headerRowPlaceholder]"}]}],t.ctorParameters=function(){return[{type:r.Z}]},t}(),S="\n  <ng-container headerRowPlaceholder></ng-container>\n  <ng-container rowPlaceholder></ng-container>",C=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(n.b)(e,t)}(r.p),function(){function t(t,e,i,n){this._differs=t,this._changeDetectorRef=e,this._onDestroy=new l.a,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._headerRowDefChanged=!1,this.viewChange=new a.a({start:0,end:Number.MAX_VALUE}),n||i.nativeElement.setAttribute("role","grid")}return Object.defineProperty(t.prototype,"trackBy",{get:function(){return this._trackByFn},set:function(t){Object(r._6)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+"."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource!==t&&this._switchDataSource(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._dataDiffer=this._differs.find([]).create(this._trackByFn),this._headerRowDef&&(this._headerRowDefChanged=!0)},t.prototype.ngAfterContentChecked=function(){if(this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDef&&!this._rowDefs.length)throw Error("Missing definitions for header and row, cannot determine which columns should be rendered.");this._renderUpdatedColumns(),this._headerRowDefChanged&&(this._renderHeaderRow(),this._headerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription&&this._observeRenderChanges()},t.prototype.ngOnDestroy=function(){this._rowPlaceholder.viewContainer.clear(),this._headerRowPlaceholder.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this.dataSource instanceof o.a&&this.dataSource.disconnect(this)},t.prototype.renderRows=function(){var t=this,e=this._dataDiffer.diff(this._data);if(e){var i=this._rowPlaceholder.viewContainer;e.forEachOperation(function(e,n,r){if(null==e.previousIndex)t._insertRow(e.item,r);else if(null==r)i.remove(n);else{var o=i.get(n);i.move(o,r)}}),this._updateRowIndexContext(),e.forEachIdentityChange(function(t){i.get(t.currentIndex).context.$implicit=t.item})}},t.prototype.setHeaderRowDef=function(t){this._headerRowDef=t,this._headerRowDefChanged=!0},t.prototype.addColumnDef=function(t){this._customColumnDefs.add(t)},t.prototype.removeColumnDef=function(t){this._customColumnDefs.delete(t)},t.prototype.addRowDef=function(t){this._customRowDefs.add(t)},t.prototype.removeRowDef=function(t){this._customRowDefs.delete(t)},t.prototype._cacheColumnDefs=function(){var t=this;this._columnDefsByName.clear();var e=this._contentColumnDefs?this._contentColumnDefs.toArray():[];this._customColumnDefs.forEach(function(t){return e.push(t)}),e.forEach(function(e){if(t._columnDefsByName.has(e.name))throw i=e.name,Error('Duplicate column definition name provided: "'+i+'".');var i;t._columnDefsByName.set(e.name,e)})},t.prototype._cacheRowDefs=function(){var t=this;this._rowDefs=this._contentRowDefs?this._contentRowDefs.toArray():[],this._customRowDefs.forEach(function(e){return t._rowDefs.push(e)});var e=this._rowDefs.filter(function(t){return!t.when});if(e.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultRowDef=e[0]},t.prototype._renderUpdatedColumns=function(){var t=this;this._rowDefs.forEach(function(e){e.getColumnsDiff()&&(t._dataDiffer.diff([]),t._rowPlaceholder.viewContainer.clear(),t.renderRows())}),this._headerRowDef&&this._headerRowDef.getColumnsDiff()&&this._renderHeaderRow()},t.prototype._switchDataSource=function(t){this._data=[],this.dataSource instanceof o.a&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowPlaceholder.viewContainer.clear()),this._dataSource=t},t.prototype._observeRenderChanges=function(){var t=this;if(this.dataSource){var e;if(this.dataSource.connect instanceof Function?e=this.dataSource.connect(this):this.dataSource instanceof c.a?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Object(u.a)(this.dataSource)),void 0===e)throw Error("Provided data source did not match an array, Observable, or DataSource");this._renderChangeSubscription=e.pipe(Object(s.a)(this._onDestroy)).subscribe(function(e){t._data=e,t.renderRows()})}},t.prototype._renderHeaderRow=function(){this._headerRowPlaceholder.viewContainer.length>0&&this._headerRowPlaceholder.viewContainer.clear();var t=this._getHeaderCellTemplatesForRow(this._headerRowDef);t.length&&(this._headerRowPlaceholder.viewContainer.createEmbeddedView(this._headerRowDef.template,{cells:t}),t.forEach(function(t){g.mostRecentCellOutlet&&g.mostRecentCellOutlet._viewContainer.createEmbeddedView(t.template,{})}),this._changeDetectorRef.markForCheck())},t.prototype._getRowDef=function(t,e){if(1==this._rowDefs.length)return this._rowDefs[0];var i=this._rowDefs.find(function(i){return i.when&&i.when(e,t)})||this._defaultRowDef;if(!i)throw Error("Could not find a matching row definition for the provided row data.");return i},t.prototype._insertRow=function(t,e){var i=this._getRowDef(t,e),n={$implicit:t};this._rowPlaceholder.viewContainer.createEmbeddedView(i.template,n,e),this._getCellTemplatesForRow(i).forEach(function(t){g.mostRecentCellOutlet&&g.mostRecentCellOutlet._viewContainer.createEmbeddedView(t.template,n)}),this._changeDetectorRef.markForCheck()},t.prototype._updateRowIndexContext=function(){for(var t=this._rowPlaceholder.viewContainer,e=0,i=t.length;e<i;e++){var n=t.get(e);n.context.index=e,n.context.count=i,n.context.first=0===e,n.context.last=e===i-1,n.context.even=e%2==0,n.context.odd=!n.context.even}},t.prototype._getHeaderCellTemplatesForRow=function(t){var e=this;return t&&t.columns?t.columns.map(function(t){var i=e._columnDefsByName.get(t);if(!i)throw P(t);return i.headerCell}):[]},t.prototype._getCellTemplatesForRow=function(t){var e=this;return t.columns?t.columns.map(function(t){var i=e._columnDefsByName.get(t);if(!i)throw P(t);return i.cell}):[]},t.decorators=[{type:r.j,args:[{selector:"cdk-table",exportAs:"cdkTable",template:S,host:{class:"cdk-table"},encapsulation:r._0.None,preserveWhitespaces:!1,changeDetection:r.g.OnPush}]}],t.ctorParameters=function(){return[{type:r.z},{type:r.h},{type:r.o},{type:void 0,decorators:[{type:r.f,args:["role"]}]}]},t.propDecorators={trackBy:[{type:r.y}],dataSource:[{type:r.y}],_rowPlaceholder:[{type:r.X,args:[E]}],_headerRowPlaceholder:[{type:r.X,args:[T]}],_contentColumnDefs:[{type:r.m,args:[x]}],_contentRowDefs:[{type:r.m,args:[m]}],_headerRowDef:[{type:r.l,args:[f]}]},t}()),O=[C,m,v,g,b,x,w,_,A,y,f,E,T],M=function(){function t(){}return t.decorators=[{type:r.C,args:[{imports:[h.b],exports:[O],declarations:[O]}]}],t.ctorParameters=function(){return[]},t}()},dJzE:function(t,e,i){"use strict";var n=i("1Rb4").nextTick,r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=h;var o=i("VIKU");o.inherits=i("lDCR");var s=i("INGy"),a=i("6QZ3");o.inherits(h,s);for(var l=r(a.prototype),c=0;c<l.length;c++){var u=l[c];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n(e,t)}},dSLC:function(t,e,i){"use strict";var n=i("E9/g"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function o(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new s(t,e,i))}}var s=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))},t}(),a=function(t){function e(e,i,n,r){t.call(this,e),this.accumulator=i,this._seed=n,this.hasSeed=r,this.index=0}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(n.a),l=i("2kvl"),c=i("Ecq+"),u=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function h(t){return function(e){return 0===t?new c.a:e.lift(new p(t))}}var p=function(){function t(t){if(this.total=t,this.total<0)throw new l.a}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.total))},t}(),d=function(t){function e(e,i){t.call(this,e),this.total=i,this.ring=new Array,this.count=0}return u(e,t),e.prototype._next=function(t){var e=this.ring,i=this.total,n=this.count++;e.length<i?e.push(t):e[n%i]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var i=this.count>=this.total?this.total:this.count,n=this.ring,r=0;r<i;r++){var o=e++%i;t.next(n[o])}t.complete()},e}(n.a),f=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var m=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new g(t,this.defaultValue))},t}(),g=function(t){function e(e,i){t.call(this,e),this.defaultValue=i,this.isEmpty=!0}return f(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(n.a),y=i("ExCY");function _(t,e){return arguments.length>=2?function(i){return Object(y.a)(o(t,e),h(1),(void 0===(n=e)&&(n=null),function(t){return t.lift(new m(n))}))(i);var n}:function(e){return Object(y.a)(o(function(e,i,n){return t(e,i,n+1)}),h(1))(e)}}function v(t,e,i){return t.push(e),t}e.a=function(){return _(v,[])}},"dmC+":function(t,e,i){"use strict";e.a=function(t,e){return Object(n.a)(t,e)(this)};var n=i("qqDE")},"e/xH":function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{o=o+(r=r+e[n++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},e0rv:function(t,e,i){"use strict";i.d(e,"h",function(){return D}),i.d(e,"a",function(){return T}),i.d(e,"d",function(){return S}),i.d(e,"b",function(){return C}),i.d(e,"c",function(){return O}),i.d(e,"g",function(){return M}),i.d(e,"e",function(){return R}),i.d(e,"f",function(){return I});var n=i("8Xfy"),r=i("OFGE"),o=i("Un6q"),s=i("LMZF"),a=i("j5BN"),l=i("4jwp"),c=i("V8+5"),u=i("6Xbx"),h=i("l6RC"),p=i("XEj9"),d=i("rT01"),f=i("2kLc"),m=i("LaOa"),g=i("pXwq"),y=i("fNvg"),_=i("5O0w"),v=i("Rx5t"),b=i("qqDE"),x=i("TO51"),A=(i("AP4T"),i("fAeS")),w={transformDrawer:Object(A.m)("transform",[Object(A.j)("open, open-instant",Object(A.k)({transform:"translate3d(0, 0, 0)",visibility:"visible"})),Object(A.j)("void",Object(A.k)({visibility:"hidden"})),Object(A.l)("void => open-instant",Object(A.e)("0ms")),Object(A.l)("void <=> open, open-instant => void",Object(A.e)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function P(t){throw Error("A drawer was already declared for 'position=\""+t+"\"'")}var E=function(){return function(t,e){this.type=t,this.animationFinished=e}}(),T=new s.w("MAT_DRAWER_DEFAULT_AUTOSIZE"),S=function(){function t(t,e){this._changeDetectorRef=t,this._container=e,this._margins={left:null,right:null}}return t.prototype.ngAfterContentInit=function(){var t=this;this._container._contentMargins.subscribe(function(e){t._margins=e,t._changeDetectorRef.markForCheck()})},t.decorators=[{type:s.j,args:[{selector:"mat-drawer-content",template:"<ng-content></ng-content>",host:{class:"mat-drawer-content","[style.margin-left.px]":"_margins.left","[style.margin-right.px]":"_margins.right"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:s.h},{type:O,decorators:[{type:s.u,args:[Object(s._4)(function(){return O})]}]}]},t}(),C=function(){function t(t,e,i,n,r){var o=this;this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=i,this._platform=n,this._doc=r,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._animationStarted=new s.r,this._animationState="void",this.openedChange=new s.r(!0),this.onOpen=this._openedStream,this.onClose=this._closedStream,this.onPositionChanged=new s.r,this.onAlignChanged=new s.r,this._modeChanged=new x.a,this._opened=!1,this.openedChange.subscribe(function(t){t?(o._doc&&(o._elementFocusedBeforeDrawerWasOpened=o._doc.activeElement),o._isFocusTrapEnabled&&o._focusTrap&&o._trapFocus()):o._restoreFocus()})}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onAlignChanged.emit(),this.onPositionChanged.emit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.position},set:function(t){this.position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,this._modeChanged.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableClose",{get:function(){return this._disableClose},set:function(t){this._disableClose=Object(p.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(m.a)(function(t){return t}),Object(b.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openedStart",{get:function(){return this._animationStarted.pipe(Object(m.a)(function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")}),Object(b.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(m.a)(function(t){return!t}),Object(b.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closedStart",{get:function(){return this._animationStarted.pipe(Object(m.a)(function(t){return t.fromState!==t.toState&&"void"===t.toState}),Object(b.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isFocusTrapEnabled",{get:function(){return this.opened&&"side"!==this.mode},enumerable:!0,configurable:!0}),t.prototype._trapFocus=function(){var t=this;this._focusTrap.focusInitialElementWhenReady().then(function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()})},t.prototype._restoreFocus=function(){var t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null},t.prototype.ngAfterContentInit=function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._focusTrap.enabled=this._isFocusTrapEnabled},t.prototype.ngAfterContentChecked=function(){this._platform.isBrowser&&(this._enableAnimations=!0)},t.prototype.ngOnDestroy=function(){this._focusTrap&&this._focusTrap.destroy()},Object.defineProperty(t.prototype,"opened",{get:function(){return this._opened},set:function(t){this.toggle(Object(p.c)(t))},enumerable:!0,configurable:!0}),t.prototype.open=function(t){return this.toggle(!0,t)},t.prototype.close=function(){return this.toggle(!1)},t.prototype.toggle=function(t,e){var i=this;return void 0===t&&(t=!this.opened),void 0===e&&(e="program"),this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled),new Promise(function(t){i.openedChange.pipe(Object(g.a)(1)).subscribe(function(e){t(new E(e?"open":"close",!0))})})},t.prototype.handleKeydown=function(t){t.keyCode!==d.g||this.disableClose||(this.close(),t.stopPropagation())},t.prototype._onAnimationStart=function(t){this._animationStarted.emit(t)},t.prototype._onAnimationEnd=function(t){var e=t.fromState,i=t.toState;(0===i.indexOf("open")&&"void"===e||"void"===i&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)},Object.defineProperty(t.prototype,"_width",{get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0},enumerable:!0,configurable:!0}),t.decorators=[{type:s.j,args:[{selector:"mat-drawer",exportAs:"matDrawer",template:"<ng-content></ng-content>",animations:[w.transformDrawer],host:{class:"mat-drawer","[@transform]":"_animationState","(@transform.start)":"_onAnimationStart($event)","(@transform.done)":"_onAnimationEnd($event)","(keydown)":"handleKeydown($event)","[attr.align]":"null","[class.mat-drawer-end]":'position === "end"',"[class.mat-drawer-over]":'mode === "over"',"[class.mat-drawer-push]":'mode === "push"',"[class.mat-drawer-side]":'mode === "side"',tabIndex:"-1"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:s.o},{type:n.i},{type:n.h},{type:c.a},{type:void 0,decorators:[{type:s.G},{type:s.u,args:[o.c]}]}]},t.propDecorators={position:[{type:s.y}],align:[{type:s.y}],mode:[{type:s.y}],disableClose:[{type:s.y}],openedChange:[{type:s.H}],_openedStream:[{type:s.H,args:["opened"]}],openedStart:[{type:s.H}],_closedStream:[{type:s.H,args:["closed"]}],closedStart:[{type:s.H}],onOpen:[{type:s.H,args:["open"]}],onClose:[{type:s.H,args:["close"]}],onPositionChanged:[{type:s.H,args:["positionChanged"]}],onAlignChanged:[{type:s.H,args:["align-changed"]}],opened:[{type:s.y}]},t}(),O=function(){function t(t,e,i,n,r){void 0===r&&(r=!1);var o=this;this._dir=t,this._element=e,this._ngZone=i,this._changeDetectorRef=n,this.backdropClick=new s.r,this._destroyed=new x.a,this._doCheckSubject=new x.a,this._contentMargins=new x.a,t&&t.change.pipe(Object(_.a)(this._destroyed)).subscribe(function(){o._validateDrawers(),o._updateContentMargins()}),this._autosize=r}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autosize",{get:function(){return this._autosize},set:function(t){this._autosize=Object(p.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._drawers.changes.pipe(Object(y.a)(null)).subscribe(function(){t._validateDrawers(),t._drawers.forEach(function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)}),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t._updateContentMargins(),t._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(Object(v.a)(10),Object(_.a)(this._destroyed)).subscribe(function(){return t._updateContentMargins()})},t.prototype.ngOnDestroy=function(){this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()},t.prototype.open=function(){this._drawers.forEach(function(t){return t.open()})},t.prototype.close=function(){this._drawers.forEach(function(t){return t.close()})},t.prototype.ngDoCheck=function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return t._doCheckSubject.next()})},t.prototype._watchDrawerToggle=function(t){var e=this;t._animationStarted.pipe(Object(_.a)(this._drawers.changes),Object(m.a)(function(t){return t.fromState!==t.toState})).subscribe(function(t){"open-instant"!==t.toState&&e._element.nativeElement.classList.add("mat-drawer-transition"),e._updateContentMargins(),e._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Object(_.a)(this._drawers.changes)).subscribe(function(){return e._setContainerClass(t.opened)})},t.prototype._watchDrawerPosition=function(t){var e=this;t&&t.onPositionChanged.pipe(Object(_.a)(this._drawers.changes)).subscribe(function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(g.a)(1)).subscribe(function(){e._validateDrawers()})})},t.prototype._watchDrawerMode=function(t){var e=this;t&&t._modeChanged.pipe(Object(_.a)(Object(f.a)(this._drawers.changes,this._destroyed))).subscribe(function(){e._updateContentMargins(),e._changeDetectorRef.markForCheck()})},t.prototype._setContainerClass=function(t){t?this._element.nativeElement.classList.add("mat-drawer-opened"):this._element.nativeElement.classList.remove("mat-drawer-opened")},t.prototype._validateDrawers=function(){var t=this;this._start=this._end=null,this._drawers.forEach(function(e){"end"==e.position?(null!=t._end&&P("end"),t._end=e):(null!=t._start&&P("start"),t._start=e)}),this._right=this._left=null,this._dir&&"ltr"!=this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)},t.prototype._isPushed=function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode},t.prototype._onBackdropClicked=function(){this.backdropClick.emit(),this._closeModalDrawer()},t.prototype._closeModalDrawer=function(){[this._start,this._end].filter(function(t){return t&&!t.disableClose&&"side"!==t.mode}).forEach(function(t){return t.close()})},t.prototype._isShowingBackdrop=function(){return this._isDrawerOpen(this._start)&&"side"!=this._start.mode||this._isDrawerOpen(this._end)&&"side"!=this._end.mode},t.prototype._isDrawerOpen=function(t){return null!=t&&t.opened},t.prototype._updateContentMargins=function(){var t=this,e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._width;else if("push"==this._left.mode){var n=this._left._width;e+=n,i-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._width;else if("push"==this._right.mode){n=this._right._width;i+=n,e-=n}this._ngZone.run(function(){return t._contentMargins.next({left:e,right:i})})},t.decorators=[{type:s.j,args:[{selector:"mat-drawer-container",exportAs:"matDrawerContainer",template:'<div class="mat-drawer-backdrop" (click)="_onBackdropClicked()" [class.mat-drawer-shown]="_isShowingBackdrop()"></div><ng-content select="mat-drawer"></ng-content><ng-content select="mat-drawer-content"></ng-content><mat-drawer-content *ngIf="!_content" cdkScrollable><ng-content></ng-content></mat-drawer-content>',styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],host:{class:"mat-drawer-container"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:h.c,decorators:[{type:s.G}]},{type:s.o},{type:s.F},{type:s.h},{type:void 0,decorators:[{type:s.u,args:[T]}]}]},t.propDecorators={_drawers:[{type:s.m,args:[C]}],_content:[{type:s.l,args:[S]}],autosize:[{type:s.y}],backdropClick:[{type:s.H}],scrollable:[{type:s.X,args:[l.a]}]},t}(),M=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(u.b)(e,t),e.decorators=[{type:s.j,args:[{selector:"mat-sidenav-content",template:"<ng-content></ng-content>",host:{class:"mat-drawer-content mat-sidenav-content","[style.margin-left.px]":"_margins.left","[style.margin-right.px]":"_margins.right"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:s.h},{type:I,decorators:[{type:s.u,args:[Object(s._4)(function(){return I})]}]}]},e}(S),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return Object(u.b)(e,t),Object.defineProperty(e.prototype,"fixedInViewport",{get:function(){return this._fixedInViewport},set:function(t){this._fixedInViewport=Object(p.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedTopGap",{get:function(){return this._fixedTopGap},set:function(t){this._fixedTopGap=Object(p.d)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBottomGap",{get:function(){return this._fixedBottomGap},set:function(t){this._fixedBottomGap=Object(p.d)(t)},enumerable:!0,configurable:!0}),e.decorators=[{type:s.j,args:[{selector:"mat-sidenav",exportAs:"matSidenav",template:"<ng-content></ng-content>",animations:[w.transformDrawer],host:{class:"mat-drawer mat-sidenav",tabIndex:"-1","[@transform]":"_animationState","(@transform.start)":"_onAnimationStart($event)","(@transform.done)":"_onAnimationEnd($event)","(keydown)":"handleKeydown($event)","[attr.align]":"null","[class.mat-drawer-end]":'position === "end"',"[class.mat-drawer-over]":'mode === "over"',"[class.mat-drawer-push]":'mode === "push"',"[class.mat-drawer-side]":'mode === "side"',"[class.mat-sidenav-fixed]":"fixedInViewport","[style.top.px]":"fixedInViewport ? fixedTopGap : null","[style.bottom.px]":"fixedInViewport ? fixedBottomGap : null"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[]},e.propDecorators={fixedInViewport:[{type:s.y}],fixedTopGap:[{type:s.y}],fixedBottomGap:[{type:s.y}]},e}(C),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.b)(e,t),e.decorators=[{type:s.j,args:[{selector:"mat-sidenav-container",exportAs:"matSidenavContainer",template:'<div class="mat-drawer-backdrop" (click)="_onBackdropClicked()" [class.mat-drawer-shown]="_isShowingBackdrop()"></div><ng-content select="mat-sidenav"></ng-content><ng-content select="mat-sidenav-content"></ng-content><mat-sidenav-content *ngIf="!_content" cdkScrollable><ng-content></ng-content></mat-sidenav-content>',styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],host:{class:"mat-drawer-container mat-sidenav-container"},changeDetection:s.g.OnPush,encapsulation:s._0.None,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[]},e.propDecorators={_drawers:[{type:s.m,args:[R]}],_content:[{type:s.l,args:[M]}]},e}(O),D=function(){function t(){}return t.decorators=[{type:s.C,args:[{imports:[o.b,a.n,n.a,r.g,l.c,c.b],exports:[a.n,C,O,S,R,I,M],declarations:[C,O,S,R,I,M],providers:[{provide:T,useValue:!1}]}]}],t.ctorParameters=function(){return[]},t}()},e6n3:function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,o,s,a,l,c,u,h,p,d,f,m,g,y,_,v,b,x,A,w,P,E,T;i=t.state,n=t.next_in,E=t.input,r=n+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=i.dmax,c=i.wsize,u=i.whave,h=i.wnext,p=i.window,d=i.hold,f=i.bits,m=i.lencode,g=i.distcode,y=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;t:do{f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),v=m[d&y];e:for(;;){if(d>>>=b=v>>>24,f-=b,0===(b=v>>>16&255))T[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(d&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}x=65535&v,(b&=15)&&(f<b&&(d+=E[n++]<<f,f+=8),x+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),v=g[d&_];i:for(;;){if(d>>>=b=v>>>24,f-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=g[(65535&v)+(d&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(A=65535&v,f<(b&=15)&&(d+=E[n++]<<f,(f+=8)<b&&(d+=E[n++]<<f,f+=8)),(A+=d&(1<<b)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=b,f-=b,A>(b=o-s)){if((b=A-b)>u&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(w=0,P=p,0===h){if(w+=c-b,b<x){x-=b;do{T[o++]=p[w++]}while(--b);w=o-A,P=T}}else if(h<b){if(w+=c+h-b,(b-=h)<x){x-=b;do{T[o++]=p[w++]}while(--b);if(w=0,h<x){x-=b=h;do{T[o++]=p[w++]}while(--b);w=o-A,P=T}}}else if(w+=h-b,b<x){x-=b;do{T[o++]=p[w++]}while(--b);w=o-A,P=T}for(;x>2;)T[o++]=P[w++],T[o++]=P[w++],T[o++]=P[w++],x-=3;x&&(T[o++]=P[w++],x>1&&(T[o++]=P[w++]))}else{w=o-A;do{T[o++]=T[w++],T[o++]=T[w++],T[o++]=T[w++],x-=3}while(x>2);x&&(T[o++]=T[w++],x>1&&(T[o++]=T[w++]))}break}}break}}while(n<r&&o<a);n-=x=f>>3,d&=(1<<(f-=x<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=f}},eIqN:function(t,e,i){"use strict";var n=i("TO51"),r=i("AP4T"),o=i("E9/g"),s=i("qLnt"),a=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function l(){return function(t){return t.lift(new c(t))}}var c=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var n=new u(t,i),r=e.subscribe(n);return n.closed||(n.connection=i.connect()),r},t}(),u=function(t){function e(e,i){t.call(this,e),this.connectable=i}return a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var i=this.connection,n=t._connection;this.connection=null,!n||i&&n!==i||n.unsubscribe()}}else this.connection=null},e}(o.a),h=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},p=function(t){function e(e,i){t.call(this),this.source=e,this.subjectFactory=i,this._refCount=0,this._isComplete=!1}return h(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return l()(this)},e}(r.a).prototype,d={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:p._subscribe},_isComplete:{value:p._isComplete,writable:!0},getSubject:{value:p.getSubject},connect:{value:p.connect},refCount:{value:p.refCount}},f=function(t){function e(e,i){t.call(this,e),this.connectable=i}return h(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(n.b);o.a;var m=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var i=this.selector,n=this.subjectFactory(),r=i(n).subscribe(t);return r.add(e.subscribe(n)),r},t}();function g(){return new n.a}e.a=function(){return function(t){return l()((e=g,function(t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof i)return t.lift(new m(n,i));var r=Object.create(t,d);return r.source=t,r.subjectFactory=n,r})(t));var e,i}}},eoFs:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("TO51"),r=i("Upor"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=function(t){function e(e){t.call(this),this._value=e}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new r.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(n.a)},euSw:function(t,e,i){"use strict";i.d(e,"a",function(){return f}),e.b=b;var n=i("LMZF"),r=i("gOiy"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("4jwp"),c=i("OFGE"),u=i("j5BN"),h=i("CZgk"),p=i("Lpd/"),d=i("0nO6"),f=(n._13(r.d,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(5120,l.d,l.b,[[3,l.d],n.F,a.a]),n._25(5120,l.g,l.f,[[3,l.g],a.a,n.F]),n._25(4608,c.i,c.i,[l.d,l.g,n.F,o.c]),n._25(5120,c.e,c.k,[[3,c.e],o.c]),n._25(4608,c.h,c.h,[l.g,o.c]),n._25(5120,c.f,c.n,[[3,c.f],o.c]),n._25(4608,c.c,c.c,[c.i,c.e,n.k,c.h,c.f,n.e,n.x,n.F,o.c]),n._25(5120,c.l,c.m,[c.c]),n._25(5120,r.a,r.b,[c.c]),n._25(4608,u.d,u.d,[]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(512,h.g,h.g,[]),n._25(512,a.b,a.b,[]),n._25(512,l.c,l.c,[]),n._25(512,c.g,c.g,[]),n._25(256,u.f,!0,[]),n._25(512,u.n,u.n,[[2,u.f]]),n._25(512,u.y,u.y,[]),n._25(512,u.w,u.w,[]),n._25(512,u.u,u.u,[]),n._25(512,p.d,p.d,[]),n._25(512,r.d,r.d,[])])}),n._14({encapsulation:2,styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;transition:none}"],data:{animation:[{type:7,name:"transformPanel",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:0,name:"showing-multiple",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0,minWidth:"100%",transform:"scaleY(0)"},offset:null},{type:4,styles:null,timings:"150ms cubic-bezier(0.25, 0.8, 0.25, 1)"}],options:null},{type:1,expr:"* => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"250ms 100ms linear"}],options:null}],options:{}},{type:7,name:"fadeInContent",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => showing",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}}));function m(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"span",[["class","mat-select-placeholder"]],null,null,null,null,null)),(t()(),n._37(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.placeholder||"\xa0")})}function g(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),n._37(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.triggerValue)})}function y(t){return n._39(0,[n._27(null,0),(t()(),n._11(0,null,null,0))],null,null)}function _(t){return n._39(0,[(t()(),n._16(0,0,null,null,5,"span",[["class","mat-select-value-text"]],null,null,null,null,null)),n._15(1,16384,null,0,o.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),n._11(16777216,null,null,1,null,g)),n._15(3,16384,null,0,o.o,[n.Z,n.U,o.m],null,null),(t()(),n._11(16777216,null,null,1,null,y)),n._15(5,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){t(e,1,0,!!e.component.customTrigger);t(e,5,0,!0)},null)}function v(t){return n._39(0,[(t()(),n._16(0,0,[[2,0],["panel",1]],null,3,"div",[],[[24,"@transformPanel",0],[4,"transformOrigin",null],[2,"mat-select-panel-done-animating",null],[4,"font-size","px"]],[[null,"@transformPanel.done"],[null,"keydown"]],function(t,e,i){var n=!0,r=t.component;"@transformPanel.done"===e&&(n=!1!==r._onPanelDone()&&n);"keydown"===e&&(n=!1!==r._handleKeydown(i)&&n);return n},null,null)),n._15(1,278528,null,0,o.g,[n.z,n.A,n.o,n.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),n._16(2,0,null,null,1,"div",[["class","mat-select-content"]],[[24,"@fadeInContent",0]],[[null,"@fadeInContent.done"]],function(t,e,i){var n=!0,r=t.component;"@fadeInContent.done"===e&&(n=!1!==r._onFadeInDone()&&n);return n},null,null)),n._27(null,1)],function(t,e){var i=e.component;t(e,1,0,n._19(1,"mat-select-panel ",i._getPanelTheme(),""),i.panelClass)},function(t,e){var i=e.component;t(e,0,0,i.multiple?"showing-multiple":"showing",i._transformOrigin,i._panelDoneAnimating,i._triggerFontSize);t(e,2,0,"showing")})}function b(t){return n._39(2,[n._35(402653184,1,{trigger:0}),n._35(671088640,2,{panel:0}),n._35(402653184,3,{overlayDir:0}),(t()(),n._16(3,0,[[1,0],["trigger",1]],null,9,"div",[["aria-hidden","true"],["cdk-overlay-origin",""],["class","mat-select-trigger"]],null,[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r.toggle()&&n);return n},null,null)),n._15(4,16384,[["origin",4]],0,c.b,[n.o],null,null),(t()(),n._16(5,0,null,null,5,"div",[["class","mat-select-value"]],null,null,null,null,null)),n._15(6,16384,null,0,o.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),n._11(16777216,null,null,1,null,m)),n._15(8,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),n._11(16777216,null,null,1,null,_)),n._15(10,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),n._16(11,0,null,null,1,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(t()(),n._16(12,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(t()(),n._11(16777216,null,null,1,function(t,e,i){var n=!0,r=t.component;"backdropClick"===e&&(n=!1!==r.close()&&n);"attach"===e&&(n=!1!==r._onAttached()&&n);"detach"===e&&(n=!1!==r.close()&&n);return n},v)),n._15(14,671744,[[3,4]],0,c.a,[c.c,n.U,n.Z,c.l,[2,s.c]],{_deprecatedOrigin:[0,"_deprecatedOrigin"],_deprecatedPositions:[1,"_deprecatedPositions"],_deprecatedOffsetY:[2,"_deprecatedOffsetY"],_deprecatedMinWidth:[3,"_deprecatedMinWidth"],_deprecatedBackdropClass:[4,"_deprecatedBackdropClass"],_deprecatedScrollStrategy:[5,"_deprecatedScrollStrategy"],_deprecatedOpen:[6,"_deprecatedOpen"],_deprecatedHasBackdrop:[7,"_deprecatedHasBackdrop"]},{backdropClick:"backdropClick",attach:"attach",detach:"detach"})],function(t,e){var i=e.component;t(e,6,0,i.empty);t(e,8,0,!0);t(e,10,0,!1);t(e,14,0,n._28(e,4),i._positions,i._offsetY,null==i._triggerRect?null:i._triggerRect.width,"cdk-overlay-transparent-backdrop",i._scrollStrategy,i.panelOpen,"")},null)}n._12("mat-select",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,6,"mat-select",[["class","mat-select"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],function(t,e,i){var r=!0;return"keydown"===e&&(r=!1!==n._28(t,3)._handleKeydown(i)&&r),"focus"===e&&(r=!1!==n._28(t,3)._onFocus()&&r),"blur"===e&&(r=!1!==n._28(t,3)._onBlur()&&r),r},b,f)),n._33(6144,null,p.c,null,[r.c]),n._33(6144,null,u.l,null,[r.c]),n._15(3,2080768,null,3,r.c,[l.g,n.h,n.F,u.d,n.o,[2,s.c],[2,d.j],[2,d.d],[2,p.b],[8,null],[8,null],r.a],null,null),n._35(603979776,1,{options:1}),n._35(603979776,2,{optionGroups:1}),n._35(335544320,3,{customTrigger:0})],function(t,e){t(e,3,0)},function(t,e){t(e,0,1,[n._28(e,3).id,n._28(e,3).tabIndex,n._28(e,3)._ariaLabel,n._28(e,3).ariaLabelledby,n._28(e,3).required.toString(),n._28(e,3).disabled.toString(),n._28(e,3).errorState,n._28(e,3).panelOpen?n._28(e,3)._optionIds:null,n._28(e,3).multiple,n._28(e,3)._ariaDescribedby||null,n._28(e,3)._getAriaActiveDescendant(),n._28(e,3).disabled,n._28(e,3).errorState,n._28(e,3).required])})},{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",ariaLabel:"aria-label",ariaLabelledby:"aria-labelledby",errorStateMatcher:"errorStateMatcher",id:"id"},{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",onOpen:"onOpen",onClose:"onClose",selectionChange:"selectionChange",change:"change",valueChange:"valueChange"},["mat-select-trigger","*"])},f8cP:function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var o=n,s=r+i;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},fAeS:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"e",function(){return a}),i.d(e,"f",function(){return d}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return f}),i.d(e,"i",function(){return l}),i.d(e,"j",function(){return u}),i.d(e,"k",function(){return c}),i.d(e,"l",function(){return p}),i.d(e,"m",function(){return s}),i.d(e,"d",function(){return g}),i.d(e,"n",function(){return y}),i.d(e,"o",function(){return _});var n=function(){return function(){}}(),r=function(){return function(){}}(),o="*";function s(t,e){return{type:7,name:t,definitions:e,options:{}}}function a(t,e){return void 0===e&&(e=null),{type:4,styles:e,timings:t}}function l(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function c(t){return{type:6,styles:t,offset:null}}function u(t,e,i){return{type:0,name:t,styles:e,options:i}}function h(t){return{type:5,steps:t}}function p(t,e,i){return void 0===i&&(i=null),{type:1,expr:t,animation:e,options:i}}function d(t){return void 0===t&&(t=null),{type:9,options:t}}function f(t,e,i){return void 0===i&&(i=null),{type:11,selector:t,animation:e,options:i}}function m(t){Promise.resolve(null).then(t)}var g=function(){function t(){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=0}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;m(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),y=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var i=0,n=0,r=0,o=this.players.length;0==o?m(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++i==o&&e._onFinish()}),t.onDestroy(function(){++n==o&&e._onDestroy()}),t.onStart(function(){++r==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var i=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(i)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var i=e.getPosition();t=Math.min(i,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),_="!"},fNvg:function(t,e,i){"use strict";var n=i("Oryw"),r=i("8Ut3"),o=i("Ecq+"),s=i("3iOE"),a=i("GZB0"),l=i("1j/l"),c=i("kQVV"),u=i("mHG6"),h=i("KRwF"),p=i("xIGM"),d=i("AP4T"),f=i("X3fp"),m=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},g=function(t){function e(e,i){if(t.call(this),this.scheduler=i,null==e)throw new Error("iterator cannot be null.");this.iterator=v(e)}return m(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.index,i=t.hasError,n=t.iterator,r=t.subscriber;if(i)r.error(t.error);else{var o=n.next();o.done?r.complete():(r.next(o.value),t.index=e+1,r.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var i=this.iterator,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{index:0,iterator:i,subscriber:t});for(;;){var r=i.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed){"function"==typeof i.return&&i.return();break}}},e}(d.a),y=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),this.str=t,this.idx=e,this.len=i}return t.prototype[f.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),_=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(i=e,"number"!=typeof i||!p.a.isFinite(i)))return e;var i;if((e=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>b)return b;return e}(t)),this.arr=t,this.idx=e,this.len=i}return t.prototype[f.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();function v(t){var e=t[f.a];if(!e&&"string"==typeof t)return new y(t);if(!e&&void 0!==t.length)return new _(t);if(!e)throw new TypeError("object is not iterable");return t[f.a]()}var b=Math.pow(2,53)-1;var x=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},A=function(t){function e(e,i){t.call(this),this.arrayLike=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return x(e,t),e.create=function(t,i){var n=t.length;return 0===n?new o.a:1===n?new r.a(t[0],i):new e(t,i)},e.dispatch=function(t){var e=t.arrayLike,i=t.index,n=t.length,r=t.subscriber;r.closed||(i>=n?r.complete():(r.next(e[i]),t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.arrayLike,n=this.scheduler,r=i.length;if(n)return n.schedule(e.dispatch,0,{arrayLike:i,index:0,length:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(i[o]);t.complete()},e}(d.a),w=i("YRqN"),P=i("mz3w"),E=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},T=function(t){function e(e,i){t.call(this,null),this.ish=e,this.scheduler=i}return E(e,t),e.create=function(t,i){if(null!=t){if("function"==typeof t[P.a])return t instanceof d.a&&!i?t:new e(t,i);if(Object(l.a)(t))return new n.a(t,i);if(Object(u.a)(t))return new h.a(t,i);if("function"==typeof t[f.a]||"string"==typeof t)return new g(t,i);if(Object(c.a)(t))return new A(t,i)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,i=this.scheduler;return null==i?e[P.a]().subscribe(t):e[P.a]().subscribe(new w.a(t,i,0))},e}(d.a).create,S=i("bywS");function C(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&Object(s.a)(t[1])?T(t[0]):Object(S.a)(1)(a.a.apply(void 0,t))}e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var i=t[t.length-1];Object(s.a)(i)?t.pop():i=null;var a=t.length;return C(1===a?new r.a(t[0],i):a>1?new n.a(t,i):new o.a(i),e)}}},gOiy:function(t,e,i){"use strict";i.d(e,"d",function(){return k}),i.d(e,"a",function(){return S}),i.d(e,"b",function(){return C}),i.d(e,"c",function(){return L});var n=i("LMZF"),r=i("Un6q"),o=i("6Xbx"),s=i("8Xfy"),a=i("l6RC"),l=i("XEj9"),c=i("ka8K"),u=i("rT01"),h=i("OFGE"),p=i("LaOa"),d=i("pXwq"),f=i("qqDE"),m=i("5jKg"),g=i("fNvg"),y=i("5O0w"),_=i("0nO6"),v=i("j5BN"),b=i("Lpd/"),x=(i("AP4T"),i("2kLc")),A=i("TO51"),w=i("3kHg"),P=i("fAeS"),E={transformPanel:Object(P.m)("transformPanel",[Object(P.j)("showing",Object(P.k)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Object(P.j)("showing-multiple",Object(P.k)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Object(P.l)("void => *",[Object(P.k)({opacity:0,minWidth:"100%",transform:"scaleY(0)"}),Object(P.e)("150ms cubic-bezier(0.25, 0.8, 0.25, 1)")]),Object(P.l)("* => void",[Object(P.e)("250ms 100ms linear",Object(P.k)({opacity:0}))])]),fadeInContent:Object(P.m)("fadeInContent",[Object(P.j)("showing",Object(P.k)({opacity:1})),Object(P.l)("void => showing",[Object(P.k)({opacity:0}),Object(P.e)("150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};var T=0,S=new n.w("mat-select-scroll-strategy");function C(t){return function(){return t.scrollStrategies.reposition()}}var O={provide:S,deps:[h.c],useFactory:C},M=function(){return function(t,e){this.source=t,this.value=e}}(),R=function(){return function(t,e,i,n,r){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=i,this._parentFormGroup=n,this.ngControl=r}}(),I=Object(v.D)(Object(v.G)(Object(v.E)(Object(v.F)(R)))),D=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"mat-select-trigger"}]}],t.ctorParameters=function(){return[]},t}(),L=function(t){function e(e,i,r,o,s,a,l,c,u,h,p,f){var g=t.call(this,s,o,l,c,h)||this;return g._viewportRuler=e,g._changeDetectorRef=i,g._ngZone=r,g._dir=a,g._parentFormField=u,g.ngControl=h,g._scrollStrategyFactory=f,g._panelOpen=!1,g._required=!1,g._scrollTop=0,g._multiple=!1,g._compareWith=function(t,e){return t===e},g._uid="mat-select-"+T++,g._destroy=new A.a,g._triggerFontSize=0,g._onChange=function(){},g._onTouched=function(){},g._optionIds="",g._transformOrigin="top",g._panelDoneAnimating=!1,g._scrollStrategy=g._scrollStrategyFactory(),g._offsetY=0,g._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],g.focused=!1,g.controlType="mat-select",g.ariaLabel="",g.optionSelectionChanges=Object(w.a)(function(){return g.options?x.a.apply(void 0,g.options.map(function(t){return t.onSelectionChange})):g._ngZone.onStable.asObservable().pipe(Object(d.a)(1),Object(m.a)(function(){return g.optionSelectionChanges}))}),g.openedChange=new n.r,g.onOpen=g._openedStream,g.onClose=g._closedStream,g.selectionChange=new n.r,g.change=g.selectionChange,g.valueChange=new n.r,g.ngControl&&(g.ngControl.valueAccessor=g),g.tabIndex=parseInt(p)||0,g.id=g.id,g}return Object(o.b)(e,t),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Object(l.c)(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},set:function(t){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=Object(l.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(t){if("function"!=typeof t)throw Error("`compareWith` must be a function.");this._compareWith=t,this._selectionModel&&this._initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this.writeValue(t),this._value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(p.a)(function(t){return t}),Object(f.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(p.a)(function(t){return!t}),Object(f.a)(function(){}))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._selectionModel=new c.b(this.multiple,void 0,!1),this.stateChanges.next()},e.prototype.ngAfterContentInit=function(){var t=this;this._initKeyManager(),this.options.changes.pipe(Object(g.a)(null),Object(y.a)(this._destroy)).subscribe(function(){t._resetOptions(),t._initializeSelection()})},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},e.prototype.ngOnChanges=function(t){t.disabled&&this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()},e.prototype.toggle=function(){this.panelOpen?this.close():this.open()},e.prototype.open=function(){var t=this;!this.disabled&&this.options&&this.options.length&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"]),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(Object(d.a)(1)).subscribe(function(){t._triggerFontSize&&t.overlayDir.overlayRef&&t.overlayDir.overlayRef.overlayElement&&(t.overlayDir.overlayRef.overlayElement.style.fontSize=t._triggerFontSize+"px")}))},e.prototype.close=function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())},e.prototype.writeValue=function(t){this.options&&this._setSelectionByValue(t)},e.prototype.registerOnChange=function(t){this._onChange=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()},Object.defineProperty(e.prototype,"panelOpen",{get:function(){return this._panelOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerValue",{get:function(){if(this.empty)return"";if(this._multiple){var t=this._selectionModel.selected.map(function(t){return t.viewValue});return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue},enumerable:!0,configurable:!0}),e.prototype._isRtl=function(){return!!this._dir&&"rtl"===this._dir.value},e.prototype._handleKeydown=function(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))},e.prototype._handleClosedKeydown=function(t){var e=t.keyCode,i=e===u.d||e===u.p||e===u.i||e===u.m;e===u.f||e===u.n||(this.multiple||t.altKey)&&i?(t.preventDefault(),this.open()):this.multiple||this._keyManager.onKeydown(t)},e.prototype._handleOpenKeydown=function(t){var e=t.keyCode,i=e===u.d||e===u.p,n=this._keyManager;if(e===u.h||e===u.e)t.preventDefault(),e===u.h?n.setFirstItemActive():n.setLastItemActive();else if(i&&t.altKey)t.preventDefault(),this.close();else if(e!==u.f&&e!==u.n||!n.activeItem){var r=n.activeItemIndex;n.onKeydown(t),this._multiple&&i&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==r&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()},e.prototype._onPanelDone=function(){this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this._panelDoneAnimating=!1,this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())},e.prototype._onFadeInDone=function(){this._panelDoneAnimating=this.panelOpen,this._changeDetectorRef.markForCheck()},e.prototype._onFocus=function(){this.disabled||(this.focused=!0,this.stateChanges.next())},e.prototype._onBlur=function(){this.focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())},e.prototype._onAttached=function(){var t=this;this.overlayDir.positionChange.pipe(Object(d.a)(1)).subscribe(function(){t._changeDetectorRef.detectChanges(),t._calculateOverlayOffsetX(),t.panel.nativeElement.scrollTop=t._scrollTop})},e.prototype._getPanelTheme=function(){return this._parentFormField?"mat-"+this._parentFormField.color:""},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._selectionModel||this._selectionModel.isEmpty()},enumerable:!0,configurable:!0}),e.prototype._initializeSelection=function(){var t=this;Promise.resolve().then(function(){t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value)})},e.prototype._setSelectionByValue=function(t,e){var i=this;if(void 0===e&&(e=!1),this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),t.forEach(function(t){return i._selectValue(t,e)}),this._sortValues()}else{this._clearSelection();var n=this._selectValue(t,e);n&&this._keyManager.setActiveItem(this.options.toArray().indexOf(n))}this._changeDetectorRef.markForCheck()},e.prototype._selectValue=function(t,e){var i=this;void 0===e&&(e=!1);var r=this.options.find(function(e){try{return null!=e.value&&i._compareWith(e.value,t)}catch(t){return Object(n._6)()&&console.warn(t),!1}});return r&&(e?r._selectViaInteraction():r.select(),this._selectionModel.select(r),this.stateChanges.next()),r},e.prototype._clearSelection=function(t){this._selectionModel.clear(),this.options.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()},e.prototype._initKeyManager=function(){var t=this;this._keyManager=new s.d(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._keyManager.tabOut.pipe(Object(y.a)(this._destroy)).subscribe(function(){return t.close()}),this._keyManager.change.pipe(Object(y.a)(this._destroy)).subscribe(function(){t._panelOpen&&t.panel?t._scrollActiveOptionIntoView():t._panelOpen||t.multiple||!t._keyManager.activeItem||t._keyManager.activeItem._selectViaInteraction()})},e.prototype._resetOptions=function(){var t=this,e=Object(x.a)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Object(y.a)(e),Object(p.a)(function(t){return t.isUserInput})).subscribe(function(e){t._onSelect(e.source),!t.multiple&&t._panelOpen&&(t.close(),t.focus())}),x.a.apply(void 0,this.options.map(function(t){return t._stateChanges})).pipe(Object(y.a)(e)).subscribe(function(){t._changeDetectorRef.markForCheck(),t.stateChanges.next()}),this._setOptionIds()},e.prototype._onSelect=function(t){var e=this._selectionModel.isSelected(t);this.multiple?(this._selectionModel.toggle(t),this.stateChanges.next(),e?t.deselect():t.select(),this._keyManager.setActiveItem(this._getOptionIndex(t)),this._sortValues()):(this._clearSelection(null==t.value?void 0:t),null==t.value?this._propagateChanges(t.value):(this._selectionModel.select(t),this.stateChanges.next())),e!==this._selectionModel.isSelected(t)&&this._propagateChanges()},e.prototype._sortValues=function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.options.forEach(function(e){e.selected&&t._selectionModel.select(e)}),this.stateChanges.next())},e.prototype._propagateChanges=function(t){var e=null;e=this.multiple?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(new M(this,e)),this._changeDetectorRef.markForCheck()},e.prototype._setOptionIds=function(){this._optionIds=this.options.map(function(t){return t.id}).join(" ")},e.prototype._highlightCorrectOption=function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._getOptionIndex(this._selectionModel.selected[0])))},e.prototype._scrollActiveOptionIntoView=function(){var t=this._getItemHeight(),e=this._keyManager.activeItemIndex||0,i=(e+v.t.countGroupLabelsBeforeOption(e,this.options,this.optionGroups))*t,n=this.panel.nativeElement.scrollTop;i<n?this.panel.nativeElement.scrollTop=i:i+t>n+256&&(this.panel.nativeElement.scrollTop=Math.max(0,i-256+t))},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._getOptionIndex=function(t){return this.options.reduce(function(e,i,n){return void 0===e?t===i?n:void 0:e},void 0)},e.prototype._calculateOverlayPosition=function(){var t=this._getItemHeight(),e=this._getItemCount(),i=Math.min(e*t,256),n=e*t-i,r=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);r+=v.t.countGroupLabelsBeforeOption(r,this.options,this.optionGroups);var o=i/2;this._scrollTop=this._calculateOverlayScroll(r,o,n),this._offsetY=this._calculateOverlayOffsetY(r,o,n),this._checkOverlayWithinViewport(n)},e.prototype._calculateOverlayScroll=function(t,e,i){var n=this._getItemHeight(),r=n*t-e+n/2;return Math.min(Math.max(0,r),i)},Object.defineProperty(e.prototype,"_ariaLabel",{get:function(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder},enumerable:!0,configurable:!0}),e.prototype._getAriaActiveDescendant=function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null},e.prototype._calculateOverlayOffsetX=function(){var t,e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),n=this._isRtl(),r=this.multiple?60:32;if(this.multiple)t=44;else{var o=this._selectionModel.selected[0]||this.options.first;t=o&&o.group?32:16}n||(t*=-1);var s=0-(e.left+t-(n?r:0)),a=e.right+t-i.width+(n?0:r);s>0?t+=s+8:a>0&&(t-=a+8),this.overlayDir.offsetX=t,this.overlayDir.overlayRef.updatePosition()},e.prototype._calculateOverlayOffsetY=function(t,e,i){var n,r=this._getItemHeight(),o=(r-this._triggerRect.height)/2,s=Math.floor(256/r);if(0===this._scrollTop)n=t*r;else if(this._scrollTop===i){n=(t-(this._getItemCount()-s))*r+(r-(this._getItemCount()*r-256)%r)}else n=e-r/2;return-1*n-o},e.prototype._checkOverlayWithinViewport=function(t){var e=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),n=this._triggerRect.top-8,r=i.height-this._triggerRect.bottom-8,o=Math.abs(this._offsetY),s=Math.min(this._getItemCount()*e,256)-o-this._triggerRect.height;s>r?this._adjustPanelUp(s,r):o>n?this._adjustPanelDown(o,n,t):this._transformOrigin=this._getOriginBasedOnOption()},e.prototype._adjustPanelUp=function(t,e){var i=Math.round(t-e);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")},e.prototype._adjustPanelDown=function(t,e,i){var n=Math.round(t-e);if(this._scrollTop+=n,this._offsetY+=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")},e.prototype._getOriginBasedOnOption=function(){var t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return"50% "+(Math.abs(this._offsetY)-e+t/2)+"px 0px"},e.prototype._getItemCount=function(){return this.options.length+this.optionGroups.length},e.prototype._getItemHeight=function(){return 3*this._triggerFontSize},e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.onContainerClick=function(){this.focus(),this.open()},Object.defineProperty(e.prototype,"shouldPlaceholderFloat",{get:function(){return this._panelOpen||!this.empty},enumerable:!0,configurable:!0}),e.decorators=[{type:n.j,args:[{selector:"mat-select",exportAs:"matSelect",template:'<div cdk-overlay-origin class="mat-select-trigger" aria-hidden="true" (click)="toggle()" #origin="cdkOverlayOrigin" #trigger><div class="mat-select-value" [ngSwitch]="empty"><span class="mat-select-placeholder" *ngSwitchCase="true">{{placeholder || \'\xa0\'}}</span> <span class="mat-select-value-text" *ngSwitchCase="false" [ngSwitch]="!!customTrigger"><span *ngSwitchDefault>{{triggerValue}}</span><ng-content select="mat-select-trigger" *ngSwitchCase="true"></ng-content></span></div><div class="mat-select-arrow-wrapper"><div class="mat-select-arrow"></div></div></div><ng-template cdk-connected-overlay hasBackdrop backdropClass="cdk-overlay-transparent-backdrop" [scrollStrategy]="_scrollStrategy" [origin]="origin" [open]="panelOpen" [positions]="_positions" [minWidth]="_triggerRect?.width" [offsetY]="_offsetY" (backdropClick)="close()" (attach)="_onAttached()" (detach)="close()"><div #panel class="mat-select-panel {{ _getPanelTheme() }}" [ngClass]="panelClass" [@transformPanel]="multiple ? \'showing-multiple\' : \'showing\'" (@transformPanel.done)="_onPanelDone()" [style.transformOrigin]="_transformOrigin" [class.mat-select-panel-done-animating]="_panelDoneAnimating" [style.font-size.px]="_triggerFontSize" (keydown)="_handleKeydown($event)"><div class="mat-select-content" [@fadeInContent]="\'showing\'" (@fadeInContent.done)="_onFadeInDone()"><ng-content></ng-content></div></div></ng-template>',styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;transition:none}"],inputs:["disabled","disableRipple","tabIndex"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,host:{role:"listbox","[attr.id]":"id","[attr.tabindex]":"tabIndex","[attr.aria-label]":"_ariaLabel","[attr.aria-labelledby]":"ariaLabelledby","[attr.aria-required]":"required.toString()","[attr.aria-disabled]":"disabled.toString()","[attr.aria-invalid]":"errorState","[attr.aria-owns]":"panelOpen ? _optionIds : null","[attr.aria-multiselectable]":"multiple","[attr.aria-describedby]":"_ariaDescribedby || null","[attr.aria-activedescendant]":"_getAriaActiveDescendant()","[class.mat-select-disabled]":"disabled","[class.mat-select-invalid]":"errorState","[class.mat-select-required]":"required",class:"mat-select","(keydown)":"_handleKeydown($event)","(focus)":"_onFocus()","(blur)":"_onBlur()"},animations:[E.transformPanel,E.fadeInContent],providers:[{provide:b.c,useExisting:e},{provide:v.l,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:h.j},{type:n.h},{type:n.F},{type:v.d},{type:n.o},{type:a.c,decorators:[{type:n.G}]},{type:_.j,decorators:[{type:n.G}]},{type:_.d,decorators:[{type:n.G}]},{type:b.b,decorators:[{type:n.G}]},{type:_.h,decorators:[{type:n.R},{type:n.G}]},{type:void 0,decorators:[{type:n.f,args:["tabindex"]}]},{type:void 0,decorators:[{type:n.u,args:[S]}]}]},e.propDecorators={trigger:[{type:n.X,args:["trigger"]}],panel:[{type:n.X,args:["panel"]}],overlayDir:[{type:n.X,args:[h.a]}],options:[{type:n.m,args:[v.t,{descendants:!0}]}],optionGroups:[{type:n.m,args:[v.s]}],panelClass:[{type:n.y}],customTrigger:[{type:n.l,args:[D]}],placeholder:[{type:n.y}],required:[{type:n.y}],multiple:[{type:n.y}],compareWith:[{type:n.y}],value:[{type:n.y}],ariaLabel:[{type:n.y,args:["aria-label"]}],ariaLabelledby:[{type:n.y,args:["aria-labelledby"]}],errorStateMatcher:[{type:n.y}],id:[{type:n.y}],openedChange:[{type:n.H}],_openedStream:[{type:n.H,args:["opened"]}],_closedStream:[{type:n.H,args:["closed"]}],onOpen:[{type:n.H}],onClose:[{type:n.H}],selectionChange:[{type:n.H}],change:[{type:n.H}],valueChange:[{type:n.H}]},e}(I),k=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.b,h.g,v.u,v.n],exports:[b.d,L,D,v.u,v.n],declarations:[L,D],providers:[O,v.d]}]}],t.ctorParameters=function(){return[]},t}()},"ghl+":function(t,e,i){"use strict";i.d(e,"c",function(){return m}),i.d(e,"b",function(){return d}),i.d(e,"a",function(){return f});var n=i("LMZF"),r=i("Un6q"),o=i("j5BN"),s=i("8Xfy"),a=i("6Xbx"),l=i("V8+5"),c="accent",u="primary",h=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],p=function(){return function(t){this._elementRef=t}}(),d=function(t){function e(e,i,n){var r=t.call(this,e)||this;r._platform=i,r._focusMonitor=n,r._isRoundButton=r._hasHostAttributes("mat-fab","mat-mini-fab"),r._isIconButton=r._hasHostAttributes("mat-icon-button");for(var o=0,s=h;o<s.length;o++){var a=s[o];r._hasHostAttributes(a)&&e.nativeElement.classList.add(a)}return r._focusMonitor.monitor(r._elementRef.nativeElement,!0),r._isRoundButton?r.color=c:r._hasHostAttributes("mat-flat-button")&&(r.color=u),r}return Object(a.b)(e,t),e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},e.prototype.focus=function(){this._getHostElement().focus()},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._hasHostAttributes=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return!!this._platform.isBrowser&&e.some(function(e){return t._getHostElement().hasAttribute(e)})},e.decorators=[{type:n.j,args:[{selector:"button[mat-button], button[mat-raised-button], button[mat-icon-button],\n             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],\n             button[mat-flat-button]",exportAs:"matButton",host:{"[disabled]":"disabled || null"},template:'<span class="mat-button-wrapper"><ng-content></ng-content></span><div matRipple class="mat-button-ripple" [class.mat-button-ripple-round]="_isRoundButton || _isIconButton" [matRippleDisabled]="_isRippleDisabled()" [matRippleCentered]="_isIconButton" [matRippleTrigger]="_getHostElement()"></div><div class="mat-button-focus-overlay"></div>',styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],inputs:["disabled","disableRipple","color"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:l.a},{type:s.h}]},e.propDecorators={ripple:[{type:n.X,args:[o.x]}]},e}(Object(o.C)(Object(o.E)(Object(o.D)(p)))),f=function(t){function e(e,i,n){return t.call(this,n,e,i)||this}return Object(a.b)(e,t),e.prototype._haltDisabledEvents=function(t){this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())},e.decorators=[{type:n.j,args:[{selector:"a[mat-button], a[mat-raised-button], a[mat-icon-button], a[mat-fab],\n             a[mat-mini-fab], a[mat-stroked-button], a[mat-flat-button]",exportAs:"matButton, matAnchor",host:{"[attr.tabindex]":"disabled ? -1 : 0","[attr.disabled]":"disabled || null","[attr.aria-disabled]":"disabled.toString()","(click)":"_haltDisabledEvents($event)"},inputs:["disabled","disableRipple","color"],template:'<span class="mat-button-wrapper"><ng-content></ng-content></span><div matRipple class="mat-button-ripple" [class.mat-button-ripple-round]="_isRoundButton || _isIconButton" [matRippleDisabled]="_isRippleDisabled()" [matRippleCentered]="_isIconButton" [matRippleTrigger]="_getHostElement()"></div><div class="mat-button-focus-overlay"></div>',styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:l.a},{type:s.h},{type:n.o}]},e}(d),m=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.b,o.y,o.n,s.a],exports:[d,f,o.n],declarations:[d,f]}]}],t.ctorParameters=function(){return[]},t}()},grVA:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},hzkV:function(t,e,i){"use strict";i.d(e,"a",function(){return g});var n=i("LMZF"),r=i("w24y"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("4jwp"),c=i("OFGE"),u=i("8Xfy"),h=i("CZgk"),p=i("j5BN"),d=(n._13(r.i,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[g]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(5120,l.d,l.b,[[3,l.d],n.F,a.a]),n._25(5120,l.g,l.f,[[3,l.g],a.a,n.F]),n._25(4608,c.i,c.i,[l.d,l.g,n.F,o.c]),n._25(5120,c.e,c.k,[[3,c.e],o.c]),n._25(4608,c.h,c.h,[l.g,o.c]),n._25(5120,c.f,c.n,[[3,c.f],o.c]),n._25(4608,c.c,c.c,[c.i,c.e,n.k,c.h,c.f,n.e,n.x,n.F,o.c]),n._25(5120,c.l,c.m,[c.c]),n._25(4608,u.j,u.j,[a.a]),n._25(4608,u.i,u.i,[u.j,n.F,o.c]),n._25(136192,u.e,u.c,[[3,u.e],o.c]),n._25(5120,u.n,u.m,[[3,u.n],[2,u.k],o.c]),n._25(5120,u.h,u.f,[[3,u.h],n.F,a.a]),n._25(5120,r.b,r.c,[c.c]),n._25(4608,r.d,r.d,[c.c,n.x,[2,o.f],[2,r.a],r.b,[3,r.d],c.e]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(512,h.g,h.g,[]),n._25(512,a.b,a.b,[]),n._25(512,l.c,l.c,[]),n._25(512,c.g,c.g,[]),n._25(512,u.a,u.a,[]),n._25(256,p.f,!0,[]),n._25(512,p.n,p.n,[[2,p.f]]),n._25(512,r.i,r.i,[])])}),n._14({encapsulation:2,styles:[".mat-dialog-container{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);display:block;padding:24px;border-radius:2px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%}@media screen and (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch;-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:12px 0;display:flex;flex-wrap:wrap}.mat-dialog-actions:last-child{margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button+.mat-button,.mat-dialog-actions .mat-button+.mat-raised-button,.mat-dialog-actions .mat-raised-button+.mat-button,.mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-button+.mat-raised-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"slideDialog",definitions:[{type:0,name:"enter",styles:{type:6,styles:{transform:"none",opacity:1},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{transform:"translate3d(0, 25%, 0) scale(0.9)",opacity:0},offset:null},options:void 0},{type:0,name:"exit",styles:{type:6,styles:{transform:"translate3d(0, 25%, 0)",opacity:0},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}}));function f(t){return n._39(0,[(t()(),n._11(0,null,null,0))],null,null)}function m(t){return n._39(0,[n._35(402653184,1,{_portalOutlet:0}),(t()(),n._11(16777216,null,null,1,null,f)),n._15(2,212992,[[1,4]],0,h.c,[n.k,n.Z],{portal:[0,"portal"]},null)],function(t,e){t(e,2,0,"")},null)}var g=n._12("mat-dialog-container",r.g,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-dialog-container",[["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@slideDialog",0]],[["component","@slideDialog.start"],["component","@slideDialog.done"]],function(t,e,i){var r=!0;return"component:@slideDialog.start"===e&&(r=!1!==n._28(t,1)._onAnimationStart(i)&&r),"component:@slideDialog.done"===e&&(r=!1!==n._28(t,1)._onAnimationDone(i)&&r),r},m,d)),n._15(1,49152,null,0,r.g,[n.o,u.i,n.h,[2,o.c]],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._id,null==n._28(e,1)._config?null:n._28(e,1)._config.role,null!=n._28(e,1)._config&&n._28(e,1)._config.ariaLabel?null:n._28(e,1)._ariaLabelledBy,null==n._28(e,1)._config?null:n._28(e,1)._config.ariaLabel,(null==n._28(e,1)._config?null:n._28(e,1)._config.ariaDescribedBy)||null,n._28(e,1)._state)})},{},{},[])},i0AX:function(t,e,i){"use strict";i.d(e,"c",function(){return f}),i.d(e,"b",function(){return u}),i.d(e,"a",function(){return h});var n=i("Un6q"),r=i("LMZF"),o=i("ghl+"),s=i("gOiy"),a=i("jk5D"),l=i("XEj9"),c=i("TO51"),u=function(){function t(){this.changes=new c.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(t,e,i){if(0==i||0==e)return"0 of "+i;var n=t*e;return n+1+" - "+(n<(i=Math.max(i,0))?Math.min(n+e,i):n+e)+" of "+i}}return t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}();function h(t){return t||new u}var p={provide:u,deps:[[new r.G,new r.T,u]],useFactory:h},d=(function(){}(),function(){function t(t,e){var i=this;this._intl=t,this._changeDetectorRef=e,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new r.r,this._intlChanges=t.changes.subscribe(function(){return i._changeDetectorRef.markForCheck()})}return Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(t){this._pageIndex=Object(l.d)(t),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=Object(l.d)(t),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSize",{get:function(){return this._pageSize},set:function(t){this._pageSize=Object(l.d)(t),this._updateDisplayedPageSizeOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSizeOptions",{get:function(){return this._pageSizeOptions},set:function(t){this._pageSizeOptions=(t||[]).map(function(t){return Object(l.d)(t)}),this._updateDisplayedPageSizeOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidePageSize",{get:function(){return this._hidePageSize},set:function(t){this._hidePageSize=Object(l.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFirstLastButtons",{get:function(){return this._showFirstLastButtons},set:function(t){this._showFirstLastButtons=Object(l.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._initialized=!0,this._updateDisplayedPageSizeOptions()},t.prototype.ngOnDestroy=function(){this._intlChanges.unsubscribe()},t.prototype.nextPage=function(){this.hasNextPage()&&(this.pageIndex++,this._emitPageEvent())},t.prototype.previousPage=function(){this.hasPreviousPage()&&(this.pageIndex--,this._emitPageEvent())},t.prototype.firstPage=function(){this.hasPreviousPage()&&(this.pageIndex=0,this._emitPageEvent())},t.prototype.lastPage=function(){this.hasNextPage()&&(this.pageIndex=this.getNumberOfPages(),this._emitPageEvent())},t.prototype.hasPreviousPage=function(){return this.pageIndex>=1&&0!=this.pageSize},t.prototype.hasNextPage=function(){var t=this.getNumberOfPages();return this.pageIndex<t&&0!=this.pageSize},t.prototype.getNumberOfPages=function(){return Math.ceil(this.length/this.pageSize)-1},t.prototype._changePageSize=function(t){var e=this.pageIndex*this.pageSize;this.pageIndex=Math.floor(e/t)||0,this.pageSize=t,this._emitPageEvent()},t.prototype._updateDisplayedPageSizeOptions=function(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1==this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort(function(t,e){return t-e}),this._changeDetectorRef.markForCheck())},t.prototype._emitPageEvent=function(){this.page.emit({pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})},t.decorators=[{type:r.j,args:[{selector:"mat-paginator",exportAs:"matPaginator",template:'<div class="mat-paginator-container"><div class="mat-paginator-page-size" *ngIf="!hidePageSize"><div class="mat-paginator-page-size-label">{{_intl.itemsPerPageLabel}}</div><mat-form-field *ngIf="_displayedPageSizeOptions.length > 1" class="mat-paginator-page-size-select"><mat-select [value]="pageSize" [aria-label]="_intl.itemsPerPageLabel" (change)="_changePageSize($event.value)"><mat-option *ngFor="let pageSizeOption of _displayedPageSizeOptions" [value]="pageSizeOption">{{pageSizeOption}}</mat-option></mat-select></mat-form-field><div *ngIf="_displayedPageSizeOptions.length <= 1">{{pageSize}}</div></div><div class="mat-paginator-range-actions"><div class="mat-paginator-range-label">{{_intl.getRangeLabel(pageIndex, pageSize, length)}}</div><button mat-icon-button type="button" class="mat-paginator-navigation-first" (click)="firstPage()" [attr.aria-label]="_intl.firstPageLabel" [matTooltip]="_intl.firstPageLabel" [matTooltipPosition]="\'above\'" [disabled]="!hasPreviousPage()" *ngIf="showFirstLastButtons"><div class="mat-paginator-first"></div><div class="mat-paginator-decrement"></div></button> <button mat-icon-button type="button" class="mat-paginator-navigation-previous" (click)="previousPage()" [attr.aria-label]="_intl.previousPageLabel" [matTooltip]="_intl.previousPageLabel" [matTooltipPosition]="\'above\'" [disabled]="!hasPreviousPage()"><div class="mat-paginator-decrement"></div></button> <button mat-icon-button type="button" class="mat-paginator-navigation-next" (click)="nextPage()" [attr.aria-label]="_intl.nextPageLabel" [matTooltip]="_intl.nextPageLabel" [matTooltipPosition]="\'above\'" [disabled]="!hasNextPage()"><div class="mat-paginator-increment"></div></button> <button mat-icon-button type="button" class="mat-paginator-navigation-last" (click)="lastPage()" [attr.aria-label]="_intl.lastPageLabel" [matTooltip]="_intl.lastPageLabel" [matTooltipPosition]="\'above\'" [disabled]="!hasNextPage()" *ngIf="showFirstLastButtons"><div class="mat-paginator-increment"></div><div class="mat-paginator-last"></div></button></div></div>',styles:[".mat-paginator{display:block}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;min-height:56px;padding:0 8px;flex-wrap:wrap-reverse}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-decrement-button+.mat-paginator-decrement-button{margin:0 0 0 8px}[dir=rtl] .mat-paginator-decrement-button+.mat-paginator-decrement-button{margin:0 8px 0 0}.mat-paginator-decrement,.mat-paginator-increment{width:8px;height:8px}.mat-paginator-increment,[dir=rtl] .mat-paginator-decrement{transform:rotate(45deg)}.mat-paginator-decrement,[dir=rtl] .mat-paginator-increment{transform:rotate(225deg)}.mat-paginator-increment{margin-left:12px}[dir=rtl] .mat-paginator-increment{margin-right:12px}.mat-paginator-decrement{margin-left:16px}[dir=rtl] .mat-paginator-decrement{margin-right:16px}.mat-paginator-first{transform:rotate(90deg);width:14px;height:8px;float:left;margin-left:3px}.mat-paginator-navigation-first .mat-paginator-decrement{margin-left:21px}.mat-paginator-navigation-last .mat-paginator-increment{float:left;margin-left:9px}.mat-paginator-last{transform:rotate(90deg);width:14px;height:8px;margin-left:15px}.mat-paginator-range-actions{display:flex;align-items:center;min-height:48px}"],host:{class:"mat-paginator"},changeDetection:r.g.OnPush,encapsulation:r._0.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:u},{type:r.h}]},t.propDecorators={pageIndex:[{type:r.y}],length:[{type:r.y}],pageSize:[{type:r.y}],pageSizeOptions:[{type:r.y}],hidePageSize:[{type:r.y}],showFirstLastButtons:[{type:r.y}],page:[{type:r.H}]},t}()),f=function(){function t(){}return t.decorators=[{type:r.C,args:[{imports:[n.b,o.c,s.d,a.e],exports:[d],declarations:[d],providers:[p]}]}],t.ctorParameters=function(){return[]},t}()},iAGO:function(t,e,i){"use strict";var n=i("1Rb4").nextTick;function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},iw1t:function(t,e,i){"use strict";(function(e){function n(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=i("N+n4"),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l="foo"===(function(){}).name;function c(t){return Object.prototype.toString.call(t)}function u(t){return!r(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=y,p=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(o.isFunction(t)){if(l)return t.name;var e=t.toString().match(p);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!o.isFunction(t))return o.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,i,n,r){throw new h.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}function y(t,e){t||g(t,!0,e,"==",h.ok)}function _(t,e,i,s){if(t===e)return!0;if(r(t)&&r(e))return 0===n(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,i,n){if(null==t||null==e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=v(t),s=v(e);if(r&&!s||!r&&s)return!1;if(r)return t=a.call(t),e=a.call(e),_(t,e,i);var l,c,u=A(t),h=A(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!==h[c])return!1;for(c=u.length-1;c>=0;c--)if(l=u[c],!_(t[l],e[l],i,n))return!1;return!0}(t,e,i,s))}return i?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,i,n){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!r&&g(r,i,"Missing expected exception"+n);var s="string"==typeof n,a=!t&&r&&!i;if((!t&&o.isError(r)&&s&&b(r,i)||a)&&g(r,i,"Got unwanted exception"+n),t&&r&&i&&!b(r,i)||!t&&r)throw r}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(m((e=this).actual),128)+" "+e.operator+" "+f(m(e.expected),128),this.generatedMessage=!0);var i=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,i);else{var n=new Error;if(n.stack){var r=n.stack,o=d(i),s=r.indexOf("\n"+o);if(s>=0){var a=r.indexOf("\n",s+1);r=r.substring(a+1)}this.stack=r}}},o.inherits(h.AssertionError,Error),h.fail=g,h.ok=y,h.equal=function(t,e,i){t!=e&&g(t,e,i,"==",h.equal)},h.notEqual=function(t,e,i){t==e&&g(t,e,i,"!=",h.notEqual)},h.deepEqual=function(t,e,i){_(t,e,!1)||g(t,e,i,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,i){_(t,e,!0)||g(t,e,i,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,i){_(t,e,!1)&&g(t,e,i,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,i,n){_(e,i,!0)&&g(e,i,n,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,i){t!==e&&g(t,e,i,"===",h.strictEqual)},h.notStrictEqual=function(t,e,i){t===e&&g(t,e,i,"!==",h.notStrictEqual)},h.throws=function(t,e,i){x(!0,t,e,i)},h.doesNotThrow=function(t,e,i){x(!1,t,e,i)},h.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var i in t)s.call(t,i)&&e.push(i);return e}}).call(e,i("GTd5"))},j5BN:function(t,e,i){"use strict";i.d(e,"a",function(){return p}),i.d(e,"b",function(){return d}),i.d(e,"n",function(){return m}),i.d(e,"f",function(){return f}),i.d(e,"E",function(){return g}),i.d(e,"C",function(){return y}),i.d(e,"D",function(){return _}),i.d(e,"G",function(){return v}),i.d(e,"F",function(){return b}),i.d(e,"A",function(){return D}),i.d(e,"r",function(){return k}),i.d(e,"h",function(){return x}),i.d(e,"c",function(){return w}),i.d(e,"g",function(){return P}),i.d(e,"z",function(){return R}),i.d(e,"k",function(){return I}),i.d(e,"d",function(){return F}),i.d(e,"i",function(){return N}),i.d(e,"e",function(){return B}),i.d(e,"o",function(){return V}),i.d(e,"q",function(){return z}),i.d(e,"p",function(){return U}),i.d(e,"u",function(){return ot}),i.d(e,"l",function(){return nt}),i.d(e,"t",function(){return rt}),i.d(e,"s",function(){return tt}),i.d(e,"j",function(){return st}),i.d(e,"y",function(){return K}),i.d(e,"m",function(){return Y}),i.d(e,"x",function(){return q}),i.d(e,"B",function(){return X}),i.d(e,"w",function(){return Z}),i.d(e,"v",function(){return Q});var n=i("LMZF"),r=i("l6RC"),o=i("6Xbx"),s=i("XEj9"),a=i("TO51"),l=(i("AP4T"),i("RyBE")),c=i("Un6q"),u=i("V8+5"),h=i("rT01"),p=function(){function t(){}return t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",t}(),d=function(){function t(){}return t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms",t}(),f=new n.w("mat-sanity-checks"),m=function(){function t(t){this._sanityChecksEnabled=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return t.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Object(n._6)()&&!this._isTestEnv()},t.prototype._isTestEnv=function(){return this._window&&(this._window.__karma__||this._window.jasmine)},t.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},t.prototype._checkThemeIsPresent=function(){if(this._document&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}},t.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(this._areChecksEnabled()&&!this._window.Hammer&&console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},t.decorators=[{type:n.C,args:[{imports:[r.a],exports:[r.a],providers:[{provide:f,useValue:!0}]}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.G},{type:n.u,args:[f]}]}]},t}();function g(t){return function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return n._disabled=!1,n}return Object(o.b)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Object(s.c)(t)},enumerable:!0,configurable:!0}),e}(t)}function y(t,e){return function(t){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=t.apply(this,i)||this;return r.color=e,r}return Object(o.b)(i,t),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){var i=t||e;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),i&&this._elementRef.nativeElement.classList.add("mat-"+i),this._color=i)},enumerable:!0,configurable:!0}),i}(t)}function _(t){return function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return n._disableRipple=!1,n}return Object(o.b)(e,t),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(t){this._disableRipple=Object(s.c)(t)},enumerable:!0,configurable:!0}),e}(t)}function v(t,e){return void 0===e&&(e=0),function(t){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=t.apply(this,i)||this;return r._tabIndex=e,r}return Object(o.b)(i,t),Object.defineProperty(i.prototype,"tabIndex",{get:function(){return this.disabled?-1:this._tabIndex},set:function(t){this._tabIndex=null!=t?t:e},enumerable:!0,configurable:!0}),i}(t)}function b(t){return function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return n.errorState=!1,n.stateChanges=new a.a,n}return Object(o.b)(e,t),e.prototype.updateErrorState=function(){var t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.errorStateMatcher||this._defaultErrorStateMatcher,n=this.ngControl?this.ngControl.control:null,r=i.isErrorState(n,e);r!==t&&(this.errorState=r,this.stateChanges.next())},e}(t)}var x=new n.w("MAT_DATE_LOCALE"),A={provide:x,useExisting:n.B},w=function(){function t(){this._localeChanges=new a.a}return Object.defineProperty(t.prototype,"localeChanges",{get:function(){return this._localeChanges},enumerable:!0,configurable:!0}),t.prototype.deserialize=function(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()},t.prototype.setLocale=function(t){this.locale=t,this._localeChanges.next()},t.prototype.compareDate=function(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)},t.prototype.sameDate=function(t,e){if(t&&e){var i=this.isValid(t),n=this.isValid(e);return i&&n?!this.compareDate(t,e):i==n}return t==e},t.prototype.clampDate=function(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t},t}(),P=new n.w("mat-date-formats"),E="undefined"!=typeof Intl,T={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},S=M(31,function(t){return String(t+1)}),C={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},O=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function M(t,e){for(var i=Array(t),n=0;n<t;n++)i[n]=e(n);return i}var R=function(t){function e(e){var i=t.call(this)||this;t.prototype.setLocale.call(i,e);var n="object"==typeof document&&!!document,r=n&&/(msie|trident)/i.test(navigator.userAgent);return i.useUtcForDisplay=!r,i._clampDate=r||n&&/(edge)/i.test(navigator.userAgent),i}return Object(o.b)(e,t),e.prototype.getYear=function(t){return t.getFullYear()},e.prototype.getMonth=function(t){return t.getMonth()},e.prototype.getDate=function(t){return t.getDate()},e.prototype.getDayOfWeek=function(t){return t.getDay()},e.prototype.getMonthNames=function(t){var e=this;if(E){var i=new Intl.DateTimeFormat(this.locale,{month:t});return M(12,function(t){return e._stripDirectionalityCharacters(i.format(new Date(2017,t,1)))})}return T[t]},e.prototype.getDateNames=function(){var t=this;if(E){var e=new Intl.DateTimeFormat(this.locale,{day:"numeric"});return M(31,function(i){return t._stripDirectionalityCharacters(e.format(new Date(2017,0,i+1)))})}return S},e.prototype.getDayOfWeekNames=function(t){var e=this;if(E){var i=new Intl.DateTimeFormat(this.locale,{weekday:t});return M(7,function(t){return e._stripDirectionalityCharacters(i.format(new Date(2017,0,t+1)))})}return C[t]},e.prototype.getYearName=function(t){if(E){var e=new Intl.DateTimeFormat(this.locale,{year:"numeric"});return this._stripDirectionalityCharacters(e.format(t))}return String(this.getYear(t))},e.prototype.getFirstDayOfWeek=function(){return 0},e.prototype.getNumDaysInMonth=function(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))},e.prototype.clone=function(t){return this.createDate(this.getYear(t),this.getMonth(t),this.getDate(t))},e.prototype.createDate=function(t,e,i){if(e<0||e>11)throw Error('Invalid month index "'+e+'". Month index has to be between 0 and 11.');if(i<1)throw Error('Invalid date "'+i+'". Date has to be greater than 0.');var n=this._createDateWithOverflow(t,e,i);if(n.getMonth()!=e)throw Error('Invalid date "'+i+'" for month with index "'+e+'".');return n},e.prototype.today=function(){return new Date},e.prototype.parse=function(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null},e.prototype.format=function(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");if(E){this._clampDate&&(t.getFullYear()<1||t.getFullYear()>9999)&&(t=this.clone(t)).setFullYear(Math.max(1,Math.min(9999,t.getFullYear()))),this.useUtcForDisplay&&(t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())),e=Object(o.a)({},e,{timeZone:"utc"}));var i=new Intl.DateTimeFormat(this.locale,e);return this._stripDirectionalityCharacters(i.format(t))}return this._stripDirectionalityCharacters(t.toDateString())},e.prototype.addCalendarYears=function(t,e){return this.addCalendarMonths(t,12*e)},e.prototype.addCalendarMonths=function(t,e){var i=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(i)!=((this.getMonth(t)+e)%12+12)%12&&(i=this._createDateWithOverflow(this.getYear(i),this.getMonth(i),0)),i},e.prototype.addCalendarDays=function(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)},e.prototype.toIso8601=function(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")},e.prototype.deserialize=function(e){if("string"==typeof e){if(!e)return null;if(O.test(e)){var i=new Date(e);if(this.isValid(i))return i}}return t.prototype.deserialize.call(this,e)},e.prototype.isDateInstance=function(t){return t instanceof Date},e.prototype.isValid=function(t){return!isNaN(t.getTime())},e.prototype.invalid=function(){return new Date(NaN)},e.prototype._createDateWithOverflow=function(t,e,i){var n=new Date(t,e,i);return t>=0&&t<100&&n.setFullYear(this.getYear(n)-1900),n},e.prototype._2digit=function(t){return("00"+t).slice(-2)},e.prototype._stripDirectionalityCharacters=function(t){return t.replace(/[\u200e\u200f]/g,"")},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.G},{type:n.u,args:[x]}]}]},e}(w),I={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}},D=function(){function t(){}return t.decorators=[{type:n.C,args:[{providers:[{provide:w,useClass:R},A]}]}],t.ctorParameters=function(){return[]},t}(),L=I,k=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[D],providers:[{provide:P,useValue:L}]}]}],t.ctorParameters=function(){return[]},t}(),F=(function(){function t(){}t.prototype.isErrorState=function(t,e){return!!(t&&t.invalid&&(t.dirty||e&&e.submitted))},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]}}(),function(){function t(){}return t.prototype.isErrorState=function(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}()),N=new n.w("MAT_HAMMER_OPTIONS"),B=function(t){function e(e,i){var n=t.call(this)||this;return n._hammerOptions=e,n._hammer="undefined"!=typeof window?window.Hammer:null,n.events=n._hammer?["longpress","slide","slidestart","slideend","slideright","slideleft"]:[],i&&i._checkHammerIsAvailable(),n}return Object(o.b)(e,t),e.prototype.buildHammer=function(t){var e=new this._hammer(t,this._hammerOptions||void 0),i=new this._hammer.Pan,n=new this._hammer.Swipe,r=new this._hammer.Press,o=this._createRecognizer(i,{event:"slide",threshold:0},n),s=this._createRecognizer(r,{event:"longpress",time:500});return i.recognizeWith(n),e.add([n,r,i,o,s]),e},e.prototype._createRecognizer=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=new t.constructor(e);return i.push(t),i.forEach(function(t){return r.recognizeWith(t)}),r},e.decorators=[{type:n.v}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.G},{type:n.u,args:[N]}]},{type:m,decorators:[{type:n.G}]}]},e}(l.g),V=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-line], [matLine]",host:{class:"mat-line"}}]}],t.ctorParameters=function(){return[]},t}(),z=function(){function t(t,e){var i=this;this._lines=t,this._element=e,this._setLineClass(this._lines.length),this._lines.changes.subscribe(function(){i._setLineClass(i._lines.length)})}return t.prototype._setLineClass=function(t){this._resetClasses(),2===t||3===t?this._setClass("mat-"+t+"-line",!0):t>3&&this._setClass("mat-multi-line",!0)},t.prototype._resetClasses=function(){this._setClass("mat-2-line",!1),this._setClass("mat-3-line",!1),this._setClass("mat-multi-line",!1)},t.prototype._setClass=function(t,e){e?this._element.nativeElement.classList.add(t):this._element.nativeElement.classList.remove(t)},t}(),U=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[m],exports:[V,m],declarations:[V]}]}],t.ctorParameters=function(){return[]},t}(),j={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};j[j.FADING_IN]="FADING_IN",j[j.VISIBLE]="VISIBLE",j[j.FADING_OUT]="FADING_OUT",j[j.HIDDEN]="HIDDEN";var G=function(){function t(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=j.HIDDEN}return t.prototype.fadeOut=function(){this._renderer.fadeOutRipple(this)},t}(),W={enterDuration:450,exitDuration:400},H=800,X=function(){function t(t,e,i,n){var r=this;this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._eventOptions=!!Object(u.d)()&&{passive:!0},this.onMousedown=function(t){var e=r._lastTouchStartEvent&&Date.now()<r._lastTouchStartEvent+H;r._target.rippleDisabled||e||(r._isPointerDown=!0,r.fadeInRipple(t.clientX,t.clientY,r._target.rippleConfig))},this.onTouchStart=function(t){r._target.rippleDisabled||(r._lastTouchStartEvent=Date.now(),r._isPointerDown=!0,r.fadeInRipple(t.touches[0].clientX,t.touches[0].clientY,r._target.rippleConfig))},this.onPointerUp=function(){r._isPointerDown&&(r._isPointerDown=!1,r._activeRipples.forEach(function(t){var e=t.state===j.VISIBLE||t.config.terminateOnPointerUp&&t.state===j.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))},n.isBrowser&&(this._containerElement=i.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown),this._triggerEvents.set("mouseup",this.onPointerUp),this._triggerEvents.set("mouseleave",this.onPointerUp),this._triggerEvents.set("touchstart",this.onTouchStart),this._triggerEvents.set("touchend",this.onPointerUp))}return t.prototype.fadeInRipple=function(t,e,i){var n=this;void 0===i&&(i={});var r=this._containerElement.getBoundingClientRect(),s=Object(o.a)({},W,i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);var a,l=i.radius||function(t,e,i){var n=Math.max(Math.abs(t-i.left),Math.abs(t-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),c=t-r.left,u=e-r.top,h=s.enterDuration/(i.speedFactor||1),p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=c-l+"px",p.style.top=u-l+"px",p.style.height=2*l+"px",p.style.width=2*l+"px",p.style.backgroundColor=i.color||null,p.style.transitionDuration=h+"ms",this._containerElement.appendChild(p),a=p,window.getComputedStyle(a).getPropertyValue("opacity"),p.style.transform="scale(1)";var d=new G(this,p,i);return d.state=j.FADING_IN,this._activeRipples.add(d),this.runTimeoutOutsideZone(function(){d.state=j.VISIBLE,i.persistent||n._isPointerDown||d.fadeOut()},h),d},t.prototype.fadeOutRipple=function(t){if(this._activeRipples.delete(t)){var e=t.element,i=Object(o.a)({},W,t.config.animation);e.style.transitionDuration=i.exitDuration+"ms",e.style.opacity="0",t.state=j.FADING_OUT,this.runTimeoutOutsideZone(function(){t.state=j.HIDDEN,e.parentNode.removeChild(e)},i.exitDuration)}},t.prototype.fadeOutAll=function(){this._activeRipples.forEach(function(t){return t.fadeOut()})},t.prototype.setupTriggerEvents=function(t){var e=this;t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(function(){e._triggerEvents.forEach(function(i,n){return t.addEventListener(n,i,e._eventOptions)})}),this._triggerElement=t)},t.prototype.runTimeoutOutsideZone=function(t,e){void 0===e&&(e=0),this._ngZone.runOutsideAngular(function(){return setTimeout(t,e)})},t.prototype._removeTriggerEvents=function(){var t=this;this._triggerElement&&this._triggerEvents.forEach(function(e,i){t._triggerElement.removeEventListener(i,e,t._eventOptions)})},t}();var Y=new n.w("mat-ripple-global-options"),q=function(){function t(t,e,i,n){this._elementRef=t,this.radius=0,this.speedFactor=1,this._disabled=!1,this._isInitialized=!1,this._globalOptions=n||{},this._rippleRenderer=new X(this,e,t,i)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()},t.prototype.ngOnDestroy=function(){this._rippleRenderer._removeTriggerEvents()},t.prototype.launch=function(t,e,i){return this._rippleRenderer.fadeInRipple(t,e,Object(o.a)({},this.rippleConfig,i))},t.prototype.fadeOutAll=function(){this._rippleRenderer.fadeOutAll()},Object.defineProperty(t.prototype,"rippleConfig",{get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object(o.a)({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp,speedFactor:this.speedFactor*(this._globalOptions.baseSpeedFactor||1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rippleDisabled",{get:function(){return this.disabled||!!this._globalOptions.disabled},enumerable:!0,configurable:!0}),t.prototype._setupTriggerEventsIfEnabled=function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)},t.decorators=[{type:n.n,args:[{selector:"[mat-ripple], [matRipple]",exportAs:"matRipple",host:{class:"mat-ripple","[class.mat-ripple-unbounded]":"unbounded"}}]}],t.ctorParameters=function(){return[{type:n.o},{type:n.F},{type:u.a},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[Y]}]}]},t.propDecorators={color:[{type:n.y,args:["matRippleColor"]}],unbounded:[{type:n.y,args:["matRippleUnbounded"]}],centered:[{type:n.y,args:["matRippleCentered"]}],radius:[{type:n.y,args:["matRippleRadius"]}],speedFactor:[{type:n.y,args:["matRippleSpeedFactor"]}],animation:[{type:n.y,args:["matRippleAnimation"]}],disabled:[{type:n.y,args:["matRippleDisabled"]}],trigger:[{type:n.y,args:["matRippleTrigger"]}]},t}(),K=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[m,u.b],exports:[q,m],declarations:[q]}]}],t.ctorParameters=function(){return[]},t}(),Q=function(){function t(){this.state="unchecked",this.disabled=!1}return t.decorators=[{type:n.j,args:[{encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,selector:"mat-pseudo-checkbox",styles:[".mat-pseudo-checkbox{width:20px;height:20px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:9px;left:2px;width:16px;opacity:1}.mat-pseudo-checkbox-checked::after{top:5px;left:3px;width:12px;height:5px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1}"],template:"",host:{class:"mat-pseudo-checkbox","[class.mat-pseudo-checkbox-indeterminate]":'state === "indeterminate"',"[class.mat-pseudo-checkbox-checked]":'state === "checked"',"[class.mat-pseudo-checkbox-disabled]":"disabled"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={state:[{type:n.y}],disabled:[{type:n.y}]},t}(),Z=function(){function t(){}return t.decorators=[{type:n.C,args:[{exports:[Q],declarations:[Q]}]}],t.ctorParameters=function(){return[]},t}(),J=g(function(){return function(){}}()),$=0,tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._labelId="mat-optgroup-label-"+$++,e}return Object(o.b)(e,t),e.decorators=[{type:n.j,args:[{selector:"mat-optgroup",exportAs:"matOptgroup",template:'<label class="mat-optgroup-label" [id]="_labelId">{{ label }}</label><ng-content select="mat-option"></ng-content>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,inputs:["disabled"],styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}"],host:{class:"mat-optgroup",role:"group","[class.mat-optgroup-disabled]":"disabled","[attr.aria-disabled]":"disabled.toString()","[attr.aria-labelledby]":"_labelId"}}]}],e.ctorParameters=function(){return[]},e.propDecorators={label:[{type:n.y}]},e}(J),et=0,it=function(){return function(t,e){void 0===e&&(e=!1),this.source=t,this.isUserInput=e}}(),nt=new n.w("MAT_OPTION_PARENT_COMPONENT"),rt=function(){function t(t,e,i,r){this._element=t,this._changeDetectorRef=e,this._parent=i,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._id="mat-option-"+et++,this._mostRecentViewValue="",this.onSelectionChange=new n.r,this._stateChanges=new a.a}return Object.defineProperty(t.prototype,"multiple",{get:function(){return this._parent&&this._parent.multiple},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.group&&this.group.disabled||this._disabled},set:function(t){this._disabled=Object(s.c)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableRipple",{get:function(){return this._parent&&this._parent.disableRipple},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewValue",{get:function(){return(this._getHostElement().textContent||"").trim()},enumerable:!0,configurable:!0}),t.prototype.select=function(){this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent()},t.prototype.deselect=function(){this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent()},t.prototype.focus=function(){var t=this._getHostElement();"function"==typeof t.focus&&t.focus()},t.prototype.setActiveStyles=function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())},t.prototype.setInactiveStyles=function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())},t.prototype.getLabel=function(){return this.viewValue},t.prototype._handleKeydown=function(t){t.keyCode!==h.f&&t.keyCode!==h.n||(this._selectViaInteraction(),t.preventDefault())},t.prototype._selectViaInteraction=function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))},t.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},t.prototype._getHostElement=function(){return this._element.nativeElement},t.prototype.ngAfterViewChecked=function(){if(this._selected){var t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}},t.prototype._emitSelectionChangeEvent=function(t){void 0===t&&(t=!1),this.onSelectionChange.emit(new it(this,t))},t.countGroupLabelsBeforeOption=function(t,e,i){if(i.length){for(var n=e.toArray(),r=i.toArray(),o=0,s=0;s<t+1;s++)n[s].group&&n[s].group===r[o]&&o++;return o}return 0},t.decorators=[{type:n.j,args:[{selector:"mat-option",exportAs:"matOption",host:{role:"option","[attr.tabindex]":"_getTabIndex()","[class.mat-selected]":"selected","[class.mat-option-multiple]":"multiple","[class.mat-active]":"active","[id]":"id","[attr.aria-selected]":"selected.toString()","[attr.aria-disabled]":"disabled.toString()","[class.mat-option-disabled]":"disabled","(click)":"_selectViaInteraction()","(keydown)":"_handleKeydown($event)",class:"mat-option"},styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],template:'<mat-pseudo-checkbox *ngIf="multiple" class="mat-option-pseudo-checkbox" [state]="selected ? \'checked\' : \'\'" [disabled]="disabled"></mat-pseudo-checkbox><span class="mat-option-text"><ng-content></ng-content></span><div class="mat-option-ripple" mat-ripple [matRippleTrigger]="_getHostElement()" [matRippleDisabled]="disabled || disableRipple"></div>',encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],t.ctorParameters=function(){return[{type:n.o},{type:n.h},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[nt]}]},{type:tt,decorators:[{type:n.G}]}]},t.propDecorators={value:[{type:n.y}],disabled:[{type:n.y}],onSelectionChange:[{type:n.H}]},t}(),ot=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[K,c.b,Z],exports:[rt,tt],declarations:[rt,tt]}]}],t.ctorParameters=function(){return[]},t}(),st=new n.w("mat-label-global-options")},jGTa:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("Un6q"),r=i("LMZF"),o=i("9WiL"),s=function(){function t(){}return t.decorators=[{type:r.C,args:[{imports:[n.b],declarations:[o.a],exports:[o.a]}]}],t.ctorParameters=function(){return[]},t}()},jaVc:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("qLnt"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,i){t.call(this),this.subject=e,this.subscriber=i,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(n.a)},jk5D:function(t,e,i){"use strict";i.d(e,"e",function(){return O}),i.d(e,"b",function(){return A}),i.d(e,"c",function(){return w}),i.d(e,"a",function(){return E}),i.d(e,"d",function(){return T}),i.d(e,"f",function(){return S});var n=i("8Xfy"),r=i("OFGE"),o=i("V8+5"),s=i("Un6q"),a=i("LMZF"),l=i("j5BN"),c=i("3Czw"),u=i("l6RC"),h=i("XEj9"),p=i("rT01"),d=i("CZgk"),f=i("pXwq"),m=i("2kLc"),g=i("4jwp"),y=i("TO51"),_=i("fAeS"),v={tooltipState:Object(_.m)("state",[Object(_.j)("initial, void, hidden",Object(_.k)({transform:"scale(0)"})),Object(_.j)("visible",Object(_.k)({transform:"scale(1)"})),Object(_.l)("* => visible",Object(_.e)("150ms cubic-bezier(0.0, 0.0, 0.2, 1)")),Object(_.l)("* => hidden",Object(_.e)("150ms cubic-bezier(0.4, 0.0, 1, 1)"))])},b=20;function x(t){return Error('Tooltip position "'+t+'" is invalid.')}var A=new a.w("mat-tooltip-scroll-strategy");function w(t){return function(){return t.scrollStrategies.reposition({scrollThrottle:b})}}var P={provide:A,deps:[r.c],useFactory:w},E=new a.w("mat-tooltip-default-options"),T=function(){function t(t,e,i,n,r,o,s,a,l,c,u){var h=this;this._overlay=t,this._elementRef=e,this._scrollDispatcher=i,this._viewContainerRef=n,this._ngZone=r,this._platform=o,this._ariaDescriber=s,this._focusMonitor=a,this._scrollStrategy=l,this._dir=c,this._defaultOptions=u,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions?this._defaultOptions.showDelay:0,this.hideDelay=this._defaultOptions?this._defaultOptions.hideDelay:0,this._message="",this._manualListeners=new Map;var p=e.nativeElement;o.IOS?"INPUT"!==p.nodeName&&"TEXTAREA"!==p.nodeName||(p.style.webkitUserSelect=p.style.userSelect=""):(this._manualListeners.set("mouseenter",function(){return h.show()}),this._manualListeners.set("mouseleave",function(){return h.hide()}),this._manualListeners.forEach(function(t,i){return e.nativeElement.addEventListener(i,t)})),a.monitor(p).subscribe(function(t){t?"program"!==t&&r.run(function(){return h.show()}):r.run(function(){return h.hide(0)})})}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){t!==this._position&&(this._position=t,this._tooltipInstance&&this._disposeTooltip())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Object(h.c)(t),this._disabled&&this.hide(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_positionDeprecated",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=t?(""+t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ariaDescriber.describe(this._elementRef.nativeElement,this.message))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipClass",{get:function(){return this._tooltipClass},set:function(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){var t=this;this._tooltipInstance&&this._disposeTooltip(),this._platform.IOS||(this._manualListeners.forEach(function(e,i){t._elementRef.nativeElement.removeEventListener(i,e)}),this._manualListeners.clear()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},t.prototype.show=function(t){void 0===t&&(t=this.showDelay),!this.disabled&&this.message&&(this._tooltipInstance||this._createTooltip(),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(this._position,t))},t.prototype.hide=function(t){void 0===t&&(t=this.hideDelay),this._tooltipInstance&&this._tooltipInstance.hide(t)},t.prototype.toggle=function(){this._isTooltipVisible()?this.hide():this.show()},t.prototype._isTooltipVisible=function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()},t.prototype._handleKeydown=function(t){this._isTooltipVisible()&&t.keyCode===p.g&&(t.stopPropagation(),this.hide(0))},t.prototype._handleTouchend=function(){this.hide(this._defaultOptions?this._defaultOptions.touchendHideDelay:1500)},t.prototype._createTooltip=function(){var t=this,e=this._createOverlay(),i=new d.d(S,this._viewContainerRef);this._tooltipInstance=e.attach(i).instance,Object(m.a)(this._tooltipInstance.afterHidden(),e.detachments()).subscribe(function(){t._tooltipInstance&&t._disposeTooltip()})},t.prototype._createOverlay=function(){var t=this,e=this._getOrigin(),i=this._getOverlayPosition(),n=this._overlay.position().connectedTo(this._elementRef,e.main,i.main).withFallbackPosition(e.fallback,i.fallback),o=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef);n.withScrollableContainers(o),n.onPositionChange.subscribe(function(e){t._tooltipInstance&&(e.scrollableViewProperties.isOverlayClipped&&t._tooltipInstance.isVisible()?t._ngZone.run(function(){return t.hide(0)}):t._tooltipInstance._setTransformOrigin(e.connectionPair))});var s=new r.d({direction:this._dir?this._dir.value:"ltr",positionStrategy:n,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()});return this._overlayRef=this._overlay.create(s),this._overlayRef},t.prototype._disposeTooltip=function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._tooltipInstance=null},t.prototype._getOrigin=function(){var t,e=!this._dir||"ltr"==this._dir.value;if("above"==this.position||"below"==this.position)t={originX:"center",originY:"above"==this.position?"top":"bottom"};else if("left"==this.position||"before"==this.position&&e||"after"==this.position&&!e)t={originX:"start",originY:"center"};else{if(!("right"==this.position||"after"==this.position&&e||"before"==this.position&&!e))throw x(this.position);t={originX:"end",originY:"center"}}var i=this._invertPosition(t.originX,t.originY);return{main:t,fallback:{originX:i.x,originY:i.y}}},t.prototype._getOverlayPosition=function(){var t,e=!this._dir||"ltr"==this._dir.value;if("above"==this.position)t={overlayX:"center",overlayY:"bottom"};else if("below"==this.position)t={overlayX:"center",overlayY:"top"};else if("left"==this.position||"before"==this.position&&e||"after"==this.position&&!e)t={overlayX:"end",overlayY:"center"};else{if(!("right"==this.position||"after"==this.position&&e||"before"==this.position&&!e))throw x(this.position);t={overlayX:"start",overlayY:"center"}}var i=this._invertPosition(t.overlayX,t.overlayY);return{main:t,fallback:{overlayX:i.x,overlayY:i.y}}},t.prototype._updateTooltipMessage=function(){var t=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(f.a)(1)).subscribe(function(){t._tooltipInstance&&t._overlayRef.updatePosition()}))},t.prototype._setTooltipClass=function(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())},t.prototype._invertPosition=function(t,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:e}},t.decorators=[{type:a.n,args:[{selector:"[matTooltip]",exportAs:"matTooltip",host:{"(longpress)":"show()","(keydown)":"_handleKeydown($event)","(touchend)":"_handleTouchend()"}}]}],t.ctorParameters=function(){return[{type:r.c},{type:a.o},{type:g.d},{type:a.Z},{type:a.F},{type:o.a},{type:n.e},{type:n.h},{type:void 0,decorators:[{type:a.u,args:[A]}]},{type:u.c,decorators:[{type:a.G}]},{type:void 0,decorators:[{type:a.G},{type:a.u,args:[E]}]}]},t.propDecorators={position:[{type:a.y,args:["matTooltipPosition"]}],disabled:[{type:a.y,args:["matTooltipDisabled"]}],_positionDeprecated:[{type:a.y,args:["tooltip-position"]}],showDelay:[{type:a.y,args:["matTooltipShowDelay"]}],hideDelay:[{type:a.y,args:["matTooltipHideDelay"]}],message:[{type:a.y,args:["matTooltip"]}],tooltipClass:[{type:a.y,args:["matTooltipClass"]}]},t}(),S=function(){function t(t,e){this._changeDetectorRef=t,this._breakpointObserver=e,this._visibility="initial",this._closeOnInteraction=!1,this._transformOrigin="bottom",this._onHide=new y.a,this._isHandset=this._breakpointObserver.observe(c.b.Handset)}return t.prototype.show=function(t,e){var i=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._position=t,this._showTimeoutId=setTimeout(function(){i._visibility="visible",i._markForCheck()},e)},t.prototype.hide=function(t){var e=this;this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(function(){e._visibility="hidden",e._markForCheck()},t)},t.prototype.afterHidden=function(){return this._onHide.asObservable()},t.prototype.isVisible=function(){return"visible"===this._visibility},t.prototype._setTransformOrigin=function(t){var e="X"==("above"===this._position||"below"===this._position?"Y":"X")?t.overlayX:t.overlayY;if("top"===e||"bottom"===e)this._transformOrigin=e;else if("start"===e)this._transformOrigin="left";else{if("end"!==e)throw x(this._position);this._transformOrigin="right"}},t.prototype._animationStart=function(){this._closeOnInteraction=!1},t.prototype._animationDone=function(t){var e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)},t.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide(0)},t.prototype._markForCheck=function(){this._changeDetectorRef.markForCheck()},t.decorators=[{type:a.j,args:[{selector:"mat-tooltip-component",template:'<div class="mat-tooltip" [ngClass]="tooltipClass" [class.mat-tooltip-handset]="(_isHandset | async)!.matches" [style.transform-origin]="_transformOrigin" [@state]="_visibility" (@state.start)="_animationStart()" (@state.done)="_animationDone($event)">{{message}}</div>',styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:2px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px}@media screen and (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],encapsulation:a._0.None,preserveWhitespaces:!1,changeDetection:a.g.OnPush,animations:[v.tooltipState],host:{"[style.zoom]":'_visibility === "visible" ? 1 : null',"(body:click)":"this._handleBodyInteraction()","aria-hidden":"true"}}]}],t.ctorParameters=function(){return[{type:a.h},{type:c.a}]},t}(),C={showDelay:0,hideDelay:0,touchendHideDelay:1500},O=function(){function t(){}return t.decorators=[{type:a.C,args:[{imports:[s.b,r.g,l.n,o.b,n.a,c.c],exports:[T,S,l.n],declarations:[T,S],entryComponents:[S],providers:[P,n.b,{provide:E,useValue:C}]}]}],t.ctorParameters=function(){return[]},t}()},jxpy:function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,i,n,s,a,l=t.length;s=c(t),a=new o(3*l/4-s),i=s>0?l-4:l;var u=0;for(e=0;e<i;e+=4)n=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],a[u++]=n>>16&255,a[u++]=n>>8&255,a[u++]=255&n;2===s?(n=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,a[u++]=255&n):1===s&&(n=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,a[u++]=n>>8&255,a[u++]=255&n);return a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o="",s=[],a=0,l=i-r;a<l;a+=16383)s.push(u(t,a,a+16383>l?l:a+16383));1===r?(e=t[i-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===r&&(e=(t[i-2]<<8)+t[i-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="=");return s.push(o),s.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t,e,i){for(var r,o,s=[],a=e;a<i;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"k+Bt":function(t,e,i){"use strict";var n,r=i("Xfi0"),o=i("agPy"),s=i("xqKW"),a=function(){function t(t,e,i,n){this.cropperSettings=new s.a,this.over=!1,this.drag=!1,this._position=new o.a(t,e),this.offset=new o.a(0,0),this.radius=i,this.cropperSettings=n}return t.prototype.setDrag=function(t){this.drag=t,this.setOver(t)},t.prototype.draw=function(t){},t.prototype.setOver=function(t){this.over=t},t.prototype.touchInBounds=function(t,e){return t>this.position.x-this.radius+this.offset.x&&t<this.position.x+this.radius+this.offset.x&&e>this.position.y-this.radius+this.offset.y&&e<this.position.y+this.radius+this.offset.y},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,e){this._position.x=t,this._position.y=e},t}(),l=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return l(e,t),e.prototype.drawCornerBorder=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=1,n=1;if(this.horizontalNeighbour.position.x<this.position.x&&(i=-1),this.verticalNeighbour.position.y<this.position.y&&(n=-1),this.cropperSettings.rounded){var r=this.position.x-this.horizontalNeighbour.position.x,o=this.position.y-this.verticalNeighbour.position.y,s=Math.round(Math.sin(Math.PI/2)*Math.abs(r/2))/4,a=Math.round(Math.sin(Math.PI/2)*Math.abs(o/2))/4;this.offset.x=i>0?s:-s,this.offset.y=n>0?a:-a}else this.offset.x=0,this.offset.y=0;t.beginPath(),t.lineJoin="miter",t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,t.stroke()},e.prototype.drawCornerFill=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=1,n=1;this.horizontalNeighbour.position.x<this.position.x&&(i=-1),this.verticalNeighbour.position.y<this.position.y&&(n=-1),t.beginPath(),t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*n),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.fillStyle="rgba(255,255,255,.7)",t.fill()},e.prototype.moveX=function(t){this.setPosition(t,this.position.y)},e.prototype.moveY=function(t){this.setPosition(this.position.x,t)},e.prototype.move=function(t,e){this.setPosition(t,e),this.verticalNeighbour.moveX(t),this.horizontalNeighbour.moveY(e)},e.prototype.addHorizontalNeighbour=function(t){this.horizontalNeighbour=t},e.prototype.addVerticalNeighbour=function(t){this.verticalNeighbour=t},e.prototype.getHorizontalNeighbour=function(){return this.horizontalNeighbour},e.prototype.getVerticalNeighbour=function(){return this.verticalNeighbour},e.prototype.draw=function(t){this.drawCornerFill(t),this.drawCornerBorder(t)},e}(a),u=function(){return function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.id=i,this.x=t,this.y=e}}(),h=i("nfFB"),p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.iconPoints=[],o.scaledIconPoints=[],o.getDragIconPoints(o.iconPoints,1),o.getDragIconPoints(o.scaledIconPoints,1.2),o}return p(e,t),e.prototype.draw=function(t){this.over||this.drag?this.drawIcon(t,this.scaledIconPoints):this.drawIcon(t,this.iconPoints)},e.prototype.getDragIconPoints=function(t,e){var i=17*e,n=14*e,r=8*e,o=4*e;t.push(h.a.instance.borrow(-o/2,i-r)),t.push(h.a.instance.borrow(-n/2,i-r)),t.push(h.a.instance.borrow(0,i)),t.push(h.a.instance.borrow(n/2,i-r)),t.push(h.a.instance.borrow(o/2,i-r)),t.push(h.a.instance.borrow(o/2,o/2)),t.push(h.a.instance.borrow(i-r,o/2)),t.push(h.a.instance.borrow(i-r,n/2)),t.push(h.a.instance.borrow(i,0)),t.push(h.a.instance.borrow(i-r,-n/2)),t.push(h.a.instance.borrow(i-r,-o/2)),t.push(h.a.instance.borrow(o/2,-o/2)),t.push(h.a.instance.borrow(o/2,-i+r)),t.push(h.a.instance.borrow(n/2,-i+r)),t.push(h.a.instance.borrow(0,-i)),t.push(h.a.instance.borrow(-n/2,-i+r)),t.push(h.a.instance.borrow(-o/2,-i+r)),t.push(h.a.instance.borrow(-o/2,-o/2)),t.push(h.a.instance.borrow(-i+r,-o/2)),t.push(h.a.instance.borrow(-i+r,-n/2)),t.push(h.a.instance.borrow(-i,0)),t.push(h.a.instance.borrow(-i+r,n/2)),t.push(h.a.instance.borrow(-i+r,o/2)),t.push(h.a.instance.borrow(-o/2,o/2))},e.prototype.drawIcon=function(t,e){t.beginPath(),t.moveTo(e[0].x+this.position.x,e[0].y+this.position.y);for(var i=0;i<e.length;i++){var n=e[i];t.lineTo(n.x+this.position.x,n.y+this.position.y)}t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.dragIconFillColor,t.fill(),t.lineWidth=this.cropperSettings.cropperDrawSettings.dragIconStrokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.dragIconStrokeColor,t.stroke()},e.prototype.recalculatePosition=function(t){var e=t.getCentre();this.setPosition(e.x,e.y),h.a.instance.returnPoint(e)},e}(a),f=function(){return function(){}}(),m=function(){function t(){}return t.setPressed=function(t){this.pressed=t},t.setReleased=function(t){this.pressed},t.setOver=function(t){this.over=t},t.setStyle=function(t,e){void 0!==this.pressed?this.pressed:this.over},t.share={},t}();i.d(e,"a",function(){return y});var g=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(e){var i=t.call(this)||this,n=e.width,r=e.height,o=e.keepAspect,s=e.touchRadius,a=e.minWidth,l=e.minHeight,u=e.croppedWidth,p=e.croppedHeight;return i.cropperSettings=e,i.crop=i,i.x=0,i.y=0,void 0===n&&(i.width=100),void 0===r&&(i.height=50),void 0===o&&(i.keepAspect=!0),void 0===s&&(i.touchRadius=20),i.minWidth=a,i.minHeight=l,i.keepAspect=!1,i.aspectRatio=0,i.currentDragTouches=[],i.isMouseDown=!1,i.ratioW=1,i.ratioH=1,i.fileType=e.fileType,i.imageSet=!1,i.pointPool=new h.a(200),i.tl=new c(0,0,s,i.cropperSettings),i.tr=new c(0+n,0,s,i.cropperSettings),i.bl=new c(0,0+r,s,i.cropperSettings),i.br=new c(0+n,0+r,s,i.cropperSettings),i.tl.addHorizontalNeighbour(i.tr),i.tl.addVerticalNeighbour(i.bl),i.tr.addHorizontalNeighbour(i.tl),i.tr.addVerticalNeighbour(i.br),i.bl.addHorizontalNeighbour(i.br),i.bl.addVerticalNeighbour(i.tl),i.br.addHorizontalNeighbour(i.bl),i.br.addVerticalNeighbour(i.tr),i.markers=[i.tl,i.tr,i.bl,i.br],i.center=new d(0+n/2,0+r/2,s,i.cropperSettings),i.keepAspect=o,i.aspectRatio=r/n,i.croppedImage=new Image,i.currentlyInteracting=!1,i.cropWidth=u,i.cropHeight=p,i}return g(e,t),e.sign=function(t){return+t===t?0===t?t:t>0?1:-1:NaN},e.getMousePos=function(t,e){var i=t.getBoundingClientRect();return h.a.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.getTouchPos=function(t,e){var i=t.getBoundingClientRect();return h.a.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.detectVerticalSquash=function(t){var e=t.height,i=document.createElement("canvas");i.width=1,i.height=e;var n=i.getContext("2d");n.drawImage(t,0,0);var r=n.getImageData(0,0,1,e);if(r){for(var o=r.data,s=0,a=e,l=e;l>s;){0===o[4*(l-1)+3]?a=l:s=l,l=a+s>>1}var c=l/e;return 0===c?1:c}return 1},e.prototype.getDataUriMimeType=function(t){var e=t.substring(0,50),i="image/png",n=RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi).exec(e);return n&&n[2]&&"image/jpg"==(i=n[2])&&(i="image/jpeg"),i},e.prototype.prepare=function(t){this.buffer=document.createElement("canvas"),this.cropCanvas=document.createElement("canvas");var e=t.parentElement?t.parentElement.clientWidth:0;e>0&&this.cropperSettings.dynamicSizing?(this.cropCanvas.width=e,this.buffer.width=e,t.width=e):(this.cropCanvas.width=this.cropWidth,this.buffer.width=t.width),this.cropCanvas.height=this.cropHeight,this.buffer.height=t.height,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.draw(this.ctx)},e.prototype.resizeCanvas=function(t,e,i){void 0===i&&(i=!1),this.canvas.width=this.cropCanvas.width=this.width=this.canvasWidth=this.buffer.width=t,this.canvas.height=this.cropCanvas.height=this.height=this.canvasHeight=this.buffer.height=e,i&&this.setImage(this.srcImage)},e.prototype.reset=function(){this.setImage(void 0)},e.prototype.draw=function(t){var e=this.getBounds();if(this.srcImage){t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var i=this.srcImage.height/this.srcImage.width,n=this.canvasHeight/this.canvasWidth,r=this.canvasWidth,o=this.canvasHeight;n>i?(r=this.canvasWidth,o=this.canvasWidth*i):(o=this.canvasHeight,r=this.canvasHeight/i),this.ratioW=r/this.srcImage.width,this.ratioH=o/this.srcImage.height,n<i?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-r/2,0,r,o):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-o/2,r,o),this.buffer.getContext("2d").drawImage(this.canvas,0,0,this.canvasWidth,this.canvasHeight),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,this.cropperSettings.rounded?(t.beginPath(),t.arc(e.left+e.width/2,e.top+e.height/2,e.width/2,0,2*Math.PI,!0),t.closePath(),t.stroke()):(t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.drawImage(this.buffer,e.left,e.top,Math.max(e.width,1),Math.max(e.height,1),e.left,e.top,e.width,e.height),t.strokeRect(e.left,e.top,e.width,e.height));for(var s=0;s<this.markers.length;s++)this.markers[s].draw(t);this.center.draw(t)}else t.fillStyle="rgba(192,192,192,1)",t.fillRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.dragCenter=function(t,e,i){var n=this.getBounds(),r=t-n.width/2,o=t+n.width/2,s=e-n.height/2,a=e+n.height/2;o>=this.maxXClamp&&(t=this.maxXClamp-n.width/2),r<=this.minXClamp&&(t=n.width/2+this.minXClamp),s<this.minYClamp&&(e=n.height/2+this.minYClamp),a>=this.maxYClamp&&(e=this.maxYClamp-n.height/2),this.tl.moveX(t-n.width/2),this.tl.moveY(e-n.height/2),this.tr.moveX(t+n.width/2),this.tr.moveY(e-n.height/2),this.bl.moveX(t-n.width/2),this.bl.moveY(e+n.height/2),this.br.moveX(t+n.width/2),this.br.moveY(e+n.height/2),i.setPosition(t,e)},e.prototype.enforceMinSize=function(t,e,i){var n=t-i.getHorizontalNeighbour().position.x,r=e-i.getVerticalNeighbour().position.y,o=this.minWidth-Math.abs(n),s=this.minHeight-Math.abs(r);return 0===n||0===r?(t=i.position.x,e=i.position.y,h.a.instance.borrow(t,e)):(this.keepAspect?o>0&&s/this.aspectRatio>0?o>s/this.aspectRatio?n<0?(t-=o,r<0?e-=o*this.aspectRatio:e+=o*this.aspectRatio):(t+=o,r<0?e-=o*this.aspectRatio:e+=o*this.aspectRatio):r<0?(e-=s,n<0?t-=s/this.aspectRatio:t+=s/this.aspectRatio):(e+=s,n<0?t-=s/this.aspectRatio:t+=s/this.aspectRatio):o>0?n<0?(t-=o,r<0?e-=o*this.aspectRatio:e+=o*this.aspectRatio):(t+=o,r<0?e-=o*this.aspectRatio:e+=o*this.aspectRatio):s>0&&(r<0?(e-=s,n<0?t-=s/this.aspectRatio:t+=s/this.aspectRatio):(e+=s,n<0?t-=s/this.aspectRatio:t+=s/this.aspectRatio)):(o>0&&(n<0?t-=o:t+=o),s>0&&(r<0?e-=s:e+=s)),(t<this.minXClamp||t>this.maxXClamp||e<this.minYClamp||e>this.maxYClamp)&&(t=i.position.x,e=i.position.y),h.a.instance.borrow(t,e))},e.prototype.dragCorner=function(t,e,i){var n,r=0,o=0,s=0,a=0,l=0,c=0,u=0,p=0,d=0;if(this.keepAspect){if(s=(n=i.getHorizontalNeighbour().getVerticalNeighbour()).position.x,a=n.position.y,t<=n.position.x){if(e<=n.position.y){if(r=s-100/this.aspectRatio,o=a-100/this.aspectRatio*this.aspectRatio,(d=this.getSide(h.a.instance.borrow(r,o),n.position,h.a.instance.borrow(t,e)))>0){c=(l=Math.abs(n.position.y-e))/this.aspectRatio,u=n.position.y-l,p=n.position.x-c;var f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}else if(d<0){l=(c=Math.abs(n.position.x-t))*this.aspectRatio,u=n.position.y-l,p=n.position.x-c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}}else if(r=s-100/this.aspectRatio,o=a+100/this.aspectRatio*this.aspectRatio,(d=this.getSide(h.a.instance.borrow(r,o),n.position,h.a.instance.borrow(t,e)))>0){l=(c=Math.abs(n.position.x-t))*this.aspectRatio,u=n.position.y+l,p=n.position.x-c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}else if(d<0){c=(l=Math.abs(n.position.y-e))/this.aspectRatio,u=n.position.y+l,p=n.position.x-c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}}else if(e<=n.position.y){if(r=s+100/this.aspectRatio,o=a-100/this.aspectRatio*this.aspectRatio,(d=this.getSide(h.a.instance.borrow(r,o),n.position,h.a.instance.borrow(t,e)))<0){c=(l=Math.abs(n.position.y-e))/this.aspectRatio,u=n.position.y-l,p=n.position.x+c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}else if(d>0){l=(c=Math.abs(n.position.x-t))*this.aspectRatio,u=n.position.y-l,p=n.position.x+c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}}else if(r=s+100/this.aspectRatio,o=a+100/this.aspectRatio*this.aspectRatio,(d=this.getSide(h.a.instance.borrow(r,o),n.position,h.a.instance.borrow(t,e)))<0){l=(c=Math.abs(n.position.x-t))*this.aspectRatio,u=n.position.y+l,p=n.position.x+c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}else if(d>0){c=(l=Math.abs(n.position.y-e))/this.aspectRatio,u=n.position.y+l,p=n.position.x+c;f=this.enforceMinSize(p,u,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}}else{f=this.enforceMinSize(t,e,i);i.move(f.x,f.y),h.a.instance.returnPoint(f)}this.center.recalculatePosition(this.getBounds())},e.prototype.getSide=function(t,i,n){var r=e.sign((i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x));return h.a.instance.returnPoint(t),h.a.instance.returnPoint(n),r},e.prototype.handleRelease=function(t){if(null!=t){for(var e=0,i=0;i<this.currentDragTouches.length;i++)t.id===this.currentDragTouches[i].id&&(this.currentDragTouches[i].dragHandle.setDrag(!1),e=i);this.currentDragTouches.splice(e,1),this.draw(this.ctx)}},e.prototype.handleMove=function(t){for(var e=!1,i=0;i<this.currentDragTouches.length;i++)if(t.id===this.currentDragTouches[i].id&&null!=this.currentDragTouches[i].dragHandle){var n=this.currentDragTouches[i],r=this.clampPosition(t.x-n.dragHandle.offset.x,t.y-n.dragHandle.offset.y);t.x=r.x,t.y=r.y,h.a.instance.returnPoint(r),n.dragHandle instanceof c?this.dragCorner(t.x,t.y,n.dragHandle):this.dragCenter(t.x,t.y,n.dragHandle),this.currentlyInteracting=!0,e=!0,m.setPressed(this.canvas);break}if(!e){for(var o=0;o<this.markers.length;o++){var s=this.markers[o];if(s.touchInBounds(t.x,t.y)){t.dragHandle=s,this.currentDragTouches.push(t),s.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCorner(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle);break}}null!==t.dragHandle&&"undefined"!=typeof t.dragHandle||this.center.touchInBounds(t.x,t.y)&&(t.dragHandle=this.center,this.currentDragTouches.push(t),t.dragHandle.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCenter(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle))}},e.prototype.updateClampBounds=function(){var t=this.srcImage.height/this.srcImage.width,e=this.canvas.height/this.canvas.width,i=this.canvas.width,n=this.canvas.height;e>t?(i=this.canvas.width,n=this.canvas.width*t):(n=this.canvas.height,i=this.canvas.height/t),this.minXClamp=this.canvas.width/2-i/2,this.minYClamp=this.canvas.height/2-n/2,this.maxXClamp=this.canvas.width/2+i/2,this.maxYClamp=this.canvas.height/2+n/2},e.prototype.getCropBounds=function(){var t=this.getBounds();return t.top=Math.round((t.top-this.minYClamp)/this.ratioH),t.bottom=Math.round((t.bottom-this.minYClamp)/this.ratioH),t.left=Math.round((t.left-this.minXClamp)/this.ratioW),t.right=Math.round((t.right-this.minXClamp)/this.ratioW),t},e.prototype.clampPosition=function(t,e){return t<this.minXClamp&&(t=this.minXClamp),t>this.maxXClamp&&(t=this.maxXClamp),e<this.minYClamp&&(e=this.minYClamp),e>this.maxYClamp&&(e=this.maxYClamp),h.a.instance.borrow(t,e)},e.prototype.isImageSet=function(){return this.imageSet},e.prototype.setImage=function(t){if(this.srcImage=t,t){this.imageSet=!0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.buffer.getContext("2d").clearRect(0,0,this.buffer.width,this.buffer.height),this.cropperSettings.fileType||(this.fileType=this.getDataUriMimeType(t.src)),this.cropperSettings.minWithRelativeToResolution&&(this.minWidth=this.canvas.width*this.cropperSettings.minWidth/this.srcImage.width,this.minHeight=this.canvas.height*this.cropperSettings.minHeight/this.srcImage.height),this.updateClampBounds(),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height;var e=this.getCropPositionFromMarkers();this.setCropPosition(e)}else this.imageSet=!1,this.draw(this.ctx)},e.prototype.updateCropPosition=function(t){var e=this.getCropPositionFromBounds(t);this.setCropPosition(e)},e.prototype.setCropPosition=function(t){this.tl.setPosition(t[0].x,t[0].y),this.tr.setPosition(t[1].x,t[1].y),this.bl.setPosition(t[2].x,t[2].y),this.br.setPosition(t[3].x,t[3].y),this.center.setPosition(t[4].x,t[4].y);for(var i=0,n=t;i<n.length;i++){var r=n[i];h.a.instance.returnPoint(r)}this.vertSquashRatio=e.detectVerticalSquash(this.srcImage),this.draw(this.ctx),this.croppedImage=this.getCroppedImageHelper(!1,this.cropWidth,this.cropHeight)},e.prototype.getCropPositionFromMarkers=function(){var t,e,i,n,r=this.canvas.width,o=this.canvas.height,s=this.srcImage.height/this.srcImage.width,a=this.getBounds(),l=a.height/a.width,c=this.canvas.width/2,u=this.canvas.height/2;if(l>s){var p=Math.min(r*s,o),d=p/l;t=h.a.instance.borrow(c-d/2,u+p/2),e=h.a.instance.borrow(c+d/2,u+p/2),i=h.a.instance.borrow(c-d/2,u-p/2),n=h.a.instance.borrow(c+d/2,u-p/2)}else{var f=Math.min(o/s,r),m=f*l;t=h.a.instance.borrow(c-f/2,u+m/2),e=h.a.instance.borrow(c+f/2,u+m/2),i=h.a.instance.borrow(c-f/2,u-m/2),n=h.a.instance.borrow(c+f/2,u-m/2)}return[t,e,i,n,h.a.instance.borrow(c,u)]},e.prototype.getCropPositionFromBounds=function(t){var e=0,i=0,n=this.canvasHeight/this.canvasWidth,r=this.srcImage.height/this.srcImage.width;n>r?e=this.buffer.height/2-this.canvasWidth*r/2:i=this.buffer.width/2-this.canvasHeight/r/2;var o=(this.canvasWidth-2*i)/this.srcImage.width,s=(this.canvasHeight-2*e)/this.srcImage.height,a=t.height*s,l=t.width*o,c=t.left*o+i,u=t.top*s+e;if(this.keepAspect){var p=a/this.aspectRatio,d=l*this.aspectRatio;this.getCropBounds().height===t.height?a=d:this.getCropBounds().width===t.width?l=p:Math.abs(d-a)<Math.abs(p-l)?l=p:a=d}return[h.a.instance.borrow(c,u+a),h.a.instance.borrow(c+l,u+a),h.a.instance.borrow(c,u),h.a.instance.borrow(c+l,u),h.a.instance.borrow(c+l/2,u+a/2)]},e.prototype.getCroppedImageHelper=function(t,e,i){return this.cropperSettings.cropOnResize?this.getCroppedImage(t,e,i):this.croppedImage?this.croppedImage:document.createElement("img")},e.prototype.getCroppedImage=function(t,e,i){var n=this.getBounds();if(this.srcImage){var r=this.srcImage.height/this.srcImage.width,o=this.canvas.height/this.canvas.width,s=this.canvas.width,a=this.canvas.height;o>r?(s=this.canvas.width,a=this.canvas.width*r):o<r?(a=this.canvas.height,s=this.canvas.height/r):(a=this.canvas.height,s=this.canvas.width),this.ratioW=s/this.srcImage.width,this.ratioH=a/this.srcImage.height;var l=(this.buffer.height-a)/2/this.ratioH,c=(this.buffer.width-s)/2/this.ratioW,u=this.cropCanvas.getContext("2d");if(this.cropperSettings.preserveSize||t){var h=Math.round(n.right/this.ratioW-n.left/this.ratioW),p=Math.round(n.bottom/this.ratioH-n.top/this.ratioH);this.cropCanvas.width=h,this.cropCanvas.height=p,this.cropperSettings.croppedWidth=this.cropCanvas.width,this.cropperSettings.croppedHeight=this.cropCanvas.height}else this.cropCanvas.width=this.cropWidth,this.cropCanvas.height=this.cropHeight;return u.clearRect(0,0,this.cropCanvas.width,this.cropCanvas.height),this.drawImageIOSFix(u,this.srcImage,Math.max(Math.round(n.left/this.ratioW-c),0),Math.max(Math.round(n.top/this.ratioH-l),0),Math.max(Math.round(n.width/this.ratioW),1),Math.max(Math.round(n.height/this.ratioH),1),0,0,this.cropCanvas.width,this.cropCanvas.height),this.cropperSettings.resampleFn&&this.cropperSettings.resampleFn(this.cropCanvas),this.croppedImage.width=this.cropCanvas.width,this.croppedImage.height=this.cropCanvas.height,this.croppedImage.src=this.cropCanvas.toDataURL(this.fileType,this.cropperSettings.compressRatio),this.croppedImage}return document.createElement("img")},e.prototype.getBounds=function(){for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=-Number.MAX_VALUE,o=0;o<this.markers.length;o++){var s=this.markers[o];s.position.x<t&&(t=s.position.x),s.position.x>i&&(i=s.position.x),s.position.y<e&&(e=s.position.y),s.position.y>n&&(n=s.position.y)}var a=new r.a;return a.left=t,a.right=i,a.top=e,a.bottom=n,a},e.prototype.setBounds=function(t){for(var e=this.getBounds(),i=0;i<this.markers.length;i++){var n=this.markers[i];n.position.x===e.left?n.position.y===e.top?n.setPosition(t.left,t.top):n.setPosition(t.left,t.bottom):n.position.y===e.top?n.setPosition(t.right,t.top):n.setPosition(t.right,t.bottom)}this.center.recalculatePosition(t),this.center.draw(this.ctx),this.draw(this.ctx)},e.prototype.onTouchMove=function(t){if(this.crop.isImageSet()){if(t.preventDefault(),1===t.touches.length)for(var i=0;i<t.touches.length;i++){var n=t.touches[i],r=e.getTouchPos(this.canvas,n),o=new u(r.x,r.y,n.identifier);h.a.instance.returnPoint(r),this.move(o)}else if(2===t.touches.length){var s=(t.touches[0].clientX-t.touches[1].clientX)*(t.touches[0].clientX-t.touches[1].clientX)+(t.touches[0].clientY-t.touches[1].clientY)*(t.touches[0].clientY-t.touches[1].clientY);if(this.previousDistance&&this.previousDistance!==s){var a=this.getBounds();s<this.previousDistance&&(a.top+=1,a.left+=1,a.right-=1,a.bottom-=1),s>this.previousDistance&&(a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.top-=1,a.left-=1,a.right+=1,a.bottom+=1):a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.top-=1,a.right+=2,a.bottom+=1):a.top!==this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp?(a.top-=1,a.left-=2,a.bottom+=1):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.left-=1,a.right+=1,a.bottom+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left!==this.minXClamp&&a.right!==this.maxXClamp?(a.top-=2,a.left-=1,a.right+=1):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.right+=2,a.bottom+=2):a.top===this.minYClamp&&a.bottom!==this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp?(a.left-=2,a.bottom+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left===this.minXClamp&&a.right!==this.maxXClamp?(a.top-=2,a.right+=2):a.top!==this.minYClamp&&a.bottom===this.maxYClamp&&a.left!==this.minXClamp&&a.right===this.maxXClamp&&(a.top-=2,a.left-=2)),a.top<this.minYClamp&&(a.top=this.minYClamp),a.bottom>this.maxYClamp&&(a.bottom=this.maxYClamp),a.left<this.minXClamp&&(a.left=this.minXClamp),a.right>this.maxXClamp&&(a.right=this.maxXClamp),this.setBounds(a)}this.previousDistance=s}this.draw(this.ctx)}},e.prototype.onMouseMove=function(t){if(this.crop.isImageSet()&&this.isMouseDown){var i=e.getMousePos(this.canvas,t);this.move(new u(i.x,i.y,0));var n=this.getDragTouchForID(0);n?(n.x=i.x,n.y=i.y):n=new u(i.x,i.y,0),h.a.instance.returnPoint(i),this.drawCursors(n),this.draw(this.ctx)}},e.prototype.move=function(t){this.isMouseDown&&this.handleMove(t)},e.prototype.getDragTouchForID=function(t){for(var e=0;e<this.currentDragTouches.length;e++)if(t===this.currentDragTouches[e].id)return this.currentDragTouches[e]},e.prototype.drawCursors=function(t){var e=!1;null!=t&&(t.dragHandle===this.center&&(m.setStyle(this.canvas,"move"),e=!0),null!==t.dragHandle&&t.dragHandle instanceof c&&(this.drawCornerCursor(t.dragHandle,t.dragHandle.position.x,t.dragHandle.position.y),e=!0));var i=!1;if(!e){for(var n=0;n<this.markers.length;n++)i=i||this.drawCornerCursor(this.markers[n],t.x,t.y);i||m.setStyle(this.canvas,"initial")}i||e||!this.center.touchInBounds(t.x,t.y)?this.center.setOver(!1):(this.center.setOver(!0),m.setOver(this.canvas),m.setStyle(this.canvas,"move"))},e.prototype.drawCornerCursor=function(t,e,i){return t.touchInBounds(e,i)?(t.setOver(!0),t.getHorizontalNeighbour().position.x>t.position.x?t.getVerticalNeighbour().position.y>t.position.y?(m.setOver(this.canvas),m.setStyle(this.canvas,"nwse-resize")):(m.setOver(this.canvas),m.setStyle(this.canvas,"nesw-resize")):t.getVerticalNeighbour().position.y>t.position.y?(m.setOver(this.canvas),m.setStyle(this.canvas,"nesw-resize")):(m.setOver(this.canvas),m.setStyle(this.canvas,"nwse-resize")),!0):(t.setOver(!1),!1)},e.prototype.onTouchStart=function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)},e.prototype.onTouchEnd=function(t){if(this.crop.isImageSet()){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.getDragTouchForID(i.identifier);n&&void 0!==n&&((n.dragHandle instanceof c||n.dragHandle instanceof d)&&n.dragHandle.setOver(!1),this.handleRelease(n))}0===this.currentDragTouches.length&&(this.isMouseDown=!1,this.currentlyInteracting=!1)}},e.prototype.drawImageIOSFix=function(t,e,i,n,r,o,s,a,l,c){t.drawImage(e,i,n,r,o,s,a,l,c)},e.prototype.onMouseDown=function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)},e.prototype.onMouseUp=function(t){this.crop.isImageSet()&&(m.setReleased(this.canvas),this.isMouseDown=!1,this.handleRelease(new u(0,0,0)))},e}(f)},k1En:function(t,e,i){"use strict";i.d(e,"a",function(){return y}),i.d(e,"b",function(){return x});var n=i("LMZF"),r=i("LT5m"),o=i("l6RC"),s=i("Un6q"),a=i("V8+5"),l=i("4jwp"),c=i("OFGE"),u=i("3Czw"),h=i("8Xfy"),p=i("CZgk"),d=i("j5BN"),f=(n._13(r.d,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[y,x]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(4608,a.a,a.a,[]),n._25(5120,l.d,l.b,[[3,l.d],n.F,a.a]),n._25(5120,l.g,l.f,[[3,l.g],a.a,n.F]),n._25(4608,c.i,c.i,[l.d,l.g,n.F,s.c]),n._25(5120,c.e,c.k,[[3,c.e],s.c]),n._25(4608,c.h,c.h,[l.g,s.c]),n._25(5120,c.f,c.n,[[3,c.f],s.c]),n._25(4608,c.c,c.c,[c.i,c.e,n.k,c.h,c.f,n.e,n.x,n.F,s.c]),n._25(5120,c.l,c.m,[c.c]),n._25(4608,s.k,s.j,[n.B,[2,s.r]]),n._25(4608,u.d,u.d,[a.a]),n._25(135680,u.a,u.a,[u.d,n.F]),n._25(5120,h.n,h.m,[[3,h.n],[2,h.k],s.c]),n._25(4608,r.b,r.b,[c.c,h.n,n.x,u.a,[3,r.b]]),n._25(512,o.a,o.a,[]),n._25(512,p.g,p.g,[]),n._25(512,a.b,a.b,[]),n._25(512,l.c,l.c,[]),n._25(512,c.g,c.g,[]),n._25(512,s.b,s.b,[]),n._25(256,d.f,!0,[]),n._25(512,d.n,d.n,[[2,d.f]]),n._25(512,u.c,u.c,[]),n._25(512,r.d,r.d,[])])}),n._14({encapsulation:2,styles:[".mat-snack-bar-container{border-radius:2px;box-sizing:border-box;display:block;margin:24px;max-width:568px;min-width:288px;padding:14px 24px;transform:translateY(100%) translateY(24px)}.mat-snack-bar-container.mat-snack-bar-center{margin:0;transform:translateY(100%)}.mat-snack-bar-container.mat-snack-bar-top{transform:translateY(-100%) translateY(-24px)}.mat-snack-bar-container.mat-snack-bar-top.mat-snack-bar-center{transform:translateY(-100%)}@media screen and (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:0;max-width:inherit;width:100%}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"visible-top, visible-bottom",styles:{type:6,styles:{transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"visible-top => hidden-top, visible-bottom => hidden-bottom",animation:{type:4,styles:null,timings:"195ms cubic-bezier(0.4,0.0,1,1)"},options:null},{type:1,expr:"void => visible-top, void => visible-bottom",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.0,0.0,0.2,1)"},options:null}],options:{}}]}}));function m(t){return n._39(0,[(t()(),n._11(0,null,null,0))],null,null)}function g(t){return n._39(2,[n._35(402653184,1,{_portalOutlet:0}),(t()(),n._11(16777216,null,null,1,null,m)),n._15(2,212992,[[1,4]],0,p.c,[n.k,n.Z],{portal:[0,"portal"]},null)],function(t,e){t(e,2,0,"")},null)}var y=n._12("snack-bar-container",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"snack-bar-container",[["class","mat-snack-bar-container"],["role","alert"]],[[40,"@state",0]],[["component","@state.done"]],function(t,e,i){var r=!0;return"component:@state.done"===e&&(r=!1!==n._28(t,1).onAnimationEnd(i)&&r),r},g,f)),n._15(1,180224,null,0,r.c,[n.F,n.o,n.h],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._animationState)})},{},{},[]),_=n._14({encapsulation:2,styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;line-height:20px;opacity:1}.mat-simple-snackbar-action{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;background:0 0;flex-shrink:0;margin-left:48px}[dir=rtl] .mat-simple-snackbar-action{margin-right:48px;margin-left:0}"],data:{animation:[{type:7,name:"contentFade",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:"0"},offset:null},{type:4,styles:null,timings:"375ms cubic-bezier(0.4,0.0,0.2,1)"}],options:null}],options:{}}]}});function v(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"button",[["class","mat-simple-snackbar-action"]],null,[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r.action()&&n);return n},null,null)),(t()(),n._37(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.data.action)})}function b(t){return n._39(2,[(t()(),n._37(0,null,[""," "])),(t()(),n._11(16777216,null,null,1,null,v)),n._15(2,16384,null,0,s.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,e.component.hasAction)},function(t,e){t(e,0,0,e.component.data.message)})}var x=n._12("simple-snack-bar",r.f,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"simple-snack-bar",[["class","mat-simple-snackbar"]],[[40,"@contentFade",0]],null,null,b,_)),n._15(1,49152,null,0,r.f,[r.e,r.a],null,null)],null,function(t,e){t(e,0,0,void 0)})},{},{},[])},kH4A:function(t,e,i){"use strict";var n=i("AP4T"),r=i("8ofh"),o=i("B1iP"),s=i("NePw"),a=i("qLnt"),l=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=Object.prototype.toString;var u=function(t){function e(e,i,n,r){t.call(this),this.sourceObj=e,this.eventName=i,this.selector=n,this.options=r}return l(e,t),e.create=function(t,i,n,r){return Object(o.a)(n)&&(r=n,n=void 0),new e(t,i,r,n)},e.setupSubscription=function(t,i,n,r,o){var s;if(function(t){return!!t&&"[object NodeList]"===c.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===c.call(t)}(t))for(var l=0,u=t.length;l<u;l++)e.setupSubscription(t[l],i,n,r,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var h=t;t.addEventListener(i,n,o),s=function(){return h.removeEventListener(i,n)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var p=t;t.on(i,n),s=function(){return p.off(i,n)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var d=t;t.addListener(i,n),s=function(){return d.removeListener(i,n)}}r.add(new a.a(s))},e.prototype._subscribe=function(t){var i=this.sourceObj,n=this.eventName,o=this.options,a=this.selector,l=a?function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var n=Object(r.a)(a).apply(void 0,e);n===s.a?t.error(s.a.e):t.next(n)}:function(e){return t.next(e)};e.setupSubscription(i,n,l,t,o)},e}(n.a);i.d(e,"a",function(){return h});var h=u.create},kQVV:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(t){return t&&"number"==typeof t.length}},ka8K:function(t,e,i){"use strict";i.d(e,"d",function(){return l}),i.d(e,"c",function(){return c}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s});var n=i("TO51"),r=i("LMZF"),o=function(){return function(){}}(),s=function(){function t(t,e,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var r=this;this._multiple=t,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.onChange=this._emitChanges?new n.a:null,e&&e.length&&(t?e.forEach(function(t){return r._markSelected(t)}):this._markSelected(e[0]),this._selectedToEmit.length=0)}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected},enumerable:!0,configurable:!0}),t.prototype.select=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._verifyValueAssignment(e),e.forEach(function(e){return t._markSelected(e)}),this._emitChangeEvent()},t.prototype.deselect=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._verifyValueAssignment(e),e.forEach(function(e){return t._unmarkSelected(e)}),this._emitChangeEvent()},t.prototype.toggle=function(t){this.isSelected(t)?this.deselect(t):this.select(t)},t.prototype.clear=function(){this._unmarkAll(),this._emitChangeEvent()},t.prototype.isSelected=function(t){return this._selection.has(t)},t.prototype.isEmpty=function(){return 0===this._selection.size},t.prototype.hasValue=function(){return!this.isEmpty()},t.prototype.sort=function(t){this._multiple&&this._selected&&this._selected.sort(t)},t.prototype._emitChangeEvent=function(){if(this._selected=null,this._selectedToEmit.length||this._deselectedToEmit.length){var t=new a(this,this._selectedToEmit,this._deselectedToEmit);this.onChange&&this.onChange.next(t),this._deselectedToEmit=[],this._selectedToEmit=[]}},t.prototype._markSelected=function(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))},t.prototype._unmarkSelected=function(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))},t.prototype._unmarkAll=function(){var t=this;this.isEmpty()||this._selection.forEach(function(e){return t._unmarkSelected(e)})},t.prototype._verifyValueAssignment=function(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")},t}(),a=function(){return function(t,e,i){this.source=t,this.added=e,this.removed=i}}();var l=function(){function t(){this._listeners=[]}return t.prototype.notify=function(t,e){for(var i=0,n=this._listeners;i<n.length;i++){(0,n[i])(t,e)}},t.prototype.listen=function(t){var e=this;return this._listeners.push(t),function(){e._listeners=e._listeners.filter(function(e){return t!==e})}},t.prototype.ngOnDestroy=function(){this._listeners=[]},t.decorators=[{type:r.v}],t.ctorParameters=function(){return[]},t}();var c={provide:l,deps:[[new r.G,new r.T,l]],useFactory:function(t){return t||new l}}},kkjc:function(t,e,i){"use strict";var n=function(){function t(t,e,i){void 0===e&&(e="/assets/i18n/"),void 0===i&&(i=".json"),this.http=t,this.prefix=e,this.suffix=i}return t.prototype.getTranslation=function(t){return this.http.get(""+this.prefix+t+this.suffix)},t}();i.d(e,"a",function(){return n})},l6RC:function(t,e,i){"use strict";i.d(e,"c",function(){return s}),i.d(e,"b",function(){return o}),i.d(e,"a",function(){return l});var n=i("LMZF"),r=i("Un6q"),o=new n.w("cdk-dir-doc"),s=function(){function t(t){if(this.value="ltr",this.change=new n.r,t){var e=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.value=e||i||"ltr"}}return t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.G},{type:n.u,args:[o]}]}]},t}(),a=function(){function t(){this._dir="ltr",this._isInitialized=!1,this.change=new n.r}return Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},set:function(t){var e=this._dir;this._dir=t,e!==this._dir&&this._isInitialized&&this.change.emit(this._dir)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.dir},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._isInitialized=!0},t.prototype.ngOnDestroy=function(){this.change.complete()},t.decorators=[{type:n.n,args:[{selector:"[dir]",providers:[{provide:s,useExisting:t}],host:{"[dir]":"dir"},exportAs:"dir"}]}],t.ctorParameters=function(){return[]},t.propDecorators={change:[{type:n.H,args:["dirChange"]}],dir:[{type:n.y}]},t}(),l=function(){function t(){}return t.decorators=[{type:n.C,args:[{exports:[a],declarations:[a],providers:[{provide:o,useExisting:r.c},s]}]}],t.ctorParameters=function(){return[]},t}()},lDCR:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},lI6h:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("E9/g"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n.a)},mHG6:function(t,e,i){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},mTPF:function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(n(s))+i;return r(t[s])?o(t[s],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[s]))}).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},mz3w:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(t){var e,i=t.Symbol;return"function"==typeof i?i.observable?e=i.observable:(e=i("observable"),i.observable=e):e="@@observable",e}(i("xIGM").a)},n0xB:function(t,e,i){"use strict";var n=i("XecN"),r=i("8ofh"),o=i("NePw"),s=i("lI6h"),a=i("qgI0"),l=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,i){t.call(this,e),this.durationSelector=i,this.hasValue=!1}return l(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(r.a)(this.durationSelector)(t);if(e===o.a)this.destination.error(o.a.e);else{var i=Object(a.a)(this,e);i.closed?this.clearThrottle():this.add(this.throttled=i)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,i=this.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,i,n){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(s.a),h=i("1j/l");var p=i("AP4T"),d=i("3iOE"),f=i("MZnR"),m=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},g=function(t){function e(e,i,r){var o;void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,o=i,!Object(h.a)(o)&&o-parseFloat(o)+1>=0?this.period=Number(i)<1?1:Number(i):Object(d.a)(i)&&(r=i),Object(d.a)(r)||(r=n.a),this.scheduler=r,this.dueTime=Object(f.a)(e)?+e-this.scheduler.now():e}return m(e,t),e.create=function(t,i,n){return void 0===t&&(t=0),new e(t,i,n)},e.dispatch=function(t){var e=t.index,i=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===i)return n.complete();t.index=e+1,this.schedule(t,i)}},e.prototype._subscribe=function(t){var i=this.period,n=this.dueTime;return this.scheduler.schedule(e.dispatch,n,{index:0,period:i,subscriber:t})},e}(p.a).create;e.a=function(t,e){void 0===e&&(e=n.a);return i=function(){return g(t,e)},function(t){return t.lift(new c(i))};var i}},nbhv:function(t,e,i){"use strict";var n=i("AP4T"),r=i("kH4A");n.a.fromEvent=r.a},nfFB:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("agPy"),r=function(){function t(e){t._instance=this;for(var i=this.firstAvailable=new n.a,r=1;r<e;r++){var o=new n.a;i.next=o,i=o}}return Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.borrow=function(t,e){if(null==this.firstAvailable)throw"Pool exhausted";this.borrowed++;var i=this.firstAvailable;return this.firstAvailable=i.next,i.x=t,i.y=e,i},t.prototype.returnPoint=function(t){this.borrowed--,t.x=0,t.y=0,t.next=this.firstAvailable,this.firstAvailable=t},t}()},nihM:function(t,e,i){"use strict";e.a=function(t,e,i){return function(n){return n.lift(new o(t,e,i))}};var n=i("E9/g"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var o=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,i,r,o){t.call(this,e);var s=new n.a(i,r,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(n.a)},oXAn:function(t,e,i){"use strict";i.d(e,"e",function(){return x}),i.d(e,"c",function(){return b}),i.d(e,"d",function(){return f}),i.d(e,"a",function(){return m}),i.d(e,"b",function(){return d});var n=i("LMZF"),r=i("6Xbx"),o=i("XEj9"),s=i("c4k3"),a=i("2kLc"),l=i("j5BN"),c=i("TO51"),u=i("fAeS"),h=i("Un6q");var p=function(){return function(){}}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortables=new Map,e._stateChanges=new c.a,e.start="asc",e._direction="",e.sortChange=new n.r,e}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){if(Object(n._6)()&&t&&"asc"!==t&&"desc"!==t)throw function(t){return Error(t+" is not a valid sort direction ('asc' or 'desc').")}(t);this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableClear",{get:function(){return this._disableClear},set:function(t){this._disableClear=Object(o.c)(t)},enumerable:!0,configurable:!0}),e.prototype.register=function(t){if(!t.id)throw Error("MatSortHeader must be provided with a unique id.");if(this.sortables.has(t.id))throw e=t.id,Error("Cannot have two MatSortables with the same id ("+e+").");var e;this.sortables.set(t.id,t)},e.prototype.deregister=function(t){this.sortables.delete(t.id)},e.prototype.sort=function(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})},e.prototype.getNextSortDirection=function(t){if(!t)return"";var e=null!=t.disableClear?t.disableClear:this.disableClear,i=function(t,e){var i=["asc","desc"];"desc"==t&&i.reverse();e||i.push("");return i}(t.start||this.start,e),n=i.indexOf(this.direction)+1;return n>=i.length&&(n=0),i[n]},e.prototype.ngOnChanges=function(){this._stateChanges.next()},e.prototype.ngOnDestroy=function(){this._stateChanges.complete()},e.decorators=[{type:n.n,args:[{selector:"[matSort]",exportAs:"matSort",inputs:["disabled: matSortDisabled"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={active:[{type:n.y,args:["matSortActive"]}],start:[{type:n.y,args:["matSortStart"]}],direction:[{type:n.y,args:["matSortDirection"]}],disableClear:[{type:n.y,args:["matSortDisableClear"]}],sortChange:[{type:n.H,args:["matSortChange"]}]},e}(Object(l.E)(p));var f=function(){function t(){this.changes=new c.a,this.sortButtonLabel=function(t){return"Change sorting for "+t},this.sortDescriptionLabel=function(t,e){return"Sorted by "+t+" "+("asc"==e?"ascending":"descending")}}return t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}();function m(t){return t||new f}var g={provide:f,deps:[[new n.G,new n.T,f]],useFactory:m},y=l.b.ENTERING+" "+l.a.STANDARD_CURVE,_={indicator:Object(u.m)("indicator",[Object(u.j)("active-asc, asc",Object(u.k)({transform:"translateY(0px)"})),Object(u.j)("active-desc, desc",Object(u.k)({transform:"translateY(10px)"})),Object(u.l)("active-asc <=> active-desc",Object(u.e)(y))]),leftPointer:Object(u.m)("leftPointer",[Object(u.j)("active-asc, asc",Object(u.k)({transform:"rotate(-45deg)"})),Object(u.j)("active-desc, desc",Object(u.k)({transform:"rotate(45deg)"})),Object(u.l)("active-asc <=> active-desc",Object(u.e)(y))]),rightPointer:Object(u.m)("rightPointer",[Object(u.j)("active-asc, asc",Object(u.k)({transform:"rotate(45deg)"})),Object(u.j)("active-desc, desc",Object(u.k)({transform:"rotate(-45deg)"})),Object(u.l)("active-asc <=> active-desc",Object(u.e)(y))]),arrowOpacity:Object(u.m)("arrowOpacity",[Object(u.j)("desc-to-active, asc-to-active, active",Object(u.k)({opacity:1})),Object(u.j)("desc-to-hint, asc-to-hint, hint",Object(u.k)({opacity:.54})),Object(u.j)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc",Object(u.k)({opacity:0})),Object(u.l)("* => asc, * => desc, * => active, * => hint",Object(u.e)("0ms")),Object(u.l)("* <=> *",Object(u.e)(y))]),arrowPosition:Object(u.m)("arrowPosition",[Object(u.l)("* => desc-to-hint, * => desc-to-active",Object(u.e)(y,Object(u.g)([Object(u.k)({transform:"translateY(-25%)"}),Object(u.k)({transform:"translateY(0)"})]))),Object(u.l)("* => hint-to-desc, * => active-to-desc",Object(u.e)(y,Object(u.g)([Object(u.k)({transform:"translateY(0)"}),Object(u.k)({transform:"translateY(25%)"})]))),Object(u.l)("* => asc-to-hint, * => asc-to-active",Object(u.e)(y,Object(u.g)([Object(u.k)({transform:"translateY(25%)"}),Object(u.k)({transform:"translateY(0)"})]))),Object(u.l)("* => hint-to-asc, * => active-to-asc",Object(u.e)(y,Object(u.g)([Object(u.k)({transform:"translateY(0)"}),Object(u.k)({transform:"translateY(-25%)"})]))),Object(u.j)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Object(u.k)({transform:"translateY(0)"})),Object(u.j)("hint-to-desc, active-to-desc, desc",Object(u.k)({transform:"translateY(-25%)"})),Object(u.j)("hint-to-asc, active-to-asc, asc",Object(u.k)({transform:"translateY(25%)"}))]),allowChildren:Object(u.m)("allowChildren",[Object(u.l)("* <=> *",[Object(u.h)("@*",Object(u.f)(),{optional:!0})])])},v=function(){return function(){}}(),b=function(t){function e(e,i,n,r){var o=t.call(this)||this;if(o._intl=e,o._sort=n,o._cdkColumnDef=r,o._showIndicatorHint=!1,o._arrowDirection="",o._disableViewStateAnimation=!1,o.arrowPosition="after",!n)throw Error("MatSortHeader must be placed within a parent element with the MatSort directive.");return o._rerenderSubscription=Object(a.a)(n.sortChange,n._stateChanges,e.changes).subscribe(function(){o._isSorted()&&o._updateArrowDirection(),!o._isSorted()&&o._viewState&&"active"===o._viewState.toState&&(o._disableViewStateAnimation=!1,o._setAnimationTransitionState({fromState:"active",toState:o._arrowDirection})),i.markForCheck()}),o}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"disableClear",{get:function(){return this._disableClear},set:function(t){this._disableClear=Object(o.c)(t)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){!this.id&&this._cdkColumnDef&&(this.id=this._cdkColumnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this)},e.prototype.ngOnDestroy=function(){this._sort.deregister(this),this._rerenderSubscription.unsubscribe()},e.prototype._setIndicatorHintVisible=function(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))},e.prototype._setAnimationTransitionState=function(t){this._viewState=t,this._disableViewStateAnimation&&(this._viewState={toState:t.toState})},e.prototype._handleClick=function(){if(!this._isDisabled()){this._sort.sort(this),"hint"!==this._viewState.toState&&"active"!==this._viewState.toState||(this._disableViewStateAnimation=!0);var t=this._isSorted()?{fromState:this._arrowDirection,toState:"active"}:{fromState:"active",toState:this._arrowDirection};this._setAnimationTransitionState(t),this._showIndicatorHint=!1}},e.prototype._isSorted=function(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)},e.prototype._getArrowDirectionState=function(){return(this._isSorted()?"active-":"")+this._arrowDirection},e.prototype._getArrowViewState=function(){var t=this._viewState.fromState;return(t?t+"-to-":"")+this._viewState.toState},e.prototype._updateArrowDirection=function(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start},e.prototype._isDisabled=function(){return this._sort.disabled||this.disabled},e.decorators=[{type:n.j,args:[{selector:"[mat-sort-header]",exportAs:"matSortHeader",template:'<div class="mat-sort-header-container" [class.mat-sort-header-sorted]="_isSorted()" [class.mat-sort-header-position-before]="arrowPosition == \'before\'"><button class="mat-sort-header-button" type="button" [attr.disabled]="_isDisabled() || null" [attr.aria-label]="_intl.sortButtonLabel(id)" (focus)="_setIndicatorHintVisible(true)" (blur)="_setIndicatorHintVisible(false)"><ng-content></ng-content></button><div class="mat-sort-header-arrow" [@arrowOpacity]="_getArrowViewState()" [@arrowPosition]="_getArrowViewState()" [@allowChildren]="_getArrowDirectionState()" (@arrowPosition.start)="_disableViewStateAnimation = true" (@arrowPosition.done)="_disableViewStateAnimation = false"><div class="mat-sort-header-stem"></div><div class="mat-sort-header-indicator" [@indicator]="_getArrowDirectionState()"><div class="mat-sort-header-pointer-left" [@leftPointer]="_getArrowDirectionState()"></div><div class="mat-sort-header-pointer-right" [@rightPointer]="_getArrowDirectionState()"></div><div class="mat-sort-header-pointer-middle"></div></div></div></div><span class="cdk-visually-hidden" *ngIf="_isSorted()">&nbsp;{{_intl.sortDescriptionLabel(id, _sort.direction)}}</span>',styles:[".mat-sort-header-container{display:flex;cursor:pointer}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-button{border:none;background:0 0;display:flex;align-items:center;padding:0;cursor:inherit;outline:0;font:inherit;color:currentColor}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;margin:0 0 0 6px;position:relative;display:flex}.mat-sort-header-position-before .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],host:{"(click)":"_handleClick()","(mouseenter)":"_setIndicatorHintVisible(true)","(longpress)":"_setIndicatorHintVisible(true)","(mouseleave)":"_setIndicatorHintVisible(false)","[class.mat-sort-header-disabled]":"_isDisabled()"},encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush,inputs:["disabled"],animations:[_.indicator,_.leftPointer,_.rightPointer,_.arrowOpacity,_.arrowPosition,_.allowChildren]}]}],e.ctorParameters=function(){return[{type:f},{type:n.h},{type:d,decorators:[{type:n.G}]},{type:s.f,decorators:[{type:n.G}]}]},e.propDecorators={id:[{type:n.y,args:["mat-sort-header"]}],arrowPosition:[{type:n.y}],start:[{type:n.y}],disableClear:[{type:n.y}]},e}(Object(l.E)(v)),x=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[h.b],exports:[d,b],declarations:[d,b],providers:[g]}]}],t.ctorParameters=function(){return[]},t}()},pPow:function(t,e,i){"use strict";!function(t){t[t.DISABLE=0]="DISABLE",t[t.ENABLE=1]="ENABLE",t[t.LOGGING=2]="LOGGING"}(e.OperationMode||(e.OperationMode={}));e.OperationMode;!function(t){t[t.ALLOW_NULL=1]="ALLOW_NULL",t[t.ALLOW_OBJECT_NULL=2]="ALLOW_OBJECT_NULL",t[t.DISALLOW_NULL=3]="DISALLOW_NULL"}(e.ValueCheckingMode||(e.ValueCheckingMode={}));e.ValueCheckingMode},pXwq:function(t,e,i){"use strict";e.a=function(t){return function(e){return 0===t?new o.a:e.lift(new a(t))}};var n=i("E9/g"),r=i("2kvl"),o=i("Ecq+"),s=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var a=function(){function t(t){if(this.total=t,this.total<0)throw new r.a}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.total))},t}(),l=function(t){function e(e,i){t.call(this,e),this.total=i,this.count=0}return s(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(n.a)},ppgG:function(t,e,i){"use strict";i.d(e,"b",function(){return a}),i.d(e,"a",function(){return l}),i.d(e,"c",function(){return c});var n=i("LMZF"),r=i("XEj9"),o=i("TO51"),s=i("Rx5t"),a=function(){function t(){}return t.prototype.create=function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[]},t}(),l=function(){function t(t,e,i){this._mutationObserverFactory=t,this._elementRef=e,this._ngZone=i,this._disabled=!1,this.event=new n.r,this._debouncer=new o.a}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Object(r.c)(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this.debounce>0?this._ngZone.runOutsideAngular(function(){t._debouncer.pipe(Object(s.a)(t.debounce)).subscribe(function(e){return t.event.emit(e)})}):this._debouncer.subscribe(function(e){return t.event.emit(e)}),this._observer=this._ngZone.runOutsideAngular(function(){return t._mutationObserverFactory.create(function(e){t._debouncer.next(e)})}),this.disabled||this._enable()},t.prototype.ngOnChanges=function(t){t.disabled&&(t.disabled.currentValue?this._disable():this._enable())},t.prototype.ngOnDestroy=function(){this._disable(),this._debouncer.complete()},t.prototype._disable=function(){this._observer&&this._observer.disconnect()},t.prototype._enable=function(){this._observer&&this._observer.observe(this._elementRef.nativeElement,{characterData:!0,childList:!0,subtree:!0})},t.decorators=[{type:n.n,args:[{selector:"[cdkObserveContent]",exportAs:"cdkObserveContent"}]}],t.ctorParameters=function(){return[{type:a},{type:n.o},{type:n.F}]},t.propDecorators={event:[{type:n.H,args:["cdkObserveContent"]}],disabled:[{type:n.y,args:["cdkObserveContentDisabled"]}],debounce:[{type:n.y}]},t}(),c=function(){function t(){}return t.decorators=[{type:n.C,args:[{exports:[l],declarations:[l],providers:[a]}]}],t.ctorParameters=function(){return[]},t}()},pvRN:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),e.b=c;var n=i("LMZF"),r=i("Ioj9"),o=i("l6RC"),s=i("Un6q"),a=i("j5BN"),l=(n._13(r.d,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(512,o.a,o.a,[]),n._25(256,a.f,!0,[]),n._25(512,a.n,a.n,[[2,a.f]]),n._25(512,r.d,r.d,[])])}),n._14({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:24px;border-radius:2px}.mat-card:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-card .mat-divider{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider{left:auto;right:0}.mat-card .mat-divider.mat-divider-inset{position:static;margin:0}@media screen and (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-flat{box-shadow:none}.mat-card-actions,.mat-card-content,.mat-card-subtitle,.mat-card-title{display:block;margin-bottom:16px}.mat-card-actions{margin-left:-16px;margin-right:-16px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 48px);margin:0 -24px 16px -24px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-footer{display:block;margin:0 -24px -24px -24px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button{margin:0 4px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header-text{margin:0 8px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0}.mat-card-lg-image,.mat-card-md-image,.mat-card-sm-image{margin:-8px 0}.mat-card-title-group{display:flex;justify-content:space-between;margin:0 -8px}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}@media (max-width:599px){.mat-card{padding:24px 16px}.mat-card-actions{margin-left:-8px;margin-right:-8px}.mat-card-image{width:calc(100% + 32px);margin:16px -16px}.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}.mat-card-header{margin:-8px 0 0 0}.mat-card-footer{margin-left:-16px;margin-right:-16px}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-24px}.mat-card>.mat-card-actions:last-child{margin-bottom:-16px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}}));function c(t){return n._39(2,[n._27(null,0),n._27(null,1)],null,null)}n._12("mat-card",r.a,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-card",[["class","mat-card"]],null,null,null,c,l)),n._15(1,49152,null,0,r.a,[],null,null)],null,null)},{},{},["*","mat-card-footer"]);var u=n._14({encapsulation:2,styles:[],data:{}});function h(t){return n._39(2,[n._27(null,0),(t()(),n._16(1,0,null,null,1,"div",[["class","mat-card-header-text"]],null,null,null,null,null)),n._27(null,1),n._27(null,2)],null,null)}n._12("mat-card-header",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-card-header",[["class","mat-card-header"]],null,null,null,h,u)),n._15(1,49152,null,0,r.c,[],null,null)],null,null)},{},{},["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"]);var p=n._14({encapsulation:2,styles:[],data:{}});function d(t){return n._39(2,[(t()(),n._16(0,0,null,null,1,"div",[],null,null,null,null,null)),n._27(null,0),n._27(null,1),n._27(null,2)],null,null)}n._12("mat-card-title-group",r.e,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-card-title-group",[["class","mat-card-title-group"]],null,null,null,d,p)),n._15(1,49152,null,0,r.e,[],null,null)],null,null)},{},{},["mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","img","*"])},q6td:function(t,e,i){"use strict";(function(t){i.d(e,"m",function(){return ee}),i.d(e,"g",function(){return ge}),i.d(e,"f",function(){return m}),i.d(e,"l",function(){return oe}),i.d(e,"k",function(){return se}),i.d(e,"j",function(){return ae}),i.d(e,"b",function(){return Wt}),i.d(e,"a",function(){return Ht}),i.d(e,"h",function(){return $t}),i.d(e,"d",function(){return te}),i.d(e,"c",function(){return Yt}),i.d(e,"e",function(){return qt}),i.d(e,"i",function(){return de});var n,r=i("LMZF"),o=i("GZB0"),s=i("AP4T"),a=i("eIqN"),l=i("qqDE"),c=i("8Gud"),u=i("5jKg"),h=i("dSLC"),p=i("pXwq"),d=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},m=function(){return function(){}}(),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.getTranslation=function(t){return Object(o.a)({})},e}(m);g=f([Object(r.v)()],g);var y={isScheduler:function(t){return t&&"function"==typeof t.schedule}},_="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function v(t,e){return t(e={exports:{}},e.exports),e.exports}var b="undefined"!=typeof window&&window,x="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,A=b||"undefined"!=typeof _&&_||x,w=A;!function(){if(!A)throw new Error("RxJS could not find any global context (window, self, global)")}();var P={root:w};var E={isFunction:function(t){return"function"==typeof t}},T={isArray:Array.isArray||function(t){return t&&"number"==typeof t.length}};var S,C={isObject:function(t){return null!=t&&"object"==typeof t}},O={errorObject:{e:{}}};function M(){try{return S.apply(this,arguments)}catch(t){return O.errorObject.e=t,O.errorObject}}var R={tryCatch:function(t){return S=t,M}},I=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},D={UnsubscriptionError:function(t){function e(e){t.call(this),this.errors=e;var i=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=i.name="UnsubscriptionError",this.stack=i.stack,this.message=i.message}return I(e,t),e}(Error)};function L(t){return t.reduce(function(t,e){return t.concat(e instanceof D.UnsubscriptionError?e.errors:e)},[])}var k={Subscription:function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,n=this._parents,r=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=n?n.length:0;i;)i.remove(this),i=++s<a&&n[s]||null;if(E.isFunction(r))R.tryCatch(r).call(this)===O.errorObject&&(e=!0,t=t||(O.errorObject.e instanceof D.UnsubscriptionError?L(O.errorObject.e.errors):[O.errorObject.e]));if(T.isArray(o))for(s=-1,a=o.length;++s<a;){var l=o[s];if(C.isObject(l))if(R.tryCatch(l.unsubscribe).call(l)===O.errorObject){e=!0,t=t||[];var c=O.errorObject.e;c instanceof D.UnsubscriptionError?t=t.concat(L(c.errors)):t.push(c)}}if(e)throw new D.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}()},F={empty:{closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},N=v(function(t,e){var i=P.root.Symbol;e.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),B=(N.rxSubscriber,N.$$rxSubscriber,_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),V=function(t){function e(i,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=F.empty;break;case 1:if(!i){this.destination=F.empty;break}if("object"==typeof i){i instanceof e?(this.destination=i,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new U(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new U(this,i,n,r)}}return B(e,t),e.prototype[N.rxSubscriber]=function(){return this},e.create=function(t,i,n){var r=new e(t,i,n);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(k.Subscription),z=V,U=function(t){function e(e,i,n,r){var o;t.call(this),this._parentSubscriber=e;var s=this;E.isFunction(i)?o=i:i&&(o=i.next,n=i.error,r=i.complete,i!==F.empty&&(s=Object.create(i),E.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}return B(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,i){try{e.call(this._context,i)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(V),j={Subscriber:z};var G={toSubscriber:function(t,e,i){if(t){if(t instanceof j.Subscriber)return t;if(t[N.rxSubscriber])return t[N.rxSubscriber]()}return t||e||i?new j.Subscriber(t,e,i):new j.Subscriber(F.empty)}},W=v(function(t,e){function i(t){var e,i=t.Symbol;return"function"==typeof i?i.observable?e=i.observable:(e=i("observable"),i.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(P.root),e.$$observable=e.observable});W.getSymbolObservable,W.observable,W.$$observable;var H={noop:function(){}};function X(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:H.noop}var Y={pipe:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return X(t)},pipeFromArray:X},q={Observable:function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,r=G.toSubscriber(t,e,i);if(n?n.call(r,this.source):r.add(this.source?this._subscribe(r):this._trySubscribe(r)),r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var i=this;if(e||(P.root.Rx&&P.root.Rx.config&&P.root.Rx.config.Promise?e=P.root.Rx.config.Promise:P.root.Promise&&(e=P.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;r=i.subscribe(function(e){if(r)try{t(e)}catch(t){n(t),r.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[W.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:Y.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(P.root.Rx&&P.root.Rx.config&&P.root.Rx.config.Promise?t=P.root.Rx.config.Promise:P.root.Promise&&(t=P.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,i){var n;e.subscribe(function(t){return n=t},function(t){return i(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}()},K=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Q={ScalarObservable:function(t){function e(e,i){t.call(this),this.value=e,this.scheduler=i,this._isScalar=!0,i&&(this._isScalar=!1)}return K(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.done,i=t.value,n=t.subscriber;e?n.complete():(n.next(i),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:i,subscriber:t});t.next(i),t.closed||t.complete()},e}(q.Observable)},Z=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},J={EmptyObservable:function(t){function e(e){t.call(this),this.scheduler=e}return Z(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(q.Observable)},$=(d=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},{ArrayObservable:function(t){function e(e,i){t.call(this),this.array=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return d(e,t),e.create=function(t,i){return new e(t,i)},e.of=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var n=t[t.length-1];y.isScheduler(n)?t.pop():n=null;var r=t.length;return r>1?new e(t,n):1===r?new Q.ScalarObservable(t[0],n):new J.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,i=t.index,n=t.count,r=t.subscriber;i>=n?r.complete():(r.next(e[i]),r.closed||(t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.array,n=i.length,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{array:i,index:0,count:n,subscriber:t});for(var o=0;o<n&&!t.closed;o++)t.next(i[o]);t.complete()},e}(q.Observable)}),tt={of:$.ArrayObservable.of},et={isArrayLike:function(t){return t&&"number"==typeof t.length}};var it={isPromise:function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},nt=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};function rt(t){var e=t.value,i=t.subscriber;i.closed||(i.next(e),i.complete())}function ot(t){var e=t.err,i=t.subscriber;i.closed||i.error(e)}var st={PromiseObservable:function(t){function e(e,i){t.call(this),this.promise=e,this.scheduler=i}return nt(e,t),e.create=function(t,i){return new e(t,i)},e.prototype._subscribe=function(t){var e=this,i=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):i.then(function(i){e.value=i,e._isScalar=!0,t.closed||(t.next(i),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){P.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return n.schedule(rt,0,{value:this.value,subscriber:t})}else i.then(function(i){e.value=i,e._isScalar=!0,t.closed||t.add(n.schedule(rt,0,{value:i,subscriber:t}))},function(e){t.closed||t.add(n.schedule(ot,0,{err:e,subscriber:t}))}).then(null,function(t){P.root.setTimeout(function(){throw t})})},e}(q.Observable)},at=v(function(t,e){function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var i=t.Set;if(i&&"function"==typeof(new i)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var r=Object.getOwnPropertyNames(n.prototype),o=0;o<r.length;++o){var s=r[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(P.root),e.$$iterator=e.iterator}),lt=(at.symbolIteratorPonyfill,at.iterator,at.$$iterator,_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ct=function(t){function e(e,i){if(t.call(this),this.scheduler=i,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[at.iterator];if(!e&&"string"==typeof t)return new ut(t);if(!e&&void 0!==t.length)return new ht(t);if(!e)throw new TypeError("object is not iterable");return t[at.iterator]()}(e)}return lt(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.index,i=t.hasError,n=t.iterator,r=t.subscriber;if(i)r.error(t.error);else{var o=n.next();o.done?r.complete():(r.next(o.value),t.index=e+1,r.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var i=this.iterator,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{index:0,iterator:i,subscriber:t});for(;;){var r=i.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed){"function"==typeof i.return&&i.return();break}}},e}(q.Observable),ut=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),this.str=t,this.idx=e,this.len=i}return t.prototype[at.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),ht=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(i=e,"number"!=typeof i||!P.root.isFinite(i)))return e;var i;if((e=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>pt)return pt;return e}(t)),this.arr=t,this.idx=e,this.len=i}return t.prototype[at.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var pt=Math.pow(2,53)-1;var dt={IteratorObservable:ct},ft=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},mt={ArrayLikeObservable:function(t){function e(e,i){t.call(this),this.arrayLike=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return ft(e,t),e.create=function(t,i){var n=t.length;return 0===n?new J.EmptyObservable:1===n?new Q.ScalarObservable(t[0],i):new e(t,i)},e.dispatch=function(t){var e=t.arrayLike,i=t.index,n=t.length,r=t.subscriber;r.closed||(i>=n?r.complete():(r.next(e[i]),t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.arrayLike,n=this.scheduler,r=i.length;if(n)return n.schedule(e.dispatch,0,{arrayLike:i,index:0,length:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(i[o]);t.complete()},e}(q.Observable)},gt={Notification:function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return q.Observable.of(this.value);case"E":return q.Observable.throw(this.error);case"C":return q.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},yt=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var _t=function(t,e){return void 0===e&&(e=0),function(i){return i.lift(new vt(t,e))}},vt=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new xt(t,this.scheduler,this.delay))},t}(),bt=vt,xt=function(t){function e(e,i,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=i,this.delay=n}return yt(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new wt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(gt.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(gt.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(gt.Notification.createComplete())},e}(j.Subscriber),At=xt,wt=function(){return function(t,e){this.notification=t,this.destination=e}}(),Pt={observeOn:_t,ObserveOnOperator:bt,ObserveOnSubscriber:At,ObserveOnMessage:wt},Et=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Tt={from:{FromObservable:function(t){function e(e,i){t.call(this,null),this.ish=e,this.scheduler=i}return Et(e,t),e.create=function(t,i){if(null!=t){if("function"==typeof t[W.observable])return t instanceof q.Observable&&!i?t:new e(t,i);if(T.isArray(t))return new $.ArrayObservable(t,i);if(it.isPromise(t))return new st.PromiseObservable(t,i);if("function"==typeof t[at.iterator]||"string"==typeof t)return new dt.IteratorObservable(t,i);if(et.isArrayLike(t))return new mt.ArrayLikeObservable(t,i)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,i=this.scheduler;return null==i?e[W.observable]().subscribe(t):e[W.observable]().subscribe(new Pt.ObserveOnSubscriber(t,i,0))},e}(q.Observable)}.FromObservable.create},St=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ct={InnerSubscriber:function(t){function e(e,i,n){t.call(this),this.parent=e,this.outerValue=i,this.outerIndex=n,this.index=0}return St(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(j.Subscriber)};var Ot={subscribeToResult:function(t,e,i,n){var r=new Ct.InnerSubscriber(t,i,n);if(r.closed)return null;if(e instanceof q.Observable)return e._isScalar?(r.next(e.value),r.complete(),null):(r.syncErrorThrowable=!0,e.subscribe(r));if(et.isArrayLike(e)){for(var o=0,s=e.length;o<s&&!r.closed;o++)r.next(e[o]);r.closed||r.complete()}else{if(it.isPromise(e))return e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,function(t){P.root.setTimeout(function(){throw t})}),r;if(e&&"function"==typeof e[at.iterator])for(var a=e[at.iterator]();;){var l=a.next();if(l.done){r.complete();break}if(r.next(l.value),r.closed)break}else if(e&&"function"==typeof e[W.observable]){var c=e[W.observable]();if("function"==typeof c.subscribe)return c.subscribe(new Ct.InnerSubscriber(t,i,n));r.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var u="You provided "+(C.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";r.error(new TypeError(u))}}return null}},Mt=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Rt={OuterSubscriber:function(t){function e(){t.apply(this,arguments)}return Mt(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(j.Subscriber)},It=_&&_.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var Dt=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(n){return"number"==typeof e&&(i=e,e=null),n.lift(new Lt(t,e,i))}},Lt=function(){function t(t,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new Ft(t,this.project,this.resultSelector,this.concurrent))},t}(),kt=Lt,Ft=function(t){function e(e,i,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.project=i,this.resultSelector=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return It(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){this.add(Ot.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,n,r){this.resultSelector?this._notifyResultSelector(t,e,i,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,i,n){var r;try{r=this.resultSelector(t,e,i,n)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Rt.OuterSubscriber),Nt={mergeMap:Dt,MergeMapOperator:kt,MergeMapSubscriber:Ft};var Bt={identity:function(t){return t}};var Vt={mergeAll:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Nt.mergeMap(Bt.identity,null,t)}};var zt={concatAll:function(){return Vt.mergeAll(1)}};var Ut={concat:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&y.isScheduler(t[1])?Tt.from(t[0]):zt.concatAll()(tt.of.apply(void 0,t))}};var jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(Ut.concat.apply(void 0,[e].concat(t)))}},Gt=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Wt=function(){return function(){}}(),Ht=function(){function t(){}return t.prototype.handle=function(t){return t.key},t}();Ht=Gt([Object(r.v)()],Ht);var Xt=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yt=function(){return function(){}}(),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.compile=function(t,e){return t},e.prototype.compileTranslations=function(t,e){return t},e}(Yt);function Kt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var i,n,r,o=typeof t;if(o==typeof e&&"object"==o){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(n in r=Object.create(null),t){if(!Kt(t[n],e[n]))return!1;r[n]=!0}for(n in e)if(!(n in r)&&"undefined"!=typeof e[n])return!1;return!0}if(!Array.isArray(e))return!1;if((i=t.length)==e.length){for(n=0;n<i;n++)if(!Kt(t[n],e[n]))return!1;return!0}}return!1}function Qt(t){return"undefined"!=typeof t&&null!==t}function Zt(t){return t&&"object"==typeof t&&!Array.isArray(t)}qt=Xt([Object(r.v)()],qt);var Jt=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},$t=function(){return function(){}}(),te=function(t){function e(){var e=t.apply(this,arguments)||this;return e.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,e}return d(e,t),e.prototype.interpolate=function(t,e){return"string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t},e.prototype.getValue=function(t,e){var i=e.split(".");e="";do{e+=i.shift(),!Qt(t)||!Qt(t[e])||"object"!=typeof t[e]&&i.length?i.length?e+=".":t=void 0:(t=t[e],e="")}while(i.length);return t},e.prototype.interpolateFunction=function(t,e){return t(e)},e.prototype.interpolateString=function(t,e){var i=this;return e?t.replace(this.templateMatcher,function(t,n){var r=i.getValue(e,n);return Qt(r)?r:t}):t},e}($t);te=Jt([Object(r.v)()],te);var ee=function(){return function(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new r.r,this.onLangChange=new r.r,this.onDefaultLangChange=new r.r}}(),ie=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ne=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},re=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}},oe=new r.w("USE_STORE"),se=new r.w("USE_DEFAULT_LANG"),ae=function(){function t(t,e,i,n,o,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1),this.store=t,this.currentLoader=e,this.compiler=i,this.parser=n,this.missingTranslationHandler=o,this.useDefaultLang=s,this.isolate=a,this.pending=!1,this._onTranslationChange=new r.r,this._onLangChange=new r.r,this._onDefaultLangChange=new r.r,this._langs=[],this._translations={},this._translationRequests={}}return Object.defineProperty(t.prototype,"onTranslationChange",{get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLangChange",{get:function(){return this.isolate?this._onLangChange:this.store.onLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDefaultLangChange",{get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLang",{get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langs",{get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translations",{get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._currentLang=t:this.store.translations=t},enumerable:!0,configurable:!0}),t.prototype.setDefaultLang=function(t){var e=this;if(t!==this.defaultLang){var i=this.retrieveTranslations(t);"undefined"!=typeof i?(this.defaultLang||(this.defaultLang=t),i.pipe(Object(p.a)(1)).subscribe(function(i){e.changeDefaultLang(t)})):this.changeDefaultLang(t)}},t.prototype.getDefaultLang=function(){return this.defaultLang},t.prototype.use=function(t){var e=this;if(t===this.currentLang)return Object(o.a)(this.translations[t]);var i=this.retrieveTranslations(t);return"undefined"!=typeof i?(this.currentLang||(this.currentLang=t),i.pipe(Object(p.a)(1)).subscribe(function(i){e.changeLang(t)}),i):(this.changeLang(t),Object(o.a)(this.translations[t]))},t.prototype.retrieveTranslations=function(t){var e;return"undefined"==typeof this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e},t.prototype.getTranslation=function(t){var e=this;return this.pending=!0,this.loadingTranslations=this.currentLoader.getTranslation(t).pipe(Object(a.a)()),this.loadingTranslations.pipe(Object(p.a)(1)).subscribe(function(i){e.translations[t]=e.compiler.compileTranslations(i,t),e.updateLangs(),e.pending=!1},function(t){e.pending=!1}),this.loadingTranslations},t.prototype.setTranslation=function(t,e,i){void 0===i&&(i=!1),e=this.compiler.compileTranslations(e,t),i&&this.translations[t]?this.translations[t]=function t(e,i){e=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(i));var n=Object.assign({},e);return Zt(e)&&Zt(i)&&Object.keys(i).forEach(function(r){var o,s;Zt(i[r])?r in e?n[r]=t(e[r],i[r]):Object.assign(n,((o={})[r]=i[r],o)):Object.assign(n,((s={})[r]=i[r],s))}),n}(this.translations[t],e):this.translations[t]=e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})},t.prototype.getLangs=function(){return this.langs},t.prototype.addLangs=function(t){var e=this;t.forEach(function(t){-1===e.langs.indexOf(t)&&e.langs.push(t)})},t.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},t.prototype.getParsedResult=function(t,e,i){var n;if(e instanceof Array){for(var r={},s=!1,a=0,u=e;a<u.length;a++){r[m=u[a]]=this.getParsedResult(t,m,i),"function"==typeof r[m].subscribe&&(s=!0)}if(s){for(var p=void 0,d=0,f=e;d<f.length;d++){var m,g="function"==typeof r[m=f[d]].subscribe?r[m]:Object(o.a)(r[m]);p="undefined"==typeof p?g:p.pipe(Object(c.a)(g))}return p.pipe(Object(h.a)(),Object(l.a)(function(t){var i={};return t.forEach(function(t,n){i[e[n]]=t}),i}))}return r}if(t&&(n=this.parser.interpolate(this.parser.getValue(t,e),i)),"undefined"==typeof n&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(n=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),i)),"undefined"==typeof n){var y={key:e,translateService:this};"undefined"!=typeof i&&(y.interpolateParams=i),n=this.missingTranslationHandler.handle(y)}return"undefined"!=typeof n?n:e},t.prototype.get=function(t,e){var i=this;if(!Qt(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return s.a.create(function(n){var r=function(t){n.next(t),n.complete()},o=function(t){n.error(t)};i.loadingTranslations.subscribe(function(n){"function"==typeof(n=i.getParsedResult(i.compiler.compileTranslations(n,i.currentLang),t,e)).subscribe?n.subscribe(r,o):r(n)},o)});var n=this.getParsedResult(this.translations[this.currentLang],t,e);return"function"==typeof n.subscribe?n:Object(o.a)(n)},t.prototype.stream=function(t,e){var i=this;if(!Qt(t)||!t.length)throw new Error('Parameter "key" required');return this.get(t,e).pipe(jt(this.onLangChange.pipe(Object(u.a)(function(n){var r=i.getParsedResult(n.translations,t,e);return"function"==typeof r.subscribe?r:Object(o.a)(r)}))))},t.prototype.instant=function(t,e){if(!Qt(t)||!t.length)throw new Error('Parameter "key" required');var i=this.getParsedResult(this.translations[this.currentLang],t,e);if("undefined"!=typeof i.subscribe){if(t instanceof Array){var n={};return t.forEach(function(e,i){n[t[i]]=t[i]}),n}return t}return i},t.prototype.set=function(t,e,i){void 0===i&&(i=this.currentLang),this.translations[i][t]=this.compiler.compile(e,i),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})},t.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)},t.prototype.changeDefaultLang=function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})},t.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},t.prototype.resetLang=function(t){this._translationRequests[t]=void 0,this.translations[t]=void 0},t.prototype.getBrowserLang=function(){if("undefined"!=typeof window&&"undefined"!=typeof window.navigator){var t=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t}},t.prototype.getBrowserCultureLang=function(){if("undefined"!=typeof window&&"undefined"!=typeof window.navigator){var t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}},t}();ae=ie([Object(r.v)(),re(5,Object(r.u)(se)),re(6,Object(r.u)(oe)),ne("design:paramtypes",[ee,m,Yt,$t,Wt,Boolean,Boolean])],ae);var le=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ce=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ue=function(){function t(t,e,i){var n=this;this.translateService=t,this.element=e,this._ref=i,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(function(t){t.lang===n.translateService.currentLang&&n.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(function(t){n.checkNodes(!0,t.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(function(t){n.checkNodes(!0)}))}return Object.defineProperty(t.prototype,"translate",{set:function(t){t&&(this.key=t,this.checkNodes())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translateParams",{set:function(t){Kt(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewChecked=function(){this.checkNodes()},t.prototype.checkNodes=function(t,e){void 0===t&&(t=!1);var i=this.element.nativeElement.childNodes;i.length||(this.setContent(this.element.nativeElement,this.key),i=this.element.nativeElement.childNodes);for(var n=0;n<i.length;++n){var r=i[n];if(3===r.nodeType){var o=void 0;if(this.key)o=this.key,t&&(r.lastKey=null);else{var s=this.getContent(r).trim();s.length&&(s!==r.currentValue?(o=s,r.originalContent=this.getContent(r)):r.originalContent&&t&&(r.lastKey=null,o=r.originalContent.trim()))}this.updateValue(o,r,e)}}},t.prototype.updateValue=function(t,e,i){var n=this;if(t){if(e.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;var r=function(i){i!==t&&(e.lastKey=t),e.originalContent||(e.originalContent=n.getContent(e)),e.currentValue=Qt(i)?i:e.originalContent||t,n.setContent(e,n.key?e.currentValue:e.originalContent.replace(t,e.currentValue)),n._ref.markForCheck()};if(Qt(i)){var o=this.translateService.getParsedResult(i,t,this.currentParams);"function"==typeof o.subscribe?o.subscribe(r):r(o)}else this.translateService.get(t,this.currentParams).subscribe(r)}},t.prototype.getContent=function(t){return Qt(t.textContent)?t.textContent:t.data},t.prototype.setContent=function(t,e){Qt(t.textContent)?t.textContent=e:t.data=e},t.prototype.ngOnDestroy=function(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()},t}();le([Object(r.y)(),ce("design:type",String),ce("design:paramtypes",[String])],ue.prototype,"translate",null),le([Object(r.y)(),ce("design:type",Object),ce("design:paramtypes",[Object])],ue.prototype,"translateParams",null),ue=le([Object(r.n)({selector:"[translate],[ngx-translate]"}),ce("design:paramtypes",[ae,r.o,r.h])],ue);var he=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},pe=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},de=function(){function t(t,e){this.translate=t,this._ref=e,this.value=""}return t.prototype.updateValue=function(t,e,i){var n=this,r=function(e){n.value=void 0!==e?e:t,n.lastKey=t,n._ref.markForCheck()};if(i){var o=this.translate.getParsedResult(i,t,e);"function"==typeof o.subscribe?o.subscribe(r):r(o)}this.translate.get(t,e).subscribe(r)},t.prototype.transform=function(t){for(var e,i=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!t||0===t.length)return t;if(Kt(t,this.lastKey)&&Kt(n,this.lastParams))return this.value;if(Qt(n[0])&&n.length)if("string"==typeof n[0]&&n[0].length){var o=n[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{e=JSON.parse(o)}catch(t){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+n[0])}}else"object"!=typeof n[0]||Array.isArray(n[0])||(e=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,e),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(n){i.lastKey&&n.lang===i.translate.currentLang&&(i.lastKey=null,i.updateValue(t,e,n.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(n){i.lastKey&&(i.lastKey=null,i.updateValue(t,e,n.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){i.lastKey&&(i.lastKey=null,i.updateValue(t,e))})),this.value},t.prototype._dispose=function(){"undefined"!=typeof this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),"undefined"!=typeof this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),"undefined"!=typeof this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)},t.prototype.ngOnDestroy=function(){this._dispose()},t}();de=he([Object(r.v)(),Object(r.K)({name:"translate",pure:!1}),pe("design:paramtypes",[ae,r.h])],de);var fe,me=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ge=fe=function(){function t(){}return t.forRoot=function(t){return void 0===t&&(t={}),{ngModule:fe,providers:[t.loader||{provide:m,useClass:g},t.compiler||{provide:Yt,useClass:qt},t.parser||{provide:$t,useClass:te},t.missingTranslationHandler||{provide:Wt,useClass:Ht},ee,{provide:oe,useValue:t.isolate},{provide:se,useValue:t.useDefaultLang},ae]}},t.forChild=function(t){return void 0===t&&(t={}),{ngModule:fe,providers:[t.loader||{provide:m,useClass:g},t.compiler||{provide:Yt,useClass:qt},t.parser||{provide:$t,useClass:te},t.missingTranslationHandler||{provide:Wt,useClass:Ht},{provide:oe,useValue:t.isolate},{provide:se,useValue:t.useDefaultLang},ae]}},t}();ge=fe=me([Object(r.C)({declarations:[de,ue],exports:[de,ue]})],ge)}).call(e,i("GTd5"))},qLnt:function(t,e,i){"use strict";var n=i("1j/l"),r=i("NGRF"),o=i("B1iP"),s=i("8ofh"),a=i("NePw"),l=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=function(t){function e(e){t.call(this),this.errors=e;var i=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=i.name="UnsubscriptionError",this.stack=i.stack,this.message=i.message}return l(e,t),e}(Error);i.d(e,"a",function(){return u});var u=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,l=this._parents,u=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,f=l?l.length:0;i;)i.remove(this),i=++d<f&&l[d]||null;if(Object(o.a)(u))Object(s.a)(u).call(this)===a.a&&(e=!0,t=t||(a.a.e instanceof c?h(a.a.e.errors):[a.a.e]));if(Object(n.a)(p))for(d=-1,f=p.length;++d<f;){var m=p[d];if(Object(r.a)(m))if(Object(s.a)(m.unsubscribe).call(m)===a.a){e=!0,t=t||[];var g=a.a.e;g instanceof c?t=t.concat(h(g.errors)):t.push(g)}}if(e)throw new c(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function h(t){return t.reduce(function(t,e){return t.concat(e instanceof c?e.errors:e)},[])}},qgI0:function(t,e,i){"use strict";var n=i("xIGM"),r=i("kQVV"),o=i("mHG6"),s=i("NGRF"),a=i("AP4T"),l=i("X3fp"),c=i("E9/g"),u=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},h=function(t){function e(e,i,n){t.call(this),this.parent=e,this.outerValue=i,this.outerIndex=n,this.index=0}return u(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(c.a),p=i("mz3w");e.a=function(t,e,i,c){var u=new h(t,i,c);if(u.closed)return null;if(e instanceof a.a)return e._isScalar?(u.next(e.value),u.complete(),null):(u.syncErrorThrowable=!0,e.subscribe(u));if(Object(r.a)(e)){for(var d=0,f=e.length;d<f&&!u.closed;d++)u.next(e[d]);u.closed||u.complete()}else{if(Object(o.a)(e))return e.then(function(t){u.closed||(u.next(t),u.complete())},function(t){return u.error(t)}).then(null,function(t){n.a.setTimeout(function(){throw t})}),u;if(e&&"function"==typeof e[l.a])for(var m=e[l.a]();;){var g=m.next();if(g.done){u.complete();break}if(u.next(g.value),u.closed)break}else if(e&&"function"==typeof e[p.a]){var y=e[p.a]();if("function"==typeof y.subscribe)return y.subscribe(new h(t,i,c));u.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var _=Object(s.a)(e)?"an invalid object":"'"+e+"'",v="You provided "+_+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";u.error(new TypeError(v))}}return null}},qqDE:function(t,e,i){"use strict";e.a=function(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new o(t,e))}};var n=i("E9/g"),r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,i,n){t.call(this,e),this.project=i,this.count=0,this.thisArg=n||this}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(n.a)},rOzH:function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,a,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(o(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(r(i))for(a=Array.prototype.slice.call(arguments,1),s=(c=i.slice()).length,l=0;l<s;l++)c[l].apply(this,a);return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,o,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,o=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=s;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){o=a;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},rSoR:function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,p,d,f,m=t[u].replace(a,"%20"),g=m.indexOf(i);g>=0?(h=m.substr(0,g),p=m.substr(g+1)):(h=m,p=""),d=decodeURIComponent(h),f=decodeURIComponent(p),n(s,d)?r(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},rT01:function(t,e,i){"use strict";i.d(e,"p",function(){return n}),i.d(e,"d",function(){return r}),i.d(e,"m",function(){return o}),i.d(e,"i",function(){return s}),i.d(e,"l",function(){return a}),i.d(e,"k",function(){return l}),i.d(e,"h",function(){return c}),i.d(e,"e",function(){return u}),i.d(e,"f",function(){return h}),i.d(e,"n",function(){return p}),i.d(e,"o",function(){return d}),i.d(e,"g",function(){return f}),i.d(e,"b",function(){return m}),i.d(e,"c",function(){return g}),i.d(e,"a",function(){return y}),i.d(e,"q",function(){return _}),i.d(e,"r",function(){return v}),i.d(e,"j",function(){return b});var n=38,r=40,o=39,s=37,a=33,l=34,c=36,u=35,h=13,p=32,d=9,f=27,m=8,g=46,y=65,_=90,v=48,b=57},rgUS:function(t,e,i){var n;!function(r,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h="function",p=Math.round,d=Math.abs,f=Date.now;function m(t,e,i){return setTimeout(A(t,i),e)}function g(t,e,i){return!!Array.isArray(t)&&(y(t,i[e],i),!0)}function y(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function _(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var v=_(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),b=_(function(t,e){return v(t,e,!0)},"merge","Use `assign`.");function x(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function A(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return typeof t==h?t.apply(e&&e[0]||a,e):t}function P(t,e){return t===a?e:t}function E(t,e,i){y(O(e),function(e){t.addEventListener(e,i,!1)})}function T(t,e,i){y(O(e),function(e){t.removeEventListener(e,i,!1)})}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function M(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function R(t){return Array.prototype.slice.call(t,0)}function I(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function D(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((n=(i=c[o])?i+r:e)in t)return n;o++}return a}var L=1;function k(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var F="ontouchstart"in r,N=D(r,"PointerEvent")!==a,B=F&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,z=1,U=2,j=4,G=8,W=1,H=2,X=4,Y=8,q=16,K=H|X,Q=Y|q,Z=K|Q,J=["x","y"],$=["clientX","clientY"];function tt(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&i.handler(e)},this.init()}function et(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&z&&n-r==0,s=e&(j|G)&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=it(e));r>1&&!i.firstMultiple?i.firstMultiple=it(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,l=s?s.center:o.center,c=e.center=nt(n);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=at(l,c),e.distance=st(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==z&&o.eventType!==j||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var u=rt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=d(u.x)>d(u.y)?u.x:u.y,e.scale=s?(h=s.pointers,p=n,st(p[0],p[1],$)/st(h[0],h[1],$)):1,e.rotation=s?function(t,e){return at(e[1],e[0],$)+at(t[1],t[0],$)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=G&&(l>V||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=rt(l,c,u);n=h.x,r=h.y,i=d(h.x)>d(h.y)?h.x:h.y,o=ot(c,u),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var h,p;var m=t.element;S(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function it(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:p(t.pointers[i].clientX),clientY:p(t.pointers[i].clientY)},i++;return{timeStamp:f(),pointers:e,center:nt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function nt(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:p(i/e),y:p(n/e)}}function rt(t,e,i){return{x:e/t||0,y:i/t||0}}function ot(t,e){return t===e?W:d(t)>=d(e)?t<0?H:X:e<0?Y:q}function st(t,e,i){i||(i=J);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function at(t,e,i){i||(i=J);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(k(this.element),this.evWin,this.domHandler)}};var lt={mousedown:z,mousemove:U,mouseup:j},ct="mousedown",ut="mousemove mouseup";function ht(){this.evEl=ct,this.evWin=ut,this.pressed=!1,tt.apply(this,arguments)}x(ht,tt,{handler:function(t){var e=lt[t.type];e&z&&0===t.button&&(this.pressed=!0),e&U&&1!==t.which&&(e=j),this.pressed&&(e&j&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var pt={pointerdown:z,pointermove:U,pointerup:j,pointercancel:G,pointerout:G},dt={2:"touch",3:"pen",4:"mouse",5:"kinect"},ft="pointerdown",mt="pointermove pointerup pointercancel";function gt(){this.evEl=ft,this.evWin=mt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(ft="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),x(gt,tt,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=pt[n],o=dt[t.pointerType]||t.pointerType,s="touch"==o,a=M(e,t.pointerId,"pointerId");r&z&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(j|G)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var yt={touchstart:z,touchmove:U,touchend:j,touchcancel:G},_t="touchstart",vt="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=_t,this.evWin=vt,this.started=!1,tt.apply(this,arguments)}x(bt,tt,{handler:function(t){var e=yt[t.type];if(e===z&&(this.started=!0),this.started){var i=(function(t,e){var i=R(t.touches),n=R(t.changedTouches);e&(j|G)&&(i=I(i.concat(n),"identifier",!0));return[i,n]}).call(this,t,e);e&(j|G)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var xt={touchstart:z,touchmove:U,touchend:j,touchcancel:G},At="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=At,this.targetIds={},tt.apply(this,arguments)}x(wt,tt,{handler:function(t){var e=xt[t.type],i=(function(t,e){var i=R(t.touches),n=this.targetIds;if(e&(z|U)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=R(t.changedTouches),a=[],l=this.target;if(o=i.filter(function(t){return S(t.target,l)}),e===z)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;r=0;for(;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(j|G)&&delete n[s[r].identifier],r++;if(!a.length)return;return[I(o.concat(a),"identifier",!0),a]}).call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var Pt=2500,Et=25;function Tt(){tt.apply(this,arguments);var t=A(this.handler,this);this.touch=new wt(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function St(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},Pt)}}x(Tt,tt,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&z?(this.primaryTouch=e.changedPointers[0].identifier,St.call(this,e)):t&(j|G)&&St.call(this,e)}).call(this,e,i);else if(r&&(function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=Et&&s<=Et)return!0}return!1}).call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=D(u.style,"touchAction"),Ot=Ct!==a,Mt="auto",Rt="manipulation",It="none",Dt="pan-x",Lt="pan-y",kt=function(){if(!Ot)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||r.CSS.supports("touch-action",i)}),t}();function Ft(t,e){this.manager=t,this.set(e)}Ft.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ot&&this.manager.element.style&&kt[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(C(t,It))return It;var e=C(t,Dt),i=C(t,Lt);if(e&&i)return It;if(e||i)return e?Dt:Lt;if(C(t,Rt))return Rt;return Mt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=C(n,It)&&!kt[It],o=C(n,Lt)&&!kt[Lt],s=C(n,Dt)&&!kt[Dt];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&i&K||s&&i&Q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Nt=1,Bt=2,Vt=4,zt=8,Ut=zt,jt=16;function Gt(t){this.options=l({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Nt,this.simultaneous={},this.requireFail=[]}function Wt(t){return t&jt?"cancel":t&zt?"end":t&Vt?"move":t&Bt?"start":""}function Ht(t){return t==q?"down":t==Y?"up":t==H?"left":t==X?"right":""}function Xt(t,e){var i=e.manager;return i?i.get(t):t}function Yt(){Gt.apply(this,arguments)}function qt(){Yt.apply(this,arguments),this.pX=null,this.pY=null}function Kt(){Yt.apply(this,arguments)}function Qt(){Gt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Yt.apply(this,arguments)}function Jt(){Yt.apply(this,arguments)}function $t(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=P(e.recognizers,te.defaults.preset),new ee(t,e)}Gt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Xt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)?this:(t=Xt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Xt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Xt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<zt&&n(e.options.event+Wt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=zt&&n(e.options.event+Wt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Nt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ut|jt|32)&&(this.state=Nt),this.state=this.process(e),this.state&(Bt|Vt|zt|jt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Yt,Gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Bt|Vt),r=this.attrTest(t);return n&&(i&G||!r)?e|jt:n||r?i&j?e|zt:e&Bt?e|Vt:Bt:32}}),x(qt,Yt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push(Lt),t&Q&&e.push(Dt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&K?(r=0===o?W:o<0?H:X,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?W:s<0?Y:q,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Yt.prototype.attrTest.call(this,t)&&(this.state&Bt||!(this.state&Bt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Kt,Yt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Bt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(Qt,Gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(j|G)&&!r)this.reset();else if(t.eventType&z)this.reset(),this._timer=m(function(){this.state=Ut,this.tryEmit()},e.time,this);else if(t.eventType&j)return Ut;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ut&&(t&&t.eventType&j?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),x(Zt,Yt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Bt)}}),x(Jt,Yt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|Q,pointers:1},getTouchAction:function(){return qt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(K|Q)?e=t.overallVelocity:i&K?e=t.overallVelocityX:i&Q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&j},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x($t,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&z&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=j)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Ut,this.tryEmit()},e.interval,this),Bt):Ut}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[Kt,{enable:!1},["rotate"]],[Jt,{direction:K}],[qt,{direction:K},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Qt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){var i;this.options=l({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(N?gt:B?wt:F?Tt:ht))(i,et),this.touchAction=new Ft(this,this.options.touchAction),ie(this,!0),y(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ie(t,e){var i,n=t.element;n.style&&(y(t.options.cssProps,function(r,o){i=D(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ut)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Bt|Vt|zt)&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Gt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=M(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return y(O(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==a){var i=this.handlers;return y(O(t),function(t){e?i[t]&&i[t].splice(M(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ie(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(te,{INPUT_START:z,INPUT_MOVE:U,INPUT_END:j,INPUT_CANCEL:G,STATE_POSSIBLE:Nt,STATE_BEGAN:Bt,STATE_CHANGED:Vt,STATE_ENDED:zt,STATE_RECOGNIZED:Ut,STATE_CANCELLED:jt,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:H,DIRECTION_RIGHT:X,DIRECTION_UP:Y,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Q,DIRECTION_ALL:Z,Manager:ee,Input:tt,TouchAction:Ft,TouchInput:wt,MouseInput:ht,PointerEventInput:gt,TouchMouseInput:Tt,SingleTouchInput:bt,Recognizer:Gt,AttrRecognizer:Yt,Tap:$t,Pan:qt,Swipe:Jt,Pinch:Kt,Rotate:Zt,Press:Qt,on:E,off:T,each:y,merge:b,extend:v,assign:l,inherit:x,bindFn:A,prefixed:D}),("undefined"!=typeof r?r:"undefined"!=typeof self?self:{}).Hammer=te,(n=(function(){return te}).call(e,i,e,t))===a||(t.exports=n)}(window,document)},rr9E:function(t,e,i){t.exports=i("Osec").PassThrough},sZAi:function(t,e,i){"use strict";var n,r=i("ZN67"),o=i("8kWd"),s=i("e/xH"),a=i("f8cP"),l=i("6Pt6"),c=0,u=1,h=3,p=4,d=5,f=0,m=1,g=-2,y=-3,_=-5,v=-1,b=1,x=2,A=3,w=4,P=0,E=2,T=8,S=9,C=15,O=8,M=286,R=30,I=19,D=2*M+1,L=15,k=3,F=258,N=F+k+1,B=32,V=42,z=69,U=73,j=91,G=103,W=113,H=666,X=1,Y=2,q=3,K=4,Q=3;function Z(t,e){return t.msg=l[e],e}function J(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-N?t.strstart-(t.w_size-N):0,c=t.window,u=t.w_mask,h=t.prev,p=t.strstart+F,d=c[o+s-1],f=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(i=e)+s]===f&&c[i+s-1]===d&&c[i]===c[o]&&c[++i]===c[o+1]){o+=2,i++;do{}while(c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&o<p);if(n=F-(p-o),o=p-F,n>s){if(t.match_start=e,s=n,n>=a)break;d=c[o+s-1],f=c[o+s]}}}while((e=h[e&u])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function ot(t){var e,i,n,o,l,c,u,h,p,d,f=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-N)){r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--i);e=i=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--i);o+=f}if(0===t.strm.avail_in)break;if(c=t.strm,u=t.window,h=t.strstart+t.lookahead,p=o,d=void 0,(d=c.avail_in)>p&&(d=p),i=0===d?0:(c.avail_in-=d,r.arraySet(u,c.input,c.next_in,d,h),1===c.state.wrap?c.adler=s(c.adler,u,d,h):2===c.state.wrap&&(c.adler=a(c.adler,u,d,h)),c.next_in+=d,c.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=k)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+k-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<k)););}while(t.lookahead<N&&0!==t.strm.avail_in)}function st(t,e){for(var i,n;;){if(t.lookahead<N){if(ot(t),t.lookahead<N&&e===c)return X;if(0===t.lookahead)break}if(i=0,t.lookahead>=k&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-N&&(t.match_length=rt(t,i)),t.match_length>=k)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-k),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=k){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=t.strstart<k-1?t.strstart:k-1,e===p?(et(t,!0),0===t.strm.avail_out?q:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Y}function at(t,e){for(var i,n,r;;){if(t.lookahead<N){if(ot(t),t.lookahead<N&&e===c)return X;if(0===t.lookahead)break}if(i=0,t.lookahead>=k&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=k-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-N&&(t.match_length=rt(t,i),t.match_length<=5&&(t.strategy===b||t.match_length===k&&t.strstart-t.match_start>4096)&&(t.match_length=k-1)),t.prev_length>=k&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-k,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-k),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=k-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return X}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return X}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<k-1?t.strstart:k-1,e===p?(et(t,!0),0===t.strm.avail_out?q:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Y}function lt(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function ct(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=E,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?V:W,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),f):Z(t,g)}function ut(t){var e,i=ct(t);return i===f&&((e=t.state).window_size=2*e.w_size,$(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=k-1,e.match_available=0,e.ins_h=0),i}function ht(t,e,i,n,o,s){if(!t)return g;var a=1;if(e===v&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>S||i!==T||n<8||n>15||e<0||e>9||s<0||s>w)return Z(t,g);8===n&&(n=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*D),this.dyn_dtree=new r.Buf16(2*(2*R+1)),this.bl_tree=new r.Buf16(2*(2*I+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(L+1),this.heap=new r.Buf16(2*M+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+k-1)/k),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,ut(t)}n=[new lt(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ot(t),0===t.lookahead&&e===c)return X;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return X;if(t.strstart-t.block_start>=t.w_size-N&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?q:K):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),X)}),new lt(4,4,8,4,st),new lt(4,5,16,8,st),new lt(4,6,32,32,st),new lt(4,4,16,16,at),new lt(8,16,32,32,at),new lt(8,16,128,128,at),new lt(8,32,128,256,at),new lt(32,128,258,1024,at),new lt(32,258,258,4096,at)],e.deflateInit=function(t,e){return ht(t,e,T,C,O,P)},e.deflateInit2=ht,e.deflateReset=ut,e.deflateResetKeep=ct,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,f):g},e.deflate=function(t,e){var i,r,s,l;if(!t||!t.state||e>d||e<0)return t?Z(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===H&&e!==p)return Z(t,0===t.avail_out?_:g);if(r.strm=t,i=r.last_flush,r.last_flush=e,r.status===V)if(2===r.wrap)t.adler=0,it(r,31),it(r,139),it(r,8),r.gzhead?(it(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),it(r,255&r.gzhead.time),it(r,r.gzhead.time>>8&255),it(r,r.gzhead.time>>16&255),it(r,r.gzhead.time>>24&255),it(r,9===r.level?2:r.strategy>=x||r.level<2?4:0),it(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(it(r,255&r.gzhead.extra.length),it(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=z):(it(r,0),it(r,0),it(r,0),it(r,0),it(r,0),it(r,9===r.level?2:r.strategy>=x||r.level<2?4:0),it(r,Q),r.status=W);else{var y=T+(r.w_bits-8<<4)<<8;y|=(r.strategy>=x||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(y|=B),y+=31-y%31,r.status=W,nt(r,y),0!==r.strstart&&(nt(r,t.adler>>>16),nt(r,65535&t.adler)),t.adler=1}if(r.status===z)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending!==r.pending_buf_size));)it(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=U)}else r.status=U;if(r.status===U)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,it(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=j)}else r.status=j;if(r.status===j)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,it(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=G)}else r.status=G;if(r.status===G&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(t),r.pending+2<=r.pending_buf_size&&(it(r,255&t.adler),it(r,t.adler>>8&255),t.adler=0,r.status=W)):r.status=W),0!==r.pending){if(tt(t),0===t.avail_out)return r.last_flush=-1,f}else if(0===t.avail_in&&J(e)<=J(i)&&e!==p)return Z(t,_);if(r.status===H&&0!==t.avail_in)return Z(t,_);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==H){var v=r.strategy===x?function(t,e){for(var i;;){if(0===t.lookahead&&(ot(t),0===t.lookahead)){if(e===c)return X;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?q:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Y}(r,e):r.strategy===A?function(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=F){if(ot(t),t.lookahead<=F&&e===c)return X;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=k&&t.strstart>0&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){s=t.strstart+F;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=F-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=k?(i=o._tr_tally(t,1,t.match_length-k),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?q:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Y}(r,e):n[r.level].func(r,e);if(v!==q&&v!==K||(r.status=H),v===X||v===q)return 0===t.avail_out&&(r.last_flush=-1),f;if(v===Y&&(e===u?o._tr_align(r):e!==d&&(o._tr_stored_block(r,0,0,!1),e===h&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(t),0===t.avail_out))return r.last_flush=-1,f}return e!==p?f:r.wrap<=0?m:(2===r.wrap?(it(r,255&t.adler),it(r,t.adler>>8&255),it(r,t.adler>>16&255),it(r,t.adler>>24&255),it(r,255&t.total_in),it(r,t.total_in>>8&255),it(r,t.total_in>>16&255),it(r,t.total_in>>24&255)):(nt(r,t.adler>>>16),nt(r,65535&t.adler)),tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?f:m)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==V&&e!==z&&e!==U&&e!==j&&e!==G&&e!==W&&e!==H?Z(t,g):(t.state=null,e===W?Z(t,y):f):g},e.deflateSetDictionary=function(t,e){var i,n,o,a,l,c,u,h,p=e.length;if(!t||!t.state)return g;if(2===(a=(i=t.state).wrap)||1===a&&i.status!==V||i.lookahead)return g;for(1===a&&(t.adler=s(t.adler,e,p,0)),i.wrap=0,p>=i.w_size&&(0===a&&($(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new r.Buf8(i.w_size),r.arraySet(h,e,p-i.w_size,i.w_size,0),e=h,p=i.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=p,t.next_in=0,t.input=e,ot(i);i.lookahead>=k;){n=i.strstart,o=i.lookahead-(k-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+k-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--o);i.strstart=n,i.lookahead=k-1,ot(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=k-1,i.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,i.wrap=a,f},e.deflateInfo="pako deflate (from Nodeca project)"},trMa:function(t,e,i){"use strict";i.d(e,"a",function(){return A}),e.d=w,i.d(e,"b",function(){return P}),e.c=T;var n=i("LMZF"),r=i("e0rv"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("8Xfy"),c=i("4jwp"),u=i("OFGE"),h=i("j5BN"),p=i("CZgk"),d=(n._13(r.h,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(4608,l.j,l.j,[a.a]),n._25(4608,l.i,l.i,[l.j,n.F,o.c]),n._25(136192,l.e,l.c,[[3,l.e],o.c]),n._25(5120,l.n,l.m,[[3,l.n],[2,l.k],o.c]),n._25(5120,l.h,l.f,[[3,l.h],n.F,a.a]),n._25(5120,c.d,c.b,[[3,c.d],n.F,a.a]),n._25(5120,c.g,c.f,[[3,c.g],a.a,n.F]),n._25(4608,u.i,u.i,[c.d,c.g,n.F,o.c]),n._25(5120,u.e,u.k,[[3,u.e],o.c]),n._25(4608,u.h,u.h,[c.g,o.c]),n._25(5120,u.f,u.n,[[3,u.f],o.c]),n._25(4608,u.c,u.c,[u.i,u.e,n.k,u.h,u.f,n.e,n.x,n.F,o.c]),n._25(5120,u.l,u.m,[u.c]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(256,h.f,!0,[]),n._25(512,h.n,h.n,[[2,h.f]]),n._25(512,a.b,a.b,[]),n._25(512,l.a,l.a,[]),n._25(512,p.g,p.g,[]),n._25(512,c.c,c.c,[]),n._25(512,u.g,u.g,[]),n._25(512,r.h,r.h,[]),n._25(256,r.a,!1,[])])}),n._14({encapsulation:2,styles:[],data:{}}));function f(t){return n._39(2,[n._27(null,0)],null,null)}n._12("mat-drawer-content",r.d,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-drawer-content",[["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,f,d)),n._15(1,1097728,null,0,r.d,[n.h,r.c],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._margins.left,n._28(e,1)._margins.right)})},{},{},["*"]);var m=n._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"translate3d(0, 0, 0)",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function g(t){return n._39(2,[n._27(null,0)],null,null)}n._12("mat-drawer",r.b,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-drawer",[["class","mat-drawer"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,i){var r=!0;return"component:@transform.start"===e&&(r=!1!==n._28(t,1)._onAnimationStart(i)&&r),"component:@transform.done"===e&&(r=!1!==n._28(t,1)._onAnimationEnd(i)&&r),"keydown"===e&&(r=!1!==n._28(t,1).handleKeydown(i)&&r),r},g,m)),n._15(1,3325952,null,0,r.b,[n.o,l.i,l.h,a.a,[2,o.c]],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._animationState,null,"end"===n._28(e,1).position,"over"===n._28(e,1).mode,"push"===n._28(e,1).mode,"side"===n._28(e,1).mode)})},{position:"position",align:"align",mode:"mode",disableClose:"disableClose",opened:"opened"},{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onOpen:"open",onClose:"close",onPositionChanged:"positionChanged",onAlignChanged:"align-changed"},["*"]);var y=n._14({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],data:{}});function _(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"mat-drawer-content",[["cdkScrollable",""],["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,f,d)),n._15(1,212992,[[1,4]],0,c.a,[n.o,c.d,n.F],null,null),n._15(2,1097728,null,0,r.d,[n.h,r.c],null,null),n._27(0,2)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,n._28(e,2)._margins.left,n._28(e,2)._margins.right)})}function v(t){return n._39(2,[n._35(671088640,1,{scrollable:0}),(t()(),n._16(1,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r._onBackdropClicked()&&n);return n},null,null)),n._27(null,0),n._27(null,1),(t()(),n._11(16777216,null,null,1,null,_)),n._15(5,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,5,0,!e.component._content)},function(t,e){t(e,1,0,e.component._isShowingBackdrop())})}n._12("mat-drawer-container",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"mat-drawer-container",[["class","mat-drawer-container"]],null,null,null,v,y)),n._15(1,1490944,null,2,r.c,[[2,s.c],n.o,n.F,n.h,r.a],null,null),n._35(603979776,1,{_drawers:1}),n._35(335544320,2,{_content:0})],function(t,e){t(e,1,0)},null)},{autosize:"autosize"},{backdropClick:"backdropClick"},["mat-drawer","mat-drawer-content","*"]);var b=n._14({encapsulation:2,styles:[],data:{}});function x(t){return n._39(2,[n._27(null,0)],null,null)}n._12("mat-sidenav-content",r.g,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,x,b)),n._15(1,1097728,null,0,r.g,[n.h,r.f],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._margins.left,n._28(e,1)._margins.right)})},{},{},["*"]);var A=n._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"translate3d(0, 0, 0)",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function w(t){return n._39(2,[n._27(null,0)],null,null)}n._12("mat-sidenav",r.e,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,i){var r=!0;return"component:@transform.start"===e&&(r=!1!==n._28(t,1)._onAnimationStart(i)&&r),"component:@transform.done"===e&&(r=!1!==n._28(t,1)._onAnimationEnd(i)&&r),"keydown"===e&&(r=!1!==n._28(t,1).handleKeydown(i)&&r),r},w,A)),n._15(1,3325952,null,0,r.e,[n.o,l.i,l.h,a.a,[2,o.c]],null,null)],null,function(t,e){t(e,0,0,n._28(e,1)._animationState,null,"end"===n._28(e,1).position,"over"===n._28(e,1).mode,"push"===n._28(e,1).mode,"side"===n._28(e,1).mode,n._28(e,1).fixedInViewport,n._28(e,1).fixedInViewport?n._28(e,1).fixedTopGap:null,n._28(e,1).fixedInViewport?n._28(e,1).fixedBottomGap:null)})},{position:"position",align:"align",mode:"mode",disableClose:"disableClose",opened:"opened",fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onOpen:"open",onClose:"close",onPositionChanged:"positionChanged",onAlignChanged:"align-changed"},["*"]);var P=n._14({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],data:{}});function E(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"mat-sidenav-content",[["cdkScrollable",""],["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,x,b)),n._15(1,212992,[[1,4]],0,c.a,[n.o,c.d,n.F],null,null),n._15(2,1097728,null,0,r.g,[n.h,r.f],null,null),n._27(0,2)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,n._28(e,2)._margins.left,n._28(e,2)._margins.right)})}function T(t){return n._39(2,[n._35(671088640,1,{scrollable:0}),(t()(),n._16(1,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r._onBackdropClicked()&&n);return n},null,null)),n._27(null,0),n._27(null,1),(t()(),n._11(16777216,null,null,1,null,E)),n._15(5,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,5,0,!e.component._content)},function(t,e){t(e,1,0,e.component._isShowingBackdrop())})}n._12("mat-sidenav-container",r.f,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,3,"mat-sidenav-container",[["class","mat-drawer-container mat-sidenav-container"]],null,null,null,T,P)),n._15(1,1490944,null,2,r.f,[[2,s.c],n.o,n.F,n.h,r.a],null,null),n._35(603979776,1,{_drawers:1}),n._35(335544320,2,{_content:0})],function(t,e){t(e,1,0)},null)},{autosize:"autosize"},{backdropClick:"backdropClick"},["mat-sidenav","mat-sidenav-content","*"])},ulOE:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),e.b=_;var n=i("LMZF"),r=i("Lpd/"),o=i("Un6q"),s=i("V8+5"),a=i("j5BN"),l=(n._13(r.d,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(4608,s.a,s.a,[]),n._25(512,o.b,o.b,[]),n._25(512,s.b,s.b,[]),n._25(512,r.d,r.d,[])])}),n._14({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform:perspective(100px);-ms-transform:none;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;height:1px;width:100%}.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.mat-form-field-underline .mat-form-field-ripple{position:absolute;top:0;left:0;width:100%;height:2px;transform-origin:50%;transform:scaleX(.5);visibility:hidden;opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field-invalid:not(.mat-focused) .mat-form-field-underline .mat-form-field-ripple{height:1px}.mat-focused .mat-form-field-underline .mat-form-field-ripple,.mat-form-field-invalid .mat-form-field-underline .mat-form-field-ripple{visibility:visible;opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-autosize{resize:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}}));function c(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["class","mat-input-prefix mat-form-field-prefix"]],null,null,null,null,null)),n._27(null,0)],null,null)}function u(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,null,null,null,null,null,null,null)),n._27(null,2),(t()(),n._37(2,null,["",""]))],null,function(t,e){t(e,2,0,e.component._control.placeholder)})}function h(t){return n._39(0,[n._27(null,3),(t()(),n._11(0,null,null,0))],null,null)}function p(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),n._37(-1,null,["\xa0*"]))],null,null)}function d(t){return n._39(0,[(t()(),n._16(0,0,[[4,0],["label",1]],null,7,"label",[["class","mat-form-field-label mat-input-placeholder mat-form-field-placeholder"]],[[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),n._15(1,16384,null,0,o.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),n._11(16777216,null,null,1,null,u)),n._15(3,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),n._11(16777216,null,null,1,null,h)),n._15(5,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),n._11(16777216,null,null,1,null,p)),n._15(7,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){var i=e.component;t(e,1,0,i._hasLabel());t(e,3,0,!1);t(e,5,0,!0),t(e,7,0,!i.hideRequiredMarker&&i._control.required&&!i._control.disabled)},function(t,e){var i=e.component;t(e,0,0,i._control.id,i._control.id,i._control.empty&&!i._shouldAlwaysFloat,i._control.empty&&!i._shouldAlwaysFloat,"accent"==i.color,"warn"==i.color)})}function f(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["class","mat-input-suffix mat-form-field-suffix"]],null,null,null,null,null)),n._27(null,4)],null,null)}function m(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),n._27(null,5)],null,function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function g(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),n._37(1,null,["",""]))],null,function(t,e){var i=e.component;t(e,0,0,i._hintLabelId),t(e,1,0,i.hintLabel)})}function y(t){return n._39(0,[(t()(),n._16(0,0,null,null,5,"div",[["class","mat-input-hint-wrapper mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),n._11(16777216,null,null,1,null,g)),n._15(2,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),n._27(null,6),(t()(),n._16(4,0,null,null,0,"div",[["class","mat-input-hint-spacer mat-form-field-hint-spacer"]],null,null,null,null,null)),n._27(null,7)],function(t,e){t(e,2,0,e.component.hintLabel)},function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function _(t){return n._39(2,[n._35(402653184,1,{underlineRef:0}),n._35(402653184,2,{_connectionContainerRef:0}),n._35(402653184,3,{_inputContainerRef:0}),n._35(671088640,4,{_label:0}),(t()(),n._16(4,0,null,null,18,"div",[["class","mat-input-wrapper mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),n._16(5,0,[[2,0],["connectionContainer",1]],null,9,"div",[["class","mat-input-flex mat-form-field-flex"]],null,[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==(r._control.onContainerClick&&r._control.onContainerClick(i))&&n);return n},null,null)),(t()(),n._11(16777216,null,null,1,null,c)),n._15(7,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._16(8,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-input-infix mat-form-field-infix"]],null,null,null,null,null)),n._27(null,1),(t()(),n._16(10,0,null,null,2,"span",[["class","mat-form-field-label-wrapper mat-input-placeholder-wrapper mat-form-field-placeholder-wrapper"]],null,null,null,null,null)),(t()(),n._11(16777216,null,null,1,null,d)),n._15(12,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._11(16777216,null,null,1,null,f)),n._15(14,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._16(15,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-input-underline mat-form-field-underline"]],null,null,null,null,null)),(t()(),n._16(16,0,null,null,0,"span",[["class","mat-input-ripple mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),(t()(),n._16(17,0,null,null,5,"div",[["class","mat-input-subscript-wrapper mat-form-field-subscript-wrapper"]],null,null,null,null,null)),n._15(18,16384,null,0,o.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),n._11(16777216,null,null,1,null,m)),n._15(20,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),n._11(16777216,null,null,1,null,y)),n._15(22,278528,null,0,o.n,[n.Z,n.U,o.m],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var i=e.component;t(e,7,0,i._prefixChildren.length),t(e,12,0,i._hasFloatingLabel()),t(e,14,0,i._suffixChildren.length),t(e,18,0,i._getDisplayedMessages());t(e,20,0,"error");t(e,22,0,"hint")},function(t,e){var i=e.component;t(e,16,0,"accent"==i.color,"warn"==i.color)})}n._12("mat-input-container, mat-form-field",r.b,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,8,"mat-input-container",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,_,l)),n._15(1,7389184,null,7,r.b,[n.o,n.h,[2,a.j]],null,null),n._35(335544320,1,{_control:0}),n._35(335544320,2,{_placeholderChild:0}),n._35(335544320,3,{_labelChild:0}),n._35(603979776,4,{_errorChildren:1}),n._35(603979776,5,{_hintChildren:1}),n._35(603979776,6,{_prefixChildren:1}),n._35(603979776,7,{_suffixChildren:1})],null,function(t,e){t(e,0,1,[n._28(e,1)._control.errorState,n._28(e,1)._control.errorState,n._28(e,1)._canLabelFloat,n._28(e,1)._shouldLabelFloat(),n._28(e,1)._hideControlPlaceholder(),n._28(e,1)._control.disabled,n._28(e,1)._control.focused,n._28(e,1)._shouldForward("untouched"),n._28(e,1)._shouldForward("touched"),n._28(e,1)._shouldForward("pristine"),n._28(e,1)._shouldForward("dirty"),n._28(e,1)._shouldForward("valid"),n._28(e,1)._shouldForward("invalid"),n._28(e,1)._shouldForward("pending")])})},{color:"color",dividerColor:"dividerColor",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatPlaceholder:"floatPlaceholder",floatLabel:"floatLabel"},{},["[matPrefix]","*","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"])},"v/qN":function(t,e,i){"use strict";i.d(e,"c",function(){return c}),e.f=u,i.d(e,"a",function(){return h}),e.d=p,i.d(e,"b",function(){return d}),e.e=f;var n=i("LMZF"),r=i("697t"),o=i("Un6q"),s=i("l6RC"),a=i("c4k3"),l=i("j5BN"),c=(n._13(r.k,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(512,o.b,o.b,[]),n._25(512,a.n,a.n,[]),n._25(512,s.a,s.a,[]),n._25(256,l.f,!0,[]),n._25(512,l.n,l.n,[[2,l.f]]),n._25(512,r.k,r.k,[])])}),n._14({encapsulation:2,styles:[".mat-table{display:block}.mat-header-row{min-height:56px}.mat-row{min-height:48px}.mat-header-row,.mat-row{display:flex;border-bottom-width:1px;border-bottom-style:solid;align-items:center;padding:0 24px;box-sizing:border-box}.mat-header-row::after,.mat-row::after{display:inline-block;min-height:inherit;content:''}.mat-cell,.mat-header-cell{flex:1;overflow:hidden;word-wrap:break-word}"],data:{}}));function u(t){return n._39(2,[n._35(402653184,1,{_rowPlaceholder:0}),n._35(402653184,2,{_headerRowPlaceholder:0}),(t()(),n._16(2,16777216,null,null,1,null,null,null,null,null,null,null)),n._15(3,16384,[[2,4]],0,a.p,[n.Z],null,null),(t()(),n._16(4,16777216,null,null,1,null,null,null,null,null,null,null)),n._15(5,16384,[[1,4]],0,a.q,[n.Z],null,null)],null,null)}n._12("mat-table",r.j,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,4,"mat-table",[["class","mat-table"]],null,null,null,u,c)),n._15(1,2342912,null,3,r.j,[n.z,n.h,n.o,[8,null]],null,null),n._35(603979776,1,{_contentColumnDefs:1}),n._35(603979776,2,{_contentRowDefs:1}),n._35(335544320,3,{_headerRowDef:0})],function(t,e){t(e,1,0)},null)},{trackBy:"trackBy",dataSource:"dataSource"},{},[]);var h=n._14({encapsulation:2,styles:[],data:{}});function p(t){return n._39(2,[(t()(),n._16(0,16777216,null,null,1,null,null,null,null,null,null,null)),n._15(1,16384,null,0,a.e,[n.Z],null,null)],null,null)}n._12("mat-header-row",r.f,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-header-row",[["class","mat-header-row"],["role","row"]],null,null,null,p,h)),n._15(1,49152,null,0,r.f,[],null,null)],null,null)},{},{},[]);var d=n._14({encapsulation:2,styles:[],data:{}});function f(t){return n._39(2,[(t()(),n._16(0,16777216,null,null,1,null,null,null,null,null,null,null)),n._15(1,16384,null,0,a.e,[n.Z],null,null)],null,null)}n._12("mat-row",r.h,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-row",[["class","mat-row"],["role","row"]],null,null,null,f,d)),n._15(1,49152,null,0,r.h,[],null,null)],null,null)},{},{},[])},v0OU:function(t,e,i){"use strict";(function(t){var n=i("jxpy"),r=i("7WRt"),o=i("CDvF");function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,i)}function c(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=p(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,i),r=(t=a(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|d(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function p(t,e){var i=e.length<0?0:0|d(e.length);t=a(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return U(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var o,s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,i/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var u=-1;for(o=i;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(i+l>a&&(i=a-l),o=i;o>=0;o--){for(var h=!0,p=0;p<l;p++)if(c(t,o+p)!==c(e,p)){h=!1;break}if(h)return o}return-1}function _(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function v(t,e,i,n){return j(z(e,t.length-i),t,i,n)}function b(t,e,i,n){return j(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function x(t,e,i,n){return b(t,e,i,n)}function A(t,e,i,n){return j(U(e),t,i,n)}function w(t,e,i,n){return j(function(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function P(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function E(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,s,a,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=i)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=T));return i}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return c(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,n){return u(e),e<=0?a(t,e):void 0!==i?"string"==typeof n?a(t,e).fill(i,n):a(t,e).fill(i):a(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):(function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,i);case"utf8":case"utf-8":return E(this,e,i);case"ascii":return S(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return P(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}).apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(n,r),u=t.slice(e,i),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return v(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return x(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function S(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function O(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=V(t[o]);return r}function M(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function R(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,i,n,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function D(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function L(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function k(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(t,e,i,n,o){return o||k(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function N(t,e,i,n,o){return o||k(t,0,i,8),r.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;i=new l(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||R(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||I(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);I(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);I(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return F(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return F(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return N(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return N(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},l.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=l.isBuffer(t)?t:z(new l(t,n).toString()),a=s.length;for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function U(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(e,i("GTd5"))},vgc3:function(t,e,i){"use strict";var n=i("LMZF"),r=i("j5BN"),o=i("6Xbx"),s=i("pXwq"),a=i("lI6h"),l=i("qgI0"),c=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var u=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.selector,this.caught))},t}(),h=function(t){function e(e,i,n){t.call(this,e),this.selector=i,this.caught=n}return c(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=void 0;try{i=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(l.a)(this,i))}},e}(a.a),p=i("nihM"),d=i("E9/g"),f=i("qLnt"),m=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var g=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new y(t,this.callback))},t}(),y=function(t){function e(e,i){t.call(this,e),this.add(new f.a(i))}return m(e,t),e}(d.a),_=i("qqDE"),v=i("eIqN"),b=i("9iV4"),x=i("RyBE"),A=i("Jsyr"),w=i("GZB0"),P=i("AP4T"),E=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},T=function(t){function e(e,i){t.call(this),this.error=e,this.scheduler=i}return E(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.error;t.subscriber.error(e)},e.prototype._subscribe=function(t){var i=this.error,n=this.scheduler;if(t.syncErrorThrowable=!0,n)return n.schedule(e.dispatch,0,{error:i,subscriber:t});t.error(i)},e}(P.a).create,S=i("Un6q");function C(t){return Error('Unable to find icon with the name "'+t+'"')}function O(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \""+t+'".')}i.d(e,"c",function(){return B}),i.d(e,"b",function(){return N}),i.d(e,"d",function(){return R}),i.d(e,"a",function(){return I});var M=function(){return function(t){this.url=t,this.svgElement=null}}(),R=function(){function t(t,e,i){this._httpClient=t,this._sanitizer=e,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=i}return t.prototype.addSvgIcon=function(t,e){return this.addSvgIconInNamespace("",t,e)},t.prototype.addSvgIconInNamespace=function(t,e,i){var n=k(t,e);return this._svgIconConfigs.set(n,new M(i)),this},t.prototype.addSvgIconSet=function(t){return this.addSvgIconSetInNamespace("",t)},t.prototype.addSvgIconSetInNamespace=function(t,e){var i=new M(e),n=this._iconSetConfigs.get(t);return n?n.push(i):this._iconSetConfigs.set(t,[i]),this},t.prototype.registerFontClassAlias=function(t,e){return void 0===e&&(e=t),this._fontCssClassesByAlias.set(t,e),this},t.prototype.classNameForFontAlias=function(t){return this._fontCssClassesByAlias.get(t)||t},t.prototype.setDefaultFontSetClass=function(t){return this._defaultFontSetClass=t,this},t.prototype.getDefaultFontSetClass=function(){return this._defaultFontSetClass},t.prototype.getSvgIconFromUrl=function(t){var e=this,i=this._sanitizer.sanitize(n.Q.RESOURCE_URL,t);if(!i)throw O(t);var r=this._cachedIconsByUrl.get(i);return r?Object(w.a)(L(r)):this._loadSvgIconFromConfig(new M(t)).pipe(Object(p.a)(function(t){return e._cachedIconsByUrl.set(i,t)}),Object(_.a)(function(t){return L(t)}))},t.prototype.getNamedSvgIcon=function(t,e){void 0===e&&(e="");var i=k(e,t),n=this._svgIconConfigs.get(i);if(n)return this._getSvgFromConfig(n);var r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):T(C(i))},t.prototype._getSvgFromConfig=function(t){return t.svgElement?Object(w.a)(L(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(Object(p.a)(function(e){return t.svgElement=e}),Object(_.a)(function(t){return L(t)}))},t.prototype._getSvgFromIconSetConfigs=function(t,e){var i=this,r=this._extractIconWithNameFromAnySet(t,e);if(r)return Object(w.a)(r);var o=e.filter(function(t){return!t.svgElement}).map(function(t){return i._loadSvgIconSetFromConfig(t).pipe((e=function(e){var r=i._sanitizer.sanitize(n.Q.RESOURCE_URL,t.url);return console.log("Loading icon set URL: "+r+" failed: "+e),Object(w.a)(null)},function(t){var i=new u(e),n=t.lift(i);return i.caught=n}));var e});return Object(A.a)(o).pipe(Object(_.a)(function(){var n=i._extractIconWithNameFromAnySet(t,e);if(!n)throw C(t);return n}))},t.prototype._extractIconWithNameFromAnySet=function(t,e){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.svgElement){var r=this._extractSvgIconFromSet(n.svgElement,t);if(r)return r}}return null},t.prototype._loadSvgIconFromConfig=function(t){var e=this;return this._fetchUrl(t.url).pipe(Object(_.a)(function(t){return e._createSvgElementForSingleIcon(t)}))},t.prototype._loadSvgIconSetFromConfig=function(t){var e=this;return t.svgElement?Object(w.a)(t.svgElement):this._fetchUrl(t.url).pipe(Object(_.a)(function(i){return t.svgElement||(t.svgElement=e._svgElementFromString(i)),t.svgElement}))},t.prototype._createSvgElementForSingleIcon=function(t){var e=this._svgElementFromString(t);return this._setSvgAttributes(e),e},t.prototype._extractSvgIconFromSet=function(t,e){var i=t.querySelector("#"+e);if(!i)return null;var n=i.cloneNode(!0);if(n.id="","svg"===n.nodeName.toLowerCase())return this._setSvgAttributes(n);if("symbol"===n.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(n));var r=this._svgElementFromString("<svg></svg>");return r.appendChild(n),this._setSvgAttributes(r)},t.prototype._svgElementFromString=function(t){if(this._document||"undefined"!=typeof document){var e=(this._document||document).createElement("DIV");e.innerHTML=t;var i=e.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}throw new Error("MatIconRegistry could not resolve document.")},t.prototype._toSvgElement=function(t){for(var e=this._svgElementFromString("<svg></svg>"),i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e},t.prototype._setSvgAttributes=function(t){return t.getAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),t},t.prototype._fetchUrl=function(t){var e=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");var i=this._sanitizer.sanitize(n.Q.RESOURCE_URL,t);if(!i)throw O(t);var r=this._inProgressUrlFetches.get(i);if(r)return r;var o,s=this._httpClient.get(i,{responseType:"text"}).pipe((o=function(){return e._inProgressUrlFetches.delete(i)},function(t){return t.lift(new g(o))}),Object(v.a)());return this._inProgressUrlFetches.set(i,s),s},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:b.c,decorators:[{type:n.G}]},{type:x.c},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[S.c]}]}]},t}();function I(t,e,i,n){return t||new R(e,i,n)}var D={provide:R,deps:[[new n.G,new n.T,R],[new n.G,b.c],x.c,[new n.G,S.c]],useFactory:I};function L(t){return t.cloneNode(!0)}function k(t,e){return t+":"+e}var F=function(){return function(t){this._elementRef=t}}(),N=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._iconRegistry=i,n||e.nativeElement.setAttribute("aria-hidden","true"),r}return Object(o.b)(e,t),Object.defineProperty(e.prototype,"fontSet",{get:function(){return this._fontSet},set:function(t){this._fontSet=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(t){this._fontIcon=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),e.prototype._splitIconName=function(t){if(!t)return["",""];var e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'+t+'"')}},e.prototype.ngOnChanges=function(t){var e=this;if(t.svgIcon)if(this.svgIcon){var i=this._splitIconName(this.svgIcon),n=i[0],r=i[1];this._iconRegistry.getNamedSvgIcon(r,n).pipe(Object(s.a)(1)).subscribe(function(t){return e._setSvgElement(t)},function(t){return console.log("Error retrieving icon: "+t.message)})}else this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype.ngOnInit=function(){this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype._usingFontIcon=function(){return!this.svgIcon},e.prototype._setSvgElement=function(t){this._clearSvgElement(),this._elementRef.nativeElement.appendChild(t)},e.prototype._clearSvgElement=function(){for(var t=this._elementRef.nativeElement,e=t.childNodes.length,i=0;i<e;i++)t.removeChild(t.childNodes[i])},e.prototype._updateFontIconClasses=function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}},e.prototype._cleanupFontValue=function(t){return"string"==typeof t?t.trim().split(" ")[0]:t},e.decorators=[{type:n.j,args:[{template:"<ng-content></ng-content>",selector:"mat-icon",exportAs:"matIcon",styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}"],inputs:["color"],host:{role:"img",class:"mat-icon"},encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.OnPush}]}],e.ctorParameters=function(){return[{type:n.o},{type:R},{type:void 0,decorators:[{type:n.f,args:["aria-hidden"]}]}]},e.propDecorators={svgIcon:[{type:n.y}],fontSet:[{type:n.y}],fontIcon:[{type:n.y}]},e}(Object(r.C)(F)),B=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.n],exports:[N,r.n],declarations:[N],providers:[D]}]}],t.ctorParameters=function(){return[]},t}()},w24y:function(t,e,i){"use strict";i.d(e,"i",function(){return B}),i.d(e,"a",function(){return S}),i.d(e,"b",function(){return C}),i.d(e,"c",function(){return O}),i.d(e,"d",function(){return R}),i.d(e,"g",function(){return w}),i.d(e,"f",function(){return D}),i.d(e,"k",function(){return L}),i.d(e,"h",function(){return k}),i.d(e,"e",function(){return F}),i.d(e,"j",function(){return E});var n=i("LMZF"),r=i("Un6q"),o=i("OFGE"),s=i("CZgk"),a=i("8Xfy"),l=i("j5BN"),c=i("6Xbx"),u=i("l6RC"),h=i("3kHg"),p=i("GZB0"),d=i("fNvg"),f=i("TO51"),m=i("fAeS"),g=i("rT01"),y=i("LaOa"),_=i("pXwq"),v=i("qLnt"),b=function(){return function(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.direction="ltr",this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0,this.closeOnNavigation=!0}}(),x={slideDialog:Object(m.m)("slideDialog",[Object(m.j)("enter",Object(m.k)({transform:"none",opacity:1})),Object(m.j)("void",Object(m.k)({transform:"translate3d(0, 25%, 0) scale(0.9)",opacity:0})),Object(m.j)("exit",Object(m.k)({transform:"translate3d(0, 25%, 0)",opacity:0})),Object(m.l)("* => *",Object(m.e)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function A(){throw Error("Attempting to attach dialog content after content is already attached")}var w=function(t){function e(e,i,r,o){var s=t.call(this)||this;return s._elementRef=e,s._focusTrapFactory=i,s._changeDetectorRef=r,s._document=o,s._elementFocusedBeforeDialogWasOpened=null,s._state="enter",s._animationStateChanged=new n.r,s._ariaLabelledBy=null,s}return Object(c.b)(e,t),e.prototype.attachComponentPortal=function(t){return this._portalOutlet.hasAttached()&&A(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)},e.prototype.attachTemplatePortal=function(t){return this._portalOutlet.hasAttached()&&A(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)},e.prototype._trapFocus=function(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady()},e.prototype._restoreFocus=function(){var t=this._elementFocusedBeforeDialogWasOpened;t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()},e.prototype._savePreviouslyFocusedElement=function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()}))},e.prototype._onAnimationDone=function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)},e.prototype._onAnimationStart=function(t){this._animationStateChanged.emit(t)},e.prototype._startExitAnimation=function(){this._state="exit",this._changeDetectorRef.markForCheck()},e.decorators=[{type:n.j,args:[{selector:"mat-dialog-container",template:"<ng-template cdkPortalOutlet></ng-template>",styles:[".mat-dialog-container{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);display:block;padding:24px;border-radius:2px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%}@media screen and (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch;-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:12px 0;display:flex;flex-wrap:wrap}.mat-dialog-actions:last-child{margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button+.mat-button,.mat-dialog-actions .mat-button+.mat-raised-button,.mat-dialog-actions .mat-raised-button+.mat-button,.mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-button+.mat-raised-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:0;margin-right:8px}"],encapsulation:n._0.None,preserveWhitespaces:!1,changeDetection:n.g.Default,animations:[x.slideDialog],host:{class:"mat-dialog-container",tabindex:"-1","[attr.id]":"_id","[attr.role]":"_config?.role","[attr.aria-labelledby]":"_config?.ariaLabel ? null : _ariaLabelledBy","[attr.aria-label]":"_config?.ariaLabel","[attr.aria-describedby]":"_config?.ariaDescribedBy || null","[@slideDialog]":"_state","(@slideDialog.start)":"_onAnimationStart($event)","(@slideDialog.done)":"_onAnimationDone($event)"}}]}],e.ctorParameters=function(){return[{type:n.o},{type:a.i},{type:n.h},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[r.c]}]}]},e.propDecorators={_portalOutlet:[{type:n.X,args:[s.c]}]},e}(s.a),P=0,E=function(){function t(t,e,i,n){void 0===n&&(n="mat-dialog-"+P++);var r=this;this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpen=new f.a,this._afterClosed=new f.a,this._beforeClose=new f.a,this._locationChanges=v.a.EMPTY,e._id=n,e._animationStateChanged.pipe(Object(y.a)(function(t){return"done"===t.phaseName&&"enter"===t.toState}),Object(_.a)(1)).subscribe(function(){r._afterOpen.next(),r._afterOpen.complete()}),e._animationStateChanged.pipe(Object(y.a)(function(t){return"done"===t.phaseName&&"exit"===t.toState}),Object(_.a)(1)).subscribe(function(){r._overlayRef.dispose(),r._locationChanges.unsubscribe(),r._afterClosed.next(r._result),r._afterClosed.complete(),r.componentInstance=null}),t.keydownEvents().pipe(Object(y.a)(function(t){return t.keyCode===g.g&&!r.disableClose})).subscribe(function(){return r.close()}),i&&(this._locationChanges=i.subscribe(function(){r._containerInstance._config.closeOnNavigation&&r.close()}))}return t.prototype.close=function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Object(y.a)(function(t){return"start"===t.phaseName}),Object(_.a)(1)).subscribe(function(){e._beforeClose.next(t),e._beforeClose.complete(),e._overlayRef.detachBackdrop()}),this._containerInstance._startExitAnimation()},t.prototype.afterOpen=function(){return this._afterOpen.asObservable()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t.prototype.beforeClose=function(){return this._beforeClose.asObservable()},t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updatePosition=function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this},t.prototype.updateSize=function(t,e){return void 0===t&&(t="auto"),void 0===e&&(e="auto"),this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t}(),T=new n.w("MatDialogData"),S=new n.w("mat-dialog-default-options"),C=new n.w("mat-dialog-scroll-strategy");function O(t){return function(){return t.scrollStrategies.block()}}var M={provide:C,deps:[o.c],useFactory:O},R=function(){function t(t,e,i,n,r,o,s){var a=this;this._overlay=t,this._injector=e,this._location=i,this._defaultOptions=n,this._scrollStrategy=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new f.a,this._afterOpenAtThisLevel=new f.a,this._ariaHiddenElements=new Map,this.afterAllClosed=Object(h.a)(function(){return a.openDialogs.length?a._afterAllClosed:a._afterAllClosed.pipe(Object(d.a)(void 0))})}return Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpen",{get:function(){return this._parentDialog?this._parentDialog.afterOpen:this._afterOpenAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel},enumerable:!0,configurable:!0}),t.prototype.open=function(t,e){var i=this;if((e=function(t,e){return Object(c.a)({},e,t)}(e,this._defaultOptions||new b)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var n=this._createOverlay(e),r=this._attachDialogContainer(n,e),o=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(function(){return i._removeOpenDialog(o)}),this.afterOpen.next(o),o},t.prototype.closeAll=function(){for(var t=this.openDialogs.length;t--;)this.openDialogs[t].close()},t.prototype.getDialogById=function(t){return this.openDialogs.find(function(e){return e.id===t})},t.prototype._createOverlay=function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)},t.prototype._getOverlayConfig=function(t){var e=new o.d({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight});return t.backdropClass&&(e.backdropClass=t.backdropClass),e},t.prototype._attachDialogContainer=function(t,e){var i=new s.d(w,e.viewContainerRef),n=t.attach(i);return n.instance._config=e,n.instance},t.prototype._attachDialogContent=function(t,e,i,r){var o=new E(i,e,this._location,r.id);if(r.hasBackdrop&&i.backdropClick().subscribe(function(){o.disableClose||o.close()}),t instanceof n.U)e.attachTemplatePortal(new s.h(t,null,{$implicit:r.data,dialogRef:o}));else{var a=this._createInjector(r,o,e),l=e.attachComponentPortal(new s.d(t,void 0,a));o.componentInstance=l.instance}return o.updateSize(r.width,r.height).updatePosition(r.position),o},t.prototype._createInjector=function(t,e,i){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=new WeakMap;return r.set(E,e),r.set(w,i),r.set(T,t.data),r.set(u.c,{value:t.direction,change:Object(p.a)()}),new s.f(n||this._injector,r)},t.prototype._removeOpenDialog=function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach(function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))},t.prototype._hideNonDialogContentFromAssistiveTechnology=function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,i=e.length-1;i>-1;i--){var n=e[i];n===t||"SCRIPT"===n.nodeName||"STYLE"===n.nodeName||n.hasAttribute("aria-live")||(this._ariaHiddenElements.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:o.c},{type:n.x},{type:r.f,decorators:[{type:n.G}]},{type:void 0,decorators:[{type:n.G},{type:n.u,args:[S]}]},{type:void 0,decorators:[{type:n.u,args:[C]}]},{type:t,decorators:[{type:n.G},{type:n.T}]},{type:o.e}]},t}();var I=0,D=function(){function t(t,e,i){this.dialogRef=t,this._elementRef=e,this._dialog=i,this.ariaLabel="Close dialog"}return t.prototype.ngOnInit=function(){this.dialogRef||(this.dialogRef=N(this._elementRef,this._dialog.openDialogs))},t.prototype.ngOnChanges=function(t){var e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)},t.decorators=[{type:n.n,args:[{selector:"button[mat-dialog-close], button[matDialogClose]",exportAs:"matDialogClose",host:{"(click)":"dialogRef.close(dialogResult)","[attr.aria-label]":"ariaLabel",type:"button"}}]}],t.ctorParameters=function(){return[{type:E,decorators:[{type:n.G}]},{type:n.o},{type:R}]},t.propDecorators={ariaLabel:[{type:n.y,args:["aria-label"]}],dialogResult:[{type:n.y,args:["mat-dialog-close"]}],_matDialogClose:[{type:n.y,args:["matDialogClose"]}]},t}(),L=function(){function t(t,e,i){this._dialogRef=t,this._elementRef=e,this._dialog=i,this.id="mat-dialog-title-"+I++}return t.prototype.ngOnInit=function(){var t=this;this._dialogRef||(this._dialogRef=N(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(function(){var e=t._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=t.id)})},t.decorators=[{type:n.n,args:[{selector:"[mat-dialog-title], [matDialogTitle]",exportAs:"matDialogTitle",host:{class:"mat-dialog-title","[id]":"id"}}]}],t.ctorParameters=function(){return[{type:E,decorators:[{type:n.G}]},{type:n.o},{type:R}]},t.propDecorators={id:[{type:n.y}]},t}(),k=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-dialog-content], mat-dialog-content, [matDialogContent]",host:{class:"mat-dialog-content"}}]}],t.ctorParameters=function(){return[]},t}(),F=function(){function t(){}return t.decorators=[{type:n.n,args:[{selector:"[mat-dialog-actions], mat-dialog-actions, [matDialogActions]",host:{class:"mat-dialog-actions"}}]}],t.ctorParameters=function(){return[]},t}();function N(t,e){for(var i=t.nativeElement.parentElement;i&&!i.classList.contains("mat-dialog-container");)i=i.parentElement;return i?e.find(function(t){return t.id===i.id}):null}var B=function(){function t(){}return t.decorators=[{type:n.C,args:[{imports:[r.b,o.g,s.g,a.a,l.n],exports:[w,D,L,k,F,l.n],declarations:[w,D,L,F,k],providers:[R,M],entryComponents:[w]}]}],t.ctorParameters=function(){return[]},t}()},wC3u:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),e.b=c;var n=i("LMZF"),r=i("oXAn"),o=i("Un6q"),s=i("c4k3"),a=(n._13(r.e,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(5120,r.d,r.a,[[3,r.d]]),n._25(512,o.b,o.b,[]),n._25(512,r.e,r.e,[])])}),n._14({encapsulation:2,styles:[".mat-sort-header-container{display:flex;cursor:pointer}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-button{border:none;background:0 0;display:flex;align-items:center;padding:0;cursor:inherit;outline:0;font:inherit;color:currentColor}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;margin:0 0 0 6px;position:relative;display:flex}.mat-sort-header-position-before .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],data:{animation:[{type:7,name:"indicator",definitions:[{type:0,name:"active-asc, asc",styles:{type:6,styles:{transform:"translateY(0px)"},offset:null},options:void 0},{type:0,name:"active-desc, desc",styles:{type:6,styles:{transform:"translateY(10px)"},offset:null},options:void 0},{type:1,expr:"active-asc <=> active-desc",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"leftPointer",definitions:[{type:0,name:"active-asc, asc",styles:{type:6,styles:{transform:"rotate(-45deg)"},offset:null},options:void 0},{type:0,name:"active-desc, desc",styles:{type:6,styles:{transform:"rotate(45deg)"},offset:null},options:void 0},{type:1,expr:"active-asc <=> active-desc",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"rightPointer",definitions:[{type:0,name:"active-asc, asc",styles:{type:6,styles:{transform:"rotate(45deg)"},offset:null},options:void 0},{type:0,name:"active-desc, desc",styles:{type:6,styles:{transform:"rotate(-45deg)"},offset:null},options:void 0},{type:1,expr:"active-asc <=> active-desc",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"arrowOpacity",definitions:[{type:0,name:"desc-to-active, asc-to-active, active",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:0,name:"desc-to-hint, asc-to-hint, hint",styles:{type:6,styles:{opacity:.54},offset:null},options:void 0},{type:0,name:"hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:1,expr:"* => asc, * => desc, * => active, * => hint",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"* <=> *",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"arrowPosition",definitions:[{type:1,expr:"* => desc-to-hint, * => desc-to-active",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"translateY(-25%)"},offset:null},{type:6,styles:{transform:"translateY(0)"},offset:null}]},timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null},{type:1,expr:"* => hint-to-desc, * => active-to-desc",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"translateY(0)"},offset:null},{type:6,styles:{transform:"translateY(25%)"},offset:null}]},timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null},{type:1,expr:"* => asc-to-hint, * => asc-to-active",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"translateY(25%)"},offset:null},{type:6,styles:{transform:"translateY(0)"},offset:null}]},timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null},{type:1,expr:"* => hint-to-asc, * => active-to-asc",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"translateY(0)"},offset:null},{type:6,styles:{transform:"translateY(-25%)"},offset:null}]},timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null},{type:0,name:"desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",styles:{type:6,styles:{transform:"translateY(0)"},offset:null},options:void 0},{type:0,name:"hint-to-desc, active-to-desc, desc",styles:{type:6,styles:{transform:"translateY(-25%)"},offset:null},options:void 0},{type:0,name:"hint-to-asc, active-to-asc, asc",styles:{type:6,styles:{transform:"translateY(25%)"},offset:null},options:void 0}],options:{}},{type:7,name:"allowChildren",definitions:[{type:1,expr:"* <=> *",animation:[{type:11,selector:"@*",animation:{type:9,options:null},options:{optional:!0}}],options:null}],options:{}}]}}));function l(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"span",[["class","cdk-visually-hidden"]],null,null,null,null,null)),(t()(),n._37(1,null,["\xa0",""]))],null,function(t,e){var i=e.component;t(e,1,0,i._intl.sortDescriptionLabel(i.id,i._sort.direction))})}function c(t){return n._39(2,[(t()(),n._16(0,0,null,null,8,"div",[["class","mat-sort-header-container"]],[[2,"mat-sort-header-sorted",null],[2,"mat-sort-header-position-before",null]],null,null,null,null)),(t()(),n._16(1,0,null,null,1,"button",[["class","mat-sort-header-button"],["type","button"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"focus"],[null,"blur"]],function(t,e,i){var n=!0,r=t.component;"focus"===e&&(n=!1!==r._setIndicatorHintVisible(!0)&&n);"blur"===e&&(n=!1!==r._setIndicatorHintVisible(!1)&&n);return n},null,null)),n._27(null,0),(t()(),n._16(3,0,null,null,5,"div",[["class","mat-sort-header-arrow"]],[[24,"@arrowOpacity",0],[24,"@arrowPosition",0],[24,"@allowChildren",0]],[[null,"@arrowPosition.start"],[null,"@arrowPosition.done"]],function(t,e,i){var n=!0,r=t.component;"@arrowPosition.start"===e&&(n=!1!=(r._disableViewStateAnimation=!0)&&n);"@arrowPosition.done"===e&&(n=!1!=(r._disableViewStateAnimation=!1)&&n);return n},null,null)),(t()(),n._16(4,0,null,null,0,"div",[["class","mat-sort-header-stem"]],null,null,null,null,null)),(t()(),n._16(5,0,null,null,3,"div",[["class","mat-sort-header-indicator"]],[[24,"@indicator",0]],null,null,null,null)),(t()(),n._16(6,0,null,null,0,"div",[["class","mat-sort-header-pointer-left"]],[[24,"@leftPointer",0]],null,null,null,null)),(t()(),n._16(7,0,null,null,0,"div",[["class","mat-sort-header-pointer-right"]],[[24,"@rightPointer",0]],null,null,null,null)),(t()(),n._16(8,0,null,null,0,"div",[["class","mat-sort-header-pointer-middle"]],null,null,null,null,null)),(t()(),n._11(16777216,null,null,1,null,l)),n._15(10,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,10,0,e.component._isSorted())},function(t,e){var i=e.component;t(e,0,0,i._isSorted(),"before"==i.arrowPosition),t(e,1,0,i._isDisabled()||null,i._intl.sortButtonLabel(i.id)),t(e,3,0,i._getArrowViewState(),i._getArrowViewState(),i._getArrowDirectionState()),t(e,5,0,i._getArrowDirectionState()),t(e,6,0,i._getArrowDirectionState()),t(e,7,0,i._getArrowDirectionState())})}n._12("[mat-sort-header]",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"div",[["mat-sort-header",""]],[[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],function(t,e,i){var r=!0;return"click"===e&&(r=!1!==n._28(t,1)._handleClick()&&r),"mouseenter"===e&&(r=!1!==n._28(t,1)._setIndicatorHintVisible(!0)&&r),"longpress"===e&&(r=!1!==n._28(t,1)._setIndicatorHintVisible(!0)&&r),"mouseleave"===e&&(r=!1!==n._28(t,1)._setIndicatorHintVisible(!1)&&r),r},c,a)),n._15(1,245760,null,0,r.c,[r.d,n.h,[2,r.b],[2,s.f]],{id:[0,"id"]},null)],function(t,e){t(e,1,0,"")},function(t,e){t(e,0,0,n._28(e,1)._isDisabled())})},{disabled:"disabled",id:"mat-sort-header",arrowPosition:"arrowPosition",start:"start",disableClear:"disableClear"},{},["*"])},wHgO:function(t,e,i){t.exports=i("rOzH").EventEmitter},wP3s:function(t,e,i){"use strict";e.a=function(t,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY);return function(n){return"number"==typeof e&&(i=e,e=null),n.lift(new s(t,e,i))}};var n=i("qgI0"),r=i("lI6h"),o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var s=function(){function t(t,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector,this.concurrent))},t}(),a=function(t){function e(e,i,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.project=i,this.resultSelector=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){this.add(Object(n.a)(this,t,e,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,n,r){this.resultSelector?this._notifyResultSelector(t,e,i,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,i,n){var r;try{r=this.resultSelector(t,e,i,n)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(r.a)},wclm:function(t,e,i){"use strict";var n=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();i.d(e,"a",function(){return o});var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(n)},"wu+X":function(t,e,i){"use strict";i.d(e,"b",function(){return p}),e.c=_,i.d(e,"a",function(){return P}),e.d=T;var n=i("LMZF"),r=i("ZFRd"),o=i("Un6q"),s=i("l6RC"),a=i("V8+5"),l=i("ppgG"),c=i("4jwp"),u=i("j5BN"),h=i("CZgk"),p=(n._13(r.j,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(4608,o.k,o.j,[n.B,[2,o.r]]),n._25(6144,s.b,null,[o.c]),n._25(4608,s.c,s.c,[[2,s.b]]),n._25(4608,a.a,a.a,[]),n._25(4608,l.b,l.b,[]),n._25(5120,c.d,c.b,[[3,c.d],n.F,a.a]),n._25(5120,c.g,c.f,[[3,c.g],a.a,n.F]),n._25(512,o.b,o.b,[]),n._25(512,s.a,s.a,[]),n._25(256,u.f,!0,[]),n._25(512,u.n,u.n,[[2,u.f]]),n._25(512,h.g,h.g,[]),n._25(512,a.b,a.b,[]),n._25(512,u.y,u.y,[]),n._25(512,l.c,l.c,[]),n._25(512,c.c,c.c,[]),n._25(512,r.j,r.j,[])])}),n._14({encapsulation:2,styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-label{padding:0 12px}}@media (max-width:959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs] .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height .5s cubic-bezier(.35,0,.25,1)}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],data:{}}));function d(t){return n._39(0,[(t()(),n._11(0,null,null,0))],null,null)}function f(t){return n._39(0,[(t()(),n._11(16777216,null,null,1,null,d)),n._15(1,212992,null,0,h.c,[n.k,n.Z],{portal:[0,"portal"]},null),(t()(),n._11(0,null,null,0))],function(t,e){t(e,1,0,e.parent.context.$implicit.templateLabel)},null)}function m(t){return n._39(0,[(t()(),n._37(0,null,["",""]))],null,function(t,e){t(e,0,0,e.parent.context.$implicit.textLabel)})}function g(t){return n._39(0,[(t()(),n._16(0,0,null,null,6,"div",[["class","mat-tab-label mat-ripple"],["mat-ripple",""],["matTabLabelWrapper",""],["role","tab"]],[[8,"id",0],[1,"tabIndex",0],[1,"aria-controls",0],[1,"aria-selected",0],[2,"mat-tab-label-active",null],[2,"mat-ripple-unbounded",null],[2,"mat-tab-disabled",null]],[[null,"click"]],function(t,e,i){var r=!0,o=t.component;"click"===e&&(r=!1!==o._handleClick(t.context.$implicit,n._28(t.parent,2),t.context.index)&&r);return r},null,null)),n._15(1,212992,null,0,u.x,[n.o,n.F,a.a,[2,u.m]],{disabled:[0,"disabled"]},null),n._15(2,16384,[[2,4]],0,r.h,[n.o],{disabled:[0,"disabled"]},null),(t()(),n._11(16777216,null,null,1,null,f)),n._15(4,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null),(t()(),n._11(16777216,null,null,1,null,m)),n._15(6,16384,null,0,o.i,[n.Z,n.U],{ngIf:[0,"ngIf"]},null)],function(t,e){var i=e.component;t(e,1,0,e.context.$implicit.disabled||i.disableRipple),t(e,2,0,e.context.$implicit.disabled),t(e,4,0,e.context.$implicit.templateLabel),t(e,6,0,!e.context.$implicit.templateLabel)},function(t,e){var i=e.component;t(e,0,0,i._getTabLabelId(e.context.index),i._getTabIndex(e.context.$implicit,e.context.index),i._getTabContentId(e.context.index),i.selectedIndex==e.context.index,i.selectedIndex==e.context.index,n._28(e,1).unbounded,n._28(e,2).disabled)})}function y(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-tab-body",[["class","mat-tab-body"],["role","tabpanel"]],[[8,"id",0],[1,"aria-labelledby",0],[2,"mat-tab-body-active",null]],[[null,"_onCentered"],[null,"_onCentering"]],function(t,e,i){var n=!0,r=t.component;"_onCentered"===e&&(n=!1!==r._removeTabBodyWrapperHeight()&&n);"_onCentering"===e&&(n=!1!==r._setTabBodyWrapperHeight(i)&&n);return n},x,v)),n._15(1,114688,null,0,r.c,[n.o,[2,s.c]],{_content:[0,"_content"],position:[1,"position"],origin:[2,"origin"]},{_onCentering:"_onCentering",_onCentered:"_onCentered"})],function(t,e){t(e,1,0,e.context.$implicit.content,e.context.$implicit.position,e.context.$implicit.origin)},function(t,e){var i=e.component;t(e,0,0,i._getTabContentId(e.context.index),i._getTabLabelId(e.context.index),i.selectedIndex==e.context.index)})}function _(t){return n._39(2,[n._35(402653184,1,{_tabBodyWrapper:0}),(t()(),n._16(1,0,null,null,4,"mat-tab-header",[["class","mat-tab-header"]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null]],[[null,"indexFocused"],[null,"selectFocusedIndex"]],function(t,e,i){var n=!0,r=t.component;"indexFocused"===e&&(n=!1!==r._focusChanged(i)&&n);"selectFocusedIndex"===e&&(n=!1!==(r.selectedIndex=i)&&n);return n},w,A)),n._15(2,3325952,[["tabHeader",4]],1,r.f,[n.o,n.h,c.g,[2,s.c]],{disableRipple:[0,"disableRipple"],selectedIndex:[1,"selectedIndex"]},{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}),n._35(603979776,2,{_labelWrappers:1}),(t()(),n._11(16777216,null,0,1,null,g)),n._15(5,802816,null,0,o.h,[n.Z,n.U,n.z],{ngForOf:[0,"ngForOf"]},null),(t()(),n._16(6,0,[[1,0],["tabBodyWrapper",1]],null,2,"div",[["class","mat-tab-body-wrapper"]],null,null,null,null,null)),(t()(),n._11(16777216,null,null,1,null,y)),n._15(8,802816,null,0,o.h,[n.Z,n.U,n.z],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var i=e.component;t(e,2,0,i.disableRipple,i.selectedIndex),t(e,5,0,i._tabs),t(e,8,0,i._tabs)},function(t,e){t(e,1,0,n._28(e,2)._showPaginationControls,"rtl"==n._28(e,2)._getLayoutDirection())})}n._12("mat-tab-group",r.e,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,"mat-tab-group",[["class","mat-tab-group"]],[[2,"mat-tab-group-dynamic-height",null],[2,"mat-tab-group-inverted-header",null]],null,null,_,p)),n._15(1,3325952,null,1,r.e,[n.o,n.h],null,null),n._35(603979776,1,{_tabs:1})],null,function(t,e){t(e,0,0,n._28(e,1).dynamicHeight,"below"===n._28(e,1).headerPosition)})},{color:"color",disableRipple:"disableRipple",dynamicHeight:"dynamicHeight",_dynamicHeightDeprecated:"mat-dynamic-height",selectedIndex:"selectedIndex",headerPosition:"headerPosition",backgroundColor:"backgroundColor"},{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange",selectChange:"selectChange"},[]);var v=n._14({encapsulation:2,styles:[".mat-tab-body-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}"],data:{animation:[{type:7,name:"translateTab",definitions:[{type:0,name:"center, void, left-origin-center, right-origin-center",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:0,name:"left",styles:{type:6,styles:{transform:"translate3d(-100%, 0, 0)"},offset:null},options:void 0},{type:0,name:"right",styles:{type:6,styles:{transform:"translate3d(100%, 0, 0)"},offset:null},options:void 0},{type:1,expr:"* => left, * => right, left => center, right => center",animation:{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"},options:null},{type:1,expr:"void => left-origin-center",animation:[{type:6,styles:{transform:"translate3d(-100%, 0, 0)"},offset:null},{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"}],options:null},{type:1,expr:"void => right-origin-center",animation:[{type:6,styles:{transform:"translate3d(100%, 0, 0)"},offset:null},{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"}],options:null}],options:{}}]}});function b(t){return n._39(0,[(t()(),n._11(0,null,null,0))],null,null)}function x(t){return n._39(2,[(t()(),n._16(0,0,[["content",1]],null,2,"div",[["class","mat-tab-body-content"]],[[24,"@translateTab",0]],[[null,"@translateTab.start"],[null,"@translateTab.done"]],function(t,e,i){var n=!0,r=t.component;"@translateTab.start"===e&&(n=!1!==r._onTranslateTabStarted(i)&&n);"@translateTab.done"===e&&(n=!1!==r._onTranslateTabComplete(i)&&n);return n},null,null)),(t()(),n._11(16777216,null,null,1,null,b)),n._15(2,212992,null,0,r.d,[n.k,n.Z,r.c],null,null)],function(t,e){t(e,2,0)},function(t,e){t(e,0,0,e.component._position)})}n._12("mat-tab-body",r.c,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-tab-body",[["class","mat-tab-body"]],null,null,null,x,v)),n._15(1,114688,null,0,r.c,[n.o,[2,s.c]],null,null)],function(t,e){t(e,1,0)},null)},{_content:"content",position:"position",origin:"origin"},{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},[]);var A=n._14({encapsulation:2,styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-label{min-width:72px}}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.mat-tab-header-pagination{position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-pagination-after,.mat-tab-header-rtl .mat-tab-header-pagination-before{padding-right:4px}.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:'';height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list{flex-grow:1;position:relative;transition:transform .5s cubic-bezier(.35,0,.25,1)}.mat-tab-labels{display:flex}"],data:{}});function w(t){return n._39(2,[n._35(402653184,1,{_inkBar:0}),n._35(402653184,2,{_tabListContainer:0}),n._35(402653184,3,{_tabList:0}),(t()(),n._16(3,0,null,null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r._scrollHeader("before")&&n);return n},null,null)),n._15(4,212992,null,0,u.x,[n.o,n.F,a.a,[2,u.m]],{disabled:[0,"disabled"]},null),(t()(),n._16(5,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null)),(t()(),n._16(6,0,[[2,0],["tabListContainer",1]],null,6,"div",[["class","mat-tab-label-container"]],null,[[null,"keydown"]],function(t,e,i){var n=!0,r=t.component;"keydown"===e&&(n=!1!==r._handleKeydown(i)&&n);return n},null,null)),(t()(),n._16(7,0,[[3,0],["tabList",1]],null,5,"div",[["class","mat-tab-list"],["role","tablist"]],null,[[null,"cdkObserveContent"]],function(t,e,i){var n=!0,r=t.component;"cdkObserveContent"===e&&(n=!1!==r._onContentChanges()&&n);return n},null,null)),n._15(8,1720320,null,0,l.a,[l.b,n.o,n.F],null,{event:"cdkObserveContent"}),(t()(),n._16(9,0,null,null,1,"div",[["class","mat-tab-labels"]],null,null,null,null,null)),n._27(null,0),(t()(),n._16(11,0,null,null,1,"mat-ink-bar",[["class","mat-ink-bar"]],null,null,null,null,null)),n._15(12,16384,[[1,4]],0,r.a,[n.o,n.F],null,null),(t()(),n._16(13,0,null,null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"]],function(t,e,i){var n=!0,r=t.component;"click"===e&&(n=!1!==r._scrollHeader("after")&&n);return n},null,null)),n._15(14,212992,null,0,u.x,[n.o,n.F,a.a,[2,u.m]],{disabled:[0,"disabled"]},null),(t()(),n._16(15,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null))],function(t,e){var i=e.component;t(e,4,0,i._disableScrollBefore||i.disableRipple),t(e,14,0,i._disableScrollAfter||i.disableRipple)},function(t,e){var i=e.component;t(e,3,0,i._disableScrollBefore,n._28(e,4).unbounded),t(e,13,0,i._disableScrollAfter,n._28(e,14).unbounded)})}n._12("mat-tab-header",r.f,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,"mat-tab-header",[["class","mat-tab-header"]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null]],null,null,w,A)),n._15(1,3325952,null,1,r.f,[n.o,n.h,c.g,[2,s.c]],null,null),n._35(603979776,1,{_labelWrappers:1})],null,function(t,e){t(e,0,0,n._28(e,1)._showPaginationControls,"rtl"==n._28(e,1)._getLayoutDirection())})},{disableRipple:"disableRipple",selectedIndex:"selectedIndex"},{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},["*"]);var P=n._14({encapsulation:2,styles:[],data:{}});function E(t){return n._39(0,[n._27(null,0),(t()(),n._11(0,null,null,0))],null,null)}function T(t){return n._39(2,[n._35(402653184,1,{_content:0}),(t()(),n._11(0,[[1,2]],null,0,null,E))],null,null)}n._12("mat-tab",r.b,function(t){return n._39(0,[(t()(),n._16(0,16777216,null,null,2,"mat-tab",[],null,null,null,T,P)),n._15(1,770048,null,1,r.b,[n.Z],null,null),n._35(335544320,1,{templateLabel:0})],function(t,e){t(e,1,0)},null)},{disabled:"disabled",textLabel:"label"},{},["*"]);var S=n._14({encapsulation:2,styles:[".mat-tab-nav-bar{overflow:hidden;position:relative;flex-shrink:0}.mat-tab-links{position:relative}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden}.mat-tab-link:focus{outline:0}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-link.mat-tab-disabled{cursor:default}@media (max-width:599px){.mat-tab-link{min-width:72px}}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}"],data:{}});function C(t){return n._39(2,[n._35(402653184,1,{_inkBar:0}),(t()(),n._16(1,0,null,null,4,"div",[["class","mat-tab-links"]],null,[[null,"cdkObserveContent"]],function(t,e,i){var n=!0,r=t.component;"cdkObserveContent"===e&&(n=!1!==r._alignInkBar()&&n);return n},null,null)),n._15(2,1720320,null,0,l.a,[l.b,n.o,n.F],null,{event:"cdkObserveContent"}),n._27(null,0),(t()(),n._16(4,0,null,null,1,"mat-ink-bar",[["class","mat-ink-bar"]],null,null,null,null,null)),n._15(5,16384,[[1,4]],0,r.a,[n.o,n.F],null,null)],null,null)}n._12("[mat-tab-nav-bar]",r.i,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,2,"div",[["class","mat-tab-nav-bar"],["mat-tab-nav-bar",""]],null,null,null,C,S)),n._15(1,3325952,null,1,r.i,[n.o,[2,s.c],n.F,n.h,c.g],null,null),n._35(603979776,1,{_tabLinks:1})],null,null)},{color:"color",backgroundColor:"backgroundColor",disableRipple:"disableRipple"},{},["*"])},xIGM:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return o});var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=n||"undefined"!=typeof t&&t||r}).call(e,i("GTd5"))},xqKW:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("PlHj"),r=function(){function t(){this.canvasWidth=300,this.canvasHeight=300,this.dynamicSizing=!1,this.width=200,this.height=200,this.minWidth=50,this.minHeight=50,this.minWithRelativeToResolution=!0,this.croppedWidth=100,this.croppedHeight=100,this.cropperDrawSettings=new n.a,this.touchRadius=20,this.noFileInput=!1,this.allowedFilesRegex=/\.(jpe?g|png|gif)$/i,this.cropOnResize=!0,this.preserveSize=!1,this.compressRatio=1,this._rounded=!1,this._keepAspect=!0}return Object.defineProperty(t.prototype,"rounded",{get:function(){return this._rounded},set:function(t){this._rounded=t,t&&(this._keepAspect=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepAspect",{get:function(){return this._keepAspect},set:function(t){if(!1===t&&this._rounded)throw new Error("Cannot set keep aspect to false on rounded cropper. Ellipsis not supported");this._keepAspect=t},enumerable:!0,configurable:!0}),t}()},yY5i:function(t,e,i){"use strict";var n=i("zOKz").Buffer,r=i(2);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,i=o,r=a,e.copy(i,r),a+=s.data.length,s=s.next;return o},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},yxpl:function(t,e,i){"use strict";i.d(e,"a",function(){return u}),e.b=h;var n=i("LMZF"),r=i("vgc3"),o=i("l6RC"),s=i("Un6q"),a=i("9iV4"),l=i("RyBE"),c=i("j5BN"),u=(n._13(r.c,[],function(t){return n._24([n._25(512,n.k,n._9,[[8,[]],[3,n.k],n.D]),n._25(6144,o.b,null,[s.c]),n._25(4608,o.c,o.c,[[2,o.b]]),n._25(5120,r.d,r.a,[[3,r.d],[2,a.c],l.c,[2,s.c]]),n._25(512,o.a,o.a,[]),n._25(256,c.f,!0,[]),n._25(512,c.n,c.n,[[2,c.f]]),n._25(512,r.c,r.c,[])])}),n._14({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}"],data:{}}));function h(t){return n._39(2,[n._27(null,0)],null,null)}n._12("mat-icon",r.b,function(t){return n._39(0,[(t()(),n._16(0,0,null,null,1,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,h,u)),n._15(1,638976,null,0,r.b,[n.o,r.d,[8,null]],null,null)],function(t,e){t(e,1,0)},null)},{color:"color",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},{},["*"])},zOKz:function(t,e,i){var n=i("v0OU"),r=n.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(r,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},zQfh:function(t,e,i){"use strict";var n=i("LMZF"),r=i("RyBE"),o=i("qqDE"),s=i("6Xbx"),a=i("Un6q"),l=i("eoFs"),c=i("LaOa"),u=i("TO51"),h=i("GTlS"),p=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},d=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.work=i}return p(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,n):e.flush(this)},e}(h.a),f=i("wclm"),m=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},g=new(function(t){function e(){t.apply(this,arguments)}return m(e,t),e}(f.a))(d),y=i("qLnt"),_=i("YRqN"),v=i("Upor"),b=i("jaVc"),x=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},A=function(t){function e(e,i,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=n,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=i<1?1:i}return x(e,t),e.prototype.next=function(e){var i=this._getNow();this._events.push(new w(i,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new v.a;this.hasError?e=y.a.EMPTY:this.isStopped?e=y.a.EMPTY:(this.observers.push(t),e=new b.a(this,t)),n&&t.add(t=new _.a(t,n));for(var r=i.length,o=0;o<r&&!t.closed;o++)t.next(i[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||g).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,r=n.length,o=0;o<r&&!(t-n[o].time<i);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&n.splice(0,o),n},e}(u.a),w=function(){return function(t,e){this.time=t,this.value=e}}();i.d(e,"h",function(){return X}),i.d(e,"g",function(){return Y}),i.d(e,"i",function(){return q}),i.d(e,"j",function(){return K}),i.d(e,"e",function(){return Z}),i.d(e,"d",function(){return J}),i.d(e,"q",function(){return mt}),i.d(e,"a",function(){return V}),i.d(e,"b",function(){return z}),i.d(e,"p",function(){return Pt}),i.d(e,"l",function(){return j}),i.d(e,"m",function(){return H}),i.d(e,"c",function(){return Mt}),i.d(e,"o",function(){return Dt}),i.d(e,"k",function(){return kt}),i.d(e,"n",function(){return Nt}),i.d(e,"f",function(){return Vt});new n.W("2.0.0-beta.11-9e52109");var P=["row","column","row-reverse","column-reverse"];function E(t){var e=T(t);return function(t,e){void 0===e&&(e=null);return{display:"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(e[0],e[1])}function T(t){var e=(t=t?t.toLowerCase():"").split(" "),i=e[0],n=e[1];return P.find(function(t){return t===i})||(i=P[0]),[i,C(n)]}function S(t){var e=T(t),i=e[0];e[1];return i.indexOf("row")>-1}function C(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}function O(t){for(var e in t){var i=t[e]||"";switch(e){case"display":t.display="flex"===i?["-webkit-flex","flex"]:"inline-flex"===i?["-webkit-inline-flex","inline-flex"]:i;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+e]=i;break;case"flex-direction":i=i||"row",t["-webkit-flex-direction"]=i,t["flex-direction"]=i;break;case"order":t.order=t["-webkit-"+e]=isNaN(i)?"0":i}}return t}function M(t,e,i){var n=O(e);i.forEach(function(e){R(n,e,t)})}function R(t,e,i){Object.keys(t).sort().forEach(function(n){for(var r=0,o=Array.isArray(t[n])?t[n]:[t[n]];r<o.length;r++){var s=o[r];i.setStyle(e,n,s)}})}function I(t,e){return Object(r.s)().getStyle(t,e)}function D(t,e,i){void 0===i&&(i=!1);var n="";if(t)try{var o=n=I(t,e);i||(n=o||Object(r.s)().getComputedStyle(t).getPropertyValue(e))}catch(t){}return n?n.trim():"block"}function L(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var n=0,r=e;n<r.length;n++){var o=r[n];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(t[s]=o[s])}return t}var k=function(){return function(t,e,i){this.baseKey=t,this.defaultValue=e,this.inputKeys=i}}(),F=function(){function t(t,e,i){this._options=t,this._mediaMonitor=e,this._onMediaChanges=i,this._subscribers=[],this._registryMap=this._buildRegistryMap(),this._subscribers=this._configureChangeObservers()}return Object.defineProperty(t.prototype,"registryFromLargest",{get:function(){return this._registryMap.slice().reverse()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mediaMonitor",{get:function(){return this._mediaMonitor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedInputKey",{get:function(){return this._activatedInputKey||this._options.baseKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedInput",{get:function(){var t=this.activatedInputKey;return this.hasKeyValue(t)?this._lookupKeyValue(t):this._options.defaultValue},enumerable:!0,configurable:!0}),t.prototype.hasKeyValue=function(t){return"undefined"!=typeof this._options.inputKeys[t]},t.prototype.destroy=function(){this._subscribers.forEach(function(t){t.unsubscribe()}),this._subscribers=[]},t.prototype._configureChangeObservers=function(){var t=this,e=[];return this._registryMap.forEach(function(i){if(t._keyInUse(i.key)){e.push(t.mediaMonitor.observe(i.alias).pipe(Object(o.a)(function(e){return(e=e.clone()).property=t._options.baseKey,e})).subscribe(function(e){t._onMonitorEvents(e)}))}}),e},t.prototype._buildRegistryMap=function(){var t=this;return this.mediaMonitor.breakpoints.map(function(e){return L({},e,{baseKey:t._options.baseKey,key:t._options.baseKey+e.suffix})}).filter(function(e){return t._keyInUse(e.key)})},t.prototype._onMonitorEvents=function(t){t.property==this._options.baseKey&&(t.value=this._calculateActivatedValue(t),this._onMediaChanges(t))},t.prototype._keyInUse=function(t){return void 0!==this._lookupKeyValue(t)},t.prototype._calculateActivatedValue=function(t){var e=this._options.baseKey+t.suffix,i=this._activatedInputKey;return i=t.matches?e:i==e?"":i,this._activatedInputKey=this._validateInputKey(i),this.activatedInput},t.prototype._validateInputKey=function(t){var e=this,i=function(t){return!e._keyInUse(t)};return i(t)&&this.mediaMonitor.activeOverlaps.some(function(n){var r=e._options.baseKey+n.suffix;return!i(r)&&(t=r,!0)}),t},t.prototype._lookupKeyValue=function(t){return this._options.inputKeys[t]},t}(),N=function(){function t(t,e,i){this._mediaMonitor=t,this._elementRef=e,this._renderer=i,this._inputMap={},this._hasInitialized=!1}return Object.defineProperty(t.prototype,"hasMediaQueryListener",{get:function(){return!!this._mqActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedValue",{get:function(){return this._mqActivation?this._mqActivation.activatedInput:void 0},set:function(t){var e,i="baseKey";this._mqActivation&&(i=this._mqActivation.activatedInputKey,e=this._inputMap[i],this._inputMap[i]=t);var r,o=new n.S(e,t,!1);this.ngOnChanges(((r={})[i]=o,r))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this._elementRef.nativeElement.parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this._elementRef.nativeElement},enumerable:!0,configurable:!0}),t.prototype._queryInput=function(t){return this._inputMap[t]},t.prototype.ngOnInit=function(){this._display=this._getDisplayStyle(),this._hasInitialized=!0},t.prototype.ngOnChanges=function(t){throw new Error("BaseFxDirective::ngOnChanges should be overridden in subclass: "+t)},t.prototype.ngOnDestroy=function(){this._mqActivation&&this._mqActivation.destroy(),this._mediaMonitor=null},t.prototype._getDefaultVal=function(t,e){var i=this._queryInput(t);return null!=i&&""!==i?i:e},t.prototype._getDisplayStyle=function(t){return void 0===t&&(t=this.nativeElement),D(t||this.nativeElement,"display")},t.prototype._getAttributeValue=function(t,e){return void 0===e&&(e=this.nativeElement),function(t,e){return Object(r.s)().getAttribute(t,e)||""}(e||this.nativeElement,t)},t.prototype._getFlowDirection=function(t,e){void 0===e&&(e=!1);var i="row";t&&(i=D(t,"flex-direction")||"row",!I(t,"flex-direction")&&e&&M(this._renderer,E(i),[t]));return i.trim()},t.prototype._applyStyleToElement=function(t,e,i){void 0===i&&(i=this.nativeElement);var n=i||this.nativeElement;!function(t,e,i,n){var r={};"string"==typeof i&&(r[i]=n,i=r),R(r=O(i),e,t)}(this._renderer,n,t,e)},t.prototype._applyStyleToElements=function(t,e){M(this._renderer,t,e||[])},t.prototype._cacheInput=function(t,e){if("object"==typeof e)for(var i in e)this._inputMap[i]=e[i];else t&&(this._inputMap[t]=e)},t.prototype._listenForMediaQueryChanges=function(t,e,i){if(!this._mqActivation){var n=new k(t,e,this._inputMap);this._mqActivation=new F(n,this._mediaMonitor,function(t){return i(t)})}return this._mqActivation},Object.defineProperty(t.prototype,"childrenNodes",{get:function(){for(var t=this.nativeElement.children,e=[],i=t.length;i--;)e[i]=t[i];return e},enumerable:!0,configurable:!0}),t.prototype.hasResponsiveAPI=function(t){return Object.keys(this._inputMap).length-(this._inputMap[t]?1:0)>0},t.prototype.hasKeyValue=function(t){return this._mqActivation.hasKeyValue(t)},Object.defineProperty(t.prototype,"hasInitialized",{get:function(){return this._hasInitialized},enumerable:!0,configurable:!0}),t}(),B=function(t){function e(e,i,n,r){var o=t.call(this,i,n,r)||this;return o._baseKey=e,o._mediaMonitor=i,o._elementRef=n,o._renderer=r,o}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"activeKey",{get:function(){var t=this._mqActivation,e=t?t.activatedInputKey:this._baseKey;return"class"===e?"klazz":e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputMap",{get:function(){return this._inputMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mqActivation",{get:function(){return this._mqActivation},enumerable:!0,configurable:!0}),e.prototype.hasResponsiveAPI=function(){return t.prototype.hasResponsiveAPI.call(this,this._baseKey)},e.prototype.queryInput=function(t){return t?this._queryInput(t):void 0},e.prototype.cacheInput=function(t,e,i){if(void 0===i&&(i=!1),i)this._cacheInputRaw(t,e);else if(Array.isArray(e))this._cacheInputArray(t,e);else if("object"==typeof e)this._cacheInputObject(t,e);else{if("string"!=typeof e)throw new Error("Invalid class value '"+t+"' provided. Did you want to cache the raw value?");this._cacheInputString(t,e)}},e.prototype.listenForMediaQueryChanges=function(t,e,i){return this._listenForMediaQueryChanges(t,e,i)},e.prototype._cacheInputRaw=function(t,e){this._inputMap[t]=e},e.prototype._cacheInputArray=function(t,e){void 0===t&&(t=""),this._inputMap[t]=e.join(" ")},e.prototype._cacheInputObject=function(t,e){void 0===t&&(t="");var i=[];for(var n in e)e[n]&&i.push(n);this._inputMap[t]=i.join(" ")},e.prototype._cacheInputString=function(t,e){void 0===t&&(t=""),this._inputMap[t]=e},e}(N),V=new n.w("Token (@angular/flex-layout) Breakpoints"),z=function(){function t(t){this._registry=t}return Object.defineProperty(t.prototype,"items",{get:function(){return this._registry.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortedItems",{get:function(){var t=this._registry.filter(function(t){return!0===t.overlapping}),e=this._registry.filter(function(t){return!0!==t.overlapping});return t.concat(e)},enumerable:!0,configurable:!0}),t.prototype.findByAlias=function(t){return this._registry.find(function(e){return e.alias==t})||null},t.prototype.findByQuery=function(t){return this._registry.find(function(e){return e.mediaQuery==t})||null},Object.defineProperty(t.prototype,"overlappings",{get:function(){return this._registry.filter(function(t){return 1==t.overlapping})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aliases",{get:function(){return this._registry.map(function(t){return t.alias})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suffixes",{get:function(){return this._registry.map(function(t){return t.suffix?t.suffix:""})},enumerable:!0,configurable:!0}),t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:n.u,args:[V]}]}]},t}(),U=function(){function t(t,e,i,n){void 0===t&&(t=!1),void 0===e&&(e="all"),void 0===i&&(i=""),void 0===n&&(n=""),this.matches=t,this.mediaQuery=e,this.mqAlias=i,this.suffix=n}return t.prototype.clone=function(){return new t(this.matches,this.mediaQuery,this.mqAlias,this.suffix)},t}(),j=function(){function t(t,e){this._zone=t,this._document=e,this._registry=new Map,this._source=new l.a(new U(!0)),this._observable$=this._source.asObservable()}return t.prototype.isActive=function(t){var e=this._registry.get(t);return!!e&&e.matches},t.prototype.observe=function(t){return t&&this.registerQuery(t),this._observable$.pipe(Object(c.a)(function(e){return!t||e.mediaQuery===t}))},t.prototype.registerQuery=function(t){var e=this,i=function(t){return"undefined"==typeof t?[]:"string"==typeof t?[t]:(e=t,i={},e.filter(function(t){return!i.hasOwnProperty(t)&&(i[t]=!0)}));var e,i}(t);i.length>0&&(!function(t,e){var i=t.filter(function(t){return!G[t]});if(i.length>0){var n=i.join(", ");try{var o=Object(r.s)().createElement("style");if(Object(r.s)().setAttribute(o,"type","text/css"),!o.styleSheet){var s="/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media "+n+" {.fx-query-test{ }}";Object(r.s)().appendChild(o,Object(r.s)().createTextNode(s))}Object(r.s)().appendChild(e.head,o),i.forEach(function(t){return G[t]=o})}catch(t){console.error(t)}}}(i,this._document),i.forEach(function(t){var i=e._registry.get(t),n=function(i){e._zone.run(function(){var n=new U(i.matches,t);e._source.next(n)})};i||((i=e._buildMQL(t)).addListener(n),e._registry.set(t,i)),i.matches&&n(i)}))},t.prototype._buildMQL=function(t){return Object(r.s)().supportsDOMEvents()&&!!window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:n.F},{type:void 0,decorators:[{type:n.u,args:[a.c]}]}]},t}();var G={};function W(t,e){return L(t,e?{mqAlias:e.alias,suffix:e.suffix}:{})}var H=function(){function t(t,e){this._breakpoints=t,this._matchMedia=e,this._registerBreakpoints()}return Object.defineProperty(t.prototype,"breakpoints",{get:function(){return this._breakpoints.items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeOverlaps",{get:function(){var t=this;return this._breakpoints.overlappings.reverse().filter(function(e){return t._matchMedia.isActive(e.mediaQuery)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){var t=this,e=null;this.breakpoints.reverse().forEach(function(i){""!==i.alias&&!e&&t._matchMedia.isActive(i.mediaQuery)&&(e=i)});var i=this.breakpoints[0];return e||(this._matchMedia.isActive(i.mediaQuery)?i:null)},enumerable:!0,configurable:!0}),t.prototype.isActive=function(t){var e=this._breakpoints.findByAlias(t)||this._breakpoints.findByQuery(t);return this._matchMedia.isActive(e?e.mediaQuery:t)},t.prototype.observe=function(t){var e=this._breakpoints.findByAlias(t||"")||this._breakpoints.findByQuery(t||"");return this._matchMedia.observe(e?e.mediaQuery:t).pipe(Object(o.a)(function(t){return W(t,e)}),Object(c.a)(function(t){return!e||""!==t.mqAlias}))},t.prototype._registerBreakpoints=function(){var t=this._breakpoints.sortedItems.map(function(t){return t.mediaQuery});this._matchMedia.registerQuery(t)},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:z},{type:j}]},t}(),X=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r._announcer=new A(1),r.layout$=r._announcer.asObservable(),r}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"layout",{set:function(t){this._cacheInput("layout",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutXs",{set:function(t){this._cacheInput("layoutXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutSm",{set:function(t){this._cacheInput("layoutSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutMd",{set:function(t){this._cacheInput("layoutMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutLg",{set:function(t){this._cacheInput("layoutLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutXl",{set:function(t){this._cacheInput("layoutXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutGtXs",{set:function(t){this._cacheInput("layoutGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutGtSm",{set:function(t){this._cacheInput("layoutGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutGtMd",{set:function(t){this._cacheInput("layoutGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutGtLg",{set:function(t){this._cacheInput("layoutGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutLtSm",{set:function(t){this._cacheInput("layoutLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutLtMd",{set:function(t){this._cacheInput("layoutLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutLtLg",{set:function(t){this._cacheInput("layoutLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutLtXl",{set:function(t){this._cacheInput("layoutLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.layout||this._mqActivation)&&this._updateWithDirection()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("layout","row",function(t){e._updateWithDirection(t.value)}),this._updateWithDirection()},e.prototype._updateWithDirection=function(t){t=t||this._queryInput("layout")||"row",this._mqActivation&&(t=this._mqActivation.activatedInput);var e=E(t||"");this._applyStyleToElement(e),this._announcer.next(e["flex-direction"])},e.decorators=[{type:n.n,args:[{selector:"\n  [fxLayout],\n  [fxLayout.xs], [fxLayout.sm], [fxLayout.md], [fxLayout.lg], [fxLayout.xl],\n  [fxLayout.lt-sm], [fxLayout.lt-md], [fxLayout.lt-lg], [fxLayout.lt-xl],\n  [fxLayout.gt-xs], [fxLayout.gt-sm], [fxLayout.gt-md], [fxLayout.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M}]},e.propDecorators={layout:[{type:n.y,args:["fxLayout"]}],layoutXs:[{type:n.y,args:["fxLayout.xs"]}],layoutSm:[{type:n.y,args:["fxLayout.sm"]}],layoutMd:[{type:n.y,args:["fxLayout.md"]}],layoutLg:[{type:n.y,args:["fxLayout.lg"]}],layoutXl:[{type:n.y,args:["fxLayout.xl"]}],layoutGtXs:[{type:n.y,args:["fxLayout.gt-xs"]}],layoutGtSm:[{type:n.y,args:["fxLayout.gt-sm"]}],layoutGtMd:[{type:n.y,args:["fxLayout.gt-md"]}],layoutGtLg:[{type:n.y,args:["fxLayout.gt-lg"]}],layoutLtSm:[{type:n.y,args:["fxLayout.lt-sm"]}],layoutLtMd:[{type:n.y,args:["fxLayout.lt-md"]}],layoutLtLg:[{type:n.y,args:["fxLayout.lt-lg"]}],layoutLtXl:[{type:n.y,args:["fxLayout.lt-xl"]}]},e}(N),Y=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o._layout="row",r&&(o._layoutWatcher=r.layout$.subscribe(o._onLayoutChange.bind(o))),o}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"align",{set:function(t){this._cacheInput("align",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignXs",{set:function(t){this._cacheInput("alignXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignSm",{set:function(t){this._cacheInput("alignSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignMd",{set:function(t){this._cacheInput("alignMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLg",{set:function(t){this._cacheInput("alignLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignXl",{set:function(t){this._cacheInput("alignXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtXs",{set:function(t){this._cacheInput("alignGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtSm",{set:function(t){this._cacheInput("alignGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtMd",{set:function(t){this._cacheInput("alignGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtLg",{set:function(t){this._cacheInput("alignGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtSm",{set:function(t){this._cacheInput("alignLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtMd",{set:function(t){this._cacheInput("alignLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtLg",{set:function(t){this._cacheInput("alignLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtXl",{set:function(t){this._cacheInput("alignLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.align||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("align","start stretch",function(t){e._updateWithValue(t.value)}),this._updateWithValue()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe()},e.prototype._updateWithValue=function(t){t=t||this._queryInput("align")||"start stretch",this._mqActivation&&(t=this._mqActivation.activatedInput),this._applyStyleToElement(this._buildCSS(t)),this._allowStretching(t,this._layout?this._layout:"row")},e.prototype._onLayoutChange=function(t){var e=this;this._layout=(t||"").toLowerCase(),P.find(function(t){return t===e._layout})||(this._layout="row");var i=this._queryInput("align")||"start stretch";this._mqActivation&&(i=this._mqActivation.activatedInput),this._allowStretching(i,this._layout||"row")},e.prototype._buildCSS=function(t){var e={},i=t.split(" "),n=i[0],r=i[1];switch(n){case"center":e["justify-content"]="center";break;case"space-around":e["justify-content"]="space-around";break;case"space-between":e["justify-content"]="space-between";break;case"space-evenly":e["justify-content"]="space-evenly";break;case"end":case"flex-end":e["justify-content"]="flex-end";break;case"start":case"flex-start":default:e["justify-content"]="flex-start"}switch(r){case"start":case"flex-start":e["align-items"]=e["align-content"]="flex-start";break;case"baseline":e["align-items"]="baseline";break;case"center":e["align-items"]=e["align-content"]="center";break;case"end":case"flex-end":e["align-items"]=e["align-content"]="flex-end";break;case"stretch":default:e["align-items"]=e["align-content"]="stretch"}return L(e,{display:"flex","flex-direction":this._layout||"row","box-sizing":"border-box"})},e.prototype._allowStretching=function(t,e){"stretch"==t.split(" ")[1]&&this._applyStyleToElement({"box-sizing":"border-box","max-width":S(e)?null:"100%","max-height":S(e)?"100%":null})},e.decorators=[{type:n.n,args:[{selector:"\n  [fxLayoutAlign],\n  [fxLayoutAlign.xs], [fxLayoutAlign.sm], [fxLayoutAlign.md], [fxLayoutAlign.lg],[fxLayoutAlign.xl],\n  [fxLayoutAlign.lt-sm], [fxLayoutAlign.lt-md], [fxLayoutAlign.lt-lg], [fxLayoutAlign.lt-xl],\n  [fxLayoutAlign.gt-xs], [fxLayoutAlign.gt-sm], [fxLayoutAlign.gt-md], [fxLayoutAlign.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M},{type:X,decorators:[{type:n.G},{type:n.R}]}]},e.propDecorators={align:[{type:n.y,args:["fxLayoutAlign"]}],alignXs:[{type:n.y,args:["fxLayoutAlign.xs"]}],alignSm:[{type:n.y,args:["fxLayoutAlign.sm"]}],alignMd:[{type:n.y,args:["fxLayoutAlign.md"]}],alignLg:[{type:n.y,args:["fxLayoutAlign.lg"]}],alignXl:[{type:n.y,args:["fxLayoutAlign.xl"]}],alignGtXs:[{type:n.y,args:["fxLayoutAlign.gt-xs"]}],alignGtSm:[{type:n.y,args:["fxLayoutAlign.gt-sm"]}],alignGtMd:[{type:n.y,args:["fxLayoutAlign.gt-md"]}],alignGtLg:[{type:n.y,args:["fxLayoutAlign.gt-lg"]}],alignLtSm:[{type:n.y,args:["fxLayoutAlign.lt-sm"]}],alignLtMd:[{type:n.y,args:["fxLayoutAlign.lt-md"]}],alignLtLg:[{type:n.y,args:["fxLayoutAlign.lt-lg"]}],alignLtXl:[{type:n.y,args:["fxLayoutAlign.lt-xl"]}]},e}(N),q=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n)||this;return s._zone=o,s._layout="row",r&&(s._layoutWatcher=r.layout$.subscribe(s._onLayoutChange.bind(s))),s}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"gap",{set:function(t){this._cacheInput("gap",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapXs",{set:function(t){this._cacheInput("gapXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapSm",{set:function(t){this._cacheInput("gapSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapMd",{set:function(t){this._cacheInput("gapMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapLg",{set:function(t){this._cacheInput("gapLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapXl",{set:function(t){this._cacheInput("gapXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapGtXs",{set:function(t){this._cacheInput("gapGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapGtSm",{set:function(t){this._cacheInput("gapGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapGtMd",{set:function(t){this._cacheInput("gapGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapGtLg",{set:function(t){this._cacheInput("gapGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapLtSm",{set:function(t){this._cacheInput("gapLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapLtMd",{set:function(t){this._cacheInput("gapLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapLtLg",{set:function(t){this._cacheInput("gapLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapLtXl",{set:function(t){this._cacheInput("gapLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.gap||this._mqActivation)&&this._updateWithValue()},e.prototype.ngAfterContentInit=function(){var t=this;this._watchContentChanges(),this._listenForMediaQueryChanges("gap","0",function(e){t._updateWithValue(e.value)}),this._updateWithValue()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe(),this._observer&&this._observer.disconnect()},e.prototype._watchContentChanges=function(){var t=this;this._zone.runOutsideAngular(function(){"undefined"!=typeof MutationObserver&&(t._observer=new MutationObserver(function(e){e.some(function(t){return t.addedNodes&&t.addedNodes.length>0||t.removedNodes&&t.removedNodes.length>0})&&t._updateWithValue()}),t._observer.observe(t.nativeElement,{childList:!0}))})},e.prototype._onLayoutChange=function(t){var e=this;this._layout=(t||"").toLowerCase(),P.find(function(t){return t===e._layout})||(this._layout="row"),this._updateWithValue()},e.prototype._updateWithValue=function(t){var e=this;t=t||this._queryInput("gap")||"0",this._mqActivation&&(t=this._mqActivation.activatedInput);var i=this.childrenNodes.filter(function(t){return 1===t.nodeType&&"none"!=e._getDisplayStyle(t)}),n=i.length;if(n>0){var r=i[n-1];i=i.filter(function(t,e){return e<n-1}),this._applyStyleToElements(this._buildCSS(t),i),this._applyStyleToElements(this._buildCSS(),[r])}},e.prototype._buildCSS=function(t){void 0===t&&(t=null);var e,i={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};switch(this._layout){case"column":case"column-reverse":e="margin-bottom";break;case"row":case"row-reverse":default:e="margin-right"}return i[e]=t,i},e.decorators=[{type:n.n,args:[{selector:"\n  [fxLayoutGap],\n  [fxLayoutGap.xs], [fxLayoutGap.sm], [fxLayoutGap.md], [fxLayoutGap.lg], [fxLayoutGap.xl],\n  [fxLayoutGap.lt-sm], [fxLayoutGap.lt-md], [fxLayoutGap.lt-lg], [fxLayoutGap.lt-xl],\n  [fxLayoutGap.gt-xs], [fxLayoutGap.gt-sm], [fxLayoutGap.gt-md], [fxLayoutGap.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M},{type:X,decorators:[{type:n.G},{type:n.R}]},{type:n.F}]},e.propDecorators={gap:[{type:n.y,args:["fxLayoutGap"]}],gapXs:[{type:n.y,args:["fxLayoutGap.xs"]}],gapSm:[{type:n.y,args:["fxLayoutGap.sm"]}],gapMd:[{type:n.y,args:["fxLayoutGap.md"]}],gapLg:[{type:n.y,args:["fxLayoutGap.lg"]}],gapXl:[{type:n.y,args:["fxLayoutGap.xl"]}],gapGtXs:[{type:n.y,args:["fxLayoutGap.gt-xs"]}],gapGtSm:[{type:n.y,args:["fxLayoutGap.gt-sm"]}],gapGtMd:[{type:n.y,args:["fxLayoutGap.gt-md"]}],gapGtLg:[{type:n.y,args:["fxLayoutGap.gt-lg"]}],gapLtSm:[{type:n.y,args:["fxLayoutGap.lt-sm"]}],gapLtMd:[{type:n.y,args:["fxLayoutGap.lt-md"]}],gapLtLg:[{type:n.y,args:["fxLayoutGap.lt-lg"]}],gapLtXl:[{type:n.y,args:["fxLayoutGap.lt-xl"]}]},e}(N),K=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o._layout="row",r&&(o._layoutWatcher=r.layout$.subscribe(o._onLayoutChange.bind(o))),o}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"wrap",{set:function(t){this._cacheInput("wrap",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapXs",{set:function(t){this._cacheInput("wrapXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapSm",{set:function(t){this._cacheInput("wrapSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapMd",{set:function(t){this._cacheInput("wrapMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapLg",{set:function(t){this._cacheInput("wrapLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapXl",{set:function(t){this._cacheInput("wrapXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapGtXs",{set:function(t){this._cacheInput("wrapGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapGtSm",{set:function(t){this._cacheInput("wrapGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapGtMd",{set:function(t){this._cacheInput("wrapGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapGtLg",{set:function(t){this._cacheInput("wrapGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapLtSm",{set:function(t){this._cacheInput("wrapLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapLtMd",{set:function(t){this._cacheInput("wrapLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapLtLg",{set:function(t){this._cacheInput("wrapLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapLtXl",{set:function(t){this._cacheInput("wrapLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.wrap||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("wrap","wrap",function(t){e._updateWithValue(t.value)}),this._updateWithValue()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe()},e.prototype._onLayoutChange=function(t){var e=this;this._layout=(t||"").toLowerCase().replace("-reverse",""),P.find(function(t){return t===e._layout})||(this._layout="row"),this._updateWithValue()},e.prototype._updateWithValue=function(t){t=t||this._queryInput("wrap"),this._mqActivation&&(t=this._mqActivation.activatedInput),t=C(t||"wrap"),this._applyStyleToElement(this._buildCSS(t))},e.prototype._buildCSS=function(t){return{display:"flex","flex-wrap":t,"flex-direction":this.flowDirection}},Object.defineProperty(e.prototype,"flowDirection",{get:function(){var t=this;return this._layoutWatcher?this._layout:t._getFlowDirection(t.nativeElement)},enumerable:!0,configurable:!0}),e.decorators=[{type:n.n,args:[{selector:"\n  [fxLayoutWrap], [fxLayoutWrap.xs], [fxLayoutWrap.sm], [fxLayoutWrap.lg], [fxLayoutWrap.xl],\n  [fxLayoutWrap.gt-xs], [fxLayoutWrap.gt-sm], [fxLayoutWrap.gt-md], [fxLayoutWrap.gt-lg],\n  [fxLayoutWrap.lt-xs], [fxLayoutWrap.lt-sm], [fxLayoutWrap.lt-md], [fxLayoutWrap.lt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M},{type:X,decorators:[{type:n.G},{type:n.R}]}]},e.propDecorators={wrap:[{type:n.y,args:["fxLayoutWrap"]}],wrapXs:[{type:n.y,args:["fxLayoutWrap.xs"]}],wrapSm:[{type:n.y,args:["fxLayoutWrap.sm"]}],wrapMd:[{type:n.y,args:["fxLayoutWrap.md"]}],wrapLg:[{type:n.y,args:["fxLayoutWrap.lg"]}],wrapXl:[{type:n.y,args:["fxLayoutWrap.xl"]}],wrapGtXs:[{type:n.y,args:["fxLayoutWrap.gt-xs"]}],wrapGtSm:[{type:n.y,args:["fxLayoutWrap.gt-sm"]}],wrapGtMd:[{type:n.y,args:["fxLayoutWrap.gt-md"]}],wrapGtLg:[{type:n.y,args:["fxLayoutWrap.gt-lg"]}],wrapLtSm:[{type:n.y,args:["fxLayoutWrap.lt-sm"]}],wrapLtMd:[{type:n.y,args:["fxLayoutWrap.lt-md"]}],wrapLtLg:[{type:n.y,args:["fxLayoutWrap.lt-lg"]}],wrapLtXl:[{type:n.y,args:["fxLayoutWrap.lt-xl"]}]},e}(N);function Q(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}var Z=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n)||this;return s._container=r,s._wrap=o,s._cacheInput("flex",""),s._cacheInput("shrink",1),s._cacheInput("grow",1),r&&(s._layoutWatcher=r.layout$.subscribe(function(t){s._onLayoutChange(t)})),s}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"shrink",{set:function(t){this._cacheInput("shrink",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grow",{set:function(t){this._cacheInput("grow",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flex",{set:function(t){this._cacheInput("flex",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexXs",{set:function(t){this._cacheInput("flexXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexSm",{set:function(t){this._cacheInput("flexSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexMd",{set:function(t){this._cacheInput("flexMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexLg",{set:function(t){this._cacheInput("flexLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexXl",{set:function(t){this._cacheInput("flexXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexGtXs",{set:function(t){this._cacheInput("flexGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexGtSm",{set:function(t){this._cacheInput("flexGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexGtMd",{set:function(t){this._cacheInput("flexGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexGtLg",{set:function(t){this._cacheInput("flexGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexLtSm",{set:function(t){this._cacheInput("flexLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexLtMd",{set:function(t){this._cacheInput("flexLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexLtLg",{set:function(t){this._cacheInput("flexLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexLtXl",{set:function(t){this._cacheInput("flexLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.flex||this._mqActivation)&&this._updateStyle()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("flex","",function(t){e._updateStyle(t.value)}),this._updateStyle()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe()},e.prototype._onLayoutChange=function(t){this._layout=t||this._layout||"row",this._updateStyle()},e.prototype._updateStyle=function(t){var e=t||this._queryInput("flex")||"";this._mqActivation&&(e=this._mqActivation.activatedInput);var i=function(t,e,i){void 0===e&&(e="1"),void 0===i&&(i="1");var n=[e,i,t],r=t.indexOf("calc");if(r>0)n[2]=Q(t.substring(r).trim()),2==(o=t.substr(0,r).trim().split(" ")).length&&(n[0]=o[0],n[1]=o[1]);else if(0==r)n[2]=Q(t.trim());else{var o;n=3===(o=t.split(" ")).length?o:[e,i,t]}return n}(String(e).replace(";",""),this._queryInput("grow"),this._queryInput("shrink"));this._applyStyleToElement(this._validateValue.apply(this,i))},e.prototype._validateValue=function(t,e,i){var n,r,o=this._getFlowDirection(this.parentElement,!0).indexOf("column")>-1?"column":"row";t="0"==t?0:t,e="0"==e?0:e;var s={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(i||""){case"":n=L(s,{flex:t+" "+e+" 0.000000001px"});break;case"initial":case"nogrow":t=0,n=L(s,{flex:"0 1 auto"});break;case"grow":n=L(s,{flex:"1 1 100%"});break;case"noshrink":e=0,n=L(s,{flex:"1 0 auto"});break;case"auto":n=L(s,{flex:t+" "+e+" auto"});break;case"none":t=0,e=0,n=L(s,{flex:"0 0 auto"});break;default:var a=String(i).indexOf("calc")>-1,l=String(i).indexOf("%")>-1&&!a;(r=a||String(i).indexOf("px")>-1||String(i).indexOf("em")>-1||String(i).indexOf("vw")>-1||String(i).indexOf("vh")>-1)||l||isNaN(i)||(i+="%"),"0px"===i&&(i="0%"),n=L(s,{"flex-grow":""+t,"flex-shrink":""+e,"flex-basis":r||this._wrap?""+i:"100%"})}var c=S(o)?"max-width":"max-height",u=S(o)?"min-width":"min-height",h=String(i).indexOf("calc")>-1||"auto"==i,p=String(i).indexOf("px")>-1||h,d=!t&&!e;return n[u]="0%"==i?0:d||p&&t?i:null,n[c]="0%"==i?0:d||!h&&e?i:null,L(n,{"box-sizing":"border-box"})},e.decorators=[{type:n.n,args:[{selector:"\n  [fxFlex],\n  [fxFlex.xs], [fxFlex.sm], [fxFlex.md], [fxFlex.lg], [fxFlex.xl],\n  [fxFlex.lt-sm], [fxFlex.lt-md], [fxFlex.lt-lg], [fxFlex.lt-xl],\n  [fxFlex.gt-xs], [fxFlex.gt-sm], [fxFlex.gt-md], [fxFlex.gt-lg],\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M},{type:X,decorators:[{type:n.G},{type:n.T}]},{type:K,decorators:[{type:n.G},{type:n.T}]}]},e.propDecorators={shrink:[{type:n.y,args:["fxShrink"]}],grow:[{type:n.y,args:["fxGrow"]}],flex:[{type:n.y,args:["fxFlex"]}],flexXs:[{type:n.y,args:["fxFlex.xs"]}],flexSm:[{type:n.y,args:["fxFlex.sm"]}],flexMd:[{type:n.y,args:["fxFlex.md"]}],flexLg:[{type:n.y,args:["fxFlex.lg"]}],flexXl:[{type:n.y,args:["fxFlex.xl"]}],flexGtXs:[{type:n.y,args:["fxFlex.gt-xs"]}],flexGtSm:[{type:n.y,args:["fxFlex.gt-sm"]}],flexGtMd:[{type:n.y,args:["fxFlex.gt-md"]}],flexGtLg:[{type:n.y,args:["fxFlex.gt-lg"]}],flexLtSm:[{type:n.y,args:["fxFlex.lt-sm"]}],flexLtMd:[{type:n.y,args:["fxFlex.lt-md"]}],flexLtLg:[{type:n.y,args:["fxFlex.lt-lg"]}],flexLtXl:[{type:n.y,args:["fxFlex.lt-xl"]}]},e}(N),J=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"align",{set:function(t){this._cacheInput("align",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignXs",{set:function(t){this._cacheInput("alignXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignSm",{set:function(t){this._cacheInput("alignSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignMd",{set:function(t){this._cacheInput("alignMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLg",{set:function(t){this._cacheInput("alignLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignXl",{set:function(t){this._cacheInput("alignXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtSm",{set:function(t){this._cacheInput("alignLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtMd",{set:function(t){this._cacheInput("alignLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtLg",{set:function(t){this._cacheInput("alignLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLtXl",{set:function(t){this._cacheInput("alignLtXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtXs",{set:function(t){this._cacheInput("alignGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtSm",{set:function(t){this._cacheInput("alignGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtMd",{set:function(t){this._cacheInput("alignGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignGtLg",{set:function(t){this._cacheInput("alignGtLg",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.align||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("align","stretch",function(t){e._updateWithValue(t.value)}),this._updateWithValue()},e.prototype._updateWithValue=function(t){t=t||this._queryInput("align")||"stretch",this._mqActivation&&(t=this._mqActivation.activatedInput),this._applyStyleToElement(this._buildCSS(t))},e.prototype._buildCSS=function(t){var e={};switch(t){case"start":e["align-self"]="flex-start";break;case"end":e["align-self"]="flex-end";break;default:e["align-self"]=t}return e},e.decorators=[{type:n.n,args:[{selector:"\n  [fxFlexAlign],\n  [fxFlexAlign.xs], [fxFlexAlign.sm], [fxFlexAlign.md], [fxFlexAlign.lg], [fxFlexAlign.xl],\n  [fxFlexAlign.lt-sm], [fxFlexAlign.lt-md], [fxFlexAlign.lt-lg], [fxFlexAlign.lt-xl],\n  [fxFlexAlign.gt-xs], [fxFlexAlign.gt-sm], [fxFlexAlign.gt-md], [fxFlexAlign.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M}]},e.propDecorators={align:[{type:n.y,args:["fxFlexAlign"]}],alignXs:[{type:n.y,args:["fxFlexAlign.xs"]}],alignSm:[{type:n.y,args:["fxFlexAlign.sm"]}],alignMd:[{type:n.y,args:["fxFlexAlign.md"]}],alignLg:[{type:n.y,args:["fxFlexAlign.lg"]}],alignXl:[{type:n.y,args:["fxFlexAlign.xl"]}],alignLtSm:[{type:n.y,args:["fxFlexAlign.lt-sm"]}],alignLtMd:[{type:n.y,args:["fxFlexAlign.lt-md"]}],alignLtLg:[{type:n.y,args:["fxFlexAlign.lt-lg"]}],alignLtXl:[{type:n.y,args:["fxFlexAlign.lt-xl"]}],alignGtXs:[{type:n.y,args:["fxFlexAlign.gt-xs"]}],alignGtSm:[{type:n.y,args:["fxFlexAlign.gt-sm"]}],alignGtMd:[{type:n.y,args:["fxFlexAlign.gt-md"]}],alignGtLg:[{type:n.y,args:["fxFlexAlign.gt-lg"]}]},e}(N),$={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"},tt=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.elRef=i,r.renderer=n,r._applyStyleToElement($),r}return Object(s.b)(e,t),e.decorators=[{type:n.n,args:[{selector:"\n  [fxFill],\n  [fxFlexFill]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M}]},e}(N),et=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o._container=r,o._layout="row",o.watchParentFlow(),o}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"offset",{set:function(t){this._cacheInput("offset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetXs",{set:function(t){this._cacheInput("offsetXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetSm",{set:function(t){this._cacheInput("offsetSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetMd",{set:function(t){this._cacheInput("offsetMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetLg",{set:function(t){this._cacheInput("offsetLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetXl",{set:function(t){this._cacheInput("offsetXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetLtSm",{set:function(t){this._cacheInput("offsetLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetLtMd",{set:function(t){this._cacheInput("offsetLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetLtLg",{set:function(t){this._cacheInput("offsetLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetLtXl",{set:function(t){this._cacheInput("offsetLtXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetGtXs",{set:function(t){this._cacheInput("offsetGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetGtSm",{set:function(t){this._cacheInput("offsetGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetGtMd",{set:function(t){this._cacheInput("offsetGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetGtLg",{set:function(t){this._cacheInput("offsetGtLg",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.offset||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("offset",0,function(t){e._updateWithValue(t.value)})},e.prototype.watchParentFlow=function(){var t=this;this._container&&(this._layoutWatcher=this._container.layout$.subscribe(function(e){t._onLayoutChange(e)}))},e.prototype._onLayoutChange=function(t){this._layout=t||this._layout||"row",this._updateWithValue()},e.prototype._updateWithValue=function(t){t=t||this._queryInput("offset")||0,this._mqActivation&&(t=this._mqActivation.activatedInput),this._applyStyleToElement(this._buildCSS(t))},e.prototype._buildCSS=function(t){var e=String(t).indexOf("%")>-1;return String(t).indexOf("px")>-1||e||isNaN(t)||(t+="%"),S(this._getFlowDirection(this.parentElement,!0))?{"margin-left":""+t}:{"margin-top":""+t}},e.decorators=[{type:n.n,args:[{selector:"\n  [fxFlexOffset],\n  [fxFlexOffset.xs], [fxFlexOffset.sm], [fxFlexOffset.md], [fxFlexOffset.lg], [fxFlexOffset.xl],\n  [fxFlexOffset.lt-sm], [fxFlexOffset.lt-md], [fxFlexOffset.lt-lg], [fxFlexOffset.lt-xl],\n  [fxFlexOffset.gt-xs], [fxFlexOffset.gt-sm], [fxFlexOffset.gt-md], [fxFlexOffset.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M},{type:X,decorators:[{type:n.G},{type:n.T}]}]},e.propDecorators={offset:[{type:n.y,args:["fxFlexOffset"]}],offsetXs:[{type:n.y,args:["fxFlexOffset.xs"]}],offsetSm:[{type:n.y,args:["fxFlexOffset.sm"]}],offsetMd:[{type:n.y,args:["fxFlexOffset.md"]}],offsetLg:[{type:n.y,args:["fxFlexOffset.lg"]}],offsetXl:[{type:n.y,args:["fxFlexOffset.xl"]}],offsetLtSm:[{type:n.y,args:["fxFlexOffset.lt-sm"]}],offsetLtMd:[{type:n.y,args:["fxFlexOffset.lt-md"]}],offsetLtLg:[{type:n.y,args:["fxFlexOffset.lt-lg"]}],offsetLtXl:[{type:n.y,args:["fxFlexOffset.lt-xl"]}],offsetGtXs:[{type:n.y,args:["fxFlexOffset.gt-xs"]}],offsetGtSm:[{type:n.y,args:["fxFlexOffset.gt-sm"]}],offsetGtMd:[{type:n.y,args:["fxFlexOffset.gt-md"]}],offsetGtLg:[{type:n.y,args:["fxFlexOffset.gt-lg"]}]},e}(N),it=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"order",{set:function(t){this._cacheInput("order",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderXs",{set:function(t){this._cacheInput("orderXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderSm",{set:function(t){this._cacheInput("orderSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderMd",{set:function(t){this._cacheInput("orderMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderLg",{set:function(t){this._cacheInput("orderLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderXl",{set:function(t){this._cacheInput("orderXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGtXs",{set:function(t){this._cacheInput("orderGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGtSm",{set:function(t){this._cacheInput("orderGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGtMd",{set:function(t){this._cacheInput("orderGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGtLg",{set:function(t){this._cacheInput("orderGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderLtSm",{set:function(t){this._cacheInput("orderLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderLtMd",{set:function(t){this._cacheInput("orderLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderLtLg",{set:function(t){this._cacheInput("orderLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderLtXl",{set:function(t){this._cacheInput("orderLtXl",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){(null!=t.order||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this._listenForMediaQueryChanges("order","0",function(t){e._updateWithValue(t.value)}),this._updateWithValue()},e.prototype._updateWithValue=function(t){t=t||this._queryInput("order")||"0",this._mqActivation&&(t=this._mqActivation.activatedInput),this._applyStyleToElement(this._buildCSS(t))},e.prototype._buildCSS=function(t){return t=parseInt(t,10),{order:isNaN(t)?0:t}},e.decorators=[{type:n.n,args:[{selector:"\n  [fxFlexOrder],\n  [fxFlexOrder.xs], [fxFlexOrder.sm], [fxFlexOrder.md], [fxFlexOrder.lg], [fxFlexOrder.xl],\n  [fxFlexOrder.lt-sm], [fxFlexOrder.lt-md], [fxFlexOrder.lt-lg], [fxFlexOrder.lt-xl],\n  [fxFlexOrder.gt-xs], [fxFlexOrder.gt-sm], [fxFlexOrder.gt-md], [fxFlexOrder.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:n.o},{type:n.M}]},e.propDecorators={order:[{type:n.y,args:["fxFlexOrder"]}],orderXs:[{type:n.y,args:["fxFlexOrder.xs"]}],orderSm:[{type:n.y,args:["fxFlexOrder.sm"]}],orderMd:[{type:n.y,args:["fxFlexOrder.md"]}],orderLg:[{type:n.y,args:["fxFlexOrder.lg"]}],orderXl:[{type:n.y,args:["fxFlexOrder.xl"]}],orderGtXs:[{type:n.y,args:["fxFlexOrder.gt-xs"]}],orderGtSm:[{type:n.y,args:["fxFlexOrder.gt-sm"]}],orderGtMd:[{type:n.y,args:["fxFlexOrder.gt-md"]}],orderGtLg:[{type:n.y,args:["fxFlexOrder.gt-lg"]}],orderLtSm:[{type:n.y,args:["fxFlexOrder.lt-sm"]}],orderLtMd:[{type:n.y,args:["fxFlexOrder.lt-md"]}],orderLtLg:[{type:n.y,args:["fxFlexOrder.lt-lg"]}],orderLtXl:[{type:n.y,args:["fxFlexOrder.lt-xl"]}]},e}(N),nt=function(){function t(t){this._renderer=t}return t.prototype.setElementClass=function(t,e,i){i?this._renderer.addClass(t,e):this._renderer.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,i){i?this._renderer.setStyle(t,e,i):this._renderer.removeStyle(t,e)},t.prototype.addClass=function(t,e){this._renderer.addClass(t,e)},t.prototype.removeClass=function(t,e){this._renderer.removeClass(t,e)},t.prototype.setStyle=function(t,e,i,n){this._renderer.setStyle(t,e,i,n)},t.prototype.removeStyle=function(t,e,i){this._renderer.removeStyle(t,e,i)},t.prototype.animate=function(){throw rt("animate")},t.prototype.attachViewAfter=function(){throw rt("attachViewAfter")},t.prototype.detachView=function(){throw rt("detachView")},t.prototype.destroyView=function(){throw rt("destroyView")},t.prototype.createElement=function(){throw rt("createElement")},t.prototype.createViewRoot=function(){throw rt("createViewRoot")},t.prototype.createTemplateAnchor=function(){throw rt("createTemplateAnchor")},t.prototype.createText=function(){throw rt("createText")},t.prototype.invokeElementMethod=function(){throw rt("invokeElementMethod")},t.prototype.projectNodes=function(){throw rt("projectNodes")},t.prototype.selectRootElement=function(){throw rt("selectRootElement")},t.prototype.setBindingDebugInfo=function(){throw rt("setBindingDebugInfo")},t.prototype.setElementProperty=function(){throw rt("setElementProperty")},t.prototype.setElementAttribute=function(){throw rt("setElementAttribute")},t.prototype.setText=function(){throw rt("setText")},t.prototype.listen=function(){throw rt("listen")},t.prototype.listenGlobal=function(){throw rt("listenGlobal")},t}();function rt(t){return new Error("The method RendererAdapter::"+t+"() has not been implemented")}var ot=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,r,o)||this;return a.monitor=e,a._iterableDiffers=i,a._keyValueDiffers=n,a._ngEl=r,a._renderer=o,a._ngClassInstance=s,a._configureAdapters(),a}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"ngClassBase",{set:function(t){this._base.cacheInput("ngClass",t,!0),this._ngClassInstance.ngClass=this._base.queryInput("ngClass")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"klazz",{set:function(t){this._base.cacheInput("class",t),this._ngClassInstance.klass=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassXs",{set:function(t){this._base.cacheInput("ngClassXs",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassSm",{set:function(t){this._base.cacheInput("ngClassSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassMd",{set:function(t){this._base.cacheInput("ngClassMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassLg",{set:function(t){this._base.cacheInput("ngClassLg",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassXl",{set:function(t){this._base.cacheInput("ngClassXl",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassLtSm",{set:function(t){this._base.cacheInput("ngClassLtSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassLtMd",{set:function(t){this._base.cacheInput("ngClassLtMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassLtLg",{set:function(t){this._base.cacheInput("ngClassLtLg",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassLtXl",{set:function(t){this._base.cacheInput("ngClassLtXl",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassGtXs",{set:function(t){this._base.cacheInput("ngClassGtXs",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassGtSm",{set:function(t){this._base.cacheInput("ngClassGtSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassGtMd",{set:function(t){this._base.cacheInput("ngClassGtMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassGtLg",{set:function(t){this._base.cacheInput("ngClassGtLg",t,!0)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){this._base.activeKey in t&&(this._ngClassInstance.ngClass=this._base.mqActivation.activatedInput||"")},e.prototype.ngOnInit=function(){this._configureMQListener()},e.prototype.ngDoCheck=function(){this._ngClassInstance.ngDoCheck()},e.prototype.ngOnDestroy=function(){this._base.ngOnDestroy(),this._ngClassInstance=null},e.prototype._configureAdapters=function(){if(this._base=new B("ngClass",this.monitor,this._ngEl,this._renderer),!this._ngClassInstance){var t=new nt(this._renderer);this._ngClassInstance=new a.g(this._iterableDiffers,this._keyValueDiffers,this._ngEl,t)}},e.prototype._configureMQListener=function(t){var e=this;void 0===t&&(t="ngClass");var i=this._base.queryInput(t);this._base.listenForMediaQueryChanges(t,i,function(t){e._ngClassInstance.ngClass=t.value||"",e._ngClassInstance.ngDoCheck()})},e.decorators=[{type:n.n,args:[{selector:"\n    [ngClass.xs], [ngClass.sm], [ngClass.md], [ngClass.lg], [ngClass.xl],\n    [ngClass.lt-sm], [ngClass.lt-md], [ngClass.lt-lg], [ngClass.lt-xl],\n    [ngClass.gt-xs], [ngClass.gt-sm], [ngClass.gt-md], [ngClass.gt-lg]\n  "}]}],e.ctorParameters=function(){return[{type:H},{type:n.z},{type:n.A},{type:n.o},{type:n.M},{type:a.g,decorators:[{type:n.G},{type:n.R}]}]},e.propDecorators={ngClassBase:[{type:n.y,args:["ngClass"]}],klazz:[{type:n.y,args:["class"]}],ngClassXs:[{type:n.y,args:["ngClass.xs"]}],ngClassSm:[{type:n.y,args:["ngClass.sm"]}],ngClassMd:[{type:n.y,args:["ngClass.md"]}],ngClassLg:[{type:n.y,args:["ngClass.lg"]}],ngClassXl:[{type:n.y,args:["ngClass.xl"]}],ngClassLtSm:[{type:n.y,args:["ngClass.lt-sm"]}],ngClassLtMd:[{type:n.y,args:["ngClass.lt-md"]}],ngClassLtLg:[{type:n.y,args:["ngClass.lt-lg"]}],ngClassLtXl:[{type:n.y,args:["ngClass.lt-xl"]}],ngClassGtXs:[{type:n.y,args:["ngClass.gt-xs"]}],ngClassGtSm:[{type:n.y,args:["ngClass.gt-sm"]}],ngClassGtMd:[{type:n.y,args:["ngClass.gt-md"]}],ngClassGtLg:[{type:n.y,args:["ngClass.gt-lg"]}]},e}(N),st=function(){return function(t,e,i){void 0===i&&(i=!0),this.key=t,this.value=e,this.key=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=this.value.replace(/;/,"")}}(),at={getType:lt,buildRawList:function(t,e){void 0===e&&(e=";");return String(t).trim().split(e).map(function(t){return t.trim()}).filter(function(t){return""!==t})},buildMapFromList:ct,buildMapFromSet:function(t,e){var i=new Array;"set"==lt(t)?t.forEach(function(t){return i.push(t)}):Object.keys(t).forEach(function(e){i.push(e+":"+t[e])});return ct(i,e)}};function lt(t){var e=typeof t;return"object"===e?t.constructor===Array?"array":t.constructor===Set?"set":"object":e}function ct(t,e){return t.map(ut).filter(function(t){return!!t}).map(function(t){return e&&(t.value=e(t.value)),t}).reduce(ht,{})}function ut(t){var e=t.split(":"),i=e[0],n=e[1];return n?new st(i,n):null}function ht(t,e){return e.key&&(t[e.key]=e.value),t}var pt=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,n,r)||this;return a.monitor=e,a._sanitizer=i,a._ngEl=n,a._renderer=r,a._differs=o,a._ngStyleInstance=s,a._configureAdapters(),a}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"ngStyleBase",{set:function(t){this._base.cacheInput("ngStyle",t,!0),this._ngStyleInstance.ngStyle=this._base.queryInput("ngStyle")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleXs",{set:function(t){this._base.cacheInput("ngStyleXs",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleSm",{set:function(t){this._base.cacheInput("ngStyleSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleMd",{set:function(t){this._base.cacheInput("ngStyleMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleLg",{set:function(t){this._base.cacheInput("ngStyleLg",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleXl",{set:function(t){this._base.cacheInput("ngStyleXl",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleLtSm",{set:function(t){this._base.cacheInput("ngStyleLtSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleLtMd",{set:function(t){this._base.cacheInput("ngStyleLtMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleLtLg",{set:function(t){this._base.cacheInput("ngStyleLtLg",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleLtXl",{set:function(t){this._base.cacheInput("ngStyleLtXl",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleGtXs",{set:function(t){this._base.cacheInput("ngStyleGtXs",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleGtSm",{set:function(t){this._base.cacheInput("ngStyleGtSm",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleGtMd",{set:function(t){this._base.cacheInput("ngStyleGtMd",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngStyleGtLg",{set:function(t){this._base.cacheInput("ngStyleGtLg",t,!0)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){this._base.activeKey in t&&(this._ngStyleInstance.ngStyle=this._base.mqActivation.activatedInput||"")},e.prototype.ngOnInit=function(){this._configureMQListener()},e.prototype.ngDoCheck=function(){this._ngStyleInstance.ngDoCheck()},e.prototype.ngOnDestroy=function(){this._base.ngOnDestroy(),this._ngStyleInstance=null},e.prototype._configureAdapters=function(){if(this._base=new B("ngStyle",this.monitor,this._ngEl,this._renderer),!this._ngStyleInstance){var t=new nt(this._renderer);this._ngStyleInstance=new a.l(this._differs,this._ngEl,t)}this._buildCacheInterceptor(),this._fallbackToStyle()},e.prototype._configureMQListener=function(t){var e=this;void 0===t&&(t="ngStyle");var i=this._base.queryInput(t);this._base.listenForMediaQueryChanges(t,i,function(t){e._ngStyleInstance.ngStyle=t.value||"",e._ngStyleInstance.ngDoCheck()})},e.prototype._buildCacheInterceptor=function(){var t=this,e=this._base.cacheInput.bind(this._base);this._base.cacheInput=function(i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!0);var s=t._buildStyleMap(n);o&&(s=L({},t._base.inputMap.ngStyle,s)),e(i,s,r)}},e.prototype._buildStyleMap=function(t){var e=this,i=function(t){return e._sanitizer.sanitize(n.Q.STYLE,t)};if(t)switch(at.getType(t)){case"string":return at.buildMapFromList(at.buildRawList(t),i);case"array":return at.buildMapFromList(t,i);case"set":default:return at.buildMapFromSet(t,i)}return t},e.prototype._fallbackToStyle=function(){this._base.queryInput("ngStyle")||(this.ngStyleBase=this._getAttributeValue("style")||"")},e.decorators=[{type:n.n,args:[{selector:"\n    [ngStyle.xs], [ngStyle.sm], [ngStyle.md], [ngStyle.lg], [ngStyle.xl],\n    [ngStyle.lt-sm], [ngStyle.lt-md], [ngStyle.lt-lg], [ngStyle.lt-xl],\n    [ngStyle.gt-xs], [ngStyle.gt-sm], [ngStyle.gt-md], [ngStyle.gt-lg]\n  "}]}],e.ctorParameters=function(){return[{type:H},{type:r.c},{type:n.o},{type:n.M},{type:n.A},{type:a.l,decorators:[{type:n.G},{type:n.R}]}]},e.propDecorators={ngStyleBase:[{type:n.y,args:["ngStyle"]}],ngStyleXs:[{type:n.y,args:["ngStyle.xs"]}],ngStyleSm:[{type:n.y,args:["ngStyle.sm"]}],ngStyleMd:[{type:n.y,args:["ngStyle.md"]}],ngStyleLg:[{type:n.y,args:["ngStyle.lg"]}],ngStyleXl:[{type:n.y,args:["ngStyle.xl"]}],ngStyleLtSm:[{type:n.y,args:["ngStyle.lt-sm"]}],ngStyleLtMd:[{type:n.y,args:["ngStyle.lt-md"]}],ngStyleLtLg:[{type:n.y,args:["ngStyle.lt-lg"]}],ngStyleLtXl:[{type:n.y,args:["ngStyle.lt-xl"]}],ngStyleGtXs:[{type:n.y,args:["ngStyle.gt-xs"]}],ngStyleGtSm:[{type:n.y,args:["ngStyle.gt-sm"]}],ngStyleGtMd:[{type:n.y,args:["ngStyle.gt-md"]}],ngStyleGtLg:[{type:n.y,args:["ngStyle.gt-lg"]}]},e}(N),dt=["false",!1,0];function ft(t){return""!==t&&("false"===t||0===t||!t)}var mt=function(t){function e(e,i,n,r){var o=t.call(this,e,n,r)||this;return o._layout=i,o.elRef=n,o.renderer=r,i&&(o._layoutWatcher=i.layout$.subscribe(function(){return o._updateWithValue()})),o}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"show",{set:function(t){this._cacheInput("show",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showXs",{set:function(t){this._cacheInput("showXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSm",{set:function(t){this._cacheInput("showSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMd",{set:function(t){this._cacheInput("showMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLg",{set:function(t){this._cacheInput("showLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showXl",{set:function(t){this._cacheInput("showXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLtSm",{set:function(t){this._cacheInput("showLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLtMd",{set:function(t){this._cacheInput("showLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLtLg",{set:function(t){this._cacheInput("showLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLtXl",{set:function(t){this._cacheInput("showLtXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGtXs",{set:function(t){this._cacheInput("showGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGtSm",{set:function(t){this._cacheInput("showGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGtMd",{set:function(t){this._cacheInput("showGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGtLg",{set:function(t){this._cacheInput("showGtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hide",{set:function(t){this._cacheInput("show",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideXs",{set:function(t){this._cacheInput("showXs",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideSm",{set:function(t){this._cacheInput("showSm",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideMd",{set:function(t){this._cacheInput("showMd",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLg",{set:function(t){this._cacheInput("showLg",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideXl",{set:function(t){this._cacheInput("showXl",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLtSm",{set:function(t){this._cacheInput("showLtSm",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLtMd",{set:function(t){this._cacheInput("showLtMd",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLtLg",{set:function(t){this._cacheInput("showLtLg",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideLtXl",{set:function(t){this._cacheInput("showLtXl",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideGtXs",{set:function(t){this._cacheInput("showGtXs",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideGtSm",{set:function(t){this._cacheInput("showGtSm",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideGtMd",{set:function(t){this._cacheInput("showGtMd",ft(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideGtLg",{set:function(t){this._cacheInput("showGtLg",ft(t))},enumerable:!0,configurable:!0}),e.prototype._getDisplayStyle=function(){return this._layout?"flex":t.prototype._getDisplayStyle.call(this)},e.prototype.ngOnChanges=function(t){this.hasInitialized&&(null!=t.show||this._mqActivation)&&this._updateWithValue()},e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this);var i=this._getDefaultVal("show",!0);this._listenForMediaQueryChanges("show",i,function(t){e._updateWithValue(t.value)}),this._updateWithValue()},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._layoutWatcher&&this._layoutWatcher.unsubscribe()},e.prototype._updateWithValue=function(t){t=t||this._getDefaultVal("show",!0),this._mqActivation&&(t=this._mqActivation.activatedInput);var e=this._validateTruthy(t);this._applyStyleToElement(this._buildCSS(e))},e.prototype._buildCSS=function(t){return{display:t?this._display:"none"}},e.prototype._validateTruthy=function(t){return-1==dt.indexOf(t)},e.decorators=[{type:n.n,args:[{selector:"\n  [fxShow],\n  [fxShow.xs], [fxShow.sm], [fxShow.md], [fxShow.lg], [fxShow.xl],\n  [fxShow.lt-sm], [fxShow.lt-md], [fxShow.lt-lg], [fxShow.lt-xl],\n  [fxShow.gt-xs], [fxShow.gt-sm], [fxShow.gt-md], [fxShow.gt-lg],\n  [fxHide],\n  [fxHide.xs], [fxHide.sm], [fxHide.md], [fxHide.lg], [fxHide.xl],\n  [fxHide.lt-sm], [fxHide.lt-md], [fxHide.lt-lg], [fxHide.lt-xl],\n  [fxHide.gt-xs], [fxHide.gt-sm], [fxHide.gt-md], [fxHide.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:H},{type:X,decorators:[{type:n.G},{type:n.R}]},{type:n.o},{type:n.M}]},e.propDecorators={show:[{type:n.y,args:["fxShow"]}],showXs:[{type:n.y,args:["fxShow.xs"]}],showSm:[{type:n.y,args:["fxShow.sm"]}],showMd:[{type:n.y,args:["fxShow.md"]}],showLg:[{type:n.y,args:["fxShow.lg"]}],showXl:[{type:n.y,args:["fxShow.xl"]}],showLtSm:[{type:n.y,args:["fxShow.lt-sm"]}],showLtMd:[{type:n.y,args:["fxShow.lt-md"]}],showLtLg:[{type:n.y,args:["fxShow.lt-lg"]}],showLtXl:[{type:n.y,args:["fxShow.lt-xl"]}],showGtXs:[{type:n.y,args:["fxShow.gt-xs"]}],showGtSm:[{type:n.y,args:["fxShow.gt-sm"]}],showGtMd:[{type:n.y,args:["fxShow.gt-md"]}],showGtLg:[{type:n.y,args:["fxShow.gt-lg"]}],hide:[{type:n.y,args:["fxHide"]}],hideXs:[{type:n.y,args:["fxHide.xs"]}],hideSm:[{type:n.y,args:["fxHide.sm"]}],hideMd:[{type:n.y,args:["fxHide.md"]}],hideLg:[{type:n.y,args:["fxHide.lg"]}],hideXl:[{type:n.y,args:["fxHide.xl"]}],hideLtSm:[{type:n.y,args:["fxHide.lt-sm"]}],hideLtMd:[{type:n.y,args:["fxHide.lt-md"]}],hideLtLg:[{type:n.y,args:["fxHide.lt-lg"]}],hideLtXl:[{type:n.y,args:["fxHide.lt-xl"]}],hideGtXs:[{type:n.y,args:["fxHide.gt-xs"]}],hideGtSm:[{type:n.y,args:["fxHide.gt-sm"]}],hideGtMd:[{type:n.y,args:["fxHide.gt-md"]}],hideGtLg:[{type:n.y,args:["fxHide.gt-lg"]}]},e}(N),gt=function(t){function e(e,i,n){var r=t.call(this,n,e,i)||this;return r._cacheInput("src",e.nativeElement.getAttribute("src")||""),r}return Object(s.b)(e,t),Object.defineProperty(e.prototype,"srcBase",{set:function(t){this.cacheDefaultSrc(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcXs",{set:function(t){this._cacheInput("srcXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcSm",{set:function(t){this._cacheInput("srcSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcMd",{set:function(t){this._cacheInput("srcMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLg",{set:function(t){this._cacheInput("srcLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcXl",{set:function(t){this._cacheInput("srcXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLtSm",{set:function(t){this._cacheInput("srcLtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLtMd",{set:function(t){this._cacheInput("srcLtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLtLg",{set:function(t){this._cacheInput("srcLtLg",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLtXl",{set:function(t){this._cacheInput("srcLtXl",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcGtXs",{set:function(t){this._cacheInput("srcGtXs",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcGtSm",{set:function(t){this._cacheInput("srcGtSm",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcGtMd",{set:function(t){this._cacheInput("srcGtMd",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcGtLg",{set:function(t){this._cacheInput("srcGtLg",t)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this.hasResponsiveKeys&&this._listenForMediaQueryChanges("src",this.defaultSrc,function(){e._updateSrcFor()}),this._updateSrcFor()},e.prototype.ngOnChanges=function(){this.hasInitialized&&this._updateSrcFor()},e.prototype._updateSrcFor=function(){if(this.hasResponsiveKeys){var t=this.activatedValue||this.defaultSrc;this._renderer.setAttribute(this.nativeElement,"src",String(t))}},e.prototype.cacheDefaultSrc=function(t){this._cacheInput("src",t||"")},Object.defineProperty(e.prototype,"defaultSrc",{get:function(){return this._queryInput("src")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasResponsiveKeys",{get:function(){return Object.keys(this._inputMap).length>1},enumerable:!0,configurable:!0}),e.decorators=[{type:n.n,args:[{selector:"\n  img[src.xs],    img[src.sm],    img[src.md],    img[src.lg],   img[src.xl],\n  img[src.lt-sm], img[src.lt-md], img[src.lt-lg], img[src.lt-xl],\n  img[src.gt-xs], img[src.gt-sm], img[src.gt-md], img[src.gt-lg]\n"}]}],e.ctorParameters=function(){return[{type:n.o},{type:n.M},{type:H}]},e.propDecorators={srcBase:[{type:n.y,args:["src"]}],srcXs:[{type:n.y,args:["src.xs"]}],srcSm:[{type:n.y,args:["src.sm"]}],srcMd:[{type:n.y,args:["src.md"]}],srcLg:[{type:n.y,args:["src.lg"]}],srcXl:[{type:n.y,args:["src.xl"]}],srcLtSm:[{type:n.y,args:["src.lt-sm"]}],srcLtMd:[{type:n.y,args:["src.lt-md"]}],srcLtLg:[{type:n.y,args:["src.lt-lg"]}],srcLtXl:[{type:n.y,args:["src.lt-xl"]}],srcGtXs:[{type:n.y,args:["src.gt-xs"]}],srcGtSm:[{type:n.y,args:["src.gt-sm"]}],srcGtMd:[{type:n.y,args:["src.gt-md"]}],srcGtLg:[{type:n.y,args:["src.gt-lg"]}]},e}(N),yt=[{alias:"xs",mediaQuery:"(min-width: 0px) and (max-width: 599px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"(min-width: 600px)"},{alias:"lt-sm",overlapping:!0,mediaQuery:"(max-width: 599px)"},{alias:"sm",mediaQuery:"(min-width: 600px) and (max-width: 959px)"},{alias:"gt-sm",overlapping:!0,mediaQuery:"(min-width: 960px)"},{alias:"lt-md",overlapping:!0,mediaQuery:"(max-width: 959px)"},{alias:"md",mediaQuery:"(min-width: 960px) and (max-width: 1279px)"},{alias:"gt-md",overlapping:!0,mediaQuery:"(min-width: 1280px)"},{alias:"lt-lg",overlapping:!0,mediaQuery:"(max-width: 1279px)"},{alias:"lg",mediaQuery:"(min-width: 1280px) and (max-width: 1919px)"},{alias:"gt-lg",overlapping:!0,mediaQuery:"(min-width: 1920px)"},{alias:"lt-xl",overlapping:!0,mediaQuery:"(max-width: 1920px)"},{alias:"xl",mediaQuery:"(min-width: 1920px) and (max-width: 5000px)"}],_t="(orientations: landscape) and (min-width: 960px) and (max-width: 1279px)",vt="(orientations: portrait) and (min-width: 600px) and (max-width: 839px)",bt="(orientations: portrait) and (min-width: 840px)",xt="(orientations: landscape) and (min-width: 1280px)",At={HANDSET:"(orientations: portrait) and (max-width: 599px), (orientations: landscape) and (max-width: 959px)",TABLET:vt+" , "+_t,WEB:bt+", "+xt+" ",HANDSET_PORTRAIT:"(orientations: portrait) and (max-width: 599px)",TABLET_PORTRAIT:vt+" ",WEB_PORTRAIT:""+bt,HANDSET_LANDSCAPE:"(orientations: landscape) and (max-width: 959px)]",TABLET_LANDSCAPE:""+_t,WEB_LANDSCAPE:""+xt},wt=[{alias:"handset",mediaQuery:At.HANDSET},{alias:"handset.landscape",mediaQuery:At.HANDSET_LANDSCAPE},{alias:"handset.portrait",mediaQuery:At.HANDSET_PORTRAIT},{alias:"tablet",mediaQuery:At.TABLET},{alias:"tablet.landscape",mediaQuery:At.TABLET},{alias:"tablet.portrait",mediaQuery:At.TABLET_PORTRAIT},{alias:"web",mediaQuery:At.WEB,overlapping:!0},{alias:"web.landscape",mediaQuery:At.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",mediaQuery:At.WEB_PORTRAIT,overlapping:!0}],Pt=function(){return function(){}}(),Et=function(){function t(t,e){this.breakpoints=t,this.mediaWatcher=e,this.filterOverlaps=!0,this._registerBreakPoints(),this.observable$=this._buildObservable()}return t.prototype.isActive=function(t){var e=this._toMediaQuery(t);return this.mediaWatcher.isActive(e)},t.prototype.subscribe=function(t,e,i){return this.observable$.subscribe(t,e,i)},t.prototype.asObservable=function(){return this.observable$},t.prototype._registerBreakPoints=function(){var t=this.breakpoints.sortedItems.map(function(t){return t.mediaQuery});this.mediaWatcher.registerQuery(t)},t.prototype._buildObservable=function(){var t=this,e=this;return this.mediaWatcher.observe().pipe(Object(c.a)(function(t){return!0===t.matches}),Object(c.a)(function(i){var n=t.breakpoints.findByQuery(i.mediaQuery);return!n||!(e.filterOverlaps&&n.overlapping)}),Object(o.a)(function(e){return W(e,t._findByQuery(e.mediaQuery))}))},t.prototype._findByAlias=function(t){return this.breakpoints.findByAlias(t)},t.prototype._findByQuery=function(t){return this.breakpoints.findByQuery(t)},t.prototype._toMediaQuery=function(t){var e=this._findByAlias(t)||this._findByQuery(t);return e?e.mediaQuery:t},t.decorators=[{type:n.v}],t.ctorParameters=function(){return[{type:z},{type:j}]},t}(),Tt=/(\.|-|_)/g;function St(t){var e=t.length>0?t.charAt(0):"",i=t.length>1?t.slice(1):"";return e.toUpperCase()+i}function Ct(t){return t.forEach(function(t){t.suffix&&""!==t.suffix||(t.suffix=t.alias.replace(Tt,"|").split("|").map(St).join(""),t.overlapping=t.overlapping||!1)}),t}function Ot(t,e){void 0===e&&(e=[]);var i=t.map(function(t){return L({},t)});return e.forEach(function(t){var e,n=(e=t.alias,i.reduce(function(t,i){return t||(i.alias===e?i:null)},null));n?L(n,t):i.push(t)}),Ct(i)}function Mt(){return Ct(yt)}var Rt={provide:V,useFactory:Mt};function It(t,e){return{provide:V,useFactory:function(t,e){return e=L({},{defaults:!0,orientation:!1},e||{}),function(){var i=e.orientations?wt.concat(yt):yt;return e.defaults?Ot(i,t||[]):Ot(t)}}(t,e)}}function Dt(t,e,i){return t||new Et(i,e)}var Lt={provide:Pt,deps:[[new n.G,new n.T,Pt],j,z],useFactory:Dt};function kt(t,e,i){return t||new H(e,i)}var Ft={provide:H,deps:[[new n.G,new n.T,H],z,j],useFactory:kt},Nt=function(){function t(){}return t.decorators=[{type:n.C,args:[{providers:[Rt,z,j,H,Lt]}]}],t.ctorParameters=function(){return[]},t}(),Bt=[X,K,q,Y,Z,it,et,tt,J,mt,ot,pt,gt],Vt=function(){function t(){}return t.provideBreakPoints=function(e,i){return{ngModule:t,providers:[It(e,i||{orientations:!1})]}},t.decorators=[{type:n.C,args:[{imports:[Nt],exports:[Nt].concat(Bt),declarations:Bt.slice(),providers:[Ft,Rt,Lt]}]}],t.ctorParameters=function(){return[]},t}()}});