<md-sidenav-container class="{{theme}}">
  <md-sidenav #sidenav>
    <gurpsy-side-navigation (onCloseSideNavigation)="sidenav.close()"
                            (onShowLibrary)="onShowLibrary($event)">
    </gurpsy-side-navigation>
  </md-sidenav>

  <md-toolbar class="flex-container">
    <button md-icon-button
            [disabled]="!sheet"
            class="flex-item"
            (click)="sidenav.toggle()">
      <md-icon>menu</md-icon>
    </button>

    <span class="flex-item"
          fxFlex>
      <span *ngIf="!sheet">{{'APPLICATION'| translate}}</span>
      <span *ngIf="sheet">{{sheet.metaData.identity.name}}</span>
    </span>

    <button md-icon-button
            class="flex-item"
            [disabled]="!sheet"
            fxShow="true"
            fxShow.xs="false"
            *ngIf="sheet && !editMode"
            (click)="onEdit(true)">
      <md-icon>lock</md-icon>
    </button>
    <button md-icon-button
            class="flex-item editable"
            [disabled]="!sheet"
            fxShow="true"
            fxShow.xs="false"
            *ngIf="sheet && editMode"
            (click)="onEdit(false)">
      <md-icon>lock_open</md-icon>
    </button>

    <gurpsy-avatar fxShow="false" fxShow.xs class="flex-item"></gurpsy-avatar>

    <div class="headerSettings flex-container flex-item">
      <button md-icon-button [md-menu-trigger-for]="rootMenu">
        <md-icon>more_vert</md-icon>
      </button>
      <md-menu x-position="before" y-position="below" #rootMenu="mdMenu">
        <button mat-menu-item
                [mdMenuTriggerFor]="sheetMenu">
          <md-icon>portrait</md-icon>
          <span>{{ 'MENU.SHEET.SHEET' | translate }}</span>
        </button>
        <button
          md-menu-item
          fxShow="false"
          fxShow.xs
          *ngIf="sheet && !editMode"
          (click)="onEdit(true)">
          <md-icon>lock</md-icon>
          <span>{{ 'MENU.EDIT' | translate }}</span>
        </button>
        <button
          md-menu-item
          fxShow="false"
          fxShow.xs
          *ngIf="sheet && editMode"
          (click)="onEdit(false)">
          <md-icon>lock_open</md-icon>
          <span>{{ 'MENU.LOCK' | translate }}</span>
        </button>
        <button md-menu-item (click)="onOpenThrowDiceDialog()">
          <md-icon svgIcon="d6"></md-icon>
          <span>{{ 'MENU.THROW_DICE' | translate }}</span>
        </button>
        <button md-menu-item (click)="onOpenSettingsDialog()">
          <md-icon>settings</md-icon>
          <span>{{ 'MENU.SETTINGS' | translate }}</span>
        </button>
        <button md-menu-item (click)="onOpenAboutDialog()">
          <md-icon svgIcon="gurpsy-face"></md-icon>
          <span>{{ 'MENU.ABOUT' | translate }}</span>
        </button>
      </md-menu>

      <md-menu #sheetMenu="mdMenu">
        <button md-menu-item
                (click)="onNewSheet()">
          <md-icon>portrait</md-icon>
          <span>{{ 'MENU.SHEET.NEW' | translate }}</span>
        </button>
        <button md-menu-item
                (click)="onOpenSheetDialog()">
          <md-icon>account_box</md-icon>
          <span>{{ 'MENU.SHEET.OPEN' | translate }}</span>
        </button>
        <a md-menu-item
           *ngIf="sheet"
           [href]="templateJsonHref"
           [download]="templateDownloadName">
          <md-icon>save</md-icon>
          <span>{{ 'MENU.SHEET.DOWNLOAD' | translate }}</span>
        </a>
        <button *ngIf="sheet"
                md-menu-item
                (click)="onCloseSheet()">
          <md-icon>highlight_off</md-icon>
          <span>{{ 'MENU.SHEET.CLOSE' | translate }}</span>
        </button>

      </md-menu>
    </div>
  </md-toolbar>

  <div class="gurpsyBody flex-container"
       fxLayout="row"
       fxLayoutAlign="center">
    <gurpsy-book-viewer
      class="flex-item"
      fxFlexAlign="start"
      *ngIf="showLibrary">
    </gurpsy-book-viewer>
    <gurpsy-sheet
      class="flex-item"
      fxFlexAlign="start"
      *ngIf="sheet && !showLibrary">
    </gurpsy-sheet>
    <gurpsy-select-sheet *ngIf="!sheet"
                         class="flex-item"
                         fxFlexAlign="center"
                         (loadTemplateFromFile)="onOpenSheetDialog()"
                         (createTemplate)=onNewSheet()>
    </gurpsy-select-sheet>
  </div>
</md-sidenav-container>







